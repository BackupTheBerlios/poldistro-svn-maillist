<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Poldistro-svn] r906 - in trunk/096: pkg/mobiles/oldAI pkg/mobiles/playervendor pkg/skills/mining pkg/systems/merchantnodes scripts scripts/include/OLD
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/poldistro-svn/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r906%20-%20in%20trunk/096%3A%20pkg/mobiles/oldAI%20pkg/mobiles/playervendor%20pkg/skills/mining%20pkg/systems/merchantnodes%20scripts%20scripts/include/OLD&In-Reply-To=%3C200511050830.jA58UlEE000624%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000879.html">
   <LINK REL="Next"  HREF="000881.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Poldistro-svn] r906 - in trunk/096: pkg/mobiles/oldAI pkg/mobiles/playervendor pkg/skills/mining pkg/systems/merchantnodes scripts scripts/include/OLD</H1>
    <B>Scott E. Royalty at BerliOS</B> 
    <A HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r906%20-%20in%20trunk/096%3A%20pkg/mobiles/oldAI%20pkg/mobiles/playervendor%20pkg/skills/mining%20pkg/systems/merchantnodes%20scripts%20scripts/include/OLD&In-Reply-To=%3C200511050830.jA58UlEE000624%40sheep.berlios.de%3E"
       TITLE="[Poldistro-svn] r906 - in trunk/096: pkg/mobiles/oldAI pkg/mobiles/playervendor pkg/skills/mining pkg/systems/merchantnodes scripts scripts/include/OLD">muaddiblsd at berlios.de
       </A><BR>
    <I>Sat Nov  5 09:30:47 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000879.html">[Poldistro-svn] r905 - in trunk/096: pkg/items/food pkg/items/guildstone pkg/items/magic pkg/items/ministatues pkg/items/repaircontract pkg/items/runebook pkg/items/traps pkg/items/treasuremap pkg/items/usestuff pkg/items/wands pkg/skills/alchemy pkg/skills/blacksmithy pkg/skills/bowcraft pkg/skills/camping pkg/skills/carpentry pkg/skills/cartography pkg/skills/cooking pkg/skills/fishing pkg/skills/healing pkg/skills/inscription pkg/skills/lockpicking pkg/skills/mining pkg/skills/musicianship pkg/skills/poisoning pkg/skills/removetrap pkg/skills/tailoring pkg/skills/tinkering pkg/systems/boat pkg/systems/combat/old pkg/systems/combat/useScripts pkg/systems/housing scripts/items
</A></li>
        <LI>Next message: <A HREF="000881.html">[Poldistro-svn] r907 - in trunk/096: pkg/skills/magery/OLD scripts/include/OLD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#880">[ date ]</a>
              <a href="thread.html#880">[ thread ]</a>
              <a href="subject.html#880">[ subject ]</a>
              <a href="author.html#880">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: muaddiblsd
Date: 2005-11-05 09:30:40 +0100 (Sat, 05 Nov 2005)
New Revision: 906

Modified:
   trunk/096/pkg/mobiles/oldAI/barber.src
   trunk/096/pkg/mobiles/oldAI/bucsTownHealer.src
   trunk/096/pkg/mobiles/oldAI/merchant.src
   trunk/096/pkg/mobiles/oldAI/townHealer.src
   trunk/096/pkg/mobiles/playervendor/payCounter.src
   trunk/096/pkg/skills/mining/mining.src
   trunk/096/pkg/systems/merchantnodes/merchantNodeControl.src
   trunk/096/pkg/systems/merchantnodes/restock.src
   trunk/096/scripts/include/OLD/mrcSpawn.inc
   trunk/096/scripts/start.src
Log:
Update for itemutils/include/utility.inc

Modified: trunk/096/pkg/mobiles/oldAI/barber.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/barber.src	2005-11-05 08:20:50 UTC (rev 905)
+++ trunk/096/pkg/mobiles/oldAI/barber.src	2005-11-05 08:30:40 UTC (rev 906)
@@ -5,7 +5,7 @@
 include &quot;include/eventID&quot;;
 include &quot;include/sysEvent&quot;;
 include &quot;:npcutils:names&quot;;
-include &quot;include/utility&quot;;
+include &quot;:itemutils:utility&quot;;;
 include &quot;include/mrcSpawn&quot;;
 include &quot;:npcutils:vetement&quot;;
 include &quot;:npcutils:NPCBackpacks&quot;;

Modified: trunk/096/pkg/mobiles/oldAI/bucsTownHealer.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/bucsTownHealer.src	2005-11-05 08:20:50 UTC (rev 905)
+++ trunk/096/pkg/mobiles/oldAI/bucsTownHealer.src	2005-11-05 08:30:40 UTC (rev 906)
@@ -6,7 +6,7 @@
 include &quot;:attributes:attributes&quot;;
 include &quot;include/sysEvent&quot;;
 include &quot;:npcutils:names&quot;;
-include &quot;include/utility&quot;;
+include &quot;:itemutils:utility&quot;;;
 include &quot;include/mrcSpawn&quot;;
 include &quot;:npcutils:vetement&quot;;
 include &quot;:npcutils:NPCBackpacks&quot;;

Modified: trunk/096/pkg/mobiles/oldAI/merchant.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/merchant.src	2005-11-05 08:20:50 UTC (rev 905)
+++ trunk/096/pkg/mobiles/oldAI/merchant.src	2005-11-05 08:30:40 UTC (rev 906)
@@ -5,7 +5,7 @@
 include &quot;include/eventID&quot;;
 include &quot;include/sysEvent&quot;;
 include &quot;:npcutils:names&quot;;
-include &quot;include/utility&quot;;
+include &quot;:itemutils:utility&quot;;;
 include &quot;include/mrcSpawn&quot;;
 include &quot;:npcutils:vetement&quot;;
 include &quot;:npcutils:NPCBackpacks&quot;;

Modified: trunk/096/pkg/mobiles/oldAI/townHealer.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/townHealer.src	2005-11-05 08:20:50 UTC (rev 905)
+++ trunk/096/pkg/mobiles/oldAI/townHealer.src	2005-11-05 08:30:40 UTC (rev 906)
@@ -7,7 +7,7 @@
 include &quot;:attributes:attributes&quot;;
 include &quot;include/sysEvent&quot;;
 include &quot;:npcutils:names&quot;;
-include &quot;include/utility&quot;;
+include &quot;:itemutils:utility&quot;;;
 include &quot;include/mrcSpawn&quot;;
 include &quot;:npcutils:vetement&quot;;
 include &quot;:npcutils:NPCBackpacks&quot;;

Modified: trunk/096/pkg/mobiles/playervendor/payCounter.src
===================================================================
--- trunk/096/pkg/mobiles/playervendor/payCounter.src	2005-11-05 08:20:50 UTC (rev 905)
+++ trunk/096/pkg/mobiles/playervendor/payCounter.src	2005-11-05 08:30:40 UTC (rev 906)
@@ -1,7 +1,7 @@
 use uo;
 use os;
 
-include &quot;include/utility&quot;;
+include &quot;:itemutils:utility&quot;;;
 
 program paycounter(me)
   var gold, rsrv, tax;

Modified: trunk/096/pkg/skills/mining/mining.src
===================================================================
--- trunk/096/pkg/skills/mining/mining.src	2005-11-05 08:20:50 UTC (rev 905)
+++ trunk/096/pkg/skills/mining/mining.src	2005-11-05 08:30:40 UTC (rev 906)
@@ -8,7 +8,7 @@
 include &quot;:itemutils:objtype&quot;;
 include &quot;include/startEqp&quot;;
 include &quot;util/key&quot;;
-include &quot;include/utility&quot;;
+include &quot;:itemutils:utility&quot;;;
 include &quot;:itemutils:canAccess&quot;;
 
 var startx;

Modified: trunk/096/pkg/systems/merchantnodes/merchantNodeControl.src
===================================================================
--- trunk/096/pkg/systems/merchantnodes/merchantNodeControl.src	2005-11-05 08:20:50 UTC (rev 905)
+++ trunk/096/pkg/systems/merchantnodes/merchantNodeControl.src	2005-11-05 08:30:40 UTC (rev 906)
@@ -7,7 +7,7 @@
 include &quot;:attributes:attributes&quot;;
 include &quot;include/sysEvent&quot;;
 include &quot;include/mrcSpawn&quot;;
-include &quot;include/utility&quot;;
+include &quot;:itemutils:utility&quot;;;
 include &quot;include/dist&quot;;
 
 var npclist := {};
@@ -24,7 +24,7 @@
 	sleep(RandomInt(60));
 
 // if all nodes are globally disabled, we sleep until they are enabled again.
-	if(GetGlobalProperty(&quot;nomerchants&quot;))											
+	if(GetGlobalProperty(&quot;nomerchants&quot;))
 		SetNodeName(&quot;globally disabled&quot;);
 		SetObjProperty(item, &quot;#wait&quot;, 2);
 		while(GetGlobalProperty(&quot;nomerchants&quot;))
@@ -32,7 +32,7 @@
 		endwhile
 	endif
 
-// 
+//
 	SetNodeName(&quot;enabled&quot;);
 	EraseObjProperty(item, &quot;#wait&quot;);
 	rng := CInt(GetObjProperty(item, &quot;Range&quot;));
@@ -145,12 +145,12 @@
 			endif
 			DespawnAll();
 			ValidateSpawns();
-			
+
 			// hang out here until it gets turned back on again.
 			while((GetObjProperty(item, &quot;Status&quot;) == &quot;off&quot;) or (GetGlobalProperty(&quot;nomerchants&quot;)))
 				var ev := os::wait_for_event(120);
 			endwhile
-			
+
 			// Things have turned back on, so this stuff gets moving
 			SpawnAll();
 			ValidateSpawns();
@@ -235,7 +235,7 @@
 		var type	:= thing[1];
 		// 9-13-2005 Austin
 		// New function in math.em makes 'root' here not compile.
-		// I renamed the var to 'root_canal' which it often feels 
+		// I renamed the var to 'root_canal' which it often feels
 		// like I am getting when i work on old distro code.
 		var root_canal	:= thing[2];
 		var status 	:= thing[3];
@@ -302,10 +302,10 @@
 	if (text[&quot;appraise&quot;] || text[&quot;stable&quot;] || text[&quot;showinventory&quot;] || text[&quot;showrestock&quot;])
 		pass := 1;
 	endif
-	
+
 	// If the character wants to do something with a vendor:
 	if (text[&quot;buy&quot;] || text[&quot;sell&quot;] || text[&quot;train&quot;] || text[&quot;teach&quot;]||(pass))
-		
+
 		// Just pick the nearest vendor if the player isn't specific.
 		if( text[&quot;merchant&quot;] || text[&quot;vendor&quot;] || (pass) )
 			var dis := 7;

Modified: trunk/096/pkg/systems/merchantnodes/restock.src
===================================================================
--- trunk/096/pkg/systems/merchantnodes/restock.src	2005-11-05 08:20:50 UTC (rev 905)
+++ trunk/096/pkg/systems/merchantnodes/restock.src	2005-11-05 08:30:40 UTC (rev 906)
@@ -3,7 +3,7 @@
 use util;
 
 include &quot;include/mrcSpawn&quot;;
-include &quot;include/utility&quot;;
+include &quot;:itemutils:utility&quot;;;
 
 program restok(parms)
   var item := 0;
@@ -35,4 +35,3 @@
     endforeach
   endif
 endprogram
-       
\ No newline at end of file

Modified: trunk/096/scripts/include/OLD/mrcSpawn.inc
===================================================================
--- trunk/096/scripts/include/OLD/mrcSpawn.inc	2005-11-05 08:20:50 UTC (rev 905)
+++ trunk/096/scripts/include/OLD/mrcSpawn.inc	2005-11-05 08:30:40 UTC (rev 906)
@@ -1,6 +1,6 @@
 use cfgfile;
 include &quot;:attributes:attributes&quot;;
-include &quot;include/utility&quot;;
+include &quot;:itemutils:utility&quot;;;
 
 var mrcspawn_cfg := ReadConfigFile(&quot;::mrcspawn&quot;);
 var itemconfig := ReadConfigFile(&quot;:*:itemdesc&quot;);
@@ -168,7 +168,7 @@
 		var chk := CountExisting(destination, thing.objtype); // to see what we got *really* for sale
 		items := chk[2];// returns all of a particular item, stacked or unstacked. (array)
 		amt := chk[1];
-		
+
 		// determine whether to increase or decrease stock.
 		if(amt &gt;= (thing.amount * multiplier))
 			multiplier := multiplier - 1;
@@ -182,9 +182,9 @@
 			endif
 		endif
 		SetObjProperty(thing, &quot;Multiplier&quot;, multiplier);
-		
+
 		mlt := Cint(thing.amount * multiplier); // mlt is the amount that should be in stock
-		
+
 		if(amt != mlt)
 			// define characteristics of the items
 			var buyprice := Cint(thing.buyprice);
@@ -243,7 +243,7 @@
 	var prodgroups := FindConfigElem(mrcspawn_cfg, merchanttype);
 	var buys := GetConfigStringArray(prodgroups, &quot;Buys&quot;);
 	var normcost, normsell, percentage;
-	
+
 	//  If not buying lets call the whole thing off.
 	if(buys.size() &lt; 1)
 		return 0;
@@ -251,16 +251,16 @@
 
 	var iteminit := 0;
 	var itemmark := -1;
-	
+
 	// set buy price for each item to be 0 to start. This means it won't be sellable.
 	foreach item in backpackitems
 		item.buyprice := iteminit;
 	endforeach
-	
-	var buynobuyable := { }; 
+
+	var buynobuyable := { };
 	var objtype;
 	var counter := 0;
-	
+
 	// Populate the array of items the vendor will buy.
 	foreach prodgroup in buys
 		foreach itemstr in GetConfigStringArray(FindConfigElem(mrcspawn_cfg, prodgroup), &quot;Item&quot;)
@@ -274,7 +274,7 @@
 			buynobuyable.append(objtype);
 		endforeach
 	endforeach
-	
+
 	// compare all the items in the top level of the backpack to things the vendor can buy and set the price.
 	if(buynobuyable.size())
 		foreach item in backpackitems

Modified: trunk/096/scripts/start.src
===================================================================
--- trunk/096/scripts/start.src	2005-11-05 08:20:50 UTC (rev 905)
+++ trunk/096/scripts/start.src	2005-11-05 08:30:40 UTC (rev 906)
@@ -14,7 +14,7 @@
 
 include &quot;:logger:exception&quot;;
 include &quot;:logger:log&quot;;
-include &quot;include/utility&quot;;
+include &quot;:itemutils:utility&quot;;;
 include &quot;include/teleporters&quot;;
 
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000879.html">[Poldistro-svn] r905 - in trunk/096: pkg/items/food pkg/items/guildstone pkg/items/magic pkg/items/ministatues pkg/items/repaircontract pkg/items/runebook pkg/items/traps pkg/items/treasuremap pkg/items/usestuff pkg/items/wands pkg/skills/alchemy pkg/skills/blacksmithy pkg/skills/bowcraft pkg/skills/camping pkg/skills/carpentry pkg/skills/cartography pkg/skills/cooking pkg/skills/fishing pkg/skills/healing pkg/skills/inscription pkg/skills/lockpicking pkg/skills/mining pkg/skills/musicianship pkg/skills/poisoning pkg/skills/removetrap pkg/skills/tailoring pkg/skills/tinkering pkg/systems/boat pkg/systems/combat/old pkg/systems/combat/useScripts pkg/systems/housing scripts/items
</A></li>
	<LI>Next message: <A HREF="000881.html">[Poldistro-svn] r907 - in trunk/096: pkg/skills/magery/OLD scripts/include/OLD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#880">[ date ]</a>
              <a href="thread.html#880">[ thread ]</a>
              <a href="subject.html#880">[ subject ]</a>
              <a href="author.html#880">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/poldistro-svn">More information about the Poldistro-svn
mailing list</a><br>
</body></html>
