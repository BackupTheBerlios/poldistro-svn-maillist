<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Poldistro-svn] r941 - in trunk/096: config pkg/mobiles pkg/mobiles/newCharacter pkg/mobiles/newCharacter/config pkg/mobiles/newCharacter/include scripts/misc
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/poldistro-svn/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r941%20-%20in%20trunk/096%3A%20config%20pkg/mobiles%20pkg/mobiles/newCharacter%20pkg/mobiles/newCharacter/config%20pkg/mobiles/newCharacter/include%20scripts/misc&In-Reply-To=%3C200511121704.jACH4MUx012954%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000914.html">
   <LINK REL="Next"  HREF="000916.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Poldistro-svn] r941 - in trunk/096: config pkg/mobiles pkg/mobiles/newCharacter pkg/mobiles/newCharacter/config pkg/mobiles/newCharacter/include scripts/misc</H1>
    <B>Austin Heilman at BerliOS</B> 
    <A HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r941%20-%20in%20trunk/096%3A%20config%20pkg/mobiles%20pkg/mobiles/newCharacter%20pkg/mobiles/newCharacter/config%20pkg/mobiles/newCharacter/include%20scripts/misc&In-Reply-To=%3C200511121704.jACH4MUx012954%40sheep.berlios.de%3E"
       TITLE="[Poldistro-svn] r941 - in trunk/096: config pkg/mobiles pkg/mobiles/newCharacter pkg/mobiles/newCharacter/config pkg/mobiles/newCharacter/include scripts/misc">austin at berlios.de
       </A><BR>
    <I>Sat Nov 12 18:04:22 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000914.html">[Poldistro-svn] r940 - trunk/096/pkg/mobiles/brainAI
</A></li>
        <LI>Next message: <A HREF="000916.html">[Poldistro-svn] r942 - trunk/096/pkg/commands/coun
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#915">[ date ]</a>
              <a href="thread.html#915">[ thread ]</a>
              <a href="subject.html#915">[ subject ]</a>
              <a href="author.html#915">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: austin
Date: 2005-11-12 18:04:21 +0100 (Sat, 12 Nov 2005)
New Revision: 941

Added:
   trunk/096/pkg/mobiles/newCharacter/
   trunk/096/pkg/mobiles/newCharacter/config/
   trunk/096/pkg/mobiles/newCharacter/config/icp.cfg
   trunk/096/pkg/mobiles/newCharacter/config/startEquip.cfg
   trunk/096/pkg/mobiles/newCharacter/include/
   trunk/096/pkg/mobiles/newCharacter/include/newCharacter.inc
   trunk/096/pkg/mobiles/newCharacter/onCreate.src
   trunk/096/pkg/mobiles/newCharacter/onDelete.src
   trunk/096/pkg/mobiles/newCharacter/pkg.cfg
Removed:
   trunk/096/config/starteqp.cfg
Modified:
   trunk/096/scripts/misc/oncreate.src
Log:
Uploading what has been done so far on this project.
Moved character creation stuff to a package.
Will issue items based on the three selected skills.
Will store the 3 skills the player selected.

Deleted: trunk/096/config/starteqp.cfg
===================================================================
--- trunk/096/config/starteqp.cfg	2005-11-12 06:06:14 UTC (rev 940)
+++ trunk/096/config/starteqp.cfg	2005-11-12 17:04:21 UTC (rev 941)
@@ -1,298 +0,0 @@
-ForSkill Alchemy
-{
-	Item	1	Mortar
-	Stack	4	EmptyBottle
-	Random	4	Reagents
-	Unique	Robe	reds
-}
-
-ForSkill Anatomy
-{
-	Unique	Robe	yellows
-	Stack	3	bandages
-}
-
-ForSkill AnimalLore
-{
-	Unique	shepherdscrook
-	Unique	Robe	greens
-}
-
-ForSkill ItemId
-{
-	Item	1	gnarledstaff
-}
-
-ForSkill Parry
-{
-	Item	1	practiceshield
-}
-
-ForSkill Begging
-{
-	Item	1	gnarledstaff
-}
-
-ForSkill Blacksmithy
-{
-	Unique	smithhammer
-	Item	1	0x153b	browns
-}
-
-ForSkill Carpentry
-{
-	Random	1	carpentryitems
-	Item	1	0x153b	greens
-}
-
-ForSkill Bowcraft
-{
-	Stack	10	log
-	Stack	10	feather
-	Stack	10	arrowshaft
-}
-
-ForSkill Peacemaking
-{
-	Item	1	lute
-}
-
-ForSkill Camping
-{
-	Stack	5	kindling
-	Item	1	bedroll
-}
-
-ForSkill Cartography
-{
-	Item	1	sextant
-	Item	4	blankmap
-}
-
-ForSkill Cooking
-{
-	Stack	3	rawbird
-}
-
-ForSkill DetectingHidden
-{
-	Unique	0x1515	0x453
-}
-
-ForSkill Enticement
-{
-	Item	1	lute
-}
-
-ForSkill EvaluatingIntelligence
-{
-}
-
-ForSkill Healing
-{
-	Stack	5	bandages
-	Item	1	scissors
-}
-
-ForSkill Fishing
-{
-	Item	1	fishingpole
-	Item	1	floppyhat	brown
-}
-
-ForSkill Herding
-{
-	Item	1	shepherdscrook
-}
-
-ForSkill Hiding
-{
-	Unique	0x1515	0x453
-}
-
-ForSkill Provocation
-{
-	Item	1	drum
-}
-
-ForSkill Inscription
-{
-	Item	1	book
-	Stack	2	blankscroll
-}
-
-ForSkill Lockpicking
-{
-	Stack	5	lockpick
-}
-
-ForSkill Magery
-{
-	Unique	Spellbook
-	Unique	Robe	reds
-	Random	3	Circle1Scrolls
-	Random	3	Reagents
-}
-
-ForSkill MagicResistance
-{
-}
-
-ForSkill Tactics
-{
-}
-
-ForSkill Snooping
-{
-	Unique	0x1515	0x453
-}
-
-ForSkill Musicianship
-{
-	Item	1	harp
-}
-
-ForSkill Poisoning
-{
-	Item	2	lesserpoison
-}
-
-ForSkill Archery
-{
-	Item	1	practicebow
-	Stack	25	arrow
-}
-
-ForSkill SpiritSpeak
-{
-	Unique	0x1515	0x453
-}
-
-ForSkill Stealing
-{
-	Unique	0x1515	0x453
-}
-
-ForSkill Tailoring
-{
-	Item	1	sewingkit
-	Stack	1	bolt1
-}
-
-ForSkill AnimalTaming
-{
-	Unique	shepherdscrook
-}
-
-ForSkill TasteIdentification
-{
-	Stack	3	Potions
-}
-
-ForSkill Swordsmanship
-{
-	Item	1	practicelongsword
-}
-
-ForSkill Macefighting
-{
-	Item	1	practicemace
-}
-
-ForSkill Fencing
-{
-	Item	1	practicekryss
-}
-
-ForSkill Wrestling
-{
-	Item	1	leathergloves
-}
-
-ForSkill Mining
-{
-	Item	1	pickaxe
-	Item	1	shovel
-}
-
-ForSkill Lumberjacking
-{
-	Unique	hatchet
-}
-
-ForSkill Tinkering
-{
-	Unique	tinkertools
-	Item	1	0x153b	brown
-	Item	1	sextantparts
-}
-
-ForSkill Veterinary
-{
-	Stack	5	bandages
-	Item	1	scissors
-}
-
-ForSkill Tracking
-{
-	Item	1	skinningknife
-	Item	1	0x1711	brown
-}
-
-Group	Reagents
-{
-	Item	3	BloodMoss
-	Item	3	BlackPearl
-	Item	3	Garlic
-	Item	3	SpiderSilk
-	Item	3	MandrakeRoot
-	Item	3	SulfurousAsh
-	Item	3	BlackPearl
-	Item	3	Ginseng
-}
-
-ForSkill all
-{
-	Item	1	candle1
-	Item	1	book1
-}
-
-Group	Circle1Scrolls
-{
-	Item	1	reactivearmorscroll
-	Item	1	clumsyscroll
-	Item	1	createfoodscroll
-	Item	1	feeblemindscroll
-	Item	1	healscroll
-	Item	1	magicarrowscroll
-	Item	1	nightsightscroll
-	Item	1	weakenscroll
-}
-
-Group	Potions
-{
-	Item	1	LesserHeal
-	Item	1	LesserPoison
-	Item	1	LesserExplosion
-	Item	1	AgilityPotion
-	Item	1	RefreshPotion
-	Item	1	StrengthPotion
-	Item	1	Nightsight
-	Item	1	LesserCure
-}
-
-Group	carpentryitems
-{
-	Item	1	Scorp
-	Item	1	Jointingplane
-	Item	1	mouldingplane
-	Item	1	Smoothingplane
-	Item	1	Hammer
-	Item	1	Saw
-	Item	1	Saw2
-	Item	1	Dovetailsaw
-	Item	1	drawknife
-	Item	1	Froe
-	Item	1	inshave
-}
-

Added: trunk/096/pkg/mobiles/newCharacter/config/icp.cfg
===================================================================
--- trunk/096/pkg/mobiles/newCharacter/config/icp.cfg	2005-11-12 06:06:14 UTC (rev 940)
+++ trunk/096/pkg/mobiles/newCharacter/config/icp.cfg	2005-11-12 17:04:21 UTC (rev 941)
@@ -0,0 +1,19 @@
+# $Id$
+#
+#
+ICP Register
+{
+	Name		New Character
+	Version		1.0
+	Description	Sets up new characters. Gives them start equipment based on selected skills.
+
+	Creator		Austin
+	C_Email		<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">AustinHeilman at gmail.com</A>
+
+	Maintainer	Distro Team
+	M_Email		<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">distro at polserver.com</A>
+
+	#Script	cmdlevel path
+
+	#TextCmd	cmdlevel path
+}

Added: trunk/096/pkg/mobiles/newCharacter/config/startEquip.cfg
===================================================================
--- trunk/096/pkg/mobiles/newCharacter/config/startEquip.cfg	2005-11-12 06:06:14 UTC (rev 940)
+++ trunk/096/pkg/mobiles/newCharacter/config/startEquip.cfg	2005-11-12 17:04:21 UTC (rev 941)
@@ -0,0 +1,298 @@
+ForSkill Alchemy
+{
+	Item	1	Mortar
+	Item	4	EmptyBottle
+	Random	4	Reagents
+	Unique	Robe	reds
+}
+
+ForSkill Anatomy
+{
+	Unique	Robe	yellows
+	Item	3	bandages
+}
+
+ForSkill AnimalLore
+{
+	Unique	shepherdscrook
+	Unique	Robe	greens
+}
+
+ForSkill ItemId
+{
+	Item	1	gnarledstaff
+}
+
+ForSkill Parry
+{
+	Item	1	practiceshield
+}
+
+ForSkill Begging
+{
+	Item	1	gnarledstaff
+}
+
+ForSkill Blacksmithy
+{
+	Unique	smithhammer
+	Item	1	0x153b	browns
+}
+
+ForSkill Carpentry
+{
+	Random	1	carpentryitems
+	Item	1	0x153b	greens
+}
+
+ForSkill Bowcraft
+{
+	Item	10	log
+	Item	10	feather
+	Item	10	arrowshaft
+}
+
+ForSkill Peacemaking
+{
+	Item	1	lute
+}
+
+ForSkill Camping
+{
+	Item	5	kindling
+	Item	1	bedroll
+}
+
+ForSkill Cartography
+{
+	Item	1	sextant
+	Item	4	blankmap
+}
+
+ForSkill Cooking
+{
+	Item	3	rawbird
+}
+
+ForSkill DetectingHidden
+{
+	Unique	0x1515	0x453
+}
+
+ForSkill Enticement
+{
+	Item	1	lute
+}
+
+ForSkill EvaluatingIntelligence
+{
+}
+
+ForSkill Healing
+{
+	Item	5	bandages
+	Item	1	scissors
+}
+
+ForSkill Fishing
+{
+	Item	1	fishingpole
+	Item	1	floppyhat	brown
+}
+
+ForSkill Herding
+{
+	Item	1	shepherdscrook
+}
+
+ForSkill Hiding
+{
+	Unique	0x1515	0x453
+}
+
+ForSkill Provocation
+{
+	Item	1	drum
+}
+
+ForSkill Inscription
+{
+	Item	1	book
+	Item	2	blankscroll
+}
+
+ForSkill Lockpicking
+{
+	Item	5	lockpick
+}
+
+ForSkill Magery
+{
+	Unique	Spellbook
+	Unique	Robe	reds
+	Random	3	Circle1Scrolls
+	Random	3	Reagents
+}
+
+ForSkill MagicResistance
+{
+}
+
+ForSkill Tactics
+{
+}
+
+ForSkill Snooping
+{
+	Unique	0x1515	0x453
+}
+
+ForSkill Musicianship
+{
+	Item	1	harp
+}
+
+ForSkill Poisoning
+{
+	Item	2	lesserpoison
+}
+
+ForSkill Archery
+{
+	Item	1	practicebow
+	Item	25	arrow
+}
+
+ForSkill SpiritSpeak
+{
+	Unique	0x1515	0x453
+}
+
+ForSkill Stealing
+{
+	Unique	0x1515	0x453
+}
+
+ForSkill Tailoring
+{
+	Item	1	sewingkit
+	Item	1	bolt1
+}
+
+ForSkill AnimalTaming
+{
+	Unique	shepherdscrook
+}
+
+ForSkill TasteIdentification
+{
+	Item	3	Potions
+}
+
+ForSkill Swordsmanship
+{
+	Item	1	practicelongsword
+}
+
+ForSkill Macefighting
+{
+	Item	1	practicemace
+}
+
+ForSkill Fencing
+{
+	Item	1	practicekryss
+}
+
+ForSkill Wrestling
+{
+	Item	1	leathergloves
+}
+
+ForSkill Mining
+{
+	Item	1	pickaxe
+	Item	1	shovel
+}
+
+ForSkill Lumberjacking
+{
+	Unique	hatchet
+}
+
+ForSkill Tinkering
+{
+	Unique	tinkertools
+	Item	1	0x153b	brown
+	Item	1	sextantparts
+}
+
+ForSkill Veterinary
+{
+	Item	5	bandages
+	Item	1	scissors
+}
+
+ForSkill Tracking
+{
+	Item	1	skinningknife
+	Item	1	0x1711	brown
+}
+
+Group	Reagents
+{
+	Item	3	BloodMoss
+	Item	3	BlackPearl
+	Item	3	Garlic
+	Item	3	SpiderSilk
+	Item	3	MandrakeRoot
+	Item	3	SulfurousAsh
+	Item	3	BlackPearl
+	Item	3	Ginseng
+}
+
+ForSkill All
+{
+	Item	1	candle1
+	Item	1	book1
+}
+
+Group	Circle1Scrolls
+{
+	Item	1	reactivearmorscroll
+	Item	1	clumsyscroll
+	Item	1	createfoodscroll
+	Item	1	feeblemindscroll
+	Item	1	healscroll
+	Item	1	magicarrowscroll
+	Item	1	nightsightscroll
+	Item	1	weakenscroll
+}
+
+Group	Potions
+{
+	Item	1	LesserHeal
+	Item	1	LesserPoison
+	Item	1	LesserExplosion
+	Item	1	AgilityPotion
+	Item	1	RefreshPotion
+	Item	1	StrengthPotion
+	Item	1	Nightsight
+	Item	1	LesserCure
+}
+
+Group	CarpentryItems
+{
+	Item	1	Scorp
+	Item	1	Jointingplane
+	Item	1	mouldingplane
+	Item	1	Smoothingplane
+	Item	1	Hammer
+	Item	1	Saw
+	Item	1	Saw2
+	Item	1	Dovetailsaw
+	Item	1	drawknife
+	Item	1	Froe
+	Item	1	inshave
+}
+

Added: trunk/096/pkg/mobiles/newCharacter/include/newCharacter.inc
===================================================================
--- trunk/096/pkg/mobiles/newCharacter/include/newCharacter.inc	2005-11-12 06:06:14 UTC (rev 940)
+++ trunk/096/pkg/mobiles/newCharacter/include/newCharacter.inc	2005-11-12 17:04:21 UTC (rev 941)
@@ -0,0 +1,74 @@
+/*
+ * $Id$
+ *
+ */
+
+use uo;
+use os;
+use cfgfile;
+
+include &quot;:datafile:datafile&quot;;
+
+/* NC_GetDataFile()
+ * 
+ * Purpose
+ * Retrives :newcharacter:createinfo
+ *
+ * Parameters
+ *
+ * Return Value
+ * Data file
+ * 
+ */
+function NC_GetDataFile()
+	return DFOpenDataFile(&quot;:newcharacter:createinfo&quot;, DF_CREATE);
+endfunction
+
+/*
+ * NC_GetStartupSkills(mobile)
+ *
+ * Purpose
+ * Retrieves the skills the player selected on creation.
+ *
+ * Parameters
+ * mobile:	Mobile to retrieve the skill list for.
+ *
+ * Return value
+ * Array of strings
+ *
+ */
+function NC_GetStartupSkills(mobile)
+	if ( !mobile.acctname )
+		return error{&quot;errortext&quot;:=&quot;Object passed was not a player-character&quot;};
+	endif
+	
+	var data_file := NC_GetDataFile();
+	var data_elem := DFFindElement(data_file, Hex(mobile.serial));
+	
+	return data_elem.GetProp(&quot;StartSkills&quot;);
+endfunction
+
+/*
+ * NC_SetStartupSkills(mobile, skill_names)
+ *
+ * Purpose
+ * Stores the skills the player selected on creation.
+ *
+ * Parameters
+ * mobile:	Mobile to retrieve the skill list for.
+ * skill_names:	Array containing attribute names chosen.
+ *
+ * Return value
+ * 1
+ *
+ */
+function NC_SetStartupSkills(mobile, skill_names)
+	if ( !mobile.acctname )
+		return error{&quot;errortext&quot;:=&quot;Object passed was not a player-character&quot;};
+	endif
+	
+	var data_file := NC_GetDataFile();
+	var data_elem := DFFindElement(data_file, Hex(mobile.serial), DF_CREATE);
+	
+	return data_elem.SetProp(&quot;StartSkills&quot;, skill_names);
+endfunction

Added: trunk/096/pkg/mobiles/newCharacter/onCreate.src
===================================================================
--- trunk/096/pkg/mobiles/newCharacter/onCreate.src	2005-11-12 06:06:14 UTC (rev 940)
+++ trunk/096/pkg/mobiles/newCharacter/onCreate.src	2005-11-12 17:04:21 UTC (rev 941)
@@ -0,0 +1,77 @@
+/*
+ * $Id$
+ *
+ */
+
+use uo;
+use os;
+use file;
+use cfgfile;
+
+include &quot;:attributes:attributes&quot;;
+include &quot;:attributes:attributes_ex&quot;;
+include &quot;:newcharacter:newCharacter&quot;;
+
+program OnCreate(params)
+	var who := params[1];
+	var selected_skills := params[2];
+	params := 0; // No longer needed.
+	
+	// Convert skill ID numbers to attribute names.
+	// Core currently sends them as skill IDs!
+	foreach skill in ( selected_skills )
+		skill := AP_SkillIdToAttributeName(skill);
+		sleepms(2);
+	endforeach
+	
+	// Save the chosen skills.
+	NC_SetStartupSkills(who, selected_skills);
+	
+	GenerateItemsForSkill(who, &quot;All&quot;);
+	foreach skill in ( selected_skills )
+		GenerateItemsForSkill(who, skill);
+		sleepms(2);
+	endforeach
+
+	return 1;
+endprogram
+
+function GenerateItemsForSkill(who, attribute)
+	var cfg_file := ReadConfigFile(&quot;:newcharacter:config/startEquip&quot;);
+	var cfg_elem := cfg_file[attribute];
+	
+	foreach entry in ( GetConfigStringArray(cfg_elem, &quot;Item&quot;) )
+		entry := SplitWords(entry);
+		CreateItemInBackPack(who, entry[2], CInt(entry[1]));
+		sleepms(2);
+	endforeach
+	
+	foreach entry in ( GetConfigStringArray(cfg_elem, &quot;Random&quot;) )
+		entry := SplitWords(entry);
+		var amount := CInt(entry[1]);
+		var rand_elem := cfg_file[amount[2]];
+		var item_list := GetConfigStringArray(rand_elem, &quot;Item&quot;);
+		for ( amount; amount&gt;0; amount:=amount-1 )
+			var selected := item_list[RandomInt(item_list.Size())+1];
+			selected := SplitWords(2);
+			CreateItemInBackPack(who, selected[2], CInt(selected[1]));
+			sleepms(2);
+		endfor
+		sleepms(2);
+	endforeach
+	
+	return 1;
+endfunction
+
+function CreateItemFromElem(who, byref cfg_elem)
+	var item_list := GetConfigStringArray(cfg_elem, &quot;Item&quot;);
+	var entry := item_list[RandomInt(item_list.Size())+1];
+	entry := SplitWords(entry);
+	
+	var item := CreateItemInBackPack(who, CInt(entry[1]), entry[2]);
+	if ( item.errortext )
+		SendSysMessage(who, &quot;Error creating &quot;+entry+&quot; -&gt;&quot;+item.errortext);
+	endif
+	
+	return item;
+endfunction

Added: trunk/096/pkg/mobiles/newCharacter/onDelete.src
===================================================================
--- trunk/096/pkg/mobiles/newCharacter/onDelete.src	2005-11-12 06:06:14 UTC (rev 940)
+++ trunk/096/pkg/mobiles/newCharacter/onDelete.src	2005-11-12 17:04:21 UTC (rev 941)
@@ -0,0 +1,13 @@
+/*
+ * $Id$
+ *
+ */
+
+include &quot;:newcharacter:newCharacter&quot;;
+
+program OnDelete(who)
+	var data_file := NC_GetDataFile();
+	data_file.DeleteElement(Hex(who.serial));
+	
+	return 1;
+endprogram

Added: trunk/096/pkg/mobiles/newCharacter/pkg.cfg
===================================================================
--- trunk/096/pkg/mobiles/newCharacter/pkg.cfg	2005-11-12 06:06:14 UTC (rev 940)
+++ trunk/096/pkg/mobiles/newCharacter/pkg.cfg	2005-11-12 17:04:21 UTC (rev 941)
@@ -0,0 +1,17 @@
+# $Id: pkg.cfg 684 2005-10-27 18:48:28Z muaddiblsd $
+#
+#
+Enabled		1
+Name		newcharacter
+
+Version		1.0
+
+CoreRequired	96
+
+Creator		Austin Heilman
+Email		<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">AustinHeilman at gmail.com</A>
+Maintainer	Distro Team
+Email		<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">distro at polserver.com</A>
+
+#Requires	none
+#Conflicts	none

Modified: trunk/096/scripts/misc/oncreate.src
===================================================================
--- trunk/096/scripts/misc/oncreate.src	2005-11-12 06:06:14 UTC (rev 940)
+++ trunk/096/scripts/misc/oncreate.src	2005-11-12 17:04:21 UTC (rev 941)
@@ -11,20 +11,12 @@
 
 
 program core_onCreate(who, skillids)
-	if ((13 in CAscZ(who.name)) || (10 in CAscZ(who.name)))
-		var account := who.acct;
-		account.ban();
-		for i:=1 to 5
-			account.DeleteCharacter( i );
-		endfor
-		syslog(&quot;ALERT! Account &quot; + account.name + &quot; was banned for cheating.&quot;);
+	var script := Start_Script(&quot;:newcharacter:onCreate&quot;, {who, skillids});
+	
+	if ( script.errortext )
+		SysLog(&quot;Error - Unable to start :newcharacter:onCreate -&gt;&quot;+script.errortext);
+		return 0;
 	endif
-	if (CInt(who.truecolor) &lt;= 32768)
-		who.truecolor := who.truecolor + 32768;
-		who.color := who.truecolor;
-	endif
-	SetObjProperty(who, &quot;OnCreate&quot;, ReadGameClock());
-	CreateStartingEquipment(who, skillids);
-
-	return;
+	
+	return 1;
 endprogram


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000914.html">[Poldistro-svn] r940 - trunk/096/pkg/mobiles/brainAI
</A></li>
	<LI>Next message: <A HREF="000916.html">[Poldistro-svn] r942 - trunk/096/pkg/commands/coun
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#915">[ date ]</a>
              <a href="thread.html#915">[ thread ]</a>
              <a href="subject.html#915">[ subject ]</a>
              <a href="author.html#915">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/poldistro-svn">More information about the Poldistro-svn
mailing list</a><br>
</body></html>
