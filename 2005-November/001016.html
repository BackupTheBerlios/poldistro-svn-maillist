<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Poldistro-svn] r1043 - in trunk/096/pkg/commands: config gm
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/poldistro-svn/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r1043%20-%20in%20trunk/096/pkg/commands%3A%20config%20gm&In-Reply-To=%3C200511231457.jANEvkXN010637%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001015.html">
   <LINK REL="Next"  HREF="001017.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Poldistro-svn] r1043 - in trunk/096/pkg/commands: config gm</H1>
    <B>austin at BerliOS</B> 
    <A HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r1043%20-%20in%20trunk/096/pkg/commands%3A%20config%20gm&In-Reply-To=%3C200511231457.jANEvkXN010637%40sheep.berlios.de%3E"
       TITLE="[Poldistro-svn] r1043 - in trunk/096/pkg/commands: config gm">austin at berlios.de
       </A><BR>
    <I>Wed Nov 23 15:57:46 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001015.html">[Poldistro-svn] r1042 - trunk/096/pkg/config
</A></li>
        <LI>Next message: <A HREF="001017.html">[Poldistro-svn] r1044 - trunk/096/pkg/config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1016">[ date ]</a>
              <a href="thread.html#1016">[ thread ]</a>
              <a href="subject.html#1016">[ subject ]</a>
              <a href="author.html#1016">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: austin
Date: 2005-11-23 15:57:45 +0100 (Wed, 23 Nov 2005)
New Revision: 1043

Added:
   trunk/096/pkg/commands/config/info.cfg
Modified:
   trunk/096/pkg/commands/gm/info.src
Log:


Added: trunk/096/pkg/commands/config/info.cfg
===================================================================
--- trunk/096/pkg/commands/config/info.cfg	2005-11-23 14:40:10 UTC (rev 1042)
+++ trunk/096/pkg/commands/config/info.cfg	2005-11-23 14:57:45 UTC (rev 1043)
@@ -0,0 +1,120 @@
+Elem	Index
+{
+	Index	General
+	Index	Location
+	Index	Client
+	Index	Combat
+	Index	Script
+	Index	Reputation
+	Index	Properties
+	Index	Attributes
+	Index	Privileges
+	Index	Storage
+	Index	Miscellaneous
+}
+
+Elem	Index-General
+{
+	Group	NameAndTitles
+}
+
+Elem	Index-Location
+{
+	Group	Location
+}
+
+Elem	Index-Client
+{
+	Group	Client
+	Group	Account
+}
+
+Elem	Index-Combat
+{
+	Group	Combat
+	Group	WeaponInfo
+}
+
+Elem	Index-Script
+{
+	Group	Script
+	Group	AI
+}
+
+Elem	Index-Reputation
+{
+	Group	Reputation
+}
+
+Group	NameAndTitles
+{
+// 	Entry	Type	Display_Name	Property name	Editable
+	Entry	member	Title_Prefix	title_prefix	1
+	Entry	member	Name		name		1
+	Entry	member	Title_Suffix	title_suffix	1
+	Entry	member	Title_Race	title_race	1
+}
+
+Group	Location
+{
+	Entry	member	X	x	1
+	Entry	member	Y	y	1
+	Entry	member	Z	z	1
+	Entry	member	Realm	realm	1
+}
+
+Group	Client
+{
+	Entry	member	Connected	connected	0
+	Entry	member	IP_Address	ip		0
+	Entry	member	Client_Version	clientversion	0
+}
+
+Group	Account
+{
+	Entry	member	Account_Name	acctname	0
+	Entry	member	Account_Enabled	acct.enabled	0
+	Entry	member	Account_Banned	acct.banned	0
+}
+
+Group	Combat
+{
+	Entry	member	War_Mode		warmode		1
+	Entry	member	Armor_Rating_(AR)	ar		0
+	Entry	member	AR_Modifier		ar_mod		1
+	Entry	member	Attack_Speed_Mod	delay_mod	1
+}
+
+Group	WeaponInfo
+{
+	Entry	member	Weapon_Name	weapon.name	0
+	Entry	member	Weapon_Serial	weapon.serial	0
+	Entry	member	Weapon_Objtype	weapon.objtype	0
+	Entry	blank
+	Entry	custom	Weapon_Speed	0
+	Entry	member	Damage_Modifier	weapon.dmg_mod	1
+	Entry	custom	Damage_Dice	0
+	Entry	custom	Average_Damage	0
+}
+
+Group	Script
+{
+	Entry	member	Attached_Script	attached.name	0
+	Entry	member	Attached_Pid	attached.pid	0
+}
+
+Group	AI
+{
+	Entry	member	AI_Script	script		0
+	Entry	member	AI_Pid		process.pid	0
+	Entry	member	Event_Mask	eventmask	0
+	Entry	member	Master_Serial	master.serial	0
+}
+	
+Group	Reputation
+{
+	Entry	member	Criminal	criminal	1
+	Entry	member	Murderer	murderer	1
+	Entry	blank
+	Entry	custom	Reportables	0
+}
\ No newline at end of file

Modified: trunk/096/pkg/commands/gm/info.src
===================================================================
--- trunk/096/pkg/commands/gm/info.src	2005-11-23 14:40:10 UTC (rev 1042)
+++ trunk/096/pkg/commands/gm/info.src	2005-11-23 14:57:45 UTC (rev 1043)
@@ -21,6 +21,8 @@
 
 unload_scripts(&quot;&quot;);
 
+var info_config;	// Makes the script easier to use with this being global.
+
 var priv_names := array
 {
 	&quot;ignoredoors&quot;, &quot;seeinvisitems&quot;, &quot;seehidden&quot;, &quot;seeghosts&quot;,
@@ -28,7 +30,6 @@
 	&quot;dblclickany&quot;, &quot;clotheany&quot;, &quot;freemove&quot;
 };
 
-
 program textcmd_Info(who, serial)
 
 	var targ := who;
@@ -44,30 +45,15 @@
 		targ := who;
 	endif
 
-	var gump := LocationGump(who, targ);
-	GFSendGump(who, gump);
-
+	var info_config := ReadConfigFile(&quot;:commands:config/info&quot;);
+	if ( !info_config )
+		SendSysMessage(who, &quot;Error reading in info.cfg -&gt;&quot;+info_config);
+		return 0;
+	endif
+	
+	GFSendGump(who, GumpTemplate(targ));
 endprogram
 
-
-function LocationGump(who, targ)
-	var gump := GumpTemplate(targ);
-	// Used to fix unused var report by ecompile: who;
-	who := who;
-	GFResizePic(gump, 160, 55, GFCfgConst(&quot;Defaults&quot;, &quot;ForeGround&quot;), 325, 95);
-	GFTextLine(gump, 185, 60, 2100, &quot;X&quot;);
-	GFTextRight(gump, 475, 60, 2100, targ.x);
-	GFTextLine(gump, 185, 80, 2100, &quot;Y&quot;);
-	GFTextRight(gump, 475, 80, 2100, targ.y);
-	GFTextLine(gump, 185, 100, 2100, &quot;Z&quot;);
-	GFTextRight(gump, 475, 100, 2100, targ.z);
-	GFTextLine(gump, 185, 120, 2100, &quot;Realm&quot;);
-	GFTextRight(gump, 475, 120, 2100, targ.realm);
-
-	return gump;
-endfunction
-
-
 function GumpTemplate(targ)
 
 	var gump := GFCreateGump();
@@ -85,43 +71,39 @@
 		GFTextRight(gump, 475, 22, 2100, &quot;[Offline Player]&quot;);
 	endif
 
-	GFResizePic(gump, 15, 55, GFCfgConst(&quot;Defaults&quot;, &quot;ForeGround&quot;), 140, 410);
-	GFAddButton(gump, 20, 63, 2117, 2118, GF_CLOSE_BTN, 1);
-	GFTextLine(gump, 40, 60, 2100, &quot;General&quot;);
+	var menus := info_config[&quot;Index&quot;];
+	var y_pos := 20;
+	foreach entry in ( GetConfigStringArray(menus, &quot;Index&quot;) )
+		GFAddButton(gump, 20, (y_pos+3), 2117, 2118, GF_CLOSE_BTN, _entry_iter);
+		GFTextLine(gump, 40, y_pos, 2100, entry);
+		y_pos := y_pos+20;
+		sleepms(2);
+	endforeach
+	
+	return gump;
+endfunction
 
-	GFAddButton(gump, 20, 83, 2117, 2118, GF_CLOSE_BTN, 1);
-	GFTextLine(gump, 40, 80, 2100, &quot;Location&quot;);
+/*
+function LocationGump(who, targ)
+	var gump := GumpTemplate(targ);
+	// Used to fix unused var report by ecompile: who;
+	who := who;
+	GFResizePic(gump, 160, 55, GFCfgConst(&quot;Defaults&quot;, &quot;ForeGround&quot;), 325, 95);
+	GFTextLine(gump, 185, 60, 2100, &quot;X&quot;);
+	GFTextRight(gump, 475, 60, 2100, targ.x);
+	GFTextLine(gump, 185, 80, 2100, &quot;Y&quot;);
+	GFTextRight(gump, 475, 80, 2100, targ.y);
+	GFTextLine(gump, 185, 100, 2100, &quot;Z&quot;);
+	GFTextRight(gump, 475, 100, 2100, targ.z);
+	GFTextLine(gump, 185, 120, 2100, &quot;Realm&quot;);
+	GFTextRight(gump, 475, 120, 2100, targ.realm);
 
-	GFAddButton(gump, 20, 103, 2117, 2118, GF_CLOSE_BTN, 1);
-	GFTextLine(gump, 40, 100, 2100, &quot;Client&quot;);
+	return gump;
+endfunction
 
-	GFAddButton(gump, 20, 123, 2117, 2118, GF_CLOSE_BTN, 1);
-	GFTextLine(gump, 40, 120, 2100, &quot;Combat&quot;);
 
-	GFAddButton(gump, 20, 143, 2117, 2118, GF_CLOSE_BTN, 1);
-	GFTextLine(gump, 40, 140, 2100, &quot;Script&quot;);
 
-	GFAddButton(gump, 20, 163, 2117, 2118, GF_CLOSE_BTN, 1);
-	GFTextLine(gump, 40, 160, 2100, &quot;Reputation&quot;);
 
-	GFAddButton(gump, 20, 183, 2117, 2118, GF_CLOSE_BTN, 1);
-	GFTextLine(gump, 40, 180, 2100, &quot;Properties&quot;);
-
-	GFAddButton(gump, 20, 203, 2117, 2118, GF_CLOSE_BTN, 1);
-	GFTextLine(gump, 40, 200, 2100, &quot;Attributes&quot;);
-
-	GFAddButton(gump, 20, 223, 2117, 2118, GF_CLOSE_BTN, 1);
-	GFTextLine(gump, 40, 220, 2100, &quot;Privileges&quot;);
-
-	GFAddButton(gump, 20, 243, 2117, 2118, GF_CLOSE_BTN, 1);
-	GFTextLine(gump, 40, 240, 2100, &quot;Storage&quot;);
-	
-	GFAddButton(gump, 20, 263, 2117, 2118, GF_CLOSE_BTN, 1);
-	GFTextLine(gump, 40, 260, 2100, &quot;Misc.&quot;);
-
-	return gump;
-endfunction
-
 function GeneralGump(who, targ)
 	var gump := GumpTemplate(targ);
 
@@ -297,3 +279,4 @@
 
 	return path;
 endfunction
+*/
\ No newline at end of file


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001015.html">[Poldistro-svn] r1042 - trunk/096/pkg/config
</A></li>
	<LI>Next message: <A HREF="001017.html">[Poldistro-svn] r1044 - trunk/096/pkg/config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1016">[ date ]</a>
              <a href="thread.html#1016">[ thread ]</a>
              <a href="subject.html#1016">[ subject ]</a>
              <a href="author.html#1016">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/poldistro-svn">More information about the Poldistro-svn
mailing list</a><br>
</body></html>
