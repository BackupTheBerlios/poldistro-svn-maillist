<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Poldistro-svn] r1051 - in trunk/096/pkg/commands: config gm
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/poldistro-svn/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r1051%20-%20in%20trunk/096/pkg/commands%3A%20config%20gm&In-Reply-To=%3C200511240428.jAO4SecQ031341%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001023.html">
   <LINK REL="Next"  HREF="001025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Poldistro-svn] r1051 - in trunk/096/pkg/commands: config gm</H1>
    <B>austin at BerliOS</B> 
    <A HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r1051%20-%20in%20trunk/096/pkg/commands%3A%20config%20gm&In-Reply-To=%3C200511240428.jAO4SecQ031341%40sheep.berlios.de%3E"
       TITLE="[Poldistro-svn] r1051 - in trunk/096/pkg/commands: config gm">austin at berlios.de
       </A><BR>
    <I>Thu Nov 24 05:28:40 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001023.html">[Poldistro-svn] r1050 - in trunk/096/pkg/commands: config gm
</A></li>
        <LI>Next message: <A HREF="001025.html">[Poldistro-svn] r1052 - trunk/096/pkg/commands/gm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1024">[ date ]</a>
              <a href="thread.html#1024">[ thread ]</a>
              <a href="subject.html#1024">[ subject ]</a>
              <a href="author.html#1024">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: austin
Date: 2005-11-24 05:28:37 +0100 (Thu, 24 Nov 2005)
New Revision: 1051

Modified:
   trunk/096/pkg/commands/config/info.cfg
   trunk/096/pkg/commands/gm/info.src
Log:


Modified: trunk/096/pkg/commands/config/info.cfg
===================================================================
--- trunk/096/pkg/commands/config/info.cfg	2005-11-24 03:39:13 UTC (rev 1050)
+++ trunk/096/pkg/commands/config/info.cfg	2005-11-24 04:28:37 UTC (rev 1051)
@@ -7,7 +7,8 @@
 	Index	Script
 	Index	Reputation
 	Index	Properties
-	Index	Attributes
+	Index	Stats &amp; Vitals
+	Index	Skills
 	Index	Privileges
 	Index	Storage
 	Index	Miscellaneous
@@ -46,8 +47,25 @@
 	Group	Reputation
 }
 
+Elem	Index-Properties
+{
+	Group	Properties
+}
+
+Elem	Index-Stats &amp; Vitals
+{
+	Group	Vitals
+	Group	Stats
+}
+
+Elem	Index-Attributes
+{
+	Group	Attributes
+}
+
 Group	NameAndTitles
 {
+	AutoBox	1
 // 	Entry	Type	Display_Name	Property name	Editable
 	Entry	member	Title_Prefix	title_prefix	1
 	Entry	member	Name		name		1
@@ -57,6 +75,7 @@
 
 Group	Location
 {
+	AutoBox	1
 	Entry	member	X	x	1
 	Entry	member	Y	y	1
 	Entry	member	Z	z	1
@@ -65,6 +84,7 @@
 
 Group	Client
 {
+	AutoBox	1
 	Entry	member	Connected	connected	0
 	Entry	member	IP_Address	ip		0
 	Entry	member	Client_Version	clientversion	0
@@ -72,6 +92,7 @@
 
 Group	Account
 {
+	AutoBox	1
 	Entry	member	Account_Name	acctname	0
 	Entry	member	Account_Enabled	acct.enabled	0
 	Entry	member	Account_Banned	acct.banned	0
@@ -79,6 +100,7 @@
 
 Group	Combat
 {
+	AutoBox	1
 	Entry	member	War_Mode		warmode		1
 	Entry	member	Armor_Rating_(AR)	ar		0
 	Entry	member	AR_Modifier		ar_mod		1
@@ -87,6 +109,7 @@
 
 Group	WeaponInfo
 {
+	AutoBox	1
 	Entry	member	Weapon_Name	weapon.desc	0
 	Entry	member	Weapon_Serial	weapon.serial	0
 	Entry	member	Weapon_Objtype	weapon.objtype	0
@@ -99,12 +122,14 @@
 
 Group	Script
 {
+	AutoBox	1
 	Entry	member	Attached_Script	attached.name	0
 	Entry	member	Attached_Pid	attached.pid	0
 }
 
 Group	AI
 {
+	AutoBox	1
 	Entry	member	AI_Script	script		0
 	Entry	member	AI_Pid		process.pid	0
 	Entry	member	Event_Mask	eventmask	0
@@ -113,8 +138,30 @@
 	
 Group	Reputation
 {
+	AutoBox	1
 	Entry	member	Criminal	criminal	1
 	Entry	member	Murderer	murderer	1
 	Entry	blank
 	Entry	custom	Reportables	0
-}
\ No newline at end of file
+}
+
+Group	Properties
+{
+	AutoBox	1
+	
+}
+
+Group	Vitals
+{
+	Entry	Vitals
+}
+
+Group	Stats
+{
+	Entry	Attributes	Stats
+}
+
+Group	Skills
+{
+	Entry	Attributes	Skills
+}

Modified: trunk/096/pkg/commands/gm/info.src
===================================================================
--- trunk/096/pkg/commands/gm/info.src	2005-11-24 03:39:13 UTC (rev 1050)
+++ trunk/096/pkg/commands/gm/info.src	2005-11-24 04:28:37 UTC (rev 1051)
@@ -42,7 +42,7 @@
 		index_list := GetConfigStringArray(info_cfg[&quot;Index&quot;], &quot;Index&quot;);
 	endif
 
-	var targ;
+	var targ := who;
 	if ( serial )
 		targ := SystemFindObjectBySerial(CInt(serial));
 	elseif ( !targ )
@@ -86,14 +86,19 @@
 function BuildEntries(targ, byref gump, byref group_elem, byref y_pos)
 	var entries := GetConfigStringArray(group_elem, &quot;Entry&quot;);
 	var num_entries := entries.Size();
-
-	GFResizePic(gump, 145, y_pos, GFCfgConst(&quot;Defaults&quot;, &quot;ForeGround&quot;), 340, (num_entries*20));
+	
+	if ( group_elem.AutoBox )
+		GFResizePic(gump, 145, y_pos, GFCfgConst(&quot;Defaults&quot;, &quot;ForeGround&quot;), 340, (num_entries*20));
+	endif
+	
 	foreach entry in ( entries )
 		entry := SplitWords(entry, &quot; &quot;);
 		case ( Lower(entry[1]) )
 			&quot;member&quot;: 
 				AddMemberEntry(targ, gump, entry, y_pos);
 				break;
+			&quot;vitals&quot;:
+				DisplayVitals(targ, gump, y_pos);				
 			&quot;blank&quot;: 
 				y_pos := y_pos + 20;
 				break;
@@ -105,19 +110,38 @@
 		
 		sleepms(2);
 	endforeach
+	
+	return 1;
 endfunction
 
 function AddMemberEntry(targ, byref gump, byref entry, byref y_pos)
-	//GFTextLine(gump, 175, y_pos, 2100, entry);
-	if ( entry[4] )
+	if ( CInt(entry[4]) )
 		GFAddButton(gump, 150, (y_pos+3), 2117, 2118, GF_CLOSE_BTN);
 	endif
 	GFTextLine(gump, 175, y_pos, 2100, ParseEntryName(entry[2]));
 	GFTextRight(gump, 480, y_pos, 2100, ParseMembers(targ, entry[3]));
 		
 	y_pos := y_pos+20;
+	
+	return 1;
 endfunction
 
+function DisplayVitals(targ, byref gump, byref y_pos)
+	var vitals := AP_GetVitalNames();
+	var num_vitals := vitals.size();
+	GFResizePic(gump, 145, y_pos, GFCfgConst(&quot;Defaults&quot;, &quot;ForeGround&quot;), 340, (num_vitals*20));
+	foreach vital_name in ( vitals )
+		GFAddButton(gump, 150, (y_pos+3), 2117, 2118, GF_CLOSE_BTN);
+		GFTextLine(gump, 175, y_pos, 2100, vital_name);
+		var value := AP_GetVital(targ, vital_name);
+		var max_value := AP_GetVitalMaximumValue(targ, vital_name);
+		GFTextRight(gump, 480, y_pos, 2100, value+&quot; / &quot;+max_value);
+		y_pos := y_pos+20;
+	endforeach
+	
+	return 1;
+endfunction
+
 function ParseEntryName(entry_name)
 	while ( entry_name[&quot;_&quot;] )
 		entry_name[&quot;_&quot;] := &quot; &quot;;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001023.html">[Poldistro-svn] r1050 - in trunk/096/pkg/commands: config gm
</A></li>
	<LI>Next message: <A HREF="001025.html">[Poldistro-svn] r1052 - trunk/096/pkg/commands/gm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1024">[ date ]</a>
              <a href="thread.html#1024">[ thread ]</a>
              <a href="subject.html#1024">[ subject ]</a>
              <a href="author.html#1024">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/poldistro-svn">More information about the Poldistro-svn
mailing list</a><br>
</body></html>
