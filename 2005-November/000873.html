<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Poldistro-svn] r886 - in trunk/096/scripts/include: . OLD
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/poldistro-svn/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r886%20-%20in%20trunk/096/scripts/include%3A%20.%20OLD&In-Reply-To=%3C200511040219.jA42JRXC018747%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000859.html">
   <LINK REL="Next"  HREF="000860.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Poldistro-svn] r886 - in trunk/096/scripts/include: . OLD</H1>
    <B>Austin Heilman at BerliOS</B> 
    <A HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r886%20-%20in%20trunk/096/scripts/include%3A%20.%20OLD&In-Reply-To=%3C200511040219.jA42JRXC018747%40sheep.berlios.de%3E"
       TITLE="[Poldistro-svn] r886 - in trunk/096/scripts/include: . OLD">austin at berlios.de
       </A><BR>
    <I>Fri Nov  4 03:19:27 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000859.html">[Poldistro-svn] r885 - in trunk/096/pkg/skills/lumberjacking: include treeRegen
</A></li>
        <LI>Next message: <A HREF="000860.html">[Poldistro-svn] r887 - trunk/096/scripts/include/OLD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#873">[ date ]</a>
              <a href="thread.html#873">[ thread ]</a>
              <a href="subject.html#873">[ subject ]</a>
              <a href="author.html#873">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: austin
Date: 2005-11-04 03:19:06 +0100 (Fri, 04 Nov 2005)
New Revision: 886

Added:
   trunk/096/scripts/include/OLD/
   trunk/096/scripts/include/OLD/bard.inc
   trunk/096/scripts/include/OLD/bitwise.inc
   trunk/096/scripts/include/OLD/bounty.inc
   trunk/096/scripts/include/OLD/canAccess.inc
   trunk/096/scripts/include/OLD/clock.inc
   trunk/096/scripts/include/OLD/coords.inc
   trunk/096/scripts/include/OLD/dist.inc
   trunk/096/scripts/include/OLD/eventID.inc
   trunk/096/scripts/include/OLD/exception.inc
   trunk/096/scripts/include/OLD/fields.inc
   trunk/096/scripts/include/OLD/findCity.inc
   trunk/096/scripts/include/OLD/firewall.inc
   trunk/096/scripts/include/OLD/guildFunctions.inc
   trunk/096/scripts/include/OLD/help.inc
   trunk/096/scripts/include/OLD/innCheck.inc
   trunk/096/scripts/include/OLD/isValidLoc.inc
   trunk/096/scripts/include/OLD/magic.inc
   trunk/096/scripts/include/OLD/mrcSpawn.inc
   trunk/096/scripts/include/OLD/myUtil.inc
   trunk/096/scripts/include/OLD/noto.inc
   trunk/096/scripts/include/OLD/objtype.inc
   trunk/096/scripts/include/OLD/recallRune.inc
   trunk/096/scripts/include/OLD/reportMurder.inc
   trunk/096/scripts/include/OLD/resurrection.inc
   trunk/096/scripts/include/OLD/selChar.inc
   trunk/096/scripts/include/OLD/skillLists.inc
   trunk/096/scripts/include/OLD/snooping.inc
   trunk/096/scripts/include/OLD/sorting.inc
   trunk/096/scripts/include/OLD/sound.inc
   trunk/096/scripts/include/OLD/spellAttack.inc
   trunk/096/scripts/include/OLD/spellRestrictions.inc
   trunk/096/scripts/include/OLD/startEqp.inc
   trunk/096/scripts/include/OLD/statMod.inc
   trunk/096/scripts/include/OLD/std.inc
   trunk/096/scripts/include/OLD/stringArrays.inc
   trunk/096/scripts/include/OLD/teleporters.inc
   trunk/096/scripts/include/OLD/tempMod.inc
   trunk/096/scripts/include/OLD/toolWear.inc
   trunk/096/scripts/include/OLD/utility.inc
   trunk/096/scripts/include/OLD/webPage.inc
Removed:
   trunk/096/scripts/include/bard.inc
   trunk/096/scripts/include/bitwise.inc
   trunk/096/scripts/include/bounty.inc
   trunk/096/scripts/include/canAccess.inc
   trunk/096/scripts/include/clock.inc
   trunk/096/scripts/include/coords.inc
   trunk/096/scripts/include/dist.inc
   trunk/096/scripts/include/eventID.inc
   trunk/096/scripts/include/exception.inc
   trunk/096/scripts/include/fields.inc
   trunk/096/scripts/include/findCity.inc
   trunk/096/scripts/include/firewall.inc
   trunk/096/scripts/include/guildFunctions.inc
   trunk/096/scripts/include/help.inc
   trunk/096/scripts/include/innCheck.inc
   trunk/096/scripts/include/isValidLoc.inc
   trunk/096/scripts/include/magic.inc
   trunk/096/scripts/include/math.inc
   trunk/096/scripts/include/moveObject.inc
   trunk/096/scripts/include/mrcSpawn.inc
   trunk/096/scripts/include/myUtil.inc
   trunk/096/scripts/include/noto.inc
   trunk/096/scripts/include/objtype.inc
   trunk/096/scripts/include/properties.inc
   trunk/096/scripts/include/recallRune.inc
   trunk/096/scripts/include/reportMurder.inc
   trunk/096/scripts/include/resurrection.inc
   trunk/096/scripts/include/scripts.inc
   trunk/096/scripts/include/selChar.inc
   trunk/096/scripts/include/skillLists.inc
   trunk/096/scripts/include/snooping.inc
   trunk/096/scripts/include/sorting.inc
   trunk/096/scripts/include/sound.inc
   trunk/096/scripts/include/spellAttack.inc
   trunk/096/scripts/include/spellRestrictions.inc
   trunk/096/scripts/include/startEqp.inc
   trunk/096/scripts/include/statMod.inc
   trunk/096/scripts/include/std.inc
   trunk/096/scripts/include/stringArrays.inc
   trunk/096/scripts/include/teleporters.inc
   trunk/096/scripts/include/tempMod.inc
   trunk/096/scripts/include/toolWear.inc
   trunk/096/scripts/include/utility.inc
   trunk/096/scripts/include/webPage.inc
Modified:
   trunk/096/scripts/include/arrays.inc
   trunk/096/scripts/include/packets.inc
   trunk/096/scripts/include/string.inc
Log:
Moved old includes and ones that don't properly compile to OLD
Added functions to arrays.inc, cleaned up ClearSpaces() in strings.inc a little.

Added: trunk/096/scripts/include/OLD/bard.inc
===================================================================
--- trunk/096/scripts/include/OLD/bard.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/bard.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,39 @@
+use uo;
+
+include &quot;include/client&quot;;
+include &quot;:attributes:attributes&quot;;
+
+function play(character, theskill, item, skil)
+  var success, fail;
+  case(item.graphic)
+    0x0eb1:  success := 0x44;  fail := 0x45;
+    0x0eb2:  success := 0x46;  fail := 0x47;
+    0x0eb3:  success := 0x4d;  fail := 0x4e;
+    0x0eb4:  success := 0x4d;  fail := 0x4e;
+    0x0e9c:  success := 0x39;  fail := 0x3a;
+    0x0e9d:  success := 0x53;  fail := 0x54;
+    0x0e9e:  success := 0x53;  fail := 0x54;
+  endcase
+  var thepoints := GetEffectiveSkill(character, SKILLID_MUSICIANSHIP);
+  if(CheckSkill(character, SKILLID_MUSICIANSHIP, theskill, thepoints))
+    if(CheckSkill(character, skil, theskill, thepoints * 2))
+      PlaySoundEffect( character, success);
+      return 1;
+    else
+      PlaySoundEffect( character, fail);
+      return 0;
+    endif
+  else
+    PlaySoundEffect( character, fail);
+    return 0;
+  endif
+endfunction
+
+function findinstrument(character)
+  var instruments := {0x0eb1, 0x0eb2, 0x0eb3, 0x0eb4, 0x0e9c, 0x0e9d, 0x0e9e};
+  foreach item in EnumerateItemsInContainer(character.backpack)
+    if(item.graphic in instruments)
+      return item;
+    endif
+  endforeach
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/bitwise.inc
===================================================================
--- trunk/096/scripts/include/OLD/bitwise.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/bitwise.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,475 @@
+const CONST_E := 2.718282;
+const CONST_PI := 3.141592;
+
+
+function Log(base, answer)
+
+	var x := 1.000;
+	var logcount := 0.000;
+	var diff := 1.000;
+	var success := 0;
+
+	while (success == 0)
+
+		x := x * base;
+
+		if (Abs(answer - x) &lt; 0.001)
+			logcount := logcount + 1;
+			success := 1;
+		else
+			if (x &gt; answer)
+				diff := diff / 2;
+				logcount := logcount - diff;
+				x := Exp(base, logcount);
+			else
+				logcount := logcount + diff;
+			endif
+		endif
+
+		count := count + 1;
+
+		if (count &gt; 200)
+			success := 1;
+		endif
+
+	endwhile
+
+	return logcount;
+
+endfunction
+
+
+function Mod(numerator, denominator)
+
+	while (numerator &gt; denominator)
+		numerator := numerator - denominator;
+	endwhile
+
+	return numerator;
+
+endfunction
+
+
+function Trunc(number, places)
+
+	var base := Exp(10, places);
+
+	number := number * base;
+	number := CInt(number);
+	number := CDbl(number);
+	number := number / base;
+
+	return number;
+
+endfunction
+
+
+function Fac(factorial);
+
+	var x;
+	while (factorial &gt; 0)
+		x := x * factorial;
+		factorial := factorial - 1;
+	endwhile
+	return x;
+
+endfunction
+
+
+function Exp(base, power)
+
+	var i;
+	var x := 1;
+	var check := CInt(power);
+	if (power == check)
+		for(i:=1;i&lt;=power;i:=i+1)
+			x := x * base;
+		endfor
+		return x;
+	else
+		var m, n;
+		m := power - check;
+		m := m * 1000;
+		n := YRoot(base, 1000);
+		x := Exp(n, m);
+		return x;
+	endif
+
+endfunction
+
+
+function YRoot(x, y)
+
+
+	var i := 0.000;
+	var n := 0.000;
+	var root := 2.000;
+	var a := CInt(Sqr(x));
+
+	if (a &lt; 4)
+		a := 4;
+	endif
+
+	var success := 0;
+
+
+	while (success == 0)	
+
+		n := Exp(root, y);
+		i := x - n;
+		i := i / (a * root);
+		i := Trunc(i, 3);
+		root := root + i;
+		if (i == 0)
+			success := 1;
+			if ( Exp(Root, y) &gt; x )
+				root := root - 0.001;
+			endif
+			if ( Exp((root + 0.001), y) == x)
+				root := root + 0.001;
+			endif
+		endif
+	endwhile
+
+	return root;
+
+endfunction
+
+
+function Sqr(x)
+
+	var i := 0.000;
+	var n := 0.000;
+	var root := 2.000;
+	var success := 0;
+
+	while (success == 0)	
+
+		n := Exp(root, 2);
+		i := x - n;
+		i := i / (2 * root);
+		i := Trunc(i, 3);
+		root := root + i;
+		if (i == 0)
+			success := 1;
+			if ( Exp(Root, 2) &gt; x )
+				root := root - 0.001;
+			endif
+		endif
+	endwhile
+
+	return root;
+
+endfunction
+
+
+function Mean(arrayx)
+
+	var n, i:=0.000;
+
+	foreach n in arrayx
+		i := i + arrayx[n];
+	endforeach
+
+	n := CDbl(i / len(arrayx) );
+
+	return n;
+
+endfunction
+
+
+function StdDev(arrayx)
+
+	var m, n, i := 0.000;
+	var arraymean := Mean(arrayx);
+	var arraylen := len(arrayx);
+
+	foreach m in arrayx
+		n := arrayx[m] - arraymean;
+		n := Exp(n, 2);
+		i := i + n;
+	endforeach
+
+	i := i / (arraylen - 1);
+	n := Sqr(i);
+
+	return n;
+
+endfunction
+
+
+function ZTest(arrayx, mu, sigma)
+
+	var i, n;
+	var z:= 0.000;
+	var arraymean := Mean(arrayx);
+	var arraylen := len(arrayx);
+
+	i := arraymean - mu;
+	n := sigma / Sqr(arraylen);
+
+	z := i/n;
+
+	return := z;
+
+endfunction
+
+
+function TTest(arrayx, mu)
+
+	var i, n, s;
+	var t:= 0.000;
+	var arraymean := Mean(arrayx);
+	var arraylen := len(arrayx);
+	var s := StdDev(arrayx);
+
+	i := arraymean - mu;
+	n := s / Sqr(arraylen);
+
+	t := i/n;
+
+	return := t;
+
+endfunction
+
+function BitIn(arrayx)
+
+	var i := 8;
+	var n;
+	var loop := 1;
+	var bitvalue := 0;
+
+	while (i &gt;= 0)
+
+		n := 8 - i;
+		if (arrayx[i] == 1)
+			bitvalue := bitvalue + Exp(2, n);
+		endif
+		i := i - 1;
+
+	endwhile
+
+	return bitvalue;
+
+endfunction
+
+
+function BitOut(x)
+
+	x := CInt(x);
+	var loop := 1;
+	var bitvalue := 0;
+	var arrayx := {0,0,0,0,0,0,0,0};
+	var n;
+
+	while (loop &lt;= 8)
+
+		n := 8 - loop;
+		bitvalue := Exp(2, n);
+		if ( (x - bitvalue) &gt;= 0)
+			arrayx[loop] := 1;
+			x := x - bitvalue;
+		endif
+		loop := loop + 1;
+
+	endwhile
+
+	return arrayx;
+
+endfunction
+
+
+function BitAnd(x, y)
+
+	var arrayx := BitOut(x);
+	var arrayy := BitOut(y);
+	var z := 0;
+	var loop := 1;
+	var n;
+
+	while (loop &lt;= 8)
+
+		n := loop - 1;
+		if ( (arrayx[loop] == 1) &amp;&amp; (arrayy[loop] == 1) )
+			z := z + Exp(2, n);
+		endif
+		loop := loop + 1;
+
+	endwhile
+
+	return z;
+
+endfunction
+
+
+function BitOr(x, y)
+
+	var arrayx := BitOut(x);
+	var arrayy := BitOut(y);
+	var z := 0;
+	var loop := 1;
+	locan n;
+
+	while (loop &lt;= 8)
+
+		n := loop - 1;
+		if ( (arrayx[loop] == 1) || (arrayy[loop] == 1) )
+			z := z + Exp(2, n);
+		endif
+		loop := loop + 1;
+
+	endwhile
+
+	return z;
+
+endfunction
+
+
+function BitXor(x, y)
+
+	var arrayx := BitOut(x);
+	var arrayy := BitOut(y);
+	var z := 0;
+	var loop := 1;
+	var n;
+
+	while (loop &lt;= 8)
+
+		n := loop - 1;
+		if (arrayx[loop] - arrayy[loop] != 0)
+			z := z + Exp(2, n);
+		endif
+		loop := loop + 1;
+
+	endwhile
+
+	return z;
+
+endfunction
+
+
+function BitEqv(x, y)
+
+	var arrayx := BitOut(x);
+	var arrayy := BitOut(y);
+	var z := 0;
+	var loop := 1;
+	var n;
+
+	while (loop &lt;= 8)
+
+		n := loop - 1;
+		if (arrayx[loop] - arrayy[loop] == 0)
+			z := z + Exp(2, n);
+		endif
+		loop := loop + 1;
+
+	endwhile
+
+	return z;
+
+endfunction
+
+
+function BitImp(x, y)
+
+	var arrayx := BitOut(x);
+	var arrayy := BitOut(y);
+	var z := 0;
+	var loop := 1;
+	var n;
+
+	while (loop &lt;= 8)
+
+		n := loop - 1;
+		if (arrayx[loop] - arrayy[loop] &lt; 1)
+			z := z + Exp(2, n);
+		endif
+		loop := loop + 1;
+
+	endwhile
+
+	return z;
+
+endfunction
+
+
+function BitNot(x)
+
+	var arrayx := BitOut(x);
+	var z := 0;
+	var loop := 1;
+	var n;
+
+	while (loop &lt;= 8)
+
+		n := loop - 1;
+		if (arrayx[loop] == 0)
+			arrayx[loop] := 1;
+			z := z + Exp(2, n);
+		else
+			arrayx[loop] := 0;
+		endif
+
+		loop := loop + 1;
+
+	endwhile
+
+	return z;
+
+endfunction
+
+
+function FlagSet(flag, bit);
+
+	bit := 9 - bit;
+
+	var flagarray := BitOut(flag);
+	flagarray[bit] := 1;
+
+	bit := BitIn(flagarray);
+
+	return bit;
+
+endfunction
+
+
+function FlagReset(flag, bit);
+
+	var x := 1;
+	var y := 0;
+	var n := 0;
+
+	bit := 9 - bit;
+
+	var flagarray := BitOut(flag);
+	flagarray[bit] := 0;
+
+	while (x &lt;= 8)
+
+		if (flagarray[x] == 1)
+			n := x - 1;
+			y := y + Exp(2, n);
+		endif
+
+		x := x + 1;
+
+	endwhile
+
+	return y;
+
+endfunction
+
+
+function FlagCheck(flag, bit);
+
+	var flagarray := BitOut(flag);
+	bit := 9 - bit;
+
+	if (flagarray[bit] == 1)
+		return 1;
+	else
+		return 0;
+	endif
+
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/bounty.inc
===================================================================
--- trunk/096/scripts/include/OLD/bounty.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/bounty.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,59 @@
+use datafile;
+
+var bountyfile := DFOpenDataFile(&quot;BountySystem&quot;, 1);
+
+function AddBounty(killer, amt)
+  var entry := DFFindElement(bountyfile, CStr(killer.serial), 1);
+  print(entry);
+  entry.SetProp(&quot;Name&quot;, killer.name);
+  entry.SetProp(&quot;Bounty&quot;, CInt(DFGetProp(entry, &quot;Bounty&quot;, 1, 0) + amt));
+  entry.SetProp(&quot;Murders&quot;, CInt(DFGetProp(entry, &quot;Murders&quot;, 1, 0) + 1));
+  entry.SetProp(&quot;Expires&quot;, ReadGameClock() + 1209600);
+endfunction
+
+function FindBounty(who, serial)
+  who := who; // stops ecompile &quot;not used&quot; warning
+  var elem := DFFindElement(bountyfile, CStr(serial));
+  if(elem)
+    var holder := array;
+    holder.append(DFGetProp(elem, &quot;Name&quot;));
+    holder.append(DFGetProp(elem, &quot;Bounty&quot;));
+    holder.append(DFGetProp(elem, &quot;Murders&quot;));
+    bountyfile.DeleteElement(CStr(serial));
+    return holder;
+  else
+    return 0;
+  endif
+endfunction
+
+function ComposeBountyBoard()
+  var pnames := bountyfile.keys();
+  var data := array;
+  Foreach thing in pnames
+    var elem := DFFindElement(bountyfile, thing);
+    var holder := array;
+    holder.append(DFGetProp(elem, &quot;Name&quot;));
+    holder.append(CInt(thing));
+    holder.append(DFGetProp(elem, &quot;Bounty&quot;));
+    holder.append(DFGetProp(elem, &quot;Murders&quot;, 1, 1));
+    data.append(holder);
+  endforeach
+  return bubble_sort_array(data, 3);
+endfunction
+
+function MaintainBountySystem()
+  var count := 0;
+  foreach thing in (bountyfile.keys())
+    var elem := DFFindElement(bountyfile, thing);
+    if(ReadGameClock() &gt; DFGetProp(elem, &quot;Expires&quot;))
+      bountyfile.DeleteElement(thing);
+      count := count + 1;
+    endif
+    sleep(1);
+  endforeach
+  print(&quot;//////////////////////////////////////////&quot;);
+  print(&quot;// Bounty System Maintenance&quot;);
+  print(&quot;// Removed &quot; + count + &quot; expired bounties.&quot;);
+  print(&quot;//////////////////////////////////////////&quot;);
+endfunction
+

Added: trunk/096/scripts/include/OLD/canAccess.inc
===================================================================
--- trunk/096/scripts/include/OLD/canAccess.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/canAccess.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,25 @@
+
+function can_access(who, item, flags := 0)
+  var owner := Cint(GetObjProperty(item, &quot;Owner&quot;));
+  if((owner) and (owner != who.serial))
+    SendSysMessage(who, &quot;You cannot use that (1) &quot; + item.desc);
+    return 0;
+  elseif(GetObjProperty(item, &quot;Vendored&quot;))
+    SendSysMessage(who, &quot;You cannot use that (2) &quot; + item.desc);
+    return 0;
+  elseif(!Accessible(who, item))
+    SendSysMessage(who, &quot;You cannot use that (3) &quot; + item.desc);
+    return 0;
+  elseif((!flags[&quot;distance&quot;]) and ((Distance(who, item) &gt; 2)))
+    SendSysMessage(who, &quot;That item is too far away.&quot;);
+    return 0;
+  elseif((!flags[&quot;unmovable&quot;]) and (item.movable == 0))
+    SendSysMessage(who, &quot;You cannot use that while locked down.&quot;);
+    return 0;
+  elseif(!ReserveItem(item))
+    SendSysMessage(who, &quot;That item is already in use.&quot;);
+    return 0;
+  else
+    return 1;
+  endif
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/clock.inc
===================================================================
--- trunk/096/scripts/include/OLD/clock.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/clock.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,67 @@
+use uo;
+use cfgfile;
+
+function GetTime()
+  var cfg := ReadConfigFile( &quot;:daynight:config/days&quot; );
+  var elem := FindConfigElem( cfg, &quot;WholeDay&quot; );
+  var length := GetConfigInt( elem, &quot;Length&quot; );
+  var day_length := (60 * length);
+  var x := ReadGameClock();
+  var bigpart := x / day_length;
+  var smallpart := bigpart * day_length;
+  x := (x - smallpart);
+  return ( x );
+endfunction
+
+function GetTransition()
+  var cfg := ReadConfigFile( &quot;:daynight:config/days&quot; );
+  var elem := FindConfigElem( cfg, &quot;Transition&quot; );
+  var length := GetConfigInt( elem, &quot;Length&quot; );
+  return length;
+endfunction
+
+function GetDayLength()
+  var cfg := ReadConfigFile( &quot;:daynight:config/days&quot; );
+  var elem := FindConfigElem( cfg, &quot;WholeDay&quot; );
+  var length := GetConfigInt( elem, &quot;Length&quot; );
+  return length;
+endfunction
+
+function GetTimeofDay()
+  var time_sec := GetTime();
+  var length := (GetDayLength() * 60) * 1.0;
+  var temp := length / time_sec;
+  var raw_time := 24.0 / temp;
+  var hours := CInt(raw_time);
+  var remainder := raw_time - hours;
+  var minutes := CInt( remainder * 60 );
+  if( len(CStr(minutes)) == 1 )
+	minutes := &quot;0&quot; + CStr(minutes);
+  endif
+  if( len(CStr(hours)) == 1 )
+	hours := &quot;0&quot; + CStr(hours);
+  endif
+  return (hours+&quot;:&quot;+minutes);
+endfunction
+
+function GetHourOfDay()
+  var time := GetTimeofDay();
+  var colon := find(time, &quot;:&quot;, 1);
+  return CInt(time[1, colon]);
+endfunction
+
+function HourWithinRange(hr, hrstart, hrend)
+  hr := CInt(hr) + 24;
+  hrstart := CInt(hrstart) + 24;
+  hrend := CInt(hrend) + 24;
+  if (hrstart &gt; hrend)
+	if (hr &gt;= hrstart || hr &lt; hrend)
+	  return 1;
+	endif
+  else
+	if (hr &gt;= hrstart &amp;&amp; hr &lt;= hrend)
+	  return 1;
+	endif
+  endif
+  return 0;
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/coords.inc
===================================================================
--- trunk/096/scripts/include/OLD/coords.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/coords.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,25 @@
+use basic;
+use math;
+
+function ToSextant(x, y)
+  var latitude_direction, longitude_direction;
+  var latitude_degrees, longitude_degrees;
+  var latitude_minutes, longitude_minutes;
+  latitude_degrees := (y-1624)*0.087890625;
+  longitude_degrees := (x-1323)*0.0703125;
+  if(latitude_degrees &lt; 0)
+	latitude_direction := &quot;N&quot;;
+  else
+	latitude_direction := &quot;S&quot;;
+  endif
+  if(longitude_degrees &lt; 0)
+	longitude_direction := &quot;W&quot;;
+  else
+	longitude_direction := &quot;E&quot;;
+  endif
+  latitude_degrees := Abs(latitude_degrees);
+  longitude_degrees := Abs(longitude_degrees);
+  latitude_minutes := CInt((CInt((latitude_degrees-Floor(latitude_degrees))*100)*60)/100);
+  longitude_minutes := CInt((CInt((longitude_degrees-Floor(longitude_degrees))*100)*60)/100);
+  return(Floor(latitude_degrees) + &quot;o &quot; + latitude_minutes + &quot;'&quot; + latitude_direction + &quot;, &quot; + Floor(longitude_degrees) + &quot;o &quot; + longitude_minutes + &quot;'&quot; + longitude_direction);
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/dist.inc
===================================================================
--- trunk/096/scripts/include/OLD/dist.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/dist.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,52 @@
+/*
+ *  dist( obj1, obj2 )
+ *      - returns the largest of the x-distance and y-distance 
+ *        between two objects.
+ */
+
+use uo;
+
+function dist( obj1, obj2 )
+    return Distance( obj1, obj2 );
+
+            /* implements:
+                while (obj1.container)
+                    obj1 := obj1.container;
+                endwhile
+    
+                while (obj2.container)
+                    obj2 := obj2.container;
+                endwhile
+
+                var xd := obj1.x - obj2.x;
+                var yd := obj1.y - obj2.y;
+                if (xd &lt; 0)
+                    xd := -xd;
+                endif
+                if (yd &lt; 0)
+                    yd := -yd;
+                endif
+                if (xd &gt; yd)
+                    return xd;
+                else
+                    return yd;
+                endif
+            */
+endfunction
+
+function coordist( x1, y1, x2, y2 )
+
+   var xd := x1 - x2;
+   var yd := y1 - y2;
+   if (xd &lt; 0)
+      xd := -xd;
+   endif
+   if (yd &lt; 0)
+      yd := -yd;
+   endif
+   if (xd &gt; yd)
+      return xd;
+   else
+     return yd;
+   endif
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/eventID.inc
===================================================================
--- trunk/096/scripts/include/OLD/eventID.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/eventID.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,84 @@
+//
+// event IDs to be returned in eventid member of wait_for_event
+// result.
+//
+// See documentation for details.
+//
+// TODO: move this to OS.EM, when .EM files can have constants.
+//
+// Author: ens
+//
+// Last modification: 01/22/1999
+//
+
+
+//const EVID_SPEECH           := 0x0001;
+
+const EVID_ENGAGED          := 0x0002;
+const EVID_DISENGAGED       := 0x0004;
+const EVID_NODE             := 0x0005;
+const EVID_DAMAGED          := 0x0008;
+const EVID_HERDING          := 0x1111;
+const EVID_WAKEUP           := 0x1112;
+const EVID_SKILLCAP         := 0x1113;
+const EVID_STATCAP          := 0x1114;
+const EVID_SPAWNREGION      := 0x1115;
+const EVID_SR_DEATH         := 0x1116;
+const EVID_SR_PENDING       := 0x1117;
+const EVID_ENTEREDAREA      := 0x0010;
+const EVID_STAFF_LOGIN      := 0x0011;
+const EVID_PLAYER_LOGIN     := 0x0012;
+const EVID_PLAYER_LOGOFF    := 0x0013;
+const EVID_PLAYER_DELAY     := 0x0014;
+const EVID_FIND_COUN        := 0x0015;
+const EVID_FIND_GM          := 0x0016;
+const EVID_GUILD_DISBAND    := 0x0017;
+const EVID_GUILD_CREATED    := 0x0018;
+
+const EVID_ALL_ATTACK_CMD := 0x12;
+const EVID_ALL_FOLLOW_CMD := 0x11;
+
+const EVID_LEFTAREA         := 0x0020;
+
+const EVID_OPPONENT_MOVED   := 0x0040;
+
+const EVID_HOSTILE_MOVED    := 0x0080; // not implemented
+
+const EVID_MERCHANT_BOUGHT  := 0x0100;
+const EVID_MERCHANT_SOLD    := 0x0200;
+
+const EVID_ITEM_GIVEN       := 0x0400;
+const EVID_DOUBLECLICKED    := 0x0800;
+
+const EVID_RESERVED_1000    := 0x00001000;
+const EVID_RESERVED_2000    := 0x00002000;
+const EVID_RESERVED_4000    := 0x00004000;
+const EVID_RESERVED_8000    := 0x00008000;
+
+const EVID_SPAWNPOINT_CREATED	:= 1010;
+const EVID_SPAWNPOINT_DESTROYED := 1020;
+const EVID_SPAWNPOINT_RESET		:= 1040;
+const EVID_SPAWNPOINT_CHANGED	:= 1080;
+const EVID_SPAWN_DEATH			:= 1100;
+const EVID_SPAWNREGION_DEATH	:= 3001;
+const EVID_RESERVED_00010000    := 0x00010000;
+const EVID_RESERVED_00020000    := 0x00020000;
+const EVID_RESERVED_00040000    := 0x00040000;
+const EVID_RESERVED_00080000    := 0x00080000;
+const EVID_RESERVED_00100000    := 0x00100000;
+const EVID_RESERVED_00200000    := 0x00200000;
+const EVID_RESERVED_00400000    := 0x00400000;
+const EVID_RESERVED_00800000    := 0x00800000;
+const EVID_RESERVED_01000000    := 0x01000000;
+const EVID_RESERVED_02000000    := 0x02000000;
+const EVID_RESERVED_04000000    := 0x04000000;
+const EVID_RESERVED_08000000    := 0x08000000;
+const EVID_RESERVED_10000000    := 0x10000000;
+const EVID_RESERVED_20000000    := 0x20000000;
+const EVID_RESERVED_40000000    := 0x40000000;
+const EVID_RESERVED_80000000    := 0x80000000;
+
+/* FIXME: these need to be renumbered, one clashes with a reserved event */
+const EVID_SPELL_ATTACK     := 0x0800;
+const EVID_BUDDYATTACKED     := 0x1600;
+const EVID_PEACEMADE         := 0x90000000;
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/exception.inc
===================================================================
--- trunk/096/scripts/include/OLD/exception.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/exception.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,35 @@
+/* $Id: exception.inc 236 2005-09-25 09:06:19Z panosl $
+ *
+ * Purpose
+ * Provides various functions and constants for exceptions.
+ *
+ */
+use uo;
+
+include &quot;include/log&quot;;
+
+
+/*
+ * Exception(what)
+ *
+ * Author: Folko
+ *
+ * Purpose
+ * Raises and exception and logs it to the error log.
+ *
+ * Parameters
+ * what:        A string describing the error
+ *
+ * Return value
+ * Always returns an error-object
+ *
+ * Notes
+ * Only use this for script errors etc., we don't want spam in the error log.
+ *
+ */
+function Exception(what)
+	print(&quot;******Exception: &quot; + what + &quot;******&quot;);
+	Log(LOG_ERROR, &quot;Exception: &quot; + what);
+
+	return(error);
+endfunction

Added: trunk/096/scripts/include/OLD/fields.inc
===================================================================
--- trunk/096/scripts/include/OLD/fields.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/fields.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,67 @@
+function get_direction(who)
+  var ret;
+  if(who.facing in array(1, 3, 5, 7))
+    case (RandomInt(2))
+      0: ret := &quot;NS&quot;;
+      1: ret := &quot;EW&quot;;
+	endcase
+  else
+    case(who.facing)
+      2: ret := &quot;EW&quot;;
+      4: ret := &quot;NS&quot;;
+      6: ret := &quot;EW&quot;;
+      0: ret := &quot;NS&quot;;
+    endcase
+  endif
+  return ret;
+endfunction
+
+function CreateNorthSouthField(caster, fieldtype,x,y,z, length := 5)
+  var counter := 0;
+  var i;
+  var fires := { };
+  var tester := CreateItemAtLocation(x,y,z, 0xeed, 1, caster.realm);
+  for ( i := x - 2; i &lt;= x - 2 + length; i := i + 1)
+    counter := counter  + 1;
+    if(fieldtype == 0x80)
+      if((CheckLosAt(tester, i, y, z )) and (len(ListMobilesNearLocation(i, y, z, 0, caster.realm)) == 0))
+        fires[counter] := CreateItemAtLocation( i, y, z, fieldtype, 1, caster.realm);
+        SetObjProperty(fires[counter], &quot;f&quot;,&quot;1&quot;);
+        SetObjProperty(fires[counter], &quot;creater&quot;, caster.serial);
+      endif
+    else
+      if(CheckLosAt(tester, i, y, z ))
+        fires[counter] := CreateItemAtLocation( i,y,z,fieldtype, 1, caster.realm );
+        SetObjProperty(fires[counter], &quot;creater&quot;, caster.serial);
+        SetObjProperty(fires[counter], &quot;f&quot;,&quot;1&quot;);
+      endif
+    endif
+  endfor
+  DestroyItem(tester);
+  return fires;
+endfunction
+
+function CreateEastWestField(caster, fieldtype,x,y,z, length)
+  var counter := 0;
+  var i;
+  var fires := { };
+  var tester := CreateItemAtLocation(x,y,z, 0xeed, 1, caster.realm);
+  for ( i := y - 2; i &lt;= y - 2 + length; i := i + 1)
+    counter := counter  + 1;
+    if(fieldtype == 0x80)
+      if((CheckLosAt(tester, x, i, z )) and (len(ListMobilesNearLocation(x, i, z, 0, caster.realm)) == 0))
+        fires[counter] := CreateItemAtLocation( x,i,z,fieldtype, 1, caster.realm );
+        SetObjProperty(fires[counter], &quot;f&quot;,&quot;1&quot;);
+        SetObjProperty(fires[counter], &quot;creater&quot;, caster.serial);
+      endif
+    else
+      if(CheckLosAt(tester, x, i, z ))
+        fires[counter] := CreateItemAtLocation( x,i,z,fieldtype, 1, caster.realm );
+        SetObjProperty(fires[counter], &quot;f&quot;,&quot;1&quot;);
+        SetObjProperty(fires[counter], &quot;creater&quot;, caster.serial);
+      endif
+    endif
+  endfor
+  DestroyItem(tester);
+  return fires;
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/findCity.inc
===================================================================
--- trunk/096/scripts/include/OLD/findCity.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/findCity.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,47 @@
+use os;
+use uo;
+
+function FindCity(me)
+  if(me.x&gt;=1244 &amp;&amp; me.y&gt;=1530 &amp;&amp; me.x&lt;=1704 &amp;&amp; me.y&lt;=1758)
+    return &quot;Britain&quot;;
+  elseif(me.x&gt;=4379 &amp;&amp; me.y&gt;=1045 &amp;&amp; me.x&lt;=4487 &amp;&amp; me.y&lt;=1178)
+    return &quot;Moonglow&quot;;
+  elseif(me.x&gt;=5137 &amp;&amp; me.y&gt;=3948 &amp;&amp; me.x&lt;=5196 &amp;&amp; me.y&lt;=4082)
+    return &quot;Delucia&quot;;
+  elseif(me.x&gt;=5196 &amp;&amp; me.y&gt;=3923 &amp;&amp; me.x&lt;=5322 &amp;&amp; me.y&lt;=4085)
+    return &quot;Delucia&quot;;
+  elseif(me.x&gt;=5638 &amp;&amp; me.y&gt;=3083 &amp;&amp; me.x&lt;=5799 &amp;&amp; me.y&lt;=3328)
+    return &quot;Papua&quot;;
+  elseif(me.x&gt;=5799 &amp;&amp; me.y&gt;=3121 &amp;&amp; me.x&lt;=5822 &amp;&amp; me.y&lt;=3327)
+    return &quot;Papua&quot;;
+  elseif(me.x&gt;=1294 &amp;&amp; me.y&gt;=3664 &amp;&amp; me.x&lt;=1506 &amp;&amp; me.y&lt;=3886)
+    return &quot;Jhelom&quot;;
+  elseif(me.x&gt;=494 &amp;&amp; me.y&gt;=926 &amp;&amp; me.x&lt;=600 &amp;&amp; me.y&lt;=1034)
+    return &quot;Yew&quot;;
+  elseif(me.x&gt;=590 &amp;&amp; me.y&gt;=796 &amp;&amp; me.x&lt;=670 &amp;&amp; me.y&lt;=886)
+    return &quot;Empath Abbey&quot;;
+  elseif(me.x&gt;=2394 &amp;&amp; me.y&gt;=370 &amp;&amp; me.x&lt;=2624 &amp;&amp; me.y&lt;=632)
+    return &quot;Minoc&quot;;
+  elseif(me.x&gt;=1794 &amp;&amp; me.y&gt;=2638 &amp;&amp; me.x&lt;=2136 &amp;&amp; me.y&lt;=2902)
+    return &quot;Trinsic&quot;;
+  elseif(me.x&gt;=538 &amp;&amp; me.y&gt;=2106 &amp;&amp; me.x&lt;=686 &amp;&amp; me.y&lt;=2274)
+    return &quot;Skara Brae&quot;;
+  elseif(me.x&gt;=3646 &amp;&amp; me.y&gt;=2040 &amp;&amp; me.x&lt;=3814 &amp;&amp; me.y&lt;=2280)
+    return &quot;Magincia&quot;;
+  elseif(me.x&gt;=3588 &amp;&amp; me.y&gt;=2446 &amp;&amp; me.x&lt;=3762 &amp;&amp; me.y&lt;=2690)
+    return &quot;Occlo&quot;;
+  elseif(me.x&gt;=2612 &amp;&amp; me.y&gt;=2082 &amp;&amp; me.x&lt;=2772 &amp;&amp; me.y&lt;=2256)
+    return &quot;Buccaneers Den&quot;;
+  elseif(me.x&gt;=3496 &amp;&amp; me.y&gt;=1062 &amp;&amp; me.x&lt;=3808 &amp;&amp; me.y&lt;=1400)
+    return &quot;Nujelm&quot;;
+  elseif(me.x&gt;=2794 &amp;&amp; me.y&gt;=634 &amp;&amp; me.x&lt;=3026 &amp;&amp; me.y&lt;=1000)
+    return &quot;Vesper&quot;;
+  elseif(me.x&gt;=2206 &amp;&amp; me.y&gt;=1116 &amp;&amp; me.x&lt;=2290 &amp;&amp; me.y&lt;=1236)
+    return &quot;Cove&quot;;
+  elseif(me.x&gt;=5120 &amp;&amp; me.y&gt;=0 &amp;&amp; me.x&lt;=5374 &amp;&amp; me.y&lt;=254)
+    return &quot;Wind&quot;;
+  elseif(me.x&gt;=1382 &amp;&amp; me.y&gt;=3955 &amp;&amp; me.x&lt;=1528 &amp;&amp; me.y&lt;=4044)
+    return &quot;Jhelom&quot;;
+  endif
+  return &quot;no city&quot;;
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/firewall.inc
===================================================================
--- trunk/096/scripts/include/OLD/firewall.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/firewall.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,66 @@
+use os;
+use util;
+use uo;
+
+include &quot;include/client&quot;;
+include &quot;include/fields&quot;;
+
+const SOUND_EFFECT_FIREFIELD:= 0x1de;
+const UOBJ_FIREFIELD_NS := 0x398c;
+const UOBJ_FIREFIELD_EW := 0x3996;
+const SOUND_EFFECT_POISON := 0x247;
+const EFFECT_RED_SPARKLE := 0x374a;
+
+/*
+function DoFireField( caster )
+var thetarget;
+var x;
+var y;
+var z;
+var i;
+var fires := { };
+var duration;
+var listeners := { };
+var sufferers := { };
+thetarget := TargetCoordinates(caster);
+if ((!thetarget))
+        SendSysMessage(caster, &quot;Targetting cancelled.&quot;);
+endif
+x := thetarget.x;
+y := thetarget.y;
+z := thetarget.z;
+if (!CheckLosAt( caster, x, y, z ))
+        SendSysMessage(caster, &quot;You can't see that!&quot;);
+        return;
+endif
+var dir := get_direction(caster, x, y, z);
+case dir
+	&quot;north&quot; : fires:= CreateNorthSouthField(caster, UOBJ_FIREFIELD_NS, x, y, z, 5);
+	&quot;south&quot;  :fires:= CreateNorthSouthField(caster, UOBJ_FIREFIELD_NS, x, y, z, 5);
+	&quot;east&quot;  : fires:= CreateEastWestField(caster, UOBJ_FIREFIELD_EW, x, y, z, 5);
+        &quot;west&quot;  : fires:= CreateEastWestField(caster, UOBJ_FIREFIELD_EW, x, y, z, 5);
+        default:  var firetype := RandomInt(2) + 1;
+        	  case firetype
+        	  	1: fires:= CreateNorthSouthField(caster, UOBJ_FIREFIELD_NS, x, y, z, 5);
+        	  	2: fires:= CreateEastWestField(caster, UOBJ_FIREFIELD_EW, x, y, z, 5);
+        	  endcase
+endcase
+Detach();
+foreach fire in fires
+        PlaySoundEffect(fire, SOUND_EFFECT_FIREFIELD);
+endforeach
+var counter := 0;
+duration := CInt(GetEffectiveSkill( caster, SKILLID_MAGERY ) );
+for (counter := 1; counter &lt;= duration; counter := counter + 1)
+foreach fire in fires
+	if (fire)
+        PlaySoundEffect(fire, SOUND_EFFECT_FIREFIELD);
+    endif
+endforeach
+sleep(1);
+endfor
+foreach fire in fires
+    DestroyItem( fire );
+endforeach
+endfunction
+*/
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/guildFunctions.inc
===================================================================
--- trunk/096/scripts/include/OLD/guildFunctions.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/guildFunctions.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,337 @@
+use uo;
+use os;
+
+var guildinitlayout := {
+	&quot;page 0&quot;,
+	&quot;resizepic 30 30 3000 400 200&quot;,
+	&quot;text 163 43 5 0&quot;,
+	&quot;text 50 65 5 1&quot;,
+	&quot;text 80 85 35 2&quot;,
+	&quot;text 50 105 5 3&quot;,
+	&quot;text 80 125 35 4&quot;,
+	&quot;text 50 145 5 5&quot;,
+	&quot;text 80 165 35 6&quot;,
+	&quot;button 230 195 2119 2120 1 0 1&quot;,
+	&quot;button 165 195 2130 2129 1 0 2&quot;
+};
+
+var guildinitdata := {
+	&quot;Guild Information&quot;,
+	&quot;Guild Name:&quot;,
+	&quot;Guildname&quot;,
+	&quot;Guild Abbreviation:&quot;,
+	&quot;Guildabbr&quot;,
+	&quot;Guildmaster:&quot;,
+	&quot;Guildmaster&quot;
+};
+// ResetGuildStone(stone)
+//
+// This function will initialize a guildstone.  It will wipe all
+// existing guild data from the stone, queue all of the guild's
+// players so their guild info is removed, and remove the guild from
+// the registry.
+
+function ResetGuildStone(stone)
+
+	var i, x;
+	var empty := {};
+
+	var guildmembers := GetObjProperty(stone, &quot;MemberSerials&quot;);
+
+	SetObjProperty(stone, &quot;GuildName&quot;, &quot;NONE&quot;);
+	SetObjProperty(stone, &quot;GuildAbbr&quot;, &quot;NONE&quot;);
+	SetObjProperty(stone, &quot;GuildAlign&quot;, &quot;NONE&quot;);
+	SetObjProperty(stone, &quot;MemberSerials&quot;, empty);
+	SetObjProperty(stone, &quot;MemberNames&quot;, empty);
+	SetObjProperty(stone, &quot;MemberTitles&quot;, empty);
+	SetObjProperty(stone, &quot;Enemies&quot;, empty);
+	SetObjProperty(stone, &quot;Allies&quot;, empty);
+	SetObjProperty(stone, &quot;PendingAction&quot;, empty);
+
+	set_critical(1);
+	var guildregistry := GetGlobalProperty(&quot;GuildRegistry&quot;);
+	var newregistry := {};
+	var newreglen := 0;
+	for (i := 1; i &lt;= len(guildregistry); i := i + 1);
+		if (stone.serial != guildregistry[i])
+			newreglen := newreglen + 1;
+			newregistry[newreglen] := guildregistry[i];
+		endif
+	endfor
+	SetGlobalProperty(&quot;GuildRegistry&quot;, newregistry);
+	set_critical(0);
+
+	foreach x in guildmembers
+		GuildAction(x.serial, stone, &quot;Disband&quot;);
+	endforeach
+
+	PrintTextAbove(stone, &quot;Guildstone has been reset.&quot;);
+
+endfunction
+
+
+// GuildAction(destination, source, action)
+//
+// This function adds a PendingAction to a guildstone.  It can be used
+// to declare war, peace, or alliances with other guildstones, (in
+// which case destination = target guild's stone serial, source = 
+// the declarer's guildstone, and the action = &quot;War&quot;, &quot;Peace&quot;, or 
+// &quot;Ally&quot;), or it can be used to remove or retitle other members of
+// the guild  (in which case destination = target's serial, source =
+// the stone, and action = &quot;Remove&quot;, &quot;Disband&quot;, &quot;Add&quot;, etc).  If a 
+// player is changed, and the player is not online, then the action
+// is posted to the global queue.  The function returns 1 on success, 
+// 2 if the target was offline, and 0 for failure.
+
+function GuildAction(destination, source, action)
+
+	var i, x;
+	var targobj;
+	var pendingaction;
+
+	var guildname := GetObjProperty(source, &quot;GuildName&quot;);
+
+	if ( (action == &quot;War&quot;) || (action == &quot;Peace&quot;) || (action == &quot;Ally&quot;) )
+		targobj := SystemFindObjectBySerial(destination);
+		pendingaction := GetObjProperty(targobj, &quot;PendingAction&quot;);
+		x := len(pendingaction) + 1;
+		pendingaction[x] := source.serial;
+		x := x + 1;
+		pendingaction[x] := action;
+		SetObjProperty(targobj, &quot;PendingAction&quot;, pendingaction);
+		return 1;
+	elseif ( (action == &quot;Remove&quot;) || (action == &quot;Disband&quot;) || (action == &quot;Retitle&quot;) || (action == &quot;Add&quot;))
+		i := 0;
+		foreach x in EnumerateOnlineCharacters()
+			if (x.serial == destination)
+				targobj := x;
+				i := 1;
+			endif
+		endforeach
+		if (i == 1)
+			case(action)
+				&quot;Remove&quot;:
+				SendSysMessage(targobj, &quot;You have been removed from &quot; + guildname + &quot;!&quot;);
+				EraseObjProperty(targobj, &quot;Guild&quot;);
+				targobj.name := GetObjProperty(targobj, &quot;OldName&quot;);
+				EraseObjProperty(targobj, &quot;GuildTitle&quot;);
+				EraseObjProperty(targobj, &quot;OldName&quot;);
+				return 1;
+
+				&quot;Disband&quot;:
+				SendSysMessage(targobj, &quot;Your guild, &quot; + guildname + &quot;, has disbanded.&quot;);
+				EraseObjProperty(targobj, &quot;Guild&quot;);
+				targobj.name := GetObjProperty(targobj, &quot;OldName&quot;);
+				EraseObjProperty(targobj, &quot;GuildTitle&quot;);
+				EraseObjProperty(targobj, &quot;OldName&quot;);
+				return 1;
+
+				&quot;Retitle&quot;:
+				SendSysMessage(targobj, &quot;You have been granted a new guild title.  Go to the guildstone and update your information.&quot;);
+				return 1;
+
+				&quot;Add&quot;:
+				SendSysMessage(targobj, &quot;You have been recruited into &quot; + guildname + &quot;.&quot;);
+				SetObjProperty(targobj, &quot;OldName&quot;, targobj.name);
+				SetObjProperty(targobj, &quot;Guild&quot;, source.serial);
+				SetObjProperty(targobj, &quot;GuildTitle&quot;, &quot;Initiate&quot;);
+				return 1;
+
+			endcase
+		else
+			set_critical(1);
+			var guildpendingaction := GetGlobalProperty(&quot;GuildPendingAction&quot;);
+			i := len(guildpendingaction) + 1;
+			guildpendingaction[x] := destination;
+			x := x + 1;
+			guildpendingaction[x] := action;
+			SetGlobalProperty(&quot;GuildPendingAction&quot;, guildpendingaction);
+			set_critical(0);
+			return 2;
+		endif	
+	else
+		print(&quot;Error selecting action type.&quot;);
+		return 0;
+	endif
+
+endfunction
+
+
+// FindPosition(who, stone)
+//
+// This function will find the array position in the guild data for
+// member &lt;who&gt;.  If the person is not in the guild, the function 
+// returns a 0.
+
+function FindPosition(who, stone)
+
+	var memberserials := GetObjProperty(stone, &quot;MemberSerials&quot;);
+	var i;
+	var guildslot := 0;
+
+	for (i := 1; i &lt;= len(memberserials); i := i + 1)
+		if (memberserials[i] == who.serial)
+			guildslot := i;
+		endif
+	endfor
+
+	return guildslot;
+
+endfunction
+
+
+// RemoveMember(who, stone)
+//
+// This function will remove an individual from a guildstone.  In this
+// case, &lt;who&gt; is the SERIAL NUMBER of the person to be removed.
+
+function RemoveMember(who, stone)
+
+	var i := 0;
+	var x := 0;
+	var newserials := {};
+	var newnames := {};
+	var newtitles := {};
+
+	var memberserials := GetObjProperty(stone, &quot;MemberSerials&quot;);
+	var membernames := GetObjProperty(stone, &quot;MemberNames&quot;);
+	var membertitles := GetObjProperty(stone, &quot;MemberTitles&quot;);
+
+	for (i := 1; i &lt;= len(memberserials); i := i + 1)
+		if (i != who)
+			x := x + 1;
+			newserials[x] := memberserials[i];
+			x := x + 1;
+			newnames[x] := membernames[i];
+			x := x + 1;
+			newtitles[x] := membertitles[i];
+		endif
+	endfor
+
+	SetObjProperty(stone, &quot;MemberSerials&quot;, newserials);
+	SetObjProperty(stone, &quot;MemberNames&quot;, newnames);
+	SetObjProperty(stone, &quot;MemberTitles&quot;, newtitles);
+
+	GuildAction(who, stone, &quot;Remove&quot;);
+
+endfunction
+
+
+// AddMember(who, stone)
+//
+// This function will add a member to a guildstone.  If the player is
+// already a member, the function will return 0.  The &quot;title&quot; field
+// is optional, and will return &quot;Initiate&quot; if omitted.
+
+function AddMember(who, stone, title := &quot;Initiate&quot;)
+
+	if ( FindPosition(who, stone) &gt; 0 )
+		PrintTextAbove(stone, &quot;That person is already a member!&quot;);
+		return 0;
+	endif
+
+	var memberserials := GetObjProperty(stone, &quot;MemberSerials&quot;);
+	var membernames := GetObjProperty(stone, &quot;MemberNames&quot;);
+	var membertitles := GetObjProperty(stone, &quot;MemberTitles&quot;);
+
+	var i := len(memberserials) + 1;
+
+	memberserials[i] := who.serial;
+	membernames[i] := who.name;
+	membertitles[i] := title;
+
+	SetObjProperty(stone, &quot;MemberSerials&quot;, memberserials);
+	SetObjProperty(stone, &quot;MemberNames&quot;, membernames);
+	SetObjProperty(stone, &quot;MemberTitles&quot;, membertitles);
+
+	GuildAction(who.serial, stone, &quot;Add&quot;);
+
+endfunction
+
+
+// InitializeGuild(who, guildstone)
+//
+// This function runs when the guildstone is first placed, or after
+// it has been wiped and the guild disbanded.   The first person to
+// use the stone after it is placed becomes the guildmaster.  This
+// function just sets the name and abbreviation of the guild, and
+// sets the title of the guildmaster.   It will then return to the
+// main guildstone program, where the guildmaster can add members
+// and make adjustments as needed.
+
+function InitializeGuild(who, stone)
+
+	var success := 0;
+	var guildname, guildabbr, guildtitle;
+
+	while (success == 0)
+		guildname := RequestInput(who, stone, &quot;Enter a your Guild's name (5-40 characters):&quot;);
+		if ( (len(guildname) &gt; 40) || (len(guildname) &lt; 5) )
+			SendSysMessage(who, &quot;Invalid Name.&quot;);
+		else
+			success := 1;
+		endif
+	endwhile
+	guildinitdata[3] := guildname;
+
+	success := 0;
+	while (success == 0)
+		guildabbr := RequestInput(who, stone, &quot;Enter a your Guild's short name, displayed in your members' titles (3-16 characters):&quot;);
+		SendSysMessage(who, guildabbr);
+		if ( (len(guildabbr) &gt; 16) || (len(guildname) &lt; 3) )
+			SendSysMessage(who, &quot;Invalid Name.&quot;);
+		else
+			success := 1;
+		endif
+	endwhile
+	guildinitdata[5] := guildabbr;
+
+	success := 0;
+	while (success == 0)
+		guildtitle := RequestInput(who, stone, &quot;Enter your title (3-16 characters):&quot;);
+		SendSysMessage(who, guildtitle);
+		if ( (len(guildtitle) &gt; 16) || (len(guildname) &lt; 3) )
+			SendSysMessage(who, &quot;Invalid Name.&quot;);
+		else
+			success := 1;
+		endif
+	endwhile
+	guildinitdata[7] := guildtitle;
+
+	SendSysMessage(who, &quot;Is this information correct?&quot;);
+	var res := SendDialogGump(who, guildinitlayout, guildinitdata);
+	if (res[0] == 2)
+
+		set_critical(1);
+		var masterlist := GetGlobalProperty(&quot;GuildRegistry&quot;);
+		success := len(masterlist) + 1;
+		masterlist[success] := stone.serial;	
+		SetGlobalProperty(&quot;GuildRegistry&quot;, masterlist);
+		set_critical(0);
+
+		var memberserials := { who.serial };
+		var membernames := { who.name };
+		var membertitles := { guildtitle };
+		var empty := { };
+
+		SetObjProperty(stone, &quot;GuildName&quot;, guildname);
+		SetObjProperty(stone, &quot;GuildAbbr&quot;, guildabbr);
+		SetObjProperty(stone, &quot;GuildAlign&quot;, &quot;NONE&quot;);
+		SetObjProperty(stone, &quot;MemberSerials&quot;, memberserials);
+		SetObjProperty(stone, &quot;MemberNames&quot;, membernames);
+		SetObjProperty(stone, &quot;MemberTitles&quot;, membertitles);
+		SetObjProperty(stone, &quot;GuildEnemies&quot;, empty);
+		SetObjProperty(stone, &quot;GuildAllies&quot;, empty);
+		SetObjProperty(stone, &quot;PendingAction&quot;, empty);
+
+		SetObjProperty(who, &quot;Guild&quot;, stone.serial);
+		SetObjProperty(who, &quot;OldName&quot;, who.name);
+		SetObjProperty(who, &quot;GuildTitle&quot;, guildtitle);
+		who.name := who.name + &quot;, &quot; + guildtitle + &quot; [&quot; + guildabbr + &quot;]&quot;;
+		SendSysMessage(who, &quot;Guildstone initialized.&quot;);
+		return 1;
+	else
+		return 0;
+	endif
+
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/help.inc
===================================================================
--- trunk/096/scripts/include/OLD/help.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/help.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,63 @@
+var onlinecounselors;
+var onlinestaff;
+
+onlinecounselors := staffcheck(&quot;coun&quot;);
+onlinestaff := staffcheck(&quot;gm&quot;);
+
+function Icanpage(thechar)
+  foreach person in EnumerateOnlineCharacters()
+    if ((GetObjProperty(person,&quot;canpage&quot;)) &amp;&amp; (person.serial != thechar.serial))
+      return 0;
+    endif
+  endforeach
+  SetObjProperty(thechar, &quot;canpage&quot;, 1);
+  return 1;
+endfunction
+
+function staffcheck(type)
+  var stafflist := GetProcess(GetGlobalProperty(&quot;#stafflist&quot;));
+  var k := struct;
+  case(type)
+    &quot;coun&quot;: k.+type := EVID_FIND_COUN;
+    &quot;gm&quot;:   k.+type := EVID_FIND_GM;
+  endcase
+  k.+pid := getpid();
+  stafflist.sendevent(k);
+  var ev := wait_for_event(10);
+  var evdata := ev.data;
+  return evdata;
+endfunction
+
+function pagecheck(serial, type)
+  var cserial := CInt(serial);
+  var retval := 0;
+  var i;
+  case(CInt(type))
+    1: var maxi := gmpages.size();
+	   for(i := 0; i &lt; maxi; i := i + 1)
+		 if (cserial == CInt(gmpages[i]))
+		   retval := i;
+		   break;
+		 endif
+	   endfor
+    2: var maxi := counpages.size();
+	   for(i := 0; i &lt; maxi; i := i + 1)
+		 if (cserial == CInt(counpages[i]))
+		   retval := i;
+		   break;
+		 endif
+	   endfor
+  endcase
+  return retval;
+endfunction
+
+function pagewarning(type, thepage, who)
+  case(type)
+    1: foreach char in onlinestaff
+		 SendSysMessage( char, &quot;Page from &quot; + who.name + &quot;: &quot; + thepage);
+	   endforeach
+    2: foreach char in onlinecounselors
+		 SendSysMessage( char, &quot;Page from &quot; + who.name +  &quot;: &quot; + thepage);
+	   endforeach
+  endcase
+endfunction

Added: trunk/096/scripts/include/OLD/innCheck.inc
===================================================================
--- trunk/096/scripts/include/OLD/innCheck.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/innCheck.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,22 @@
+use uo;
+use os;
+use cfgfile;
+use util;
+
+function Inncheck(character)
+
+  var element, rect;
+  var cfgfile := ReadConfigFile(&quot;::innlocation&quot;);
+  var entries := GetConfigStringKeys(cfgfile);
+  foreach listing in entries
+    element :=  cfgfile[listing];
+    rect := element.rect;
+    rect := SplitWords(rect);
+    if((character.x &gt;= CInt(rect[1])) &amp;&amp; (character.x &lt;= CInt(rect[3])) &amp;&amp; (character.y &gt;= CInt(rect[2])) &amp;&amp; (character.y &lt;= CInt(rect[4])))
+      return 1;
+      break;
+    endif
+  endforeach
+  return 0;
+
+endfunction 
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/isValidLoc.inc
===================================================================
--- trunk/096/scripts/include/OLD/isValidLoc.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/isValidLoc.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,57 @@
+use uo;
+use polsys;
+
+function isValidLoc(x, y, realm := &quot;britannia&quot; )
+ 
+  if(realm == &quot;britannia&quot; || realm == &quot;britannia_alt&quot;)
+  
+	  if((x &gt;= 5112) &amp;&amp; (x &lt;= 5213))
+	    if((y &gt;= 1093) &amp;&amp; (y &lt;= 1213))
+	      return 0;
+	    endif
+	  endif
+	
+	  if((x &gt;= 5120) &amp;&amp; (x &lt;= 5374))
+	    if((y &gt;= 265) &amp;&amp; (y &lt;= 512))
+	      return 0;
+	    endif
+	  endif
+	
+	  if((x &gt;= 5890) &amp;&amp; (x &lt;= 6142))
+	    if((y &gt;= 514) &amp;&amp; (y &lt;= 1278))
+	      return 0;
+	    endif
+	  endif
+	
+	  if((x &gt;= 5376) &amp;&amp; (x &lt;= 5910))
+	    if((y &gt;= 1030) &amp;&amp; (y &lt;= 1276))
+	      return 0;
+	    endif
+	  endif
+	
+	  if((x &gt;= 5422) &amp;&amp; (x &lt;= 6142))
+	    if((y &gt;= 1536) &amp;&amp; (y &lt;= 1796))
+	      return 0;
+	    endif
+	  endif
+	
+	  if((x &gt;= 5632) &amp;&amp; (x &lt;= 6142))
+	    if((y &gt;= 1784) &amp;&amp; (y &lt;= 2303))
+	      return 0;
+	    endif
+	  endif
+	
+	  if((x &gt;= 5120) &amp;&amp; (x &lt;= 5680))
+	    if((y &gt;= 2048) &amp;&amp; (y &lt;= 2303))
+	      return 0;
+	    endif
+	  endif
+  
+  else
+  	var realm := Realms()[realm];
+  	if( x &gt;= realm.width || y &gt;= realm.height )
+  		return 0;
+  	endif
+  endif
+  return 1;
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/magic.inc
===================================================================
--- trunk/096/scripts/include/OLD/magic.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/magic.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,96 @@
+const EVID_DISCHARGE := 0x123457;
+
+include &quot;:attributes:attributes&quot;;
+
+
+function Resisted(circle, caster, cast_on, amt)
+  // Purpose: to check for resistance to spells cast upon a character
+  // called by: most spells
+  // returns: amount of damage not resisted?
+
+  var magery := CInt(AP_GetSkill(caster, MAGERY));
+  var evalint := CInt(AP_GetSkill(caster, EVALINT));
+  var resist := CInt(AP_GetSkill(cast_on, RESISTING_SPELLS));
+        
+  // chk1 relates to the resist ability.
+  var chk1 := (resist / 5);
+  // chk2 relates to the difficulty level
+  var chk2 := resist - (((magery - 20) / 5) + (circle * 5));
+        
+  if(chk1 &lt; 1)
+    chk1 := 1;
+  endif
+  if(chk2 &lt; 1)
+    chk2 := 1;
+  endif
+        
+  // What an odd construct.  
+  // If you're hit with an easy spell then you have a difficulty of your resist
+  var diff := 0;
+  if(chk1 &gt; chk2)
+    diff := chk1;
+  else
+    diff := chk2;
+  endif
+        
+  if(cast_on.dead)
+    return 0;
+  endif
+  if( SkillCheck(cast_on, RESISTING_SPELLS, diff) &gt; 0 )
+    SendSysMessage(cast_on, &quot;You feel yourself resisting magical energy!&quot;);
+    //PlaySoundEffect(cast_on, SFX_SPELL_WEAKEN);
+    //PlayObjectCenteredEffect(cast_on, FX_CURSE_EFFECT, 5,5);
+    amt := (amt * 0.5);
+    if(amt &lt; 1)
+      amt := 1;
+    endif
+  endif
+  var modamt := 1;
+  if(resist &gt; evalint)
+    modamt := (1 + ((evalint - resist) / 200.0));
+  elseif(evalint &gt; resist)
+    modamt := (1 + ((evalint - resist) / 500.0));
+  endif
+  amt := (amt * modamt);
+  return CInt(amt);
+endfunction
+
+function getresistpoints(c, victim, skillid)
+  var points;
+  var diff;
+  case(c)
+    1:   points :=  20; diff := 20;
+    2:   points :=  40; diff := 30;
+    3:   points :=  80; diff := 40;
+    4:   points := 100; diff := 50;
+    5:   points := 120; diff := 60;
+    6:   points := 140; diff := 70;
+    7:   points := 160; diff := 86;
+    8:   points := 180; diff := 100;
+  endcase
+  var skill := AP_GetSkill(victim, skillid);
+  if(skill &gt; (diff - 20))
+    if((skill - diff) &lt;= 5)
+      points := points;
+    elseif((skill - diff) &lt;= 10)
+      points := (points * 3) / 4;
+    elseif((skill - diff) &lt;= 15)
+      points := points / 2;
+    elseif((skill - diff) &lt;= 15)
+      points := points / 4;
+    else
+      points := 0;
+    endif
+  endif
+  return points;
+endfunction
+
+function CalcSpellDamage(circle, caster)
+  var die_string := circle+&quot;d8&quot;;
+  var dmg := RandomDiceRoll(die_string);
+  dmg := dmg + CInt(AP_GetSkill(caster, MAGERY)/10);
+  if(dmg &gt; (circle * 8))
+    dmg := circle * 8;
+  endif
+  return dmg;
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/mrcSpawn.inc
===================================================================
--- trunk/096/scripts/include/OLD/mrcSpawn.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/mrcSpawn.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,321 @@
+use cfgfile;
+include &quot;:attributes:attributes&quot;;
+include &quot;include/utility&quot;;
+
+var mrcspawn_cfg := ReadConfigFile(&quot;::mrcspawn&quot;);
+var itemconfig := ReadConfigFile(&quot;:*:itemdesc&quot;);
+var storage := find_or_create_storage(&quot;Merchant Storage&quot;);
+
+function FindMerchantType(mrctype)
+	var npcdesccfg	:= ReadConfigFile(&quot;:*:npcdesc&quot;);
+	var elem := FindConfigElem(npcdesccfg, mrctype);
+	var retval := 0;
+	foreach thing in GetConfigStringArray(elem, &quot;Cprop&quot;)
+		var split := SplitWords(thing);
+		if(split[1] == &quot;MerchantType&quot;)
+			retval := split[2] - split[2][1];
+			break;
+		endif
+	endforeach
+	return retval;
+endfunction
+
+function create_node_merc(merchanttype, name)
+	var inv_rs := find_or_create_item(storage, name + &quot; RS&quot;);
+	var inv_fs := find_or_create_item(storage, name + &quot; FS&quot;);
+	var inv_pb := find_or_create_item(storage, name + &quot; PB&quot;);
+	var inv_1c := find_or_create_item(storage, name + &quot; 1C&quot;);
+	SetObjProperty(inv_rs, &quot;MerchantType&quot;, merchanttype);
+	SetObjProperty(inv_rs, &quot;MyGold&quot;, 5000);
+	StockInventory(merchanttype, inv_rs);
+	RestockInitialInventory(inv_rs, inv_fs);
+endfunction
+
+function destroy_node_merc(name)
+	DestroyRootItemInStorageArea(storage, name + &quot; RS&quot;);
+	DestroyRootItemInStorageArea(storage, name + &quot; FS&quot;);
+	DestroyRootItemInStorageArea(storage, name + &quot; PB&quot;);
+	DestroyRootItemInStorageArea(storage, name + &quot; 1C&quot;);
+endfunction
+
+function StockInventory(merchanttype, inventory)
+	var mtype := FindConfigElem(mrcspawn_cfg, merchanttype);
+	if(mtype)
+		foreach productgroup in GetConfigStringArray(mtype, &quot;Sells&quot;);
+			var pg_elem := FindConfigElem(mrcspawn_cfg, productgroup);
+			foreach itemstr in GetConfigStringArray(pg_elem, &quot;Item&quot;)
+				SpawnItem(inventory, itemstr);
+				sleepms(10);
+			endforeach
+		endforeach
+	endif
+endfunction
+
+function SpawnItem(inventory, itemstr)
+	var split := SplitWords(itemstr);
+	var objtype := split[1];
+	var amt := Cint(split[2]);
+	var buyprice	:= itemconfig[objtype].VendorBuysFor;
+	var sellprice := itemconfig[objtype].VendorSellsFor;
+	if(Cint(objtype))
+		objtype := Cint(objtype);
+	else
+		objtype := Cint(GetObjtypeByName(objtype));
+	endif
+	if(!objtype)
+		syslog(&quot;Could not determine objtype for itemstr: &quot; + itemstr);
+		return;
+	endif
+	var res;
+	if(amt &gt; 0)
+		var i;
+		for( i := 1; i &lt;= amt; i := i + 1 )
+			res := CreateItemInInventory(inventory, objtype, 1);
+			res.buyprice	:= buyprice;
+			res.sellprice := sellprice;
+		endfor
+	endif
+endfunction
+
+function checkstock(rs, pak)
+// purpose: to remove items that the vendor does not carry, but have been sold to it.
+// and replenish the purchasing gold supply for the vendor.
+	var mygold := Cint(GetObjProperty(rs, &quot;MyGold&quot;));
+	foreach thing in EnumerateItemsInContainer(pak)
+		var crs := Cint(GetObjProperty(thing, &quot;ClearRestock&quot;));
+		var cst;
+		if(crs)
+			if(ReadGameClock() &gt; CInt(crs))
+				cst := CInt(itemconfig[thing.objtype].VendorBuysFor) + 5;
+				if(!cst)
+					cst := 1;
+				endif
+				mygold := CInt(mygold + (cst * thing.amount));
+				DestroyItem(thing);
+			endif
+		endif
+	endforeach
+	SetObjProperty(rs, &quot;MyGold&quot;, mygold);
+endfunction
+
+function RestockInitialInventory(source, destination)
+// When vendors start up, they need a slightly different script.
+	var merchanttype := GetObjProperty(source, &quot;MerchantType&quot;);
+	var multiplier, amt, mlt, things;
+	var newarray := {};
+	foreach thing in EnumerateItemsInContainer(source)
+		newarray.append(thing.objtype);
+		amt := 0;
+		multiplier := CInt(GetObjProperty(thing, &quot;Multiplier&quot;));
+		var chk := CountExisting(destination, thing.objtype);
+		things := chk[2];
+		amt := chk[1];
+		if(amt &gt;= (thing.amount * multiplier))
+			multiplier := multiplier - 1;
+			if(multiplier &lt; 1)
+				multiplier := 1;
+			endif
+		elseif(amt == 0)
+			multiplier := multiplier + 1;
+			if(multiplier &gt; 20)
+				multiplier := 20;
+			endif
+		endif
+		SetObjProperty(thing, &quot;Multiplier&quot;, multiplier);
+		mlt := Cint(thing.amount * multiplier);
+		var buyprice := Cint(thing.buyprice);
+		var sellprice := Cint(thing.sellprice);
+		var res;
+		if(amt != mlt)
+			foreach widget in things
+				DestroyItem(widget);
+			endforeach
+			if(amt &gt; mlt)
+				res := CreateItemInInventory(destination, thing.objtype, mlt);
+				if(res)
+					res.sellprice := sellprice;
+					res.buyprice := buyprice;
+				endif
+			elseif(amt &lt; mlt)
+				var i;
+				for(i:=1; i&lt;= mlt; i := i+1)
+					var res := CreateItemInInventory(destination, thing.objtype, 1);
+					res.sellprice := sellprice;
+					res.buyprice := buyprice;
+					sleepms(1);
+				endfor
+			endif
+		endif
+		sleepms(1);
+	endforeach
+	foreach thing in EnumerateItemsInContainer(destination)
+		if((!(thing.objtype in newarray)) and (!GetObjProperty(thing, &quot;ClearRestock&quot;)))
+			DestroyItem(thing);
+		endif
+	endforeach
+endfunction
+
+function RestockMyInventory(source, destination)
+	var merchanttype := GetObjProperty(source, &quot;MerchantType&quot;);
+	var multiplier, amt, mlt, items, mygold;
+	var newarray := {}; // Array of what's for sale
+	// cycle through everything that's for sale
+	foreach thing in EnumerateItemsInContainer(source)// this is the &quot;ideal&quot; stock.
+		newarray.append(thing.objtype);
+		amt := 0;
+		mygold := GetObjProperty(source, &quot;MyGold&quot;);
+		multiplier := CInt(GetObjProperty(thing, &quot;Multiplier&quot;)); // multiplier of increments.
+		var chk := CountExisting(destination, thing.objtype); // to see what we got *really* for sale
+		items := chk[2];// returns all of a particular item, stacked or unstacked. (array)
+		amt := chk[1];
+		
+		// determine whether to increase or decrease stock.
+		if(amt &gt;= (thing.amount * multiplier))
+			multiplier := multiplier - 1;
+			if(multiplier &lt; 1)
+				multiplier := 1;
+			endif
+		elseif(amt == 0)
+			multiplier := multiplier + 1;
+			if(multiplier &gt; 20)
+				multiplier := 20;
+			endif
+		endif
+		SetObjProperty(thing, &quot;Multiplier&quot;, multiplier);
+		
+		mlt := Cint(thing.amount * multiplier); // mlt is the amount that should be in stock
+		
+		if(amt != mlt)
+			// define characteristics of the items
+			var buyprice := Cint(thing.buyprice);
+			var sellprice := Cint(thing.sellprice);
+
+			// remove what remains
+			foreach widget in items
+				mygold := mygold + Cint(widget.amount * buyprice);
+				DestroyItem(widget);
+			endforeach
+			var i;
+			// make one of everything you need
+			for(i:=1; i&lt;= mlt; i := i+1)
+				if((mygold &gt; buyprice) or (merchanttype == &quot;Architect&quot;))
+					var res := CreateItemInInventory(destination, thing.objtype, 1);
+					res.sellprice := sellprice;
+					res.buyprice := buyprice;
+					if(merchanttype != &quot;Architect&quot;)
+						mygold := mygold - buyprice;
+					endif
+				sleepms(1);
+				endif
+			endfor
+		endif
+		SetObjProperty(source, &quot;MyGold&quot;, mygold);
+		sleepms(1);
+	endforeach
+
+	// ditch the leftovers
+	foreach thing in EnumerateItemsInContainer(destination)
+		if((!(thing.objtype in newarray)) and (!GetObjProperty(thing, &quot;ClearRestock&quot;)))
+			mygold := mygold + Cint(thing.amount * thing.buyprice);
+			DestroyItem(thing);
+		endif
+	endforeach
+	SetObjProperty(source, &quot;MyGold&quot;, mygold);
+endfunction
+
+function CountExisting(container, objtype)
+	var amt := 0;
+	var things := {};
+	foreach thing in EnumerateItemsInContainer(container)
+		if((thing.objtype == objtype) and (Cint(GetObjProperty(thing, &quot;ClearRestock&quot;)) == 0))
+			things.append(thing);
+			amt := amt + thing.amount;
+		endif
+	endforeach
+	var ary := {};
+	ary.append(amt);
+	ary.append(things);
+	return ary;
+endfunction
+
+function ModifyPCSellList(merchanttype, backpack)
+	var backpackitems := ListRootItemsInContainer(backpack);
+	var prodgroups := FindConfigElem(mrcspawn_cfg, merchanttype);
+	var buys := GetConfigStringArray(prodgroups, &quot;Buys&quot;);
+	var normcost, normsell, percentage;
+	
+	//  If not buying lets call the whole thing off.
+	if(buys.size() &lt; 1)
+		return 0;
+	endif
+
+	var iteminit := 0;
+	var itemmark := -1;
+	
+	// set buy price for each item to be 0 to start. This means it won't be sellable.
+	foreach item in backpackitems
+		item.buyprice := iteminit;
+	endforeach
+	
+	var buynobuyable := { }; 
+	var objtype;
+	var counter := 0;
+	
+	// Populate the array of items the vendor will buy.
+	foreach prodgroup in buys
+		foreach itemstr in GetConfigStringArray(FindConfigElem(mrcspawn_cfg, prodgroup), &quot;Item&quot;)
+			itemstr := SplitWords(itemstr);
+			objtype := itemstr[1];
+			if(CInt(objtype))
+				objtype := CInt(objtype);
+			else
+				objtype := GetObjtypeByName(objtype);
+			endif
+			buynobuyable.append(objtype);
+		endforeach
+	endforeach
+	
+	// compare all the items in the top level of the backpack to things the vendor can buy and set the price.
+	if(buynobuyable.size())
+		foreach item in backpackitems
+			if((item.objtype in buynobuyable) &amp;&amp; (!item.newbie))
+				counter := counter + 1;
+				if(!item.quality)
+					item.quality := 1;
+				endif
+				normcost := itemconfig[item.objtype].VendorBuysFor;
+				normsell := itemconfig[item.objtype].VendorSellsFor;
+				normcost := normcost * item.quality;
+				normsell := normsell * item.quality;
+				percentage := ((item.hp * 10) / item.maxhp);
+				if(percentage)
+					normcost := CInt((normcost * percentage) / 10);
+					normsell := CInt((normsell * percentage) / 10);
+					item.buyprice := normcost;
+					item.sellprice := normsell;
+				else
+					item.buyprice := itemmark;
+				endif
+			endif
+		endforeach
+	endif
+	return counter;
+endfunction
+
+/*
+function Merchants(merchantgroup)
+	var result := array;
+	var mrc := array;
+	mrc.+name;
+	mrc.+type;
+	var group_elem := FindConfigElem(mrcspawn_cfg, merchantgroup);
+	var count := GetConfigInt(group_elem, &quot;MerchantCount&quot; );
+	var i;
+	for( i := 1; i &lt;= count; i := i + 1 )
+		mrc.name := GetConfigString(group_elem, &quot;Merchant&quot; + i);
+		mrc.type := GetConfigString(group_elem, &quot;MerchantType&quot;+i);
+		result[i] := mrc;
+	endfor
+	return result;
+endfunction
+*/
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/myUtil.inc
===================================================================
--- trunk/096/scripts/include/OLD/myUtil.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/myUtil.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,97 @@
+use cfgfile;
+
+//returns all the items in container of objtype
+function EnumerateItemsInContainerOfObjtype(container, objtype)
+
+	var ret := { };
+        foreach item in EnumerateItemsInContainer(container)
+		if ( item.objtype == objtype )
+			ret.append(item);
+		endif
+	endforeach
+
+	return ret;
+
+endfunction
+
+//returns all the 'top-level' items in container
+function ListRootItemsInContainer(container)
+
+	var ret := { };
+        foreach item in EnumerateItemsInContainer(container)
+		if ( item.container == container )
+			ret.append(item);
+		endif
+	endforeach
+
+	return ret;
+
+endfunction
+
+//returns all the 'top-level' items in container of objtype
+function ListRootItemsInContainerOfObjtype(container, objtype)
+
+	var ret := { };
+        foreach item in EnumerateItemsInContainer(container)
+		if ( (item.container == container) &amp;&amp; (item.objtype == objtype) )
+			ret.append(item);
+		endif
+	endforeach
+
+	return ret;
+
+endfunction
+
+function InInventory(inventory, it)
+
+	foreach item in EnumerateItemsInContainer(inventory)
+		if (item == it)
+			return 1;
+		endif
+	endforeach
+
+	return 0;
+
+endfunction
+
+function IsContainer( it )
+
+	if (it.objtype == 0x7057)
+		return 0;//trashcans don't count as containers
+		         // random note- huh? trashcans are 0x7007...
+	endif
+
+	var waslocked := it.locked;
+	it.locked := 1;
+	if (it.locked)
+		it.locked := waslocked;
+		return 1;
+	else
+		return 0;
+	endif
+
+endfunction
+
+function IsDungeon( x, y )
+
+	if ( (x &gt;= 5120) &amp;&amp; (x &lt;= 6143) )
+		if ( (y &gt;= 0) &amp;&amp; (y &lt;= 2303) )
+			return 1;
+		endif
+	endif
+
+	return 0;
+
+endfunction
+
+function NoTeleportZone( x, y )
+
+	if ( (x &gt;= 5120) &amp;&amp; (x &lt;= 6143) )
+		if ( (y &gt;= 2080) &amp;&amp; (y &lt;= 2303) )
+			return 1;
+		endif
+	endif
+
+	return 0;
+
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/noto.inc
===================================================================
--- trunk/096/scripts/include/OLD/noto.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/noto.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,236 @@
+use uo;
+use util;
+use math;
+
+include &quot;:attributes:attributes&quot;;
+
+var nototitles :=
+{
+    {&quot;Outcast&quot;,     &quot;Wretched&quot;,     &quot;Nefarious&quot;, &quot;Dread&quot;,         &quot;Dread&quot;},
+    {&quot;Despicable&quot;,  &quot;Dastardly&quot;,    &quot;Wicked&quot;,    &quot;Evil&quot;,          &quot;Evil&quot;},
+    {&quot;Scoundrel&quot;,   &quot;Malicious&quot;,    &quot;Vile&quot;,      &quot;Villainous&quot;,    &quot;Dark&quot;},
+    {&quot;Unsavory&quot;,    &quot;Dishonorable&quot;, &quot;Ignoble&quot;,   &quot;Sinister&quot;,      &quot;Sinister&quot;},
+    {&quot;Rude&quot;,        &quot;Disreputable&quot;, &quot;Notorious&quot;, &quot;Infamous&quot;,      &quot;Dishonored&quot;},
+    {&quot;None&quot;,        &quot;Notable&quot;,      &quot;Prominent&quot;, &quot;Reknowned&quot;,     &quot;&quot;},
+    {&quot;Fair&quot;,        &quot;Upstanding&quot;,   &quot;Reputable&quot;, &quot;Distinguished&quot;, &quot;Distinguished&quot;},
+    {&quot;Kind&quot;,        &quot;Respectable&quot;,  &quot;Proper&quot;,    &quot;Eminent&quot;,       &quot;Eminent&quot;},
+    {&quot;Good&quot;,        &quot;Honorable&quot;,    &quot;Admirable&quot;, &quot;Noble&quot;,         &quot;Noble&quot;},
+    {&quot;Honest&quot;,      &quot;Commendable&quot;,  &quot;Famed&quot;,     &quot;Illustrious&quot;,   &quot;Illustrious&quot;},
+    {&quot;Trustworthy&quot;, &quot;Estimable&quot;,    &quot;Great&quot;,     &quot;Glorious&quot;,      &quot;Glorious&quot;}
+};
+
+function AdjustNoto(attacker, defender)
+  if(attacker.isA(POLCLASS_NPC))
+    return;
+  endif
+  var karma   := CInt(GetObjProperty(attacker, &quot;Karma&quot;));
+  var fame    := CInt(GetObjProperty(attacker, &quot;Fame&quot;));
+  var dkarma  := CInt(GetObjProperty(defender, &quot;Karma&quot;));
+  var dfame   := CInt(GetObjProperty(defender, &quot;Fame&quot;));
+  var dfchk, dkchk;
+  if(defender.isA(POLCLASS_MOBILE))
+    dkarma := dkarma / 100.0;
+    dkchk := dkarma * 10;
+  elseif(!AP_GetStat(defender, &quot;Strength&quot;))
+    dkarma := dkarma * 10;
+    dkchk := dkarma * 10;
+    dkchk := 0 - dkchk;
+  endif
+  if(defender.isA(POLCLASS_MOBILE))
+    dfame := dfame / 100.0;
+    dfchk := dfame * 10;
+  elseif(!AP_GetStat(defender, &quot;Strength&quot;))
+    dfchk := dfame * 100;
+    dfame := dfame * 10;
+  endif
+  var kmod      := GetKarmaLevel(karma) - 6;
+  var fmod      := GetFameLevel(fame);
+  var dkmod     := GetKarmaLevel(dkchk) - 6;
+  var dfmod     := GetFameLevel(dfchk);
+  var famegain  := dfame;
+  var karmagain := (0 - dkarma);
+  var chk := 0;
+  if(karmagain &gt;= 0)
+    chk := 1;
+  endif
+  if(Abs(kmod) &gt; Abs(dkmod))
+    karmagain := 0;
+  elseif(Abs(kmod) == Abs(dkmod))
+    karmagain := Abs(karmagain) / 4;
+    if(chk == 0)
+      karmagain := (0 - karmagain);
+    endif
+  else
+    karmagain := Abs(karmagain) / 2;
+    var holder := 0;
+    case(dkmod - kmod)
+      1: holder := 0.15;
+      2: holder := 0.30;
+      3: holder := 0.45;
+      4: holder := 0.60;
+      5: holder := 0.75;
+      6: holder := 0.90;
+    endcase
+    karmagain := karmagain + CInt(karmagain * holder);
+    if(chk == 0)
+      karmagain := (0 - karmagain);
+    endif
+  endif
+  if(fmod == dfmod)
+    famegain := famegain / 4;
+  elseif(fmod &gt; dfmod)
+    famegain := 0;
+  else
+    famegain := famegain / 2;
+  endif
+  if(defender.isA(POLCLASS_MOBILE))
+    famegain := famegain / 100;
+    karmagain := karmagain / 100;
+  endif
+  karma := karma + karmagain;
+  fame := fame + famegain;
+  var online := 0;
+  if(!attacker.isA(POLCLASS_NPC))
+    foreach char in EnumerateOnlineCharacters()
+      if(char == attacker)
+        online := 1;
+        break;
+      endif
+    endforeach
+    if(online == 1)
+      SetObjProperty(attacker, &quot;Karma&quot;, karma);
+      SetObjProperty(attacker, &quot;Fame&quot;, fame);
+      SendGainMessage(attacker, &quot;Fame&quot;, famegain);
+      SendGainMessage(attacker, &quot;Karma&quot;, karmagain);
+    else
+      SetObjProperty(attacker, &quot;ModKarma&quot;, kmod);
+      SetObjProperty(attacker, &quot;ModFame&quot;, famegain);
+    endif
+  else
+    SetObjProperty(attacker, &quot;Karma&quot;, karma);
+    SetObjProperty(attacker, &quot;Fame&quot;, fame);
+  endif
+  if(attacker.isA(POLCLASS_MOBILE))
+    SetNotoTitle(attacker, karma, fame);
+  endif
+  if(defender.isA(POLCLASS_MOBILE))
+    SetNotoTitle(defender, kmod, fmod);
+  endif
+endfunction
+
+function GetFameLevel(fame)
+  var fmod := 0;
+  if((fame &lt;= 1249) &amp;&amp; (fame &gt;= 0))
+    fmod := 1;
+  elseif((fame &lt;= 2499) &amp;&amp; (fame &gt;= 1250))
+    fmod := 2;
+  elseif((fame &lt;= 4999) &amp;&amp; (fame &gt;= 2500))
+    fmod := 3;
+  elseif((fame &lt;= 9999) &amp;&amp; (fame &gt;= 5000))
+    fmod := 4;
+  elseif(fame &gt;= 10000)
+    fmod := 5;
+  endif
+  return fmod;
+endfunction
+
+function GetKarmaLevel(karma)
+  var kmod := 0;
+  if(karma &lt;= -10000)
+    kmod := 1;
+  elseif((karma &lt;= -5000) &amp;&amp; (karma &gt;= -9999))
+    kmod := 2;
+  elseif((karma &lt;= -2500) &amp;&amp; (karma &gt;= -4999))
+    kmod := 3;
+  elseif((karma &lt;= -1250) &amp;&amp; (karma &gt;= -2499))
+    kmod := 4;
+  elseif((karma &lt;=  -625) &amp;&amp; (karma &gt;= -1249))
+    kmod := 5;
+  elseif((karma &lt;=   624) &amp;&amp; (karma &gt;=  -624))
+    kmod := 6;
+  elseif((karma &lt;=  1249) &amp;&amp; (karma &gt;=   625))
+    kmod := 7;
+  elseif((karma &lt;=  2499) &amp;&amp; (karma &gt;=  1250))
+    kmod := 8;
+  elseif((karma &lt;=  4999) &amp;&amp; (karma &gt;=  2500))
+    kmod := 9;
+  elseif((karma &lt;=  9999) &amp;&amp; (karma &gt;=  5000))
+    kmod := 10;
+  elseif(karma &gt;= 10000)
+    kmod := 11;
+  endif
+  return kmod;
+endfunction
+
+function SetNotoTitle(who, karma, fame)
+  var kmod := GetKarmaLevel(karma);
+  var fmod := GetFameLevel(fame);
+  var newtitle := nototitles[ (kmod) ];
+  
+  // That trailing space seems to be unneeded
+  //newtitle := &quot;The &quot; + CStr(newtitle[fmod]) + &quot; &quot;;
+  newtitle := &quot;The &quot; + CStr(newtitle[fmod]);
+  
+  if(newtitle[&quot;None&quot;])
+    newtitle := &quot;&quot;;
+  endif
+  if(fmod == 5)
+    if(who.gender == 1)
+      newtitle := newtitle + &quot; Lady&quot;;
+    else
+      newtitle := newtitle + &quot; Lord&quot;;
+    endif
+  endif
+  if(newtitle != who.title_prefix)
+    who.title_prefix := newtitle;
+    SendSysMessage(who, &quot;You are now known as &quot; + newtitle + &quot; &quot; + who.name);
+  endif
+endfunction
+
+function SendGainMessage(who, type, amount)
+  var msgtext := &quot;You have &quot;;
+  if(amount &lt; 0)
+    msgtext := msgtext + &quot;lost &quot;;
+    amount := Abs(amount);
+  else
+    msgtext := msgtext + &quot;gained &quot;;
+  endif
+  if(amount &gt; 150)
+    msgtext := msgtext + &quot;a great amount of &quot;;
+  elseif(amount &gt; 125)
+    msgtext := msgtext + &quot;a lot of &quot;;
+  elseif(amount &gt; 75)
+    msgtext := msgtext + &quot;a good amount of &quot;;
+  elseif(amount &gt; 30)
+    msgtext := msgtext + &quot;some &quot;;
+  elseif(amount &gt; 0)
+    msgtext := msgtext + &quot;a little &quot;;
+  else
+    return 0;
+  endif
+  msgtext := msgtext + type + &quot;.&quot;;
+  SendSysMessage(who, msgtext);
+endfunction
+
+function ExceptionalFameMod(who, skill, diff, points)
+  if(skill &gt; (diff - 20))
+    if((skill - diff) &lt;= 5)
+      points := points;
+    elseif((skill - diff) &lt;= 10)
+      points := (points * 3) / 4;
+    elseif((skill - diff) &lt;= 15)
+      points := points / 2;
+    elseif((skill - diff) &lt;= 20)
+      points := points / 4;
+    else
+      points := 0;
+    endif
+    points := CInt(points);
+    var fame := CInt(GetObjProperty(who, &quot;Fame&quot;));
+    var famegain := fame + points;
+    SetObjProperty(who, &quot;Fame&quot;, famegain);
+
+    SendGainMessage(who, &quot;fame&quot;, points);
+    SetNotoTitle(who, CInt(GetObjProperty(who, &quot;Karma&quot;)), CInt(GetObjProperty(who, &quot;Fame&quot;)));
+  endif
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/objtype.inc
===================================================================
--- trunk/096/scripts/include/OLD/objtype.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/objtype.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,220 @@
+/////////////////////////////////////////////////////////////////////////////
+//
+// include/objtype.inc - Object Type definitions
+//
+// TODO: consider moving these into include/client.inc
+//       or, moving CID_XX CONSTants in here
+//
+/////////////////////////////////////////////////////////////////////////////
+
+/////////////////////////////////////////////////////////////////////////////
+//
+// 0x0000 to 0x3FFF - &quot;Standard&quot; objects
+//
+/////////////////////////////////////////////////////////////////////////////
+
+CONST UOBJ_STONEWALL_NS := 0x005f;
+CONST UOBJ_STONEWALL_EW := 0x0060;
+CONST UOBJ_GUARDS       := 0xa340;
+CONST UOBJ_FISHSTEAK    := 0x097a;
+
+CONST UOBJ_BOX          := 0x09aa;
+
+CONST UOBJ_FISH_START   := 0x09cc;
+CONST UOBJ_FISH_END     := 0x09cf;
+
+CONST UOBJ_SFISH_START  := 0x0dd6;
+CONST UOBJ_SFISH_END    := 0x0dd9;
+
+CONST UOBJ_KINDLING     := 0x0de1;
+CONST UOBJ_CAMPFIRE     := 0x0de3;
+CONST UOBJ_EMBERS       := 0x0de9;
+CONST UOBJ_ASHES        := 0x0dea;
+
+CONST UOBJ_BANDAGE      := 0x0e21;
+CONST UOBJ_BLANK_SCROLL := 0x0e34;
+
+CONST UOBJ_BANKBOX      := 0x0e40;
+
+CONST UOBJ_DRUM         := 0x0e9c;
+CONST UOBJ_TAMB         := 0x0e9d;
+CONST UOBJ_HARP         := 0x0eb2;
+CONST UOBJ_LUTE         := 0x0eb3;
+
+CONST UOBJ_SPELLBOOK        := 0x0efa;
+
+CONST UOBJ_POISON_POTION    := 0x0f0a;
+CONST UOBJ_EMPTY_BOTTLE     := 0x0f0e;
+
+CONST UOBJ_GEM_START        := 0x0f0f;
+CONST UOBJ_GEM_END          := 0x0f30;
+
+CONST UOBJ_SHOVEL           := 0x0f39;
+
+CONST UOBJ_XBOW             := 0x0f4f;
+
+CONST UOBJ_BLUE_MOONGATE    := 0x0f6c;
+
+
+
+CONST UOBJ_CLAY             := 0xee19;
+CONST UOBJ_SAND             := 0xee18;
+
+
+
+
+CONST UOBJ_BLACK_PEARL      := 0x0f7a;
+CONST UOBJ_BLOOD_MOSS       := 0x0f7b;
+CONST UOBJ_BRIMSTONE        := 0x0f7f;
+CONST UOBJ_FERTILE_DIRT     := 0x0f81;
+CONST UOBJ_EXECUTIONERS_CAP := 0x0f83;
+CONST UOBJ_GARLIC           := 0x0f84;
+CONST UOBJ_GINSENG          := 0x0f85;
+CONST UOBJ_MANDRAKE_ROOT    := 0x0f86;
+CONST UOBJ_NIGHTSHADE       := 0x0f88;
+CONST UOBJ_OBSIDIAN         := 0x0f89;
+CONST UOBJ_PIG_IRON         := 0x0f8a;
+CONST UOBJ_SULFUROUS_ASH    := 0x0f8c; // CHECKME spelling
+CONST UOBJ_SPIDER_SILK      := 0x0f8d;
+CONST UOBJ_VOLCANIC_ASH     := 0x0f8f;
+
+CONST UOBJ_DEAD_WOOD    := 0x0f90;
+
+CONST UOBJ_CLOTH        := 0x0f95;
+CONST UOBJ_CLOTH_STARTS := 0x175d;
+CONST UOBJ_CLOTH_END    := 0x1768;
+CONST UOBJ_LOOM_START   := 0x105f;
+CONST UOBJ_LOOM_END     := 0x1066;
+CONST UOBJ_BOLT_START   := 0x0f95;
+CONST UOBJ_BOLT_END     := 0x0f9c;
+CONST UOBJ_THREAD_START := 0x0fa0;
+CONST UOBJ_THREAD_END   := 0x0fa1;
+CONST UOBJ_MUTLI_CLOTH  := 0x1766;
+CONST UOBJ_SEWING_KIT   := 0x0f9d;
+
+CONST UOBJ_ANVIL1       := 0x0faf;
+CONST UOBJ_ANVIL2       := 0x0fb0;
+CONST UOBJ_SMALL_FORGE  := 0xfb1;  // see also UOBJ_FORGE_START..UOBJ_FORGE_END
+CONST UOBJ_FORGE1       := 0x19a2;
+CONST UOBJ_FORGE2       := 0x19a6;
+CONST UOBJ_FORGE3       := 0x1982;
+CONST UOBJ_FORGE4       := 0x1996;
+CONST UOBJ_FORGE5       := 0x199a;
+CONST UOBJ_FORGE6       := 0x198e;
+CONST UOBJ_FORGE7       := 0x1992;
+CONST UOBJ_FORGE8       := 0x1986;
+CONST UOBJ_FORGE9       := 0x198a;
+
+CONST UOBJ_COPPER_KEY   := 0x100e;
+CONST UOBJ_GOLD_KEY     := 0x100f;
+CONST UOBJ_IRON_KEY     := 0x1010;
+CONST UOBJ_KEY_RING     := 0x1011;
+CONST UOBJ_MAGIC_KEY    := 0x1012;
+CONST UOBJ_RUSTY_IRON_KEY := 0x1013;
+
+CONST UOBJ_CLOCK   := 0x104c;
+CONST UOBJ_CLOCK_FRAME   := 0x104e;
+CONST UOBJ_CLOCK_PARTS   := 0x104f;
+CONST UOBJ_AXLE_AND_GEARS   := 0x1051;
+CONST UOBJ_GEARS   := 0x1053;
+CONST UOBJ_HINGE   := 0x1055;
+CONST UOBJ_SEXTANT   := 0x1057;
+CONST UOBJ_SEXTANT_PARTS   := 0x1059;
+CONST UOBJ_AXLE   := 0x105b;
+CONST UOBJ_SPRINGS   := 0x105d;
+
+CONST UOBJ_TDUMMYSWING_NS     := 0x1071;
+CONST UOBJ_TDUMMYFREEZE_NS    := 0x1070;
+CONST UOBJ_TDUMMYSWING_EW     := 0x1075;
+CONST UOBJ_TDUMMYFREEZE_EW    := 0x1074;
+
+CONST UOBJ_PDUMMYSWING_EW       := 0x1EC1;
+CONST UOBJ_PDUMMYFREEZE_EW      := 0x1EC0;
+CONST UOBJ_PDUMMYSWING_NS       := 0x1EC4;
+CONST UOBJ_PDUMMYFREEZE_NS      := 0x1EC3;
+
+CONST UOBJ_BLOOD        := 0x122d;
+
+CONST UOBJ_BOW          := 0x13b2;
+CONST UOBJ_HEAVY_XBOW   := 0x13fd;
+
+CONST UOBJ_MAP1         := 0x14eb;
+CONST UOBJ_MAP2         := 0x14ec;
+CONST UOBJ_ROLLED_MAP1  := 0x14ed;
+CONST UOBJ_ROLLED_MAP2  := 0x14ee;
+
+CONST UOBJ_HOUSE_DEED1  := 0x14ef;
+CONST UOBJ_SHIP_DEED1   := 0x14f1;
+CONST UOBJ_SHIP_DEED2   := 0x14f2;
+
+CONST UOBJ_CHEST        := 0x1940;
+
+CONST UOBJ_FORGE_START  := 0x197a;  // see also UOBJ_SMALL_FORGE
+CONST UOBJ_FORGE_END    := 0x19a9;
+
+CONST UOBJ_FEATHER      := 0x1bd1;
+CONST UOBJ_SHAFTS       := 0x1bd4;
+CONST UOBJ_LOGS         := 0x1bdd;
+
+CONST UOBJ_GLASS        := 0xee20;
+
+CONST UOBJ_ARM          := 0x1cec;
+CONST UOBJ_LEG          := 0x1ce2;
+CONST UOBJ_TRUNK        := 0x1cee;
+CONST UOBJ_HEART        := 0x1cef;
+CONST UOBJ_HEAD         := 0x1dae;
+
+CONST UOBJ_TINKER_TOOLS := 0x1ebc;
+
+
+CONST UOBJ_RUNE         := 0x1f14;
+
+CONST UOBJ_CORPSE       := 0x2006;
+
+CONST UOBJ_PARAFIELD_NS := 0x3967;
+CONST UOBJ_PARAFIELD_EW := 0x3979;
+CONST UOBJ_POISONFIELD_NS   := 0x3914;
+CONST UOBJ_POISONFIELD_EW   := 0x3920;
+CONST UOBJ_EFIELD_NS        := 0x3947;
+CONST UOBJ_EFIELD_EW        := 0x3956;
+
+CONST GID_PLANK_EXTENDED_FACING_WEST   := 0x3ed5;
+CONST GID_PLANK_RETRACTED_FACING_WEST  := 0x3eb1;
+CONST GID_PLANK_EXTENDED_FACING_EAST   := 0x3ed4;
+CONST GID_PLANK_RETRACTED_FACING_EAST  := 0x3eb2;
+CONST GID_PLANK_EXTENDED_FACING_SOUTH  := 0x3e84;
+CONST GID_PLANK_RETRACTED_FACING_SOUTH := 0x3e85;
+CONST GID_PLANK_EXTENDED_FACING_NORTH  := 0x3e89;
+CONST GID_PLANK_RETRACTED_FACING_NORTH := 0x3e8a;
+
+// ick! these are fine for humans, but not true for items..
+// these are more of a CID.
+CONST UOBJ_HUMAN_MALE   := 0x190;
+CONST UOBJ_HUMAN_FEMALE := 0x191;
+
+/////////////////////////////////////////////////////////////////////////////
+//
+// 0x4000 to 0x4FFF - Multis
+//
+/////////////////////////////////////////////////////////////////////////////
+
+/////////////////////////////////////////////////////////////////////////////
+//
+// 0x5000 to 0xEFFF - To Be Determined
+//
+/////////////////////////////////////////////////////////////////////////////
+
+
+/////////////////////////////////////////////////////////////////////////////
+//
+// 0xF000 to 0xFFFF - Reserved by system
+//
+/////////////////////////////////////////////////////////////////////////////
+
+        //
+        // Ship Components
+        //
+CONST EXTOBJ_TILLERMAN       := 0xf010;
+CONST EXTOBJ_PORT_PLANK      := 0xf011;
+CONST EXTOBJ_STARBOARD_PLANK := 0xf012;
+CONST EXTOBJ_HOLD            := 0xf013;

Added: trunk/096/scripts/include/OLD/recallRune.inc
===================================================================
--- trunk/096/scripts/include/OLD/recallRune.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/recallRune.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,48 @@
+use uo;
+use os;
+
+function Rename_Rune(who,rune)
+        if (GetObjProperty( rune, &quot;x&quot; ) == error)
+                SendSysMessage( who, &quot;That rune is not marked.&quot; );
+                return;
+        endif
+
+	var mark := CInt(GetObjProperty( rune, &quot;mark&quot; ));
+        var descrip := &quot;a &quot;;
+
+	if (mark&lt;4)
+               	if (mark&lt;2)
+               		descrip := descrip + &quot;nearly blanked&quot;;
+       		else
+               		descrip := descrip + &quot;worn&quot;;
+       		endif
+       	endif
+
+	if (GetObjProperty( rune, &quot;Place&quot; ) == error)
+       		rune.name := descrip + &quot; marked recall rune&quot;;
+	else
+		rune.name := descrip + &quot; rune for &quot; + GetObjProperty( rune, &quot;Place&quot; );
+        endif
+
+endfunction
+
+
+// chance is the #/10 for the rune to blank
+function Blank_Rune(who,rune,chance)
+        var mark := CInt(GetObjProperty( rune, &quot;mark&quot; ));
+
+	if (mark&lt;1) // non initialized rune
+		mark := 6; // make it full (lucky guy !)
+		SetObjProperty(rune,&quot;mark&quot;,mark);
+	endif
+
+        if (RandomInt(10)&lt;chance)  // Rune is blanking
+                mark := mark - 1;
+		SetObjProperty(rune,&quot;mark&quot;,mark);
+                if (mark == 0)
+                        DestroyItem(rune);
+                else
+			Rename_Rune(who,rune);
+		endif
+	endif
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/reportMurder.inc
===================================================================
--- trunk/096/scripts/include/OLD/reportMurder.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/reportMurder.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,116 @@
+use uo;
+use os;
+
+//include &quot;include/bounty&quot;;
+include &quot;:gumps:include/gumps&quot;;
+include &quot;:datafile:datafile&quot;;
+
+const LONG_COUNT_DECAY_TIME := 144000; //40 hours
+const SHORT_COUNT_DECAY_TIME := 28800; //8 hours
+
+//var reportables;
+//var reportdata := array{};
+
+function SendReportGump(who)
+	var reportables := who.reportables;
+	var report_data := array{};
+	
+	var gump := GFCreateGump();
+	GFPage(gump, 0);
+	GFDisposable(gump, 0);
+	GFClosable(gump, 0);
+	GFMovable(gump, 0);
+	GFResizePic(gump, 0, 0, 2600, 480, 480);
+	GFAddButton(gump, 380, 345, 249, 248, 1, 99);
+	GFTextLine(gump, 50, 20, 0, &quot;Now is the time for retribution!&quot;);
+	GFTextLine(gump, 50, 50, 0, &quot;Check zero or more players to report for your murder&quot;);
+	GFTextLine(gump, 50, 70, 0, &quot;and press OKAY&quot;);
+	
+	FillInArrays(reportables, report_data, gump);
+	
+	SetObjProperty(who, &quot;ReportMenu&quot;, report_data);
+	
+	var ret := GFSendGump(who, gump);
+	if( ret == 0 )
+		return;
+	endif
+	
+	EraseObjProperty(who, &quot;ReportMenu&quot;);
+	EraseObjProperty(who, &quot;LoginReport&quot;);
+	
+	var holder := array{};
+	foreach id in (ret.keys)
+		if( id in report_data )
+			var mob := SystemFindObjectBySerial(id, SYSFIND_SEARCH_OFFLINE_MOBILES);
+			if( !mob.ip )
+				SetObjProperty(mob.killer, &quot;LoginNotify&quot;, who.serial);
+			else
+				AdjustNoto(mob, who);
+			endif
+			
+			holder.append(id);
+			AdjustMurderCounts(mob.killer);
+		endif
+		sleepms(2);
+	endforeach
+	
+	foreach reportable in (who.reportables)
+		who.removeReportable(reportable.serial, reportable.gameclock);
+		sleepms(2);
+	endforeach
+	
+	var parms := array{who, holder};
+	var script := start_script(&quot;:bountyboard:bounty&quot;, parms);
+	if ( script.errortext )
+		SysLog(&quot;ERROR SendReportGump():: Unable to start :bountyboard:bounty -&gt;&quot;+script.errortext);
+		return error;
+	endif
+	
+	return 1;
+endfunction
+
+function FillInArrays(reportables, byref report_data, byref gump)
+	var prev_y := 80;
+	var buttonret := 10;
+	GFPage(gump, 1);
+	foreach reportable in reportables
+		if( !(reportable.killer).cmdlevel )
+			if( buttonret == 21 )
+				prev_y := 80;
+			endif
+			report_data.append((reportable.killer).serial);
+			GFCheckBox(gump, 40, prev_y+20, 210, 211, 0, (reportable.killer).serial);
+			GFTextLine(gump, 60, prev_y+20, 0, (reportable.killer).name);
+			prev_y := prev_y+20;
+			buttonret := buttonret+1;
+		endif
+		
+		sleepms(2);
+	endforeach
+	
+	return 1;
+endfunction
+
+function AdjustMurderCounts(killer)
+	var onlinetime := GetObjProperty(killer, &quot;onlinetimer&quot;);
+	var longcount := GetObjProperty(killer, &quot;longmurders&quot;);
+	
+	if( !longcount )
+		longcount := 0;
+	endif
+	
+	longcount := longcount + 1;
+	SetObjProperty(killer, &quot;longmurders&quot;, longcount);
+	
+	if( longcount &gt; 4 )
+		killer.setMurderer(1);
+		SendSysMessage(killer, &quot;You are now known as a murderer!&quot;);
+	endif
+	
+	SetObjProperty(killer, &quot;decaylongcountat&quot;, (onlinetime+LONG_COUNT_DECAY_TIME));
+	
+	var shortcount := CInt(GetObjProperty(killer, &quot;shortmurders&quot;));
+	shortcount := shortcount + 1;
+	SetObjProperty(killer, &quot;shortmurders&quot;, shortcount);
+	SetObjProperty(killer, &quot;decayshortcountat&quot;, (onlinetime+SHORT_COUNT_DECAY_TIME));
+endfunction

Added: trunk/096/scripts/include/OLD/resurrection.inc
===================================================================
--- trunk/096/scripts/include/OLD/resurrection.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/resurrection.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,80 @@
+/*
+ * $Id: resurrection.inc 693 2005-10-29 06:45:26Z muaddiblsd $
+ *
+ * Uhh what the fuck is this anyway?
+ *
+ */
+
+use uo;
+use os;
+
+include &quot;:attributes:attributes&quot;;
+include &quot;:gumps:gumps&quot;;
+
+const MAXIMUM_LOSS := 0.20; //20% loss for 20 shortterm murders or more
+
+function ResNow(mobile)
+
+	var gump := GFCreateGump();
+	GFClosable(gump, 0);
+	GFGumpPic(gump, 300, 230, 2070);
+	GFAddButton(gump, 330, 305, 2073, 2072, GF_CLOSE_BTN, 10);
+	GFAddButton(gump, 400, 305, 2076, 2075, GF_CLOSE_BTN, 11);
+	GFTextLine(gump, 332, 264, 40, &quot;Resurrect Now?&quot;);
+
+	var input := GFSendGump(mobile, gump);
+	input := input[0];
+	input := input-10;
+
+	if ( !input )
+		return 0;
+	else
+		return 1;
+	endif
+
+endfunction
+
+function MurdererStatLoss(who)
+
+	var shortc := GetObjProperty(who,&quot;shortmurders&quot;);
+	if( !shortc )
+		return 0;
+	endif
+
+	if( shortc &gt; 4 )
+		var multiplier := CInt(shortc)/100.0;
+		if( multiplier &gt; MAXIMUM_LOSS )
+			multiplier := MAXIMUM_LOSS;
+		endif
+
+		multiplier := 1.0 - multiplier;
+
+		var str := AP_GetTrueStat(who, &quot;strength&quot;);
+		var dex := AP_GetTrueStat(who, &quot;dexterity&quot;);
+		var inte := AP_GetTrueStat(who, &quot;intelligence&quot;);
+
+		str := CInt(str * multiplier);
+		dex := CInt(dex * multiplier);
+		inte := CInt(inte * multiplier);
+
+		AP_SetTrueStat(who, &quot;strength&quot;, str);
+		AP_SetTrueStat(who, &quot;dexterity&quot;, dex);
+		AP_SetTrueStat(who, &quot;intelligence&quot;, inte);
+
+		AP_SetVital(who, &quot;hits&quot;, AP_GetVitalMaximumValue(who, &quot;hits&quot;));
+		AP_SetVital(who, &quot;stamina&quot;, AP_GetVitalMaximumValue(who, &quot;stamina&quot;));
+		AP_SetVital(who, &quot;mana&quot;, AP_GetVitalMaximumValue(who, &quot;mana&quot;));
+
+		var newval;
+
+		foreach entry in (AP_ListAttributesByType(&quot;skill&quot;))
+			var skill_level := AP_GetTrueSkill(who, entry);
+			if( skill_level &gt; 0.0 )
+				newval := skill_level * multiplier;
+				AP_SetTrueSkill(who, entry, newval);
+			endif
+		endforeach
+		SendSysMessage(who,&quot;Thy body pays the price for thy sins.&quot;);
+	endif
+
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/selChar.inc
===================================================================
--- trunk/096/scripts/include/OLD/selChar.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/selChar.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,133 @@
+/////////////////////////////////////////////////////////////////////////////
+//
+// selchar.inc: 
+//
+// SelectOnlineCharacter( selector, charname, action )
+//
+// if charname is blank, prompts selector with a dialog box
+// 'action' is the text displayed above the column of buttons
+//
+/////////////////////////////////////////////////////////////////////////////
+
+use uo;
+
+
+function SelectOnlineCharacter( selector, charname, action )
+
+  if(!charname)
+
+    return SelectCharacterFromDialog( selector, &quot;Goto&quot; );
+  else
+    //print (who.name + &quot; wants to visit &quot; + whom);
+
+    charname := upper(charname);
+
+    foreach onlinechr in EnumerateOnlineCharacters()
+        if (upper(onlinechr.name) == charname)
+            return onlinechr;
+        endif
+    endforeach
+
+    return 0;
+
+  endif
+
+endfunction
+
+
+var playercount := 0;
+var pagecount := 1;
+
+var layout := array(
+
+&quot;page 0&quot;,
+&quot;nodispose&quot;,
+&quot;gumppic 0 50 2620&quot;,
+&quot;gumppic 20 50 2621&quot;,
+&quot;gumppic 290 50 2622&quot;,
+&quot;gumppic 0 68 2623&quot;,
+&quot;gumppic 22 68 2624&quot;,
+&quot;gumppic 288 68 2625&quot;,
+&quot;gumppic 0 272 2623&quot;,
+&quot;gumppic 22 272 2624&quot;,
+&quot;gumppic 288 272 2625&quot;,
+&quot;gumppic 0 476 2626&quot;,
+&quot;gumppic 20 476 2627&quot;,
+&quot;gumppic 290 476 2628&quot;,
+&quot;gumppic 20 80 2621&quot;,   
+
+&quot;text 20 59 40 0&quot;,
+&quot;text 260 59 40 1&quot;
+);
+
+var data := array(
+       &quot;Player Name&quot;,         //0
+       &quot;[action]&quot;
+);
+
+
+function SelectCharacterFromDialog( selector, action )
+
+    var players := EnumerateOnlineCharacters();
+    var datalen;
+    var layoutlen;
+    var prev_y := CInt(80);
+    var datindx;
+    var buttonret := 1;
+   
+
+    layout[GetLayoutLength()+1] := &quot;page &quot; + pagecount;
+    if( len(players) &gt; 19)
+        layout[GetLayoutLength()+1] := &quot;button 285 465 2648 2647 0 &quot; + (pagecount + 1);
+    endif
+
+    data[2] := action;
+
+    foreach player in players
+        playercount := playercount + 1;
+
+        datalen := GetDataLength();
+        layoutlen := GetLayoutLength();
+
+        datindx := datalen+1;
+        data[datindx] := player.name;
+        if( playercount == 20 || playercount == 39 || playercount == 58 || playercount == 77 || playercount == 96)
+
+            pagecount := pagecount + 1;
+            layout[GetLayoutLength()+1] := &quot;page &quot; + pagecount;
+            prev_y := 80;
+            //add page turners
+
+            layout[GetLayoutLength()+1] := &quot;button 285 85 2650 2651 0 &quot; + (pagecount - 1);
+            if( len(players) &gt; playercount + 19)
+                layout[GetLayoutLength()+1] := &quot;button 285 465 2648 2647 0 &quot; + (pagecount + 1);
+            endif
+        endif
+
+        layout[GetLayoutLength()+1] := (&quot;text 20 &quot; + CStr(prev_y + 20) + &quot; 40 &quot; + datalen);
+        layout[GetLayoutLength()+1] := (&quot;button 260 &quot; + CStr(prev_y + 20) + &quot; 2640 2641 1 0 &quot; + buttonret);
+
+        prev_y := prev_y + 20;
+        buttonret := buttonret + 1;
+    endforeach
+
+    var result := SendDialogGump( selector, layout, data );
+
+    if (result)
+        return players[ result[0] ];
+    else
+        return 0;
+    endif
+   
+
+endfunction
+
+
+function GetLayoutLength();
+    return (len(layout));
+endfunction
+
+function GetDataLength();
+    return (len(data));
+endfunction
+

Added: trunk/096/scripts/include/OLD/skillLists.inc
===================================================================
--- trunk/096/scripts/include/OLD/skillLists.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/skillLists.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,99 @@
+function getskilllist(me)
+  var mytemplate := lower(GetObjProperty(me, &quot;MerchantType&quot;));
+  case(mytemplate)
+    &quot;healer&quot;:           return { &quot;spiritspeaking&quot;, &quot;healing&quot;, &quot;anatomy&quot;, &quot;camping&quot;, &quot;fishing&quot;, &quot;forensic evaluation&quot; };
+    &quot;stable&quot;:           return { &quot;animal lore&quot;, &quot;animal taming&quot;, &quot;veterinary&quot; };
+    &quot;shipWright&quot;:       return { &quot;wrestling&quot;, &quot;tactics&quot; };
+    &quot;fisherman&quot;:        return { &quot;fishing&quot;, &quot;fencing&quot; };
+    &quot;innkeeper&quot;:        return { &quot;fencing&quot;, &quot;tactics&quot; };
+    &quot;farmer&quot;:           return { &quot;swordsmanship&quot;, &quot;animal lore&quot;, &quot;herding&quot;, &quot;veterinary&quot; };
+    &quot;weaponsmith&quot;:      return { &quot;swordsmanship&quot;, &quot;arms lore&quot;, &quot;blacksmithy&quot;, &quot;mining&quot;, &quot;parrying&quot;, &quot;tactics&quot; };
+    &quot;blacksmith&quot;:       return { &quot;swordsmanship&quot;, &quot;arms lore&quot;, &quot;blacksmithy&quot;, &quot;mining&quot;, &quot;parrying&quot;, &quot;tactics&quot; };
+    &quot;Armorer&quot;:          return { &quot;mace fighting&quot;, &quot;arms lore&quot;, &quot;blacksmithy&quot;, &quot;mining&quot;, &quot;parrying&quot;, &quot;tactics&quot; };
+    &quot;barkeep&quot;:          return { &quot;mace fighting&quot;, &quot;tactics&quot; };
+    &quot;barmaid&quot;:          return { &quot;fencing&quot;, &quot;tactics&quot; };
+    &quot;baker&quot;:            return { &quot;wrestling&quot;, &quot;cooking&quot; };
+    &quot;tinker&quot;:           return { &quot;fencing&quot;, &quot;alchemy&quot;, &quot;lockpicking&quot;, &quot;tinkering&quot; };
+    &quot;bard&quot;:             return { &quot;fencing&quot;, &quot;enticement&quot;, &quot;musicianship&quot;, &quot;provocation&quot;, &quot;peacemaking&quot; };
+    &quot;butcher&quot;:          return { &quot;mace fighting&quot;, &quot;cooking&quot;, &quot;taste identification&quot; };
+    &quot;cobbler&quot;:          return { &quot;swordsmanship&quot;, &quot;tailoring&quot; };
+    &quot;jeweler&quot;:          return { &quot;fencing&quot;, &quot;item identification&quot; };
+    &quot;mage&quot;:             return { &quot;magic resistance&quot;, &quot;inscription&quot;, &quot;magery&quot;, &quot;meditation&quot;, &quot;wrestling&quot; };
+    &quot;Alchemist&quot;:        return { &quot;magic resistance&quot;, &quot;taste identification&quot;, &quot;alchemy&quot;, &quot;wrestling&quot; };
+    &quot;herbalist&quot;:        return { &quot;magic resistance&quot;, &quot;alchemy&quot;, &quot;cooking&quot;, &quot;taste identification&quot;, &quot;wrestling&quot; };
+    &quot;tailor&quot;:           return { &quot;tailoring&quot;, &quot;fencing&quot; };
+    &quot;weaver&quot;:           return { &quot;tailoring&quot;, &quot;fencing&quot; };
+    &quot;leatherworker&quot;:    return { &quot;parrying&quot;, &quot;mace fighting&quot; };
+    &quot;provisioner&quot;:      return { &quot;tactics&quot;, &quot;parrying&quot;, &quot;fencing&quot; };
+    &quot;carpenter&quot;:        return { &quot;carpentry&quot;, &quot;lumberjacking&quot;, &quot;swordsmanship&quot; };
+    &quot;bowyer&quot;:           return { &quot;archery&quot;, &quot;bowcraft&quot;, &quot;fencing&quot; };
+    &quot;architect&quot;:        return { &quot;magic resistance&quot;, &quot;wrestling&quot; };
+    &quot;scribe&quot;:           return { &quot;magic resistance&quot;, &quot;evaluating intelligence&quot;, &quot;wrestling&quot; };
+    &quot;mapmaker&quot;:         return { &quot;cartography&quot;, &quot;wrestling&quot; };
+    &quot;vetrinarian&quot;:      return { &quot;animal lore&quot;, &quot;wrestling&quot;, &quot;veterinary&quot; };
+    &quot;townguard&quot;:        return { &quot;anatomy&quot;, &quot;tactics&quot;, &quot;swordsmanship&quot;, &quot;detect hidden&quot;, &quot;arms lore&quot; };
+    &quot;thief&quot;:            return { &quot;snooping&quot;, &quot;stealing&quot;, &quot;remove trap&quot;, &quot;stealth&quot;, &quot;fencing&quot;, &quot;poisoning&quot;, &quot;lockpicking&quot;, &quot;hiding&quot; };
+    &quot;beggar&quot;:           return { &quot;begging&quot;, &quot;wrestling&quot;, &quot;cooking&quot;, &quot;fishing&quot; };
+    &quot;fighter1&quot;:         return { &quot;anatomy&quot;, &quot;tactics&quot;, &quot;swordsmanship&quot;, &quot;arms lore&quot; };
+    &quot;fighter2&quot;:         return { &quot;anatomy&quot;, &quot;tactics&quot;, &quot;swordsmanship&quot;, &quot;arms lore&quot; };
+    &quot;fighter3&quot;:         return { &quot;anatomy&quot;, &quot;tactics&quot;, &quot;swordsmanship&quot;, &quot;arms lore&quot; };
+    &quot;fighter4&quot;:         return { &quot;anatomy&quot;, &quot;tactics&quot;, &quot;swordsmanship&quot;, &quot;arms lore&quot; };
+    &quot;paladin&quot;:          return { &quot;anatomy&quot;, &quot;tactics&quot;, &quot;swordsmanship&quot;, &quot;detect hidden&quot;, &quot;arms lore&quot; };
+    &quot;artist&quot;:
+  endcase
+endfunction
+
+function FindSkillId(name)
+  case(name)
+    &quot;alchemy&quot;:                  return  0;
+    &quot;anatomy&quot;:                  return  1;
+    &quot;animal lore&quot;:              return  2;
+    &quot;item identification&quot;:      return  3;
+    &quot;arms lore&quot;:                return  4;
+    &quot;parrying&quot;:                 return  5;
+    &quot;begging&quot;:                  return  6;
+    &quot;blacksmithy&quot;:              return  7;
+    &quot;bowcraft&quot;:                 return  8;
+    &quot;peacemaking&quot;:              return  9;
+    &quot;camping&quot;:                  return 10;
+    &quot;carpentry&quot;:                return 11;
+    &quot;cartography&quot;:              return 12;
+    &quot;cooking&quot;:                  return 13;
+    &quot;detect hidden&quot;:            return 14;
+    &quot;enticement&quot;:               return 15;
+    &quot;evaluating intelligence&quot;:  return 16;
+    &quot;healing&quot;:                  return 17;
+    &quot;fishing&quot;:                  return 18;
+    &quot;forensic evaluation&quot;:      return 19;
+    &quot;herding&quot;:                  return 20;
+    &quot;hiding&quot;:                   return 21;
+    &quot;provocation&quot;:              return 22;
+    &quot;inscription&quot;:              return 23;
+    &quot;lockpicking&quot;:              return 24;
+    &quot;magery&quot;:                   return 25;
+    &quot;magic resistance&quot;:         return 26;
+    &quot;tactics&quot;:                  return 27;
+    &quot;snooping&quot;:                 return 28;
+    &quot;musicianship&quot;:             return 29;
+    &quot;poisoning&quot;:                return 30;
+    &quot;archery&quot;:                  return 31;
+    &quot;spiritspeaking&quot;:           return 32;
+    &quot;stealing&quot;:                 return 33;
+    &quot;tailoring&quot;:                return 34;
+    &quot;animal taming&quot;:            return 35;
+    &quot;taste identification&quot;:     return 36;
+    &quot;tinkering&quot;:                return 37;
+    &quot;tracking&quot;:                 return 38;
+    &quot;veterinary&quot;:               return 39;
+    &quot;swordsmanship&quot;:            return 40;
+    &quot;mace fighting&quot;:            return 41;
+    &quot;fencing&quot;:                  return 42;
+    &quot;wrestling&quot;:                return 43;
+    &quot;lumberjacking&quot;:            return 44;
+    &quot;mining&quot;:                   return 45;
+    &quot;meditation&quot;:               return 46;
+    &quot;stealth&quot;:                  return 47;
+    &quot;remove trap&quot;:              return 48;
+  endcase
+endfunction
+ 
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/snooping.inc
===================================================================
--- trunk/096/scripts/include/OLD/snooping.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/snooping.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,7 @@
+include &quot;:attributes:attributes&quot;;
+
+function snoop(who, victim)
+  victim := victim; // stops &quot;var not used&quot; ecompile warning
+  SendSysMessage(who, &quot;Snooping not implemented yet.&quot;);
+  return;
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/sorting.inc
===================================================================
--- trunk/096/scripts/include/OLD/sorting.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/sorting.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,20 @@
+use uo;
+use os;
+use cfgfile;
+
+function bubble_sort_array(data, pos)
+  var i := 1;
+  var l := len(data);
+  for(i:=1; i&lt;=l; i:=i+1)
+    var ind := data[i];
+    var j := i;
+    while((j &gt; 0) &amp;&amp; (data[j-1][pos] &gt; ind[pos]))
+      data[j] := data[j-1];
+      j := j - 1;
+      sleepms(1);
+    endwhile
+    data[j] := ind;
+    sleepms(1);
+  endfor
+  return data;
+endfunction

Added: trunk/096/scripts/include/OLD/sound.inc
===================================================================
--- trunk/096/scripts/include/OLD/sound.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/sound.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,711 @@
+/* $Id: sound.inc 236 2005-09-25 09:06:19Z panosl $
+ *
+ */
+
+enum SFX_BASE
+	SFX_1     :=  0x0001, // forest
+	SFX_2     :=  0x0002, // forest
+	SFX_3     :=  0x0003, // forest
+	SFX_4     :=  0x0004, // jungle
+	SFX_5     :=  0x0005, // jungle
+	SFX_6     :=  0x0006, // jungle
+	SFX_7     :=  0x0007, // swamp
+	SFX_8     :=  0x0008, // swamp
+	SFX_9     :=  0x0009, // forest
+	SFX_A     :=  0x000a, // forest
+	SFX_B     :=  0x000b, // generic
+	SFX_C     :=  0x000c, // generic
+	SFX_D     :=  0x000d, // jungle
+	SFX_E     :=  0x000e, // jungle
+	SFX_F     :=  0x000f, // swamp
+	SFX_10    :=  0x0010, // swamp
+	SFX_11    :=  0x0011, // water
+	SFX_12    :=  0x0012, // water
+	SFX_13    :=  0x0013, // waves
+	SFX_14    :=  0x0014, // waves
+	SFX_15    :=  0x0015, // wind
+	SFX_16    :=  0x0016, // wind
+	SFX_17    :=  0x0017, // wind
+	SFX_18    :=  0x0018, // bird
+	SFX_19    :=  0x0019, // bird
+	SFX_1A    :=  0x001a, // bird
+	SFX_1B    :=  0x001b, // bird
+	SFX_1C    :=  0x001c, // bird
+	SFX_1D    :=  0x001d, // bird
+	SFX_1E    :=  0x001e, // bird
+	SFX_1F    :=  0x001f, // bird
+	SFX_20    :=  0x0020, // bird
+	SFX_21    :=  0x0021, // bubbles
+	SFX_22    :=  0x0022, // bubbles
+	SFX_23    :=  0x0023, // dripping
+	SFX_24    :=  0x0024, // dripping
+	SFX_25    :=  0x0025, // dripping
+	SFX_26    :=  0x0026, // splashing
+	SFX_27    :=  0x0027, // splashing
+	SFX_28    :=  0x0028, // splashing
+	SFX_29    :=  0x0029, // thundr01.wav, thunder
+	SFX_2A    :=  0x002a, // thundr02.wav, thunder
+	SFX_2B    :=  0x002b, // anvil.wav, anvil
+	SFX_2C    :=  0x002c, // bellows.wav, bellows
+	SFX_2D    :=  0x002d, // chstcls3.wav, chest close
+	SFX_2E    :=  0x002e, // chstopn2.wav, chest open
+	SFX_2F    :=  0x002f, // drawercl.wav, drawer close
+	SFX_30    :=  0x0030, // drawerop.wav, drawer open
+	SFX_31    :=  0x0031, // drink01.wav, drink
+	SFX_32    :=  0x0032, // drink05.wav, drink
+	SFX_33    :=  0x0033, // dropgem1.wav, drop gem
+	SFX_34    :=  0x0034, // dropgem2.wav, drop gem
+	SFX_35    :=  0x0035, // dropgem3.wav, drop gem
+	SFX_36    :=  0x0036, // dropmny1.wav, drop money
+	SFX_37    :=  0x0037, // dropmny2.wav, drop money
+	SFX_38    :=  0x0038, // dropmny3.wav, drop money
+	SFX_39    :=  0x0039, // drum01.wav, drum
+	SFX_3A    :=  0x003a, // drum01_b.wav, drum
+	SFX_3B    :=  0x003b, // eat01.wav, eat
+	SFX_3C    :=  0x003c, // eat03.wav, eat
+	SFX_3D    :=  0x003d, // eat06.wav,eat
+	SFX_3E    :=  0x003e, // flute01.wav, flute
+	SFX_3F    :=  0x003f, // glasbrk1.wav, glassbreak
+	SFX_40    :=  0x0040, // glasbrk2.wav, glassbreak
+	SFX_41    :=  0x0041, // glasbrk3.wav, glassbreak
+	SFX_42    :=  0x0042, // glasbrk4.wav, glassbreak
+	SFX_43    :=  0x0043, // hamer01.wav, hammer
+	SFX_44    :=  0x0044, // harp01.wav, harp
+	SFX_45    :=  0x0045, // harp01_b.wav, harp
+	SFX_46    :=  0x0046, // harp02.wav, harp
+	SFX_47    :=  0x0047, // harp02_b.wav, harp
+	SFX_48    :=  0x0048, // igntorch.wav, ignite torch
+	SFX_49    :=  0x0049, // leather1.wav, leather
+	SFX_4A    :=  0x004a, // lever01.wav, lever
+	SFX_4B    :=  0x004b, // lever02.wav, lever
+	SFX_4C    :=  0x004c, // lever05.wav, lever
+	SFX_4D    :=  0x004d, // lute01.wav, lute
+	SFX_4E    :=  0x004e, // lute01_b.wav, lute
+	SFX_4F    :=  0x004f, // pouring.wav, pouring
+	SFX_50    :=  0x0050, // rustle.wav, rustle
+	SFX_51    :=  0x0051, // swallow2.wav, swallow
+	SFX_52    :=  0x0052, // switch01.wav, switch
+	SFX_53    :=  0x0053, // tamborin.wav, tamborine
+	SFX_54    :=  0x0054, // tambrn_b.wav, tamborine
+	SFX_55    :=  0x0055, // torch01.wav, torch
+	SFX_56    :=  0x0056, // turnpage.wav, turn page
+	SFX_57    :=  0x0057, // unsheth1.wav, ?
+	SFX_58    :=  0x0058, // usecloth.wav, use cloth
+	SFX_59    :=  0x0059, // uselethr.wav, use leather
+	SFX_5A    :=  0x005a, // uselthr1.wav, use leather
+	SFX_5B    :=  0x005b, // aligatr1.wav, alligator
+	SFX_5C    :=  0x005c, // aligatr2.wav, alligator
+	SFX_5D    :=  0x005d, // aligatr3.wav, alligator
+	SFX_5E    :=  0x005e, // aligatr4.wav, alligator
+	SFX_5F    :=  0x005f, // aligatr5.wav, alligator
+	SFX_60    :=  0x0060, // bear1.wav, bear
+	SFX_61    :=  0x0061, // bear2.wav, bear
+	SFX_62    :=  0x0062, // bear3.wav, bear
+	SFX_63    :=  0x0063, // bear4.wav, bear
+	SFX_64    :=  0x0064, // bear5.wav, bear
+	SFX_65    :=  0x0065, // bull1.wav, bull
+	SFX_66    :=  0x0066, // bull2.wav, bull
+	SFX_67    :=  0x0067, // bull3.wav, bull
+	SFX_68    :=  0x0068, // bull4.wav, bull
+	SFX_69    :=  0x0069, // bull5.wav, bull
+	SFX_6A    :=  0x006a, // cat1.wav
+	SFX_6B    :=  0x006b, // cat2.wav
+	SFX_6C    :=  0x006c, // cat3.wav
+	SFX_6D    :=  0x006d, // cat4.wav
+	SFX_6E    :=  0x006e, // cat5.wav
+	SFX_6F    :=  0x006f, // chicken1.wav
+	SFX_70    :=  0x0070, // chicken2.wav
+	SFX_71    :=  0x0071, // chicken3.wav
+	SFX_72    :=  0x0072, // chicken4.wav
+	SFX_73    :=  0x0073, // chicken5.wav
+	SFX_74    :=  0x0074, // cougar1.wav
+	SFX_75    :=  0x0075, // cougar2.wav
+	SFX_76    :=  0x0076, // cougar3.wav
+	SFX_77    :=  0x0077, // cougar4.wav
+	SFX_78    :=  0x0078, // cougar5.wav
+	SFX_79    :=  0x0079, // cow1.wav
+	SFX_7A    :=  0x007a, // cow2.wav
+	SFX_7B    :=  0x007b, // cow3.wav
+	SFX_7C    :=  0x007c, // cow4.wav
+	SFX_7D    :=  0x007d, // cow5.wav
+	SFX_7E    :=  0x007e, // crow1.wav
+	SFX_7F    :=  0x007f, // crow2.wav
+	SFX_80    :=  0x0080, // crow3.wav
+	SFX_81    :=  0x0081, // crow4.wav
+	SFX_82    :=  0x0082, // crow5.wav
+	SFX_83    :=  0x0083, // deer3.wav
+	SFX_84    :=  0x0084, // deer4.wav
+	SFX_85    :=  0x0085, // deer5.wav
+	SFX_86    :=  0x0086, // dog1.wav
+	SFX_87    :=  0x0087, // dog2.wav
+	SFX_88    :=  0x0088, // dog3.wav
+	SFX_89    :=  0x0089, // dog4.wav
+	SFX_8A    :=  0x008a, // dog5.wav
+	SFX_8B    :=  0x008b, // dolphin1.wav
+	SFX_8C    :=  0x008c, // dolphin2.wav
+	SFX_8D    :=  0x008d, // dolphin3.wav
+	SFX_8E    :=  0x008e, // dolphin4.wav
+	SFX_8F    :=  0x008f, // dolphin5.wav
+	SFX_90    :=  0x0090, // eagle1.wav
+	SFX_91    :=  0x0091, // eagle2.wav
+	SFX_92    :=  0x0092, // eagle3.wav
+	SFX_93    :=  0x0093, // eagle4.wav
+	SFX_94    :=  0x0094, // eagle5.wav
+	SFX_95    :=  0x0095, // frstbrd1.wav
+	SFX_96    :=  0x0096, // frstbrd2.wav
+	SFX_97    :=  0x0097, // frstbrd3.wav
+	SFX_98    :=  0x0098, // frstbrd4.wav
+	SFX_99    :=  0x0099, // frstbrd5.wav
+	SFX_9A    :=  0x009a, // goat1.wav
+	SFX_9B    :=  0x009b, // goat2.wav
+	SFX_9C    :=  0x009c, // goat3.wav
+	SFX_9D    :=  0x009d, // goat4.wav
+	SFX_9E    :=  0x009e, // goat5.wav
+	SFX_9F    :=  0x009f, // gorilla1.wav
+	SFX_A0    :=  0x00a0, // gorilla2.wav
+	SFX_A1    :=  0x00a1, // gorilla3.wav
+	SFX_A2    :=  0x00a2, // gorilla4.wav
+	SFX_A3    :=  0x00a3, // gorilla5.wav
+	SFX_A4    :=  0x00a4, // grizzly1.wav
+	SFX_A5    :=  0x00a5, // grizzly2.wav
+	SFX_A6    :=  0x00a6, // grizzly3.wav
+	SFX_A7    :=  0x00a7, // grizzly4.wav
+	SFX_A8    :=  0x00a8, // grizzly5.wav
+	SFX_A9    :=  0x00a9, // horse1.wav
+	SFX_AA    :=  0x00aa, // horse2.wav
+	SFX_AB    :=  0x00ab, // horse3.wav
+	SFX_AC    :=  0x00ac, // horse4.wav
+	SFX_AD    :=  0x00ad, // horse5.wav
+	SFX_AE    :=  0x00ae, // jungbrd1.wav
+	SFX_AF    :=  0x00af, // jungbrd2.wav
+	SFX_B0    :=  0x00b0, // jungbrd3.wav
+	SFX_B1    :=  0x00b1, // jungbrd4.wav
+	SFX_B2    :=  0x00b2, // jungbrd5.wav
+	SFX_B3    :=  0x00b3, // lion1.wav
+	SFX_B4    :=  0x00b4, // lion2.wav
+	SFX_B5    :=  0x00b5, // lion3.wav
+	SFX_B6    :=  0x00b6, // lion4.wav
+	SFX_B7    :=  0x00b7, // lion5.wav
+	SFX_B8    :=  0x00b8, // llama3.wav
+	SFX_B9    :=  0x00b9, // llama4.wav
+	SFX_BA    :=  0x00ba, // llama5.wav
+	SFX_BB    :=  0x00bb, // panther1.wav
+	SFX_BC    :=  0x00bc, // panther2.wav
+	SFX_BD    :=  0x00bd, // panther3.wav
+	SFX_BE    :=  0x00be, // panther4.wav
+	SFX_BF    :=  0x00bf, // panther5.wav
+	SFX_C0    :=  0x00c0, // parrot1.wav
+	SFX_C1    :=  0x00c1, // parrot2.wav
+	SFX_C2    :=  0x00c2, // parrot3.wav
+	SFX_C3    :=  0x00c3, // parrot4.wav
+	SFX_C4    :=  0x00c4, // parrot5.wav
+	SFX_C5    :=  0x00c5, // pig1.wav
+	SFX_C6    :=  0x00c6, // pig2.wav
+	SFX_C7    :=  0x00c7, // pig3.wav
+	SFX_C8    :=  0x00c8, // pig4.wav
+	SFX_C9    :=  0x00c9, // pig5.wav
+	SFX_CA    :=  0x00ca, // rabbit3.wav
+	SFX_CB    :=  0x00cb, // rabbit4.wav
+	SFX_CC    :=  0x00cc, // rabbit5.wav
+	SFX_CD    :=  0x00cd, // rat1.wav
+	SFX_CE    :=  0x00ce, // rat2.wav
+	SFX_CF    :=  0x00cf, // rat3.wav
+	SFX_D0    :=  0x00d0, // rat4.wav
+	SFX_D1    :=  0x00d1, // rat5.wav
+	SFX_D2    :=  0x00d2, // raven1.wav
+	SFX_D3    :=  0x00d3, // raven2.wav
+	SFX_D4    :=  0x00d4, // raven3.wav
+	SFX_D5    :=  0x00d5, // raven4.wav
+	SFX_D6    :=  0x00d6, // raven5.wav
+	SFX_D7    :=  0x00d7, // sheep1.wav
+	SFX_D8    :=  0x00d8, // sheep2.wav
+	SFX_D9    :=  0x00d9, // sheep3.wav
+	SFX_DA    :=  0x00da, // sheep4.wav
+	SFX_DB    :=  0x00db, // sheep5.wav
+	SFX_DC    :=  0x00dc, // snake1.wav
+	SFX_DD    :=  0x00dd, // snake2.wav
+	SFX_DE    :=  0x00de, // snake3.wav
+	SFX_DF    :=  0x00df, // snake4.wav
+	SFX_E0    :=  0x00e0, // snake5.wav
+	SFX_E1    :=  0x00e1, // walrus1.wav
+	SFX_E2    :=  0x00e2, // walrus2.wav
+	SFX_E3    :=  0x00e3, // walrus3.wav
+	SFX_E4    :=  0x00e4, // walrus4.wav
+	SFX_E5    :=  0x00e5, // walrus5.wav
+	SFX_E6    :=  0x00e6, // wolf1.wav
+	SFX_E7    :=  0x00e7, // wolf2.wav
+	SFX_E8    :=  0x00e8, // wolf3.wav
+	SFX_E9    :=  0x00e9, // wolf4.wav
+	SFX_EA    :=  0x00ea, // wolf5.wav
+	SFX_EB    :=  0x00eb, // open01a.wav
+	SFX_EC    :=  0x00ec, // open03a.wav
+	SFX_ED    :=  0x00ed, // open04b.wav
+	SFX_EE    :=  0x00ee, // open09.wav
+	SFX_EF    :=  0x00ef, // portclos.wav
+	SFX_F0    :=  0x00f0, // portcul4.wav
+	SFX_F1    :=  0x00f1, // portcul5.wav
+	SFX_F2    :=  0x00f2, // shut03a.wav
+	SFX_F3    :=  0x00f3, // shut07a.wav
+	SFX_F4    :=  0x00f4, // shut14b.wav
+	SFX_F5    :=  0x00f5, // shut17.wav
+	SFX_F6    :=  0x00f6, // sfx01.wav
+	SFX_F7    :=  0x00f7, // sfx02.wav
+	SFX_F8    :=  0x00f8, // sfx04.wav
+	SFX_F9    :=  0x00f9, // sfx05.wav
+	SFX_FA    :=  0x00fa, // sfx06.wav
+	SFX_FB    :=  0x00fb, // sfx08.wav
+	SFX_FC    :=  0x00fc, // sfx10.wav
+	SFX_FD    :=  0x00fd, // sfx11.wav
+	SFX_FE    :=  0x00fe, // sfx12.wav
+	SFX_FF    :=  0x00ff, // sfx13.wav
+	SFX_100   :=  0x0100, // sfx14_l.wav
+	SFX_101   :=  0x0101, // sfx15_l.wav
+	SFX_102   :=  0x0102, // sfx16_l.wav
+	SFX_103   :=  0x0103, // sfx17_l.wav
+	SFX_104   :=  0x0104, // sfx18_l.wav
+	SFX_105   :=  0x0105, // sfx20_l.wav
+	SFX_106   :=  0x0106, // sfx21_l.wav
+	SFX_107   :=  0x0107, // sfx22_l.wav
+	SFX_108   :=  0x0108, // airelem1.wav
+	SFX_109   :=  0x0109, // airelem2.wav
+	SFX_10A   :=  0x010a, // airelem3.wav
+	SFX_10B   :=  0x010b, // airelem4.wav
+	SFX_10C   :=  0x010c, // airelem5.wav
+	SFX_10D   :=  0x010d, // erthel1.wav
+	SFX_10E   :=  0x010e, // erthel2.wav
+	SFX_10F   :=  0x010f, // erthel3.wav
+	SFX_110   :=  0x0110, // erthel4.wav
+	SFX_111   :=  0x0111, // erthel5.wav
+	SFX_112   :=  0x0112, // firelem1.wav
+	SFX_113   :=  0x0113, // firelem2.wav
+	SFX_114   :=  0x0114, // firelem3.wav
+	SFX_115   :=  0x0115, // firelem4.wav
+	SFX_116   :=  0x0116, // firelem5.wav
+	SFX_117   :=  0x0117, // watrel1.wav
+	SFX_118   :=  0x0118, // watrel2.wav
+	SFX_119   :=  0x0119, // watrel3.wav
+	SFX_11A   :=  0x011a, // watrel4.wav
+	SFX_11B   :=  0x011b, // watrel5.wav
+	SFX_11C   :=  0x011c, // exp01.wav
+	SFX_11D   :=  0x011d, // exp04.wav
+	SFX_11E   :=  0x011e, // exp05.wav
+	SFX_11F   :=  0x011f, // exp06.wav
+	SFX_120   :=  0x0120, // bigfoot1.wav
+	SFX_121   :=  0x0121, // bigfoot2.wav
+	SFX_122   :=  0x0122, // feet01a.wav
+	SFX_123   :=  0x0123, // feet01b.wav
+	SFX_124   :=  0x0124, // feet03a.wav
+	SFX_125   :=  0x0125, // feet03b.wav
+	SFX_126   :=  0x0126, // feet05a.wav
+	SFX_127   :=  0x0127, // feet05b.wav
+	SFX_128   :=  0x0128, // feet08a.wav
+	SFX_129   :=  0x0129, // feet08b.wav
+	SFX_12A   :=  0x012a, // feet10a.wav
+	SFX_12B   :=  0x012b, // feet10b.wav
+	SFX_12C   :=  0x012c, // feet12a.wav
+	SFX_12D   :=  0x012d, // feet12b1wav
+	SFX_12E   :=  0x012e, // feet13a.wav
+	SFX_12F   :=  0x012f, // feet13b.wav
+	SFX_130   :=  0x0130, // feet14a.wav
+	SFX_131   :=  0x0131, // feet14b.wav
+	SFX_132   :=  0x0132, // feet15a.wav
+	SFX_133   :=  0x0133, // feet15b.wav
+	SFX_134   :=  0x0134, // feet15c.wav
+	SFX_135   :=  0x0135, // feet15d.wav
+	SFX_136   :=  0x0136, // hit01.wav
+	SFX_137   :=  0x0137, // hit02.wav
+	SFX_138   :=  0x0138, // hit03.wav
+	SFX_139   :=  0x0139, // hit04.wav
+	SFX_13A   :=  0x013a, // hit05.wav
+	SFX_13B   :=  0x013b, // hit06.wav
+	SFX_13C   :=  0x013c, // hit07.wav
+	SFX_13D   :=  0x013d, // hit08.wav
+	SFX_13E   :=  0x013e, // hit09.wav
+	SFX_13F   :=  0x013f, // hit10.wav
+	SFX_140   :=  0x0140, // hit11.wav
+	SFX_141   :=  0x0141, // hit12.wav
+	SFX_142   :=  0x0142, // hit13.wav
+	SFX_143   :=  0x0143, // hit14.wav
+	SFX_144   :=  0x0144, // hit15.wav
+	SFX_145   :=  0x0145, // hit16.wav
+	SFX_146   :=  0x0146, // hit17.wav
+	SFX_147   :=  0x0147, // hit18.wav
+	SFX_148   :=  0x0148, // hit19.wav
+	SFX_149   :=  0x0149, // hit20.wav
+	SFX_14A   :=  0x014a, // hit21.wav
+	SFX_14B   :=  0x014b, // hit22.wav
+	SFX_14C   :=  0x014c, // foomph01.wav
+	SFX_14D   :=  0x014d, // foomph06.wav
+	SFX_14E   :=  0x014e, // foomph07.wav
+	SFX_14F   :=  0x014f, // foomph08.wav
+	SFX_150   :=  0x0150, // foomph09.wav
+	SFX_151   :=  0x0151, // f_die_01.wav
+	SFX_152   :=  0x0152, // f_die_02.wav
+	SFX_153   :=  0x0153, // f_die_03.wav
+	SFX_154   :=  0x0154, // f_die_04.wav
+	SFX_155   :=  0x0155, // moomph01.wav
+	SFX_156   :=  0x0156, // moomph02.wav
+	SFX_157   :=  0x0157, // moomph03.wav
+	SFX_158   :=  0x0158, // moomph04.wav
+	SFX_159   :=  0x0159, // moomph05.wav
+	SFX_15A   :=  0x015a, // moomph13.wav
+	SFX_15B   :=  0x015b, // m_die_01.wav
+	SFX_15C   :=  0x015c, // m_die_02.wav
+	SFX_15D   :=  0x015d, // m_die_03.wav
+	SFX_15E   :=  0x015e, // m_die_04.wav
+	SFX_15F   :=  0x015f, // fyrbal01.wav
+	SFX_160   :=  0x0160, // fyrbal02.wav
+	SFX_161   :=  0x0161, // fyrbal03.wav
+	SFX_162   :=  0x0162, // corpsr1.wav
+	SFX_163   :=  0x0163, // corpsr3.wav
+	SFX_164   :=  0x0164, // corpsr4.wav
+	SFX_165   :=  0x0165, // corpsr5.wav
+	SFX_166   :=  0x0166, // daemon1.wav
+	SFX_167   :=  0x0167, // daemon2.wav
+	SFX_168   :=  0x0168, // daemon3.wav
+	SFX_169   :=  0x0169, // daemon4.wav
+	SFX_16A   :=  0x016a, // daemon5.wav
+	SFX_16B   :=  0x016b, // dragon1.wav
+	SFX_16C   :=  0x016c, // dragon2.wav
+	SFX_16D   :=  0x016d, // dragon3.wav
+	SFX_16E   :=  0x016e, // dragon4.wav
+	SFX_16F   :=  0x016f, // dragon5.wav
+	SFX_170   :=  0x0170, // ettin1.wav
+	SFX_171   :=  0x0171, // ettin2.wav
+	SFX_172   :=  0x0172, // ettin3.wav
+	SFX_173   :=  0x0173, // ettin4.wav
+	SFX_174   :=  0x0174, // ettin5.wav
+	SFX_175   :=  0x0175, // gargyl1.wav
+	SFX_176   :=  0x0176, // gargyl2.wav
+	SFX_177   :=  0x0177, // gargyl3.wav
+	SFX_178   :=  0x0178, // gargyl4.wav
+	SFX_179   :=  0x0179, // gargyl5.wav
+	SFX_17A   :=  0x017a, // gazer1.wav
+	SFX_17B   :=  0x017b, // gazer2.wav
+	SFX_17C   :=  0x017c, // gazer3.wav
+	SFX_17D   :=  0x017d, // gazer4.wav
+	SFX_17E   :=  0x017e, // gazer5.wav
+	SFX_17F   :=  0x017f, // ghost1.wav
+	SFX_180   :=  0x0180, // ghost2.wav
+	SFX_181   :=  0x0181, // ghost3.wav
+	SFX_182   :=  0x0182, // ghost4.wav
+	SFX_183   :=  0x0183, // ghost5.wav
+	SFX_184   :=  0x0184, // gispidr1.wav
+	SFX_185   :=  0x0185, // gispidr2.wav
+	SFX_186   :=  0x0186, // gispidr3.wav
+	SFX_187   :=  0x0187, // gispidr4.wav
+	SFX_188   :=  0x0188, // gispidr5.wav
+	SFX_189   :=  0x0189, // grat1.wav
+	SFX_18A   :=  0x018a, // grat2.wav
+	SFX_18B   :=  0x018b, // grat3.wav
+	SFX_18C   :=  0x018c, // grat4.wav
+	SFX_18D   :=  0x018d, // grat5.wav
+	SFX_18E   :=  0x018e, // gscorp1.wav
+	SFX_18F   :=  0x018f, // gscorp2.wav
+	SFX_190   :=  0x0190, // gscorp3.wav
+	SFX_191   :=  0x0191, // gscorp4.wav
+	SFX_192   :=  0x0192, // gscorp5.wav
+	SFX_193   :=  0x0193, // harpy1.wav
+	SFX_194   :=  0x0194, // harpy2.wav
+	SFX_195   :=  0x0195, // harpy3.wav
+	SFX_196   :=  0x0196, // harpy4.wav
+	SFX_197   :=  0x0197, // harpy5.wav
+	SFX_198   :=  0x0198, // headls1.wav
+	SFX_199   :=  0x0199, // headls2.wav
+	SFX_19A   :=  0x019a, // headls3.wav
+	SFX_19B   :=  0x019b, // headls4.wav
+	SFX_19C   :=  0x019c, // headls5.wav
+	SFX_19D   :=  0x019d, // liche1.wav
+	SFX_19E   :=  0x019e, // liche2.wav
+	SFX_19F   :=  0x019f, // liche3.wav
+	SFX_1A0   :=  0x01a0, // liche4.wav
+	SFX_1A1   :=  0x01a1, // liche5.wav
+	SFX_1A2   :=  0x01a2, // lzrdmn1.wav
+	SFX_1A3   :=  0x01a3, // lzrdmn2.wav
+	SFX_1A4   :=  0x01a4, // lzrdmn3.wav
+	SFX_1A5   :=  0x01a5, // lzrdmn4.wav
+	SFX_1A6   :=  0x01a6, // lzrdmn5.wav
+	SFX_1A7   :=  0x01a7, // mngbat1.wav
+	SFX_1A8   :=  0x01a8, // mngbat2.wav
+	SFX_1A9   :=  0x01a9, // mngbat3.wav
+	SFX_1AA   :=  0x01aa, // mngbat4.wav
+	SFX_1AB   :=  0x01ab, // mngbat5.wav
+	SFX_1AC   :=  0x01ac, // ogre1.wav
+	SFX_1AD   :=  0x01ad, // ogre2.wav
+	SFX_1AE   :=  0x01ae, // ogre3.wav
+	SFX_1AF   :=  0x01af, // ogre4.wav
+	SFX_1B0   :=  0x01b0, // ogre5.wav
+	SFX_1B1   :=  0x01b1, // orc1.wav
+	SFX_1B2   :=  0x01b2, // orc2.wav
+	SFX_1B3   :=  0x01b3, // orc3.wav
+	SFX_1B4   :=  0x01b4, // orc4.wav
+	SFX_1B5   :=  0x01b5, // orc5.wav
+	SFX_1B6   :=  0x01b6, // ratman1.wav
+	SFX_1B7   :=  0x01b7, // ratman2.wav
+	SFX_1B8   :=  0x01b8, // ratman3.wav
+	SFX_1B9   :=  0x01b9, // ratman4.wav
+	SFX_1BA   :=  0x01ba, // ratman5.wav
+	SFX_1BB   :=  0x01bb, // reaper1.wav
+	SFX_1BC   :=  0x01bc, // reaper2.wav
+	SFX_1BD   :=  0x01bd, // reaper3.wav
+	SFX_1BE   :=  0x01be, // reaper4.wav
+	SFX_1BF   :=  0x01bf, // reaper5.wav
+	SFX_1C0   :=  0x01c0, // seaserp1.wav
+	SFX_1C1   :=  0x01c1, // seaserp3.wav
+	SFX_1C2   :=  0x01c2, // seaserp4.wav
+	SFX_1C3   :=  0x01c3, // seaserp5.wav
+	SFX_1C4   :=  0x01c4, // skletn1.wav
+	SFX_1C5   :=  0x01c5, // skletn2.wav
+	SFX_1C6   :=  0x01c6, // skletn3.wav
+	SFX_1C7   :=  0x01c7, // skletn4.wav
+	SFX_1C8   :=  0x01c8, // skletn5.wav
+	SFX_1C9   :=  0x01c9, // slime1.wav
+	SFX_1CA   :=  0x01ca, // slime2.wav
+	SFX_1CB   :=  0x01cb, // slime3.wav
+	SFX_1CC   :=  0x01cc, // slime4.wav
+	SFX_1CD   :=  0x01cd, // slime5.wav
+	SFX_1CE   :=  0x01ce, // troll1.wav
+	SFX_1CF   :=  0x01cf, // troll2.wav
+	SFX_1D0   :=  0x01d0, // troll3.wav
+	SFX_1D1   :=  0x01d1, // troll4.wav
+	SFX_1D2   :=  0x01d2, // troll5.wav
+	SFX_1D3   :=  0x01d3, // wisp1.wav
+	SFX_1D4   :=  0x01d4, // wisp2.wav
+	SFX_1D5   :=  0x01d5, // wisp3.wav
+	SFX_1D6   :=  0x01d6, // wisp4.wav
+	SFX_1D7   :=  0x01d7, // wisp5.wav
+	SFX_1D8   :=  0x01d8, // zombie1.wav
+	SFX_1D9   :=  0x01d9, // zombie2.wav
+	SFX_1DA   :=  0x01da, // zombie3.wav
+	SFX_1DB   :=  0x01db, // zombie4.wav
+	SFX_1DC   :=  0x01dc, // zombie5.wav
+	SFX_1DD   :=  0x01dd, // elec_l.wav
+	SFX_1DE   :=  0x01de, // fire_l.wav
+	SFX_1DF   :=  0x01df, // hiss_l.wav
+	SFX_1E0   :=  0x01e0, // clumsy.wav
+	SFX_1E1   :=  0x01e1, // cure.wav
+	SFX_1E2   :=  0x01e2, // curse.wav
+	SFX_1E3   :=  0x01e3, // c_food.wav
+	SFX_1E4   :=  0x01e4, // c_light.wav
+	SFX_1E5   :=  0x01e5, // feblmind.wav
+	SFX_1E6   :=  0x01e6, // m_arrow.wav
+	SFX_1E7   :=  0x01e7, // weaken.wav
+	SFX_1E8   :=  0x01e8, // agility.wav
+	SFX_1E9   :=  0x01e9, // archcure.wav
+	SFX_1EA   :=  0x01ea, // birdseye.wav
+	SFX_1EB   :=  0x01eb, // bless.wav
+	SFX_1EC   :=  0x01ec, // cunning.wav
+	SFX_1ED   :=  0x01ed, // identify.wav
+	SFX_1EE   :=  0x01ee, // protect.wav
+	SFX_1EF   :=  0x01ef, // strength.wav
+	SFX_1F0   :=  0x01f0, // trap.wav
+	SFX_1F1   :=  0x01f1, // untrap.wav
+	SFX_1F2   :=  0x01f2, // harm.wav
+	SFX_1F3   :=  0x01f3, // heal.wav
+	SFX_1F4   :=  0x01f4, // magic_fyrbal01.
+	SFX_1F5   :=  0x01f5, // m_lock.wav
+	SFX_1F6   :=  0x01f6, // teleknes.wav
+	SFX_1F7   :=  0x01f7, // walstone.wav
+	SFX_1F8   :=  0x01f8, // aprotect.wav
+	SFX_1F9   :=  0x01f9, // manadran.wav
+	SFX_1FA   :=  0x01fa, // manavamp.wav
+	SFX_1FB   :=  0x01fb, // mark.wav
+	SFX_1FC   :=  0x01fc, // masscurs.wav
+	SFX_1FD   :=  0x01fd, // recall.wav
+	SFX_1FE   :=  0x01fe, // reveal.wav
+	SFX_1FF   :=  0x01ff, // teleport.wav
+	SFX_200   :=  0x0200, // unlock.wav
+	SFX_201   :=  0x0201, // bladsprt.wav
+	SFX_202   :=  0x0202, // dispfild.wav
+	SFX_203   :=  0x0203, // gratheal.wav
+	SFX_204   :=  0x0204, // invisibl.wav
+	SFX_205   :=  0x0205, // paralyze.wav
+	SFX_206   :=  0x0206, // poison.wav
+	SFX_207   :=  0x0207, // thundr01.wav
+	SFX_208   :=  0x0208, // explode.wav
+	SFX_209   :=  0x0209, // flamstrk.wav
+	SFX_20A   :=  0x020a, // massdisp.wav
+	SFX_20B   :=  0x020b, // nrgybolt.wav
+	SFX_20C   :=  0x020c, // parafild.wav
+	SFX_20D   :=  0x020d, // posnfild.wav
+	SFX_20E   :=  0x020e, // earthqke.wav
+	SFX_20F   :=  0x020f, // gatetrvl.wav
+	SFX_210   :=  0x0210, // morph.wav
+	SFX_211   :=  0x0211, // nergyfld.wav
+	SFX_212   :=  0x0212, // nrgywind.wav
+	SFX_213   :=  0x0213, // dethvrtx.wav
+	SFX_214   :=  0x0214, // mindblst.wav
+	SFX_215   :=  0x0215, // resurect.wav
+	SFX_216   :=  0x0216, // sumncrtr.wav
+	SFX_217   :=  0x0217, // sumndemn.wav
+	SFX_218   :=  0x0218, // sumnelem.wav
+	SFX_219   :=  0x0219, // blade01.wav
+	SFX_21A   :=  0x021a, // blade02.wav
+	SFX_21B   :=  0x021b, // blade03.wav
+	SFX_21C   :=  0x021c, // blade04.wav
+	SFX_21D   :=  0x021d, // blade05.wav
+	SFX_21E   :=  0x021e, // boulder1.wav
+	SFX_21F   :=  0x021f, // boulder2.wav
+	SFX_220   :=  0x0220, // crumble1.wav
+	SFX_221   :=  0x0221, // crumble2.wav
+	SFX_222   :=  0x0222, // crumble3.wav
+	SFX_223   :=  0x0223, // crumble4.wav
+	SFX_224   :=  0x0224, // dart01.wav
+	SFX_225   :=  0x0225, // dart02.wav
+	SFX_226   :=  0x0226, // flame01.wav
+	SFX_227   :=  0x0227, // flame03.wav
+	SFX_228   :=  0x0228, // flame05.wav
+	SFX_229   :=  0x0229, // mushrm01.wav
+	SFX_22A   :=  0x022a, // mushrm02.wav
+	SFX_22B   :=  0x022b, // mushrm03.wav
+	SFX_22C   :=  0x022c, // spike01.wav
+	SFX_22D   :=  0x022d, // spike02.wav
+	SFX_22E   :=  0x022e, // spike03.wav
+	SFX_22F   :=  0x022f, // spike04.wav
+	SFX_230   :=  0x0230, // vapor01.wav
+	SFX_231   :=  0x0231, // vapor02.wav
+	SFX_232   :=  0x0232, // vapor03.wav
+	SFX_233   :=  0x0233, // axe01.wav
+	SFX_234   :=  0x0234, // blunt01.wav
+	SFX_235   :=  0x0235, // crossbow.wav
+	SFX_236   :=  0x0236, // gilotin1.wav
+	SFX_237   :=  0x0237, // hvyswrd1.wav
+	SFX_238   :=  0x0238, // hvyswrd4.wav
+	SFX_239   :=  0x0239, // swish01.wav
+	SFX_23A   :=  0x023a, // swish02.wav
+	SFX_23B   :=  0x023b, // swish03.wav
+	SFX_23C   :=  0x023c, // sword1.wav
+	SFX_23D   :=  0x023d, // sword7.wav
+	SFX_23E   :=  0x023e, // carpntry.wav
+	SFX_23F   :=  0x023f, // dye.wav
+	SFX_240   :=  0x0240, // fshsplsh.wav
+	SFX_241   :=  0x0241, // liquid.wav
+	SFX_242   :=  0x0242, // lockpick.wav
+	SFX_243   :=  0x0243, // mortar.wav
+	SFX_244   :=  0x0244, // mystery1.wav
+	SFX_245   :=  0x0245, // mystery2.wav
+	SFX_246   :=  0x0246, // mystery3.wav
+	SFX_247   :=  0x0247, // poison.wav
+	SFX_248   :=  0x0248, // powder.wav
+	SFX_249   :=  0x0249, // scissors.wav
+	SFX_24A   :=  0x024a, // scribe.wav
+	SFX_24B   :=  0x024b, // spirtspk.wav
+	SFX_24C   :=  0x024c, // z_horseft2.wav
+	SFX_24D   :=  0x024d, // z_horseft1.wav
+	SFX_24E   :=  0x024e, // Tera.Warrior 1
+	SFX_24F   :=  0x02ef  // Tera.Warrior 2
+endenum
+
+
+// Fill in the rest of the T2A sounds here.
+enum SFX_MUSIC
+	SFX_MUSIC_LUTE_GOOD           := SFX_4D,
+	SFX_MUSIC_LUTE_FAIL           := SFX_4E,
+	SFX_MUSIC_DRUM_GOOD           := SFX_39,
+	SFX_MUSIC_DRUM_FAIL           := SFX_3A,
+	SFX_MUSIC_HARP_LARGE_GOOD     := SFX_44,
+	SFX_MUSIC_HARP_LARGE_FAIL     := SFX_45,
+	SFX_MUSIC_HARP_LAP_GOOD       := SFX_46,
+	SFX_MUSIC_HARP_LAP_FAIL       := SFX_47,
+	SFX_MUSIC_TAMBORINE_GOOD      := SFX_53,
+	SFX_MUSIC_TAMBORINE_FAIL      := SFX_54
+endenum
+
+
+enum SFX_SPELLS
+	SFX_SPELL_CLUMSY              := SFX_1E0,
+	SFX_SPELL_CREATE_FOOD         := SFX_1E3,
+	SFX_SPELL_FEEBLEMIND          := SFX_1E5,
+	SFX_SPELL_HEAL                := SFX_1F3,
+	SFX_SPELL_MAGIC_ARROW         := SFX_1E6,
+	SFX_SPELL_NIGHT_SIGHT         := SFX_1E4,
+	SFX_SPELL_REACTIVE_ARMOR      := SFX_1F3,
+	SFX_SPELL_WEAKEN              := SFX_1E7,
+	SFX_SPELL_AGILITY             := SFX_1E8,
+	SFX_SPELL_CUNNING             := SFX_1EC,
+	SFX_SPELL_CURE                := SFX_1E1,
+	SFX_SPELL_HARM                := SFX_1F2,
+	SFX_SPELL_MAGIC_TRAP          := SFX_1F0,
+	SFX_SPELL_MAGIC_UNTRAP        := SFX_1F1,
+	SFX_SPELL_PROTECTION          := SFX_1EE,
+	SFX_SPELL_STRENGTH            := SFX_1EF,
+	SFX_SPELL_BLESS               := SFX_1EB,
+	SFX_SPELL_FIREBALL            := SFX_160,
+	SFX_SPELL_MAGIC_LOCK          := SFX_1F5,
+	SFX_SPELL_TELEKINESIS         := SFX_1F6,
+	SFX_SPELL_TELEPORT            := SFX_1FF,
+	SFX_SPELL_POISON              := SFX_247,
+	SFX_SPELL_UNLOCK              := SFX_200,
+	SFX_SPELL_WALL_OF_STONE       := SFX_1F7,
+	SFX_SPELL_ARCH_CURE           := SFX_1E9,
+	SFX_SPELL_ARCH_PROTECTION     := SFX_1F8,
+	SFX_SPELL_CURSE               := SFX_1E2,
+	SFX_SPELL_FIRE_FIELD          := SFX_226,
+	SFX_SPELL_GREATER_HEAL        := SFX_203,
+	SFX_SPELL_LIGHTNING           := SFX_2A,
+	SFX_SPELL_MANA_DRAIN          := SFX_1F9,
+	SFX_SPELL_RECALL              := SFX_1FD,
+	SFX_SPELL_BLADE_SPIRITS       := SFX_213,
+	SFX_SPELL_ENERGY_FIELD        := SFX_211, // used to say dispel field?
+	SFX_SPELL_INCOGNITO           := SFX_1ED,
+	SFX_SPELL_MAGIC_REFLECTION    := SFX_1E8,
+	SFX_SPELL_MIND_BLAST          := SFX_214,
+	SFX_SPELL_PARALYZE            := SFX_205,
+	SFX_SPELL_POISON_FIELD        := SFX_20D, // was 227 (??)
+	SFX_SPELL_SUMMON_CREATURE     := SFX_216,
+	SFX_SPELL_DISPEL              := SFX_202,
+	SFX_SPELL_ENERGY_BOLT         := SFX_20B,
+	SFX_SPELL_EXPLOSION           := SFX_208,
+	SFX_SPELL_INVISIBILITY        := SFX_204,
+	SFX_SPELL_MARK                := SFX_1FB,
+	SFX_SPELL_MASS_CURSE          := SFX_1FC,
+	SFX_SPELL_PARALYZE_FIELD      := SFX_212,
+	SFX_SPELL_REVEAL              := SFX_1FE,
+	SFX_SPELL_CHAIN_LIGHTNING     := SFX_30,
+	SFX_SPELL_PARA_FIELD          := SFX_20C,
+	SFX_SPELL_FLAME_STRIKE        := SFX_209,
+	SFX_SPELL_GATE_TRAVEL         := SFX_20F,
+	SFX_SPELL_MANA_VAMPIRE        := SFX_1FA,
+	SFX_SPELL_MASS_DISPEL         := SFX_20A,
+	SFX_SPELL_METEOR_SWARM        := SFX_161,
+	SFX_SPELL_POLYMORPH           := SFX_20A,
+	SFX_SPELL_EARTHQUAKE          := SFX_20E,
+	SFX_SPELL_ENERGY_VORTEX       := SFX_213,
+	SFX_SPELL_RESSURECTION        := SFX_215,
+	SFX_SPELL_SUMMON_ELEMENTAL    := SFX_218,
+	SFX_SPELL_SUMMON_DAEMON       := SFX_217
+endenum
+
+
+enum SFX_SKILLS
+	SFX_SKILL_SPIRITSPEAK	:= SFX_24B,
+	SFX_SKILL_LUMBERJACK	:= SFX_13F,
+	SFX_SKILL_LOCKPICK	:= SFX_242
+endenum
+
+
+enum SFX_ITEMS
+	SFX_TRAP_NEEDLE		:= SFX_225,
+	SFX_TRAP_POISON		:= SFX_206,
+	SFX_TRAP_EXPLOSION	:= SFX_208,
+	SFX_ANVIL		:= SFX_2B,
+	SFX_PICK		:= SFX_13B,
+	SFX_HAMMER		:= SFX_43,
+	SFX_GLASSBREAK4		:= SFX_42,
+	SFX_HARP_SUCC		:= SFX_46,
+	SFX_LUTE_SUCC		:= SFX_4D,
+	SFX_DRUM_SUCC		:= SFX_39,
+	SFX_TAMB_SUCC		:= SFX_53,
+	SFX_HARP_FAIL		:= SFX_47,
+	SFX_LUTE_FAIL		:= SFX_4E,
+	SFX_DRUM_FAIL		:= SFX_3A,
+	SFX_TAMB_FAIL		:= SFX_54
+endenum
+
+
+enum SFX_DOORS
+	SFX_OPEN_WOODEN_DOOR	:= SFX_EB,
+	SFX_CLOSE_WOODEN_DOOR	:= SFX_F2,
+	SFX_OPEN_METAL_DOOR	:= SFX_ED,
+	SFX_CLOSE_METAL_DOOR	:= SFX_F4
+endenum

Added: trunk/096/scripts/include/OLD/spellAttack.inc
===================================================================
--- trunk/096/scripts/include/OLD/spellAttack.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/spellAttack.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,14 @@
+function send_attack(ttarget, source, spellid := 0)
+  var ev := array;
+  ev.+type;
+  ev.+source;
+  ev.type := 0x0002;
+  ev.source := source;
+  SendEvent(ttarget, ev);
+  if (spellid)
+    ev.+spell;
+    ev.type := 0x0800;
+    ev.spell := spellid;
+    SendEvent(ttarget, ev);
+  endif
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/spellRestrictions.inc
===================================================================
--- trunk/096/scripts/include/OLD/spellRestrictions.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/spellRestrictions.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,593 @@
+use uo;
+use os;
+use cfgfile;
+use util;
+
+include &quot;include/fields&quot;;
+include &quot;include/client&quot;;
+include &quot;include/tileEffects&quot;;
+include &quot;include/sound&quot;;
+include &quot;include/objtype&quot;;
+include &quot;include/statMod&quot;;
+include &quot;include/firewall&quot;;
+include &quot;include/spellAttack&quot;;
+include &quot;include/dist&quot;;
+
+var caster;
+var npccfg := ReadConfigFile(&quot;::npcdesc&quot;);
+const EVID_DISCHARGE := 0x123457;
+
+
+function maincast(parms, delivery, circle, noto, id);
+  var cast_on;
+  var spellscroll := 0;
+  var scroll;
+  var tgtopt := TGTOPT_CHECK_LOS;
+  if(parms[1] == &quot;#MOB&quot;)
+    caster := parms[2];
+    if(mobspellcast(caster, circle, spellscroll) == 0)
+      return 0;
+    endif
+    cast_on := parms[3];
+  elseif (parms[1] == &quot;#scroll&quot;)
+    spellscroll := 1;
+    caster := parms[2];
+    EraseObjProperty(caster, &quot;IsMeditating&quot;);
+    EraseObjProperty(caster, &quot;HealTimer&quot;);
+    if(spellcast(caster, circle, spellscroll, id) == 0)
+      return 0;
+    endif
+    scroll := parms[3];
+    if(!ReserveItem(scroll))
+      SendSysMessage(caster,&quot;You lost your concentration.&quot;, 3, 40);
+      return 0;
+    endif
+    if(delivery == &quot;notarget&quot;)
+      cast_on := caster;
+      if(!can_cast(caster))
+        cast_on := 0;
+      endif
+    elseif(delivery == &quot;direct&quot;)
+      if(noto == &quot;helpful&quot;)
+        cast_on := CanTargetSpell(caster, circle, TGTOPT_HELPFUL | tgtopt);
+        if(!can_cast(caster))
+          cast_on := 0;
+        endif
+      elseif(noto == &quot;neutral&quot;)
+        cast_on := CanTargetSpell(caster, circle, TGTOPT_NEUTRAL | tgtopt);
+        if(!can_cast(caster))
+          cast_on := 0;
+        endif
+      else
+        cast_on := CanTargetSpell(caster, circle, TGTOPT_HARMFUL | tgtopt);
+        if(!can_cast(caster))
+          cast_on := 0;
+        endif
+      endif
+      if(!cast_on)
+        return 0;
+      endif
+    elseif(delivery == &quot;indirect&quot;)
+      cast_on := CanTargetArea(caster, circle);
+      if(!can_cast(caster))
+        cast_on := 0;
+      endif
+      if (!cast_on)
+        return 0;
+      endif
+    else
+      return 0;
+    endif
+  else
+    caster := parms;
+    EraseObjProperty(caster, &quot;IsMeditating&quot;);
+    EraseObjProperty(caster, &quot;HealTimer&quot;);
+    if (spellcast(caster, circle, spellscroll, id) == 0)
+      return 0;
+    endif
+    if (!ConsumeReagents(caster, id+100))
+      SendSysMessage(caster, &quot;You do not have the proper reagents.&quot;);
+      return 0;
+    endif
+    if(delivery == &quot;notarget&quot;)
+      cast_on := caster;
+      if(!can_cast(caster))
+        cast_on := 0;
+      endif
+    elseif(delivery == &quot;direct&quot;)
+      if(noto == &quot;helpful&quot;)
+        cast_on := CanTargetSpell(caster, circle, TGTOPT_HELPFUL | tgtopt);
+        if(!can_cast(caster))
+          cast_on := 0;
+        endif
+      elseif(noto == &quot;neutral&quot;)
+        cast_on := CanTargetSpell(caster, circle, TGTOPT_NEUTRAL | tgtopt);
+        if(!can_cast(caster))
+          cast_on := 0;
+        endif
+      else
+        cast_on := CanTargetSpell(caster, circle, TGTOPT_HARMFUL | tgtopt);
+        if(!can_cast(caster))
+          cast_on := 0;
+        endif
+      endif
+      if (!cast_on)
+        return 0;
+      endif
+    elseif(delivery == &quot;indirect&quot;)
+      cast_on := CanTargetArea(caster, circle);
+      if(!can_cast(caster))
+        cast_on := 0;
+      endif
+      if (!cast_on)
+        return 0;
+      endif
+    else
+      return 0;
+    endif
+  endif
+  if(newusemana(caster, circle, cast_on, delivery) == 0)
+    PlaySoundEffect(caster,0x005d);
+    PlayObjectCenteredEffect(caster, 0x3735,0x0a, 0x1e);
+    return 0;
+  endif
+  if(spellscroll == 1)
+    if(!SubtractAmount(scroll, 1))
+      return 0;
+    endif
+  endif
+  var points := getpoints(circle, spellscroll, SKILLID_MAGERY);
+  //AwardRawSkillPoints(caster, SKILLID_MAGERY, points);
+  var newparms := {};
+  newparms[1] := caster;
+  newparms[2] := cast_on;
+  return newparms;
+endfunction
+
+function can_cast(who)
+  var hand1 := (GetEquipmentByLayer(who, 1));
+  var hand2 := (GetEquipmentByLayer(who, 2));
+  if(hand1)
+    if(hand1.graphic != 0x0efa)
+      SendSysMessage(who,&quot;You can't cast spells with things in your hands.&quot;, 3, 40);
+      return 0;
+    endif
+  endif
+  if(hand2)
+    if(hand2.graphic != 0x0efa)
+      SendSysMessage(who,&quot;You can't cast spells with things in your hands.&quot;, 3, 40);
+      return 0;
+    endif
+  endif
+  return 1;
+endfunction
+
+function CanTargetSpell(caster, circle, targopt := (TGTOPT_NEUTRAL | TGTOPT_CHECK_LOS) )
+  circle := circle; // stops ecompile &quot;not used&quot; warning
+  if(!can_cast(caster))
+    return 0;
+  endif
+  var cast_on := Target(caster, targopt);
+  if(!cast_on)
+    return 0;
+  endif
+  if(cast_on.hidden)
+    SendSysMessage(caster,&quot;You can't see that.&quot;, 3, 40);
+    return 0;
+  endif
+  if(dist(caster, cast_on) &gt;= 12)
+    SendSysMessage(caster, &quot;That is too far away.&quot;, 3, 40);
+    return 0;
+  endif
+  return cast_on;
+endfunction
+
+function CanTargetArea(caster, circle)
+  circle := circle; // stops ecompile &quot;not used&quot; warning
+  if (!can_cast(caster))
+    return 0;
+  endif
+  var cast_loc := TargetCoordinates(caster);
+  if (!cast_loc.x)
+    return 0;
+  endif
+  if (!CheckLosAt(caster, cast_loc.x, cast_loc.y, cast_loc.z))
+    SendSysMessage(caster, &quot;You can't see that.&quot;, 3, 40);
+    return 0;
+  endif
+  if(coordist(caster.x, caster.y, cast_loc.x, cast_loc.y) &gt;= 12)
+    SendSysMessage(caster, &quot;That is too far away.&quot;, 3, 40);
+    return 0;
+  endif
+  return cast_loc;
+endfunction
+
+function Reflected(cast_on)
+  var mr := CInt(GetObjProperty(cast_on, &quot;mr&quot;));
+  if(mr &gt;= 1)
+    PlaySoundEffect(cast_on, SFX_SPELL_MAGIC_REFLECTION);
+    PlayObjectCenteredEffect(cast_on, FX_CURSE_EFFECT, 10,10);
+    SendSysMessage(cast_on, &quot;Your magic reflect spell saved you!&quot;);
+    if(mr == 1)
+      EraseObjProperty(cast_on, &quot;mr&quot;);
+    elseif(mr == 2)
+      var holder, pid;
+      var eqp := GetObjProperty(cast_on, &quot;EquipTimers&quot;);
+      foreach thing in ListEquippedItems(cast_on)
+        foreach entry in eqp
+          if((thing.serial == entry[1]) and (entry[2] == &quot;ref&quot;))
+            holder := GetObjProperty(thing, &quot;pid&quot;);
+            break;
+          endif
+        endforeach
+      endforeach
+      pid := getprocess(holder);
+      if(pid)
+        var k := struct;
+        k.+type := EVID_DISCHARGE;
+        pid.sendevent(k);
+      else
+        EraseObjProperty(cast_on, &quot;mr&quot;);
+      endif
+    endif
+    return 1;
+  endif
+  return 0;
+endfunction
+
+function Resisted(circle, caster, cast_on, amt)
+	// Purpose: to check for resistance to spells cast upon a character
+	// called by: most spells
+	// returns: amount of damage not resisted?
+
+        var magery := CInt(AP_GetSkill(caster, SKILLID_MAGERY));
+        var evalint := CInt(AP_GetSkill(caster, SKILLID_EVALINT));
+        var resist := CInt(AP_GetSkill(cast_on, SKILLID_MAGICRESISTANCE));
+        
+        // chk1 relates to the resist ability.
+        var chk1 := (resist / 5);
+        // chk2 relates to the difficulty level
+        var chk2 := resist - (((magery - 20) / 5) + (circle * 5));
+        
+        if(chk1 &lt; 1)
+                chk1 := 1;
+        endif
+        if(chk2 &lt; 1)
+                chk2 := 1;
+        endif
+        
+        // What an odd construct.  
+        // If you're hit with an easy spell then you have a difficulty of your resist
+        var diff := 0;
+        if(chk1 &gt; chk2)
+                diff := chk1;
+        else
+                diff := chk2;
+        endif
+        
+        var points := getresistpoints(circle, cast_on, SKILLID_MAGICRESISTANCE);
+        if(cast_on.dead)
+                return 0;
+        endif
+        if(CheckSkill(cast_on, SKILLID_MAGICRESISTANCE, diff, points))
+                SendSysMessage(cast_on, &quot;You feel yourself resisting magical energy!&quot;);
+                PlaySoundEffect(cast_on, SFX_SPELL_WEAKEN);
+                PlayObjectCenteredEffect(cast_on, FX_CURSE_EFFECT, 5,5);
+                amt := (amt * 0.5);
+                if(amt &lt; 1)
+                        amt := 1;
+                endif
+        endif
+        var modamt := 1;
+        if(resist &gt; evalint)
+                modamt := (1 + ((evalint - resist) / 200.0));
+        elseif(evalint &gt; resist)
+                modamt := (1 + ((evalint - resist) / 500.0));
+        endif
+        amt := (amt * modamt);
+        return CInt(amt);
+endfunction
+
+
+function CalcSpellDamage(circle, caster, cast_on)
+  var die_string := circle+&quot;d8&quot;;
+  var dmg := RandomDiceRoll(die_string);
+  dmg := dmg + CInt(AP_GetSkill(caster, SKILLID_MAGERY)/10);
+  if(dmg &gt; (circle * 8))
+    dmg := circle * 8;
+  endif
+  return dmg;
+endfunction
+
+function CanTargetThing(caster, circle, targopt := TGTOPT_CHECK_LOS)
+  if (!can_cast(caster))
+    return 0;
+  endif
+  var cast_on := Target(caster, targopt);
+  if(!cast_on)
+    return;
+  endif
+  return cast_on;
+endfunction
+
+function spellcast(me, circle, scroll, id)
+  var spellcfg := ReadConfigFile(&quot;:spells:spells&quot;);
+  var val := SplitWords(spellcfg[id].val);
+  var times := CInt(val[1]);
+  var slp   := CInt(val[2]);
+  var mhp := AP_GetVital(me, &quot;Hits&quot;);
+  var umana, diff;
+  var n := 1;
+  if(scroll == 0)
+    case (circle)
+      1:   umana :=   4;     diff :=  10;
+      2:   umana :=   6;     diff :=  20;
+      3:   umana :=   9;     diff :=  30;
+      4:   umana :=  11;     diff :=  50;
+      5:   umana :=  14;     diff :=  60;
+      6:   umana :=  20;     diff :=  70;
+      7:   umana :=  40;     diff :=  85;
+      8:   umana :=  50;     diff :=  95;
+      9:   umana :=  75;     diff := 100;
+     10:   umana := 100;     diff := 100;
+    endcase
+  elseif(scroll == 1)
+    case (circle)
+      1:   umana :=   4;     diff := 10;
+      2:   umana :=   6;     diff := 10;
+      3:   umana :=   9;     diff := 10;
+      4:   umana :=  11;     diff := 20;
+      5:   umana :=  14;     diff := 30;
+      6:   umana :=  20;     diff := 50;
+      7:   umana :=  40;     diff := 60;
+      8:   umana :=  50;     diff := 70;
+      9:   umana :=  75;     diff := 85;
+     10:   umana := 100;     diff := 95;
+    endcase
+  else
+    return 0;
+  endif
+  if((mhp &gt; AP_GetVital(me, &quot;Hits&quot;)) &amp;&amp; ((RandomInt(99)+1) &gt; (AP_GetSkill(me, SKILLID_WRESTLING)/2)))
+    SendSysMessage(me,&quot;You lost your concentration.&quot;, 3, 40);
+    return 0;
+  endif
+  if (umana &gt; AP_GetVital(me, &quot;Mana&quot;))
+    me.frozen :=1;
+    PerformAction(me,ANIM_CAST_DIR);
+    sleepms(1200);
+    me.frozen :=0;
+    SendSysMessage(me,&quot;You do not have enough mana to cast that.&quot;, 3, 40);
+    PlaySoundEffect(me,0x005d);
+    PlayObjectCenteredEffect(me, 0x3735,0x0a, 0x1e);
+    return 0;
+  endif
+  if(can_cast(me))
+    me.frozen :=1;
+    for (n:=1; n&lt;=times; n:=n+1)
+      if((mhp &gt; AP_GetVital(me, &quot;Hits&quot;)) &amp;&amp; ((RandomInt(99)+1) &gt; (AP_GetSkill(me, SKILLID_WRESTLING)/2)))
+        SendSysMessage(me,&quot;You lost your concentration.&quot;, 3, 40);
+        PlaySoundEffect(me,0x005d);
+        PlayObjectCenteredEffect(me, 0x3735,0x0a, 0x1e);
+        me.frozen :=0;
+        return 0;
+      endif
+      PerformAction(me,ANIM_CAST_DIR);
+      sleepms(900);
+    endfor
+    if(slp)
+      sleepms(slp * 100);
+    endif
+    me.frozen :=0;
+    if (CheckSkill(me,SKILLID_MAGERY, diff, 0))
+      if((mhp &gt; AP_GetVital(me, &quot;Hits&quot;)) &amp;&amp; ((RandomInt(99)+1) &gt; (AP_GetSkill(me, SKILLID_WRESTLING)/2)))
+        SendSysMessage(me,&quot;You lost your concentration.&quot;, 3, 40);
+        return 0;
+      endif
+      return 1;
+    else
+      SendSysMessage(me,&quot;The spell fizzles.&quot;, 3, 40);
+      PlaySoundEffect(me,0x005d);
+      PlayObjectCenteredEffect(me, 0x3735,0x0a, 0x1e);
+      return 0;
+    endif
+  endif
+endfunction
+
+function newusemana(who, circle, cast_on, delivery)
+  if(delivery == &quot;direct&quot;)
+    if(!CheckLineOfSight(who, cast_on))
+      SendSysMessage(who, &quot;You can't see that.&quot;, 3, 40);
+      return 0;
+    endif
+  elseif(delivery == &quot;indirect&quot;)
+    if(!CheckLosAt(who, cast_on.x, cast_on.y, cast_on.z))
+      SendSysMessage(who, &quot;You can't see that.&quot;, 3, 40);
+      return 0;
+    endif
+  endif
+  if(cdist(who.x, who.y, cast_on.x, cast_on.y) &gt; 12)
+    var check := 0;
+    foreach thing in EnumerateItemsInContainer(who.backpack)
+      if(thing == cast_on)
+        check := 1;
+        break;
+      endif
+    endforeach
+    if(!check)
+      SendSysMessage(who,&quot;The target is out of range.&quot;, 3, 40);
+      return 0;
+    endif
+  endif
+  var umana;
+    case (circle)
+    1: umana :=  4;
+    2: umana :=  6;
+    3: umana :=  9;
+    4: umana := 11;
+    5: umana := 14;
+    6: umana := 20;
+    7: umana := 40;
+    8: umana := 50;
+  endcase
+  var mana := AP_GetVital(who, &quot;Mana&quot;);
+  if(mana &gt;= umana)
+    AP_SetVital(who, &quot;Mana&quot;, Cint(mana - umana));
+    return 1;
+  else
+    SendSysMessage(who,&quot;You do not have enough mana to cast that.&quot;, 3, 40);
+    return 0;
+  endif
+endfunction
+
+function mobspellcast(me, circle, scroll)
+  scroll := scroll; // stops ecompile &quot;not used&quot; warning
+  var diff, points, umana;
+  case(circle)
+    1:   diff := 10;     points :=  20;    umana :=   4;
+    2:   diff := 20;     points :=  40;    umana :=   6;
+    3:   diff := 30;     points :=  80;    umana :=   9;
+    4:   diff := 50;     points := 100;    umana :=  11;
+    5:   diff := 60;     points := 130;    umana :=  14;
+    6:   diff := 70;     points := 160;    umana :=  20;
+    7:   diff := 85;     points := 190;    umana :=  40;
+    8:   diff := 95;     points := 210;    umana :=  50;
+  endcase
+  if(umana &gt; AP_GetVital(me, &quot;Mana&quot;))
+    return 0;
+  endif
+  if(can_cast(me))
+    if(CheckSkill(me, SKILLID_MAGERY, (diff - 10), points))
+      return 1;
+    else
+      return 0;
+    endif
+  endif
+endfunction
+
+function getpoints(c, scroll, skillid)
+  var points;
+  var diff;
+  if(scroll == 1)
+    case(c)
+      1:   points :=  10; diff :=  0;
+      2:   points :=  20; diff := 10;
+      3:   points :=  20; diff := 10;
+      4:   points :=  40; diff := 20;
+      5:   points :=  60; diff := 30;
+      6:   points := 100; diff := 50;
+      7:   points := 120; diff := 60;
+      8:   points := 140; diff := 70;
+    endcase
+  else
+    case(c)
+      1:   points :=  20; diff := 20;
+      2:   points :=  40; diff := 30;
+      3:   points :=  80; diff := 40;
+      4:   points := 100; diff := 50;
+      5:   points := 120; diff := 60;
+      6:   points := 140; diff := 70;
+      7:   points := 160; diff := 86;
+      8:   points := 180; diff := 100;
+    endcase
+  endif
+  var skill := AP_GetSkill(caster, skillid);
+  if(skill &gt; (diff - 20))
+    if((skill - diff) &lt;= 5)
+      points := points;
+    elseif((skill - diff) &lt;= 10)
+      points := (points * 3) / 4;
+    elseif((skill - diff) &lt;= 15)
+      points := points / 2;
+    elseif((skill - diff) &lt;= 15)
+      points := points / 4;
+    else
+      points := 0;
+    endif
+  endif
+  return points;
+endfunction
+
+function getresistpoints(c, victim, skillid)
+  var points;
+  var diff;
+  case(c)
+    1:   points :=  20; diff := 20;
+    2:   points :=  40; diff := 30;
+    3:   points :=  80; diff := 40;
+    4:   points := 100; diff := 50;
+    5:   points := 120; diff := 60;
+    6:   points := 140; diff := 70;
+    7:   points := 160; diff := 86;
+    8:   points := 180; diff := 100;
+  endcase
+  var skill := AP_GetSkill(victim, skillid);
+  if(skill &gt; (diff - 20))
+    if((skill - diff) &lt;= 5)
+      points := points;
+    elseif((skill - diff) &lt;= 10)
+      points := (points * 3) / 4;
+    elseif((skill - diff) &lt;= 15)
+      points := points / 2;
+    elseif((skill - diff) &lt;= 15)
+      points := points / 4;
+    else
+      points := 0;
+    endif
+  endif
+  return points;
+endfunction
+
+function cdist(x1, y1, x2, y2)
+  var xd := x1 - x2;
+  var yd := y1 - y2;
+  if (xd &lt; 0)
+    xd := -xd;
+  endif
+  if (yd &lt; 0)
+    yd := -yd;
+  endif
+  if (xd &gt; yd)
+    return xd;
+  else
+    return yd;
+  endif
+endfunction
+
+function usemana(who, circle, cast_on)
+  if(cast_on.mobile)
+    if(!CheckLineOfSight(who, cast_on))
+      SendSysMessage(who, &quot;You can't see that.&quot;, 3, 40);
+      return 0;
+    endif
+  else
+    if(!CheckLosAt(who, cast_on.x, cast_on.y, cast_on.z))
+      SendSysMessage(who, &quot;You can't see that.&quot;, 3, 40);
+      return 0;
+    endif
+  endif
+  if(cdist(who.x, who.y, cast_on.x, cast_on.y) &gt; 12)
+    SendSysMessage(who,&quot;The target is out of range.&quot;, 3, 40);
+    return 0;
+  endif
+  var umana;
+  case (circle)
+    1: umana :=   4;
+    2: umana :=   6;
+    3: umana :=   9;
+    4: umana :=  11;
+    5: umana :=  14;
+    6: umana :=  20;
+    7: umana :=  40;
+    8: umana :=  50;
+    9: umana :=  75;
+   10: umana := 100;
+  endcase
+  var mana := AP_GetVital(who, &quot;Mana&quot;);
+  if(mana &gt;= umana)
+    var ms := AP_SetVital(who, &quot;Mana&quot;, Cint(mana - umana));
+    return 1;
+  else
+    SendSysMessage(who,&quot;You do not have enough mana to cast that.&quot;, 3, 40);
+    return 0;
+  endif
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/startEqp.inc
===================================================================
--- trunk/096/scripts/include/OLD/startEqp.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/startEqp.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,595 @@
+use uo;
+use cfgfile;
+use os;
+use util;
+
+include &quot;:attributes:attributes&quot;;
+
+var unique_items_created := {};
+var starteqp_cfg;
+var template;
+var magicspawnchance := 0;
+var magicadjustment  := 0;
+var making_starting_equipment := 0;
+
+var thecritter;
+
+function MakeLoot(corpse, lootgroup)
+  var npcdesc := ReadConfigFile(&quot;::npcdesc&quot;);
+  var elem := FindConfigElem(npcdesc, corpse.npctemplate);
+  var mprop, madj;
+  if(elem)
+    mprop := CInt(GetConfigInt(elem, &quot;Magicitemchance&quot;));
+    madj  := CInt(GetConfigInt(elem, &quot;MagicAdjustment&quot;));
+  else
+    mprop := 1;
+    if(corpse.objtype == 0x9e40)
+      case(CInt(GetObjProperty(corpse,&quot;level&quot;)))
+        1: madj := 0;
+        2: madj := 2;
+        3: madj := 4;
+        4: madj := 6;
+        5: madj := 8;
+      endcase
+    else
+      magicadjustment := 0;
+    endif
+  endif
+  if(AP_GetVital(corpse, &quot;Hits&quot;))
+    foreach thing in ListEquippedItems(corpse)
+      if(thing.objtype == 0xe75)
+        corpse := thing;
+        break;
+      endif
+    endforeach
+  endif
+  thecritter := corpse;
+  if(mprop)
+    magicspawnchance := 1;
+  else
+    if((corpse.objtype == 0x9e40) || (corpse.objtype == 0xe40))
+      magicspawnchance := 1;
+    else
+      magicspawnchance := 0;
+    endif
+  endif
+  magicadjustment  := madj;
+  starteqp_cfg := ReadConfigFile(&quot;::nlootgroup&quot;);
+  if(lootgroup)
+    CreateFromGroup(corpse, lootgroup);
+  else
+    var lootgroups := GetConfigStringArray(elem, &quot;lootgroup&quot;);
+    foreach str in lootgroups
+      CreateFromGroup(corpse, CInt(str));
+    endforeach
+  endif
+endfunction
+
+function CreateStartingEquipment(who, skillids)
+  making_starting_equipment := 1;
+  starteqp_cfg := ReadConfigFile(&quot;::starteqp&quot;);
+  foreach skillid in skillids
+    var skillname := GetSkillName(CInt(skillid));
+    CreateFromGroup(who.backpack, skillname);
+  endforeach
+  CreateFromGroup(who.backpack, &quot;all&quot;);
+endfunction
+
+function CreateFromGroup(who, group)
+  if(making_starting_equipment != 1)
+	starteqp_cfg := ReadConfigFile(&quot;::nlootgroup&quot;);
+  endif
+  var elem := starteqp_cfg[group];
+  foreach str in GetConfigStringArray(elem, &quot;Stack&quot;)
+    CreateFromStackString(who, str);
+  endforeach
+  foreach str in GetConfigStringArray(elem, &quot;Item&quot;)
+    CreateFromItemString(who, str);
+  endforeach
+  foreach str in GetConfigStringArray(elem, &quot;Random&quot;)
+    CreateFromRandomString(who, str);
+  endforeach
+  foreach str in GetConfigStringArray(elem, &quot;Group&quot;)
+    CreateFromGroup(who, str);
+  endforeach
+  foreach str in GetConfigStringArray(elem, &quot;Unique&quot;)
+    CreateFromUniqueString(who, str);
+  endforeach
+endfunction
+
+function GetSkillName(skillid)
+  var cfg := ReadConfigFile(&quot;::skills&quot;);
+  return cfg[skillid].name;
+endfunction
+
+function CreateFromItemString(who, str)
+  var params := SplitWords(str);
+  var count, objname, color, chance;
+  var colors := ReadConfigFile(&quot;::colors&quot;);
+  count := RandomDiceRoll(CStr(params[1]));
+  params[1] := params[2];
+  params[2] := params[3];
+  params[3] := params[4];
+  if (!count)
+    count := 1;
+  endif
+  objname := params[1];
+  if(CInt(params[2]))
+    color := CInt(params[2]);
+  elseif (params[2])
+    color := 0;
+    var colorg := FindConfigElem(colors, params[2]);
+    if(colorg)
+      var str := GetConfigStringArray(colorg, &quot;color&quot;);
+	  var ar := {};
+	  var rndint := RandomInt(len(str)) + 1;
+	  ar := SplitWords(str[rndint]);
+	  if(len(ar) &gt; 1)
+	    if(CInt(ar[2]) &gt; 0)
+	      color := RandomInt(CInt(ar[2]) - CInt(ar[1]))+1;
+	    else
+	      color := CInt(str[RandomInt(len(str))+1]);
+	    endif
+	  else
+            color := CInt(str[RandomInt(len(str))+1]);
+	  endif
+	  if(color == 1)
+	    color := 0;
+	  endif
+    endif
+  endif
+  if (!color)
+    color := 0;
+  endif
+  if(CInt(params[3]))
+    chance := CInt(params[3]);
+  else
+    chance := 100;
+  endif
+  if(CInt(RandomInt(100)+1) &lt;= CInt(chance))
+    var i, canbemagic;
+    for(i:=1; i&lt;=CInt(count); i:=i+1)
+      if (CInt(objname))
+        objname := CInt(objname);
+      endif
+      var item := CreateItemInContainer(who, objname);
+      item.color := color;
+      if(making_starting_equipment)
+        item.newbie := 1;
+        continue;
+      endif
+      if( (item.graphic in array( 0xdf2, 0xdf3, 0xdf4, 0xdf5, 0x13f9 )) &amp;&amp; (magicspawnchance == 1))
+        ProcessWand(item);
+      else
+        if(magicspawnchance == 1)
+          canbemagic := MagicAllowedandType(objname);
+          case(canbemagic)
+            1: WeaponTable(item);
+            2: ArmorTable(item);
+            3: ClothTable(item);
+          endcase
+        endif
+      endif
+    endfor
+  endif
+endfunction
+
+function ProcessWand(item)
+  var amt;
+  case(RandomInt(10) + 1)
+    1: amt :=  15;   SetObjProperty(item, &quot;SpellId&quot;,  1);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of clumsiness&quot;);
+    2: amt :=  15;   SetObjProperty(item, &quot;SpellId&quot;,  3);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of feeblemindedness&quot;);
+    3: amt :=  15;   SetObjProperty(item, &quot;SpellId&quot;,  4);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of healing&quot;);
+    4: amt :=  15;   SetObjProperty(item, &quot;SpellId&quot;,  8);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of weakness&quot;);
+    5: amt :=  10;   SetObjProperty(item, &quot;SpellId&quot;, 12);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of harming&quot;);
+    6: amt :=   5;   SetObjProperty(item, &quot;SpellId&quot;, 18);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of fireballs&quot;);
+    7: amt :=   5;   SetObjProperty(item, &quot;SpellId&quot;, 29);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of greater healing&quot;);
+    8: amt :=   3;   SetObjProperty(item, &quot;SpellId&quot;, 30);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of lightning&quot;);
+    9: amt :=  10;   SetObjProperty(item, &quot;SpellId&quot;, 31);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of mana draining&quot;);
+   10: amt := 100;   SetObjProperty(item, &quot;SpellId&quot;, 65);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of identification&quot;);
+  endcase
+  SetObjProperty(item, &quot;charges&quot;, (amt + RandomInt(10)));
+  item.usescript := &quot;:wands:magicWands&quot;;
+  var dsc;
+  if(item.objtype == 0x13f9)
+    dsc := &quot;gnarled staff&quot;;
+  else
+    dsc := &quot;wand&quot;;
+  endif
+  SetName(item, &quot;a magic &quot; + dsc);
+endfunction
+
+function ClothTable(item)
+  var val := RandomInt(19) + 1;
+  if(val &gt;= 14)
+    var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
+    SetObjProperty(item, &quot;charges&quot;, charges);
+    SetObjProperty(item, &quot;type&quot;, &quot;sight&quot;);
+    SetObjProperty(item, &quot;damagemod&quot;, &quot; of nightsight&quot;);
+  elseif(val &gt;= 11)
+    var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
+    SetObjProperty(item, &quot;charges&quot;, charges);
+    SetObjProperty(item, &quot;type&quot;, &quot;protection&quot;);
+    SetObjProperty(item, &quot;damagemod&quot;, &quot; of protection&quot;);
+  elseif(val &lt;= 8)
+    var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
+    SetObjProperty(item, &quot;charges&quot;, charges);
+    SetObjProperty(item, &quot;type&quot;, &quot;strength&quot;);
+    SetObjProperty(item, &quot;damagemod&quot;, &quot; of strength&quot;);
+  elseif(val &gt; 5)
+    var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
+    SetObjProperty(item, &quot;charges&quot;, charges);
+    SetObjProperty(item, &quot;type&quot;, &quot;invisibility&quot;);
+    SetObjProperty(item, &quot;damagemod&quot;, &quot; of invisibility&quot;);
+  elseif(val == 3)
+    var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
+    SetObjProperty(item, &quot;charges&quot;, charges);
+    SetObjProperty(item, &quot;type&quot;, &quot;blessing&quot;);
+    SetObjProperty(item, &quot;damagemod&quot;, &quot; of blessing&quot;);
+  else
+    var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
+    SetObjProperty(item, &quot;charges&quot;, charges);
+    SetObjProperty(item, &quot;type&quot;, &quot;reflect&quot;);
+    SetObjProperty(item, &quot;damagemod&quot;, &quot; of magic reflection&quot;);
+  endif
+  AddName(item);
+endfunction
+
+function ArmorTable(item)
+  var newarray := {1, 2};
+  var count := RandomInt(99) + 1;
+  var counter;
+  if(count &gt;= 40)
+    counter := 1;
+  else
+    counter := 2;
+  endif
+  count := 0;
+  var num;
+  while(count &lt;= counter)
+    num := RandomInt(99) + 1;
+    if(num &gt;=  50)
+      num := 1;
+    else
+      num := 2;
+    endif
+    case(num)
+      1: ApplyHPMod(item);
+      2: ApplyARMod(item);
+    endcase
+    newarray.erase(num);
+    count := count + 1;
+  endwhile
+  if((RandomInt(10)+1) &lt;= 1)
+    ExtraArmorTable(item);
+  endif
+  AddName(item);
+endfunction
+
+function ExtraArmorTable(item)
+  var val := RandomInt(4) + 1;
+  case(val)
+    1: var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
+       SetObjProperty(item, &quot;charges&quot;, charges);
+       SetObjProperty(item, &quot;type&quot;, &quot;protection&quot;);
+       var dmgmod := GetObjProperty(item, &quot;damagemod&quot;);
+       if(dmgmod)
+         dmgmod := dmgmod + &quot; and protection&quot;;
+         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
+       else
+         dmgmod := &quot; of protection&quot;;
+         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
+       endif
+    2: var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
+       SetObjProperty(item, &quot;charges&quot;, charges);
+       SetObjProperty(item, &quot;type&quot;, &quot;strength&quot;);
+       var dmgmod := GetObjProperty(item, &quot;damagemod&quot;);
+       if(dmgmod)
+         dmgmod := dmgmod + &quot; and strength&quot;;
+         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
+       else
+         dmgmod := &quot; of strength&quot;;
+         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
+       endif
+    3:  var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
+       SetObjProperty(item, &quot;charges&quot;, charges);
+       SetObjProperty(item, &quot;type&quot;, &quot;blessing&quot;);
+       var dmgmod := GetObjProperty(item, &quot;damagemod&quot;);
+       if(dmgmod)
+         dmgmod := dmgmod + &quot; and blessing&quot;;
+         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
+       else
+         dmgmod := &quot; of blessing&quot;;
+         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
+       endif
+    4: var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
+       SetObjProperty(item, &quot;charges&quot;, charges);
+       SetObjProperty(item, &quot;type&quot;, &quot;reflect&quot;);
+       var dmgmod := GetObjProperty(item, &quot;damagemod&quot;);
+       if(dmgmod)
+         dmgmod := dmgmod + &quot; and magic reflection&quot;;
+         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
+       else
+         dmgmod := &quot; of magic reflection&quot;;
+         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
+       endif
+  endcase
+endfunction
+
+function WeaponTable(item)
+  var newarray := array(1, 2, 3);
+  var count := RandomInt(100) + 1;
+  var counter;
+  if(count &gt;= 60)
+    counter := 1;
+  elseif(count &gt;= 40)
+    counter := 2;
+  elseif(count &gt;= 10)
+    counter := 3;
+  else
+    counter := 4;
+  endif
+  if(counter == 1)
+    DestroyItem(item);
+    return;
+  endif
+  count := 0;
+  var num, val;
+  while(count &lt;= counter)
+    num := RandomInt(len(newarray)) + 1;
+    val := newarray[num];
+    case(val)
+      1: ApplyAccyMod(item);
+      2: ApplyHPMod(item);
+      3: ApplyDmgMod(item);
+    endcase
+    newarray.erase(num);
+    count := count + 1;
+  endwhile
+  AddName(item);
+endfunction
+
+function CreateFromRandomString(who, desc)
+  var params := SplitWords(desc);
+  var amt := Cint(params[1]);
+  var count := 1;
+  if(amt != 1)
+    count := RandomDiceRoll(Cstr(amt + 1));
+  endif
+  var group := params[2];
+  var chance := params[4];
+  var elem := FindConfigElem(starteqp_cfg, group);
+  if(elem == error)
+    syslog(&quot;Unable to find group &quot; + group);
+    return;
+  endif
+  var items := GetConfigStringArray(elem, &quot;Item&quot;);
+  if(items == error)
+    syslog(&quot;Group &quot; + group + &quot; does not contain items!&quot;);
+    return;
+  endif
+  if(!chance)
+    chance := 100;
+  endif
+  var rand := RandomInt(99)+1;
+  if(CInt(rand) &lt;= CInt(chance))
+    if(count &gt; len(items))
+      count := len(items);
+    endif
+    while(count)
+      var n := RandomInt(len(items)) + 1;
+      if(items[n])
+        CreateFromItemString(who, items[n]);
+        if(making_starting_equipment)
+          items[n] := &quot;&quot;;
+        endif
+        count := count - 1;
+      endif
+    endwhile
+  endif
+endfunction
+
+function CreateFromUniqueString(who, str)
+  var params := SplitWords(str);
+  var objtype;
+  if (CInt(params[1]))
+    objtype := params[1];
+  else
+    objtype := GetObjtypeByName(params[1]);
+  endif
+  if(!objtype)
+    syslog(&quot;Don't know what a &quot; + str + &quot; is&quot;);
+    return;
+  endif
+  if(objtype in unique_items_created)
+    return;
+  endif
+  unique_items_created[len(unique_items_created) + 1] := objtype;
+  var newstr := &quot;1 &quot; + str;
+  CreateFromItemString(who, newstr);
+endfunction
+
+function CreateFromStackString(who, str)
+  var params := SplitWords(str);
+  var count;
+  var objname;
+  var color;
+  var chance;
+  count := RandomDiceRoll(CStr(params[1]));
+  params[1] := params[2];
+  params[2] := params[3];
+  params[3] := params[4];
+  if (!count)
+    count := 1;
+  endif
+  objname := params[1];
+  if(CInt(params[2]))
+    color := CInt(params[2]);
+  else
+    color := 0;
+  endif
+  if (CInt(params[3]))
+    chance := CInt(params[3]);
+  else
+    chance := 100;
+  endif
+  var rand := RandomInt(100)+1;
+  if(CInt(rand) &lt;= CInt(chance))
+    if (CInt(objname))
+      objname := CInt(objname);
+    endif
+    var item := CreateItemInContainer(who, objname, count);
+    if(!item)
+      syslog(&quot;Unable to create &quot; + objname + &quot; on &quot; + who.name + &quot;.&quot;);
+    endif
+    item.color := color;
+    if(making_starting_equipment)
+      item.newbie := 1;
+    endif
+  endif
+endfunction
+
+function MagicAllowedandType(objname)
+  var magicweapcfg := ReadConfigFile(&quot;:combat:magicweaps&quot;);
+  var magicarmorcfg := ReadConfigFile(&quot;:combat:magicarmor&quot;);
+  var magicclothcfg := ReadConfigFile(&quot;:combat:magiccloth&quot;);
+  var elem1 := FindConfigElem(magicweapcfg, &quot;1&quot;);
+  var data1 := GetConfigInt(elem1, objname);
+  if(data1)
+    return 1;
+  endif
+  var elem2 := FindConfigElem(magicarmorcfg, &quot;1&quot;);
+  var data2 := GetConfigInt(elem2, objname);
+  if(data2)
+    return 2;
+  endif
+  var elem3 := FindConfigElem(magicclothcfg, &quot;1&quot;);
+  var data3 := GetConfigInt(elem3, objname);
+  if(data3)
+    return 3;
+  endif
+  return 0;
+endfunction
+
+function ApplyDmgMod(item)
+  var numb := ((RandomInt(100)+1) - magicadjustment);
+  if(numb &lt; 1)
+    numb := 1;
+  endif
+  if(numb &gt;= 50)
+    item.dmg_mod := 1;
+    SetObjProperty(item, &quot;damagemod&quot;, &quot;of ruin&quot;);
+  elseif(numb &gt;= 25)
+    item.dmg_mod := 3;
+    SetObjProperty(item, &quot;damagemod&quot;, &quot;of might&quot;);
+  elseif(numb &gt;= 15)
+    item.dmg_mod := 5;
+    SetObjProperty(item, &quot;damagemod&quot;, &quot;of force&quot;);
+  elseif(numb &gt;= 5)
+    item.dmg_mod := 7;
+    SetObjProperty(item, &quot;damagemod&quot;, &quot;of power&quot;);
+  elseif(numb &gt;= 1)
+    item.dmg_mod := 9;
+    SetObjProperty(item, &quot;damagemod&quot;, &quot;of vanquishing&quot;);
+  endif
+  SilverMod(item);
+endfunction
+
+function ApplyAccyMod(item)
+  var numb := ((RandomInt(100)+1) - magicadjustment);
+  if(numb &lt; 1)
+    numb := 1;
+  endif
+  var modifier := 0;
+  if(numb &gt;= 50)
+    modifier := 5;
+    SetObjProperty(item, &quot;accuracy&quot;, &quot;accurate&quot;);
+  elseif(numb &gt;= 25)
+    modifier := 10;
+    SetObjProperty(item, &quot;accuracy&quot;, &quot;surpassingly accurate&quot;);
+  elseif(numb &gt;= 15)
+    modifier := 15;
+    SetObjProperty(item, &quot;accuracy&quot;, &quot;eminently accurate&quot;);
+  elseif(numb &gt;= 5)
+    modifier := 20;
+    SetObjProperty(item, &quot;accuracy&quot;, &quot;exceedingly accurate&quot;);
+  elseif(numb &gt;= 1)
+    modifier := 25;
+    SetObjProperty(item, &quot;accuracy&quot;, &quot;supremely accurate&quot;);
+  endif
+  SetObjProperty(item, &quot;type&quot;, &quot;accuracy&quot;);
+  SetObjProperty(item, &quot;gain&quot;, modifier);
+endfunction
+
+function ApplyHPMod(item)
+  var numb := ((RandomInt(100)+1) - magicadjustment);
+  if(numb &lt; 1)
+    numb := 1;
+  endif
+  if(numb &gt;= 50)
+    item.maxhp_mod := item.maxhp_mod + 05;
+    SetObjProperty(item, &quot;durability&quot;, &quot;durable&quot;);
+  elseif(numb &gt;= 25)
+    item.maxhp_mod := item.maxhp_mod + 10;
+    SetObjProperty(item, &quot;durability&quot;, &quot;substantial&quot;);
+  elseif(numb &gt;= 15)
+    item.maxhp_mod := item.maxhp_mod + 15;
+    SetObjProperty(item, &quot;durability&quot;, &quot;massive&quot;);
+  elseif(numb &gt;= 5)
+    item.maxhp_mod := item.maxhp_mod + 20;
+    SetObjProperty(item, &quot;durability&quot;, &quot;fortified&quot;);
+  elseif(numb &gt;= 1)
+    item.maxhp_mod := item.maxhp_mod + 25;
+    SetObjProperty(item, &quot;durability&quot;, &quot;indestructable&quot;);
+  endif
+  item.hp := item.maxhp;
+endfunction
+
+function ApplyARMod(item)
+  var numb := ((RandomInt(100)+1) - magicadjustment);
+  if(numb &lt; 1)
+    numb := 1;
+  endif
+  if(numb &gt;= 50)
+    item.ar_mod := 5;
+    SetObjProperty(item, &quot;damagemod&quot;, &quot;of defense&quot;);
+  elseif(numb &gt;= 25)
+    item.ar_mod := 10;
+    SetObjProperty(item, &quot;damagemod&quot;, &quot;of guarding&quot;);
+  elseif(numb &gt;= 15)
+    item.ar_mod := 15;
+    SetObjProperty(item, &quot;damagemod&quot;, &quot;of hardening&quot;);
+  elseif(numb &gt;= 5)
+    item.ar_mod := 20;
+    SetObjProperty(item, &quot;damagemod&quot;, &quot;of fortification&quot;);
+  elseif(numb &gt;= 1)
+    item.ar_mod := 25;
+    SetObjProperty(item, &quot;damagemod&quot;, &quot;of invulnerability&quot;);
+  endif
+endfunction
+
+function SilverMod(item)
+  var numb := (RandomInt(10) + 1);
+  if(numb == 1)
+    var hits := GetObjProperty(item, &quot;OnHit&quot;);
+    if(!hits)
+      hits := {};
+    endif
+    hits.append(&quot;silverHit&quot;);
+    SetObjProperty(item, &quot;OnHit&quot;, hits);
+    SetObjProperty(item, &quot;silvermod&quot;, 1);
+  endif
+endfunction
+
+function AddName(item)
+  var currdesc := item.desc;
+  if(currdesc[1] == &quot;a&quot;)
+    var space := find(item.desc, &quot; &quot;, 1);
+    var newname := currdesc[space+1,len(item.desc)];
+    SetName(item,&quot;a magic &quot; + newname);
+  else
+    SetName(item, &quot;magic &quot; + currdesc);
+  endif
+endfunction
+
+

Added: trunk/096/scripts/include/OLD/statMod.inc
===================================================================
--- trunk/096/scripts/include/OLD/statMod.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/statMod.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,52 @@
+use uo;
+use util;
+
+include &quot;:attributes:attributes&quot;;
+
+function GetModAmount(magery)
+  var mod_amount := CInt(RandomInt(3) +(magery/10));
+  if(mod_amount &gt; 10)
+    mod_amount := 10;
+  endif
+  return mod_amount;
+endfunction
+
+function GetModDuration(magery)
+  var duration := CInt(60 +((magery / 30) * 60));
+  return(duration);
+endfunction
+
+function CanMod(who, stat)
+  var mod;
+  case(stat)
+    &quot;str&quot;: mod := &quot;#ss&quot;;
+    &quot;dex&quot;: mod := &quot;#dd&quot;;
+    &quot;int&quot;: mod := &quot;#ii&quot;;
+    &quot;p&quot;  : mod := &quot;#pp&quot;;
+    &quot;ar&quot; : mod := &quot;#ar&quot;;
+  endcase
+  if(GetObjProperty(who, mod))
+    return 0;
+  else
+    return 1;
+  endif
+endfunction
+
+function DoTempMod(who, stat, amt, duration)
+  var mod;
+  case(stat)
+    &quot;str&quot;:  mod := &quot;#ss&quot;;  AP_SetStatMod(who, &quot;Strength&quot;, AP_GetStatMod(who, &quot;Strength&quot;) + amt);
+    &quot;dex&quot;:  mod := &quot;#dd&quot;;  AP_SetStatMod(who, &quot;Dexterity&quot;, AP_GetStatMod(who, &quot;Dexterity&quot;) + amt);
+    &quot;int&quot;:  mod := &quot;#ii&quot;;  AP_SetStatMod(who, &quot;Intelligence&quot;, AP_GetStatMod(who, &quot;Intelligence&quot;) + amt);
+    &quot;ar&quot; :  mod := &quot;#ar&quot;;  who.ar_mod           := who.ar_mod + amt;
+	&quot;p&quot;  :  mod := &quot;#pp&quot;;  who.setParalyzed(1);
+  endcase
+  SetObjProperty(who,mod,1);
+  var parms := {};
+  parms[2] := who;
+  parms[1] := stat;
+  parms[3] := amt;
+  parms[4] := duration;
+  parms[5] := who.serial;
+  start_script(&quot;::/misc/unmod&quot;, parms);
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/std.inc
===================================================================
--- trunk/096/scripts/include/OLD/std.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/std.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,517 @@
+/***************************************************************************
+
+	STANDARD POL INCLUDE FILE v0.4
+
+	Last Update: 2001-03-02
+
+	This file is a collection of the most used (and useful) functions
+	available in the POL community. It's intended to be a replacement
+	for those include files that everyone has but were never released
+	to the public, providing a wide set of single functions.
+
+	This file is supposed to be kept by the community but administrated
+	by the one member. If you have a function to add to this file, or
+	have a code	tweak or optimization, don't hesitate to send an email to:
+	HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt;
+
+Functions (Alphabetical) List:
+		CreateStackArrayInContainer (container, objtype, amount, limit_per_stack := 60000)
+			- Creates a dynamic number os stacks into the given container,
+			based on the given amount, respecting a limit amount for each
+			stack.
+			Returns: array of ObjRefs to each created stack.
+			Examples:
+				CreateStackArrayInContainer(container, UOBJ_GOLDCOIN, 90000)
+					- Creates 2 piles of gold into the container, the first
+					with 60k coins, and the second with 30k coins.
+				CreateStackArrayInContainer(container, UOBJ_GOLDCOIN, 90000, 10000)
+					- Creates 9 piles of 10k gold into the container.
+
+		GetFormattedTime()
+			Returns: string containing the current in-game time in
+			military/internation format &quot;HH:MM&quot;.
+
+		GetGoldInContainer(container)
+			- Loops through the given container looking for gold stacks.
+			Returns: an array where the first element is the sum of gold
+				within the container, and the following elements are ObjRefs
+				to the gold piles found.
+			Example: if used at a container with 2 piles of 10k gold, the
+				function would return {20000, 1st_pile, 2nd_pile}.
+
+		GetSpelledTime()
+			Returns: string containing the spelled in-game time, just like
+			in OSI Shards.
+			Examples:
+				&quot;half past two in the morning.&quot;
+				&quot;eight o'clock at night.&quot;
+				&quot;midnight.&quot;
+
+		GetStacksOfTypeInContainer (container, objtype)
+			- Loops through the given container looking for item stacks from the
+			given objtype.
+			Returns: an array where the first element is the sum of items from the
+				given objtype within the container, and the following elements are
+				ObjRefs to the item stacks found.
+			Example: if used at a container with 2 stacks of 50 cloth, the function
+				would return {100, 1st_stack_of_cloth, 2nd_stack_of_cloth}.
+
+
+		GetStorageArea (areaname)
+			- Finds an storage area by name. If no matching storage area is found,
+			this function creates a new storage area with the given name.
+			Returns: reference to the storage area found or created.
+
+		GetStorageRoot (storage, rootname, objtype := 0x0E7C)
+			- Finds a container with the given name in the storage area.
+			If no matching root container is found, this function creates one
+			using the given objtype (default is a metalbox, like a bank box).
+			Returns: reference to the root container found or created.
+
+		GetStrAfter (needle, byref haystack)
+			- This function finds the first occurrence of needle within haystack
+			then returns the remaining characters in the string.
+			Returns: all characters found after needle in haystack.
+				GetStrAfter(&quot;this &quot;, &quot;this rocks&quot;) returns &quot;rocks&quot;;
+				GetStrAfter(&quot;sky &quot;, &quot;the sky is blue&quot;) returns &quot;is blue&quot;;
+
+		GetStrBefore (needle, byref haystack)
+			- This function finds the first occurrence of needle within haystack
+			then returns the preceding characters in the string.
+			Returns: all characters preceding needle in haystack.
+				GetStrBefore(&quot; &quot;, &quot;pol rocks&quot;) returns &quot;pol&quot;;
+				GetStrBefore(&quot; is &quot;, &quot;the sky is blue&quot;) returns &quot;the sky&quot;;
+
+		GetTimeOfDay()
+			Returns: elapsed seconds in the current UO day.
+
+		ListObjectsOfClassNearLocation(x, y, z, range, POLCLASS, flags := LISTEX_FLAG_NORMAL, realm := &quot;britannia&quot;)
+			- Returns an array of itemrefs of the specified POLCLASS;
+			- flags can be a set of LISTEX_* constants, and are only used
+			with POLCLASS_UOBJECT, POLCLASS_MOBILE and POLCLASS_NPC.
+			Returns: array of ObjRefs found.
+
+		MoveItemToForcedLocation(item, x, y, z)
+			- Moves item ignoring it's movable state.
+			Returns: nonzero if successful, error otherwise.
+
+		MoveItem(item, byref place, flags := MOVEITEM_NORMAL)
+			- Moves item either to a container or to a place depending of
+			the parameter passed. Item will be moved to a container if the
+			parameter is a ContainerRef, or a location if it's an array.
+			- flags can be a set of MOVEITEM_* constants.
+			- If an array of 2 integers is passed as the 'place' paramemter
+			this function finds an appropriated 3rd parameter to be the Z
+			coordinate of the location; since this parameter is passed byref
+			the original array will have the 3rd parameter set once the function
+			returns.
+			Possible usages:
+				MoveItem(item, TargetCoordinates(player));
+				MoveItem(item, {1234, 5678});
+				MoveItem(item, {1234, 5678, 9});
+				MoveItem(item, player.backpack);
+			Returns: nonzero if successfull, error if the item couldn't be
+				moved or if an invalid parameter was passed.
+
+		RandomListInt (tableref)
+			- Returns a random integer based on a special config file &quot;table&quot;.
+			The passed parameter must be a reference to a config file &quot;table&quot;.
+			The table is meant to be structured like this:
+
+				List [table name]
+				{
+					Count 4
+					Elem0		1	5
+					Elem1		6	10
+					Elem2		11	15
+					Elem3		16
+				}
+
+			Count counts the number of &quot;Elements&quot; within the table. The elements
+			are inserted starting by zero. Each element may hold either, a number
+			or a range. In the previous example, the first 3 elements are ranges,
+			and the fourth element is an unique number. This function will first
+			choose a random element, and then check if it's a range or an unique
+			number, if it's an unique number the function will return the number,
+			otherwise the function will return a random number within the specified
+			range. Note that number 16 has a 25% chance to be picked up, while
+			each number (inclusive) from 1 to 15 has a 5% chance (75%/15).
+			Possible usages:
+				RandomListInt(ReadConfigFile(&quot;::colors&quot;)[ALL_COLORS]);
+				RandomListInt(config[24]);
+			Returns: random integer.
+
+		Season (player, season_id)
+			- Use this function to set one's client-side season.
+			- Possible values for seasons:
+				SEASON_SUMMER	: Looks like &quot;old Britannia&quot;.
+				SEASON_FALL		: What it suggests.
+				SEASON_WINTER	: Ugly like a dog sucking mango.
+				SEASON_FELUCCA	: Chaotic look!
+				SEASON_SPRING	: Trammel, home of the care bears.
+			- Note that this function doesn't check the validity of the passed
+			season id, just because I don't want to sacrifice performance,
+			please use the constant values above to avoid problems.
+
+		SubtractFromStackArray (byref arrayofobjrefs, amount)
+			- Loops through the array of objects until the given amount of
+			items is subtracted, or the last item is destroyed. IE if 2 piles
+			of 10k gold are passed as the first argument, and 15000 is passed
+			as the second argument, the first pile will be destroyed and the
+			second pile will have 5000 gold subtracted from it.
+			- In case the array contains non-POL-items objects, those objects
+			are ignored.
+			Returns: amount of items successfully subtracted.
+
+		ToSextant(x, y)
+			Returns: a formated string containing the sextant coordinates
+				for the location; ie, 29o 52'N, 138o 57'W
+
+
+	A history of changes can be found at the end of this file.
+	The contants below can be adjusted to fit your Shard's design.
+
+***************************************************************************/
+
+const STD_DAY_LENGTH := 7200;	// A whole UO day in seconds (7200 is equivalent to 2 hours)
+const STD_GOLD := 0x0EED;		// ObjType for gold coins.
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-19
+// Required Modules: UO
+function CreateStackArrayInContainer (container, objtype, amount, limit_per_stack := 60000)
+	var result array;
+	for loops := 1 to (amount/limit_per_stack)
+		result.append(CreateItemInContainer(container, objtype, limit_per_stack));
+	endfor
+	result.append(CreateItemInContainer(container, objtype, amount-(amount/limit_per_stack)*limit_per_stack));
+	return result;
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
+// Required Modules: UO BASIC
+function GetFormattedTime()
+    var time := GetTimeOfDay();
+    var raw_time := 24.0/(CDbl(STD_DAY_LENGTH)/time);
+    var hours := CInt(raw_time);
+    var minutes := CInt((raw_time-hours)*60);
+    if (minutes &lt; 10)
+		minutes := &quot;0&quot;+minutes;
+    endif
+    if (hours &lt; 10)
+		hours := &quot;0&quot;+hours;
+    endif
+    return (hours+&quot;:&quot;+minutes);
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-18
+// Required Modules: UO
+function GetGoldInContainer (container)
+	var result := {0};
+	foreach item in EnumerateItemsInContainer(container)
+		if (item.objtype = STD_GOLD)
+			result.append(item);
+			result[1] := result[1]+item.amount;
+		endif
+	endforeach
+	return result;
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
+// Required Modules: UO BASIC
+// Dependencies: SpellHour(hours)
+function GetSpelledTime()
+	var time := GetTimeOfDay();
+    var raw_time := 24.0/(CDbl(STD_DAY_LENGTH)/time);
+    var hours := CInt(raw_time);
+    var minutes := CInt((raw_time-hours)*60);
+	var ext;
+	if (hours&lt;11)
+		ext := &quot; in the morning.&quot;;
+	elseif (hours&gt;11 and hours&lt;19)
+		ext := &quot; in the afternoon.&quot;;
+	else
+		ext := &quot; at night.&quot;;
+	endif
+	if (hours&gt;12)
+		hours := hours-12;
+	endif
+	if (minutes&lt;15)
+		if (!hours or hours=12)
+			return SpellHour(hours);
+		else
+			return SpellHour(hours)+&quot; o'clock&quot;+ext;
+		endif
+	elseif (minutes &gt; 14 and minutes &lt; 30)
+		if (!hours or hours=12)
+			return &quot;quarter past &quot;+SpellHour(hours);
+		else
+			return &quot;quarter past &quot;+SpellHour(hours)+ext;
+		endif
+	elseif (minutes &gt; 29 and minutes &lt; 45)
+		if (!hours or hours=12)
+			return &quot;half past &quot;+SpellHour(hours);
+		else
+			return &quot;half past &quot;+SpellHour(hours)+ext;
+		endif
+	else
+		if (!hours or hours=12)
+			return &quot;quarter to &quot;+SpellHour(hours+1);
+		else
+			return &quot;quarter to &quot;+SpellHour(hours+1)+ext;
+		endif
+	endif
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
+function SpellHour (hours)
+	case (hours)
+		0:	return &quot;midnight.&quot;;
+		1:	return &quot;one&quot;;
+		2:	return &quot;two&quot;;
+		3:	return &quot;three&quot;;
+		4:	return &quot;four&quot;;
+		5:	return &quot;five&quot;;
+		6:	return &quot;six&quot;;
+		7:	return &quot;seven&quot;;
+		8:	return &quot;eight&quot;;
+		9:	return &quot;nine&quot;;
+		10:	return &quot;ten&quot;;
+		11:	return &quot;eleven&quot;;
+		12:	return &quot;midday.&quot;;
+	endcase
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-18
+// Required Modules: UO
+function GetStacksOfTypeInContainer (container, objtype)
+	var result := {0};
+	foreach item in EnumerateItemsInContainer(container)
+		if (item.objtype = objtype)
+			result.append(item);
+			result[1] := result[1]+item.amount;
+		endif
+	endforeach
+	return result;
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
+// Required Modules: UO
+function GetStorageArea (areaname)
+	var area := FindStorageArea(areaname);
+	if (!area)
+		return CreateStorageArea(areaname);
+	endif
+	return area;
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
+// Required Modules: UO
+function GetStorageRoot (storage, rootname, objtype := 0x0E7C)
+	var item := FindRootItemInStorageArea(storage, rootname);
+	if (!item)
+		return CreateRootItemInStorageArea(storage, rootname, objtype);
+    endif
+	return item;
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
+// Required Modules: BASIC
+function GetStrAfter (needle, byref haystack)
+	return haystack[Find(haystack, needle, 1)+len(needle), len(haystack)];
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
+// Required Modules: BASIC
+function GetStrBefore (needle, byref haystack)
+	return haystack[1, Find(haystack, needle, 1)];
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
+// Required Modules: UO
+//function GetTimeOfDay()
+//    var time := ReadGameClock();
+//	return (time-((time/STD_DAY_LENGTH)*STD_DAY_LENGTH));
+//endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
+// Required Modules: UO
+// Notes: POLCLASS_UOBJECT will return both, mobiles and items.
+// This function is limited and it'd be a good idea to have core support for it.
+function ListObjectsOfClassNearLocation (x, y, z, range, POLCLASS, flags := LISTEX_FLAG_NORMAL, realm := &quot;britannia&quot;)
+	case (POLCLASS)
+		POLCLASS_UOBJECT:
+			return ListObjectsInBox(x-range, y+range, z-10, x+range, y-range, z+10, realm);
+		POLCLASS_MOBILE: //I'll separate it from POLCLASS_NPC for performance purposes.
+			return ListMobilesNearLocationEx(x, y, z, range, flags, realm);
+		POLCLASS_NPC:
+			var result array;
+			foreach mobile in ListMobilesNearLocationEx(x, y, z, range, flags, realm)
+				if (mobile.isa(POLCLASS_NPC)) result.append(mobile); endif
+			endforeach
+			return result;
+		default:
+			var result array;
+			foreach item in ListItemsNearLocation(x, y, z, range, realm)
+				if (item.isa(POLCLASS)) result.append(item); endif
+			endforeach
+			return result;
+	endcase
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
+// Required Modules: UO
+// This function forces the move in every aspect: using MOVEITEM_FORCELOCATION
+// and setting the item movable state to 1 if it's zero. The movable state is
+// set back to it's original state.
+function MoveItemToForcedLocation (item, x, y, z)
+	if (!item.movable)
+		item.movable := 1;
+		var result := MoveItemToLocation(item, x, y, z, MOVEITEM_FORCELOCATION);
+		item.movable := 0;
+		return result;
+	endif
+	return MoveItemToLocation(item, x, y, z, MOVEITEM_FORCELOCATION);
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
+// Required Modules: UO
+function MoveItem (item, byref place, flags := MOVEITEM_NORMAL)
+	if (place.isa(POLCLASS_CONTAINER))
+		return MoveItemToContainer(item, place);
+	elseif (place=array)
+		case (place.size())
+			0:1:
+				var result := error;
+				result.+errortext := &quot;Parameter place has less than 2 elements.&quot;
+				return result;
+			2:
+				place[3] := GetWorldHeight(place[1], place[2], item.realm);
+				continue;
+			default:
+				return MoveItemToLocation(item, place[1], place[2], place[3], flags);
+		endif
+	endif
+	var result := error;
+	result.+errortext := &quot;Invalid place: expected an ContainerRef or Array, got &quot;+place+&quot;.&quot;;
+	return result;
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2001-01-17
+// Required Modules: BASIC CFGFILE UTIL
+function RandomListInt (tableref)
+	var elem := SplitWords(GetConfigString(tableref, &quot;Elem&quot;+RandomInt(tableref.Count)));
+	elem[1] := CInt(elem[1]);
+	if (elem.Size()=1)
+		return elem[1];
+	else
+		return RandomInt(CInt(elem[2])-elem[1])+elem[1];
+	endif
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2001-03-02
+// Required Modules: UO
+const SEASON_SUMMER		:= 1;
+const SEASON_FALL		:= 2;
+const SEASON_WINTER		:= 3;
+const SEASON_FELUCCA	:= 4;
+const SEASON_SPRING		:= 5;
+function Season (player, season_id)
+	// Doesn't support cursor customization, yet.
+	SendPacket(player, &quot;BC0&quot;+season_id+&quot;01&quot;);
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-18
+// Required Modules: UO
+function SubtractFromStackArray (byref arrayofobjrefs, amount)
+	var needed := amount;
+	foreach item in arrayofobjrefs
+		if (!item.isa(POLCLASS_ITEM)) continue; endif
+		if (item.amount&lt;needed)
+			needed := needed-item.amount;
+			SubtractAmount(item, item.amount);
+		else
+			SubtractAmount(item, needed);
+			return amount;
+		endif
+	endforeach
+	return (amount-needed);
+endfunction
+
+// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
+// Required Modules: UO BASIC MATH
+// Note: For some (rare) coords this function returns the minutes with 1 tile off OSI's.
+// Each cartesian coord still have an unique sextant coord though (shouldn't be a problem).
+// OSI uses a special rounding function for it.
+function ToSextant(x, y)
+	var latitude_direction, longitude_direction;
+	var latitude_degrees, longitude_degrees;
+	var latitude_minutes, longitude_minutes;
+
+	latitude_degrees := (y-1624)*0.087890625;
+	longitude_degrees := (x-1323)*0.0703125;
+
+	if (latitude_degrees &lt; 0)
+		latitude_direction := &quot;N&quot;;
+	else
+		latitude_direction := &quot;S&quot;;
+	endif
+
+	if (longitude_degrees &lt; 0)
+		longitude_direction := &quot;W&quot;;
+	else
+		longitude_direction := &quot;E&quot;;
+	endif
+
+	latitude_degrees := Abs(latitude_degrees);
+	longitude_degrees := Abs(longitude_degrees);
+
+	//The next lines get the first 2 digits from the decimal part of the real variables
+	//and multiply by 60, returning an integer.
+	latitude_minutes := ((((latitude_degrees-Floor(latitude_degrees))*100)*60)/100);
+	longitude_minutes := ((((longitude_degrees-Floor(longitude_degrees))*100)*60)/100);
+
+	return(	Floor(latitude_degrees)+&quot;o &quot;+latitude_minutes+&quot;'&quot;+latitude_direction+&quot;, &quot;+
+			Floor(longitude_degrees)+&quot;o &quot;+longitude_minutes+&quot;'&quot;+longitude_direction);
+endfunction
+
+/***************************************************************************
+
+	HISTORY OF CHANGES
+
+	Version 0.1
+		- Added the followind functions:
+			GetFormattedTime();
+			GetSpelledTime();
+			GetStorageArea (byref areaname);
+			GetStorageRoot (storage, byref rootname, objtype := 0x0E7C);
+			GetStrAfter (byref needle, byref haystack);
+			GetStrBefore (byref needle, byref haystack);
+			GetTimeOfDay();
+			ListObjectsOfClassNearLocation(x, y, z, range, POLCLASS, flags := LISTEX_FLAG_NORMAL);
+			MoveItemToForcedLocation(item, x, y, z);
+			MoveItem(item, byref place, flags := MOVEITEM_NORMAL);
+			ToSextant(x, y);
+
+	Version 0.2
+		- Added function GetGoldInContainer(container).
+
+	Version 0.3
+		- Added History of Changes.
+		- Added function CreateStackArrayInContainer (container, objtype, amount, limit_per_stack := 60000).
+		- Added function GetStacksOfTypeInContainer (container, objtype).
+		- Added function SubtractFromStackArray (byref arrayofobjrefs, amount).
+		- Fixed a bug in GetGoldInContainer(container) that would generate a compilation error.
+		- Fixed a bug in MoveItem (item, byref place, flags := MOVEITEM_NORMAL).
+		- Small tweak on the design of GetGoldInContainer(container). Since POL arrays don't support
+		elements at index zero, the function was changed so the first element (index one) is the sum
+		of the amount of gold found within the container, and the following elements are objrefs to
+		the piles of gold.
+
+	Version 0.4
+		- Added RandomListInt(tableref).
+		- Added Season(player, season_id).
+		
+	Version 0.5
+		- Racalac added realm param to ListObjectsOfClassNearLocation
+
+***************************************************************************/

Added: trunk/096/scripts/include/OLD/stringArrays.inc
===================================================================
--- trunk/096/scripts/include/OLD/stringArrays.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/stringArrays.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,23 @@
+
+function array2string(thearray)
+        var retval;
+
+        foreach word in thearray
+                retval := retval + &quot; &quot; + thearray;
+        endforeach
+
+        retval := retval[2,1000000];
+
+        return retval;
+endfunction
+
+
+function string2array(thestring)
+
+        var retval := array;
+        retval := SplitWords(thestring);
+
+endfunction
+
+
+       
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/teleporters.inc
===================================================================
--- trunk/096/scripts/include/OLD/teleporters.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/teleporters.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,410 @@
+use uo;
+use os;
+use cfgfile;
+
+var teleporters := {
+////yew to t2a tunnel
+    { 312,   786,  -24,    5748,   361,    2},
+    { 313,   786,  -24,    5749,   361,    2},
+    { 314,   786,  -24,    5750,   361,    4},
+    {5748,   362,    2,     312,   787,  -24},
+    {5749,   362,    0,     313,   787,  -24},
+    {5750,   362,    3,     314,   787,  -24},
+           
+////jhelom teleporters
+    {1142,  3621,    5,    1414,  3828,    5},
+    {1406,  3996,    5,    1414,  3828,    5},
+    {1409,  3824,    5,    1124,  3623,    5},
+    {1419,  3832,    5,    1466,  4015,    5},
+
+//// moonglow teleporters
+    {4300,   968,    5,    4442,  1122,    5},
+    {4436,  1107,    5,    4300,   992,    5},
+    {4443,  1137,    5,    4487,  1475,    5},
+    {4449,  1107,    5,    4539,   890,   28},
+    {4449,  1115,    5,    4671,  1135,   10},
+    {4496,  1475,   15,    4442,  1122,    5},
+    {4540,   898,   32,    4442,  1122,    5},
+    {4663,  1134,   13,    4442,  1122,    5},
+
+////hedge maze
+    {1163,  2208,   60,    1171,  2202,    0},
+    {1165,  2205,   40,    1163,  2209,   60},
+    {1166,  2237,   60,    1163,  2208,    0},
+
+////destard
+//enterance
+    {1175,  2635,    0,    5242,  1006,    0},
+    {1176,  2635,    0,    5243,  1006,    0},
+    {1177,  2635,    0,    5244,  1006,    0},
+    {5242,  1007,    0,    1175,  2636,    0},
+    {5243,  1007,    0,    1176,  2636,    0},
+    {5244,  1007,    0,    1177,  2636,    0},
+//lvl1 - lvl2
+    {5129,   909,  -28,    5142,   798,   17},
+    {5130,   909,  -28,    5143,   798,   17},
+    {5131,   909,  -28,    5144,   798,   17},
+    {5132,   909,  -28,    5145,   798,   17},
+    {5142,   797,   22,    5129,   908,  -28},
+    {5143,   797,   22,    5130,   908,  -28},
+    {5144,   797,   22,    5131,   908,  -28},
+    {5145,   797,   22,    5132,   908,  -28},
+//lvl2 - lvl3 
+    {5153,   808,  -25,    5134,   984,   17},
+    {5153,   809,  -25,    5134,   985,   17},
+    {5153,   810,  -25,    5134,   986,   17},
+    {5153,   811,  -25,    5134,   987,   17},
+    {5133,   984,   22,    5152,   808,  -19},
+    {5133,   985,   22,    5152,   809,  -19},
+    {5133,   986,   22,    5152,   810,  -19},
+    {5133,   987,   22,    5152,   811,  -19},
+
+////shame
+//enterance
+    { 512,  1559,    0,    5394,   126,    0},
+    { 513,  1559,    0,    5395,   126,    0},
+    { 514,  1559,    0,    5396,   126,    0},
+    {5394,   127,    0,     512,  1560,    0},
+    {5395,   127,    0,     513,  1560,    0},
+    {5396,   127,    0,     514,  1560,    0},
+//lvl1 - lvl2
+    {5490,    19,  -30,    5514,    10,    0},
+    {5514,    10,    0,    5490,    19,  -30},
+//lvl2 - lvl3
+    {5604,   102,    5,    5514,   148,   25},
+    {5514,   148,   25,    5604,   102,    5},
+//lvl3 - lvl4
+    {5538,   170,    5,    5513,   176,    5},
+    {5513,   176,    5,    5538,   170,    5},
+//lvl4 - lvl5
+    {5507,   162,    5,    5875,    19,   -5},
+    {5875,    19,   -5,    5507,   162,    5},
+
+////deceit
+//enterance
+    {4110,   430,    5,    5187,   638,    0},
+    {4111,   430,    5,    5188,   638,    0},
+    {4112,   430,    5,    5189,   638,    0},
+    {5187,   639,    0,    4110,   431,    5},
+    {5188,   639,    0,    4111,   431,    5},
+    {5189,   639,    0,    4112,   431,    5},
+//lvl1 - lvl2
+    {5216,   587,  -18,    5304,   531,   12},
+    {5217,   587,  -18,    5305,   531,   12},
+    {5218,   587,  -18,    5306,   531,   12},
+    {5304,   530,   17,    5216,   586,  -13},
+    {5305,   530,   17,    5217,   586,  -13},
+    {5306,   530,   17,    5218,   586,  -13},
+//lvl2 - lvl3
+    {5346,   578,    5,    5137,   649,    5},
+    {5137,   649,    5,    5346,   578,    5},
+//lvl3 - lvl4
+    {5218,   761,  -28,    5305,   650,   12},
+    {5219,   761,  -28,    5306,   650,   12},
+    {5305,   649,   17,    5218,   760,    1},
+    {5306,   549,   17,    5219,   760,    1},
+
+////wrong
+//enterance
+    {2041,   215,   14,    5824,   630,    0},
+    {2042,   215,   14,    5825,   630,    0},
+    {2043,   215,   14,    5826,   630,    0},
+    {5824,   631,    0,    2041,   216,   14},
+    {5825,   631,    0,    2042,   216,   14},
+    {5826,   631,    0,    2043,   216,   14},
+//lvl1 - lvl2
+    {5826,   592,    0,    5690,   569,   25},
+    {5690,   569,   25,    5826,   592,    0},
+//lvl2 - lvl3
+    {5736,   551,   20,    5703,   639,    0},
+    {5698,   662,    0,    5736,   551,   20},
+
+////despise
+//enterance
+    {1296,  1080,    0,    5587,   630,   30},
+    {1296,  1081,    0,    5587,   631,   30},
+    {1296,  1082,    0,    5587,   632,   30},
+    {5588,   630,   30,    1297,  1080,    0},
+    {5588,   631,   30,    1297,  1081,    0},
+    {5588,   632,   30,    1297,  1082,    0},
+//lvl1 - lvl2
+    {5570,   628,   57,    5504,   569,   46},
+    {5570,   629,   57,    5504,   570,   46},
+    {5570,   630,   57,    5504,   571,   46},
+    {5505,   569,   41,    5571,   628,   52},
+    {5505,   570,   41,    5571,   629,   52},
+    {5505,   571,   41,    5571,   630,   52},
+//lvl2 - lvl3
+    {5571,   632,   12,    5522,   672,   32},
+    {5571,   633,   12,    5522,   673,   32},
+    {5571,   634,   12,    5522,   674,   32},
+    {5523,   672,   37,    5572,   632,   17},
+    {5523,   673,   37,    5572,   633,   17},
+    {5523,   674,   37,    5572,   634,   17},
+//lvl3 - lvl4
+    {5385,   755,  -13,    5410,   858,   57},
+    {5385,   756,  -13,    5410,   859,   57},
+    {5385,   757,  -13,    5410,   860,   57},
+    {5411,   858,   62,    5386,   755,   -8},
+    {5411,   859,   62,    5386,   756,   -8},
+    {5411,   860,   62,    5386,   757,   -8},
+
+////covetous
+//entrance
+    {5455,  1864,    0,    2498,   917,    0},
+    {5456,  1864,    0,    2499,   917,    0},
+    {5457,  1864,    0,    2500,   917,    0},
+    {2498,   916,    0,    5455,  1863,    0},
+    {2499,   916,    0,    5456,  1863,    0},
+    {2500,   916,    0,    5457,  1863,    0},
+//lvl1 - lvl2
+    {5392,  1959,    0,    2420,   883,    0},
+    {5393,  1959,    0,    2421,   883,    0},
+    {5394,  1959,    0,    2422,   883,    0},
+    {2420,   884,    0,    5392,  1958,    0},
+    {2421,   884,    0,    5393,  1958,    0},
+    {2422,   884,    0,    5394,  1958,    0},
+//lvl2 - lvl3
+    {2384,   836,    0,    5614,  1996,    0},
+    {2384,   837,    0,    5614,  1997,    0},
+    {2384,   838,    0,    5614,  1998,    0},
+    {5615,  1996,    0,    2385,   836,    0},
+    {5615,  1997,    0,    2385,   837,    0},
+    {5615,  1998,    0,    2385,   838,    0},
+//lvl3 - lvl4
+    {5388,  2027,    0,    2455,   859,    0},
+    {5389,  2027,    0,    2456,   859,    0},
+    {5390,  2027,    0,    2457,   859,    0},
+    {2455,   858,    0,    5388,  2026,    0},
+    {2456,   858,    0,    5389,  2026,    0},
+    {2457,   858,    0,    5390,  2026,    0},
+//lvl4 - lvl5
+    {2544,   846,    0,    5578,  1926,    0},
+    {2545,   846,    0,    5579,  1926,    0},
+    {2546,   846,    0,    5580,  1926,    0},
+    {5578,  1927,    0,    2544,   847,    0},
+    {5579,  1927,    0,    2545,   847,    0},
+    {5580,  1927,    0,    2546,   847,    0},
+//lvl5-lvl6a
+    {5556,  1827,  -15,    5551,  1805,   12},
+    {5557,  1827,  -15,    5552,  1805,   12},
+    {5551,  1804,   17,    5556,  1826,  -10},
+    {5552,  1804,   17,    5556,  1826,  -10},
+    {5552,  1804,   17,    5557,  1826,  -10},
+//lvl5 - lvl6b
+    {5595,  1840,  -14,    5466,  1804,   12},
+    {5595,  1841,  -14,    5466,  1805,   12},
+    {5465,  1804,   17,    5594,  1840,   -9},
+    {5465,  1805,   17,    5594,  1841,   -9},
+    {5465,  1805,   17,    5594,  1841,   -9},
+
+////hythloth
+//enterance
+    {5904,    17,   61,    4721,  3814,    0},
+    {5905,    17,   61,    4722,  3814,    0},
+    {5906,    17,   61,    4723,  3814,    0},
+    {4721,  3813,    0,    5904,    18,   56},
+    {4722,  3813,    0,    5905,    18,   56},
+    {4723,  3813,    0,    5906,    18,   56},
+//lvl1 - lvl2
+    {5905,    97,    0,    5976,   169,    0},
+    {5976,   169,    0,    5905,    97,    0},
+    {5976,   168,    0,    5905,    97,    0},
+    {5977,   169,    0,    5905,    97,    0},
+    {5977,   168,    0,    5905,    97,    0},
+//lvl2 - lvl3
+    {5922,   168,    7,    6081,   144,  -10},
+    {5922,   169,    7,    6081,   145,  -10},
+    {5922,   170,    7,    6081,   146,  -10},
+    {6080,   144,   -5,    5921,   169,   11},
+    {6080,   145,   -5,    5921,   169,   12},
+    {6080,   146,   -5,    5921,   169,   11},
+//lvl3 - lvl4
+    {6041,   192,    7,    6057,    87,   34},
+    {6041,   193,    7,    6057,    89,   34},
+    {6041,   194,    9,    6057,    90,   34},
+    {6056,    87,   39,    6040,   192,   12},
+    {6056,    89,   39,    6040,   193,   12},
+    {6056,    90,   39,    6040,   194,   12},
+
+////wind
+//enterance
+    {5166,   245,   15,    1361,   883,    0},
+    {1361,   883,    0,    5166,   245,   15},
+//NE exit
+    {5191,   152,    0,    1361,   883,    0},
+// wind - park
+    {5200,    71,   17,    5211,    22,   15},
+    {5217,    18,   15,    5200,    71,   17},
+    
+////ice dungeon
+//enterance
+    {5882,   241,    0,    1997,    81,    7},
+    {5882,   242,    0,    1997,    81,    7},
+    {5882,   243,    0,    1997,    81,    7},
+    {1997,    81,    7,    5881,   242,    0},
+//lvl1 - orc fort
+    {5849,   238,  -25,    5831,   324,   27},
+    {5850,   238,  -25,    5832,   324,   26},
+    {5851,   238,  -25,    5833,   324,   28},
+    {5852,   238,  -25,    5834,   324,   27},
+    {5853,   238,  -23,    5835,   324,   27},
+    {5831,   323,   34,    5849,   237,  -24},
+    {5832,   323,   34,    5850,   237,  -24},    
+    {5833,   323,   33,    5851,   237,  -24},    
+    {5834,   323,   33,    5852,   237,  -25},
+    {5835,   323,   33,    5853,   237,  -23},
+//lvl1 - lvl2
+    {5704,   145,  -45,    5705,   305,   12},
+    {5704,   146,  -45,    5705,   306,   12},   
+    {5704,   147,  -45,    5705,   307,   12},  
+    {5706,   303,   12,    5705,   146,  -45},
+    {5706,   304,   12,    5705,   146,  -45},
+    {5706,   305,   12,    5705,   146,  -45},
+    {5706,   306,   12,    5705,   147,  -45},
+    {5706,   307,   12,    5705,   147,  -45},
+    {5706,   308,   12,    5705,   147,  -45},
+//lvl1 - t2a exit
+    {5872,   144,   32,    5203,  2327,   27}, 
+    {5873,   144,   32,    5203,  2327,   27}, 
+    {5874,   144,   32,    5203,  2327,   27}, 
+    {5875,   144,   32,    5203,  2327,   27}, 
+    {5876,   144,   32,    5207,  2322,   27}, 
+    {5877,   144,   32,    5207,  2322,   27}, 
+    {5878,   144,   32,    5207,  2323,   26}, 
+    {5879,   144,   32,    5207,  2323,   26}, 
+    {5203,  2327,   27,    5874,   145,   30},
+    {5207,  2322, -255,    5875,   145,   30},
+    {5207,  2323, -255,    5876,   145,   30},
+
+////fire dungeon
+//enterance
+    {5827,  1502,    0,    2922,  3406,    8},
+    {5828,  1502,   -1,    2923,  3406,    9},
+    {5829,  1502,    2,    2924,  3406,    7},
+    {2922,  3405,    7,    5827,  1501,    0},
+    {2923,  3405,    6,    5828,  1501,    0},
+    {2924,  3405,    7,    5829,  1501,    1},
+//lvl1 - t2a exit
+    {5790,  1415,   39,    5758,  2907,   15},
+    {5790,  1416,   40,    5758,  2908,   15},
+    {5790,  1417,   38,    5758,  2909,   15},
+    {5757,  2907,   15,    5789,  1415,   42},
+    {5757,  2908,   14,    5789,  1416,   39},
+    {5757,  2909,   15,    5789,  1417,   38},
+//lvl1 - lvl2
+    {5786,  1335,  -13,    5701,  1318,    8},
+    {5787,  1335,  -13,    5702,  1318,    8},
+    {5788,  1335,  -13,    5703,  1318,    8},
+    {5701,  1319,   13,    5786,  1336,   -8},
+    {5702,  1319,   13,    5787,  1336,   -8},
+    {5703,  1319,   13,    5788,  1336,   -8},
+
+////volcano shop teleporter
+    {1653,  2963,    0,    1671,  2981,    0},
+    {1677,  2987,    0,    1675,  2987,   20},
+    
+////bucs den underground
+//enterance
+    {2674,  2242,    2,    2677,  2242,  -20},
+    {2676,  2242,  -18,    2675,  2242,    2},
+    {2676,  2242,  -18,    2675,  2242,    2},
+//exit
+    {2649,  2195,  -14,    2648,  2193,    4},
+    {2669,  2072,  -19,    2669,  2072,    5},
+    {2669,  2073,  -19,    2669,  2073,    5},
+
+////britain sewer
+//enterance
+    {6031,  1499,   35,    1490,  1640,   24},
+    {6031,  1501,   36,    1490,  1642,   24},
+    {1491,  1640,   24,    6032,  1499,   31},
+    {1491,  1642,   24,    6032,  1501,   31},
+//lvl1 - cave
+    {6140,  1431,    4,    6137,  1408,    2},
+    {6141,  1431,    4,    6138,  1408,    2},
+    {6137,  1409,    2,    6140,  1432,    4},
+    {6138,  1409,    2,    6141,  1432,    4},
+//cave - t2a exit
+    {6126,  1410,   15,    6074,  3333,    2},
+    {6127,  1410,   15,    6075,  3333,    2},    
+    {6074,  3332,    4,    6126,  1409,   13},
+    {6075,  3332,    4,    6127,  1409,   13},
+
+////minoc cave
+//enterance
+    {2399,   198,    0,    6087,  3675,   17},
+    {2400,   198,    0,    6087,  3676,   18},
+//exit to t2a
+    {6086,  3675,   15,    2399,   199,    0},
+    {6086,  3676,   16,    2400,   199,    0},
+
+////vesper graveyard
+//enterance
+    {2776,   894,  -23,    5685,   386,    1},
+    {2776,   895,  -23,    5685,   387,    2},
+    {5686,   386,    2,    2777,   894,  -23},
+    {5686,   387,    2,    2777,   895,  -23},
+//cave - t2a graveyard
+    {5658,   423,    8,    5697,  3659,    2},
+    {5697,  3660,   -5,    5658,   424,    0}, 
+
+////trinsic cave
+//enterance
+    {1628,  3320,    0,    5899,  1409,   41},
+    {1629,  3320,    0,    5900,  1409,   39}, 
+    {5898,  1411,   38,    1628,  3321,    0},
+    {5899,  1411,   43,    1628,  3321,    0},
+    {5900,  1411,   42,    1629,  3321,    0},
+//lvl1 - lvl2
+    {5918,  1410,  -29,    5962,  1407,   57},
+    {5918,  1411,  -29,    5962,  1408,   56},
+    {5918,  1412,  -29,    5962,  1409,   56},
+    {5961,  1407,   59,    5917,  1410,  -27},
+    {5961,  1408,   59,    5917,  1411,  -27},
+    {5961,  1409,   59,    5917,  1412,  -27},
+//lvl2 - west t2a
+    {6025,  1344,  -26,    5138,  3664,   31},
+    {6025,  1345,  -25,    5138,  3665,   32},
+    {6025,  1346,  -25,    5138,  3666,   32},
+    {5137,  3664,   27,    6024,  1345,  -25},
+    {5137,  3665,   31,    6024,  1346,  -25},
+//lvl2 - delucia
+    {6005,  1378,    0,    5151,  4062,   37},
+    {6005,  1379,    2,    5151,  4063,   37},
+    {6005,  1380,    1,    5151,  4064,   37},
+    {5150,  4062,   38,    6004,  1378,    1},
+    {5150,  4063,   38,    6004,  1379,   -1},
+    
+////terathan keep
+//enterance
+    {5426,  3122, -74,    5341,  1601,    0},
+    {5341,  1601,   0,    5426,  3121,  -65},
+
+////spirituality shrine
+    {1592,  2489,   17,    1600,  2489,   10},
+    {1600,  2489,   10,    1592,  2490,   17},
+    {1600,  2490,   10,    1592,  2490,   17}
+};
+
+function CreateTeleporters()
+  if(GetGlobalProperty(&quot;SystemTeleportersCreated&quot;) == 1)
+    return;
+  endif
+  foreach tele in teleporters
+    var fromx := tele[1];
+    var fromy := tele[2];
+    var fromz := tele[3];
+    var tox := tele[4];
+    var toy := tele[5];
+    var toz := tele[6];
+    var teleporter := CreateItemAtLocation(fromx, fromy, fromz, &quot;systemteleporter&quot;, 1, &quot;britannia&quot;); //FIXME realms
+    if(teleporter)
+      teleporter.graphic := 3948;
+      SetObjProperty(teleporter, &quot;DestX&quot;, tox);
+      SetObjProperty(teleporter, &quot;DestY&quot;, toy);
+      SetObjProperty(teleporter, &quot;DestZ&quot;, toz);
+    endif
+  endforeach
+  SetGlobalProperty(&quot;SystemTeleportersCreated&quot;, 1);
+endfunction

Added: trunk/096/scripts/include/OLD/tempMod.inc
===================================================================
--- trunk/096/scripts/include/OLD/tempMod.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/tempMod.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,44 @@
+use os;
+
+function do_temp_mod(who, mod, amt, duration)
+  var parms := {};
+  parms[2] := who;
+  parms[1] := mod;
+  parms[3] := amt;
+  parms[4] := duration;
+  start_script(&quot;::/misc/demod&quot;, parms);
+endfunction
+
+function can_stat_mod(who, stat)
+  var mod;
+  case(stat)
+    &quot;str&quot;: mod := &quot;#ss&quot;;
+    &quot;dex&quot; : mod := &quot;#dd&quot;;
+    &quot;int&quot; : mod := &quot;#ii&quot;;
+    &quot;ar&quot;  : mod := &quot;#aa&quot;;
+  endcase
+  if(GetObjProperty(who, mod))
+    return 0;
+  else
+    SetObjProperty(who, mod, 1);
+    return 1;
+  endif
+endfunction
+
+function allow_stat_mod(who, stat, duration)
+  Detach();
+  var mod;
+  case(stat)
+    &quot;str&quot;: mod := &quot;#ss&quot;;
+    &quot;dex&quot; : mod := &quot;#dd&quot;;
+    &quot;int&quot; : mod := &quot;#ii&quot;;
+    &quot;ar&quot;  : mod := &quot;#aa&quot;;
+  endcase
+  while(1)
+    sleep(duration);
+    if(who)
+      EraseObjProperty(who, mod);
+      return;
+    endif
+  endwhile
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/toolWear.inc
===================================================================
--- trunk/096/scripts/include/OLD/toolWear.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/toolWear.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,71 @@
+include &quot;:attributes:attributes_ex&quot;;
+
+function CheckToolWear (who, tool, skillid)
+  var swings := GetObjProperty(tool,&quot;swings&quot;);
+  if(!swings)
+    var mods := GetObjProperty(tool, &quot;durability&quot;);
+    var bonus := 0;
+    case(mods)
+      &quot;durable&quot;:        bonus := 10;
+      &quot;substantial&quot;:    bonus := 20;
+      &quot;massive&quot;:        bonus := 30;
+      &quot;fortified&quot;:      bonus := 40;
+      &quot;indestructable&quot;: bonus := 50;
+    endcase
+    swings := Cint(50 * tool.quality) + bonus;
+    SetObjProperty(tool,&quot;swings&quot;, swings);
+  endif
+  if(swings &lt;= 0)
+    DestroyItem(tool);
+    SendSysMessage(who,&quot;Your tool broke.&quot;);
+  else
+    var skill := GetAttribute(who, AP_SkillIdToAttributeName(skillid));
+    if(skill &gt; 80)
+      skill := 80;
+    elseif(skill &lt; 20)
+      skill := 20;
+    endif
+    if((RandomInt(100)+1) &gt; skill)
+      if(tool.isa(POLCLASS_WEAPON))
+        if(tool.hp &gt; 1)
+          SetObjProperty(tool,&quot;swings&quot;, (swings - 1));
+          tool.hp := tool.hp - 1;
+        elseif((tool.hp &gt; tool.maxhp) or (tool.hp == 1))
+          SendSysMessage(who,&quot;Your tool broke.&quot;);
+          DestroyItem(tool);
+        endif
+      else
+        SetObjProperty(tool,&quot;swings&quot;, (swings - 1));
+      endif   
+    endif
+  endif
+endfunction 
+
+function SetToolDurability(who, tool, skillid)
+
+  var toolfile := ReadConfigFile(&quot;:*:itemdesc&quot;);
+  var toolscript := toolfile[tool.objtype].Script;
+
+  if(!toolscript.errortext)
+    if(!tool.isA(POLCLASS_CONTAINER) &amp;&amp; !tool.isA(POLCLASS_ARMOR))
+      var myskill := GetEffectiveSkill(who, skillid);
+      var swings := 0;
+      var mods := GetObjProperty(tool, &quot;durability&quot;);
+      var bonus := 0;
+      case(mods)
+        &quot;durable&quot;:        bonus := 10;
+        &quot;substantial&quot;:    bonus := 20;
+        &quot;massive&quot;:        bonus := 30;
+        &quot;fortified&quot;:      bonus := 40;
+        &quot;indestructable&quot;: bonus := 50;
+        default: bonus := 0;
+      endcase
+      swings := Cint(50 + myskill) + bonus;
+      SetObjProperty(tool, &quot;swings&quot;, swings);
+      if(!tool.quality or tool.quality == error)
+        tool.quality := 1.0;
+      endif
+    endif
+  endif
+
+endfunction 

Added: trunk/096/scripts/include/OLD/utility.inc
===================================================================
--- trunk/096/scripts/include/OLD/utility.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/utility.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,49 @@
+use basic;
+
+include &quot;include/myUtil&quot;;
+
+
+function find_or_create_storage( areaname )
+  var area;
+  area := FindStorageArea( areaname );
+  if(!area)
+	area := CreateStorageArea( areaname );
+    if(area)
+    endif
+  endif
+  return area;
+endfunction
+
+function find_or_create_item(storage, name, objtype := 0x966a)
+  var item := FindRootItemInStorageArea(storage, name);
+  if(item)
+	return item;
+  endif
+  item := CreateRootItemInStorageArea( storage, name, objtype);
+  return item;
+endfunction
+
+function IsLocationAccessible(character, x, y, z)
+  var xd, yd, zd;
+  xd := character.x - x;
+  if(xd &lt; -1 || xd &gt; 1)
+    return 0;
+  endif
+  yd := character.y - y;
+  if(yd &lt; -1 || yd &gt; 1)
+    return 0;
+  endif
+  zd := character.z - z;
+  if(zd &lt; -10 || zd &gt; 10)
+    return 0;
+  endif
+  return CheckLosAt( character, x, y, z );
+endfunction
+
+function min(x, y)
+  if(x&lt;= y)
+    return x;
+  else
+    return y;
+  endif
+endfunction
\ No newline at end of file

Added: trunk/096/scripts/include/OLD/webPage.inc
===================================================================
--- trunk/096/scripts/include/OLD/webPage.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/OLD/webPage.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -0,0 +1,34 @@
+function OpenWebSite(who, url)
+	var packet := &quot;A5&quot; + WordPacket(Len(url) + 4);
+
+	foreach ascii_code in CAscZ(url)
+		packet:=packet+BytePacket(ascii_code);
+	endforeach
+	SendPacket(who, packet + &quot;00&quot;);
+
+	return;
+endfunction
+
+
+function BytePacket(byte)
+	var packet := Hex(byte);
+	packet := &quot;00&quot; + packet[3, Len(packet) - 2];
+
+	return (packet[Len(packet) - 1, 2]);
+endfunction
+
+
+function WordPacket(word)
+	var packet := Hex(word);
+	packet := &quot;0000&quot; + packet[3, Len(packet) - 2];
+
+	return (packet[Len(packet) - 3, 4]);
+endfunction
+
+
+function DoubleWordPacket(doubleword)
+	var packet := Hex(doubleword);
+	packet := &quot;00000000&quot; + packet[3, Len(packet) - 2];
+
+	return (packet[Len(packet) - 7, 8]);
+endfunction

Modified: trunk/096/scripts/include/arrays.inc
===================================================================
--- trunk/096/scripts/include/arrays.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/arrays.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -8,7 +8,123 @@
 use os;
 use uo;
 
+/*
+ * GetArrayRange(the_array, start, stop)
+ * 
+ * Purpose
+ * Retrieves a range from the array.
+ *
+ * Parameters
+ * the_array:	The array to extract data from.
+ * start:	Start index to get data from.
+ * stop:	End index to get data from.
+ *		If stop is 0, will go until the end of the array is reached.
+ *
+ * Return value
+ * Returns an array on success.
+ * Returns an error on failure.
+ *
+ */
+function GetArrayRange(byref the_array, start, stop:=0)
+	if ( Lower(TypeOf(the_array)) != &quot;array&quot; )
+		return error{&quot;errortext&quot;:=&quot;Object passed was not an array.&quot;};
+	endif
+	
+	start := CInt(start);
+	stop := CInt(stop);
 
+	if ( start &lt; 1 )
+		start := 1;
+	endif
+	if ( !stop )
+		stop := the_array.size();
+	elseif ( stop &gt; the_array.size() )
+		stop := the_array.size();
+	endif
+
+	var new_array := array{};
+	for ( start; start&lt;=stop; start:=start+1 )
+		new_array.append(the_array[start]);
+		sleepms(2);
+	endfor
+
+	return new_array;
+endfunction
+
+/* 
+ * BreakArray(the_array, size)
+ *
+ * Purpose
+ * Breaks an array up into smaller arrays.
+ *
+ * Parameters
+ * the_array:	The array that will be broken up.
+ * size:	Size of the new arrays.
+ *
+ * Return value
+ * Returns an array of arrays
+ * 
+ */
+function BreakArray(byref the_array, size:=1)
+	if ( Lower(TypeOf(the_array)) != &quot;array&quot; )
+		return error{&quot;errortext&quot;:=&quot;Object passed was not an array.&quot;};
+	endif
+	
+	if ( the_array.size() &gt; size )
+		var new_arrays := array();
+		var arrays_needed := Ceil(CDbl(the_array.size()) / CDbl(size));
+
+		var i := 1;
+		var start := i;
+		var stop := size;
+		for ( i; i&lt;=arrays_needed; i:=i+1 )
+			new_arrays.Append(GetArrayRange(the_array, start, stop));
+			start := stop+1;
+			stop := stop+size;
+			sleepms(2);
+		endfor
+
+		return new_arrays;
+	else
+		return array{the_array};
+	endif
+endfunction
+
+/*
+ * FindInArray(byref the_array, find_what) 
+ *
+ * Purpose
+ * Finds the first instance of something in an array.
+ *
+ * Parameters
+ * the_array:	Array to search.
+ * find_what:	What to look for.
+ * 
+ * Return value
+ * Returns &gt; 1 (the index) if it is found.
+ * Returns 0 if 'find_what' was not found.
+ *
+ */
+function FindInArray(byref the_array, find_what)
+	if ( Lower(TypeOf(the_array)) != &quot;array&quot; )
+		return error{&quot;errortext&quot;:=&quot;Object passed was not an array.&quot;};
+	endif
+	
+	foreach index in the_array
+		if ( index == find_what )
+			return _index_iter;
+		endif
+		sleepms(2);
+	endforeach
+	
+	return 0;
+endfunction
+
+
+/*-------------------
+  ( OLDER FUNCTIONS )
+  ------------------*/
+
 /**
  * GetIndex(byref the_array, byref to_find)
  *
@@ -65,7 +181,6 @@
 	
 endfunction
 
-
 /**
  * InsertElementInSortedArray(byref the_array, byref to_find)
  *

Deleted: trunk/096/scripts/include/bard.inc
===================================================================
--- trunk/096/scripts/include/bard.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/bard.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,39 +0,0 @@
-use uo;
-
-include &quot;include/client&quot;;
-include &quot;:attributes:attributes&quot;;
-
-function play(character, theskill, item, skil)
-  var success, fail;
-  case(item.graphic)
-    0x0eb1:  success := 0x44;  fail := 0x45;
-    0x0eb2:  success := 0x46;  fail := 0x47;
-    0x0eb3:  success := 0x4d;  fail := 0x4e;
-    0x0eb4:  success := 0x4d;  fail := 0x4e;
-    0x0e9c:  success := 0x39;  fail := 0x3a;
-    0x0e9d:  success := 0x53;  fail := 0x54;
-    0x0e9e:  success := 0x53;  fail := 0x54;
-  endcase
-  var thepoints := GetEffectiveSkill(character, SKILLID_MUSICIANSHIP);
-  if(CheckSkill(character, SKILLID_MUSICIANSHIP, theskill, thepoints))
-    if(CheckSkill(character, skil, theskill, thepoints * 2))
-      PlaySoundEffect( character, success);
-      return 1;
-    else
-      PlaySoundEffect( character, fail);
-      return 0;
-    endif
-  else
-    PlaySoundEffect( character, fail);
-    return 0;
-  endif
-endfunction
-
-function findinstrument(character)
-  var instruments := {0x0eb1, 0x0eb2, 0x0eb3, 0x0eb4, 0x0e9c, 0x0e9d, 0x0e9e};
-  foreach item in EnumerateItemsInContainer(character.backpack)
-    if(item.graphic in instruments)
-      return item;
-    endif
-  endforeach
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/bitwise.inc
===================================================================
--- trunk/096/scripts/include/bitwise.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/bitwise.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,475 +0,0 @@
-const CONST_E := 2.718282;
-const CONST_PI := 3.141592;
-
-
-function Log(base, answer)
-
-	var x := 1.000;
-	var logcount := 0.000;
-	var diff := 1.000;
-	var success := 0;
-
-	while (success == 0)
-
-		x := x * base;
-
-		if (Abs(answer - x) &lt; 0.001)
-			logcount := logcount + 1;
-			success := 1;
-		else
-			if (x &gt; answer)
-				diff := diff / 2;
-				logcount := logcount - diff;
-				x := Exp(base, logcount);
-			else
-				logcount := logcount + diff;
-			endif
-		endif
-
-		count := count + 1;
-
-		if (count &gt; 200)
-			success := 1;
-		endif
-
-	endwhile
-
-	return logcount;
-
-endfunction
-
-
-function Mod(numerator, denominator)
-
-	while (numerator &gt; denominator)
-		numerator := numerator - denominator;
-	endwhile
-
-	return numerator;
-
-endfunction
-
-
-function Trunc(number, places)
-
-	var base := Exp(10, places);
-
-	number := number * base;
-	number := CInt(number);
-	number := CDbl(number);
-	number := number / base;
-
-	return number;
-
-endfunction
-
-
-function Fac(factorial);
-
-	var x;
-	while (factorial &gt; 0)
-		x := x * factorial;
-		factorial := factorial - 1;
-	endwhile
-	return x;
-
-endfunction
-
-
-function Exp(base, power)
-
-	var i;
-	var x := 1;
-	var check := CInt(power);
-	if (power == check)
-		for(i:=1;i&lt;=power;i:=i+1)
-			x := x * base;
-		endfor
-		return x;
-	else
-		var m, n;
-		m := power - check;
-		m := m * 1000;
-		n := YRoot(base, 1000);
-		x := Exp(n, m);
-		return x;
-	endif
-
-endfunction
-
-
-function YRoot(x, y)
-
-
-	var i := 0.000;
-	var n := 0.000;
-	var root := 2.000;
-	var a := CInt(Sqr(x));
-
-	if (a &lt; 4)
-		a := 4;
-	endif
-
-	var success := 0;
-
-
-	while (success == 0)	
-
-		n := Exp(root, y);
-		i := x - n;
-		i := i / (a * root);
-		i := Trunc(i, 3);
-		root := root + i;
-		if (i == 0)
-			success := 1;
-			if ( Exp(Root, y) &gt; x )
-				root := root - 0.001;
-			endif
-			if ( Exp((root + 0.001), y) == x)
-				root := root + 0.001;
-			endif
-		endif
-	endwhile
-
-	return root;
-
-endfunction
-
-
-function Sqr(x)
-
-	var i := 0.000;
-	var n := 0.000;
-	var root := 2.000;
-	var success := 0;
-
-	while (success == 0)	
-
-		n := Exp(root, 2);
-		i := x - n;
-		i := i / (2 * root);
-		i := Trunc(i, 3);
-		root := root + i;
-		if (i == 0)
-			success := 1;
-			if ( Exp(Root, 2) &gt; x )
-				root := root - 0.001;
-			endif
-		endif
-	endwhile
-
-	return root;
-
-endfunction
-
-
-function Mean(arrayx)
-
-	var n, i:=0.000;
-
-	foreach n in arrayx
-		i := i + arrayx[n];
-	endforeach
-
-	n := CDbl(i / len(arrayx) );
-
-	return n;
-
-endfunction
-
-
-function StdDev(arrayx)
-
-	var m, n, i := 0.000;
-	var arraymean := Mean(arrayx);
-	var arraylen := len(arrayx);
-
-	foreach m in arrayx
-		n := arrayx[m] - arraymean;
-		n := Exp(n, 2);
-		i := i + n;
-	endforeach
-
-	i := i / (arraylen - 1);
-	n := Sqr(i);
-
-	return n;
-
-endfunction
-
-
-function ZTest(arrayx, mu, sigma)
-
-	var i, n;
-	var z:= 0.000;
-	var arraymean := Mean(arrayx);
-	var arraylen := len(arrayx);
-
-	i := arraymean - mu;
-	n := sigma / Sqr(arraylen);
-
-	z := i/n;
-
-	return := z;
-
-endfunction
-
-
-function TTest(arrayx, mu)
-
-	var i, n, s;
-	var t:= 0.000;
-	var arraymean := Mean(arrayx);
-	var arraylen := len(arrayx);
-	var s := StdDev(arrayx);
-
-	i := arraymean - mu;
-	n := s / Sqr(arraylen);
-
-	t := i/n;
-
-	return := t;
-
-endfunction
-
-function BitIn(arrayx)
-
-	var i := 8;
-	var n;
-	var loop := 1;
-	var bitvalue := 0;
-
-	while (i &gt;= 0)
-
-		n := 8 - i;
-		if (arrayx[i] == 1)
-			bitvalue := bitvalue + Exp(2, n);
-		endif
-		i := i - 1;
-
-	endwhile
-
-	return bitvalue;
-
-endfunction
-
-
-function BitOut(x)
-
-	x := CInt(x);
-	var loop := 1;
-	var bitvalue := 0;
-	var arrayx := {0,0,0,0,0,0,0,0};
-	var n;
-
-	while (loop &lt;= 8)
-
-		n := 8 - loop;
-		bitvalue := Exp(2, n);
-		if ( (x - bitvalue) &gt;= 0)
-			arrayx[loop] := 1;
-			x := x - bitvalue;
-		endif
-		loop := loop + 1;
-
-	endwhile
-
-	return arrayx;
-
-endfunction
-
-
-function BitAnd(x, y)
-
-	var arrayx := BitOut(x);
-	var arrayy := BitOut(y);
-	var z := 0;
-	var loop := 1;
-	var n;
-
-	while (loop &lt;= 8)
-
-		n := loop - 1;
-		if ( (arrayx[loop] == 1) &amp;&amp; (arrayy[loop] == 1) )
-			z := z + Exp(2, n);
-		endif
-		loop := loop + 1;
-
-	endwhile
-
-	return z;
-
-endfunction
-
-
-function BitOr(x, y)
-
-	var arrayx := BitOut(x);
-	var arrayy := BitOut(y);
-	var z := 0;
-	var loop := 1;
-	locan n;
-
-	while (loop &lt;= 8)
-
-		n := loop - 1;
-		if ( (arrayx[loop] == 1) || (arrayy[loop] == 1) )
-			z := z + Exp(2, n);
-		endif
-		loop := loop + 1;
-
-	endwhile
-
-	return z;
-
-endfunction
-
-
-function BitXor(x, y)
-
-	var arrayx := BitOut(x);
-	var arrayy := BitOut(y);
-	var z := 0;
-	var loop := 1;
-	var n;
-
-	while (loop &lt;= 8)
-
-		n := loop - 1;
-		if (arrayx[loop] - arrayy[loop] != 0)
-			z := z + Exp(2, n);
-		endif
-		loop := loop + 1;
-
-	endwhile
-
-	return z;
-
-endfunction
-
-
-function BitEqv(x, y)
-
-	var arrayx := BitOut(x);
-	var arrayy := BitOut(y);
-	var z := 0;
-	var loop := 1;
-	var n;
-
-	while (loop &lt;= 8)
-
-		n := loop - 1;
-		if (arrayx[loop] - arrayy[loop] == 0)
-			z := z + Exp(2, n);
-		endif
-		loop := loop + 1;
-
-	endwhile
-
-	return z;
-
-endfunction
-
-
-function BitImp(x, y)
-
-	var arrayx := BitOut(x);
-	var arrayy := BitOut(y);
-	var z := 0;
-	var loop := 1;
-	var n;
-
-	while (loop &lt;= 8)
-
-		n := loop - 1;
-		if (arrayx[loop] - arrayy[loop] &lt; 1)
-			z := z + Exp(2, n);
-		endif
-		loop := loop + 1;
-
-	endwhile
-
-	return z;
-
-endfunction
-
-
-function BitNot(x)
-
-	var arrayx := BitOut(x);
-	var z := 0;
-	var loop := 1;
-	var n;
-
-	while (loop &lt;= 8)
-
-		n := loop - 1;
-		if (arrayx[loop] == 0)
-			arrayx[loop] := 1;
-			z := z + Exp(2, n);
-		else
-			arrayx[loop] := 0;
-		endif
-
-		loop := loop + 1;
-
-	endwhile
-
-	return z;
-
-endfunction
-
-
-function FlagSet(flag, bit);
-
-	bit := 9 - bit;
-
-	var flagarray := BitOut(flag);
-	flagarray[bit] := 1;
-
-	bit := BitIn(flagarray);
-
-	return bit;
-
-endfunction
-
-
-function FlagReset(flag, bit);
-
-	var x := 1;
-	var y := 0;
-	var n := 0;
-
-	bit := 9 - bit;
-
-	var flagarray := BitOut(flag);
-	flagarray[bit] := 0;
-
-	while (x &lt;= 8)
-
-		if (flagarray[x] == 1)
-			n := x - 1;
-			y := y + Exp(2, n);
-		endif
-
-		x := x + 1;
-
-	endwhile
-
-	return y;
-
-endfunction
-
-
-function FlagCheck(flag, bit);
-
-	var flagarray := BitOut(flag);
-	bit := 9 - bit;
-
-	if (flagarray[bit] == 1)
-		return 1;
-	else
-		return 0;
-	endif
-
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/bounty.inc
===================================================================
--- trunk/096/scripts/include/bounty.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/bounty.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,59 +0,0 @@
-use datafile;
-
-var bountyfile := DFOpenDataFile(&quot;BountySystem&quot;, 1);
-
-function AddBounty(killer, amt)
-  var entry := DFFindElement(bountyfile, CStr(killer.serial), 1);
-  print(entry);
-  entry.SetProp(&quot;Name&quot;, killer.name);
-  entry.SetProp(&quot;Bounty&quot;, CInt(DFGetProp(entry, &quot;Bounty&quot;, 1, 0) + amt));
-  entry.SetProp(&quot;Murders&quot;, CInt(DFGetProp(entry, &quot;Murders&quot;, 1, 0) + 1));
-  entry.SetProp(&quot;Expires&quot;, ReadGameClock() + 1209600);
-endfunction
-
-function FindBounty(who, serial)
-  who := who; // stops ecompile &quot;not used&quot; warning
-  var elem := DFFindElement(bountyfile, CStr(serial));
-  if(elem)
-    var holder := array;
-    holder.append(DFGetProp(elem, &quot;Name&quot;));
-    holder.append(DFGetProp(elem, &quot;Bounty&quot;));
-    holder.append(DFGetProp(elem, &quot;Murders&quot;));
-    bountyfile.DeleteElement(CStr(serial));
-    return holder;
-  else
-    return 0;
-  endif
-endfunction
-
-function ComposeBountyBoard()
-  var pnames := bountyfile.keys();
-  var data := array;
-  Foreach thing in pnames
-    var elem := DFFindElement(bountyfile, thing);
-    var holder := array;
-    holder.append(DFGetProp(elem, &quot;Name&quot;));
-    holder.append(CInt(thing));
-    holder.append(DFGetProp(elem, &quot;Bounty&quot;));
-    holder.append(DFGetProp(elem, &quot;Murders&quot;, 1, 1));
-    data.append(holder);
-  endforeach
-  return bubble_sort_array(data, 3);
-endfunction
-
-function MaintainBountySystem()
-  var count := 0;
-  foreach thing in (bountyfile.keys())
-    var elem := DFFindElement(bountyfile, thing);
-    if(ReadGameClock() &gt; DFGetProp(elem, &quot;Expires&quot;))
-      bountyfile.DeleteElement(thing);
-      count := count + 1;
-    endif
-    sleep(1);
-  endforeach
-  print(&quot;//////////////////////////////////////////&quot;);
-  print(&quot;// Bounty System Maintenance&quot;);
-  print(&quot;// Removed &quot; + count + &quot; expired bounties.&quot;);
-  print(&quot;//////////////////////////////////////////&quot;);
-endfunction
-

Deleted: trunk/096/scripts/include/canAccess.inc
===================================================================
--- trunk/096/scripts/include/canAccess.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/canAccess.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,25 +0,0 @@
-
-function can_access(who, item, flags := 0)
-  var owner := Cint(GetObjProperty(item, &quot;Owner&quot;));
-  if((owner) and (owner != who.serial))
-    SendSysMessage(who, &quot;You cannot use that (1) &quot; + item.desc);
-    return 0;
-  elseif(GetObjProperty(item, &quot;Vendored&quot;))
-    SendSysMessage(who, &quot;You cannot use that (2) &quot; + item.desc);
-    return 0;
-  elseif(!Accessible(who, item))
-    SendSysMessage(who, &quot;You cannot use that (3) &quot; + item.desc);
-    return 0;
-  elseif((!flags[&quot;distance&quot;]) and ((Distance(who, item) &gt; 2)))
-    SendSysMessage(who, &quot;That item is too far away.&quot;);
-    return 0;
-  elseif((!flags[&quot;unmovable&quot;]) and (item.movable == 0))
-    SendSysMessage(who, &quot;You cannot use that while locked down.&quot;);
-    return 0;
-  elseif(!ReserveItem(item))
-    SendSysMessage(who, &quot;That item is already in use.&quot;);
-    return 0;
-  else
-    return 1;
-  endif
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/clock.inc
===================================================================
--- trunk/096/scripts/include/clock.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/clock.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,67 +0,0 @@
-use uo;
-use cfgfile;
-
-function GetTime()
-  var cfg := ReadConfigFile( &quot;:daynight:config/days&quot; );
-  var elem := FindConfigElem( cfg, &quot;WholeDay&quot; );
-  var length := GetConfigInt( elem, &quot;Length&quot; );
-  var day_length := (60 * length);
-  var x := ReadGameClock();
-  var bigpart := x / day_length;
-  var smallpart := bigpart * day_length;
-  x := (x - smallpart);
-  return ( x );
-endfunction
-
-function GetTransition()
-  var cfg := ReadConfigFile( &quot;:daynight:config/days&quot; );
-  var elem := FindConfigElem( cfg, &quot;Transition&quot; );
-  var length := GetConfigInt( elem, &quot;Length&quot; );
-  return length;
-endfunction
-
-function GetDayLength()
-  var cfg := ReadConfigFile( &quot;:daynight:config/days&quot; );
-  var elem := FindConfigElem( cfg, &quot;WholeDay&quot; );
-  var length := GetConfigInt( elem, &quot;Length&quot; );
-  return length;
-endfunction
-
-function GetTimeofDay()
-  var time_sec := GetTime();
-  var length := (GetDayLength() * 60) * 1.0;
-  var temp := length / time_sec;
-  var raw_time := 24.0 / temp;
-  var hours := CInt(raw_time);
-  var remainder := raw_time - hours;
-  var minutes := CInt( remainder * 60 );
-  if( len(CStr(minutes)) == 1 )
-	minutes := &quot;0&quot; + CStr(minutes);
-  endif
-  if( len(CStr(hours)) == 1 )
-	hours := &quot;0&quot; + CStr(hours);
-  endif
-  return (hours+&quot;:&quot;+minutes);
-endfunction
-
-function GetHourOfDay()
-  var time := GetTimeofDay();
-  var colon := find(time, &quot;:&quot;, 1);
-  return CInt(time[1, colon]);
-endfunction
-
-function HourWithinRange(hr, hrstart, hrend)
-  hr := CInt(hr) + 24;
-  hrstart := CInt(hrstart) + 24;
-  hrend := CInt(hrend) + 24;
-  if (hrstart &gt; hrend)
-	if (hr &gt;= hrstart || hr &lt; hrend)
-	  return 1;
-	endif
-  else
-	if (hr &gt;= hrstart &amp;&amp; hr &lt;= hrend)
-	  return 1;
-	endif
-  endif
-  return 0;
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/coords.inc
===================================================================
--- trunk/096/scripts/include/coords.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/coords.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,25 +0,0 @@
-use basic;
-use math;
-
-function ToSextant(x, y)
-  var latitude_direction, longitude_direction;
-  var latitude_degrees, longitude_degrees;
-  var latitude_minutes, longitude_minutes;
-  latitude_degrees := (y-1624)*0.087890625;
-  longitude_degrees := (x-1323)*0.0703125;
-  if(latitude_degrees &lt; 0)
-	latitude_direction := &quot;N&quot;;
-  else
-	latitude_direction := &quot;S&quot;;
-  endif
-  if(longitude_degrees &lt; 0)
-	longitude_direction := &quot;W&quot;;
-  else
-	longitude_direction := &quot;E&quot;;
-  endif
-  latitude_degrees := Abs(latitude_degrees);
-  longitude_degrees := Abs(longitude_degrees);
-  latitude_minutes := CInt((CInt((latitude_degrees-Floor(latitude_degrees))*100)*60)/100);
-  longitude_minutes := CInt((CInt((longitude_degrees-Floor(longitude_degrees))*100)*60)/100);
-  return(Floor(latitude_degrees) + &quot;o &quot; + latitude_minutes + &quot;'&quot; + latitude_direction + &quot;, &quot; + Floor(longitude_degrees) + &quot;o &quot; + longitude_minutes + &quot;'&quot; + longitude_direction);
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/dist.inc
===================================================================
--- trunk/096/scripts/include/dist.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/dist.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,52 +0,0 @@
-/*
- *  dist( obj1, obj2 )
- *      - returns the largest of the x-distance and y-distance 
- *        between two objects.
- */
-
-use uo;
-
-function dist( obj1, obj2 )
-    return Distance( obj1, obj2 );
-
-            /* implements:
-                while (obj1.container)
-                    obj1 := obj1.container;
-                endwhile
-    
-                while (obj2.container)
-                    obj2 := obj2.container;
-                endwhile
-
-                var xd := obj1.x - obj2.x;
-                var yd := obj1.y - obj2.y;
-                if (xd &lt; 0)
-                    xd := -xd;
-                endif
-                if (yd &lt; 0)
-                    yd := -yd;
-                endif
-                if (xd &gt; yd)
-                    return xd;
-                else
-                    return yd;
-                endif
-            */
-endfunction
-
-function coordist( x1, y1, x2, y2 )
-
-   var xd := x1 - x2;
-   var yd := y1 - y2;
-   if (xd &lt; 0)
-      xd := -xd;
-   endif
-   if (yd &lt; 0)
-      yd := -yd;
-   endif
-   if (xd &gt; yd)
-      return xd;
-   else
-     return yd;
-   endif
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/eventID.inc
===================================================================
--- trunk/096/scripts/include/eventID.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/eventID.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,84 +0,0 @@
-//
-// event IDs to be returned in eventid member of wait_for_event
-// result.
-//
-// See documentation for details.
-//
-// TODO: move this to OS.EM, when .EM files can have constants.
-//
-// Author: ens
-//
-// Last modification: 01/22/1999
-//
-
-
-//const EVID_SPEECH           := 0x0001;
-
-const EVID_ENGAGED          := 0x0002;
-const EVID_DISENGAGED       := 0x0004;
-const EVID_NODE             := 0x0005;
-const EVID_DAMAGED          := 0x0008;
-const EVID_HERDING          := 0x1111;
-const EVID_WAKEUP           := 0x1112;
-const EVID_SKILLCAP         := 0x1113;
-const EVID_STATCAP          := 0x1114;
-const EVID_SPAWNREGION      := 0x1115;
-const EVID_SR_DEATH         := 0x1116;
-const EVID_SR_PENDING       := 0x1117;
-const EVID_ENTEREDAREA      := 0x0010;
-const EVID_STAFF_LOGIN      := 0x0011;
-const EVID_PLAYER_LOGIN     := 0x0012;
-const EVID_PLAYER_LOGOFF    := 0x0013;
-const EVID_PLAYER_DELAY     := 0x0014;
-const EVID_FIND_COUN        := 0x0015;
-const EVID_FIND_GM          := 0x0016;
-const EVID_GUILD_DISBAND    := 0x0017;
-const EVID_GUILD_CREATED    := 0x0018;
-
-const EVID_ALL_ATTACK_CMD := 0x12;
-const EVID_ALL_FOLLOW_CMD := 0x11;
-
-const EVID_LEFTAREA         := 0x0020;
-
-const EVID_OPPONENT_MOVED   := 0x0040;
-
-const EVID_HOSTILE_MOVED    := 0x0080; // not implemented
-
-const EVID_MERCHANT_BOUGHT  := 0x0100;
-const EVID_MERCHANT_SOLD    := 0x0200;
-
-const EVID_ITEM_GIVEN       := 0x0400;
-const EVID_DOUBLECLICKED    := 0x0800;
-
-const EVID_RESERVED_1000    := 0x00001000;
-const EVID_RESERVED_2000    := 0x00002000;
-const EVID_RESERVED_4000    := 0x00004000;
-const EVID_RESERVED_8000    := 0x00008000;
-
-const EVID_SPAWNPOINT_CREATED	:= 1010;
-const EVID_SPAWNPOINT_DESTROYED := 1020;
-const EVID_SPAWNPOINT_RESET		:= 1040;
-const EVID_SPAWNPOINT_CHANGED	:= 1080;
-const EVID_SPAWN_DEATH			:= 1100;
-const EVID_SPAWNREGION_DEATH	:= 3001;
-const EVID_RESERVED_00010000    := 0x00010000;
-const EVID_RESERVED_00020000    := 0x00020000;
-const EVID_RESERVED_00040000    := 0x00040000;
-const EVID_RESERVED_00080000    := 0x00080000;
-const EVID_RESERVED_00100000    := 0x00100000;
-const EVID_RESERVED_00200000    := 0x00200000;
-const EVID_RESERVED_00400000    := 0x00400000;
-const EVID_RESERVED_00800000    := 0x00800000;
-const EVID_RESERVED_01000000    := 0x01000000;
-const EVID_RESERVED_02000000    := 0x02000000;
-const EVID_RESERVED_04000000    := 0x04000000;
-const EVID_RESERVED_08000000    := 0x08000000;
-const EVID_RESERVED_10000000    := 0x10000000;
-const EVID_RESERVED_20000000    := 0x20000000;
-const EVID_RESERVED_40000000    := 0x40000000;
-const EVID_RESERVED_80000000    := 0x80000000;
-
-/* FIXME: these need to be renumbered, one clashes with a reserved event */
-const EVID_SPELL_ATTACK     := 0x0800;
-const EVID_BUDDYATTACKED     := 0x1600;
-const EVID_PEACEMADE         := 0x90000000;
\ No newline at end of file

Deleted: trunk/096/scripts/include/exception.inc
===================================================================
--- trunk/096/scripts/include/exception.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/exception.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,35 +0,0 @@
-/* $Id: exception.inc,v 1.1 2004/03/16 14:05:46 folko Exp $
- *
- * Purpose
- * Provides various functions and constants for exceptions.
- *
- */
-use uo;
-
-include &quot;include/log&quot;;
-
-
-/*
- * Exception(what)
- *
- * Author: Folko
- *
- * Purpose
- * Raises and exception and logs it to the error log.
- *
- * Parameters
- * what:        A string describing the error
- *
- * Return value
- * Always returns an error-object
- *
- * Notes
- * Only use this for script errors etc., we don't want spam in the error log.
- *
- */
-function Exception(what)
-	print(&quot;******Exception: &quot; + what + &quot;******&quot;);
-	Log(LOG_ERROR, &quot;Exception: &quot; + what);
-
-	return(error);
-endfunction

Deleted: trunk/096/scripts/include/fields.inc
===================================================================
--- trunk/096/scripts/include/fields.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/fields.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,67 +0,0 @@
-function get_direction(who)
-  var ret;
-  if(who.facing in array(1, 3, 5, 7))
-    case (RandomInt(2))
-      0: ret := &quot;NS&quot;;
-      1: ret := &quot;EW&quot;;
-	endcase
-  else
-    case(who.facing)
-      2: ret := &quot;EW&quot;;
-      4: ret := &quot;NS&quot;;
-      6: ret := &quot;EW&quot;;
-      0: ret := &quot;NS&quot;;
-    endcase
-  endif
-  return ret;
-endfunction
-
-function CreateNorthSouthField(caster, fieldtype,x,y,z, length := 5)
-  var counter := 0;
-  var i;
-  var fires := { };
-  var tester := CreateItemAtLocation(x,y,z, 0xeed, 1, caster.realm);
-  for ( i := x - 2; i &lt;= x - 2 + length; i := i + 1)
-    counter := counter  + 1;
-    if(fieldtype == 0x80)
-      if((CheckLosAt(tester, i, y, z )) and (len(ListMobilesNearLocation(i, y, z, 0, caster.realm)) == 0))
-        fires[counter] := CreateItemAtLocation( i, y, z, fieldtype, 1, caster.realm);
-        SetObjProperty(fires[counter], &quot;f&quot;,&quot;1&quot;);
-        SetObjProperty(fires[counter], &quot;creater&quot;, caster.serial);
-      endif
-    else
-      if(CheckLosAt(tester, i, y, z ))
-        fires[counter] := CreateItemAtLocation( i,y,z,fieldtype, 1, caster.realm );
-        SetObjProperty(fires[counter], &quot;creater&quot;, caster.serial);
-        SetObjProperty(fires[counter], &quot;f&quot;,&quot;1&quot;);
-      endif
-    endif
-  endfor
-  DestroyItem(tester);
-  return fires;
-endfunction
-
-function CreateEastWestField(caster, fieldtype,x,y,z, length)
-  var counter := 0;
-  var i;
-  var fires := { };
-  var tester := CreateItemAtLocation(x,y,z, 0xeed, 1, caster.realm);
-  for ( i := y - 2; i &lt;= y - 2 + length; i := i + 1)
-    counter := counter  + 1;
-    if(fieldtype == 0x80)
-      if((CheckLosAt(tester, x, i, z )) and (len(ListMobilesNearLocation(x, i, z, 0, caster.realm)) == 0))
-        fires[counter] := CreateItemAtLocation( x,i,z,fieldtype, 1, caster.realm );
-        SetObjProperty(fires[counter], &quot;f&quot;,&quot;1&quot;);
-        SetObjProperty(fires[counter], &quot;creater&quot;, caster.serial);
-      endif
-    else
-      if(CheckLosAt(tester, x, i, z ))
-        fires[counter] := CreateItemAtLocation( x,i,z,fieldtype, 1, caster.realm );
-        SetObjProperty(fires[counter], &quot;f&quot;,&quot;1&quot;);
-        SetObjProperty(fires[counter], &quot;creater&quot;, caster.serial);
-      endif
-    endif
-  endfor
-  DestroyItem(tester);
-  return fires;
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/findCity.inc
===================================================================
--- trunk/096/scripts/include/findCity.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/findCity.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,47 +0,0 @@
-use os;
-use uo;
-
-function FindCity(me)
-  if(me.x&gt;=1244 &amp;&amp; me.y&gt;=1530 &amp;&amp; me.x&lt;=1704 &amp;&amp; me.y&lt;=1758)
-    return &quot;Britain&quot;;
-  elseif(me.x&gt;=4379 &amp;&amp; me.y&gt;=1045 &amp;&amp; me.x&lt;=4487 &amp;&amp; me.y&lt;=1178)
-    return &quot;Moonglow&quot;;
-  elseif(me.x&gt;=5137 &amp;&amp; me.y&gt;=3948 &amp;&amp; me.x&lt;=5196 &amp;&amp; me.y&lt;=4082)
-    return &quot;Delucia&quot;;
-  elseif(me.x&gt;=5196 &amp;&amp; me.y&gt;=3923 &amp;&amp; me.x&lt;=5322 &amp;&amp; me.y&lt;=4085)
-    return &quot;Delucia&quot;;
-  elseif(me.x&gt;=5638 &amp;&amp; me.y&gt;=3083 &amp;&amp; me.x&lt;=5799 &amp;&amp; me.y&lt;=3328)
-    return &quot;Papua&quot;;
-  elseif(me.x&gt;=5799 &amp;&amp; me.y&gt;=3121 &amp;&amp; me.x&lt;=5822 &amp;&amp; me.y&lt;=3327)
-    return &quot;Papua&quot;;
-  elseif(me.x&gt;=1294 &amp;&amp; me.y&gt;=3664 &amp;&amp; me.x&lt;=1506 &amp;&amp; me.y&lt;=3886)
-    return &quot;Jhelom&quot;;
-  elseif(me.x&gt;=494 &amp;&amp; me.y&gt;=926 &amp;&amp; me.x&lt;=600 &amp;&amp; me.y&lt;=1034)
-    return &quot;Yew&quot;;
-  elseif(me.x&gt;=590 &amp;&amp; me.y&gt;=796 &amp;&amp; me.x&lt;=670 &amp;&amp; me.y&lt;=886)
-    return &quot;Empath Abbey&quot;;
-  elseif(me.x&gt;=2394 &amp;&amp; me.y&gt;=370 &amp;&amp; me.x&lt;=2624 &amp;&amp; me.y&lt;=632)
-    return &quot;Minoc&quot;;
-  elseif(me.x&gt;=1794 &amp;&amp; me.y&gt;=2638 &amp;&amp; me.x&lt;=2136 &amp;&amp; me.y&lt;=2902)
-    return &quot;Trinsic&quot;;
-  elseif(me.x&gt;=538 &amp;&amp; me.y&gt;=2106 &amp;&amp; me.x&lt;=686 &amp;&amp; me.y&lt;=2274)
-    return &quot;Skara Brae&quot;;
-  elseif(me.x&gt;=3646 &amp;&amp; me.y&gt;=2040 &amp;&amp; me.x&lt;=3814 &amp;&amp; me.y&lt;=2280)
-    return &quot;Magincia&quot;;
-  elseif(me.x&gt;=3588 &amp;&amp; me.y&gt;=2446 &amp;&amp; me.x&lt;=3762 &amp;&amp; me.y&lt;=2690)
-    return &quot;Occlo&quot;;
-  elseif(me.x&gt;=2612 &amp;&amp; me.y&gt;=2082 &amp;&amp; me.x&lt;=2772 &amp;&amp; me.y&lt;=2256)
-    return &quot;Buccaneers Den&quot;;
-  elseif(me.x&gt;=3496 &amp;&amp; me.y&gt;=1062 &amp;&amp; me.x&lt;=3808 &amp;&amp; me.y&lt;=1400)
-    return &quot;Nujelm&quot;;
-  elseif(me.x&gt;=2794 &amp;&amp; me.y&gt;=634 &amp;&amp; me.x&lt;=3026 &amp;&amp; me.y&lt;=1000)
-    return &quot;Vesper&quot;;
-  elseif(me.x&gt;=2206 &amp;&amp; me.y&gt;=1116 &amp;&amp; me.x&lt;=2290 &amp;&amp; me.y&lt;=1236)
-    return &quot;Cove&quot;;
-  elseif(me.x&gt;=5120 &amp;&amp; me.y&gt;=0 &amp;&amp; me.x&lt;=5374 &amp;&amp; me.y&lt;=254)
-    return &quot;Wind&quot;;
-  elseif(me.x&gt;=1382 &amp;&amp; me.y&gt;=3955 &amp;&amp; me.x&lt;=1528 &amp;&amp; me.y&lt;=4044)
-    return &quot;Jhelom&quot;;
-  endif
-  return &quot;no city&quot;;
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/firewall.inc
===================================================================
--- trunk/096/scripts/include/firewall.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/firewall.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,66 +0,0 @@
-use os;
-use util;
-use uo;
-
-include &quot;include/client&quot;;
-include &quot;include/fields&quot;;
-
-const SOUND_EFFECT_FIREFIELD:= 0x1de;
-const UOBJ_FIREFIELD_NS := 0x398c;
-const UOBJ_FIREFIELD_EW := 0x3996;
-const SOUND_EFFECT_POISON := 0x247;
-const EFFECT_RED_SPARKLE := 0x374a;
-
-/*
-function DoFireField( caster )
-var thetarget;
-var x;
-var y;
-var z;
-var i;
-var fires := { };
-var duration;
-var listeners := { };
-var sufferers := { };
-thetarget := TargetCoordinates(caster);
-if ((!thetarget))
-        SendSysMessage(caster, &quot;Targetting cancelled.&quot;);
-endif
-x := thetarget.x;
-y := thetarget.y;
-z := thetarget.z;
-if (!CheckLosAt( caster, x, y, z ))
-        SendSysMessage(caster, &quot;You can't see that!&quot;);
-        return;
-endif
-var dir := get_direction(caster, x, y, z);
-case dir
-	&quot;north&quot; : fires:= CreateNorthSouthField(caster, UOBJ_FIREFIELD_NS, x, y, z, 5);
-	&quot;south&quot;  :fires:= CreateNorthSouthField(caster, UOBJ_FIREFIELD_NS, x, y, z, 5);
-	&quot;east&quot;  : fires:= CreateEastWestField(caster, UOBJ_FIREFIELD_EW, x, y, z, 5);
-        &quot;west&quot;  : fires:= CreateEastWestField(caster, UOBJ_FIREFIELD_EW, x, y, z, 5);
-        default:  var firetype := RandomInt(2) + 1;
-        	  case firetype
-        	  	1: fires:= CreateNorthSouthField(caster, UOBJ_FIREFIELD_NS, x, y, z, 5);
-        	  	2: fires:= CreateEastWestField(caster, UOBJ_FIREFIELD_EW, x, y, z, 5);
-        	  endcase
-endcase
-Detach();
-foreach fire in fires
-        PlaySoundEffect(fire, SOUND_EFFECT_FIREFIELD);
-endforeach
-var counter := 0;
-duration := CInt(GetEffectiveSkill( caster, SKILLID_MAGERY ) );
-for (counter := 1; counter &lt;= duration; counter := counter + 1)
-foreach fire in fires
-	if (fire)
-        PlaySoundEffect(fire, SOUND_EFFECT_FIREFIELD);
-    endif
-endforeach
-sleep(1);
-endfor
-foreach fire in fires
-    DestroyItem( fire );
-endforeach
-endfunction
-*/
\ No newline at end of file

Deleted: trunk/096/scripts/include/guildFunctions.inc
===================================================================
--- trunk/096/scripts/include/guildFunctions.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/guildFunctions.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,337 +0,0 @@
-use uo;
-use os;
-
-var guildinitlayout := {
-	&quot;page 0&quot;,
-	&quot;resizepic 30 30 3000 400 200&quot;,
-	&quot;text 163 43 5 0&quot;,
-	&quot;text 50 65 5 1&quot;,
-	&quot;text 80 85 35 2&quot;,
-	&quot;text 50 105 5 3&quot;,
-	&quot;text 80 125 35 4&quot;,
-	&quot;text 50 145 5 5&quot;,
-	&quot;text 80 165 35 6&quot;,
-	&quot;button 230 195 2119 2120 1 0 1&quot;,
-	&quot;button 165 195 2130 2129 1 0 2&quot;
-};
-
-var guildinitdata := {
-	&quot;Guild Information&quot;,
-	&quot;Guild Name:&quot;,
-	&quot;Guildname&quot;,
-	&quot;Guild Abbreviation:&quot;,
-	&quot;Guildabbr&quot;,
-	&quot;Guildmaster:&quot;,
-	&quot;Guildmaster&quot;
-};
-// ResetGuildStone(stone)
-//
-// This function will initialize a guildstone.  It will wipe all
-// existing guild data from the stone, queue all of the guild's
-// players so their guild info is removed, and remove the guild from
-// the registry.
-
-function ResetGuildStone(stone)
-
-	var i, x;
-	var empty := {};
-
-	var guildmembers := GetObjProperty(stone, &quot;MemberSerials&quot;);
-
-	SetObjProperty(stone, &quot;GuildName&quot;, &quot;NONE&quot;);
-	SetObjProperty(stone, &quot;GuildAbbr&quot;, &quot;NONE&quot;);
-	SetObjProperty(stone, &quot;GuildAlign&quot;, &quot;NONE&quot;);
-	SetObjProperty(stone, &quot;MemberSerials&quot;, empty);
-	SetObjProperty(stone, &quot;MemberNames&quot;, empty);
-	SetObjProperty(stone, &quot;MemberTitles&quot;, empty);
-	SetObjProperty(stone, &quot;Enemies&quot;, empty);
-	SetObjProperty(stone, &quot;Allies&quot;, empty);
-	SetObjProperty(stone, &quot;PendingAction&quot;, empty);
-
-	set_critical(1);
-	var guildregistry := GetGlobalProperty(&quot;GuildRegistry&quot;);
-	var newregistry := {};
-	var newreglen := 0;
-	for (i := 1; i &lt;= len(guildregistry); i := i + 1);
-		if (stone.serial != guildregistry[i])
-			newreglen := newreglen + 1;
-			newregistry[newreglen] := guildregistry[i];
-		endif
-	endfor
-	SetGlobalProperty(&quot;GuildRegistry&quot;, newregistry);
-	set_critical(0);
-
-	foreach x in guildmembers
-		GuildAction(x.serial, stone, &quot;Disband&quot;);
-	endforeach
-
-	PrintTextAbove(stone, &quot;Guildstone has been reset.&quot;);
-
-endfunction
-
-
-// GuildAction(destination, source, action)
-//
-// This function adds a PendingAction to a guildstone.  It can be used
-// to declare war, peace, or alliances with other guildstones, (in
-// which case destination = target guild's stone serial, source = 
-// the declarer's guildstone, and the action = &quot;War&quot;, &quot;Peace&quot;, or 
-// &quot;Ally&quot;), or it can be used to remove or retitle other members of
-// the guild  (in which case destination = target's serial, source =
-// the stone, and action = &quot;Remove&quot;, &quot;Disband&quot;, &quot;Add&quot;, etc).  If a 
-// player is changed, and the player is not online, then the action
-// is posted to the global queue.  The function returns 1 on success, 
-// 2 if the target was offline, and 0 for failure.
-
-function GuildAction(destination, source, action)
-
-	var i, x;
-	var targobj;
-	var pendingaction;
-
-	var guildname := GetObjProperty(source, &quot;GuildName&quot;);
-
-	if ( (action == &quot;War&quot;) || (action == &quot;Peace&quot;) || (action == &quot;Ally&quot;) )
-		targobj := SystemFindObjectBySerial(destination);
-		pendingaction := GetObjProperty(targobj, &quot;PendingAction&quot;);
-		x := len(pendingaction) + 1;
-		pendingaction[x] := source.serial;
-		x := x + 1;
-		pendingaction[x] := action;
-		SetObjProperty(targobj, &quot;PendingAction&quot;, pendingaction);
-		return 1;
-	elseif ( (action == &quot;Remove&quot;) || (action == &quot;Disband&quot;) || (action == &quot;Retitle&quot;) || (action == &quot;Add&quot;))
-		i := 0;
-		foreach x in EnumerateOnlineCharacters()
-			if (x.serial == destination)
-				targobj := x;
-				i := 1;
-			endif
-		endforeach
-		if (i == 1)
-			case(action)
-				&quot;Remove&quot;:
-				SendSysMessage(targobj, &quot;You have been removed from &quot; + guildname + &quot;!&quot;);
-				EraseObjProperty(targobj, &quot;Guild&quot;);
-				targobj.name := GetObjProperty(targobj, &quot;OldName&quot;);
-				EraseObjProperty(targobj, &quot;GuildTitle&quot;);
-				EraseObjProperty(targobj, &quot;OldName&quot;);
-				return 1;
-
-				&quot;Disband&quot;:
-				SendSysMessage(targobj, &quot;Your guild, &quot; + guildname + &quot;, has disbanded.&quot;);
-				EraseObjProperty(targobj, &quot;Guild&quot;);
-				targobj.name := GetObjProperty(targobj, &quot;OldName&quot;);
-				EraseObjProperty(targobj, &quot;GuildTitle&quot;);
-				EraseObjProperty(targobj, &quot;OldName&quot;);
-				return 1;
-
-				&quot;Retitle&quot;:
-				SendSysMessage(targobj, &quot;You have been granted a new guild title.  Go to the guildstone and update your information.&quot;);
-				return 1;
-
-				&quot;Add&quot;:
-				SendSysMessage(targobj, &quot;You have been recruited into &quot; + guildname + &quot;.&quot;);
-				SetObjProperty(targobj, &quot;OldName&quot;, targobj.name);
-				SetObjProperty(targobj, &quot;Guild&quot;, source.serial);
-				SetObjProperty(targobj, &quot;GuildTitle&quot;, &quot;Initiate&quot;);
-				return 1;
-
-			endcase
-		else
-			set_critical(1);
-			var guildpendingaction := GetGlobalProperty(&quot;GuildPendingAction&quot;);
-			i := len(guildpendingaction) + 1;
-			guildpendingaction[x] := destination;
-			x := x + 1;
-			guildpendingaction[x] := action;
-			SetGlobalProperty(&quot;GuildPendingAction&quot;, guildpendingaction);
-			set_critical(0);
-			return 2;
-		endif	
-	else
-		print(&quot;Error selecting action type.&quot;);
-		return 0;
-	endif
-
-endfunction
-
-
-// FindPosition(who, stone)
-//
-// This function will find the array position in the guild data for
-// member &lt;who&gt;.  If the person is not in the guild, the function 
-// returns a 0.
-
-function FindPosition(who, stone)
-
-	var memberserials := GetObjProperty(stone, &quot;MemberSerials&quot;);
-	var i;
-	var guildslot := 0;
-
-	for (i := 1; i &lt;= len(memberserials); i := i + 1)
-		if (memberserials[i] == who.serial)
-			guildslot := i;
-		endif
-	endfor
-
-	return guildslot;
-
-endfunction
-
-
-// RemoveMember(who, stone)
-//
-// This function will remove an individual from a guildstone.  In this
-// case, &lt;who&gt; is the SERIAL NUMBER of the person to be removed.
-
-function RemoveMember(who, stone)
-
-	var i := 0;
-	var x := 0;
-	var newserials := {};
-	var newnames := {};
-	var newtitles := {};
-
-	var memberserials := GetObjProperty(stone, &quot;MemberSerials&quot;);
-	var membernames := GetObjProperty(stone, &quot;MemberNames&quot;);
-	var membertitles := GetObjProperty(stone, &quot;MemberTitles&quot;);
-
-	for (i := 1; i &lt;= len(memberserials); i := i + 1)
-		if (i != who)
-			x := x + 1;
-			newserials[x] := memberserials[i];
-			x := x + 1;
-			newnames[x] := membernames[i];
-			x := x + 1;
-			newtitles[x] := membertitles[i];
-		endif
-	endfor
-
-	SetObjProperty(stone, &quot;MemberSerials&quot;, newserials);
-	SetObjProperty(stone, &quot;MemberNames&quot;, newnames);
-	SetObjProperty(stone, &quot;MemberTitles&quot;, newtitles);
-
-	GuildAction(who, stone, &quot;Remove&quot;);
-
-endfunction
-
-
-// AddMember(who, stone)
-//
-// This function will add a member to a guildstone.  If the player is
-// already a member, the function will return 0.  The &quot;title&quot; field
-// is optional, and will return &quot;Initiate&quot; if omitted.
-
-function AddMember(who, stone, title := &quot;Initiate&quot;)
-
-	if ( FindPosition(who, stone) &gt; 0 )
-		PrintTextAbove(stone, &quot;That person is already a member!&quot;);
-		return 0;
-	endif
-
-	var memberserials := GetObjProperty(stone, &quot;MemberSerials&quot;);
-	var membernames := GetObjProperty(stone, &quot;MemberNames&quot;);
-	var membertitles := GetObjProperty(stone, &quot;MemberTitles&quot;);
-
-	var i := len(memberserials) + 1;
-
-	memberserials[i] := who.serial;
-	membernames[i] := who.name;
-	membertitles[i] := title;
-
-	SetObjProperty(stone, &quot;MemberSerials&quot;, memberserials);
-	SetObjProperty(stone, &quot;MemberNames&quot;, membernames);
-	SetObjProperty(stone, &quot;MemberTitles&quot;, membertitles);
-
-	GuildAction(who.serial, stone, &quot;Add&quot;);
-
-endfunction
-
-
-// InitializeGuild(who, guildstone)
-//
-// This function runs when the guildstone is first placed, or after
-// it has been wiped and the guild disbanded.   The first person to
-// use the stone after it is placed becomes the guildmaster.  This
-// function just sets the name and abbreviation of the guild, and
-// sets the title of the guildmaster.   It will then return to the
-// main guildstone program, where the guildmaster can add members
-// and make adjustments as needed.
-
-function InitializeGuild(who, stone)
-
-	var success := 0;
-	var guildname, guildabbr, guildtitle;
-
-	while (success == 0)
-		guildname := RequestInput(who, stone, &quot;Enter a your Guild's name (5-40 characters):&quot;);
-		if ( (len(guildname) &gt; 40) || (len(guildname) &lt; 5) )
-			SendSysMessage(who, &quot;Invalid Name.&quot;);
-		else
-			success := 1;
-		endif
-	endwhile
-	guildinitdata[3] := guildname;
-
-	success := 0;
-	while (success == 0)
-		guildabbr := RequestInput(who, stone, &quot;Enter a your Guild's short name, displayed in your members' titles (3-16 characters):&quot;);
-		SendSysMessage(who, guildabbr);
-		if ( (len(guildabbr) &gt; 16) || (len(guildname) &lt; 3) )
-			SendSysMessage(who, &quot;Invalid Name.&quot;);
-		else
-			success := 1;
-		endif
-	endwhile
-	guildinitdata[5] := guildabbr;
-
-	success := 0;
-	while (success == 0)
-		guildtitle := RequestInput(who, stone, &quot;Enter your title (3-16 characters):&quot;);
-		SendSysMessage(who, guildtitle);
-		if ( (len(guildtitle) &gt; 16) || (len(guildname) &lt; 3) )
-			SendSysMessage(who, &quot;Invalid Name.&quot;);
-		else
-			success := 1;
-		endif
-	endwhile
-	guildinitdata[7] := guildtitle;
-
-	SendSysMessage(who, &quot;Is this information correct?&quot;);
-	var res := SendDialogGump(who, guildinitlayout, guildinitdata);
-	if (res[0] == 2)
-
-		set_critical(1);
-		var masterlist := GetGlobalProperty(&quot;GuildRegistry&quot;);
-		success := len(masterlist) + 1;
-		masterlist[success] := stone.serial;	
-		SetGlobalProperty(&quot;GuildRegistry&quot;, masterlist);
-		set_critical(0);
-
-		var memberserials := { who.serial };
-		var membernames := { who.name };
-		var membertitles := { guildtitle };
-		var empty := { };
-
-		SetObjProperty(stone, &quot;GuildName&quot;, guildname);
-		SetObjProperty(stone, &quot;GuildAbbr&quot;, guildabbr);
-		SetObjProperty(stone, &quot;GuildAlign&quot;, &quot;NONE&quot;);
-		SetObjProperty(stone, &quot;MemberSerials&quot;, memberserials);
-		SetObjProperty(stone, &quot;MemberNames&quot;, membernames);
-		SetObjProperty(stone, &quot;MemberTitles&quot;, membertitles);
-		SetObjProperty(stone, &quot;GuildEnemies&quot;, empty);
-		SetObjProperty(stone, &quot;GuildAllies&quot;, empty);
-		SetObjProperty(stone, &quot;PendingAction&quot;, empty);
-
-		SetObjProperty(who, &quot;Guild&quot;, stone.serial);
-		SetObjProperty(who, &quot;OldName&quot;, who.name);
-		SetObjProperty(who, &quot;GuildTitle&quot;, guildtitle);
-		who.name := who.name + &quot;, &quot; + guildtitle + &quot; [&quot; + guildabbr + &quot;]&quot;;
-		SendSysMessage(who, &quot;Guildstone initialized.&quot;);
-		return 1;
-	else
-		return 0;
-	endif
-
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/help.inc
===================================================================
--- trunk/096/scripts/include/help.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/help.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,63 +0,0 @@
-var onlinecounselors;
-var onlinestaff;
-
-onlinecounselors := staffcheck(&quot;coun&quot;);
-onlinestaff := staffcheck(&quot;gm&quot;);
-
-function Icanpage(thechar)
-  foreach person in EnumerateOnlineCharacters()
-    if ((GetObjProperty(person,&quot;canpage&quot;)) &amp;&amp; (person.serial != thechar.serial))
-      return 0;
-    endif
-  endforeach
-  SetObjProperty(thechar, &quot;canpage&quot;, 1);
-  return 1;
-endfunction
-
-function staffcheck(type)
-  var stafflist := GetProcess(GetGlobalProperty(&quot;#stafflist&quot;));
-  var k := struct;
-  case(type)
-    &quot;coun&quot;: k.+type := EVID_FIND_COUN;
-    &quot;gm&quot;:   k.+type := EVID_FIND_GM;
-  endcase
-  k.+pid := getpid();
-  stafflist.sendevent(k);
-  var ev := wait_for_event(10);
-  var evdata := ev.data;
-  return evdata;
-endfunction
-
-function pagecheck(serial, type)
-  var cserial := CInt(serial);
-  var retval := 0;
-  var i;
-  case(CInt(type))
-    1: var maxi := gmpages.size();
-	   for(i := 0; i &lt; maxi; i := i + 1)
-		 if (cserial == CInt(gmpages[i]))
-		   retval := i;
-		   break;
-		 endif
-	   endfor
-    2: var maxi := counpages.size();
-	   for(i := 0; i &lt; maxi; i := i + 1)
-		 if (cserial == CInt(counpages[i]))
-		   retval := i;
-		   break;
-		 endif
-	   endfor
-  endcase
-  return retval;
-endfunction
-
-function pagewarning(type, thepage, who)
-  case(type)
-    1: foreach char in onlinestaff
-		 SendSysMessage( char, &quot;Page from &quot; + who.name + &quot;: &quot; + thepage);
-	   endforeach
-    2: foreach char in onlinecounselors
-		 SendSysMessage( char, &quot;Page from &quot; + who.name +  &quot;: &quot; + thepage);
-	   endforeach
-  endcase
-endfunction

Deleted: trunk/096/scripts/include/innCheck.inc
===================================================================
--- trunk/096/scripts/include/innCheck.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/innCheck.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,22 +0,0 @@
-use uo;
-use os;
-use cfgfile;
-use util;
-
-function Inncheck(character)
-
-  var element, rect;
-  var cfgfile := ReadConfigFile(&quot;::innlocation&quot;);
-  var entries := GetConfigStringKeys(cfgfile);
-  foreach listing in entries
-    element :=  cfgfile[listing];
-    rect := element.rect;
-    rect := SplitWords(rect);
-    if((character.x &gt;= CInt(rect[1])) &amp;&amp; (character.x &lt;= CInt(rect[3])) &amp;&amp; (character.y &gt;= CInt(rect[2])) &amp;&amp; (character.y &lt;= CInt(rect[4])))
-      return 1;
-      break;
-    endif
-  endforeach
-  return 0;
-
-endfunction 
\ No newline at end of file

Deleted: trunk/096/scripts/include/isValidLoc.inc
===================================================================
--- trunk/096/scripts/include/isValidLoc.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/isValidLoc.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,57 +0,0 @@
-use uo;
-use polsys;
-
-function isValidLoc(x, y, realm := &quot;britannia&quot; )
- 
-  if(realm == &quot;britannia&quot; || realm == &quot;britannia_alt&quot;)
-  
-	  if((x &gt;= 5112) &amp;&amp; (x &lt;= 5213))
-	    if((y &gt;= 1093) &amp;&amp; (y &lt;= 1213))
-	      return 0;
-	    endif
-	  endif
-	
-	  if((x &gt;= 5120) &amp;&amp; (x &lt;= 5374))
-	    if((y &gt;= 265) &amp;&amp; (y &lt;= 512))
-	      return 0;
-	    endif
-	  endif
-	
-	  if((x &gt;= 5890) &amp;&amp; (x &lt;= 6142))
-	    if((y &gt;= 514) &amp;&amp; (y &lt;= 1278))
-	      return 0;
-	    endif
-	  endif
-	
-	  if((x &gt;= 5376) &amp;&amp; (x &lt;= 5910))
-	    if((y &gt;= 1030) &amp;&amp; (y &lt;= 1276))
-	      return 0;
-	    endif
-	  endif
-	
-	  if((x &gt;= 5422) &amp;&amp; (x &lt;= 6142))
-	    if((y &gt;= 1536) &amp;&amp; (y &lt;= 1796))
-	      return 0;
-	    endif
-	  endif
-	
-	  if((x &gt;= 5632) &amp;&amp; (x &lt;= 6142))
-	    if((y &gt;= 1784) &amp;&amp; (y &lt;= 2303))
-	      return 0;
-	    endif
-	  endif
-	
-	  if((x &gt;= 5120) &amp;&amp; (x &lt;= 5680))
-	    if((y &gt;= 2048) &amp;&amp; (y &lt;= 2303))
-	      return 0;
-	    endif
-	  endif
-  
-  else
-  	var realm := Realms()[realm];
-  	if( x &gt;= realm.width || y &gt;= realm.height )
-  		return 0;
-  	endif
-  endif
-  return 1;
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/magic.inc
===================================================================
--- trunk/096/scripts/include/magic.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/magic.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,96 +0,0 @@
-const EVID_DISCHARGE := 0x123457;
-
-include &quot;:attributes:attributes&quot;;
-
-
-function Resisted(circle, caster, cast_on, amt)
-  // Purpose: to check for resistance to spells cast upon a character
-  // called by: most spells
-  // returns: amount of damage not resisted?
-
-  var magery := CInt(AP_GetSkill(caster, MAGERY));
-  var evalint := CInt(AP_GetSkill(caster, EVALINT));
-  var resist := CInt(AP_GetSkill(cast_on, RESISTING_SPELLS));
-        
-  // chk1 relates to the resist ability.
-  var chk1 := (resist / 5);
-  // chk2 relates to the difficulty level
-  var chk2 := resist - (((magery - 20) / 5) + (circle * 5));
-        
-  if(chk1 &lt; 1)
-    chk1 := 1;
-  endif
-  if(chk2 &lt; 1)
-    chk2 := 1;
-  endif
-        
-  // What an odd construct.  
-  // If you're hit with an easy spell then you have a difficulty of your resist
-  var diff := 0;
-  if(chk1 &gt; chk2)
-    diff := chk1;
-  else
-    diff := chk2;
-  endif
-        
-  if(cast_on.dead)
-    return 0;
-  endif
-  if( SkillCheck(cast_on, RESISTING_SPELLS, diff) &gt; 0 )
-    SendSysMessage(cast_on, &quot;You feel yourself resisting magical energy!&quot;);
-    //PlaySoundEffect(cast_on, SFX_SPELL_WEAKEN);
-    //PlayObjectCenteredEffect(cast_on, FX_CURSE_EFFECT, 5,5);
-    amt := (amt * 0.5);
-    if(amt &lt; 1)
-      amt := 1;
-    endif
-  endif
-  var modamt := 1;
-  if(resist &gt; evalint)
-    modamt := (1 + ((evalint - resist) / 200.0));
-  elseif(evalint &gt; resist)
-    modamt := (1 + ((evalint - resist) / 500.0));
-  endif
-  amt := (amt * modamt);
-  return CInt(amt);
-endfunction
-
-function getresistpoints(c, victim, skillid)
-  var points;
-  var diff;
-  case(c)
-    1:   points :=  20; diff := 20;
-    2:   points :=  40; diff := 30;
-    3:   points :=  80; diff := 40;
-    4:   points := 100; diff := 50;
-    5:   points := 120; diff := 60;
-    6:   points := 140; diff := 70;
-    7:   points := 160; diff := 86;
-    8:   points := 180; diff := 100;
-  endcase
-  var skill := AP_GetSkill(victim, skillid);
-  if(skill &gt; (diff - 20))
-    if((skill - diff) &lt;= 5)
-      points := points;
-    elseif((skill - diff) &lt;= 10)
-      points := (points * 3) / 4;
-    elseif((skill - diff) &lt;= 15)
-      points := points / 2;
-    elseif((skill - diff) &lt;= 15)
-      points := points / 4;
-    else
-      points := 0;
-    endif
-  endif
-  return points;
-endfunction
-
-function CalcSpellDamage(circle, caster)
-  var die_string := circle+&quot;d8&quot;;
-  var dmg := RandomDiceRoll(die_string);
-  dmg := dmg + CInt(AP_GetSkill(caster, MAGERY)/10);
-  if(dmg &gt; (circle * 8))
-    dmg := circle * 8;
-  endif
-  return dmg;
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/math.inc
===================================================================
--- trunk/096/scripts/include/math.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/math.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,608 +0,0 @@
-////////////////////////////////////////////////////////////
-////////////////////////////////////////////////////////////
-//
-//
-// math.inc
-//
-// Siggy's Improved Math Include, v2.0
-// Revision Date:  8/01/03
-//
-// Questions, comments, flames?   Send to:
-// EMail: <A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">cjtdennis at comcast.net</A>
-// ICQ: 10520050
-//
-////////////////////////////////////////////////////////////
-////////////////////////////////////////////////////////////
-//
-// History:
-//
-// v2.0:
-//	- Added Min and Max functions.
-//	- Added Bounded function.
-//	- Added SplitLog function.
-// 
-// v1.5:
-//	- Factorial(x) now returns 1 if x==0.
-//	- Log(x, y) now uses Log10 instead of successive
-//	  approximation.
-//
-// v1.4:
-//	- Fixed errors in Mean and StdDev.
-//	- Minor code cleanup across include.
-//
-// v1.3:
-//	- Removed items duplicated in math.em.
-//
-////////////////////////////////////////////////////////////
-////////////////////////////////////////////////////////////
-
-use math;
-
-
-const CONST_E := 2.718282;
-const CONST_PI := 3.141592;
-
-
-
-function Log(b, x)
-
-// Finds the logarithm to base &lt;b&gt; of &lt;x&gt;.
-
-	if (x&lt;=0)
-		return 0;
-	endif
-	return (Log10(x) / Log10(b));
-
-endfunction
-
-
-function SplitLog(x)
-// Returns array of {characteristic, mantissa} for x.
-// (If x==1.12345, the characteristic is &quot;1&quot;, and the 
-// mantissa is (0.12345)
-
-	return { (CInt(x)), (x - CInt(x)) };
-endfunction
-
-
-function Bounded(x, i, y, inclusive := 1)
-// Checks to see if a number &quot;i&quot; falls between the two
-// bounds &quot;x&quot; and &quot;y&quot;.  If inclusive is set to nonzero,
-// the function will return true if (i=x) || (i=y).
-	if (inclusive)
-		if ( (i &gt;= Min({x, y})) &amp;&amp; (i &lt;= Max({x, y})) )
-			return 1;
-		else
-			return 0;
-		endif
-	else
-		if ( (i &gt; Min({x, y})) &amp;&amp; (i &lt; Max({x, y})) )
-			return 1;
-		else
-			return 0;
-		endif
-	endif
-endfunction
-
-
-function Min(byref x)
-// returns the least value of array &quot;x&quot;
-	x.sort();
-	return x[1];
-endfunction
-
-
-function Max(byref x)
-// returns the greatest value of array &quot;x&quot;
-	x.sort();
-	return x[(len(x))];
-endfunction
-
-
-function Mod(Numerator, Denominator)
-
-// Returns the modulus of the fraction:
-//
-//		 Numerator
-//		-----------
-//		Denominator
-
-
-	return (Numerator - (CInt(Numerator/Denominator) * Denominator));
-	
-endfunction
-
-
-
-
-function Remainder(numerator, denominator)
-
-// Use this to get the remainder for non-integers.
-// Returns the remainder of the fraction:
-//
-//		 Numerator
-//		-----------
-//		Denominator
-
-	while (numerator &gt;= denominator)
-		numerator := numerator - denominator;
-	endwhile
-
-	return numerator;
-
-endfunction
-
-
-function Trunc(number, places)
-
-// Truncates a dbl to a fixed amount of decimal places.
-
-	var base := Pow(10, places);
-
-	number := CDbl(CInt(number * Pow(10, places)));
-	number := number / base;
-
-	return number;
-
-endfunction
-
-
-function Fac(factorial);
-
-// Returns the factorial of a number:
-// Fac(10) = 10 * 9 * 8 * 7 * 6 * 5 * 4 * 3 * 2 * 1
-
-	factorial := CInt(factorial);
-	var x := 1
-
-	while (factorial &gt; 0)
-		x := x * factorial;
-		factorial := factorial - 1;
-	endwhile
-	return x;
-
-endfunction
-
-
-function Exp(base, power)
-
-// Obsolete: math.em has Pow(b, p)
-
-	return Pow(base, power);
-
-endfunction
-
-
-function YRoot(x, y)
-
-// Returns the &lt;y&gt; root of a number &lt;x&gt;:
-	
-	var i := 0.000;
-	var n := 0.000;
-	var root := 2.000;
-	var a := CInt(Sqr(x));
-
-	if (a &lt; 4)
-		a := 4;
-	endif
-
-	var success := 0;
-	while (!success)		
-		n := Pow(root, y);
-		i := x - n;
-		i := i / (a * root);
-		i := Trunc(i, 3);
-		root := root + i;
-		if (i = 0)
-			success := 1;
-			if ( Pow(Root, y) &gt; x )
-				root := root - 0.001;
-			endif
-			if ( Pow((root + 0.001), y) = x)
-				root := root + 0.001;
-			endif
-		endif
-	endwhile
-
-	return root;
-
-endfunction
-
-
-function Inc(a)
-// Increments an integer by one.
-	return (a + 1);
-
-endfunction
-
-
-function Dec(a)
-// Decrements an integer by one.
-	return a - 1;
-
-endfunction
-
-
-function Mean(ArrayX)
-
-// Returns the arithmatic mean (average) of an array of numbers.
-
-	var n, i:=0.000;
-
-	foreach n in ArrayX
-		i := i + n;
-	endforeach
-
-	return (i / Len(ArrayX));
-
-endfunction
-
-
-function StdDev(ArrayX)
-// Returns the Standard Deviation of an array of numbers.
-
-	var m, n, i := 0.000;
-	var ArrayMean := Mean(ArrayX);
-	var ArrayLen := Len(ArrayX);
-
-	foreach m in ArrayX
-		n := m - ArrayMean;
-		n := Pow(n, 2);
-		i := i + n;
-	endforeach
-
-	i := i / (ArrayLen - 1);
-	n := Sqr (i);
-
-	return n;
-
-endfunction
-
-
-function ZTest(ArrayX, mu, sigma)
-// Returns the test statistic for a ZTest.   This is used to show
-// the likelihood that a sample is drawn from the population.  The 
-// mean and standard deviation for the population must be known.
-// The z-statistic is computed as follows:
-//
-//	z = (mean - mu) / (sigma / (Sqr(n))
-//
-// mean = the mean of the ArrayX data
-// mu = the mean of the entire population
-// sigma = the standard deviation of the population
-// n = the number of samples in the data
-
-	var i, n;
-	var z:= 0.000;
-	var ArrayMean := Mean(ArrayX);
-	var ArrayLen := Len(ArrayX);
-
-	i := ArrayMean - mu;
-	n := sigma / Sqr(ArrayLen);
-
-	z := i/n;
-
-	return := z;
-
-endfunction
-
-
-function TTest(ArrayX, mu)
-
-// Returns the test statistic for a TTest.   This is used to show
-// the likelihood that a sample is drawn from the population, when 
-// the mean and standard deviation for the entire population are
-// unknown.  The t-statistic is computed as follows:
-//
-//	t = (mean - mu) / (s / (Sqr(n))
-//
-// mean = the mean of the ArrayX data
-// mu = the estimated mean of the entire population
-// s = the standard deviation of the samples
-// n = the number of samples in the data
-
-
-	var i, n, s;
-	var t:= 0.000;
-	var ArrayMean := Mean(ArrayX);
-	var ArrayLen := Len(ArrayX);
-	var s := StdDev(ArrayX);
-
-	i := ArrayMean - mu;
-	n := s / Sqr(ArrayLen);
-
-	t := i/n;
-
-	return := t;
-
-endfunction
-
-
-
-//
-// BITWISE FUNCTIONS: These are very old, and not very efficient.
-// Use the standard $$, ||, etc. for bitwise comparisons.
-// Left intact to support any legacy code.
-
-
-function BitIn(ArrayX)
-
-// Takes an array of 8 bits and converts them into an integer.
-// This is used for the flag support.  IMPORTANT: bit positon is
-// *NOT* the same thing as the array position!   The first bit in 
-// the flag is the 8th bit in the array, and vice versa.  This is
-// because it processes the bit values in the following order:
-// 128, 64, 32, 16, 8, 4, 2, 1.
-
-	local i := 8;
-	local n;
-	local loop := 1;
-	local bitvalue := 0;
-
-	While (i &gt;= 0)
-
-		n := 8 - i;
-		if (ArrayX[i] = 1)
-			bitvalue := bitvalue + Pow(2, n);
-		endif
-		i := i - 1;
-
-	endwhile
-
-	return bitvalue;
-
-endfunction
-
-
-function BitOut(x)
-
-// This function takes an unsigned, short integer (0-255) and returns
-// an array containing the individual bit values.   IMPORTANT: the 
-// first element of the array is NOT the first bit, it is the 8th
-// bit, and so on down.   See the desc for BitIn for the details.
-
-	x := Cint(x);
-	local loop := 1;
-	local bitvalue := 0;
-	local ArrayX := {0,0,0,0,0,0,0,0};
-	local n;
-
-	while (loop &lt;= 8)
-
-		n := 8 - loop;
-		bitvalue := Pow(2, n);
-		if ( (x - bitvalue) &gt;= 0)
-			ArrayX[loop] := 1;
-			x := x - bitvalue;
-		endif
-		loop := loop + 1;
-
-	endwhile
-
-	return ArrayX;
-
-endfunction
-
-
-function BitAnd(x, y)
-
-// Performs a bitwise logical conjunction for two unsigned, short
-// integers (0-255).  If both values for a position are set, then
-// that position in the result is set.   If either are reset, then
-// the position in the result is reset.
-
-	local ArrayX := BitOut(x);
-	local ArrayY := BitOut(y);
-	local z := 0;
-	local loop := 1;
-	local n;
-
-	while (loop &lt;= 8)
-	
-		n := loop - 1;
-		if ( (ArrayX[loop] = 1) AND (ArrayY[loop] = 1) )
-			z := z + Pow(2, n);
-		endif
-		loop := loop + 1;
-
-	endwhile
-
-	return z;
-
-endfunction
-
-
-function BitOr(x, y)
-
-// Performs a bitwise logical disjunction for two unsigned, short
-// integers (0-255).  If either value (or both values) for a 
-// position are set, then that position in the result is set.   If 
-// both are reset, then the position in the result is reset.
-
-	local ArrayX := BitOut(x);
-	local ArrayY := BitOut(y);
-	local z := 0;
-	local loop := 1;
-	locan n;
-
-	while (loop &lt;= 8)
-
-		n := loop - 1;
-		if ( (ArrayX[loop] = 1) OR (ArrayY[loop] = 1) )
-			z := z + Pow(2, n);
-		endif
-		loop := loop + 1;
-
-	endwhile
-
-	return z;
-
-endfunction
-
-
-function BitXor(x, y)
-
-// Performs a bitwise logical exclusion for two unsigned, short
-// integers (0-255).  If one and ONLY one value for a position is
-// set, then that position in the result is set.   If both are 
-// either set or reset, then the position in the result is reset.
-
-	local ArrayX := BitOut(x);
-	local ArrayY := BitOut(y);
-	local z := 0;
-	local loop := 1;
-	local n;
-
-	while (loop &lt;= 8)
-
-		n := loop - 1;
-		if (ArrayX[loop] - ArrayY[loop] &lt;&gt; 0)
-			z := z + Pow(2, n);
-		endif
-		loop := loop + 1;
-
-	endwhile
-
-	return z;
-
-endfunction
-
-
-function BitEqv(x, y)
-
-// Performs a bitwise logical equivalence for two unsigned, short
-// integers (0-255).  If one and ONLY one value for a position is
-// set, then that position in the result is reset.   If both are 
-// either set or reset, then the position in the result is set.
-
-	local ArrayX := BitOut(x);
-	local ArrayY := BitOut(y);
-	local z := 0;
-	local loop := 1;
-	local n;
-
-	while (loop &lt;= 8)
-
-		n := loop - 1;
-		if (ArrayX[loop] - ArrayY[loop] = 0)
-			z := z + Pow(2, n);
-		endif
-		loop := loop + 1;
-
-	endwhile
-
-	return z;
-
-endfunction
-
-
-function BitImp(x, y)
-
-// Performs a bitwise logical implication for two unsigned, short
-// integers (0-255).  If the a position in the first integer is set,
-// and the corresponding position for the second integer is reset,
-// then that position in the result is reset.  All other combinations
-// will result in the value being set.
-
-	local ArrayX := BitOut(x);
-	local ArrayY := BitOut(y);
-	local z := 0;
-	local loop := 1;
-	local n;
-
-	while (loop &lt;= 8)
-
-		n := loop - 1;
-		if (ArrayX[loop] - ArrayY[loop] &lt; 1)
-			z := z + Pow(2, n);
-		endif
-		loop := loop + 1;
-
-	endwhile
-
-	return z;
-
-endfunction
-
-
-function BitNot(x)
-
-// Performs a logical negation on a short, unsigned integer (0-255).
-// If a position in the integer is set, then that position in the
-// result is reset.  Conversely, if a position in the integer is 
-// reset, then that position in the result is set.
-
-	local ArrayX := BitOut(x);
-	local z := 0;
-	local loop := 1;
-	local n;
-
-	while (loop &lt;= 8)
-
-		n := loop - 1;
-		if (ArrayX[loop] = 0)
-			ArrayX[loop] := 1;
-			z := z + Pow(2, n);
-		else
-			ArrayX[loop] := 0;
-		endif
-
-		loop := loop + 1;
-
-	endwhile
-
-	return z;
-
-endfunction
-
-
-function FlagSet(flag, bit);
-
-// This function will set the &lt;bit&gt; position in the &lt;flag&gt; register.
-// Both &lt;flag&gt; and &lt;bit&gt; are integers.
-
-	bit := 9 - bit;
-	
-	local FlagArray := BitOut(flag);
-	FlagArray[bit] := 1;
-
-	bit := BitIn(FlagArray);
-
-	return bit;
-
-endfunction
-
-
-function FlagReset(flag, bit);
-
-// This function will reset the &lt;bit&gt; position in the &lt;flag&gt; register.
-// Both &lt;flag&gt; and &lt;bit&gt; are integers.
-
-	bit := 9 - bit;
-	
-	local FlagArray := BitOut(flag);
-	FlagArray[bit] := 0;
-
-	bit := BitIn(FlagArray);
-
-	return bit;
-
-endfunction
-
-
-function FlagCheck(flag, bit);
-
-// This function will check the flag in the &lt;bit&gt; position of the
-// &lt;flag&gt; register.  It will return a 1 if the flag is set, and a 0
-// if the flag is reset.  Both &lt;flag&gt; and &lt;bit&gt; are integers.
-
-	local FlagArray := BitOut(flag);
-	bit := 9 - bit;
-
-	if (FlagArray[bit] = 1)
-		return 1;
-	else
-		return 0;
-	endif
-
-endfunction

Deleted: trunk/096/scripts/include/moveObject.inc
===================================================================
--- trunk/096/scripts/include/moveObject.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/moveObject.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,31 +0,0 @@
-/*
- * $Id$
- *
- * Purpose
- *
- * Functions for moving an item / mobile 
- * Will decide which function to use -
- * MoveItemToLocation, MoveCharacterToLocation, MoveObjectToRealm
- *
- */
-
-use uo;
-
-
-function MoveObjectToLocation(object, x, y, z, realm, flags:=MOVEITEM_NORMAL)
-	realm := Lower(realm);
-	
-	if ( realm != object.realm )
-		return MoveObjectToRealm(object, realm, x, y, z, flags);
-	else
-		if ( object.IsA(POLCLASS_MOBILE) )
-			return MoveCharacterToLocation(object, x, y, z, flags);
-		else
-			return MoveItemToLocation(object, x, y, z, flags);
-		endif
-	endif
-	
-	// Shouldn't ever reach this spot.
-	return 0;
-endfunction
-

Deleted: trunk/096/scripts/include/mrcSpawn.inc
===================================================================
--- trunk/096/scripts/include/mrcSpawn.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/mrcSpawn.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,321 +0,0 @@
-use cfgfile;
-include &quot;:attributes:attributes&quot;;
-include &quot;include/utility&quot;;
-
-var mrcspawn_cfg := ReadConfigFile(&quot;::mrcspawn&quot;);
-var itemconfig := ReadConfigFile(&quot;:*:itemdesc&quot;);
-var storage := find_or_create_storage(&quot;Merchant Storage&quot;);
-
-function FindMerchantType(mrctype)
-	var npcdesccfg	:= ReadConfigFile(&quot;:*:npcdesc&quot;);
-	var elem := FindConfigElem(npcdesccfg, mrctype);
-	var retval := 0;
-	foreach thing in GetConfigStringArray(elem, &quot;Cprop&quot;)
-		var split := SplitWords(thing);
-		if(split[1] == &quot;MerchantType&quot;)
-			retval := split[2] - split[2][1];
-			break;
-		endif
-	endforeach
-	return retval;
-endfunction
-
-function create_node_merc(merchanttype, name)
-	var inv_rs := find_or_create_item(storage, name + &quot; RS&quot;);
-	var inv_fs := find_or_create_item(storage, name + &quot; FS&quot;);
-	var inv_pb := find_or_create_item(storage, name + &quot; PB&quot;);
-	var inv_1c := find_or_create_item(storage, name + &quot; 1C&quot;);
-	SetObjProperty(inv_rs, &quot;MerchantType&quot;, merchanttype);
-	SetObjProperty(inv_rs, &quot;MyGold&quot;, 5000);
-	StockInventory(merchanttype, inv_rs);
-	RestockInitialInventory(inv_rs, inv_fs);
-endfunction
-
-function destroy_node_merc(name)
-	DestroyRootItemInStorageArea(storage, name + &quot; RS&quot;);
-	DestroyRootItemInStorageArea(storage, name + &quot; FS&quot;);
-	DestroyRootItemInStorageArea(storage, name + &quot; PB&quot;);
-	DestroyRootItemInStorageArea(storage, name + &quot; 1C&quot;);
-endfunction
-
-function StockInventory(merchanttype, inventory)
-	var mtype := FindConfigElem(mrcspawn_cfg, merchanttype);
-	if(mtype)
-		foreach productgroup in GetConfigStringArray(mtype, &quot;Sells&quot;);
-			var pg_elem := FindConfigElem(mrcspawn_cfg, productgroup);
-			foreach itemstr in GetConfigStringArray(pg_elem, &quot;Item&quot;)
-				SpawnItem(inventory, itemstr);
-				sleepms(10);
-			endforeach
-		endforeach
-	endif
-endfunction
-
-function SpawnItem(inventory, itemstr)
-	var split := SplitWords(itemstr);
-	var objtype := split[1];
-	var amt := Cint(split[2]);
-	var buyprice	:= itemconfig[objtype].VendorBuysFor;
-	var sellprice := itemconfig[objtype].VendorSellsFor;
-	if(Cint(objtype))
-		objtype := Cint(objtype);
-	else
-		objtype := Cint(GetObjtypeByName(objtype));
-	endif
-	if(!objtype)
-		syslog(&quot;Could not determine objtype for itemstr: &quot; + itemstr);
-		return;
-	endif
-	var res;
-	if(amt &gt; 0)
-		var i;
-		for( i := 1; i &lt;= amt; i := i + 1 )
-			res := CreateItemInInventory(inventory, objtype, 1);
-			res.buyprice	:= buyprice;
-			res.sellprice := sellprice;
-		endfor
-	endif
-endfunction
-
-function checkstock(rs, pak)
-// purpose: to remove items that the vendor does not carry, but have been sold to it.
-// and replenish the purchasing gold supply for the vendor.
-	var mygold := Cint(GetObjProperty(rs, &quot;MyGold&quot;));
-	foreach thing in EnumerateItemsInContainer(pak)
-		var crs := Cint(GetObjProperty(thing, &quot;ClearRestock&quot;));
-		var cst;
-		if(crs)
-			if(ReadGameClock() &gt; CInt(crs))
-				cst := CInt(itemconfig[thing.objtype].VendorBuysFor) + 5;
-				if(!cst)
-					cst := 1;
-				endif
-				mygold := CInt(mygold + (cst * thing.amount));
-				DestroyItem(thing);
-			endif
-		endif
-	endforeach
-	SetObjProperty(rs, &quot;MyGold&quot;, mygold);
-endfunction
-
-function RestockInitialInventory(source, destination)
-// When vendors start up, they need a slightly different script.
-	var merchanttype := GetObjProperty(source, &quot;MerchantType&quot;);
-	var multiplier, amt, mlt, things;
-	var newarray := {};
-	foreach thing in EnumerateItemsInContainer(source)
-		newarray.append(thing.objtype);
-		amt := 0;
-		multiplier := CInt(GetObjProperty(thing, &quot;Multiplier&quot;));
-		var chk := CountExisting(destination, thing.objtype);
-		things := chk[2];
-		amt := chk[1];
-		if(amt &gt;= (thing.amount * multiplier))
-			multiplier := multiplier - 1;
-			if(multiplier &lt; 1)
-				multiplier := 1;
-			endif
-		elseif(amt == 0)
-			multiplier := multiplier + 1;
-			if(multiplier &gt; 20)
-				multiplier := 20;
-			endif
-		endif
-		SetObjProperty(thing, &quot;Multiplier&quot;, multiplier);
-		mlt := Cint(thing.amount * multiplier);
-		var buyprice := Cint(thing.buyprice);
-		var sellprice := Cint(thing.sellprice);
-		var res;
-		if(amt != mlt)
-			foreach widget in things
-				DestroyItem(widget);
-			endforeach
-			if(amt &gt; mlt)
-				res := CreateItemInInventory(destination, thing.objtype, mlt);
-				if(res)
-					res.sellprice := sellprice;
-					res.buyprice := buyprice;
-				endif
-			elseif(amt &lt; mlt)
-				var i;
-				for(i:=1; i&lt;= mlt; i := i+1)
-					var res := CreateItemInInventory(destination, thing.objtype, 1);
-					res.sellprice := sellprice;
-					res.buyprice := buyprice;
-					sleepms(1);
-				endfor
-			endif
-		endif
-		sleepms(1);
-	endforeach
-	foreach thing in EnumerateItemsInContainer(destination)
-		if((!(thing.objtype in newarray)) and (!GetObjProperty(thing, &quot;ClearRestock&quot;)))
-			DestroyItem(thing);
-		endif
-	endforeach
-endfunction
-
-function RestockMyInventory(source, destination)
-	var merchanttype := GetObjProperty(source, &quot;MerchantType&quot;);
-	var multiplier, amt, mlt, items, mygold;
-	var newarray := {}; // Array of what's for sale
-	// cycle through everything that's for sale
-	foreach thing in EnumerateItemsInContainer(source)// this is the &quot;ideal&quot; stock.
-		newarray.append(thing.objtype);
-		amt := 0;
-		mygold := GetObjProperty(source, &quot;MyGold&quot;);
-		multiplier := CInt(GetObjProperty(thing, &quot;Multiplier&quot;)); // multiplier of increments.
-		var chk := CountExisting(destination, thing.objtype); // to see what we got *really* for sale
-		items := chk[2];// returns all of a particular item, stacked or unstacked. (array)
-		amt := chk[1];
-		
-		// determine whether to increase or decrease stock.
-		if(amt &gt;= (thing.amount * multiplier))
-			multiplier := multiplier - 1;
-			if(multiplier &lt; 1)
-				multiplier := 1;
-			endif
-		elseif(amt == 0)
-			multiplier := multiplier + 1;
-			if(multiplier &gt; 20)
-				multiplier := 20;
-			endif
-		endif
-		SetObjProperty(thing, &quot;Multiplier&quot;, multiplier);
-		
-		mlt := Cint(thing.amount * multiplier); // mlt is the amount that should be in stock
-		
-		if(amt != mlt)
-			// define characteristics of the items
-			var buyprice := Cint(thing.buyprice);
-			var sellprice := Cint(thing.sellprice);
-
-			// remove what remains
-			foreach widget in items
-				mygold := mygold + Cint(widget.amount * buyprice);
-				DestroyItem(widget);
-			endforeach
-			var i;
-			// make one of everything you need
-			for(i:=1; i&lt;= mlt; i := i+1)
-				if((mygold &gt; buyprice) or (merchanttype == &quot;Architect&quot;))
-					var res := CreateItemInInventory(destination, thing.objtype, 1);
-					res.sellprice := sellprice;
-					res.buyprice := buyprice;
-					if(merchanttype != &quot;Architect&quot;)
-						mygold := mygold - buyprice;
-					endif
-				sleepms(1);
-				endif
-			endfor
-		endif
-		SetObjProperty(source, &quot;MyGold&quot;, mygold);
-		sleepms(1);
-	endforeach
-
-	// ditch the leftovers
-	foreach thing in EnumerateItemsInContainer(destination)
-		if((!(thing.objtype in newarray)) and (!GetObjProperty(thing, &quot;ClearRestock&quot;)))
-			mygold := mygold + Cint(thing.amount * thing.buyprice);
-			DestroyItem(thing);
-		endif
-	endforeach
-	SetObjProperty(source, &quot;MyGold&quot;, mygold);
-endfunction
-
-function CountExisting(container, objtype)
-	var amt := 0;
-	var things := {};
-	foreach thing in EnumerateItemsInContainer(container)
-		if((thing.objtype == objtype) and (Cint(GetObjProperty(thing, &quot;ClearRestock&quot;)) == 0))
-			things.append(thing);
-			amt := amt + thing.amount;
-		endif
-	endforeach
-	var ary := {};
-	ary.append(amt);
-	ary.append(things);
-	return ary;
-endfunction
-
-function ModifyPCSellList(merchanttype, backpack)
-	var backpackitems := ListRootItemsInContainer(backpack);
-	var prodgroups := FindConfigElem(mrcspawn_cfg, merchanttype);
-	var buys := GetConfigStringArray(prodgroups, &quot;Buys&quot;);
-	var normcost, normsell, percentage;
-	
-	//  If not buying lets call the whole thing off.
-	if(buys.size() &lt; 1)
-		return 0;
-	endif
-
-	var iteminit := 0;
-	var itemmark := -1;
-	
-	// set buy price for each item to be 0 to start. This means it won't be sellable.
-	foreach item in backpackitems
-		item.buyprice := iteminit;
-	endforeach
-	
-	var buynobuyable := { }; 
-	var objtype;
-	var counter := 0;
-	
-	// Populate the array of items the vendor will buy.
-	foreach prodgroup in buys
-		foreach itemstr in GetConfigStringArray(FindConfigElem(mrcspawn_cfg, prodgroup), &quot;Item&quot;)
-			itemstr := SplitWords(itemstr);
-			objtype := itemstr[1];
-			if(CInt(objtype))
-				objtype := CInt(objtype);
-			else
-				objtype := GetObjtypeByName(objtype);
-			endif
-			buynobuyable.append(objtype);
-		endforeach
-	endforeach
-	
-	// compare all the items in the top level of the backpack to things the vendor can buy and set the price.
-	if(buynobuyable.size())
-		foreach item in backpackitems
-			if((item.objtype in buynobuyable) &amp;&amp; (!item.newbie))
-				counter := counter + 1;
-				if(!item.quality)
-					item.quality := 1;
-				endif
-				normcost := itemconfig[item.objtype].VendorBuysFor;
-				normsell := itemconfig[item.objtype].VendorSellsFor;
-				normcost := normcost * item.quality;
-				normsell := normsell * item.quality;
-				percentage := ((item.hp * 10) / item.maxhp);
-				if(percentage)
-					normcost := CInt((normcost * percentage) / 10);
-					normsell := CInt((normsell * percentage) / 10);
-					item.buyprice := normcost;
-					item.sellprice := normsell;
-				else
-					item.buyprice := itemmark;
-				endif
-			endif
-		endforeach
-	endif
-	return counter;
-endfunction
-
-/*
-function Merchants(merchantgroup)
-	var result := array;
-	var mrc := array;
-	mrc.+name;
-	mrc.+type;
-	var group_elem := FindConfigElem(mrcspawn_cfg, merchantgroup);
-	var count := GetConfigInt(group_elem, &quot;MerchantCount&quot; );
-	var i;
-	for( i := 1; i &lt;= count; i := i + 1 )
-		mrc.name := GetConfigString(group_elem, &quot;Merchant&quot; + i);
-		mrc.type := GetConfigString(group_elem, &quot;MerchantType&quot;+i);
-		result[i] := mrc;
-	endfor
-	return result;
-endfunction
-*/
\ No newline at end of file

Deleted: trunk/096/scripts/include/myUtil.inc
===================================================================
--- trunk/096/scripts/include/myUtil.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/myUtil.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,97 +0,0 @@
-use cfgfile;
-
-//returns all the items in container of objtype
-function EnumerateItemsInContainerOfObjtype(container, objtype)
-
-	var ret := { };
-        foreach item in EnumerateItemsInContainer(container)
-		if ( item.objtype == objtype )
-			ret.append(item);
-		endif
-	endforeach
-
-	return ret;
-
-endfunction
-
-//returns all the 'top-level' items in container
-function ListRootItemsInContainer(container)
-
-	var ret := { };
-        foreach item in EnumerateItemsInContainer(container)
-		if ( item.container == container )
-			ret.append(item);
-		endif
-	endforeach
-
-	return ret;
-
-endfunction
-
-//returns all the 'top-level' items in container of objtype
-function ListRootItemsInContainerOfObjtype(container, objtype)
-
-	var ret := { };
-        foreach item in EnumerateItemsInContainer(container)
-		if ( (item.container == container) &amp;&amp; (item.objtype == objtype) )
-			ret.append(item);
-		endif
-	endforeach
-
-	return ret;
-
-endfunction
-
-function InInventory(inventory, it)
-
-	foreach item in EnumerateItemsInContainer(inventory)
-		if (item == it)
-			return 1;
-		endif
-	endforeach
-
-	return 0;
-
-endfunction
-
-function IsContainer( it )
-
-	if (it.objtype == 0x7057)
-		return 0;//trashcans don't count as containers
-		         // random note- huh? trashcans are 0x7007...
-	endif
-
-	var waslocked := it.locked;
-	it.locked := 1;
-	if (it.locked)
-		it.locked := waslocked;
-		return 1;
-	else
-		return 0;
-	endif
-
-endfunction
-
-function IsDungeon( x, y )
-
-	if ( (x &gt;= 5120) &amp;&amp; (x &lt;= 6143) )
-		if ( (y &gt;= 0) &amp;&amp; (y &lt;= 2303) )
-			return 1;
-		endif
-	endif
-
-	return 0;
-
-endfunction
-
-function NoTeleportZone( x, y )
-
-	if ( (x &gt;= 5120) &amp;&amp; (x &lt;= 6143) )
-		if ( (y &gt;= 2080) &amp;&amp; (y &lt;= 2303) )
-			return 1;
-		endif
-	endif
-
-	return 0;
-
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/noto.inc
===================================================================
--- trunk/096/scripts/include/noto.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/noto.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,236 +0,0 @@
-use uo;
-use util;
-use math;
-
-include &quot;:attributes:attributes&quot;;
-
-var nototitles :=
-{
-    {&quot;Outcast&quot;,     &quot;Wretched&quot;,     &quot;Nefarious&quot;, &quot;Dread&quot;,         &quot;Dread&quot;},
-    {&quot;Despicable&quot;,  &quot;Dastardly&quot;,    &quot;Wicked&quot;,    &quot;Evil&quot;,          &quot;Evil&quot;},
-    {&quot;Scoundrel&quot;,   &quot;Malicious&quot;,    &quot;Vile&quot;,      &quot;Villainous&quot;,    &quot;Dark&quot;},
-    {&quot;Unsavory&quot;,    &quot;Dishonorable&quot;, &quot;Ignoble&quot;,   &quot;Sinister&quot;,      &quot;Sinister&quot;},
-    {&quot;Rude&quot;,        &quot;Disreputable&quot;, &quot;Notorious&quot;, &quot;Infamous&quot;,      &quot;Dishonored&quot;},
-    {&quot;None&quot;,        &quot;Notable&quot;,      &quot;Prominent&quot;, &quot;Reknowned&quot;,     &quot;&quot;},
-    {&quot;Fair&quot;,        &quot;Upstanding&quot;,   &quot;Reputable&quot;, &quot;Distinguished&quot;, &quot;Distinguished&quot;},
-    {&quot;Kind&quot;,        &quot;Respectable&quot;,  &quot;Proper&quot;,    &quot;Eminent&quot;,       &quot;Eminent&quot;},
-    {&quot;Good&quot;,        &quot;Honorable&quot;,    &quot;Admirable&quot;, &quot;Noble&quot;,         &quot;Noble&quot;},
-    {&quot;Honest&quot;,      &quot;Commendable&quot;,  &quot;Famed&quot;,     &quot;Illustrious&quot;,   &quot;Illustrious&quot;},
-    {&quot;Trustworthy&quot;, &quot;Estimable&quot;,    &quot;Great&quot;,     &quot;Glorious&quot;,      &quot;Glorious&quot;}
-};
-
-function AdjustNoto(attacker, defender)
-  if(attacker.isA(POLCLASS_NPC))
-    return;
-  endif
-  var karma   := CInt(GetObjProperty(attacker, &quot;Karma&quot;));
-  var fame    := CInt(GetObjProperty(attacker, &quot;Fame&quot;));
-  var dkarma  := CInt(GetObjProperty(defender, &quot;Karma&quot;));
-  var dfame   := CInt(GetObjProperty(defender, &quot;Fame&quot;));
-  var dfchk, dkchk;
-  if(defender.isA(POLCLASS_MOBILE))
-    dkarma := dkarma / 100.0;
-    dkchk := dkarma * 10;
-  elseif(!AP_GetStat(defender, &quot;Strength&quot;))
-    dkarma := dkarma * 10;
-    dkchk := dkarma * 10;
-    dkchk := 0 - dkchk;
-  endif
-  if(defender.isA(POLCLASS_MOBILE))
-    dfame := dfame / 100.0;
-    dfchk := dfame * 10;
-  elseif(!AP_GetStat(defender, &quot;Strength&quot;))
-    dfchk := dfame * 100;
-    dfame := dfame * 10;
-  endif
-  var kmod      := GetKarmaLevel(karma) - 6;
-  var fmod      := GetFameLevel(fame);
-  var dkmod     := GetKarmaLevel(dkchk) - 6;
-  var dfmod     := GetFameLevel(dfchk);
-  var famegain  := dfame;
-  var karmagain := (0 - dkarma);
-  var chk := 0;
-  if(karmagain &gt;= 0)
-    chk := 1;
-  endif
-  if(Abs(kmod) &gt; Abs(dkmod))
-    karmagain := 0;
-  elseif(Abs(kmod) == Abs(dkmod))
-    karmagain := Abs(karmagain) / 4;
-    if(chk == 0)
-      karmagain := (0 - karmagain);
-    endif
-  else
-    karmagain := Abs(karmagain) / 2;
-    var holder := 0;
-    case(dkmod - kmod)
-      1: holder := 0.15;
-      2: holder := 0.30;
-      3: holder := 0.45;
-      4: holder := 0.60;
-      5: holder := 0.75;
-      6: holder := 0.90;
-    endcase
-    karmagain := karmagain + CInt(karmagain * holder);
-    if(chk == 0)
-      karmagain := (0 - karmagain);
-    endif
-  endif
-  if(fmod == dfmod)
-    famegain := famegain / 4;
-  elseif(fmod &gt; dfmod)
-    famegain := 0;
-  else
-    famegain := famegain / 2;
-  endif
-  if(defender.isA(POLCLASS_MOBILE))
-    famegain := famegain / 100;
-    karmagain := karmagain / 100;
-  endif
-  karma := karma + karmagain;
-  fame := fame + famegain;
-  var online := 0;
-  if(!attacker.isA(POLCLASS_NPC))
-    foreach char in EnumerateOnlineCharacters()
-      if(char == attacker)
-        online := 1;
-        break;
-      endif
-    endforeach
-    if(online == 1)
-      SetObjProperty(attacker, &quot;Karma&quot;, karma);
-      SetObjProperty(attacker, &quot;Fame&quot;, fame);
-      SendGainMessage(attacker, &quot;Fame&quot;, famegain);
-      SendGainMessage(attacker, &quot;Karma&quot;, karmagain);
-    else
-      SetObjProperty(attacker, &quot;ModKarma&quot;, kmod);
-      SetObjProperty(attacker, &quot;ModFame&quot;, famegain);
-    endif
-  else
-    SetObjProperty(attacker, &quot;Karma&quot;, karma);
-    SetObjProperty(attacker, &quot;Fame&quot;, fame);
-  endif
-  if(attacker.isA(POLCLASS_MOBILE))
-    SetNotoTitle(attacker, karma, fame);
-  endif
-  if(defender.isA(POLCLASS_MOBILE))
-    SetNotoTitle(defender, kmod, fmod);
-  endif
-endfunction
-
-function GetFameLevel(fame)
-  var fmod := 0;
-  if((fame &lt;= 1249) &amp;&amp; (fame &gt;= 0))
-    fmod := 1;
-  elseif((fame &lt;= 2499) &amp;&amp; (fame &gt;= 1250))
-    fmod := 2;
-  elseif((fame &lt;= 4999) &amp;&amp; (fame &gt;= 2500))
-    fmod := 3;
-  elseif((fame &lt;= 9999) &amp;&amp; (fame &gt;= 5000))
-    fmod := 4;
-  elseif(fame &gt;= 10000)
-    fmod := 5;
-  endif
-  return fmod;
-endfunction
-
-function GetKarmaLevel(karma)
-  var kmod := 0;
-  if(karma &lt;= -10000)
-    kmod := 1;
-  elseif((karma &lt;= -5000) &amp;&amp; (karma &gt;= -9999))
-    kmod := 2;
-  elseif((karma &lt;= -2500) &amp;&amp; (karma &gt;= -4999))
-    kmod := 3;
-  elseif((karma &lt;= -1250) &amp;&amp; (karma &gt;= -2499))
-    kmod := 4;
-  elseif((karma &lt;=  -625) &amp;&amp; (karma &gt;= -1249))
-    kmod := 5;
-  elseif((karma &lt;=   624) &amp;&amp; (karma &gt;=  -624))
-    kmod := 6;
-  elseif((karma &lt;=  1249) &amp;&amp; (karma &gt;=   625))
-    kmod := 7;
-  elseif((karma &lt;=  2499) &amp;&amp; (karma &gt;=  1250))
-    kmod := 8;
-  elseif((karma &lt;=  4999) &amp;&amp; (karma &gt;=  2500))
-    kmod := 9;
-  elseif((karma &lt;=  9999) &amp;&amp; (karma &gt;=  5000))
-    kmod := 10;
-  elseif(karma &gt;= 10000)
-    kmod := 11;
-  endif
-  return kmod;
-endfunction
-
-function SetNotoTitle(who, karma, fame)
-  var kmod := GetKarmaLevel(karma);
-  var fmod := GetFameLevel(fame);
-  var newtitle := nototitles[ (kmod) ];
-  
-  // That trailing space seems to be unneeded
-  //newtitle := &quot;The &quot; + CStr(newtitle[fmod]) + &quot; &quot;;
-  newtitle := &quot;The &quot; + CStr(newtitle[fmod]);
-  
-  if(newtitle[&quot;None&quot;])
-    newtitle := &quot;&quot;;
-  endif
-  if(fmod == 5)
-    if(who.gender == 1)
-      newtitle := newtitle + &quot; Lady&quot;;
-    else
-      newtitle := newtitle + &quot; Lord&quot;;
-    endif
-  endif
-  if(newtitle != who.title_prefix)
-    who.title_prefix := newtitle;
-    SendSysMessage(who, &quot;You are now known as &quot; + newtitle + &quot; &quot; + who.name);
-  endif
-endfunction
-
-function SendGainMessage(who, type, amount)
-  var msgtext := &quot;You have &quot;;
-  if(amount &lt; 0)
-    msgtext := msgtext + &quot;lost &quot;;
-    amount := Abs(amount);
-  else
-    msgtext := msgtext + &quot;gained &quot;;
-  endif
-  if(amount &gt; 150)
-    msgtext := msgtext + &quot;a great amount of &quot;;
-  elseif(amount &gt; 125)
-    msgtext := msgtext + &quot;a lot of &quot;;
-  elseif(amount &gt; 75)
-    msgtext := msgtext + &quot;a good amount of &quot;;
-  elseif(amount &gt; 30)
-    msgtext := msgtext + &quot;some &quot;;
-  elseif(amount &gt; 0)
-    msgtext := msgtext + &quot;a little &quot;;
-  else
-    return 0;
-  endif
-  msgtext := msgtext + type + &quot;.&quot;;
-  SendSysMessage(who, msgtext);
-endfunction
-
-function ExceptionalFameMod(who, skill, diff, points)
-  if(skill &gt; (diff - 20))
-    if((skill - diff) &lt;= 5)
-      points := points;
-    elseif((skill - diff) &lt;= 10)
-      points := (points * 3) / 4;
-    elseif((skill - diff) &lt;= 15)
-      points := points / 2;
-    elseif((skill - diff) &lt;= 20)
-      points := points / 4;
-    else
-      points := 0;
-    endif
-    points := CInt(points);
-    var fame := CInt(GetObjProperty(who, &quot;Fame&quot;));
-    var famegain := fame + points;
-    SetObjProperty(who, &quot;Fame&quot;, famegain);
-
-    SendGainMessage(who, &quot;fame&quot;, points);
-    SetNotoTitle(who, CInt(GetObjProperty(who, &quot;Karma&quot;)), CInt(GetObjProperty(who, &quot;Fame&quot;)));
-  endif
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/objtype.inc
===================================================================
--- trunk/096/scripts/include/objtype.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/objtype.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,220 +0,0 @@
-/////////////////////////////////////////////////////////////////////////////
-//
-// include/objtype.inc - Object Type definitions
-//
-// TODO: consider moving these into include/client.inc
-//       or, moving CID_XX CONSTants in here
-//
-/////////////////////////////////////////////////////////////////////////////
-
-/////////////////////////////////////////////////////////////////////////////
-//
-// 0x0000 to 0x3FFF - &quot;Standard&quot; objects
-//
-/////////////////////////////////////////////////////////////////////////////
-
-CONST UOBJ_STONEWALL_NS := 0x005f;
-CONST UOBJ_STONEWALL_EW := 0x0060;
-CONST UOBJ_GUARDS       := 0xa340;
-CONST UOBJ_FISHSTEAK    := 0x097a;
-
-CONST UOBJ_BOX          := 0x09aa;
-
-CONST UOBJ_FISH_START   := 0x09cc;
-CONST UOBJ_FISH_END     := 0x09cf;
-
-CONST UOBJ_SFISH_START  := 0x0dd6;
-CONST UOBJ_SFISH_END    := 0x0dd9;
-
-CONST UOBJ_KINDLING     := 0x0de1;
-CONST UOBJ_CAMPFIRE     := 0x0de3;
-CONST UOBJ_EMBERS       := 0x0de9;
-CONST UOBJ_ASHES        := 0x0dea;
-
-CONST UOBJ_BANDAGE      := 0x0e21;
-CONST UOBJ_BLANK_SCROLL := 0x0e34;
-
-CONST UOBJ_BANKBOX      := 0x0e40;
-
-CONST UOBJ_DRUM         := 0x0e9c;
-CONST UOBJ_TAMB         := 0x0e9d;
-CONST UOBJ_HARP         := 0x0eb2;
-CONST UOBJ_LUTE         := 0x0eb3;
-
-CONST UOBJ_SPELLBOOK        := 0x0efa;
-
-CONST UOBJ_POISON_POTION    := 0x0f0a;
-CONST UOBJ_EMPTY_BOTTLE     := 0x0f0e;
-
-CONST UOBJ_GEM_START        := 0x0f0f;
-CONST UOBJ_GEM_END          := 0x0f30;
-
-CONST UOBJ_SHOVEL           := 0x0f39;
-
-CONST UOBJ_XBOW             := 0x0f4f;
-
-CONST UOBJ_BLUE_MOONGATE    := 0x0f6c;
-
-
-
-CONST UOBJ_CLAY             := 0xee19;
-CONST UOBJ_SAND             := 0xee18;
-
-
-
-
-CONST UOBJ_BLACK_PEARL      := 0x0f7a;
-CONST UOBJ_BLOOD_MOSS       := 0x0f7b;
-CONST UOBJ_BRIMSTONE        := 0x0f7f;
-CONST UOBJ_FERTILE_DIRT     := 0x0f81;
-CONST UOBJ_EXECUTIONERS_CAP := 0x0f83;
-CONST UOBJ_GARLIC           := 0x0f84;
-CONST UOBJ_GINSENG          := 0x0f85;
-CONST UOBJ_MANDRAKE_ROOT    := 0x0f86;
-CONST UOBJ_NIGHTSHADE       := 0x0f88;
-CONST UOBJ_OBSIDIAN         := 0x0f89;
-CONST UOBJ_PIG_IRON         := 0x0f8a;
-CONST UOBJ_SULFUROUS_ASH    := 0x0f8c; // CHECKME spelling
-CONST UOBJ_SPIDER_SILK      := 0x0f8d;
-CONST UOBJ_VOLCANIC_ASH     := 0x0f8f;
-
-CONST UOBJ_DEAD_WOOD    := 0x0f90;
-
-CONST UOBJ_CLOTH        := 0x0f95;
-CONST UOBJ_CLOTH_STARTS := 0x175d;
-CONST UOBJ_CLOTH_END    := 0x1768;
-CONST UOBJ_LOOM_START   := 0x105f;
-CONST UOBJ_LOOM_END     := 0x1066;
-CONST UOBJ_BOLT_START   := 0x0f95;
-CONST UOBJ_BOLT_END     := 0x0f9c;
-CONST UOBJ_THREAD_START := 0x0fa0;
-CONST UOBJ_THREAD_END   := 0x0fa1;
-CONST UOBJ_MUTLI_CLOTH  := 0x1766;
-CONST UOBJ_SEWING_KIT   := 0x0f9d;
-
-CONST UOBJ_ANVIL1       := 0x0faf;
-CONST UOBJ_ANVIL2       := 0x0fb0;
-CONST UOBJ_SMALL_FORGE  := 0xfb1;  // see also UOBJ_FORGE_START..UOBJ_FORGE_END
-CONST UOBJ_FORGE1       := 0x19a2;
-CONST UOBJ_FORGE2       := 0x19a6;
-CONST UOBJ_FORGE3       := 0x1982;
-CONST UOBJ_FORGE4       := 0x1996;
-CONST UOBJ_FORGE5       := 0x199a;
-CONST UOBJ_FORGE6       := 0x198e;
-CONST UOBJ_FORGE7       := 0x1992;
-CONST UOBJ_FORGE8       := 0x1986;
-CONST UOBJ_FORGE9       := 0x198a;
-
-CONST UOBJ_COPPER_KEY   := 0x100e;
-CONST UOBJ_GOLD_KEY     := 0x100f;
-CONST UOBJ_IRON_KEY     := 0x1010;
-CONST UOBJ_KEY_RING     := 0x1011;
-CONST UOBJ_MAGIC_KEY    := 0x1012;
-CONST UOBJ_RUSTY_IRON_KEY := 0x1013;
-
-CONST UOBJ_CLOCK   := 0x104c;
-CONST UOBJ_CLOCK_FRAME   := 0x104e;
-CONST UOBJ_CLOCK_PARTS   := 0x104f;
-CONST UOBJ_AXLE_AND_GEARS   := 0x1051;
-CONST UOBJ_GEARS   := 0x1053;
-CONST UOBJ_HINGE   := 0x1055;
-CONST UOBJ_SEXTANT   := 0x1057;
-CONST UOBJ_SEXTANT_PARTS   := 0x1059;
-CONST UOBJ_AXLE   := 0x105b;
-CONST UOBJ_SPRINGS   := 0x105d;
-
-CONST UOBJ_TDUMMYSWING_NS     := 0x1071;
-CONST UOBJ_TDUMMYFREEZE_NS    := 0x1070;
-CONST UOBJ_TDUMMYSWING_EW     := 0x1075;
-CONST UOBJ_TDUMMYFREEZE_EW    := 0x1074;
-
-CONST UOBJ_PDUMMYSWING_EW       := 0x1EC1;
-CONST UOBJ_PDUMMYFREEZE_EW      := 0x1EC0;
-CONST UOBJ_PDUMMYSWING_NS       := 0x1EC4;
-CONST UOBJ_PDUMMYFREEZE_NS      := 0x1EC3;
-
-CONST UOBJ_BLOOD        := 0x122d;
-
-CONST UOBJ_BOW          := 0x13b2;
-CONST UOBJ_HEAVY_XBOW   := 0x13fd;
-
-CONST UOBJ_MAP1         := 0x14eb;
-CONST UOBJ_MAP2         := 0x14ec;
-CONST UOBJ_ROLLED_MAP1  := 0x14ed;
-CONST UOBJ_ROLLED_MAP2  := 0x14ee;
-
-CONST UOBJ_HOUSE_DEED1  := 0x14ef;
-CONST UOBJ_SHIP_DEED1   := 0x14f1;
-CONST UOBJ_SHIP_DEED2   := 0x14f2;
-
-CONST UOBJ_CHEST        := 0x1940;
-
-CONST UOBJ_FORGE_START  := 0x197a;  // see also UOBJ_SMALL_FORGE
-CONST UOBJ_FORGE_END    := 0x19a9;
-
-CONST UOBJ_FEATHER      := 0x1bd1;
-CONST UOBJ_SHAFTS       := 0x1bd4;
-CONST UOBJ_LOGS         := 0x1bdd;
-
-CONST UOBJ_GLASS        := 0xee20;
-
-CONST UOBJ_ARM          := 0x1cec;
-CONST UOBJ_LEG          := 0x1ce2;
-CONST UOBJ_TRUNK        := 0x1cee;
-CONST UOBJ_HEART        := 0x1cef;
-CONST UOBJ_HEAD         := 0x1dae;
-
-CONST UOBJ_TINKER_TOOLS := 0x1ebc;
-
-
-CONST UOBJ_RUNE         := 0x1f14;
-
-CONST UOBJ_CORPSE       := 0x2006;
-
-CONST UOBJ_PARAFIELD_NS := 0x3967;
-CONST UOBJ_PARAFIELD_EW := 0x3979;
-CONST UOBJ_POISONFIELD_NS   := 0x3914;
-CONST UOBJ_POISONFIELD_EW   := 0x3920;
-CONST UOBJ_EFIELD_NS        := 0x3947;
-CONST UOBJ_EFIELD_EW        := 0x3956;
-
-CONST GID_PLANK_EXTENDED_FACING_WEST   := 0x3ed5;
-CONST GID_PLANK_RETRACTED_FACING_WEST  := 0x3eb1;
-CONST GID_PLANK_EXTENDED_FACING_EAST   := 0x3ed4;
-CONST GID_PLANK_RETRACTED_FACING_EAST  := 0x3eb2;
-CONST GID_PLANK_EXTENDED_FACING_SOUTH  := 0x3e84;
-CONST GID_PLANK_RETRACTED_FACING_SOUTH := 0x3e85;
-CONST GID_PLANK_EXTENDED_FACING_NORTH  := 0x3e89;
-CONST GID_PLANK_RETRACTED_FACING_NORTH := 0x3e8a;
-
-// ick! these are fine for humans, but not true for items..
-// these are more of a CID.
-CONST UOBJ_HUMAN_MALE   := 0x190;
-CONST UOBJ_HUMAN_FEMALE := 0x191;
-
-/////////////////////////////////////////////////////////////////////////////
-//
-// 0x4000 to 0x4FFF - Multis
-//
-/////////////////////////////////////////////////////////////////////////////
-
-/////////////////////////////////////////////////////////////////////////////
-//
-// 0x5000 to 0xEFFF - To Be Determined
-//
-/////////////////////////////////////////////////////////////////////////////
-
-
-/////////////////////////////////////////////////////////////////////////////
-//
-// 0xF000 to 0xFFFF - Reserved by system
-//
-/////////////////////////////////////////////////////////////////////////////
-
-        //
-        // Ship Components
-        //
-CONST EXTOBJ_TILLERMAN       := 0xf010;
-CONST EXTOBJ_PORT_PLANK      := 0xf011;
-CONST EXTOBJ_STARBOARD_PLANK := 0xf012;
-CONST EXTOBJ_HOLD            := 0xf013;

Modified: trunk/096/scripts/include/packets.inc
===================================================================
--- trunk/096/scripts/include/packets.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/packets.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,4 +1,4 @@
-/* $Id: packets.inc,v 1.1 2004/03/16 14:05:46 folko Exp $
+/* $Id$
  *
  * Purpose
  * Provide various functions and constants for raw packets.
@@ -38,11 +38,11 @@
  *
  */
 function SendFeatures(who, features)
-    var packet;
+	var packet;
     
-    packet := CreatePacket(PACKET_FEATURES, 0x03);
-    packet.SetInt16(1, features);
-    packet.SendPacket(who);
+	packet := CreatePacket(PACKET_FEATURES, 0x03);
+	packet.SetInt16(1, features);
+	packet.SendPacket(who);
 
-    return;
+	return 1;
 endfunction

Deleted: trunk/096/scripts/include/properties.inc
===================================================================
--- trunk/096/scripts/include/properties.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/properties.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,88 +0,0 @@
-/* $Id: properties.inc,v 1.1 2004/03/16 14:05:46 folko Exp $
- *
- * Purpose
- * Provide property names and functions. Properties starting with &quot;+&quot; are to be protected.
- *
- */
-use uo;
-
-include &quot;include/log&quot;;
-
-const SECURE_MAGIC          := 0xBADC0DE;
-
-enum MOB_PROPS
-    PROP_STAFF_LEVEL        := &quot;+StaffLevel&quot;,        // Text command access level
-    PROP_CREATION_TIME      := &quot;CreationTime&quot;,       // Character creation time (UNIX timestamp)
-    MOB_CPROPS_END          := 0
-endenum
-
-enum ITEM_PROPS
-    ITEM_CPROPS_END         := 0
-endenum
-
-enum WORLD_PROPS
-    PROP_PID                := &quot;#PID&quot;,              // Array with all resistent scripts
-    PROP_TIMESTAMP          := &quot;TimeStamp&quot;,         // Struct describing the time
-    WORLD_PROPS_END         := 0
-endenum
-
-
-// These properties only exist for a short time
-enum TEMP_PROPS
-    TEMPPROP_JUST_CREATED   := &quot;#JustCreated&quot;,      // Character was just created
-    TEMPPROP_SCHED_PID      := &quot;#SchedPID&quot;,         // PID of script scheduler
-    TEMP_PROPS_END          := 0
-endenum
-
-
-/*
- * The following functions replace the default ObjProperty functions. Use these instead to avoid
- * changing secured properies. If your script is safe, pass SECURE_MAGIC as magic.
- *
- */
-function SetProperty(what, property, value, magic := 0)
-    if(property[1] == &quot;+&quot;)
-        if(magic == SECURE_MAGIC)
-            Log(LOG_WARNING, &quot;Overwrote secure property '&quot; + property + &quot;' with '&quot; + CStr(value) + &quot;' on '&quot; +
-                GetLogInfo(what) + &quot;'&quot;);
-        else
-            Log(LOG_ERROR, &quot;Failed to overwrite secure property '&quot; + property + &quot;' with '&quot; + CStr(value) + &quot;' on '&quot; +
-                GetLogInfo(what) + &quot;'&quot;);
-            return(error);
-        endif
-    endif
-    return(SetObjProperty(what, property, value));
-endfunction
-
-function GetProperty(what, property, magic := 0)
-    if(property[1] == &quot;+&quot; &amp;&amp; magic != SECURE_MAGIC)
-        Log(LOG_ERROR, &quot;Refused to GetProperty on secure property '&quot; + property + &quot;' on '&quot; + GetLogInfo(what) + &quot;'&quot;);
-        return(error);
-    endif
-    return(GetObjProperty(what, property));
-endfunction
-
-function EraseProperty(what, property, magic := 0)
-    if(property[1] == &quot;+&quot; &amp;&amp; magic != SECURE_MAGIC)
-        Log(LOG_ERROR, &quot;Refused to erase secure property '&quot; + property + &quot;' on '&quot; + GetLogInfo(what) + &quot;'&quot;);
-        return(error);
-    endif
-    return(EraseObjProperty(what, property));
-endfunction
-
-function GetPropertyNames(what, magic := 0)
-    var props, i;
-
-    if(magic == SECURE_MAGIC)
-        return(GetObjPropertyNames(what));
-    endif
-    
-    props := GetObjPropertyNames(what);
-    for(i := 1; i &lt;= props.size(); i := i + 1)
-        if(props[i][1] == &quot;+&quot;)
-            props.erase(i);
-            i := i - 1;
-        endif
-    endfor
-    return(props);
-endfunction

Deleted: trunk/096/scripts/include/recallRune.inc
===================================================================
--- trunk/096/scripts/include/recallRune.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/recallRune.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,48 +0,0 @@
-use uo;
-use os;
-
-function Rename_Rune(who,rune)
-        if (GetObjProperty( rune, &quot;x&quot; ) == error)
-                SendSysMessage( who, &quot;That rune is not marked.&quot; );
-                return;
-        endif
-
-	var mark := CInt(GetObjProperty( rune, &quot;mark&quot; ));
-        var descrip := &quot;a &quot;;
-
-	if (mark&lt;4)
-               	if (mark&lt;2)
-               		descrip := descrip + &quot;nearly blanked&quot;;
-       		else
-               		descrip := descrip + &quot;worn&quot;;
-       		endif
-       	endif
-
-	if (GetObjProperty( rune, &quot;Place&quot; ) == error)
-       		rune.name := descrip + &quot; marked recall rune&quot;;
-	else
-		rune.name := descrip + &quot; rune for &quot; + GetObjProperty( rune, &quot;Place&quot; );
-        endif
-
-endfunction
-
-
-// chance is the #/10 for the rune to blank
-function Blank_Rune(who,rune,chance)
-        var mark := CInt(GetObjProperty( rune, &quot;mark&quot; ));
-
-	if (mark&lt;1) // non initialized rune
-		mark := 6; // make it full (lucky guy !)
-		SetObjProperty(rune,&quot;mark&quot;,mark);
-	endif
-
-        if (RandomInt(10)&lt;chance)  // Rune is blanking
-                mark := mark - 1;
-		SetObjProperty(rune,&quot;mark&quot;,mark);
-                if (mark == 0)
-                        DestroyItem(rune);
-                else
-			Rename_Rune(who,rune);
-		endif
-	endif
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/reportMurder.inc
===================================================================
--- trunk/096/scripts/include/reportMurder.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/reportMurder.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,116 +0,0 @@
-use uo;
-use os;
-
-//include &quot;include/bounty&quot;;
-include &quot;:gumps:include/gumps&quot;;
-include &quot;:datafile:datafile&quot;;
-
-const LONG_COUNT_DECAY_TIME := 144000; //40 hours
-const SHORT_COUNT_DECAY_TIME := 28800; //8 hours
-
-//var reportables;
-//var reportdata := array{};
-
-function SendReportGump(who)
-	var reportables := who.reportables;
-	var report_data := array{};
-	
-	var gump := GFCreateGump();
-	GFPage(gump, 0);
-	GFDisposable(gump, 0);
-	GFClosable(gump, 0);
-	GFMovable(gump, 0);
-	GFResizePic(gump, 0, 0, 2600, 480, 480);
-	GFAddButton(gump, 380, 345, 249, 248, 1, 99);
-	GFTextLine(gump, 50, 20, 0, &quot;Now is the time for retribution!&quot;);
-	GFTextLine(gump, 50, 50, 0, &quot;Check zero or more players to report for your murder&quot;);
-	GFTextLine(gump, 50, 70, 0, &quot;and press OKAY&quot;);
-	
-	FillInArrays(reportables, report_data, gump);
-	
-	SetObjProperty(who, &quot;ReportMenu&quot;, report_data);
-	
-	var ret := GFSendGump(who, gump);
-	if( ret == 0 )
-		return;
-	endif
-	
-	EraseObjProperty(who, &quot;ReportMenu&quot;);
-	EraseObjProperty(who, &quot;LoginReport&quot;);
-	
-	var holder := array{};
-	foreach id in (ret.keys)
-		if( id in report_data )
-			var mob := SystemFindObjectBySerial(id, SYSFIND_SEARCH_OFFLINE_MOBILES);
-			if( !mob.ip )
-				SetObjProperty(mob.killer, &quot;LoginNotify&quot;, who.serial);
-			else
-				AdjustNoto(mob, who);
-			endif
-			
-			holder.append(id);
-			AdjustMurderCounts(mob.killer);
-		endif
-		sleepms(2);
-	endforeach
-	
-	foreach reportable in (who.reportables)
-		who.removeReportable(reportable.serial, reportable.gameclock);
-		sleepms(2);
-	endforeach
-	
-	var parms := array{who, holder};
-	var script := start_script(&quot;:bountyboard:bounty&quot;, parms);
-	if ( script.errortext )
-		SysLog(&quot;ERROR SendReportGump():: Unable to start :bountyboard:bounty -&gt;&quot;+script.errortext);
-		return error;
-	endif
-	
-	return 1;
-endfunction
-
-function FillInArrays(reportables, byref report_data, byref gump)
-	var prev_y := 80;
-	var buttonret := 10;
-	GFPage(gump, 1);
-	foreach reportable in reportables
-		if( !(reportable.killer).cmdlevel )
-			if( buttonret == 21 )
-				prev_y := 80;
-			endif
-			report_data.append((reportable.killer).serial);
-			GFCheckBox(gump, 40, prev_y+20, 210, 211, 0, (reportable.killer).serial);
-			GFTextLine(gump, 60, prev_y+20, 0, (reportable.killer).name);
-			prev_y := prev_y+20;
-			buttonret := buttonret+1;
-		endif
-		
-		sleepms(2);
-	endforeach
-	
-	return 1;
-endfunction
-
-function AdjustMurderCounts(killer)
-	var onlinetime := GetObjProperty(killer, &quot;onlinetimer&quot;);
-	var longcount := GetObjProperty(killer, &quot;longmurders&quot;);
-	
-	if( !longcount )
-		longcount := 0;
-	endif
-	
-	longcount := longcount + 1;
-	SetObjProperty(killer, &quot;longmurders&quot;, longcount);
-	
-	if( longcount &gt; 4 )
-		killer.setMurderer(1);
-		SendSysMessage(killer, &quot;You are now known as a murderer!&quot;);
-	endif
-	
-	SetObjProperty(killer, &quot;decaylongcountat&quot;, (onlinetime+LONG_COUNT_DECAY_TIME));
-	
-	var shortcount := CInt(GetObjProperty(killer, &quot;shortmurders&quot;));
-	shortcount := shortcount + 1;
-	SetObjProperty(killer, &quot;shortmurders&quot;, shortcount);
-	SetObjProperty(killer, &quot;decayshortcountat&quot;, (onlinetime+SHORT_COUNT_DECAY_TIME));
-endfunction

Deleted: trunk/096/scripts/include/resurrection.inc
===================================================================
--- trunk/096/scripts/include/resurrection.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/resurrection.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,80 +0,0 @@
-/*
- * $Id$
- *
- * Uhh what the fuck is this anyway?
- *
- */
-
-use uo;
-use os;
-
-include &quot;:attributes:attributes&quot;;
-include &quot;:gumps:gumps&quot;;
-
-const MAXIMUM_LOSS := 0.20; //20% loss for 20 shortterm murders or more
-
-function ResNow(mobile)
-
-	var gump := GFCreateGump();
-	GFClosable(gump, 0);
-	GFGumpPic(gump, 300, 230, 2070);
-	GFAddButton(gump, 330, 305, 2073, 2072, GF_CLOSE_BTN, 10);
-	GFAddButton(gump, 400, 305, 2076, 2075, GF_CLOSE_BTN, 11);
-	GFTextLine(gump, 332, 264, 40, &quot;Resurrect Now?&quot;);
-
-	var input := GFSendGump(mobile, gump);
-	input := input[0];
-	input := input-10;
-
-	if ( !input )
-		return 0;
-	else
-		return 1;
-	endif
-
-endfunction
-
-function MurdererStatLoss(who)
-
-	var shortc := GetObjProperty(who,&quot;shortmurders&quot;);
-	if( !shortc )
-		return 0;
-	endif
-
-	if( shortc &gt; 4 )
-		var multiplier := CInt(shortc)/100.0;
-		if( multiplier &gt; MAXIMUM_LOSS )
-			multiplier := MAXIMUM_LOSS;
-		endif
-
-		multiplier := 1.0 - multiplier;
-
-		var str := AP_GetTrueStat(who, &quot;strength&quot;);
-		var dex := AP_GetTrueStat(who, &quot;dexterity&quot;);
-		var inte := AP_GetTrueStat(who, &quot;intelligence&quot;);
-
-		str := CInt(str * multiplier);
-		dex := CInt(dex * multiplier);
-		inte := CInt(inte * multiplier);
-
-		AP_SetTrueStat(who, &quot;strength&quot;, str);
-		AP_SetTrueStat(who, &quot;dexterity&quot;, dex);
-		AP_SetTrueStat(who, &quot;intelligence&quot;, inte);
-
-		AP_SetVital(who, &quot;hits&quot;, AP_GetVitalMaximumValue(who, &quot;hits&quot;));
-		AP_SetVital(who, &quot;stamina&quot;, AP_GetVitalMaximumValue(who, &quot;stamina&quot;));
-		AP_SetVital(who, &quot;mana&quot;, AP_GetVitalMaximumValue(who, &quot;mana&quot;));
-
-		var newval;
-
-		foreach entry in (AP_ListAttributesByType(&quot;skill&quot;))
-			var skill_level := AP_GetTrueSkill(who, entry);
-			if( skill_level &gt; 0.0 )
-				newval := skill_level * multiplier;
-				AP_SetTrueSkill(who, entry, newval);
-			endif
-		endforeach
-		SendSysMessage(who,&quot;Thy body pays the price for thy sins.&quot;);
-	endif
-
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/scripts.inc
===================================================================
--- trunk/096/scripts/include/scripts.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/scripts.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,29 +0,0 @@
-/* $Id$
- *
- * Purpose
- * Provide various functions for the script object.
- *
- */
-use os;
-
-
-/*
- * KillScript()
- *
- * Author: Folko
- *
- * Purpose
- * Kills the calling script.
- *
- * Parameters
- * No parameters
- *
- * Return value
- * This function will never return
- * 
- */
-function KillScript()
-	GetProcess(GetPID()).kill();
-
-	return; // This doesn't actually happen
-endfunction

Deleted: trunk/096/scripts/include/selChar.inc
===================================================================
--- trunk/096/scripts/include/selChar.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/selChar.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,133 +0,0 @@
-/////////////////////////////////////////////////////////////////////////////
-//
-// selchar.inc: 
-//
-// SelectOnlineCharacter( selector, charname, action )
-//
-// if charname is blank, prompts selector with a dialog box
-// 'action' is the text displayed above the column of buttons
-//
-/////////////////////////////////////////////////////////////////////////////
-
-use uo;
-
-
-function SelectOnlineCharacter( selector, charname, action )
-
-  if(!charname)
-
-    return SelectCharacterFromDialog( selector, &quot;Goto&quot; );
-  else
-    //print (who.name + &quot; wants to visit &quot; + whom);
-
-    charname := upper(charname);
-
-    foreach onlinechr in EnumerateOnlineCharacters()
-        if (upper(onlinechr.name) == charname)
-            return onlinechr;
-        endif
-    endforeach
-
-    return 0;
-
-  endif
-
-endfunction
-
-
-var playercount := 0;
-var pagecount := 1;
-
-var layout := array(
-
-&quot;page 0&quot;,
-&quot;nodispose&quot;,
-&quot;gumppic 0 50 2620&quot;,
-&quot;gumppic 20 50 2621&quot;,
-&quot;gumppic 290 50 2622&quot;,
-&quot;gumppic 0 68 2623&quot;,
-&quot;gumppic 22 68 2624&quot;,
-&quot;gumppic 288 68 2625&quot;,
-&quot;gumppic 0 272 2623&quot;,
-&quot;gumppic 22 272 2624&quot;,
-&quot;gumppic 288 272 2625&quot;,
-&quot;gumppic 0 476 2626&quot;,
-&quot;gumppic 20 476 2627&quot;,
-&quot;gumppic 290 476 2628&quot;,
-&quot;gumppic 20 80 2621&quot;,   
-
-&quot;text 20 59 40 0&quot;,
-&quot;text 260 59 40 1&quot;
-);
-
-var data := array(
-       &quot;Player Name&quot;,         //0
-       &quot;[action]&quot;
-);
-
-
-function SelectCharacterFromDialog( selector, action )
-
-    var players := EnumerateOnlineCharacters();
-    var datalen;
-    var layoutlen;
-    var prev_y := CInt(80);
-    var datindx;
-    var buttonret := 1;
-   
-
-    layout[GetLayoutLength()+1] := &quot;page &quot; + pagecount;
-    if( len(players) &gt; 19)
-        layout[GetLayoutLength()+1] := &quot;button 285 465 2648 2647 0 &quot; + (pagecount + 1);
-    endif
-
-    data[2] := action;
-
-    foreach player in players
-        playercount := playercount + 1;
-
-        datalen := GetDataLength();
-        layoutlen := GetLayoutLength();
-
-        datindx := datalen+1;
-        data[datindx] := player.name;
-        if( playercount == 20 || playercount == 39 || playercount == 58 || playercount == 77 || playercount == 96)
-
-            pagecount := pagecount + 1;
-            layout[GetLayoutLength()+1] := &quot;page &quot; + pagecount;
-            prev_y := 80;
-            //add page turners
-
-            layout[GetLayoutLength()+1] := &quot;button 285 85 2650 2651 0 &quot; + (pagecount - 1);
-            if( len(players) &gt; playercount + 19)
-                layout[GetLayoutLength()+1] := &quot;button 285 465 2648 2647 0 &quot; + (pagecount + 1);
-            endif
-        endif
-
-        layout[GetLayoutLength()+1] := (&quot;text 20 &quot; + CStr(prev_y + 20) + &quot; 40 &quot; + datalen);
-        layout[GetLayoutLength()+1] := (&quot;button 260 &quot; + CStr(prev_y + 20) + &quot; 2640 2641 1 0 &quot; + buttonret);
-
-        prev_y := prev_y + 20;
-        buttonret := buttonret + 1;
-    endforeach
-
-    var result := SendDialogGump( selector, layout, data );
-
-    if (result)
-        return players[ result[0] ];
-    else
-        return 0;
-    endif
-   
-
-endfunction
-
-
-function GetLayoutLength();
-    return (len(layout));
-endfunction
-
-function GetDataLength();
-    return (len(data));
-endfunction
-

Deleted: trunk/096/scripts/include/skillLists.inc
===================================================================
--- trunk/096/scripts/include/skillLists.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/skillLists.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,99 +0,0 @@
-function getskilllist(me)
-  var mytemplate := lower(GetObjProperty(me, &quot;MerchantType&quot;));
-  case(mytemplate)
-    &quot;healer&quot;:           return { &quot;spiritspeaking&quot;, &quot;healing&quot;, &quot;anatomy&quot;, &quot;camping&quot;, &quot;fishing&quot;, &quot;forensic evaluation&quot; };
-    &quot;stable&quot;:           return { &quot;animal lore&quot;, &quot;animal taming&quot;, &quot;veterinary&quot; };
-    &quot;shipWright&quot;:       return { &quot;wrestling&quot;, &quot;tactics&quot; };
-    &quot;fisherman&quot;:        return { &quot;fishing&quot;, &quot;fencing&quot; };
-    &quot;innkeeper&quot;:        return { &quot;fencing&quot;, &quot;tactics&quot; };
-    &quot;farmer&quot;:           return { &quot;swordsmanship&quot;, &quot;animal lore&quot;, &quot;herding&quot;, &quot;veterinary&quot; };
-    &quot;weaponsmith&quot;:      return { &quot;swordsmanship&quot;, &quot;arms lore&quot;, &quot;blacksmithy&quot;, &quot;mining&quot;, &quot;parrying&quot;, &quot;tactics&quot; };
-    &quot;blacksmith&quot;:       return { &quot;swordsmanship&quot;, &quot;arms lore&quot;, &quot;blacksmithy&quot;, &quot;mining&quot;, &quot;parrying&quot;, &quot;tactics&quot; };
-    &quot;Armorer&quot;:          return { &quot;mace fighting&quot;, &quot;arms lore&quot;, &quot;blacksmithy&quot;, &quot;mining&quot;, &quot;parrying&quot;, &quot;tactics&quot; };
-    &quot;barkeep&quot;:          return { &quot;mace fighting&quot;, &quot;tactics&quot; };
-    &quot;barmaid&quot;:          return { &quot;fencing&quot;, &quot;tactics&quot; };
-    &quot;baker&quot;:            return { &quot;wrestling&quot;, &quot;cooking&quot; };
-    &quot;tinker&quot;:           return { &quot;fencing&quot;, &quot;alchemy&quot;, &quot;lockpicking&quot;, &quot;tinkering&quot; };
-    &quot;bard&quot;:             return { &quot;fencing&quot;, &quot;enticement&quot;, &quot;musicianship&quot;, &quot;provocation&quot;, &quot;peacemaking&quot; };
-    &quot;butcher&quot;:          return { &quot;mace fighting&quot;, &quot;cooking&quot;, &quot;taste identification&quot; };
-    &quot;cobbler&quot;:          return { &quot;swordsmanship&quot;, &quot;tailoring&quot; };
-    &quot;jeweler&quot;:          return { &quot;fencing&quot;, &quot;item identification&quot; };
-    &quot;mage&quot;:             return { &quot;magic resistance&quot;, &quot;inscription&quot;, &quot;magery&quot;, &quot;meditation&quot;, &quot;wrestling&quot; };
-    &quot;Alchemist&quot;:        return { &quot;magic resistance&quot;, &quot;taste identification&quot;, &quot;alchemy&quot;, &quot;wrestling&quot; };
-    &quot;herbalist&quot;:        return { &quot;magic resistance&quot;, &quot;alchemy&quot;, &quot;cooking&quot;, &quot;taste identification&quot;, &quot;wrestling&quot; };
-    &quot;tailor&quot;:           return { &quot;tailoring&quot;, &quot;fencing&quot; };
-    &quot;weaver&quot;:           return { &quot;tailoring&quot;, &quot;fencing&quot; };
-    &quot;leatherworker&quot;:    return { &quot;parrying&quot;, &quot;mace fighting&quot; };
-    &quot;provisioner&quot;:      return { &quot;tactics&quot;, &quot;parrying&quot;, &quot;fencing&quot; };
-    &quot;carpenter&quot;:        return { &quot;carpentry&quot;, &quot;lumberjacking&quot;, &quot;swordsmanship&quot; };
-    &quot;bowyer&quot;:           return { &quot;archery&quot;, &quot;bowcraft&quot;, &quot;fencing&quot; };
-    &quot;architect&quot;:        return { &quot;magic resistance&quot;, &quot;wrestling&quot; };
-    &quot;scribe&quot;:           return { &quot;magic resistance&quot;, &quot;evaluating intelligence&quot;, &quot;wrestling&quot; };
-    &quot;mapmaker&quot;:         return { &quot;cartography&quot;, &quot;wrestling&quot; };
-    &quot;vetrinarian&quot;:      return { &quot;animal lore&quot;, &quot;wrestling&quot;, &quot;veterinary&quot; };
-    &quot;townguard&quot;:        return { &quot;anatomy&quot;, &quot;tactics&quot;, &quot;swordsmanship&quot;, &quot;detect hidden&quot;, &quot;arms lore&quot; };
-    &quot;thief&quot;:            return { &quot;snooping&quot;, &quot;stealing&quot;, &quot;remove trap&quot;, &quot;stealth&quot;, &quot;fencing&quot;, &quot;poisoning&quot;, &quot;lockpicking&quot;, &quot;hiding&quot; };
-    &quot;beggar&quot;:           return { &quot;begging&quot;, &quot;wrestling&quot;, &quot;cooking&quot;, &quot;fishing&quot; };
-    &quot;fighter1&quot;:         return { &quot;anatomy&quot;, &quot;tactics&quot;, &quot;swordsmanship&quot;, &quot;arms lore&quot; };
-    &quot;fighter2&quot;:         return { &quot;anatomy&quot;, &quot;tactics&quot;, &quot;swordsmanship&quot;, &quot;arms lore&quot; };
-    &quot;fighter3&quot;:         return { &quot;anatomy&quot;, &quot;tactics&quot;, &quot;swordsmanship&quot;, &quot;arms lore&quot; };
-    &quot;fighter4&quot;:         return { &quot;anatomy&quot;, &quot;tactics&quot;, &quot;swordsmanship&quot;, &quot;arms lore&quot; };
-    &quot;paladin&quot;:          return { &quot;anatomy&quot;, &quot;tactics&quot;, &quot;swordsmanship&quot;, &quot;detect hidden&quot;, &quot;arms lore&quot; };
-    &quot;artist&quot;:
-  endcase
-endfunction
-
-function FindSkillId(name)
-  case(name)
-    &quot;alchemy&quot;:                  return  0;
-    &quot;anatomy&quot;:                  return  1;
-    &quot;animal lore&quot;:              return  2;
-    &quot;item identification&quot;:      return  3;
-    &quot;arms lore&quot;:                return  4;
-    &quot;parrying&quot;:                 return  5;
-    &quot;begging&quot;:                  return  6;
-    &quot;blacksmithy&quot;:              return  7;
-    &quot;bowcraft&quot;:                 return  8;
-    &quot;peacemaking&quot;:              return  9;
-    &quot;camping&quot;:                  return 10;
-    &quot;carpentry&quot;:                return 11;
-    &quot;cartography&quot;:              return 12;
-    &quot;cooking&quot;:                  return 13;
-    &quot;detect hidden&quot;:            return 14;
-    &quot;enticement&quot;:               return 15;
-    &quot;evaluating intelligence&quot;:  return 16;
-    &quot;healing&quot;:                  return 17;
-    &quot;fishing&quot;:                  return 18;
-    &quot;forensic evaluation&quot;:      return 19;
-    &quot;herding&quot;:                  return 20;
-    &quot;hiding&quot;:                   return 21;
-    &quot;provocation&quot;:              return 22;
-    &quot;inscription&quot;:              return 23;
-    &quot;lockpicking&quot;:              return 24;
-    &quot;magery&quot;:                   return 25;
-    &quot;magic resistance&quot;:         return 26;
-    &quot;tactics&quot;:                  return 27;
-    &quot;snooping&quot;:                 return 28;
-    &quot;musicianship&quot;:             return 29;
-    &quot;poisoning&quot;:                return 30;
-    &quot;archery&quot;:                  return 31;
-    &quot;spiritspeaking&quot;:           return 32;
-    &quot;stealing&quot;:                 return 33;
-    &quot;tailoring&quot;:                return 34;
-    &quot;animal taming&quot;:            return 35;
-    &quot;taste identification&quot;:     return 36;
-    &quot;tinkering&quot;:                return 37;
-    &quot;tracking&quot;:                 return 38;
-    &quot;veterinary&quot;:               return 39;
-    &quot;swordsmanship&quot;:            return 40;
-    &quot;mace fighting&quot;:            return 41;
-    &quot;fencing&quot;:                  return 42;
-    &quot;wrestling&quot;:                return 43;
-    &quot;lumberjacking&quot;:            return 44;
-    &quot;mining&quot;:                   return 45;
-    &quot;meditation&quot;:               return 46;
-    &quot;stealth&quot;:                  return 47;
-    &quot;remove trap&quot;:              return 48;
-  endcase
-endfunction
- 
\ No newline at end of file

Deleted: trunk/096/scripts/include/snooping.inc
===================================================================
--- trunk/096/scripts/include/snooping.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/snooping.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,7 +0,0 @@
-include &quot;:attributes:attributes&quot;;
-
-function snoop(who, victim)
-  victim := victim; // stops &quot;var not used&quot; ecompile warning
-  SendSysMessage(who, &quot;Snooping not implemented yet.&quot;);
-  return;
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/sorting.inc
===================================================================
--- trunk/096/scripts/include/sorting.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/sorting.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,20 +0,0 @@
-use uo;
-use os;
-use cfgfile;
-
-function bubble_sort_array(data, pos)
-  var i := 1;
-  var l := len(data);
-  for(i:=1; i&lt;=l; i:=i+1)
-    var ind := data[i];
-    var j := i;
-    while((j &gt; 0) &amp;&amp; (data[j-1][pos] &gt; ind[pos]))
-      data[j] := data[j-1];
-      j := j - 1;
-      sleepms(1);
-    endwhile
-    data[j] := ind;
-    sleepms(1);
-  endfor
-  return data;
-endfunction

Deleted: trunk/096/scripts/include/sound.inc
===================================================================
--- trunk/096/scripts/include/sound.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/sound.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,711 +0,0 @@
-/* $Id$
- *
- */
-
-enum SFX_BASE
-	SFX_1     :=  0x0001, // forest
-	SFX_2     :=  0x0002, // forest
-	SFX_3     :=  0x0003, // forest
-	SFX_4     :=  0x0004, // jungle
-	SFX_5     :=  0x0005, // jungle
-	SFX_6     :=  0x0006, // jungle
-	SFX_7     :=  0x0007, // swamp
-	SFX_8     :=  0x0008, // swamp
-	SFX_9     :=  0x0009, // forest
-	SFX_A     :=  0x000a, // forest
-	SFX_B     :=  0x000b, // generic
-	SFX_C     :=  0x000c, // generic
-	SFX_D     :=  0x000d, // jungle
-	SFX_E     :=  0x000e, // jungle
-	SFX_F     :=  0x000f, // swamp
-	SFX_10    :=  0x0010, // swamp
-	SFX_11    :=  0x0011, // water
-	SFX_12    :=  0x0012, // water
-	SFX_13    :=  0x0013, // waves
-	SFX_14    :=  0x0014, // waves
-	SFX_15    :=  0x0015, // wind
-	SFX_16    :=  0x0016, // wind
-	SFX_17    :=  0x0017, // wind
-	SFX_18    :=  0x0018, // bird
-	SFX_19    :=  0x0019, // bird
-	SFX_1A    :=  0x001a, // bird
-	SFX_1B    :=  0x001b, // bird
-	SFX_1C    :=  0x001c, // bird
-	SFX_1D    :=  0x001d, // bird
-	SFX_1E    :=  0x001e, // bird
-	SFX_1F    :=  0x001f, // bird
-	SFX_20    :=  0x0020, // bird
-	SFX_21    :=  0x0021, // bubbles
-	SFX_22    :=  0x0022, // bubbles
-	SFX_23    :=  0x0023, // dripping
-	SFX_24    :=  0x0024, // dripping
-	SFX_25    :=  0x0025, // dripping
-	SFX_26    :=  0x0026, // splashing
-	SFX_27    :=  0x0027, // splashing
-	SFX_28    :=  0x0028, // splashing
-	SFX_29    :=  0x0029, // thundr01.wav, thunder
-	SFX_2A    :=  0x002a, // thundr02.wav, thunder
-	SFX_2B    :=  0x002b, // anvil.wav, anvil
-	SFX_2C    :=  0x002c, // bellows.wav, bellows
-	SFX_2D    :=  0x002d, // chstcls3.wav, chest close
-	SFX_2E    :=  0x002e, // chstopn2.wav, chest open
-	SFX_2F    :=  0x002f, // drawercl.wav, drawer close
-	SFX_30    :=  0x0030, // drawerop.wav, drawer open
-	SFX_31    :=  0x0031, // drink01.wav, drink
-	SFX_32    :=  0x0032, // drink05.wav, drink
-	SFX_33    :=  0x0033, // dropgem1.wav, drop gem
-	SFX_34    :=  0x0034, // dropgem2.wav, drop gem
-	SFX_35    :=  0x0035, // dropgem3.wav, drop gem
-	SFX_36    :=  0x0036, // dropmny1.wav, drop money
-	SFX_37    :=  0x0037, // dropmny2.wav, drop money
-	SFX_38    :=  0x0038, // dropmny3.wav, drop money
-	SFX_39    :=  0x0039, // drum01.wav, drum
-	SFX_3A    :=  0x003a, // drum01_b.wav, drum
-	SFX_3B    :=  0x003b, // eat01.wav, eat
-	SFX_3C    :=  0x003c, // eat03.wav, eat
-	SFX_3D    :=  0x003d, // eat06.wav,eat
-	SFX_3E    :=  0x003e, // flute01.wav, flute
-	SFX_3F    :=  0x003f, // glasbrk1.wav, glassbreak
-	SFX_40    :=  0x0040, // glasbrk2.wav, glassbreak
-	SFX_41    :=  0x0041, // glasbrk3.wav, glassbreak
-	SFX_42    :=  0x0042, // glasbrk4.wav, glassbreak
-	SFX_43    :=  0x0043, // hamer01.wav, hammer
-	SFX_44    :=  0x0044, // harp01.wav, harp
-	SFX_45    :=  0x0045, // harp01_b.wav, harp
-	SFX_46    :=  0x0046, // harp02.wav, harp
-	SFX_47    :=  0x0047, // harp02_b.wav, harp
-	SFX_48    :=  0x0048, // igntorch.wav, ignite torch
-	SFX_49    :=  0x0049, // leather1.wav, leather
-	SFX_4A    :=  0x004a, // lever01.wav, lever
-	SFX_4B    :=  0x004b, // lever02.wav, lever
-	SFX_4C    :=  0x004c, // lever05.wav, lever
-	SFX_4D    :=  0x004d, // lute01.wav, lute
-	SFX_4E    :=  0x004e, // lute01_b.wav, lute
-	SFX_4F    :=  0x004f, // pouring.wav, pouring
-	SFX_50    :=  0x0050, // rustle.wav, rustle
-	SFX_51    :=  0x0051, // swallow2.wav, swallow
-	SFX_52    :=  0x0052, // switch01.wav, switch
-	SFX_53    :=  0x0053, // tamborin.wav, tamborine
-	SFX_54    :=  0x0054, // tambrn_b.wav, tamborine
-	SFX_55    :=  0x0055, // torch01.wav, torch
-	SFX_56    :=  0x0056, // turnpage.wav, turn page
-	SFX_57    :=  0x0057, // unsheth1.wav, ?
-	SFX_58    :=  0x0058, // usecloth.wav, use cloth
-	SFX_59    :=  0x0059, // uselethr.wav, use leather
-	SFX_5A    :=  0x005a, // uselthr1.wav, use leather
-	SFX_5B    :=  0x005b, // aligatr1.wav, alligator
-	SFX_5C    :=  0x005c, // aligatr2.wav, alligator
-	SFX_5D    :=  0x005d, // aligatr3.wav, alligator
-	SFX_5E    :=  0x005e, // aligatr4.wav, alligator
-	SFX_5F    :=  0x005f, // aligatr5.wav, alligator
-	SFX_60    :=  0x0060, // bear1.wav, bear
-	SFX_61    :=  0x0061, // bear2.wav, bear
-	SFX_62    :=  0x0062, // bear3.wav, bear
-	SFX_63    :=  0x0063, // bear4.wav, bear
-	SFX_64    :=  0x0064, // bear5.wav, bear
-	SFX_65    :=  0x0065, // bull1.wav, bull
-	SFX_66    :=  0x0066, // bull2.wav, bull
-	SFX_67    :=  0x0067, // bull3.wav, bull
-	SFX_68    :=  0x0068, // bull4.wav, bull
-	SFX_69    :=  0x0069, // bull5.wav, bull
-	SFX_6A    :=  0x006a, // cat1.wav
-	SFX_6B    :=  0x006b, // cat2.wav
-	SFX_6C    :=  0x006c, // cat3.wav
-	SFX_6D    :=  0x006d, // cat4.wav
-	SFX_6E    :=  0x006e, // cat5.wav
-	SFX_6F    :=  0x006f, // chicken1.wav
-	SFX_70    :=  0x0070, // chicken2.wav
-	SFX_71    :=  0x0071, // chicken3.wav
-	SFX_72    :=  0x0072, // chicken4.wav
-	SFX_73    :=  0x0073, // chicken5.wav
-	SFX_74    :=  0x0074, // cougar1.wav
-	SFX_75    :=  0x0075, // cougar2.wav
-	SFX_76    :=  0x0076, // cougar3.wav
-	SFX_77    :=  0x0077, // cougar4.wav
-	SFX_78    :=  0x0078, // cougar5.wav
-	SFX_79    :=  0x0079, // cow1.wav
-	SFX_7A    :=  0x007a, // cow2.wav
-	SFX_7B    :=  0x007b, // cow3.wav
-	SFX_7C    :=  0x007c, // cow4.wav
-	SFX_7D    :=  0x007d, // cow5.wav
-	SFX_7E    :=  0x007e, // crow1.wav
-	SFX_7F    :=  0x007f, // crow2.wav
-	SFX_80    :=  0x0080, // crow3.wav
-	SFX_81    :=  0x0081, // crow4.wav
-	SFX_82    :=  0x0082, // crow5.wav
-	SFX_83    :=  0x0083, // deer3.wav
-	SFX_84    :=  0x0084, // deer4.wav
-	SFX_85    :=  0x0085, // deer5.wav
-	SFX_86    :=  0x0086, // dog1.wav
-	SFX_87    :=  0x0087, // dog2.wav
-	SFX_88    :=  0x0088, // dog3.wav
-	SFX_89    :=  0x0089, // dog4.wav
-	SFX_8A    :=  0x008a, // dog5.wav
-	SFX_8B    :=  0x008b, // dolphin1.wav
-	SFX_8C    :=  0x008c, // dolphin2.wav
-	SFX_8D    :=  0x008d, // dolphin3.wav
-	SFX_8E    :=  0x008e, // dolphin4.wav
-	SFX_8F    :=  0x008f, // dolphin5.wav
-	SFX_90    :=  0x0090, // eagle1.wav
-	SFX_91    :=  0x0091, // eagle2.wav
-	SFX_92    :=  0x0092, // eagle3.wav
-	SFX_93    :=  0x0093, // eagle4.wav
-	SFX_94    :=  0x0094, // eagle5.wav
-	SFX_95    :=  0x0095, // frstbrd1.wav
-	SFX_96    :=  0x0096, // frstbrd2.wav
-	SFX_97    :=  0x0097, // frstbrd3.wav
-	SFX_98    :=  0x0098, // frstbrd4.wav
-	SFX_99    :=  0x0099, // frstbrd5.wav
-	SFX_9A    :=  0x009a, // goat1.wav
-	SFX_9B    :=  0x009b, // goat2.wav
-	SFX_9C    :=  0x009c, // goat3.wav
-	SFX_9D    :=  0x009d, // goat4.wav
-	SFX_9E    :=  0x009e, // goat5.wav
-	SFX_9F    :=  0x009f, // gorilla1.wav
-	SFX_A0    :=  0x00a0, // gorilla2.wav
-	SFX_A1    :=  0x00a1, // gorilla3.wav
-	SFX_A2    :=  0x00a2, // gorilla4.wav
-	SFX_A3    :=  0x00a3, // gorilla5.wav
-	SFX_A4    :=  0x00a4, // grizzly1.wav
-	SFX_A5    :=  0x00a5, // grizzly2.wav
-	SFX_A6    :=  0x00a6, // grizzly3.wav
-	SFX_A7    :=  0x00a7, // grizzly4.wav
-	SFX_A8    :=  0x00a8, // grizzly5.wav
-	SFX_A9    :=  0x00a9, // horse1.wav
-	SFX_AA    :=  0x00aa, // horse2.wav
-	SFX_AB    :=  0x00ab, // horse3.wav
-	SFX_AC    :=  0x00ac, // horse4.wav
-	SFX_AD    :=  0x00ad, // horse5.wav
-	SFX_AE    :=  0x00ae, // jungbrd1.wav
-	SFX_AF    :=  0x00af, // jungbrd2.wav
-	SFX_B0    :=  0x00b0, // jungbrd3.wav
-	SFX_B1    :=  0x00b1, // jungbrd4.wav
-	SFX_B2    :=  0x00b2, // jungbrd5.wav
-	SFX_B3    :=  0x00b3, // lion1.wav
-	SFX_B4    :=  0x00b4, // lion2.wav
-	SFX_B5    :=  0x00b5, // lion3.wav
-	SFX_B6    :=  0x00b6, // lion4.wav
-	SFX_B7    :=  0x00b7, // lion5.wav
-	SFX_B8    :=  0x00b8, // llama3.wav
-	SFX_B9    :=  0x00b9, // llama4.wav
-	SFX_BA    :=  0x00ba, // llama5.wav
-	SFX_BB    :=  0x00bb, // panther1.wav
-	SFX_BC    :=  0x00bc, // panther2.wav
-	SFX_BD    :=  0x00bd, // panther3.wav
-	SFX_BE    :=  0x00be, // panther4.wav
-	SFX_BF    :=  0x00bf, // panther5.wav
-	SFX_C0    :=  0x00c0, // parrot1.wav
-	SFX_C1    :=  0x00c1, // parrot2.wav
-	SFX_C2    :=  0x00c2, // parrot3.wav
-	SFX_C3    :=  0x00c3, // parrot4.wav
-	SFX_C4    :=  0x00c4, // parrot5.wav
-	SFX_C5    :=  0x00c5, // pig1.wav
-	SFX_C6    :=  0x00c6, // pig2.wav
-	SFX_C7    :=  0x00c7, // pig3.wav
-	SFX_C8    :=  0x00c8, // pig4.wav
-	SFX_C9    :=  0x00c9, // pig5.wav
-	SFX_CA    :=  0x00ca, // rabbit3.wav
-	SFX_CB    :=  0x00cb, // rabbit4.wav
-	SFX_CC    :=  0x00cc, // rabbit5.wav
-	SFX_CD    :=  0x00cd, // rat1.wav
-	SFX_CE    :=  0x00ce, // rat2.wav
-	SFX_CF    :=  0x00cf, // rat3.wav
-	SFX_D0    :=  0x00d0, // rat4.wav
-	SFX_D1    :=  0x00d1, // rat5.wav
-	SFX_D2    :=  0x00d2, // raven1.wav
-	SFX_D3    :=  0x00d3, // raven2.wav
-	SFX_D4    :=  0x00d4, // raven3.wav
-	SFX_D5    :=  0x00d5, // raven4.wav
-	SFX_D6    :=  0x00d6, // raven5.wav
-	SFX_D7    :=  0x00d7, // sheep1.wav
-	SFX_D8    :=  0x00d8, // sheep2.wav
-	SFX_D9    :=  0x00d9, // sheep3.wav
-	SFX_DA    :=  0x00da, // sheep4.wav
-	SFX_DB    :=  0x00db, // sheep5.wav
-	SFX_DC    :=  0x00dc, // snake1.wav
-	SFX_DD    :=  0x00dd, // snake2.wav
-	SFX_DE    :=  0x00de, // snake3.wav
-	SFX_DF    :=  0x00df, // snake4.wav
-	SFX_E0    :=  0x00e0, // snake5.wav
-	SFX_E1    :=  0x00e1, // walrus1.wav
-	SFX_E2    :=  0x00e2, // walrus2.wav
-	SFX_E3    :=  0x00e3, // walrus3.wav
-	SFX_E4    :=  0x00e4, // walrus4.wav
-	SFX_E5    :=  0x00e5, // walrus5.wav
-	SFX_E6    :=  0x00e6, // wolf1.wav
-	SFX_E7    :=  0x00e7, // wolf2.wav
-	SFX_E8    :=  0x00e8, // wolf3.wav
-	SFX_E9    :=  0x00e9, // wolf4.wav
-	SFX_EA    :=  0x00ea, // wolf5.wav
-	SFX_EB    :=  0x00eb, // open01a.wav
-	SFX_EC    :=  0x00ec, // open03a.wav
-	SFX_ED    :=  0x00ed, // open04b.wav
-	SFX_EE    :=  0x00ee, // open09.wav
-	SFX_EF    :=  0x00ef, // portclos.wav
-	SFX_F0    :=  0x00f0, // portcul4.wav
-	SFX_F1    :=  0x00f1, // portcul5.wav
-	SFX_F2    :=  0x00f2, // shut03a.wav
-	SFX_F3    :=  0x00f3, // shut07a.wav
-	SFX_F4    :=  0x00f4, // shut14b.wav
-	SFX_F5    :=  0x00f5, // shut17.wav
-	SFX_F6    :=  0x00f6, // sfx01.wav
-	SFX_F7    :=  0x00f7, // sfx02.wav
-	SFX_F8    :=  0x00f8, // sfx04.wav
-	SFX_F9    :=  0x00f9, // sfx05.wav
-	SFX_FA    :=  0x00fa, // sfx06.wav
-	SFX_FB    :=  0x00fb, // sfx08.wav
-	SFX_FC    :=  0x00fc, // sfx10.wav
-	SFX_FD    :=  0x00fd, // sfx11.wav
-	SFX_FE    :=  0x00fe, // sfx12.wav
-	SFX_FF    :=  0x00ff, // sfx13.wav
-	SFX_100   :=  0x0100, // sfx14_l.wav
-	SFX_101   :=  0x0101, // sfx15_l.wav
-	SFX_102   :=  0x0102, // sfx16_l.wav
-	SFX_103   :=  0x0103, // sfx17_l.wav
-	SFX_104   :=  0x0104, // sfx18_l.wav
-	SFX_105   :=  0x0105, // sfx20_l.wav
-	SFX_106   :=  0x0106, // sfx21_l.wav
-	SFX_107   :=  0x0107, // sfx22_l.wav
-	SFX_108   :=  0x0108, // airelem1.wav
-	SFX_109   :=  0x0109, // airelem2.wav
-	SFX_10A   :=  0x010a, // airelem3.wav
-	SFX_10B   :=  0x010b, // airelem4.wav
-	SFX_10C   :=  0x010c, // airelem5.wav
-	SFX_10D   :=  0x010d, // erthel1.wav
-	SFX_10E   :=  0x010e, // erthel2.wav
-	SFX_10F   :=  0x010f, // erthel3.wav
-	SFX_110   :=  0x0110, // erthel4.wav
-	SFX_111   :=  0x0111, // erthel5.wav
-	SFX_112   :=  0x0112, // firelem1.wav
-	SFX_113   :=  0x0113, // firelem2.wav
-	SFX_114   :=  0x0114, // firelem3.wav
-	SFX_115   :=  0x0115, // firelem4.wav
-	SFX_116   :=  0x0116, // firelem5.wav
-	SFX_117   :=  0x0117, // watrel1.wav
-	SFX_118   :=  0x0118, // watrel2.wav
-	SFX_119   :=  0x0119, // watrel3.wav
-	SFX_11A   :=  0x011a, // watrel4.wav
-	SFX_11B   :=  0x011b, // watrel5.wav
-	SFX_11C   :=  0x011c, // exp01.wav
-	SFX_11D   :=  0x011d, // exp04.wav
-	SFX_11E   :=  0x011e, // exp05.wav
-	SFX_11F   :=  0x011f, // exp06.wav
-	SFX_120   :=  0x0120, // bigfoot1.wav
-	SFX_121   :=  0x0121, // bigfoot2.wav
-	SFX_122   :=  0x0122, // feet01a.wav
-	SFX_123   :=  0x0123, // feet01b.wav
-	SFX_124   :=  0x0124, // feet03a.wav
-	SFX_125   :=  0x0125, // feet03b.wav
-	SFX_126   :=  0x0126, // feet05a.wav
-	SFX_127   :=  0x0127, // feet05b.wav
-	SFX_128   :=  0x0128, // feet08a.wav
-	SFX_129   :=  0x0129, // feet08b.wav
-	SFX_12A   :=  0x012a, // feet10a.wav
-	SFX_12B   :=  0x012b, // feet10b.wav
-	SFX_12C   :=  0x012c, // feet12a.wav
-	SFX_12D   :=  0x012d, // feet12b1wav
-	SFX_12E   :=  0x012e, // feet13a.wav
-	SFX_12F   :=  0x012f, // feet13b.wav
-	SFX_130   :=  0x0130, // feet14a.wav
-	SFX_131   :=  0x0131, // feet14b.wav
-	SFX_132   :=  0x0132, // feet15a.wav
-	SFX_133   :=  0x0133, // feet15b.wav
-	SFX_134   :=  0x0134, // feet15c.wav
-	SFX_135   :=  0x0135, // feet15d.wav
-	SFX_136   :=  0x0136, // hit01.wav
-	SFX_137   :=  0x0137, // hit02.wav
-	SFX_138   :=  0x0138, // hit03.wav
-	SFX_139   :=  0x0139, // hit04.wav
-	SFX_13A   :=  0x013a, // hit05.wav
-	SFX_13B   :=  0x013b, // hit06.wav
-	SFX_13C   :=  0x013c, // hit07.wav
-	SFX_13D   :=  0x013d, // hit08.wav
-	SFX_13E   :=  0x013e, // hit09.wav
-	SFX_13F   :=  0x013f, // hit10.wav
-	SFX_140   :=  0x0140, // hit11.wav
-	SFX_141   :=  0x0141, // hit12.wav
-	SFX_142   :=  0x0142, // hit13.wav
-	SFX_143   :=  0x0143, // hit14.wav
-	SFX_144   :=  0x0144, // hit15.wav
-	SFX_145   :=  0x0145, // hit16.wav
-	SFX_146   :=  0x0146, // hit17.wav
-	SFX_147   :=  0x0147, // hit18.wav
-	SFX_148   :=  0x0148, // hit19.wav
-	SFX_149   :=  0x0149, // hit20.wav
-	SFX_14A   :=  0x014a, // hit21.wav
-	SFX_14B   :=  0x014b, // hit22.wav
-	SFX_14C   :=  0x014c, // foomph01.wav
-	SFX_14D   :=  0x014d, // foomph06.wav
-	SFX_14E   :=  0x014e, // foomph07.wav
-	SFX_14F   :=  0x014f, // foomph08.wav
-	SFX_150   :=  0x0150, // foomph09.wav
-	SFX_151   :=  0x0151, // f_die_01.wav
-	SFX_152   :=  0x0152, // f_die_02.wav
-	SFX_153   :=  0x0153, // f_die_03.wav
-	SFX_154   :=  0x0154, // f_die_04.wav
-	SFX_155   :=  0x0155, // moomph01.wav
-	SFX_156   :=  0x0156, // moomph02.wav
-	SFX_157   :=  0x0157, // moomph03.wav
-	SFX_158   :=  0x0158, // moomph04.wav
-	SFX_159   :=  0x0159, // moomph05.wav
-	SFX_15A   :=  0x015a, // moomph13.wav
-	SFX_15B   :=  0x015b, // m_die_01.wav
-	SFX_15C   :=  0x015c, // m_die_02.wav
-	SFX_15D   :=  0x015d, // m_die_03.wav
-	SFX_15E   :=  0x015e, // m_die_04.wav
-	SFX_15F   :=  0x015f, // fyrbal01.wav
-	SFX_160   :=  0x0160, // fyrbal02.wav
-	SFX_161   :=  0x0161, // fyrbal03.wav
-	SFX_162   :=  0x0162, // corpsr1.wav
-	SFX_163   :=  0x0163, // corpsr3.wav
-	SFX_164   :=  0x0164, // corpsr4.wav
-	SFX_165   :=  0x0165, // corpsr5.wav
-	SFX_166   :=  0x0166, // daemon1.wav
-	SFX_167   :=  0x0167, // daemon2.wav
-	SFX_168   :=  0x0168, // daemon3.wav
-	SFX_169   :=  0x0169, // daemon4.wav
-	SFX_16A   :=  0x016a, // daemon5.wav
-	SFX_16B   :=  0x016b, // dragon1.wav
-	SFX_16C   :=  0x016c, // dragon2.wav
-	SFX_16D   :=  0x016d, // dragon3.wav
-	SFX_16E   :=  0x016e, // dragon4.wav
-	SFX_16F   :=  0x016f, // dragon5.wav
-	SFX_170   :=  0x0170, // ettin1.wav
-	SFX_171   :=  0x0171, // ettin2.wav
-	SFX_172   :=  0x0172, // ettin3.wav
-	SFX_173   :=  0x0173, // ettin4.wav
-	SFX_174   :=  0x0174, // ettin5.wav
-	SFX_175   :=  0x0175, // gargyl1.wav
-	SFX_176   :=  0x0176, // gargyl2.wav
-	SFX_177   :=  0x0177, // gargyl3.wav
-	SFX_178   :=  0x0178, // gargyl4.wav
-	SFX_179   :=  0x0179, // gargyl5.wav
-	SFX_17A   :=  0x017a, // gazer1.wav
-	SFX_17B   :=  0x017b, // gazer2.wav
-	SFX_17C   :=  0x017c, // gazer3.wav
-	SFX_17D   :=  0x017d, // gazer4.wav
-	SFX_17E   :=  0x017e, // gazer5.wav
-	SFX_17F   :=  0x017f, // ghost1.wav
-	SFX_180   :=  0x0180, // ghost2.wav
-	SFX_181   :=  0x0181, // ghost3.wav
-	SFX_182   :=  0x0182, // ghost4.wav
-	SFX_183   :=  0x0183, // ghost5.wav
-	SFX_184   :=  0x0184, // gispidr1.wav
-	SFX_185   :=  0x0185, // gispidr2.wav
-	SFX_186   :=  0x0186, // gispidr3.wav
-	SFX_187   :=  0x0187, // gispidr4.wav
-	SFX_188   :=  0x0188, // gispidr5.wav
-	SFX_189   :=  0x0189, // grat1.wav
-	SFX_18A   :=  0x018a, // grat2.wav
-	SFX_18B   :=  0x018b, // grat3.wav
-	SFX_18C   :=  0x018c, // grat4.wav
-	SFX_18D   :=  0x018d, // grat5.wav
-	SFX_18E   :=  0x018e, // gscorp1.wav
-	SFX_18F   :=  0x018f, // gscorp2.wav
-	SFX_190   :=  0x0190, // gscorp3.wav
-	SFX_191   :=  0x0191, // gscorp4.wav
-	SFX_192   :=  0x0192, // gscorp5.wav
-	SFX_193   :=  0x0193, // harpy1.wav
-	SFX_194   :=  0x0194, // harpy2.wav
-	SFX_195   :=  0x0195, // harpy3.wav
-	SFX_196   :=  0x0196, // harpy4.wav
-	SFX_197   :=  0x0197, // harpy5.wav
-	SFX_198   :=  0x0198, // headls1.wav
-	SFX_199   :=  0x0199, // headls2.wav
-	SFX_19A   :=  0x019a, // headls3.wav
-	SFX_19B   :=  0x019b, // headls4.wav
-	SFX_19C   :=  0x019c, // headls5.wav
-	SFX_19D   :=  0x019d, // liche1.wav
-	SFX_19E   :=  0x019e, // liche2.wav
-	SFX_19F   :=  0x019f, // liche3.wav
-	SFX_1A0   :=  0x01a0, // liche4.wav
-	SFX_1A1   :=  0x01a1, // liche5.wav
-	SFX_1A2   :=  0x01a2, // lzrdmn1.wav
-	SFX_1A3   :=  0x01a3, // lzrdmn2.wav
-	SFX_1A4   :=  0x01a4, // lzrdmn3.wav
-	SFX_1A5   :=  0x01a5, // lzrdmn4.wav
-	SFX_1A6   :=  0x01a6, // lzrdmn5.wav
-	SFX_1A7   :=  0x01a7, // mngbat1.wav
-	SFX_1A8   :=  0x01a8, // mngbat2.wav
-	SFX_1A9   :=  0x01a9, // mngbat3.wav
-	SFX_1AA   :=  0x01aa, // mngbat4.wav
-	SFX_1AB   :=  0x01ab, // mngbat5.wav
-	SFX_1AC   :=  0x01ac, // ogre1.wav
-	SFX_1AD   :=  0x01ad, // ogre2.wav
-	SFX_1AE   :=  0x01ae, // ogre3.wav
-	SFX_1AF   :=  0x01af, // ogre4.wav
-	SFX_1B0   :=  0x01b0, // ogre5.wav
-	SFX_1B1   :=  0x01b1, // orc1.wav
-	SFX_1B2   :=  0x01b2, // orc2.wav
-	SFX_1B3   :=  0x01b3, // orc3.wav
-	SFX_1B4   :=  0x01b4, // orc4.wav
-	SFX_1B5   :=  0x01b5, // orc5.wav
-	SFX_1B6   :=  0x01b6, // ratman1.wav
-	SFX_1B7   :=  0x01b7, // ratman2.wav
-	SFX_1B8   :=  0x01b8, // ratman3.wav
-	SFX_1B9   :=  0x01b9, // ratman4.wav
-	SFX_1BA   :=  0x01ba, // ratman5.wav
-	SFX_1BB   :=  0x01bb, // reaper1.wav
-	SFX_1BC   :=  0x01bc, // reaper2.wav
-	SFX_1BD   :=  0x01bd, // reaper3.wav
-	SFX_1BE   :=  0x01be, // reaper4.wav
-	SFX_1BF   :=  0x01bf, // reaper5.wav
-	SFX_1C0   :=  0x01c0, // seaserp1.wav
-	SFX_1C1   :=  0x01c1, // seaserp3.wav
-	SFX_1C2   :=  0x01c2, // seaserp4.wav
-	SFX_1C3   :=  0x01c3, // seaserp5.wav
-	SFX_1C4   :=  0x01c4, // skletn1.wav
-	SFX_1C5   :=  0x01c5, // skletn2.wav
-	SFX_1C6   :=  0x01c6, // skletn3.wav
-	SFX_1C7   :=  0x01c7, // skletn4.wav
-	SFX_1C8   :=  0x01c8, // skletn5.wav
-	SFX_1C9   :=  0x01c9, // slime1.wav
-	SFX_1CA   :=  0x01ca, // slime2.wav
-	SFX_1CB   :=  0x01cb, // slime3.wav
-	SFX_1CC   :=  0x01cc, // slime4.wav
-	SFX_1CD   :=  0x01cd, // slime5.wav
-	SFX_1CE   :=  0x01ce, // troll1.wav
-	SFX_1CF   :=  0x01cf, // troll2.wav
-	SFX_1D0   :=  0x01d0, // troll3.wav
-	SFX_1D1   :=  0x01d1, // troll4.wav
-	SFX_1D2   :=  0x01d2, // troll5.wav
-	SFX_1D3   :=  0x01d3, // wisp1.wav
-	SFX_1D4   :=  0x01d4, // wisp2.wav
-	SFX_1D5   :=  0x01d5, // wisp3.wav
-	SFX_1D6   :=  0x01d6, // wisp4.wav
-	SFX_1D7   :=  0x01d7, // wisp5.wav
-	SFX_1D8   :=  0x01d8, // zombie1.wav
-	SFX_1D9   :=  0x01d9, // zombie2.wav
-	SFX_1DA   :=  0x01da, // zombie3.wav
-	SFX_1DB   :=  0x01db, // zombie4.wav
-	SFX_1DC   :=  0x01dc, // zombie5.wav
-	SFX_1DD   :=  0x01dd, // elec_l.wav
-	SFX_1DE   :=  0x01de, // fire_l.wav
-	SFX_1DF   :=  0x01df, // hiss_l.wav
-	SFX_1E0   :=  0x01e0, // clumsy.wav
-	SFX_1E1   :=  0x01e1, // cure.wav
-	SFX_1E2   :=  0x01e2, // curse.wav
-	SFX_1E3   :=  0x01e3, // c_food.wav
-	SFX_1E4   :=  0x01e4, // c_light.wav
-	SFX_1E5   :=  0x01e5, // feblmind.wav
-	SFX_1E6   :=  0x01e6, // m_arrow.wav
-	SFX_1E7   :=  0x01e7, // weaken.wav
-	SFX_1E8   :=  0x01e8, // agility.wav
-	SFX_1E9   :=  0x01e9, // archcure.wav
-	SFX_1EA   :=  0x01ea, // birdseye.wav
-	SFX_1EB   :=  0x01eb, // bless.wav
-	SFX_1EC   :=  0x01ec, // cunning.wav
-	SFX_1ED   :=  0x01ed, // identify.wav
-	SFX_1EE   :=  0x01ee, // protect.wav
-	SFX_1EF   :=  0x01ef, // strength.wav
-	SFX_1F0   :=  0x01f0, // trap.wav
-	SFX_1F1   :=  0x01f1, // untrap.wav
-	SFX_1F2   :=  0x01f2, // harm.wav
-	SFX_1F3   :=  0x01f3, // heal.wav
-	SFX_1F4   :=  0x01f4, // magic_fyrbal01.
-	SFX_1F5   :=  0x01f5, // m_lock.wav
-	SFX_1F6   :=  0x01f6, // teleknes.wav
-	SFX_1F7   :=  0x01f7, // walstone.wav
-	SFX_1F8   :=  0x01f8, // aprotect.wav
-	SFX_1F9   :=  0x01f9, // manadran.wav
-	SFX_1FA   :=  0x01fa, // manavamp.wav
-	SFX_1FB   :=  0x01fb, // mark.wav
-	SFX_1FC   :=  0x01fc, // masscurs.wav
-	SFX_1FD   :=  0x01fd, // recall.wav
-	SFX_1FE   :=  0x01fe, // reveal.wav
-	SFX_1FF   :=  0x01ff, // teleport.wav
-	SFX_200   :=  0x0200, // unlock.wav
-	SFX_201   :=  0x0201, // bladsprt.wav
-	SFX_202   :=  0x0202, // dispfild.wav
-	SFX_203   :=  0x0203, // gratheal.wav
-	SFX_204   :=  0x0204, // invisibl.wav
-	SFX_205   :=  0x0205, // paralyze.wav
-	SFX_206   :=  0x0206, // poison.wav
-	SFX_207   :=  0x0207, // thundr01.wav
-	SFX_208   :=  0x0208, // explode.wav
-	SFX_209   :=  0x0209, // flamstrk.wav
-	SFX_20A   :=  0x020a, // massdisp.wav
-	SFX_20B   :=  0x020b, // nrgybolt.wav
-	SFX_20C   :=  0x020c, // parafild.wav
-	SFX_20D   :=  0x020d, // posnfild.wav
-	SFX_20E   :=  0x020e, // earthqke.wav
-	SFX_20F   :=  0x020f, // gatetrvl.wav
-	SFX_210   :=  0x0210, // morph.wav
-	SFX_211   :=  0x0211, // nergyfld.wav
-	SFX_212   :=  0x0212, // nrgywind.wav
-	SFX_213   :=  0x0213, // dethvrtx.wav
-	SFX_214   :=  0x0214, // mindblst.wav
-	SFX_215   :=  0x0215, // resurect.wav
-	SFX_216   :=  0x0216, // sumncrtr.wav
-	SFX_217   :=  0x0217, // sumndemn.wav
-	SFX_218   :=  0x0218, // sumnelem.wav
-	SFX_219   :=  0x0219, // blade01.wav
-	SFX_21A   :=  0x021a, // blade02.wav
-	SFX_21B   :=  0x021b, // blade03.wav
-	SFX_21C   :=  0x021c, // blade04.wav
-	SFX_21D   :=  0x021d, // blade05.wav
-	SFX_21E   :=  0x021e, // boulder1.wav
-	SFX_21F   :=  0x021f, // boulder2.wav
-	SFX_220   :=  0x0220, // crumble1.wav
-	SFX_221   :=  0x0221, // crumble2.wav
-	SFX_222   :=  0x0222, // crumble3.wav
-	SFX_223   :=  0x0223, // crumble4.wav
-	SFX_224   :=  0x0224, // dart01.wav
-	SFX_225   :=  0x0225, // dart02.wav
-	SFX_226   :=  0x0226, // flame01.wav
-	SFX_227   :=  0x0227, // flame03.wav
-	SFX_228   :=  0x0228, // flame05.wav
-	SFX_229   :=  0x0229, // mushrm01.wav
-	SFX_22A   :=  0x022a, // mushrm02.wav
-	SFX_22B   :=  0x022b, // mushrm03.wav
-	SFX_22C   :=  0x022c, // spike01.wav
-	SFX_22D   :=  0x022d, // spike02.wav
-	SFX_22E   :=  0x022e, // spike03.wav
-	SFX_22F   :=  0x022f, // spike04.wav
-	SFX_230   :=  0x0230, // vapor01.wav
-	SFX_231   :=  0x0231, // vapor02.wav
-	SFX_232   :=  0x0232, // vapor03.wav
-	SFX_233   :=  0x0233, // axe01.wav
-	SFX_234   :=  0x0234, // blunt01.wav
-	SFX_235   :=  0x0235, // crossbow.wav
-	SFX_236   :=  0x0236, // gilotin1.wav
-	SFX_237   :=  0x0237, // hvyswrd1.wav
-	SFX_238   :=  0x0238, // hvyswrd4.wav
-	SFX_239   :=  0x0239, // swish01.wav
-	SFX_23A   :=  0x023a, // swish02.wav
-	SFX_23B   :=  0x023b, // swish03.wav
-	SFX_23C   :=  0x023c, // sword1.wav
-	SFX_23D   :=  0x023d, // sword7.wav
-	SFX_23E   :=  0x023e, // carpntry.wav
-	SFX_23F   :=  0x023f, // dye.wav
-	SFX_240   :=  0x0240, // fshsplsh.wav
-	SFX_241   :=  0x0241, // liquid.wav
-	SFX_242   :=  0x0242, // lockpick.wav
-	SFX_243   :=  0x0243, // mortar.wav
-	SFX_244   :=  0x0244, // mystery1.wav
-	SFX_245   :=  0x0245, // mystery2.wav
-	SFX_246   :=  0x0246, // mystery3.wav
-	SFX_247   :=  0x0247, // poison.wav
-	SFX_248   :=  0x0248, // powder.wav
-	SFX_249   :=  0x0249, // scissors.wav
-	SFX_24A   :=  0x024a, // scribe.wav
-	SFX_24B   :=  0x024b, // spirtspk.wav
-	SFX_24C   :=  0x024c, // z_horseft2.wav
-	SFX_24D   :=  0x024d, // z_horseft1.wav
-	SFX_24E   :=  0x024e, // Tera.Warrior 1
-	SFX_24F   :=  0x02ef  // Tera.Warrior 2
-endenum
-
-
-// Fill in the rest of the T2A sounds here.
-enum SFX_MUSIC
-	SFX_MUSIC_LUTE_GOOD           := SFX_4D,
-	SFX_MUSIC_LUTE_FAIL           := SFX_4E,
-	SFX_MUSIC_DRUM_GOOD           := SFX_39,
-	SFX_MUSIC_DRUM_FAIL           := SFX_3A,
-	SFX_MUSIC_HARP_LARGE_GOOD     := SFX_44,
-	SFX_MUSIC_HARP_LARGE_FAIL     := SFX_45,
-	SFX_MUSIC_HARP_LAP_GOOD       := SFX_46,
-	SFX_MUSIC_HARP_LAP_FAIL       := SFX_47,
-	SFX_MUSIC_TAMBORINE_GOOD      := SFX_53,
-	SFX_MUSIC_TAMBORINE_FAIL      := SFX_54
-endenum
-
-
-enum SFX_SPELLS
-	SFX_SPELL_CLUMSY              := SFX_1E0,
-	SFX_SPELL_CREATE_FOOD         := SFX_1E3,
-	SFX_SPELL_FEEBLEMIND          := SFX_1E5,
-	SFX_SPELL_HEAL                := SFX_1F3,
-	SFX_SPELL_MAGIC_ARROW         := SFX_1E6,
-	SFX_SPELL_NIGHT_SIGHT         := SFX_1E4,
-	SFX_SPELL_REACTIVE_ARMOR      := SFX_1F3,
-	SFX_SPELL_WEAKEN              := SFX_1E7,
-	SFX_SPELL_AGILITY             := SFX_1E8,
-	SFX_SPELL_CUNNING             := SFX_1EC,
-	SFX_SPELL_CURE                := SFX_1E1,
-	SFX_SPELL_HARM                := SFX_1F2,
-	SFX_SPELL_MAGIC_TRAP          := SFX_1F0,
-	SFX_SPELL_MAGIC_UNTRAP        := SFX_1F1,
-	SFX_SPELL_PROTECTION          := SFX_1EE,
-	SFX_SPELL_STRENGTH            := SFX_1EF,
-	SFX_SPELL_BLESS               := SFX_1EB,
-	SFX_SPELL_FIREBALL            := SFX_160,
-	SFX_SPELL_MAGIC_LOCK          := SFX_1F5,
-	SFX_SPELL_TELEKINESIS         := SFX_1F6,
-	SFX_SPELL_TELEPORT            := SFX_1FF,
-	SFX_SPELL_POISON              := SFX_247,
-	SFX_SPELL_UNLOCK              := SFX_200,
-	SFX_SPELL_WALL_OF_STONE       := SFX_1F7,
-	SFX_SPELL_ARCH_CURE           := SFX_1E9,
-	SFX_SPELL_ARCH_PROTECTION     := SFX_1F8,
-	SFX_SPELL_CURSE               := SFX_1E2,
-	SFX_SPELL_FIRE_FIELD          := SFX_226,
-	SFX_SPELL_GREATER_HEAL        := SFX_203,
-	SFX_SPELL_LIGHTNING           := SFX_2A,
-	SFX_SPELL_MANA_DRAIN          := SFX_1F9,
-	SFX_SPELL_RECALL              := SFX_1FD,
-	SFX_SPELL_BLADE_SPIRITS       := SFX_213,
-	SFX_SPELL_ENERGY_FIELD        := SFX_211, // used to say dispel field?
-	SFX_SPELL_INCOGNITO           := SFX_1ED,
-	SFX_SPELL_MAGIC_REFLECTION    := SFX_1E8,
-	SFX_SPELL_MIND_BLAST          := SFX_214,
-	SFX_SPELL_PARALYZE            := SFX_205,
-	SFX_SPELL_POISON_FIELD        := SFX_20D, // was 227 (??)
-	SFX_SPELL_SUMMON_CREATURE     := SFX_216,
-	SFX_SPELL_DISPEL              := SFX_202,
-	SFX_SPELL_ENERGY_BOLT         := SFX_20B,
-	SFX_SPELL_EXPLOSION           := SFX_208,
-	SFX_SPELL_INVISIBILITY        := SFX_204,
-	SFX_SPELL_MARK                := SFX_1FB,
-	SFX_SPELL_MASS_CURSE          := SFX_1FC,
-	SFX_SPELL_PARALYZE_FIELD      := SFX_212,
-	SFX_SPELL_REVEAL              := SFX_1FE,
-	SFX_SPELL_CHAIN_LIGHTNING     := SFX_30,
-	SFX_SPELL_PARA_FIELD          := SFX_20C,
-	SFX_SPELL_FLAME_STRIKE        := SFX_209,
-	SFX_SPELL_GATE_TRAVEL         := SFX_20F,
-	SFX_SPELL_MANA_VAMPIRE        := SFX_1FA,
-	SFX_SPELL_MASS_DISPEL         := SFX_20A,
-	SFX_SPELL_METEOR_SWARM        := SFX_161,
-	SFX_SPELL_POLYMORPH           := SFX_20A,
-	SFX_SPELL_EARTHQUAKE          := SFX_20E,
-	SFX_SPELL_ENERGY_VORTEX       := SFX_213,
-	SFX_SPELL_RESSURECTION        := SFX_215,
-	SFX_SPELL_SUMMON_ELEMENTAL    := SFX_218,
-	SFX_SPELL_SUMMON_DAEMON       := SFX_217
-endenum
-
-
-enum SFX_SKILLS
-	SFX_SKILL_SPIRITSPEAK	:= SFX_24B,
-	SFX_SKILL_LUMBERJACK	:= SFX_13F,
-	SFX_SKILL_LOCKPICK	:= SFX_242
-endenum
-
-
-enum SFX_ITEMS
-	SFX_TRAP_NEEDLE		:= SFX_225,
-	SFX_TRAP_POISON		:= SFX_206,
-	SFX_TRAP_EXPLOSION	:= SFX_208,
-	SFX_ANVIL		:= SFX_2B,
-	SFX_PICK		:= SFX_13B,
-	SFX_HAMMER		:= SFX_43,
-	SFX_GLASSBREAK4		:= SFX_42,
-	SFX_HARP_SUCC		:= SFX_46,
-	SFX_LUTE_SUCC		:= SFX_4D,
-	SFX_DRUM_SUCC		:= SFX_39,
-	SFX_TAMB_SUCC		:= SFX_53,
-	SFX_HARP_FAIL		:= SFX_47,
-	SFX_LUTE_FAIL		:= SFX_4E,
-	SFX_DRUM_FAIL		:= SFX_3A,
-	SFX_TAMB_FAIL		:= SFX_54
-endenum
-
-
-enum SFX_DOORS
-	SFX_OPEN_WOODEN_DOOR	:= SFX_EB,
-	SFX_CLOSE_WOODEN_DOOR	:= SFX_F2,
-	SFX_OPEN_METAL_DOOR	:= SFX_ED,
-	SFX_CLOSE_METAL_DOOR	:= SFX_F4
-endenum

Deleted: trunk/096/scripts/include/spellAttack.inc
===================================================================
--- trunk/096/scripts/include/spellAttack.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/spellAttack.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,14 +0,0 @@
-function send_attack(ttarget, source, spellid := 0)
-  var ev := array;
-  ev.+type;
-  ev.+source;
-  ev.type := 0x0002;
-  ev.source := source;
-  SendEvent(ttarget, ev);
-  if (spellid)
-    ev.+spell;
-    ev.type := 0x0800;
-    ev.spell := spellid;
-    SendEvent(ttarget, ev);
-  endif
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/spellRestrictions.inc
===================================================================
--- trunk/096/scripts/include/spellRestrictions.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/spellRestrictions.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,593 +0,0 @@
-use uo;
-use os;
-use cfgfile;
-use util;
-
-include &quot;include/fields&quot;;
-include &quot;include/client&quot;;
-include &quot;include/tileEffects&quot;;
-include &quot;include/sound&quot;;
-include &quot;include/objtype&quot;;
-include &quot;include/statMod&quot;;
-include &quot;include/firewall&quot;;
-include &quot;include/spellAttack&quot;;
-include &quot;include/dist&quot;;
-
-var caster;
-var npccfg := ReadConfigFile(&quot;::npcdesc&quot;);
-const EVID_DISCHARGE := 0x123457;
-
-
-function maincast(parms, delivery, circle, noto, id);
-  var cast_on;
-  var spellscroll := 0;
-  var scroll;
-  var tgtopt := TGTOPT_CHECK_LOS;
-  if(parms[1] == &quot;#MOB&quot;)
-    caster := parms[2];
-    if(mobspellcast(caster, circle, spellscroll) == 0)
-      return 0;
-    endif
-    cast_on := parms[3];
-  elseif (parms[1] == &quot;#scroll&quot;)
-    spellscroll := 1;
-    caster := parms[2];
-    EraseObjProperty(caster, &quot;IsMeditating&quot;);
-    EraseObjProperty(caster, &quot;HealTimer&quot;);
-    if(spellcast(caster, circle, spellscroll, id) == 0)
-      return 0;
-    endif
-    scroll := parms[3];
-    if(!ReserveItem(scroll))
-      SendSysMessage(caster,&quot;You lost your concentration.&quot;, 3, 40);
-      return 0;
-    endif
-    if(delivery == &quot;notarget&quot;)
-      cast_on := caster;
-      if(!can_cast(caster))
-        cast_on := 0;
-      endif
-    elseif(delivery == &quot;direct&quot;)
-      if(noto == &quot;helpful&quot;)
-        cast_on := CanTargetSpell(caster, circle, TGTOPT_HELPFUL | tgtopt);
-        if(!can_cast(caster))
-          cast_on := 0;
-        endif
-      elseif(noto == &quot;neutral&quot;)
-        cast_on := CanTargetSpell(caster, circle, TGTOPT_NEUTRAL | tgtopt);
-        if(!can_cast(caster))
-          cast_on := 0;
-        endif
-      else
-        cast_on := CanTargetSpell(caster, circle, TGTOPT_HARMFUL | tgtopt);
-        if(!can_cast(caster))
-          cast_on := 0;
-        endif
-      endif
-      if(!cast_on)
-        return 0;
-      endif
-    elseif(delivery == &quot;indirect&quot;)
-      cast_on := CanTargetArea(caster, circle);
-      if(!can_cast(caster))
-        cast_on := 0;
-      endif
-      if (!cast_on)
-        return 0;
-      endif
-    else
-      return 0;
-    endif
-  else
-    caster := parms;
-    EraseObjProperty(caster, &quot;IsMeditating&quot;);
-    EraseObjProperty(caster, &quot;HealTimer&quot;);
-    if (spellcast(caster, circle, spellscroll, id) == 0)
-      return 0;
-    endif
-    if (!ConsumeReagents(caster, id+100))
-      SendSysMessage(caster, &quot;You do not have the proper reagents.&quot;);
-      return 0;
-    endif
-    if(delivery == &quot;notarget&quot;)
-      cast_on := caster;
-      if(!can_cast(caster))
-        cast_on := 0;
-      endif
-    elseif(delivery == &quot;direct&quot;)
-      if(noto == &quot;helpful&quot;)
-        cast_on := CanTargetSpell(caster, circle, TGTOPT_HELPFUL | tgtopt);
-        if(!can_cast(caster))
-          cast_on := 0;
-        endif
-      elseif(noto == &quot;neutral&quot;)
-        cast_on := CanTargetSpell(caster, circle, TGTOPT_NEUTRAL | tgtopt);
-        if(!can_cast(caster))
-          cast_on := 0;
-        endif
-      else
-        cast_on := CanTargetSpell(caster, circle, TGTOPT_HARMFUL | tgtopt);
-        if(!can_cast(caster))
-          cast_on := 0;
-        endif
-      endif
-      if (!cast_on)
-        return 0;
-      endif
-    elseif(delivery == &quot;indirect&quot;)
-      cast_on := CanTargetArea(caster, circle);
-      if(!can_cast(caster))
-        cast_on := 0;
-      endif
-      if (!cast_on)
-        return 0;
-      endif
-    else
-      return 0;
-    endif
-  endif
-  if(newusemana(caster, circle, cast_on, delivery) == 0)
-    PlaySoundEffect(caster,0x005d);
-    PlayObjectCenteredEffect(caster, 0x3735,0x0a, 0x1e);
-    return 0;
-  endif
-  if(spellscroll == 1)
-    if(!SubtractAmount(scroll, 1))
-      return 0;
-    endif
-  endif
-  var points := getpoints(circle, spellscroll, SKILLID_MAGERY);
-  //AwardRawSkillPoints(caster, SKILLID_MAGERY, points);
-  var newparms := {};
-  newparms[1] := caster;
-  newparms[2] := cast_on;
-  return newparms;
-endfunction
-
-function can_cast(who)
-  var hand1 := (GetEquipmentByLayer(who, 1));
-  var hand2 := (GetEquipmentByLayer(who, 2));
-  if(hand1)
-    if(hand1.graphic != 0x0efa)
-      SendSysMessage(who,&quot;You can't cast spells with things in your hands.&quot;, 3, 40);
-      return 0;
-    endif
-  endif
-  if(hand2)
-    if(hand2.graphic != 0x0efa)
-      SendSysMessage(who,&quot;You can't cast spells with things in your hands.&quot;, 3, 40);
-      return 0;
-    endif
-  endif
-  return 1;
-endfunction
-
-function CanTargetSpell(caster, circle, targopt := (TGTOPT_NEUTRAL | TGTOPT_CHECK_LOS) )
-  circle := circle; // stops ecompile &quot;not used&quot; warning
-  if(!can_cast(caster))
-    return 0;
-  endif
-  var cast_on := Target(caster, targopt);
-  if(!cast_on)
-    return 0;
-  endif
-  if(cast_on.hidden)
-    SendSysMessage(caster,&quot;You can't see that.&quot;, 3, 40);
-    return 0;
-  endif
-  if(dist(caster, cast_on) &gt;= 12)
-    SendSysMessage(caster, &quot;That is too far away.&quot;, 3, 40);
-    return 0;
-  endif
-  return cast_on;
-endfunction
-
-function CanTargetArea(caster, circle)
-  circle := circle; // stops ecompile &quot;not used&quot; warning
-  if (!can_cast(caster))
-    return 0;
-  endif
-  var cast_loc := TargetCoordinates(caster);
-  if (!cast_loc.x)
-    return 0;
-  endif
-  if (!CheckLosAt(caster, cast_loc.x, cast_loc.y, cast_loc.z))
-    SendSysMessage(caster, &quot;You can't see that.&quot;, 3, 40);
-    return 0;
-  endif
-  if(coordist(caster.x, caster.y, cast_loc.x, cast_loc.y) &gt;= 12)
-    SendSysMessage(caster, &quot;That is too far away.&quot;, 3, 40);
-    return 0;
-  endif
-  return cast_loc;
-endfunction
-
-function Reflected(cast_on)
-  var mr := CInt(GetObjProperty(cast_on, &quot;mr&quot;));
-  if(mr &gt;= 1)
-    PlaySoundEffect(cast_on, SFX_SPELL_MAGIC_REFLECTION);
-    PlayObjectCenteredEffect(cast_on, FX_CURSE_EFFECT, 10,10);
-    SendSysMessage(cast_on, &quot;Your magic reflect spell saved you!&quot;);
-    if(mr == 1)
-      EraseObjProperty(cast_on, &quot;mr&quot;);
-    elseif(mr == 2)
-      var holder, pid;
-      var eqp := GetObjProperty(cast_on, &quot;EquipTimers&quot;);
-      foreach thing in ListEquippedItems(cast_on)
-        foreach entry in eqp
-          if((thing.serial == entry[1]) and (entry[2] == &quot;ref&quot;))
-            holder := GetObjProperty(thing, &quot;pid&quot;);
-            break;
-          endif
-        endforeach
-      endforeach
-      pid := getprocess(holder);
-      if(pid)
-        var k := struct;
-        k.+type := EVID_DISCHARGE;
-        pid.sendevent(k);
-      else
-        EraseObjProperty(cast_on, &quot;mr&quot;);
-      endif
-    endif
-    return 1;
-  endif
-  return 0;
-endfunction
-
-function Resisted(circle, caster, cast_on, amt)
-	// Purpose: to check for resistance to spells cast upon a character
-	// called by: most spells
-	// returns: amount of damage not resisted?
-
-        var magery := CInt(AP_GetSkill(caster, SKILLID_MAGERY));
-        var evalint := CInt(AP_GetSkill(caster, SKILLID_EVALINT));
-        var resist := CInt(AP_GetSkill(cast_on, SKILLID_MAGICRESISTANCE));
-        
-        // chk1 relates to the resist ability.
-        var chk1 := (resist / 5);
-        // chk2 relates to the difficulty level
-        var chk2 := resist - (((magery - 20) / 5) + (circle * 5));
-        
-        if(chk1 &lt; 1)
-                chk1 := 1;
-        endif
-        if(chk2 &lt; 1)
-                chk2 := 1;
-        endif
-        
-        // What an odd construct.  
-        // If you're hit with an easy spell then you have a difficulty of your resist
-        var diff := 0;
-        if(chk1 &gt; chk2)
-                diff := chk1;
-        else
-                diff := chk2;
-        endif
-        
-        var points := getresistpoints(circle, cast_on, SKILLID_MAGICRESISTANCE);
-        if(cast_on.dead)
-                return 0;
-        endif
-        if(CheckSkill(cast_on, SKILLID_MAGICRESISTANCE, diff, points))
-                SendSysMessage(cast_on, &quot;You feel yourself resisting magical energy!&quot;);
-                PlaySoundEffect(cast_on, SFX_SPELL_WEAKEN);
-                PlayObjectCenteredEffect(cast_on, FX_CURSE_EFFECT, 5,5);
-                amt := (amt * 0.5);
-                if(amt &lt; 1)
-                        amt := 1;
-                endif
-        endif
-        var modamt := 1;
-        if(resist &gt; evalint)
-                modamt := (1 + ((evalint - resist) / 200.0));
-        elseif(evalint &gt; resist)
-                modamt := (1 + ((evalint - resist) / 500.0));
-        endif
-        amt := (amt * modamt);
-        return CInt(amt);
-endfunction
-
-
-function CalcSpellDamage(circle, caster, cast_on)
-  var die_string := circle+&quot;d8&quot;;
-  var dmg := RandomDiceRoll(die_string);
-  dmg := dmg + CInt(AP_GetSkill(caster, SKILLID_MAGERY)/10);
-  if(dmg &gt; (circle * 8))
-    dmg := circle * 8;
-  endif
-  return dmg;
-endfunction
-
-function CanTargetThing(caster, circle, targopt := TGTOPT_CHECK_LOS)
-  if (!can_cast(caster))
-    return 0;
-  endif
-  var cast_on := Target(caster, targopt);
-  if(!cast_on)
-    return;
-  endif
-  return cast_on;
-endfunction
-
-function spellcast(me, circle, scroll, id)
-  var spellcfg := ReadConfigFile(&quot;:spells:spells&quot;);
-  var val := SplitWords(spellcfg[id].val);
-  var times := CInt(val[1]);
-  var slp   := CInt(val[2]);
-  var mhp := AP_GetVital(me, &quot;Hits&quot;);
-  var umana, diff;
-  var n := 1;
-  if(scroll == 0)
-    case (circle)
-      1:   umana :=   4;     diff :=  10;
-      2:   umana :=   6;     diff :=  20;
-      3:   umana :=   9;     diff :=  30;
-      4:   umana :=  11;     diff :=  50;
-      5:   umana :=  14;     diff :=  60;
-      6:   umana :=  20;     diff :=  70;
-      7:   umana :=  40;     diff :=  85;
-      8:   umana :=  50;     diff :=  95;
-      9:   umana :=  75;     diff := 100;
-     10:   umana := 100;     diff := 100;
-    endcase
-  elseif(scroll == 1)
-    case (circle)
-      1:   umana :=   4;     diff := 10;
-      2:   umana :=   6;     diff := 10;
-      3:   umana :=   9;     diff := 10;
-      4:   umana :=  11;     diff := 20;
-      5:   umana :=  14;     diff := 30;
-      6:   umana :=  20;     diff := 50;
-      7:   umana :=  40;     diff := 60;
-      8:   umana :=  50;     diff := 70;
-      9:   umana :=  75;     diff := 85;
-     10:   umana := 100;     diff := 95;
-    endcase
-  else
-    return 0;
-  endif
-  if((mhp &gt; AP_GetVital(me, &quot;Hits&quot;)) &amp;&amp; ((RandomInt(99)+1) &gt; (AP_GetSkill(me, SKILLID_WRESTLING)/2)))
-    SendSysMessage(me,&quot;You lost your concentration.&quot;, 3, 40);
-    return 0;
-  endif
-  if (umana &gt; AP_GetVital(me, &quot;Mana&quot;))
-    me.frozen :=1;
-    PerformAction(me,ANIM_CAST_DIR);
-    sleepms(1200);
-    me.frozen :=0;
-    SendSysMessage(me,&quot;You do not have enough mana to cast that.&quot;, 3, 40);
-    PlaySoundEffect(me,0x005d);
-    PlayObjectCenteredEffect(me, 0x3735,0x0a, 0x1e);
-    return 0;
-  endif
-  if(can_cast(me))
-    me.frozen :=1;
-    for (n:=1; n&lt;=times; n:=n+1)
-      if((mhp &gt; AP_GetVital(me, &quot;Hits&quot;)) &amp;&amp; ((RandomInt(99)+1) &gt; (AP_GetSkill(me, SKILLID_WRESTLING)/2)))
-        SendSysMessage(me,&quot;You lost your concentration.&quot;, 3, 40);
-        PlaySoundEffect(me,0x005d);
-        PlayObjectCenteredEffect(me, 0x3735,0x0a, 0x1e);
-        me.frozen :=0;
-        return 0;
-      endif
-      PerformAction(me,ANIM_CAST_DIR);
-      sleepms(900);
-    endfor
-    if(slp)
-      sleepms(slp * 100);
-    endif
-    me.frozen :=0;
-    if (CheckSkill(me,SKILLID_MAGERY, diff, 0))
-      if((mhp &gt; AP_GetVital(me, &quot;Hits&quot;)) &amp;&amp; ((RandomInt(99)+1) &gt; (AP_GetSkill(me, SKILLID_WRESTLING)/2)))
-        SendSysMessage(me,&quot;You lost your concentration.&quot;, 3, 40);
-        return 0;
-      endif
-      return 1;
-    else
-      SendSysMessage(me,&quot;The spell fizzles.&quot;, 3, 40);
-      PlaySoundEffect(me,0x005d);
-      PlayObjectCenteredEffect(me, 0x3735,0x0a, 0x1e);
-      return 0;
-    endif
-  endif
-endfunction
-
-function newusemana(who, circle, cast_on, delivery)
-  if(delivery == &quot;direct&quot;)
-    if(!CheckLineOfSight(who, cast_on))
-      SendSysMessage(who, &quot;You can't see that.&quot;, 3, 40);
-      return 0;
-    endif
-  elseif(delivery == &quot;indirect&quot;)
-    if(!CheckLosAt(who, cast_on.x, cast_on.y, cast_on.z))
-      SendSysMessage(who, &quot;You can't see that.&quot;, 3, 40);
-      return 0;
-    endif
-  endif
-  if(cdist(who.x, who.y, cast_on.x, cast_on.y) &gt; 12)
-    var check := 0;
-    foreach thing in EnumerateItemsInContainer(who.backpack)
-      if(thing == cast_on)
-        check := 1;
-        break;
-      endif
-    endforeach
-    if(!check)
-      SendSysMessage(who,&quot;The target is out of range.&quot;, 3, 40);
-      return 0;
-    endif
-  endif
-  var umana;
-    case (circle)
-    1: umana :=  4;
-    2: umana :=  6;
-    3: umana :=  9;
-    4: umana := 11;
-    5: umana := 14;
-    6: umana := 20;
-    7: umana := 40;
-    8: umana := 50;
-  endcase
-  var mana := AP_GetVital(who, &quot;Mana&quot;);
-  if(mana &gt;= umana)
-    AP_SetVital(who, &quot;Mana&quot;, Cint(mana - umana));
-    return 1;
-  else
-    SendSysMessage(who,&quot;You do not have enough mana to cast that.&quot;, 3, 40);
-    return 0;
-  endif
-endfunction
-
-function mobspellcast(me, circle, scroll)
-  scroll := scroll; // stops ecompile &quot;not used&quot; warning
-  var diff, points, umana;
-  case(circle)
-    1:   diff := 10;     points :=  20;    umana :=   4;
-    2:   diff := 20;     points :=  40;    umana :=   6;
-    3:   diff := 30;     points :=  80;    umana :=   9;
-    4:   diff := 50;     points := 100;    umana :=  11;
-    5:   diff := 60;     points := 130;    umana :=  14;
-    6:   diff := 70;     points := 160;    umana :=  20;
-    7:   diff := 85;     points := 190;    umana :=  40;
-    8:   diff := 95;     points := 210;    umana :=  50;
-  endcase
-  if(umana &gt; AP_GetVital(me, &quot;Mana&quot;))
-    return 0;
-  endif
-  if(can_cast(me))
-    if(CheckSkill(me, SKILLID_MAGERY, (diff - 10), points))
-      return 1;
-    else
-      return 0;
-    endif
-  endif
-endfunction
-
-function getpoints(c, scroll, skillid)
-  var points;
-  var diff;
-  if(scroll == 1)
-    case(c)
-      1:   points :=  10; diff :=  0;
-      2:   points :=  20; diff := 10;
-      3:   points :=  20; diff := 10;
-      4:   points :=  40; diff := 20;
-      5:   points :=  60; diff := 30;
-      6:   points := 100; diff := 50;
-      7:   points := 120; diff := 60;
-      8:   points := 140; diff := 70;
-    endcase
-  else
-    case(c)
-      1:   points :=  20; diff := 20;
-      2:   points :=  40; diff := 30;
-      3:   points :=  80; diff := 40;
-      4:   points := 100; diff := 50;
-      5:   points := 120; diff := 60;
-      6:   points := 140; diff := 70;
-      7:   points := 160; diff := 86;
-      8:   points := 180; diff := 100;
-    endcase
-  endif
-  var skill := AP_GetSkill(caster, skillid);
-  if(skill &gt; (diff - 20))
-    if((skill - diff) &lt;= 5)
-      points := points;
-    elseif((skill - diff) &lt;= 10)
-      points := (points * 3) / 4;
-    elseif((skill - diff) &lt;= 15)
-      points := points / 2;
-    elseif((skill - diff) &lt;= 15)
-      points := points / 4;
-    else
-      points := 0;
-    endif
-  endif
-  return points;
-endfunction
-
-function getresistpoints(c, victim, skillid)
-  var points;
-  var diff;
-  case(c)
-    1:   points :=  20; diff := 20;
-    2:   points :=  40; diff := 30;
-    3:   points :=  80; diff := 40;
-    4:   points := 100; diff := 50;
-    5:   points := 120; diff := 60;
-    6:   points := 140; diff := 70;
-    7:   points := 160; diff := 86;
-    8:   points := 180; diff := 100;
-  endcase
-  var skill := AP_GetSkill(victim, skillid);
-  if(skill &gt; (diff - 20))
-    if((skill - diff) &lt;= 5)
-      points := points;
-    elseif((skill - diff) &lt;= 10)
-      points := (points * 3) / 4;
-    elseif((skill - diff) &lt;= 15)
-      points := points / 2;
-    elseif((skill - diff) &lt;= 15)
-      points := points / 4;
-    else
-      points := 0;
-    endif
-  endif
-  return points;
-endfunction
-
-function cdist(x1, y1, x2, y2)
-  var xd := x1 - x2;
-  var yd := y1 - y2;
-  if (xd &lt; 0)
-    xd := -xd;
-  endif
-  if (yd &lt; 0)
-    yd := -yd;
-  endif
-  if (xd &gt; yd)
-    return xd;
-  else
-    return yd;
-  endif
-endfunction
-
-function usemana(who, circle, cast_on)
-  if(cast_on.mobile)
-    if(!CheckLineOfSight(who, cast_on))
-      SendSysMessage(who, &quot;You can't see that.&quot;, 3, 40);
-      return 0;
-    endif
-  else
-    if(!CheckLosAt(who, cast_on.x, cast_on.y, cast_on.z))
-      SendSysMessage(who, &quot;You can't see that.&quot;, 3, 40);
-      return 0;
-    endif
-  endif
-  if(cdist(who.x, who.y, cast_on.x, cast_on.y) &gt; 12)
-    SendSysMessage(who,&quot;The target is out of range.&quot;, 3, 40);
-    return 0;
-  endif
-  var umana;
-  case (circle)
-    1: umana :=   4;
-    2: umana :=   6;
-    3: umana :=   9;
-    4: umana :=  11;
-    5: umana :=  14;
-    6: umana :=  20;
-    7: umana :=  40;
-    8: umana :=  50;
-    9: umana :=  75;
-   10: umana := 100;
-  endcase
-  var mana := AP_GetVital(who, &quot;Mana&quot;);
-  if(mana &gt;= umana)
-    var ms := AP_SetVital(who, &quot;Mana&quot;, Cint(mana - umana));
-    return 1;
-  else
-    SendSysMessage(who,&quot;You do not have enough mana to cast that.&quot;, 3, 40);
-    return 0;
-  endif
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/startEqp.inc
===================================================================
--- trunk/096/scripts/include/startEqp.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/startEqp.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,595 +0,0 @@
-use uo;
-use cfgfile;
-use os;
-use util;
-
-include &quot;:attributes:attributes&quot;;
-
-var unique_items_created := {};
-var starteqp_cfg;
-var template;
-var magicspawnchance := 0;
-var magicadjustment  := 0;
-var making_starting_equipment := 0;
-
-var thecritter;
-
-function MakeLoot(corpse, lootgroup)
-  var npcdesc := ReadConfigFile(&quot;::npcdesc&quot;);
-  var elem := FindConfigElem(npcdesc, corpse.npctemplate);
-  var mprop, madj;
-  if(elem)
-    mprop := CInt(GetConfigInt(elem, &quot;Magicitemchance&quot;));
-    madj  := CInt(GetConfigInt(elem, &quot;MagicAdjustment&quot;));
-  else
-    mprop := 1;
-    if(corpse.objtype == 0x9e40)
-      case(CInt(GetObjProperty(corpse,&quot;level&quot;)))
-        1: madj := 0;
-        2: madj := 2;
-        3: madj := 4;
-        4: madj := 6;
-        5: madj := 8;
-      endcase
-    else
-      magicadjustment := 0;
-    endif
-  endif
-  if(AP_GetVital(corpse, &quot;Hits&quot;))
-    foreach thing in ListEquippedItems(corpse)
-      if(thing.objtype == 0xe75)
-        corpse := thing;
-        break;
-      endif
-    endforeach
-  endif
-  thecritter := corpse;
-  if(mprop)
-    magicspawnchance := 1;
-  else
-    if((corpse.objtype == 0x9e40) || (corpse.objtype == 0xe40))
-      magicspawnchance := 1;
-    else
-      magicspawnchance := 0;
-    endif
-  endif
-  magicadjustment  := madj;
-  starteqp_cfg := ReadConfigFile(&quot;::nlootgroup&quot;);
-  if(lootgroup)
-    CreateFromGroup(corpse, lootgroup);
-  else
-    var lootgroups := GetConfigStringArray(elem, &quot;lootgroup&quot;);
-    foreach str in lootgroups
-      CreateFromGroup(corpse, CInt(str));
-    endforeach
-  endif
-endfunction
-
-function CreateStartingEquipment(who, skillids)
-  making_starting_equipment := 1;
-  starteqp_cfg := ReadConfigFile(&quot;::starteqp&quot;);
-  foreach skillid in skillids
-    var skillname := GetSkillName(CInt(skillid));
-    CreateFromGroup(who.backpack, skillname);
-  endforeach
-  CreateFromGroup(who.backpack, &quot;all&quot;);
-endfunction
-
-function CreateFromGroup(who, group)
-  if(making_starting_equipment != 1)
-	starteqp_cfg := ReadConfigFile(&quot;::nlootgroup&quot;);
-  endif
-  var elem := starteqp_cfg[group];
-  foreach str in GetConfigStringArray(elem, &quot;Stack&quot;)
-    CreateFromStackString(who, str);
-  endforeach
-  foreach str in GetConfigStringArray(elem, &quot;Item&quot;)
-    CreateFromItemString(who, str);
-  endforeach
-  foreach str in GetConfigStringArray(elem, &quot;Random&quot;)
-    CreateFromRandomString(who, str);
-  endforeach
-  foreach str in GetConfigStringArray(elem, &quot;Group&quot;)
-    CreateFromGroup(who, str);
-  endforeach
-  foreach str in GetConfigStringArray(elem, &quot;Unique&quot;)
-    CreateFromUniqueString(who, str);
-  endforeach
-endfunction
-
-function GetSkillName(skillid)
-  var cfg := ReadConfigFile(&quot;::skills&quot;);
-  return cfg[skillid].name;
-endfunction
-
-function CreateFromItemString(who, str)
-  var params := SplitWords(str);
-  var count, objname, color, chance;
-  var colors := ReadConfigFile(&quot;::colors&quot;);
-  count := RandomDiceRoll(CStr(params[1]));
-  params[1] := params[2];
-  params[2] := params[3];
-  params[3] := params[4];
-  if (!count)
-    count := 1;
-  endif
-  objname := params[1];
-  if(CInt(params[2]))
-    color := CInt(params[2]);
-  elseif (params[2])
-    color := 0;
-    var colorg := FindConfigElem(colors, params[2]);
-    if(colorg)
-      var str := GetConfigStringArray(colorg, &quot;color&quot;);
-	  var ar := {};
-	  var rndint := RandomInt(len(str)) + 1;
-	  ar := SplitWords(str[rndint]);
-	  if(len(ar) &gt; 1)
-	    if(CInt(ar[2]) &gt; 0)
-	      color := RandomInt(CInt(ar[2]) - CInt(ar[1]))+1;
-	    else
-	      color := CInt(str[RandomInt(len(str))+1]);
-	    endif
-	  else
-            color := CInt(str[RandomInt(len(str))+1]);
-	  endif
-	  if(color == 1)
-	    color := 0;
-	  endif
-    endif
-  endif
-  if (!color)
-    color := 0;
-  endif
-  if(CInt(params[3]))
-    chance := CInt(params[3]);
-  else
-    chance := 100;
-  endif
-  if(CInt(RandomInt(100)+1) &lt;= CInt(chance))
-    var i, canbemagic;
-    for(i:=1; i&lt;=CInt(count); i:=i+1)
-      if (CInt(objname))
-        objname := CInt(objname);
-      endif
-      var item := CreateItemInContainer(who, objname);
-      item.color := color;
-      if(making_starting_equipment)
-        item.newbie := 1;
-        continue;
-      endif
-      if( (item.graphic in array( 0xdf2, 0xdf3, 0xdf4, 0xdf5, 0x13f9 )) &amp;&amp; (magicspawnchance == 1))
-        ProcessWand(item);
-      else
-        if(magicspawnchance == 1)
-          canbemagic := MagicAllowedandType(objname);
-          case(canbemagic)
-            1: WeaponTable(item);
-            2: ArmorTable(item);
-            3: ClothTable(item);
-          endcase
-        endif
-      endif
-    endfor
-  endif
-endfunction
-
-function ProcessWand(item)
-  var amt;
-  case(RandomInt(10) + 1)
-    1: amt :=  15;   SetObjProperty(item, &quot;SpellId&quot;,  1);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of clumsiness&quot;);
-    2: amt :=  15;   SetObjProperty(item, &quot;SpellId&quot;,  3);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of feeblemindedness&quot;);
-    3: amt :=  15;   SetObjProperty(item, &quot;SpellId&quot;,  4);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of healing&quot;);
-    4: amt :=  15;   SetObjProperty(item, &quot;SpellId&quot;,  8);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of weakness&quot;);
-    5: amt :=  10;   SetObjProperty(item, &quot;SpellId&quot;, 12);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of harming&quot;);
-    6: amt :=   5;   SetObjProperty(item, &quot;SpellId&quot;, 18);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of fireballs&quot;);
-    7: amt :=   5;   SetObjProperty(item, &quot;SpellId&quot;, 29);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of greater healing&quot;);
-    8: amt :=   3;   SetObjProperty(item, &quot;SpellId&quot;, 30);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of lightning&quot;);
-    9: amt :=  10;   SetObjProperty(item, &quot;SpellId&quot;, 31);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of mana draining&quot;);
-   10: amt := 100;   SetObjProperty(item, &quot;SpellId&quot;, 65);   SetObjProperty(item, &quot;damagemod&quot;, &quot;of identification&quot;);
-  endcase
-  SetObjProperty(item, &quot;charges&quot;, (amt + RandomInt(10)));
-  item.usescript := &quot;:wands:magicWands&quot;;
-  var dsc;
-  if(item.objtype == 0x13f9)
-    dsc := &quot;gnarled staff&quot;;
-  else
-    dsc := &quot;wand&quot;;
-  endif
-  SetName(item, &quot;a magic &quot; + dsc);
-endfunction
-
-function ClothTable(item)
-  var val := RandomInt(19) + 1;
-  if(val &gt;= 14)
-    var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
-    SetObjProperty(item, &quot;charges&quot;, charges);
-    SetObjProperty(item, &quot;type&quot;, &quot;sight&quot;);
-    SetObjProperty(item, &quot;damagemod&quot;, &quot; of nightsight&quot;);
-  elseif(val &gt;= 11)
-    var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
-    SetObjProperty(item, &quot;charges&quot;, charges);
-    SetObjProperty(item, &quot;type&quot;, &quot;protection&quot;);
-    SetObjProperty(item, &quot;damagemod&quot;, &quot; of protection&quot;);
-  elseif(val &lt;= 8)
-    var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
-    SetObjProperty(item, &quot;charges&quot;, charges);
-    SetObjProperty(item, &quot;type&quot;, &quot;strength&quot;);
-    SetObjProperty(item, &quot;damagemod&quot;, &quot; of strength&quot;);
-  elseif(val &gt; 5)
-    var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
-    SetObjProperty(item, &quot;charges&quot;, charges);
-    SetObjProperty(item, &quot;type&quot;, &quot;invisibility&quot;);
-    SetObjProperty(item, &quot;damagemod&quot;, &quot; of invisibility&quot;);
-  elseif(val == 3)
-    var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
-    SetObjProperty(item, &quot;charges&quot;, charges);
-    SetObjProperty(item, &quot;type&quot;, &quot;blessing&quot;);
-    SetObjProperty(item, &quot;damagemod&quot;, &quot; of blessing&quot;);
-  else
-    var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
-    SetObjProperty(item, &quot;charges&quot;, charges);
-    SetObjProperty(item, &quot;type&quot;, &quot;reflect&quot;);
-    SetObjProperty(item, &quot;damagemod&quot;, &quot; of magic reflection&quot;);
-  endif
-  AddName(item);
-endfunction
-
-function ArmorTable(item)
-  var newarray := {1, 2};
-  var count := RandomInt(99) + 1;
-  var counter;
-  if(count &gt;= 40)
-    counter := 1;
-  else
-    counter := 2;
-  endif
-  count := 0;
-  var num;
-  while(count &lt;= counter)
-    num := RandomInt(99) + 1;
-    if(num &gt;=  50)
-      num := 1;
-    else
-      num := 2;
-    endif
-    case(num)
-      1: ApplyHPMod(item);
-      2: ApplyARMod(item);
-    endcase
-    newarray.erase(num);
-    count := count + 1;
-  endwhile
-  if((RandomInt(10)+1) &lt;= 1)
-    ExtraArmorTable(item);
-  endif
-  AddName(item);
-endfunction
-
-function ExtraArmorTable(item)
-  var val := RandomInt(4) + 1;
-  case(val)
-    1: var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
-       SetObjProperty(item, &quot;charges&quot;, charges);
-       SetObjProperty(item, &quot;type&quot;, &quot;protection&quot;);
-       var dmgmod := GetObjProperty(item, &quot;damagemod&quot;);
-       if(dmgmod)
-         dmgmod := dmgmod + &quot; and protection&quot;;
-         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
-       else
-         dmgmod := &quot; of protection&quot;;
-         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
-       endif
-    2: var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
-       SetObjProperty(item, &quot;charges&quot;, charges);
-       SetObjProperty(item, &quot;type&quot;, &quot;strength&quot;);
-       var dmgmod := GetObjProperty(item, &quot;damagemod&quot;);
-       if(dmgmod)
-         dmgmod := dmgmod + &quot; and strength&quot;;
-         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
-       else
-         dmgmod := &quot; of strength&quot;;
-         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
-       endif
-    3:  var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
-       SetObjProperty(item, &quot;charges&quot;, charges);
-       SetObjProperty(item, &quot;type&quot;, &quot;blessing&quot;);
-       var dmgmod := GetObjProperty(item, &quot;damagemod&quot;);
-       if(dmgmod)
-         dmgmod := dmgmod + &quot; and blessing&quot;;
-         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
-       else
-         dmgmod := &quot; of blessing&quot;;
-         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
-       endif
-    4: var charges := RandomDiceRoll(&quot;1d30&quot;) + 10;
-       SetObjProperty(item, &quot;charges&quot;, charges);
-       SetObjProperty(item, &quot;type&quot;, &quot;reflect&quot;);
-       var dmgmod := GetObjProperty(item, &quot;damagemod&quot;);
-       if(dmgmod)
-         dmgmod := dmgmod + &quot; and magic reflection&quot;;
-         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
-       else
-         dmgmod := &quot; of magic reflection&quot;;
-         SetObjProperty(item, &quot;damagemod&quot;, dmgmod);
-       endif
-  endcase
-endfunction
-
-function WeaponTable(item)
-  var newarray := array(1, 2, 3);
-  var count := RandomInt(100) + 1;
-  var counter;
-  if(count &gt;= 60)
-    counter := 1;
-  elseif(count &gt;= 40)
-    counter := 2;
-  elseif(count &gt;= 10)
-    counter := 3;
-  else
-    counter := 4;
-  endif
-  if(counter == 1)
-    DestroyItem(item);
-    return;
-  endif
-  count := 0;
-  var num, val;
-  while(count &lt;= counter)
-    num := RandomInt(len(newarray)) + 1;
-    val := newarray[num];
-    case(val)
-      1: ApplyAccyMod(item);
-      2: ApplyHPMod(item);
-      3: ApplyDmgMod(item);
-    endcase
-    newarray.erase(num);
-    count := count + 1;
-  endwhile
-  AddName(item);
-endfunction
-
-function CreateFromRandomString(who, desc)
-  var params := SplitWords(desc);
-  var amt := Cint(params[1]);
-  var count := 1;
-  if(amt != 1)
-    count := RandomDiceRoll(Cstr(amt + 1));
-  endif
-  var group := params[2];
-  var chance := params[4];
-  var elem := FindConfigElem(starteqp_cfg, group);
-  if(elem == error)
-    syslog(&quot;Unable to find group &quot; + group);
-    return;
-  endif
-  var items := GetConfigStringArray(elem, &quot;Item&quot;);
-  if(items == error)
-    syslog(&quot;Group &quot; + group + &quot; does not contain items!&quot;);
-    return;
-  endif
-  if(!chance)
-    chance := 100;
-  endif
-  var rand := RandomInt(99)+1;
-  if(CInt(rand) &lt;= CInt(chance))
-    if(count &gt; len(items))
-      count := len(items);
-    endif
-    while(count)
-      var n := RandomInt(len(items)) + 1;
-      if(items[n])
-        CreateFromItemString(who, items[n]);
-        if(making_starting_equipment)
-          items[n] := &quot;&quot;;
-        endif
-        count := count - 1;
-      endif
-    endwhile
-  endif
-endfunction
-
-function CreateFromUniqueString(who, str)
-  var params := SplitWords(str);
-  var objtype;
-  if (CInt(params[1]))
-    objtype := params[1];
-  else
-    objtype := GetObjtypeByName(params[1]);
-  endif
-  if(!objtype)
-    syslog(&quot;Don't know what a &quot; + str + &quot; is&quot;);
-    return;
-  endif
-  if(objtype in unique_items_created)
-    return;
-  endif
-  unique_items_created[len(unique_items_created) + 1] := objtype;
-  var newstr := &quot;1 &quot; + str;
-  CreateFromItemString(who, newstr);
-endfunction
-
-function CreateFromStackString(who, str)
-  var params := SplitWords(str);
-  var count;
-  var objname;
-  var color;
-  var chance;
-  count := RandomDiceRoll(CStr(params[1]));
-  params[1] := params[2];
-  params[2] := params[3];
-  params[3] := params[4];
-  if (!count)
-    count := 1;
-  endif
-  objname := params[1];
-  if(CInt(params[2]))
-    color := CInt(params[2]);
-  else
-    color := 0;
-  endif
-  if (CInt(params[3]))
-    chance := CInt(params[3]);
-  else
-    chance := 100;
-  endif
-  var rand := RandomInt(100)+1;
-  if(CInt(rand) &lt;= CInt(chance))
-    if (CInt(objname))
-      objname := CInt(objname);
-    endif
-    var item := CreateItemInContainer(who, objname, count);
-    if(!item)
-      syslog(&quot;Unable to create &quot; + objname + &quot; on &quot; + who.name + &quot;.&quot;);
-    endif
-    item.color := color;
-    if(making_starting_equipment)
-      item.newbie := 1;
-    endif
-  endif
-endfunction
-
-function MagicAllowedandType(objname)
-  var magicweapcfg := ReadConfigFile(&quot;:combat:magicweaps&quot;);
-  var magicarmorcfg := ReadConfigFile(&quot;:combat:magicarmor&quot;);
-  var magicclothcfg := ReadConfigFile(&quot;:combat:magiccloth&quot;);
-  var elem1 := FindConfigElem(magicweapcfg, &quot;1&quot;);
-  var data1 := GetConfigInt(elem1, objname);
-  if(data1)
-    return 1;
-  endif
-  var elem2 := FindConfigElem(magicarmorcfg, &quot;1&quot;);
-  var data2 := GetConfigInt(elem2, objname);
-  if(data2)
-    return 2;
-  endif
-  var elem3 := FindConfigElem(magicclothcfg, &quot;1&quot;);
-  var data3 := GetConfigInt(elem3, objname);
-  if(data3)
-    return 3;
-  endif
-  return 0;
-endfunction
-
-function ApplyDmgMod(item)
-  var numb := ((RandomInt(100)+1) - magicadjustment);
-  if(numb &lt; 1)
-    numb := 1;
-  endif
-  if(numb &gt;= 50)
-    item.dmg_mod := 1;
-    SetObjProperty(item, &quot;damagemod&quot;, &quot;of ruin&quot;);
-  elseif(numb &gt;= 25)
-    item.dmg_mod := 3;
-    SetObjProperty(item, &quot;damagemod&quot;, &quot;of might&quot;);
-  elseif(numb &gt;= 15)
-    item.dmg_mod := 5;
-    SetObjProperty(item, &quot;damagemod&quot;, &quot;of force&quot;);
-  elseif(numb &gt;= 5)
-    item.dmg_mod := 7;
-    SetObjProperty(item, &quot;damagemod&quot;, &quot;of power&quot;);
-  elseif(numb &gt;= 1)
-    item.dmg_mod := 9;
-    SetObjProperty(item, &quot;damagemod&quot;, &quot;of vanquishing&quot;);
-  endif
-  SilverMod(item);
-endfunction
-
-function ApplyAccyMod(item)
-  var numb := ((RandomInt(100)+1) - magicadjustment);
-  if(numb &lt; 1)
-    numb := 1;
-  endif
-  var modifier := 0;
-  if(numb &gt;= 50)
-    modifier := 5;
-    SetObjProperty(item, &quot;accuracy&quot;, &quot;accurate&quot;);
-  elseif(numb &gt;= 25)
-    modifier := 10;
-    SetObjProperty(item, &quot;accuracy&quot;, &quot;surpassingly accurate&quot;);
-  elseif(numb &gt;= 15)
-    modifier := 15;
-    SetObjProperty(item, &quot;accuracy&quot;, &quot;eminently accurate&quot;);
-  elseif(numb &gt;= 5)
-    modifier := 20;
-    SetObjProperty(item, &quot;accuracy&quot;, &quot;exceedingly accurate&quot;);
-  elseif(numb &gt;= 1)
-    modifier := 25;
-    SetObjProperty(item, &quot;accuracy&quot;, &quot;supremely accurate&quot;);
-  endif
-  SetObjProperty(item, &quot;type&quot;, &quot;accuracy&quot;);
-  SetObjProperty(item, &quot;gain&quot;, modifier);
-endfunction
-
-function ApplyHPMod(item)
-  var numb := ((RandomInt(100)+1) - magicadjustment);
-  if(numb &lt; 1)
-    numb := 1;
-  endif
-  if(numb &gt;= 50)
-    item.maxhp_mod := item.maxhp_mod + 05;
-    SetObjProperty(item, &quot;durability&quot;, &quot;durable&quot;);
-  elseif(numb &gt;= 25)
-    item.maxhp_mod := item.maxhp_mod + 10;
-    SetObjProperty(item, &quot;durability&quot;, &quot;substantial&quot;);
-  elseif(numb &gt;= 15)
-    item.maxhp_mod := item.maxhp_mod + 15;
-    SetObjProperty(item, &quot;durability&quot;, &quot;massive&quot;);
-  elseif(numb &gt;= 5)
-    item.maxhp_mod := item.maxhp_mod + 20;
-    SetObjProperty(item, &quot;durability&quot;, &quot;fortified&quot;);
-  elseif(numb &gt;= 1)
-    item.maxhp_mod := item.maxhp_mod + 25;
-    SetObjProperty(item, &quot;durability&quot;, &quot;indestructable&quot;);
-  endif
-  item.hp := item.maxhp;
-endfunction
-
-function ApplyARMod(item)
-  var numb := ((RandomInt(100)+1) - magicadjustment);
-  if(numb &lt; 1)
-    numb := 1;
-  endif
-  if(numb &gt;= 50)
-    item.ar_mod := 5;
-    SetObjProperty(item, &quot;damagemod&quot;, &quot;of defense&quot;);
-  elseif(numb &gt;= 25)
-    item.ar_mod := 10;
-    SetObjProperty(item, &quot;damagemod&quot;, &quot;of guarding&quot;);
-  elseif(numb &gt;= 15)
-    item.ar_mod := 15;
-    SetObjProperty(item, &quot;damagemod&quot;, &quot;of hardening&quot;);
-  elseif(numb &gt;= 5)
-    item.ar_mod := 20;
-    SetObjProperty(item, &quot;damagemod&quot;, &quot;of fortification&quot;);
-  elseif(numb &gt;= 1)
-    item.ar_mod := 25;
-    SetObjProperty(item, &quot;damagemod&quot;, &quot;of invulnerability&quot;);
-  endif
-endfunction
-
-function SilverMod(item)
-  var numb := (RandomInt(10) + 1);
-  if(numb == 1)
-    var hits := GetObjProperty(item, &quot;OnHit&quot;);
-    if(!hits)
-      hits := {};
-    endif
-    hits.append(&quot;silverHit&quot;);
-    SetObjProperty(item, &quot;OnHit&quot;, hits);
-    SetObjProperty(item, &quot;silvermod&quot;, 1);
-  endif
-endfunction
-
-function AddName(item)
-  var currdesc := item.desc;
-  if(currdesc[1] == &quot;a&quot;)
-    var space := find(item.desc, &quot; &quot;, 1);
-    var newname := currdesc[space+1,len(item.desc)];
-    SetName(item,&quot;a magic &quot; + newname);
-  else
-    SetName(item, &quot;magic &quot; + currdesc);
-  endif
-endfunction
-
-

Deleted: trunk/096/scripts/include/statMod.inc
===================================================================
--- trunk/096/scripts/include/statMod.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/statMod.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,52 +0,0 @@
-use uo;
-use util;
-
-include &quot;:attributes:attributes&quot;;
-
-function GetModAmount(magery)
-  var mod_amount := CInt(RandomInt(3) +(magery/10));
-  if(mod_amount &gt; 10)
-    mod_amount := 10;
-  endif
-  return mod_amount;
-endfunction
-
-function GetModDuration(magery)
-  var duration := CInt(60 +((magery / 30) * 60));
-  return(duration);
-endfunction
-
-function CanMod(who, stat)
-  var mod;
-  case(stat)
-    &quot;str&quot;: mod := &quot;#ss&quot;;
-    &quot;dex&quot;: mod := &quot;#dd&quot;;
-    &quot;int&quot;: mod := &quot;#ii&quot;;
-    &quot;p&quot;  : mod := &quot;#pp&quot;;
-    &quot;ar&quot; : mod := &quot;#ar&quot;;
-  endcase
-  if(GetObjProperty(who, mod))
-    return 0;
-  else
-    return 1;
-  endif
-endfunction
-
-function DoTempMod(who, stat, amt, duration)
-  var mod;
-  case(stat)
-    &quot;str&quot;:  mod := &quot;#ss&quot;;  AP_SetStatMod(who, &quot;Strength&quot;, AP_GetStatMod(who, &quot;Strength&quot;) + amt);
-    &quot;dex&quot;:  mod := &quot;#dd&quot;;  AP_SetStatMod(who, &quot;Dexterity&quot;, AP_GetStatMod(who, &quot;Dexterity&quot;) + amt);
-    &quot;int&quot;:  mod := &quot;#ii&quot;;  AP_SetStatMod(who, &quot;Intelligence&quot;, AP_GetStatMod(who, &quot;Intelligence&quot;) + amt);
-    &quot;ar&quot; :  mod := &quot;#ar&quot;;  who.ar_mod           := who.ar_mod + amt;
-	&quot;p&quot;  :  mod := &quot;#pp&quot;;  who.setParalyzed(1);
-  endcase
-  SetObjProperty(who,mod,1);
-  var parms := {};
-  parms[2] := who;
-  parms[1] := stat;
-  parms[3] := amt;
-  parms[4] := duration;
-  parms[5] := who.serial;
-  start_script(&quot;::/misc/unmod&quot;, parms);
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/std.inc
===================================================================
--- trunk/096/scripts/include/std.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/std.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,517 +0,0 @@
-/***************************************************************************
-
-	STANDARD POL INCLUDE FILE v0.4
-
-	Last Update: 2001-03-02
-
-	This file is a collection of the most used (and useful) functions
-	available in the POL community. It's intended to be a replacement
-	for those include files that everyone has but were never released
-	to the public, providing a wide set of single functions.
-
-	This file is supposed to be kept by the community but administrated
-	by the one member. If you have a function to add to this file, or
-	have a code	tweak or optimization, don't hesitate to send an email to:
-	HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt;
-
-Functions (Alphabetical) List:
-		CreateStackArrayInContainer (container, objtype, amount, limit_per_stack := 60000)
-			- Creates a dynamic number os stacks into the given container,
-			based on the given amount, respecting a limit amount for each
-			stack.
-			Returns: array of ObjRefs to each created stack.
-			Examples:
-				CreateStackArrayInContainer(container, UOBJ_GOLDCOIN, 90000)
-					- Creates 2 piles of gold into the container, the first
-					with 60k coins, and the second with 30k coins.
-				CreateStackArrayInContainer(container, UOBJ_GOLDCOIN, 90000, 10000)
-					- Creates 9 piles of 10k gold into the container.
-
-		GetFormattedTime()
-			Returns: string containing the current in-game time in
-			military/internation format &quot;HH:MM&quot;.
-
-		GetGoldInContainer(container)
-			- Loops through the given container looking for gold stacks.
-			Returns: an array where the first element is the sum of gold
-				within the container, and the following elements are ObjRefs
-				to the gold piles found.
-			Example: if used at a container with 2 piles of 10k gold, the
-				function would return {20000, 1st_pile, 2nd_pile}.
-
-		GetSpelledTime()
-			Returns: string containing the spelled in-game time, just like
-			in OSI Shards.
-			Examples:
-				&quot;half past two in the morning.&quot;
-				&quot;eight o'clock at night.&quot;
-				&quot;midnight.&quot;
-
-		GetStacksOfTypeInContainer (container, objtype)
-			- Loops through the given container looking for item stacks from the
-			given objtype.
-			Returns: an array where the first element is the sum of items from the
-				given objtype within the container, and the following elements are
-				ObjRefs to the item stacks found.
-			Example: if used at a container with 2 stacks of 50 cloth, the function
-				would return {100, 1st_stack_of_cloth, 2nd_stack_of_cloth}.
-
-
-		GetStorageArea (areaname)
-			- Finds an storage area by name. If no matching storage area is found,
-			this function creates a new storage area with the given name.
-			Returns: reference to the storage area found or created.
-
-		GetStorageRoot (storage, rootname, objtype := 0x0E7C)
-			- Finds a container with the given name in the storage area.
-			If no matching root container is found, this function creates one
-			using the given objtype (default is a metalbox, like a bank box).
-			Returns: reference to the root container found or created.
-
-		GetStrAfter (needle, byref haystack)
-			- This function finds the first occurrence of needle within haystack
-			then returns the remaining characters in the string.
-			Returns: all characters found after needle in haystack.
-				GetStrAfter(&quot;this &quot;, &quot;this rocks&quot;) returns &quot;rocks&quot;;
-				GetStrAfter(&quot;sky &quot;, &quot;the sky is blue&quot;) returns &quot;is blue&quot;;
-
-		GetStrBefore (needle, byref haystack)
-			- This function finds the first occurrence of needle within haystack
-			then returns the preceding characters in the string.
-			Returns: all characters preceding needle in haystack.
-				GetStrBefore(&quot; &quot;, &quot;pol rocks&quot;) returns &quot;pol&quot;;
-				GetStrBefore(&quot; is &quot;, &quot;the sky is blue&quot;) returns &quot;the sky&quot;;
-
-		GetTimeOfDay()
-			Returns: elapsed seconds in the current UO day.
-
-		ListObjectsOfClassNearLocation(x, y, z, range, POLCLASS, flags := LISTEX_FLAG_NORMAL, realm := &quot;britannia&quot;)
-			- Returns an array of itemrefs of the specified POLCLASS;
-			- flags can be a set of LISTEX_* constants, and are only used
-			with POLCLASS_UOBJECT, POLCLASS_MOBILE and POLCLASS_NPC.
-			Returns: array of ObjRefs found.
-
-		MoveItemToForcedLocation(item, x, y, z)
-			- Moves item ignoring it's movable state.
-			Returns: nonzero if successful, error otherwise.
-
-		MoveItem(item, byref place, flags := MOVEITEM_NORMAL)
-			- Moves item either to a container or to a place depending of
-			the parameter passed. Item will be moved to a container if the
-			parameter is a ContainerRef, or a location if it's an array.
-			- flags can be a set of MOVEITEM_* constants.
-			- If an array of 2 integers is passed as the 'place' paramemter
-			this function finds an appropriated 3rd parameter to be the Z
-			coordinate of the location; since this parameter is passed byref
-			the original array will have the 3rd parameter set once the function
-			returns.
-			Possible usages:
-				MoveItem(item, TargetCoordinates(player));
-				MoveItem(item, {1234, 5678});
-				MoveItem(item, {1234, 5678, 9});
-				MoveItem(item, player.backpack);
-			Returns: nonzero if successfull, error if the item couldn't be
-				moved or if an invalid parameter was passed.
-
-		RandomListInt (tableref)
-			- Returns a random integer based on a special config file &quot;table&quot;.
-			The passed parameter must be a reference to a config file &quot;table&quot;.
-			The table is meant to be structured like this:
-
-				List [table name]
-				{
-					Count 4
-					Elem0		1	5
-					Elem1		6	10
-					Elem2		11	15
-					Elem3		16
-				}
-
-			Count counts the number of &quot;Elements&quot; within the table. The elements
-			are inserted starting by zero. Each element may hold either, a number
-			or a range. In the previous example, the first 3 elements are ranges,
-			and the fourth element is an unique number. This function will first
-			choose a random element, and then check if it's a range or an unique
-			number, if it's an unique number the function will return the number,
-			otherwise the function will return a random number within the specified
-			range. Note that number 16 has a 25% chance to be picked up, while
-			each number (inclusive) from 1 to 15 has a 5% chance (75%/15).
-			Possible usages:
-				RandomListInt(ReadConfigFile(&quot;::colors&quot;)[ALL_COLORS]);
-				RandomListInt(config[24]);
-			Returns: random integer.
-
-		Season (player, season_id)
-			- Use this function to set one's client-side season.
-			- Possible values for seasons:
-				SEASON_SUMMER	: Looks like &quot;old Britannia&quot;.
-				SEASON_FALL		: What it suggests.
-				SEASON_WINTER	: Ugly like a dog sucking mango.
-				SEASON_FELUCCA	: Chaotic look!
-				SEASON_SPRING	: Trammel, home of the care bears.
-			- Note that this function doesn't check the validity of the passed
-			season id, just because I don't want to sacrifice performance,
-			please use the constant values above to avoid problems.
-
-		SubtractFromStackArray (byref arrayofobjrefs, amount)
-			- Loops through the array of objects until the given amount of
-			items is subtracted, or the last item is destroyed. IE if 2 piles
-			of 10k gold are passed as the first argument, and 15000 is passed
-			as the second argument, the first pile will be destroyed and the
-			second pile will have 5000 gold subtracted from it.
-			- In case the array contains non-POL-items objects, those objects
-			are ignored.
-			Returns: amount of items successfully subtracted.
-
-		ToSextant(x, y)
-			Returns: a formated string containing the sextant coordinates
-				for the location; ie, 29o 52'N, 138o 57'W
-
-
-	A history of changes can be found at the end of this file.
-	The contants below can be adjusted to fit your Shard's design.
-
-***************************************************************************/
-
-const STD_DAY_LENGTH := 7200;	// A whole UO day in seconds (7200 is equivalent to 2 hours)
-const STD_GOLD := 0x0EED;		// ObjType for gold coins.
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-19
-// Required Modules: UO
-function CreateStackArrayInContainer (container, objtype, amount, limit_per_stack := 60000)
-	var result array;
-	for loops := 1 to (amount/limit_per_stack)
-		result.append(CreateItemInContainer(container, objtype, limit_per_stack));
-	endfor
-	result.append(CreateItemInContainer(container, objtype, amount-(amount/limit_per_stack)*limit_per_stack));
-	return result;
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
-// Required Modules: UO BASIC
-function GetFormattedTime()
-    var time := GetTimeOfDay();
-    var raw_time := 24.0/(CDbl(STD_DAY_LENGTH)/time);
-    var hours := CInt(raw_time);
-    var minutes := CInt((raw_time-hours)*60);
-    if (minutes &lt; 10)
-		minutes := &quot;0&quot;+minutes;
-    endif
-    if (hours &lt; 10)
-		hours := &quot;0&quot;+hours;
-    endif
-    return (hours+&quot;:&quot;+minutes);
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-18
-// Required Modules: UO
-function GetGoldInContainer (container)
-	var result := {0};
-	foreach item in EnumerateItemsInContainer(container)
-		if (item.objtype = STD_GOLD)
-			result.append(item);
-			result[1] := result[1]+item.amount;
-		endif
-	endforeach
-	return result;
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
-// Required Modules: UO BASIC
-// Dependencies: SpellHour(hours)
-function GetSpelledTime()
-	var time := GetTimeOfDay();
-    var raw_time := 24.0/(CDbl(STD_DAY_LENGTH)/time);
-    var hours := CInt(raw_time);
-    var minutes := CInt((raw_time-hours)*60);
-	var ext;
-	if (hours&lt;11)
-		ext := &quot; in the morning.&quot;;
-	elseif (hours&gt;11 and hours&lt;19)
-		ext := &quot; in the afternoon.&quot;;
-	else
-		ext := &quot; at night.&quot;;
-	endif
-	if (hours&gt;12)
-		hours := hours-12;
-	endif
-	if (minutes&lt;15)
-		if (!hours or hours=12)
-			return SpellHour(hours);
-		else
-			return SpellHour(hours)+&quot; o'clock&quot;+ext;
-		endif
-	elseif (minutes &gt; 14 and minutes &lt; 30)
-		if (!hours or hours=12)
-			return &quot;quarter past &quot;+SpellHour(hours);
-		else
-			return &quot;quarter past &quot;+SpellHour(hours)+ext;
-		endif
-	elseif (minutes &gt; 29 and minutes &lt; 45)
-		if (!hours or hours=12)
-			return &quot;half past &quot;+SpellHour(hours);
-		else
-			return &quot;half past &quot;+SpellHour(hours)+ext;
-		endif
-	else
-		if (!hours or hours=12)
-			return &quot;quarter to &quot;+SpellHour(hours+1);
-		else
-			return &quot;quarter to &quot;+SpellHour(hours+1)+ext;
-		endif
-	endif
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
-function SpellHour (hours)
-	case (hours)
-		0:	return &quot;midnight.&quot;;
-		1:	return &quot;one&quot;;
-		2:	return &quot;two&quot;;
-		3:	return &quot;three&quot;;
-		4:	return &quot;four&quot;;
-		5:	return &quot;five&quot;;
-		6:	return &quot;six&quot;;
-		7:	return &quot;seven&quot;;
-		8:	return &quot;eight&quot;;
-		9:	return &quot;nine&quot;;
-		10:	return &quot;ten&quot;;
-		11:	return &quot;eleven&quot;;
-		12:	return &quot;midday.&quot;;
-	endcase
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-18
-// Required Modules: UO
-function GetStacksOfTypeInContainer (container, objtype)
-	var result := {0};
-	foreach item in EnumerateItemsInContainer(container)
-		if (item.objtype = objtype)
-			result.append(item);
-			result[1] := result[1]+item.amount;
-		endif
-	endforeach
-	return result;
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
-// Required Modules: UO
-function GetStorageArea (areaname)
-	var area := FindStorageArea(areaname);
-	if (!area)
-		return CreateStorageArea(areaname);
-	endif
-	return area;
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
-// Required Modules: UO
-function GetStorageRoot (storage, rootname, objtype := 0x0E7C)
-	var item := FindRootItemInStorageArea(storage, rootname);
-	if (!item)
-		return CreateRootItemInStorageArea(storage, rootname, objtype);
-    endif
-	return item;
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
-// Required Modules: BASIC
-function GetStrAfter (needle, byref haystack)
-	return haystack[Find(haystack, needle, 1)+len(needle), len(haystack)];
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
-// Required Modules: BASIC
-function GetStrBefore (needle, byref haystack)
-	return haystack[1, Find(haystack, needle, 1)];
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
-// Required Modules: UO
-//function GetTimeOfDay()
-//    var time := ReadGameClock();
-//	return (time-((time/STD_DAY_LENGTH)*STD_DAY_LENGTH));
-//endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
-// Required Modules: UO
-// Notes: POLCLASS_UOBJECT will return both, mobiles and items.
-// This function is limited and it'd be a good idea to have core support for it.
-function ListObjectsOfClassNearLocation (x, y, z, range, POLCLASS, flags := LISTEX_FLAG_NORMAL, realm := &quot;britannia&quot;)
-	case (POLCLASS)
-		POLCLASS_UOBJECT:
-			return ListObjectsInBox(x-range, y+range, z-10, x+range, y-range, z+10, realm);
-		POLCLASS_MOBILE: //I'll separate it from POLCLASS_NPC for performance purposes.
-			return ListMobilesNearLocationEx(x, y, z, range, flags, realm);
-		POLCLASS_NPC:
-			var result array;
-			foreach mobile in ListMobilesNearLocationEx(x, y, z, range, flags, realm)
-				if (mobile.isa(POLCLASS_NPC)) result.append(mobile); endif
-			endforeach
-			return result;
-		default:
-			var result array;
-			foreach item in ListItemsNearLocation(x, y, z, range, realm)
-				if (item.isa(POLCLASS)) result.append(item); endif
-			endforeach
-			return result;
-	endcase
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
-// Required Modules: UO
-// This function forces the move in every aspect: using MOVEITEM_FORCELOCATION
-// and setting the item movable state to 1 if it's zero. The movable state is
-// set back to it's original state.
-function MoveItemToForcedLocation (item, x, y, z)
-	if (!item.movable)
-		item.movable := 1;
-		var result := MoveItemToLocation(item, x, y, z, MOVEITEM_FORCELOCATION);
-		item.movable := 0;
-		return result;
-	endif
-	return MoveItemToLocation(item, x, y, z, MOVEITEM_FORCELOCATION);
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
-// Required Modules: UO
-function MoveItem (item, byref place, flags := MOVEITEM_NORMAL)
-	if (place.isa(POLCLASS_CONTAINER))
-		return MoveItemToContainer(item, place);
-	elseif (place=array)
-		case (place.size())
-			0:1:
-				var result := error;
-				result.+errortext := &quot;Parameter place has less than 2 elements.&quot;
-				return result;
-			2:
-				place[3] := GetWorldHeight(place[1], place[2], item.realm);
-				continue;
-			default:
-				return MoveItemToLocation(item, place[1], place[2], place[3], flags);
-		endif
-	endif
-	var result := error;
-	result.+errortext := &quot;Invalid place: expected an ContainerRef or Array, got &quot;+place+&quot;.&quot;;
-	return result;
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2001-01-17
-// Required Modules: BASIC CFGFILE UTIL
-function RandomListInt (tableref)
-	var elem := SplitWords(GetConfigString(tableref, &quot;Elem&quot;+RandomInt(tableref.Count)));
-	elem[1] := CInt(elem[1]);
-	if (elem.Size()=1)
-		return elem[1];
-	else
-		return RandomInt(CInt(elem[2])-elem[1])+elem[1];
-	endif
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2001-03-02
-// Required Modules: UO
-const SEASON_SUMMER		:= 1;
-const SEASON_FALL		:= 2;
-const SEASON_WINTER		:= 3;
-const SEASON_FELUCCA	:= 4;
-const SEASON_SPRING		:= 5;
-function Season (player, season_id)
-	// Doesn't support cursor customization, yet.
-	SendPacket(player, &quot;BC0&quot;+season_id+&quot;01&quot;);
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-18
-// Required Modules: UO
-function SubtractFromStackArray (byref arrayofobjrefs, amount)
-	var needed := amount;
-	foreach item in arrayofobjrefs
-		if (!item.isa(POLCLASS_ITEM)) continue; endif
-		if (item.amount&lt;needed)
-			needed := needed-item.amount;
-			SubtractAmount(item, item.amount);
-		else
-			SubtractAmount(item, needed);
-			return amount;
-		endif
-	endforeach
-	return (amount-needed);
-endfunction
-
-// HellRaider &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">zion at uo.com.br</A>&gt; 2000-12-13
-// Required Modules: UO BASIC MATH
-// Note: For some (rare) coords this function returns the minutes with 1 tile off OSI's.
-// Each cartesian coord still have an unique sextant coord though (shouldn't be a problem).
-// OSI uses a special rounding function for it.
-function ToSextant(x, y)
-	var latitude_direction, longitude_direction;
-	var latitude_degrees, longitude_degrees;
-	var latitude_minutes, longitude_minutes;
-
-	latitude_degrees := (y-1624)*0.087890625;
-	longitude_degrees := (x-1323)*0.0703125;
-
-	if (latitude_degrees &lt; 0)
-		latitude_direction := &quot;N&quot;;
-	else
-		latitude_direction := &quot;S&quot;;
-	endif
-
-	if (longitude_degrees &lt; 0)
-		longitude_direction := &quot;W&quot;;
-	else
-		longitude_direction := &quot;E&quot;;
-	endif
-
-	latitude_degrees := Abs(latitude_degrees);
-	longitude_degrees := Abs(longitude_degrees);
-
-	//The next lines get the first 2 digits from the decimal part of the real variables
-	//and multiply by 60, returning an integer.
-	latitude_minutes := ((((latitude_degrees-Floor(latitude_degrees))*100)*60)/100);
-	longitude_minutes := ((((longitude_degrees-Floor(longitude_degrees))*100)*60)/100);
-
-	return(	Floor(latitude_degrees)+&quot;o &quot;+latitude_minutes+&quot;'&quot;+latitude_direction+&quot;, &quot;+
-			Floor(longitude_degrees)+&quot;o &quot;+longitude_minutes+&quot;'&quot;+longitude_direction);
-endfunction
-
-/***************************************************************************
-
-	HISTORY OF CHANGES
-
-	Version 0.1
-		- Added the followind functions:
-			GetFormattedTime();
-			GetSpelledTime();
-			GetStorageArea (byref areaname);
-			GetStorageRoot (storage, byref rootname, objtype := 0x0E7C);
-			GetStrAfter (byref needle, byref haystack);
-			GetStrBefore (byref needle, byref haystack);
-			GetTimeOfDay();
-			ListObjectsOfClassNearLocation(x, y, z, range, POLCLASS, flags := LISTEX_FLAG_NORMAL);
-			MoveItemToForcedLocation(item, x, y, z);
-			MoveItem(item, byref place, flags := MOVEITEM_NORMAL);
-			ToSextant(x, y);
-
-	Version 0.2
-		- Added function GetGoldInContainer(container).
-
-	Version 0.3
-		- Added History of Changes.
-		- Added function CreateStackArrayInContainer (container, objtype, amount, limit_per_stack := 60000).
-		- Added function GetStacksOfTypeInContainer (container, objtype).
-		- Added function SubtractFromStackArray (byref arrayofobjrefs, amount).
-		- Fixed a bug in GetGoldInContainer(container) that would generate a compilation error.
-		- Fixed a bug in MoveItem (item, byref place, flags := MOVEITEM_NORMAL).
-		- Small tweak on the design of GetGoldInContainer(container). Since POL arrays don't support
-		elements at index zero, the function was changed so the first element (index one) is the sum
-		of the amount of gold found within the container, and the following elements are objrefs to
-		the piles of gold.
-
-	Version 0.4
-		- Added RandomListInt(tableref).
-		- Added Season(player, season_id).
-		
-	Version 0.5
-		- Racalac added realm param to ListObjectsOfClassNearLocation
-
-***************************************************************************/

Modified: trunk/096/scripts/include/string.inc
===================================================================
--- trunk/096/scripts/include/string.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/string.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -118,7 +118,7 @@
 
 	for (q := 1; q &lt;= ArrayLen; q := q + 1)
 		for (i := 1; i &lt;= ArrayLen; i := i + 1)
-			if (OldArray[q] = MainArray[i])
+			if (OldArray[q] == MainArray[i])
 				IndexArray[q] := i;
 				i := ArrayLen + 1;
 			endif
@@ -241,7 +241,7 @@
 
 	if (padding &lt; 0)
 		return 0;
-	elseif (padding = 0)
+	elseif (padding == 0)
 		return x;
 	endif
 
@@ -267,7 +267,7 @@
 
 	var i;
 	for (i := 1; i &lt;= len(myarray); i := i + 1)
-		if (myarray[i] = elementvalue)
+		if (myarray[i] == elementvalue)
 			return i;
 		endif
 	endfor
@@ -296,40 +296,35 @@
 // Makes the string lowercase, then capitalizes the first letter.
 function UCFirst(text)
 	text := CStr(text);
-	if ( len(text) &gt; 1 )
-		text := lower(text);
-		text[1] := upper(text[1]);
+	if ( Len(text) &gt; 1 )
+		text := Lower(text);
+		text[1] := Upper(text[1]);
 	endif
 	return text;
 endfunction
 
 // Removes spaces from a string based on the flags passed.
 function RemoveSpaces(text, flags:=CLR_LEADING_SPACES)
-	var pre := flags &amp; CLR_LEADING_SPACES;
-	var post := flags &amp; CLR_TRAILING_SPACES;
-	var dbl := flags &amp; CLR_DOUBLE_SPACES;
-	var all := flags &amp; CLR_ALL_SPACES;
-	
-	if ( all )
+	if ( flags &amp; CLR_ALL_SPACES )
 		while ( text[&quot; &quot;] )
 			text[&quot; &quot;] := &quot;&quot;;
 			sleepms(2);
 		endwhile
 	else
-		if ( pre )
+		if ( flags &amp; CLR_LEADING_SPACES )
 			while ( text[1] == &quot; &quot; )
 				text[1] := &quot;&quot;;
 				sleepms(2);
 			endwhile
 		endif
-		if ( post )
+		if ( flags &amp; CLR_TRAILING_SPACES )
 			while ( text[len(text)] == &quot; &quot; )
 				text[len(text)] := &quot;&quot;;
 				sleepms(2);
 			endwhile
 		endif
 	
-		if ( dbl )
+		if ( flags &amp; CLR_DOUBLE_SPACES )
 			while ( text[&quot;  &quot;] )
 				text[&quot;  &quot;] := &quot; &quot;;
 				sleepms(2);

Deleted: trunk/096/scripts/include/stringArrays.inc
===================================================================
--- trunk/096/scripts/include/stringArrays.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/stringArrays.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,23 +0,0 @@
-
-function array2string(thearray)
-        var retval;
-
-        foreach word in thearray
-                retval := retval + &quot; &quot; + thearray;
-        endforeach
-
-        retval := retval[2,1000000];
-
-        return retval;
-endfunction
-
-
-function string2array(thestring)
-
-        var retval := array;
-        retval := SplitWords(thestring);
-
-endfunction
-
-
-       
\ No newline at end of file

Deleted: trunk/096/scripts/include/teleporters.inc
===================================================================
--- trunk/096/scripts/include/teleporters.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/teleporters.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,410 +0,0 @@
-use uo;
-use os;
-use cfgfile;
-
-var teleporters := {
-////yew to t2a tunnel
-    { 312,   786,  -24,    5748,   361,    2},
-    { 313,   786,  -24,    5749,   361,    2},
-    { 314,   786,  -24,    5750,   361,    4},
-    {5748,   362,    2,     312,   787,  -24},
-    {5749,   362,    0,     313,   787,  -24},
-    {5750,   362,    3,     314,   787,  -24},
-           
-////jhelom teleporters
-    {1142,  3621,    5,    1414,  3828,    5},
-    {1406,  3996,    5,    1414,  3828,    5},
-    {1409,  3824,    5,    1124,  3623,    5},
-    {1419,  3832,    5,    1466,  4015,    5},
-
-//// moonglow teleporters
-    {4300,   968,    5,    4442,  1122,    5},
-    {4436,  1107,    5,    4300,   992,    5},
-    {4443,  1137,    5,    4487,  1475,    5},
-    {4449,  1107,    5,    4539,   890,   28},
-    {4449,  1115,    5,    4671,  1135,   10},
-    {4496,  1475,   15,    4442,  1122,    5},
-    {4540,   898,   32,    4442,  1122,    5},
-    {4663,  1134,   13,    4442,  1122,    5},
-
-////hedge maze
-    {1163,  2208,   60,    1171,  2202,    0},
-    {1165,  2205,   40,    1163,  2209,   60},
-    {1166,  2237,   60,    1163,  2208,    0},
-
-////destard
-//enterance
-    {1175,  2635,    0,    5242,  1006,    0},
-    {1176,  2635,    0,    5243,  1006,    0},
-    {1177,  2635,    0,    5244,  1006,    0},
-    {5242,  1007,    0,    1175,  2636,    0},
-    {5243,  1007,    0,    1176,  2636,    0},
-    {5244,  1007,    0,    1177,  2636,    0},
-//lvl1 - lvl2
-    {5129,   909,  -28,    5142,   798,   17},
-    {5130,   909,  -28,    5143,   798,   17},
-    {5131,   909,  -28,    5144,   798,   17},
-    {5132,   909,  -28,    5145,   798,   17},
-    {5142,   797,   22,    5129,   908,  -28},
-    {5143,   797,   22,    5130,   908,  -28},
-    {5144,   797,   22,    5131,   908,  -28},
-    {5145,   797,   22,    5132,   908,  -28},
-//lvl2 - lvl3 
-    {5153,   808,  -25,    5134,   984,   17},
-    {5153,   809,  -25,    5134,   985,   17},
-    {5153,   810,  -25,    5134,   986,   17},
-    {5153,   811,  -25,    5134,   987,   17},
-    {5133,   984,   22,    5152,   808,  -19},
-    {5133,   985,   22,    5152,   809,  -19},
-    {5133,   986,   22,    5152,   810,  -19},
-    {5133,   987,   22,    5152,   811,  -19},
-
-////shame
-//enterance
-    { 512,  1559,    0,    5394,   126,    0},
-    { 513,  1559,    0,    5395,   126,    0},
-    { 514,  1559,    0,    5396,   126,    0},
-    {5394,   127,    0,     512,  1560,    0},
-    {5395,   127,    0,     513,  1560,    0},
-    {5396,   127,    0,     514,  1560,    0},
-//lvl1 - lvl2
-    {5490,    19,  -30,    5514,    10,    0},
-    {5514,    10,    0,    5490,    19,  -30},
-//lvl2 - lvl3
-    {5604,   102,    5,    5514,   148,   25},
-    {5514,   148,   25,    5604,   102,    5},
-//lvl3 - lvl4
-    {5538,   170,    5,    5513,   176,    5},
-    {5513,   176,    5,    5538,   170,    5},
-//lvl4 - lvl5
-    {5507,   162,    5,    5875,    19,   -5},
-    {5875,    19,   -5,    5507,   162,    5},
-
-////deceit
-//enterance
-    {4110,   430,    5,    5187,   638,    0},
-    {4111,   430,    5,    5188,   638,    0},
-    {4112,   430,    5,    5189,   638,    0},
-    {5187,   639,    0,    4110,   431,    5},
-    {5188,   639,    0,    4111,   431,    5},
-    {5189,   639,    0,    4112,   431,    5},
-//lvl1 - lvl2
-    {5216,   587,  -18,    5304,   531,   12},
-    {5217,   587,  -18,    5305,   531,   12},
-    {5218,   587,  -18,    5306,   531,   12},
-    {5304,   530,   17,    5216,   586,  -13},
-    {5305,   530,   17,    5217,   586,  -13},
-    {5306,   530,   17,    5218,   586,  -13},
-//lvl2 - lvl3
-    {5346,   578,    5,    5137,   649,    5},
-    {5137,   649,    5,    5346,   578,    5},
-//lvl3 - lvl4
-    {5218,   761,  -28,    5305,   650,   12},
-    {5219,   761,  -28,    5306,   650,   12},
-    {5305,   649,   17,    5218,   760,    1},
-    {5306,   549,   17,    5219,   760,    1},
-
-////wrong
-//enterance
-    {2041,   215,   14,    5824,   630,    0},
-    {2042,   215,   14,    5825,   630,    0},
-    {2043,   215,   14,    5826,   630,    0},
-    {5824,   631,    0,    2041,   216,   14},
-    {5825,   631,    0,    2042,   216,   14},
-    {5826,   631,    0,    2043,   216,   14},
-//lvl1 - lvl2
-    {5826,   592,    0,    5690,   569,   25},
-    {5690,   569,   25,    5826,   592,    0},
-//lvl2 - lvl3
-    {5736,   551,   20,    5703,   639,    0},
-    {5698,   662,    0,    5736,   551,   20},
-
-////despise
-//enterance
-    {1296,  1080,    0,    5587,   630,   30},
-    {1296,  1081,    0,    5587,   631,   30},
-    {1296,  1082,    0,    5587,   632,   30},
-    {5588,   630,   30,    1297,  1080,    0},
-    {5588,   631,   30,    1297,  1081,    0},
-    {5588,   632,   30,    1297,  1082,    0},
-//lvl1 - lvl2
-    {5570,   628,   57,    5504,   569,   46},
-    {5570,   629,   57,    5504,   570,   46},
-    {5570,   630,   57,    5504,   571,   46},
-    {5505,   569,   41,    5571,   628,   52},
-    {5505,   570,   41,    5571,   629,   52},
-    {5505,   571,   41,    5571,   630,   52},
-//lvl2 - lvl3
-    {5571,   632,   12,    5522,   672,   32},
-    {5571,   633,   12,    5522,   673,   32},
-    {5571,   634,   12,    5522,   674,   32},
-    {5523,   672,   37,    5572,   632,   17},
-    {5523,   673,   37,    5572,   633,   17},
-    {5523,   674,   37,    5572,   634,   17},
-//lvl3 - lvl4
-    {5385,   755,  -13,    5410,   858,   57},
-    {5385,   756,  -13,    5410,   859,   57},
-    {5385,   757,  -13,    5410,   860,   57},
-    {5411,   858,   62,    5386,   755,   -8},
-    {5411,   859,   62,    5386,   756,   -8},
-    {5411,   860,   62,    5386,   757,   -8},
-
-////covetous
-//entrance
-    {5455,  1864,    0,    2498,   917,    0},
-    {5456,  1864,    0,    2499,   917,    0},
-    {5457,  1864,    0,    2500,   917,    0},
-    {2498,   916,    0,    5455,  1863,    0},
-    {2499,   916,    0,    5456,  1863,    0},
-    {2500,   916,    0,    5457,  1863,    0},
-//lvl1 - lvl2
-    {5392,  1959,    0,    2420,   883,    0},
-    {5393,  1959,    0,    2421,   883,    0},
-    {5394,  1959,    0,    2422,   883,    0},
-    {2420,   884,    0,    5392,  1958,    0},
-    {2421,   884,    0,    5393,  1958,    0},
-    {2422,   884,    0,    5394,  1958,    0},
-//lvl2 - lvl3
-    {2384,   836,    0,    5614,  1996,    0},
-    {2384,   837,    0,    5614,  1997,    0},
-    {2384,   838,    0,    5614,  1998,    0},
-    {5615,  1996,    0,    2385,   836,    0},
-    {5615,  1997,    0,    2385,   837,    0},
-    {5615,  1998,    0,    2385,   838,    0},
-//lvl3 - lvl4
-    {5388,  2027,    0,    2455,   859,    0},
-    {5389,  2027,    0,    2456,   859,    0},
-    {5390,  2027,    0,    2457,   859,    0},
-    {2455,   858,    0,    5388,  2026,    0},
-    {2456,   858,    0,    5389,  2026,    0},
-    {2457,   858,    0,    5390,  2026,    0},
-//lvl4 - lvl5
-    {2544,   846,    0,    5578,  1926,    0},
-    {2545,   846,    0,    5579,  1926,    0},
-    {2546,   846,    0,    5580,  1926,    0},
-    {5578,  1927,    0,    2544,   847,    0},
-    {5579,  1927,    0,    2545,   847,    0},
-    {5580,  1927,    0,    2546,   847,    0},
-//lvl5-lvl6a
-    {5556,  1827,  -15,    5551,  1805,   12},
-    {5557,  1827,  -15,    5552,  1805,   12},
-    {5551,  1804,   17,    5556,  1826,  -10},
-    {5552,  1804,   17,    5556,  1826,  -10},
-    {5552,  1804,   17,    5557,  1826,  -10},
-//lvl5 - lvl6b
-    {5595,  1840,  -14,    5466,  1804,   12},
-    {5595,  1841,  -14,    5466,  1805,   12},
-    {5465,  1804,   17,    5594,  1840,   -9},
-    {5465,  1805,   17,    5594,  1841,   -9},
-    {5465,  1805,   17,    5594,  1841,   -9},
-
-////hythloth
-//enterance
-    {5904,    17,   61,    4721,  3814,    0},
-    {5905,    17,   61,    4722,  3814,    0},
-    {5906,    17,   61,    4723,  3814,    0},
-    {4721,  3813,    0,    5904,    18,   56},
-    {4722,  3813,    0,    5905,    18,   56},
-    {4723,  3813,    0,    5906,    18,   56},
-//lvl1 - lvl2
-    {5905,    97,    0,    5976,   169,    0},
-    {5976,   169,    0,    5905,    97,    0},
-    {5976,   168,    0,    5905,    97,    0},
-    {5977,   169,    0,    5905,    97,    0},
-    {5977,   168,    0,    5905,    97,    0},
-//lvl2 - lvl3
-    {5922,   168,    7,    6081,   144,  -10},
-    {5922,   169,    7,    6081,   145,  -10},
-    {5922,   170,    7,    6081,   146,  -10},
-    {6080,   144,   -5,    5921,   169,   11},
-    {6080,   145,   -5,    5921,   169,   12},
-    {6080,   146,   -5,    5921,   169,   11},
-//lvl3 - lvl4
-    {6041,   192,    7,    6057,    87,   34},
-    {6041,   193,    7,    6057,    89,   34},
-    {6041,   194,    9,    6057,    90,   34},
-    {6056,    87,   39,    6040,   192,   12},
-    {6056,    89,   39,    6040,   193,   12},
-    {6056,    90,   39,    6040,   194,   12},
-
-////wind
-//enterance
-    {5166,   245,   15,    1361,   883,    0},
-    {1361,   883,    0,    5166,   245,   15},
-//NE exit
-    {5191,   152,    0,    1361,   883,    0},
-// wind - park
-    {5200,    71,   17,    5211,    22,   15},
-    {5217,    18,   15,    5200,    71,   17},
-    
-////ice dungeon
-//enterance
-    {5882,   241,    0,    1997,    81,    7},
-    {5882,   242,    0,    1997,    81,    7},
-    {5882,   243,    0,    1997,    81,    7},
-    {1997,    81,    7,    5881,   242,    0},
-//lvl1 - orc fort
-    {5849,   238,  -25,    5831,   324,   27},
-    {5850,   238,  -25,    5832,   324,   26},
-    {5851,   238,  -25,    5833,   324,   28},
-    {5852,   238,  -25,    5834,   324,   27},
-    {5853,   238,  -23,    5835,   324,   27},
-    {5831,   323,   34,    5849,   237,  -24},
-    {5832,   323,   34,    5850,   237,  -24},    
-    {5833,   323,   33,    5851,   237,  -24},    
-    {5834,   323,   33,    5852,   237,  -25},
-    {5835,   323,   33,    5853,   237,  -23},
-//lvl1 - lvl2
-    {5704,   145,  -45,    5705,   305,   12},
-    {5704,   146,  -45,    5705,   306,   12},   
-    {5704,   147,  -45,    5705,   307,   12},  
-    {5706,   303,   12,    5705,   146,  -45},
-    {5706,   304,   12,    5705,   146,  -45},
-    {5706,   305,   12,    5705,   146,  -45},
-    {5706,   306,   12,    5705,   147,  -45},
-    {5706,   307,   12,    5705,   147,  -45},
-    {5706,   308,   12,    5705,   147,  -45},
-//lvl1 - t2a exit
-    {5872,   144,   32,    5203,  2327,   27}, 
-    {5873,   144,   32,    5203,  2327,   27}, 
-    {5874,   144,   32,    5203,  2327,   27}, 
-    {5875,   144,   32,    5203,  2327,   27}, 
-    {5876,   144,   32,    5207,  2322,   27}, 
-    {5877,   144,   32,    5207,  2322,   27}, 
-    {5878,   144,   32,    5207,  2323,   26}, 
-    {5879,   144,   32,    5207,  2323,   26}, 
-    {5203,  2327,   27,    5874,   145,   30},
-    {5207,  2322, -255,    5875,   145,   30},
-    {5207,  2323, -255,    5876,   145,   30},
-
-////fire dungeon
-//enterance
-    {5827,  1502,    0,    2922,  3406,    8},
-    {5828,  1502,   -1,    2923,  3406,    9},
-    {5829,  1502,    2,    2924,  3406,    7},
-    {2922,  3405,    7,    5827,  1501,    0},
-    {2923,  3405,    6,    5828,  1501,    0},
-    {2924,  3405,    7,    5829,  1501,    1},
-//lvl1 - t2a exit
-    {5790,  1415,   39,    5758,  2907,   15},
-    {5790,  1416,   40,    5758,  2908,   15},
-    {5790,  1417,   38,    5758,  2909,   15},
-    {5757,  2907,   15,    5789,  1415,   42},
-    {5757,  2908,   14,    5789,  1416,   39},
-    {5757,  2909,   15,    5789,  1417,   38},
-//lvl1 - lvl2
-    {5786,  1335,  -13,    5701,  1318,    8},
-    {5787,  1335,  -13,    5702,  1318,    8},
-    {5788,  1335,  -13,    5703,  1318,    8},
-    {5701,  1319,   13,    5786,  1336,   -8},
-    {5702,  1319,   13,    5787,  1336,   -8},
-    {5703,  1319,   13,    5788,  1336,   -8},
-
-////volcano shop teleporter
-    {1653,  2963,    0,    1671,  2981,    0},
-    {1677,  2987,    0,    1675,  2987,   20},
-    
-////bucs den underground
-//enterance
-    {2674,  2242,    2,    2677,  2242,  -20},
-    {2676,  2242,  -18,    2675,  2242,    2},
-    {2676,  2242,  -18,    2675,  2242,    2},
-//exit
-    {2649,  2195,  -14,    2648,  2193,    4},
-    {2669,  2072,  -19,    2669,  2072,    5},
-    {2669,  2073,  -19,    2669,  2073,    5},
-
-////britain sewer
-//enterance
-    {6031,  1499,   35,    1490,  1640,   24},
-    {6031,  1501,   36,    1490,  1642,   24},
-    {1491,  1640,   24,    6032,  1499,   31},
-    {1491,  1642,   24,    6032,  1501,   31},
-//lvl1 - cave
-    {6140,  1431,    4,    6137,  1408,    2},
-    {6141,  1431,    4,    6138,  1408,    2},
-    {6137,  1409,    2,    6140,  1432,    4},
-    {6138,  1409,    2,    6141,  1432,    4},
-//cave - t2a exit
-    {6126,  1410,   15,    6074,  3333,    2},
-    {6127,  1410,   15,    6075,  3333,    2},    
-    {6074,  3332,    4,    6126,  1409,   13},
-    {6075,  3332,    4,    6127,  1409,   13},
-
-////minoc cave
-//enterance
-    {2399,   198,    0,    6087,  3675,   17},
-    {2400,   198,    0,    6087,  3676,   18},
-//exit to t2a
-    {6086,  3675,   15,    2399,   199,    0},
-    {6086,  3676,   16,    2400,   199,    0},
-
-////vesper graveyard
-//enterance
-    {2776,   894,  -23,    5685,   386,    1},
-    {2776,   895,  -23,    5685,   387,    2},
-    {5686,   386,    2,    2777,   894,  -23},
-    {5686,   387,    2,    2777,   895,  -23},
-//cave - t2a graveyard
-    {5658,   423,    8,    5697,  3659,    2},
-    {5697,  3660,   -5,    5658,   424,    0}, 
-
-////trinsic cave
-//enterance
-    {1628,  3320,    0,    5899,  1409,   41},
-    {1629,  3320,    0,    5900,  1409,   39}, 
-    {5898,  1411,   38,    1628,  3321,    0},
-    {5899,  1411,   43,    1628,  3321,    0},
-    {5900,  1411,   42,    1629,  3321,    0},
-//lvl1 - lvl2
-    {5918,  1410,  -29,    5962,  1407,   57},
-    {5918,  1411,  -29,    5962,  1408,   56},
-    {5918,  1412,  -29,    5962,  1409,   56},
-    {5961,  1407,   59,    5917,  1410,  -27},
-    {5961,  1408,   59,    5917,  1411,  -27},
-    {5961,  1409,   59,    5917,  1412,  -27},
-//lvl2 - west t2a
-    {6025,  1344,  -26,    5138,  3664,   31},
-    {6025,  1345,  -25,    5138,  3665,   32},
-    {6025,  1346,  -25,    5138,  3666,   32},
-    {5137,  3664,   27,    6024,  1345,  -25},
-    {5137,  3665,   31,    6024,  1346,  -25},
-//lvl2 - delucia
-    {6005,  1378,    0,    5151,  4062,   37},
-    {6005,  1379,    2,    5151,  4063,   37},
-    {6005,  1380,    1,    5151,  4064,   37},
-    {5150,  4062,   38,    6004,  1378,    1},
-    {5150,  4063,   38,    6004,  1379,   -1},
-    
-////terathan keep
-//enterance
-    {5426,  3122, -74,    5341,  1601,    0},
-    {5341,  1601,   0,    5426,  3121,  -65},
-
-////spirituality shrine
-    {1592,  2489,   17,    1600,  2489,   10},
-    {1600,  2489,   10,    1592,  2490,   17},
-    {1600,  2490,   10,    1592,  2490,   17}
-};
-
-function CreateTeleporters()
-  if(GetGlobalProperty(&quot;SystemTeleportersCreated&quot;) == 1)
-    return;
-  endif
-  foreach tele in teleporters
-    var fromx := tele[1];
-    var fromy := tele[2];
-    var fromz := tele[3];
-    var tox := tele[4];
-    var toy := tele[5];
-    var toz := tele[6];
-    var teleporter := CreateItemAtLocation(fromx, fromy, fromz, &quot;systemteleporter&quot;, 1, &quot;britannia&quot;); //FIXME realms
-    if(teleporter)
-      teleporter.graphic := 3948;
-      SetObjProperty(teleporter, &quot;DestX&quot;, tox);
-      SetObjProperty(teleporter, &quot;DestY&quot;, toy);
-      SetObjProperty(teleporter, &quot;DestZ&quot;, toz);
-    endif
-  endforeach
-  SetGlobalProperty(&quot;SystemTeleportersCreated&quot;, 1);
-endfunction

Deleted: trunk/096/scripts/include/tempMod.inc
===================================================================
--- trunk/096/scripts/include/tempMod.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/tempMod.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,44 +0,0 @@
-use os;
-
-function do_temp_mod(who, mod, amt, duration)
-  var parms := {};
-  parms[2] := who;
-  parms[1] := mod;
-  parms[3] := amt;
-  parms[4] := duration;
-  start_script(&quot;::/misc/demod&quot;, parms);
-endfunction
-
-function can_stat_mod(who, stat)
-  var mod;
-  case(stat)
-    &quot;str&quot;: mod := &quot;#ss&quot;;
-    &quot;dex&quot; : mod := &quot;#dd&quot;;
-    &quot;int&quot; : mod := &quot;#ii&quot;;
-    &quot;ar&quot;  : mod := &quot;#aa&quot;;
-  endcase
-  if(GetObjProperty(who, mod))
-    return 0;
-  else
-    SetObjProperty(who, mod, 1);
-    return 1;
-  endif
-endfunction
-
-function allow_stat_mod(who, stat, duration)
-  Detach();
-  var mod;
-  case(stat)
-    &quot;str&quot;: mod := &quot;#ss&quot;;
-    &quot;dex&quot; : mod := &quot;#dd&quot;;
-    &quot;int&quot; : mod := &quot;#ii&quot;;
-    &quot;ar&quot;  : mod := &quot;#aa&quot;;
-  endcase
-  while(1)
-    sleep(duration);
-    if(who)
-      EraseObjProperty(who, mod);
-      return;
-    endif
-  endwhile
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/toolWear.inc
===================================================================
--- trunk/096/scripts/include/toolWear.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/toolWear.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,71 +0,0 @@
-include &quot;:attributes:attributes_ex&quot;;
-
-function CheckToolWear (who, tool, skillid)
-  var swings := GetObjProperty(tool,&quot;swings&quot;);
-  if(!swings)
-    var mods := GetObjProperty(tool, &quot;durability&quot;);
-    var bonus := 0;
-    case(mods)
-      &quot;durable&quot;:        bonus := 10;
-      &quot;substantial&quot;:    bonus := 20;
-      &quot;massive&quot;:        bonus := 30;
-      &quot;fortified&quot;:      bonus := 40;
-      &quot;indestructable&quot;: bonus := 50;
-    endcase
-    swings := Cint(50 * tool.quality) + bonus;
-    SetObjProperty(tool,&quot;swings&quot;, swings);
-  endif
-  if(swings &lt;= 0)
-    DestroyItem(tool);
-    SendSysMessage(who,&quot;Your tool broke.&quot;);
-  else
-    var skill := GetAttribute(who, AP_SkillIdToAttributeName(skillid));
-    if(skill &gt; 80)
-      skill := 80;
-    elseif(skill &lt; 20)
-      skill := 20;
-    endif
-    if((RandomInt(100)+1) &gt; skill)
-      if(tool.isa(POLCLASS_WEAPON))
-        if(tool.hp &gt; 1)
-          SetObjProperty(tool,&quot;swings&quot;, (swings - 1));
-          tool.hp := tool.hp - 1;
-        elseif((tool.hp &gt; tool.maxhp) or (tool.hp == 1))
-          SendSysMessage(who,&quot;Your tool broke.&quot;);
-          DestroyItem(tool);
-        endif
-      else
-        SetObjProperty(tool,&quot;swings&quot;, (swings - 1));
-      endif   
-    endif
-  endif
-endfunction 
-
-function SetToolDurability(who, tool, skillid)
-
-  var toolfile := ReadConfigFile(&quot;:*:itemdesc&quot;);
-  var toolscript := toolfile[tool.objtype].Script;
-
-  if(!toolscript.errortext)
-    if(!tool.isA(POLCLASS_CONTAINER) &amp;&amp; !tool.isA(POLCLASS_ARMOR))
-      var myskill := GetEffectiveSkill(who, skillid);
-      var swings := 0;
-      var mods := GetObjProperty(tool, &quot;durability&quot;);
-      var bonus := 0;
-      case(mods)
-        &quot;durable&quot;:        bonus := 10;
-        &quot;substantial&quot;:    bonus := 20;
-        &quot;massive&quot;:        bonus := 30;
-        &quot;fortified&quot;:      bonus := 40;
-        &quot;indestructable&quot;: bonus := 50;
-        default: bonus := 0;
-      endcase
-      swings := Cint(50 + myskill) + bonus;
-      SetObjProperty(tool, &quot;swings&quot;, swings);
-      if(!tool.quality or tool.quality == error)
-        tool.quality := 1.0;
-      endif
-    endif
-  endif
-
-endfunction 

Deleted: trunk/096/scripts/include/utility.inc
===================================================================
--- trunk/096/scripts/include/utility.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/utility.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,49 +0,0 @@
-use basic;
-
-include &quot;include/myUtil&quot;;
-
-
-function find_or_create_storage( areaname )
-  var area;
-  area := FindStorageArea( areaname );
-  if(!area)
-	area := CreateStorageArea( areaname );
-    if(area)
-    endif
-  endif
-  return area;
-endfunction
-
-function find_or_create_item(storage, name, objtype := 0x966a)
-  var item := FindRootItemInStorageArea(storage, name);
-  if(item)
-	return item;
-  endif
-  item := CreateRootItemInStorageArea( storage, name, objtype);
-  return item;
-endfunction
-
-function IsLocationAccessible(character, x, y, z)
-  var xd, yd, zd;
-  xd := character.x - x;
-  if(xd &lt; -1 || xd &gt; 1)
-    return 0;
-  endif
-  yd := character.y - y;
-  if(yd &lt; -1 || yd &gt; 1)
-    return 0;
-  endif
-  zd := character.z - z;
-  if(zd &lt; -10 || zd &gt; 10)
-    return 0;
-  endif
-  return CheckLosAt( character, x, y, z );
-endfunction
-
-function min(x, y)
-  if(x&lt;= y)
-    return x;
-  else
-    return y;
-  endif
-endfunction
\ No newline at end of file

Deleted: trunk/096/scripts/include/webPage.inc
===================================================================
--- trunk/096/scripts/include/webPage.inc	2005-11-04 00:35:53 UTC (rev 885)
+++ trunk/096/scripts/include/webPage.inc	2005-11-04 02:19:06 UTC (rev 886)
@@ -1,34 +0,0 @@
-function OpenWebSite(who, url)
-	var packet := &quot;A5&quot; + WordPacket(Len(url) + 4);
-
-	foreach ascii_code in CAscZ(url)
-		packet:=packet+BytePacket(ascii_code);
-	endforeach
-	SendPacket(who, packet + &quot;00&quot;);
-
-	return;
-endfunction
-
-
-function BytePacket(byte)
-	var packet := Hex(byte);
-	packet := &quot;00&quot; + packet[3, Len(packet) - 2];
-
-	return (packet[Len(packet) - 1, 2]);
-endfunction
-
-
-function WordPacket(word)
-	var packet := Hex(word);
-	packet := &quot;0000&quot; + packet[3, Len(packet) - 2];
-
-	return (packet[Len(packet) - 3, 4]);
-endfunction
-
-
-function DoubleWordPacket(doubleword)
-	var packet := Hex(doubleword);
-	packet := &quot;00000000&quot; + packet[3, Len(packet) - 2];
-
-	return (packet[Len(packet) - 7, 8]);
-endfunction


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000859.html">[Poldistro-svn] r885 - in trunk/096/pkg/skills/lumberjacking: include treeRegen
</A></li>
	<LI>Next message: <A HREF="000860.html">[Poldistro-svn] r887 - trunk/096/scripts/include/OLD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#873">[ date ]</a>
              <a href="thread.html#873">[ thread ]</a>
              <a href="subject.html#873">[ subject ]</a>
              <a href="author.html#873">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/poldistro-svn">More information about the Poldistro-svn
mailing list</a><br>
</body></html>
