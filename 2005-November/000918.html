<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Poldistro-svn] r944 - in trunk/096/pkg/systems/loot: configs includes
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/poldistro-svn/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r944%20-%20in%20trunk/096/pkg/systems/loot%3A%20configs%20includes&In-Reply-To=%3C200511130726.jAD7QUjr009805%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000917.html">
   <LINK REL="Next"  HREF="000919.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Poldistro-svn] r944 - in trunk/096/pkg/systems/loot: configs includes</H1>
    <B>Austin Heilman at BerliOS</B> 
    <A HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r944%20-%20in%20trunk/096/pkg/systems/loot%3A%20configs%20includes&In-Reply-To=%3C200511130726.jAD7QUjr009805%40sheep.berlios.de%3E"
       TITLE="[Poldistro-svn] r944 - in trunk/096/pkg/systems/loot: configs includes">austin at berlios.de
       </A><BR>
    <I>Sun Nov 13 08:26:30 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000917.html">[Poldistro-svn] r943 - trunk/096/pkg/mobiles/brainAI/include/braincore
</A></li>
        <LI>Next message: <A HREF="000919.html">[Poldistro-svn] r945 - trunk/096/pkg/mobiles/newCharacter/config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#918">[ date ]</a>
              <a href="thread.html#918">[ thread ]</a>
              <a href="subject.html#918">[ subject ]</a>
              <a href="author.html#918">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: austin
Date: 2005-11-13 08:26:17 +0100 (Sun, 13 Nov 2005)
New Revision: 944

Modified:
   trunk/096/pkg/systems/loot/configs/loot-groups.cfg
   trunk/096/pkg/systems/loot/configs/loot-index.cfg
   trunk/096/pkg/systems/loot/includes/lootParser.inc
Log:
Flipped some entries around in config files.
Names come before amounts now.

Modified: trunk/096/pkg/systems/loot/configs/loot-groups.cfg
===================================================================
--- trunk/096/pkg/systems/loot/configs/loot-groups.cfg	2005-11-13 05:13:08 UTC (rev 943)
+++ trunk/096/pkg/systems/loot/configs/loot-groups.cfg	2005-11-13 07:26:17 UTC (rev 944)
@@ -3,74 +3,76 @@
 # loot-groups.cfg
 #
 # These are groups where items can be randomly selected from.
+# Amount can be a solid number or a dice string.
+# ItemName can be an objtype number or an item name.
 #
 # LootGroup GroupName
 # {
-# 	Item	&lt;Amount&gt;	&lt;ItemName&gt;
+# 	Item	&lt;itemName&gt;	&lt;Amount&gt;
 # }
 #
 ######################################################
 
 Group BigWeapons
 {
-	Item	1	LongBow
-	Item	1	WarAxe
-	Item	1	BattleAxe
-	Item	1	LargeBattleAxe
-	Item	1	TwoHandedAxe
-	Item	1	WarHammer
-	Item	1	WarMace
-	Item	1	Bardiche
-	Item	1	Halberd
-	Item	1	BroadSword
-	Item	1	BlackStaff
+	Item	LongBow		1
+	Item	WarAxe		1
+	Item	BattleAxe	1
+	Item	LargeBattleAxe	1
+	Item	TwoHandedAxe	1
+	Item	WarHammer	1
+	Item	WarMace		1
+	Item	Bardiche	1
+	Item	Halberd		1
+	Item	BroadSword	1
+	Item	BlackStaff	1
 }
 
 Group Booze
 {
-	Item	1d2 BottleOfLiquor
-	Item	1d2 BottleOfAle
-	Item	1d2 BottleOfWine
-	Item	1d2 BottleOfRum
+	Item	BottleOfLiquor	1d2
+	Item	BottleOfAle	1d2
+	Item	BottleOfWine	1d2
+	Item	BottleOfRum	1d2
 }
 
 Group Reagents
 {
-	Item	1d6 Batwing
-	Item	1d6 Nightshade
-	Item	1d6 Garlic
-	Item	1d6 SpiderSilk
-	Item	1d6 MandrakeRoot
-	Item	1d6 SulphurousAsh
-	Item	1d6 Ginseng
-	Item	1d6 BloodMoss
-	Item	1d6 Bone
-	Item	1d6 VialOfBlood
-	Item	1d6 EyeOfNewt
-	Item	1d6 Pumice
-	Item	1d6 SerpentScale
-	Item	1d6 DeadWood
-	Item	1d6 FertileDirt
-	Item	1d6 ExecutionersCap
+	Item	Batwing		1d6
+	Item	Nightshade	1d6
+	Item	Garlic		1d6
+	Item	SpiderSilk	1d6
+	Item	MandrakeRoot	1d6
+	Item	SulphurousAsh	1d6
+	Item	Ginseng		1d6
+	Item	BloodMoss	1d6
+	Item	Bone		1d6
+	Item	VialOfBlood	1d6
+	Item	EyeOfNewt	1d6
+	Item	Pumice		1d6
+	Item	SerpentScale	1d6
+	Item	DeadWood	1d6
+	Item	FertileDirt	1d6
+	Item	ExecutionersCap	1d6
 }
 
 Group Writing
 {
-	Item	1	book1
-	Item	1	book2
-	Item	1	book3
-	Item	1	book4
-	Item	1	book5
-	Item	1	book6
-	Item	1	PenAndInk
-	Item	1d10	BlankScroll
+	Item	book1		1
+	Item	book2		1
+	Item	book3		1
+	Item	book4		1
+	Item	book5		1
+	Item	book6		1
+	Item	PenAndInk	1
+	Item	BlankScroll	1d10
 }
 
 Group Jewelry
 {
-	Item	1	Ring
-	Item	1	Bracelet
-	Item	1	Earrings
-	Item	1	SolidNecklace
-	Item	1	BeadedNecklace
+	Item	Ring		1
+	Item	Bracelet	1
+	Item	Earrings	1
+	Item	SolidNecklace	1
+	Item	BeadedNecklace	1
 }
\ No newline at end of file

Modified: trunk/096/pkg/systems/loot/configs/loot-index.cfg
===================================================================
--- trunk/096/pkg/systems/loot/configs/loot-index.cfg	2005-11-13 05:13:08 UTC (rev 943)
+++ trunk/096/pkg/systems/loot/configs/loot-index.cfg	2005-11-13 07:26:17 UTC (rev 944)
@@ -8,10 +8,9 @@
 # This is the index for the loot system.
 # Options per element are specified below.
 #
-# [Chance] - This reflects a 100% chance. By default, it is 100 unless you specify
-# otherwise. Setting chance to '20' gives it a 20% chance of being used in the loot
-# generation process. Chance can range from 0.1 [1] to 100 [1000].
-# (1000 &lt;= (chance*10)) == 1 - Generates item
+# [Chance] - This reflects a 100% chance. Default is 100%
+# Chance can range from 0.1 to 100.0
+# Example: Setting chance to '20' gives it a 20% chance of being generated / used.
 #
 # Dice - This is a dice string. XdY(+-)Z.
 #          Examples: 1d3+2   5d9-2
@@ -20,9 +19,9 @@
 #
 # LootIndex GroupName
 # {
-# 	Item	&lt;N Dice&gt;	&lt;ItemName&gt;	[Chance]	# Includes 'N' of ItemName
-#	Stack	&lt;N Dice&gt;	&lt;ItemName&gt;	[Chance]	# Stacks 'N' of ItemName
-#	Random	&lt;N Dice&gt;	&lt;Group&gt;		[Chance]	# Pick 'N' items from 'Group' randomly
+# 	Item	&lt;ItemName&gt;	&lt;N Dice&gt;	[Chance]	# Includes 'N' of ItemName
+#	Stack	&lt;ItemName&gt;	&lt;N Dice&gt;	[Chance]	# Stacks 'N' of ItemName
+#	Random	&lt;Group&gt;		&lt;N Dice&gt;	[Chance]	# Pick 'N' items from 'Group' randomly
 #	Group	[GroupName]					# Append another index group to the current one
 #
 #	MagicTable	[Table]	[Amount]	[Bias]	# Not yet implemented.
@@ -34,47 +33,47 @@
 
 LootGroup Dog
 {
-	Item	1	Bone	3
+	Item	Bone		1	3
 }
 
 LootGroup ElementalFire
 {
-	Stack	1d6+4	SulfurousAsh	100
+	Stack	SulfurousAsh	1d6+4	100
 }
 
 LootGroup ElementalEarth
 {
-	Item	2d5+5	FertileDirt	100
+	Item	FertileDirt	2d5+5	100
 }
 
 LootGroup ElementalWater
 {
-	Stack	1d4	BlackPearl	100
+	Stack	BlackPearl	1d4	100
 }
 
 LootGroup ElementalAir
 {
-	Stack	1d6+3	SpiderSilk	100
+	Stack	SpiderSilk	1d6+3	100
 }
 
 LootGroup Liche
 {
-	Item	2d3+2	GoldCoin	100
-	Item	1d8	GoldCoin	30
-	Item	1d10	GoldCoin	30
-	Item	2d4 	VialOfBlood	50
-	Item	1	heartofevil	0.5
-	Item	1d10	Bone		50
-	Random	2d10	Reagents	100
-	Random	2d12+10	Reagents	60
-	Random	1d2	Writing		15
-	Random	1	Jewelry		40
+	Item	GoldCoin	2d3+2	100
+	Item	GoldCoin	1d8	30
+	Item	GoldCoin	1d10	30
+	Item	VialOfBlood	2d4 	50
+	Item	heartofevil	1	0.5
+	Item	Bone		1d10	50
+	Random	Reagents	2d10	100
+	Random	Reagents	2d12+10	60
+	Random	Writing		1d2	15
+	Random	Jewelry		1	40
 }
 
 LootIndex Rabbit
 {
-	Stack	1	Seeds	5
-	Stack	1d3	Carrot		5
-	Stack	1d3	Turnip		3
-	Stack	1d2	HeadOfLettuce	2
+	Stack	Seeds		1	5
+	Stack	Carrot		1d3	5
+	Stack	Turnip		1d3	3
+	Stack	HeadOfLettuce	1d2	2
 }

Modified: trunk/096/pkg/systems/loot/includes/lootParser.inc
===================================================================
--- trunk/096/pkg/systems/loot/includes/lootParser.inc	2005-11-13 05:13:08 UTC (rev 943)
+++ trunk/096/pkg/systems/loot/includes/lootParser.inc	2005-11-13 07:26:17 UTC (rev 944)
@@ -110,10 +110,11 @@
 
 function Loot_ParseString(line)
 	line := SplitWords(line);
-	var amount := CStr(line[1]);
+	
+	var name := CStr(line[1]);
+	
+	var amount := CStr(line[2]);
 	amount := RandomDiceRoll(amount);
-
-	var name := CStr(line[2]);
 	
 	var chance := CDbl(line[3]);
 	if ( !chance )
@@ -121,8 +122,8 @@
 	endif
 
 	var result := struct;
+	result.+name := name;
 	result.+amount := amount;
-	result.+name := name;
 	result.+chance := chance;
 
 	return result;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000917.html">[Poldistro-svn] r943 - trunk/096/pkg/mobiles/brainAI/include/braincore
</A></li>
	<LI>Next message: <A HREF="000919.html">[Poldistro-svn] r945 - trunk/096/pkg/mobiles/newCharacter/config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#918">[ date ]</a>
              <a href="thread.html#918">[ thread ]</a>
              <a href="subject.html#918">[ subject ]</a>
              <a href="author.html#918">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/poldistro-svn">More information about the Poldistro-svn
mailing list</a><br>
</body></html>
