<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Poldistro-svn] r1364 - in trunk/096/pkg/OLD: . utils utils/utilsdate
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/poldistro-svn/2006-May/index.html" >
   <LINK REL="made" HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r1364%20-%20in%20trunk/096/pkg/OLD%3A%20.%20utils%20utils/utilsdate&In-Reply-To=%3C200605122116.k4CLGPbf032106%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001332.html">
   <LINK REL="Next"  HREF="001334.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Poldistro-svn] r1364 - in trunk/096/pkg/OLD: . utils utils/utilsdate</H1>
    <B>austin at BerliOS</B> 
    <A HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r1364%20-%20in%20trunk/096/pkg/OLD%3A%20.%20utils%20utils/utilsdate&In-Reply-To=%3C200605122116.k4CLGPbf032106%40sheep.berlios.de%3E"
       TITLE="[Poldistro-svn] r1364 - in trunk/096/pkg/OLD: . utils utils/utilsdate">austin at berlios.de
       </A><BR>
    <I>Fri May 12 23:16:25 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="001332.html">[Poldistro-svn] r1363 - trunk/096/pkg/utils
</A></li>
        <LI>Next message: <A HREF="001334.html">[Poldistro-svn] r1365 - in trunk/096/pkg/OLD/systems: . config config/config config/include scheduler scheduler/config scheduler/include
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1333">[ date ]</a>
              <a href="thread.html#1333">[ thread ]</a>
              <a href="subject.html#1333">[ subject ]</a>
              <a href="author.html#1333">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: austin
Date: 2006-05-12 23:16:24 +0200 (Fri, 12 May 2006)
New Revision: 1364

Added:
   trunk/096/pkg/OLD/utils/
   trunk/096/pkg/OLD/utils/utilsdate/
   trunk/096/pkg/OLD/utils/utilsdate/constsDate.inc
   trunk/096/pkg/OLD/utils/utilsdate/pkg.cfg
   trunk/096/pkg/OLD/utils/utilsdate/utilsDate.inc
   trunk/096/pkg/OLD/utils/utilsdate/utilsStrings.inc
Log:


Added: trunk/096/pkg/OLD/utils/utilsdate/constsDate.inc
===================================================================
--- trunk/096/pkg/OLD/utils/utilsdate/constsDate.inc	2006-05-12 21:15:41 UTC (rev 1363)
+++ trunk/096/pkg/OLD/utils/utilsdate/constsDate.inc	2006-05-12 21:16:24 UTC (rev 1364)
@@ -0,0 +1,58 @@
+/**
+ * Localizable data constants. Do not localize constant names, but
+ * you can localize the string values.
+ *
+ * @author     Andromeda UO
+ * @author     Jouni Airaksinen, <A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">mintus at andromeda-uo.net</A>
+ * @url        <A HREF="http://www.andromeda-uo.net/">http://www.andromeda-uo.net/</A>
+ * @version    1.0 (%G%)
+ * @copyright  (C) Copyright 2002-2003
+ */
+ 
+// constants //
+
+const DateSeparator := &quot;-&quot;;
+const TimeSeparator := &quot;:&quot;;
+
+const SShortMonthNameJan := &quot;Jan&quot;;
+const SShortMonthNameFeb := &quot;Feb&quot;;
+const SShortMonthNameMar := &quot;Mar&quot;;
+const SShortMonthNameApr := &quot;Apr&quot;;
+const SShortMonthNameMay := &quot;May&quot;;
+const SShortMonthNameJun := &quot;Jun&quot;;
+const SShortMonthNameJul := &quot;Jul&quot;;
+const SShortMonthNameAug := &quot;Aug&quot;;
+const SShortMonthNameSep := &quot;Sep&quot;;
+const SShortMonthNameOct := &quot;Oct&quot;;
+const SShortMonthNameNov := &quot;Nov&quot;;
+const SShortMonthNameDec := &quot;Dec&quot;;
+
+const SLongMonthNameJan := &quot;January&quot;;
+const SLongMonthNameFeb := &quot;February&quot;;
+const SLongMonthNameMar := &quot;March&quot;;
+const SLongMonthNameApr := &quot;April&quot;;
+const SLongMonthNameMay := &quot;May&quot;;
+const SLongMonthNameJun := &quot;June&quot;;
+const SLongMonthNameJul := &quot;July&quot;;
+const SLongMonthNameAug := &quot;August&quot;;
+const SLongMonthNameSep := &quot;September&quot;;
+const SLongMonthNameOct := &quot;October&quot;;
+const SLongMonthNameNov := &quot;November&quot;;
+const SLongMonthNameDec := &quot;December&quot;;
+
+const SShortDayNameSun := &quot;Sun&quot;;
+const SShortDayNameMon := &quot;Mon&quot;;
+const SShortDayNameTue := &quot;Tue&quot;;
+const SShortDayNameWed := &quot;Wed&quot;;
+const SShortDayNameThu := &quot;Thu&quot;;
+const SShortDayNameFri := &quot;Fri&quot;;
+const SShortDayNameSat := &quot;Sat&quot;;
+
+const SLongDayNameSun := &quot;Sunday&quot;;
+const SLongDayNameMon := &quot;Monday&quot;;
+const SLongDayNameTue := &quot;Tuesday&quot;;
+const SLongDayNameWed := &quot;Wednesday&quot;;
+const SLongDayNameThu := &quot;Thursday&quot;;
+const SLongDayNameFri := &quot;Friday&quot;;
+const SLongDayNameSat := &quot;Saturday&quot;;
+

Added: trunk/096/pkg/OLD/utils/utilsdate/pkg.cfg
===================================================================
--- trunk/096/pkg/OLD/utils/utilsdate/pkg.cfg	2006-05-12 21:15:41 UTC (rev 1363)
+++ trunk/096/pkg/OLD/utils/utilsdate/pkg.cfg	2006-05-12 21:16:24 UTC (rev 1364)
@@ -0,0 +1,13 @@
+# $Id: pkg.cfg 684 2005-10-27 18:48:28Z muaddiblsd $
+#
+#
+Enabled		0
+Name		utilsdate
+Version		1.0
+
+Creator		Mintus
+CEmail		<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">mintus at andromeda-uo.net</A>
+Maintainer	Distro Team
+Email		<A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">distro at polserver.com</A>
+
+CoreRequired	95

Added: trunk/096/pkg/OLD/utils/utilsdate/utilsDate.inc
===================================================================
--- trunk/096/pkg/OLD/utils/utilsdate/utilsDate.inc	2006-05-12 21:15:41 UTC (rev 1363)
+++ trunk/096/pkg/OLD/utils/utilsdate/utilsDate.inc	2006-05-12 21:16:24 UTC (rev 1364)
@@ -0,0 +1,296 @@
+/**
+ * Contains some functions to perform date and time conversions.
+ * TODO : Date formatting
+ *
+ * @author     Andromeda UO
+ * @author     Jouni Airaksinen, <A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">mintus at andromeda-uo.net</A>
+ * @url        <A HREF="http://www.andromeda-uo.net/">http://www.andromeda-uo.net/</A>
+ * @version    1.1 (%G%)
+ * @copyright  (C) Copyright 2002-2003
+ */
+ 
+include &quot;include/constsDate&quot;;
+include &quot;include/utilsStrings&quot;;
+
+
+// polcore().systime is based to, January 1th 1970 (00:00 Greenwich Time ?)
+const DateDelta := 719163; // days since 1/1/0001 till 1/1/1970
+
+const SECONDS_IN_MINUTE := 60;
+const HOURS_IN_DAY := 24;
+const MINUTES_IN_HOUR := 60;
+
+const SECONDS_IN_HOUR := SECONDS_IN_MINUTE * MINUTES_IN_HOUR;
+const SECONDS_IN_DAY := SECONDS_IN_HOUR * HOURS_IN_DAY;
+
+const AVERAGE_MONTH_LENGTH := 30.4375; // 4 year period
+const AVERAGE_YEAR_LENGTH := 365.25;   // 4 year period
+
+// arrays //
+
+// The MonthDays array can be used to quickly find the number of
+//  days in a month:  MonthDays[IsLeapYear(Y) + 1][M]
+
+var MonthDays := array { 
+  array { 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 },
+  array { 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 } };
+
+// Lookup arrays for month and day names (short and long versions available).
+// To localize these edit constsDate.inc.
+
+var ShortMonthNames := array {
+  SShortMonthNameJan,  SShortMonthNameFeb,  SShortMonthNameMar,  SShortMonthNameApr,
+  SShortMonthNameMay,  SShortMonthNameJun,  SShortMonthNameJul,  SShortMonthNameAug,
+  SShortMonthNameSep,  SShortMonthNameOct,  SShortMonthNameNov,  SShortMonthNameDec };
+  
+var LongMonthNames := array {
+  SLongMonthNameJan,  SLongMonthNameFeb,  SLongMonthNameMar,  SLongMonthNameApr,
+  SLongMonthNameMay,  SLongMonthNameJun,  SLongMonthNameJul,  SLongMonthNameAug,
+  SLongMonthNameSep,  SLongMonthNameOct,  SLongMonthNameNov,  SLongMonthNameDec };
+
+var ShortDayNames := array {
+    SShortDayNameSun, SShortDayNameMon, SShortDayNameTue, SShortDayNameWed,
+    SShortDayNameThu, SShortDayNameFri, SShortDayNameSat };
+
+var LongDayNames := array {
+    SLongDayNameSun, SLongDayNameMon, SLongDayNameTue, SLongDayNameWed,
+    SLongDayNameThu, SLongDayNameFri, SLongDayNameSat };
+
+
+// functions //
+
+/**
+ * Tells if given year is a leap year.
+ *  
+ * @param year            Year to check for leap year.
+ * @return                Returns 1 if given year is a leap year, otherwise 0.
+ */
+function IsLeapYear(year)
+  return ((year % 4) == 0) and (((year % 100) &lt;&gt; 0) or ((year % 400) == 0));
+endfunction
+
+/**
+ * Returns number of days in given year.
+ *  
+ * @param year            Year from which the retreive the number of days.
+ * @return                Returns number of days in the given year.
+ */
+function DaysInYear(year)
+  return (365 + IsLeapYear(year));
+endfunction
+
+/**
+ * Returns index to day of weeks array of the given time.
+ * &lt;p&gt;
+ * eg. LongDayNames[DayOfWeek(polcore().systime)]
+ * would return the current day of week as a string.
+ *  
+ * @param time            Time from which to get the day of week index.
+ * @return                Index to the array of day of week.
+ */
+function DayOfWeek(time)
+  return ((CInt(time / SECONDS_IN_DAY) + DateDelta) % 7) + 1;
+endfunction
+
+/**
+ * Returns current date part of the polcore().systime
+ *  
+ * @param time            Time from which to get the current date part.
+ * @return                Returns current date part of the polcore().systime.
+ */
+function CDateStr(time)
+  var Year, Month, Day;
+  DecodeDate(time, Year, Month, Day);  
+  return CStr(Year) + DateSeparator + CPadStr(Month, 2) + DateSeparator + CPadStr(Day, 2);
+endfunction
+
+/**
+ * Returns current time part of the polcore().systime
+ *  
+ * @param time            Time from which to get the current time part.
+ * @return                Returns current time part of the polcore().systime.
+ */
+function CTimeStr(time)
+  var Hour, Minute, Second;
+  DecodeTime(time, Hour, Minute, Second);
+  return CPadStr(Hour, 2) + TimeSeparator + CPadStr(Minute, 2) + TimeSeparator + CPadStr(Second, 2);
+endfunction
+
+/**
+ * Returns current time and date parts of the polcore().systime
+ * &lt;p&gt;
+ * Design notes: Does not use CTimeStr() or CDateStr() functions by design.
+ *  
+ * @param time            Time from which to get the current time and date parts.
+ * @return                Returns current time and date parts of the polcore().systime.
+ */
+function CDateTimeStr(time)
+  var Year, Month, Day;
+  var Hour, Minute, Second;
+  DecodeDate(time, Year, Month, Day);  
+  DecodeTime(time, Hour, Minute, Second);
+  return CStr(Year) + DateSeparator + CPadStr(Month, 2) + DateSeparator + CPadStr(Day, 2) + &quot;  &quot; + 
+    CPadStr(Hour, 2) + TimeSeparator + CPadStr(Minute, 2) + TimeSeparator + CPadStr(Second, 2);
+endfunction
+
+/**
+ * Converts time into POL log formatted date string.
+ * &lt;p&gt;
+ * With default constsDate.inc this returns same string as CDateStr() does.
+ *  
+ * @param time            Time from which to format the log date string.
+ * @return                Returns the POL log formatted date string.
+ */
+function CLogTime(time)
+  var Year, Month, Day;
+  DecodeDate(time, Year, Month, Day);  
+  return CStr(Year) + &quot;-&quot; + CPadStr(Month, 2) + &quot;-&quot; + CPadStr(Day, 2);
+endfunction
+
+/**
+ * Converts Time (seconds) to counter string.
+ * &lt;p&gt;
+ * eg. with 100 seconds function would return string &quot;1 mins, 40 secs&quot;.
+ * &lt;p&gt;
+ * TODO : Custom formatting string
+ *  
+ * @param time            Time from which to format the counter string. 
+ * @param showdays        Set 0 to hide days in the string. Defaults to 1.
+ * @param showhours       Set 0 to hide hours in the string. Defaults to 1.
+ * @param showminutes     Set 0 to hide minutes in the string. Defaults to 1.
+ * @param showseconds     Set 0 to hide seconds in the string. Defaults to 1.
+ * @return                Returns formatted counter string.
+ */
+
+function CDateTimeCounterStr(time, showdays := 1, showhours := 1, showminutes := 1, showseconds := 1)
+  var Days := CInt(time / SECONDS_IN_DAY);
+  time := CInt(time % SECONDS_IN_DAY);
+  var Hour := CInt(time / SECONDS_IN_HOUR);
+  var Second := CInt(time % SECONDS_IN_HOUR);
+  var Minute := CInt(Second / SECONDS_IN_MINUTE);
+  Second := CInt(Second % SECONDS_IN_MINUTE);
+  var R := &quot;&quot;;
+  if (showdays) 
+    R := CStr(Days) + &quot; days&quot;;
+  endif
+  if (showhours) 
+    R := R + &quot;, &quot; + CStr(Hour) + &quot; hours&quot;;
+  endif
+  if (showminutes) 
+    R := R + &quot;, &quot; + CStr(Minute) + &quot; mins&quot;;
+  endif
+  if (showseconds) 
+    R := R + &quot;, &quot; + CStr(Second) + &quot; secs&quot;;
+  endif
+  return R;
+endfunction
+
+/**
+ * Converts Time's time part to military integer. Eg. 20 hours 54 minutes 
+ * will be 2054. Does not pad with zeroes, use CPadStr() in utilStrings.inc 
+ * to do that.
+ *  
+ * @param time            Time from which to format the military integer.
+ * @return                Returns the military integer.
+ */
+function CMilitaryTime(time)
+  var Hour, Minute, Second;
+  DecodeTime(time, Hour, Minute, Second);
+  return (Hour * 100) + Minute;
+endfunction
+
+/**
+ * Does division and returns result and reminder.
+ * Used internally. Should be moved to separate Maths.inc.
+ *  
+ * @param dividend        Value to divide.
+ * @param divisor         Divisor.
+ * @param result          Result of the division. Byref value.
+ * @param remainder       Remainder of the division. Byref value.
+ */
+function DivMod(dividend, divisor, byref result, byref remainder)
+  result := 0;
+  remainder := 0;
+  if (divisor)
+    result := CInt(dividend / divisor);
+    remainder := CInt(dividend % divisor);
+  endif
+endfunction
+
+/**
+ * Used internally to decode Time to Hours, Minutes and Seconds.
+ *  
+ * @param time            Time value to decode.
+ * @param hour            Hour result of the decode. Byref value.
+ * @param minute          Minute result of the decode. Byref value.
+ * @param second          Second result of the decode. Byref value.
+ */
+function DecodeTime(time, byref hour, byref minute, byref second)
+  time := CInt(time % SECONDS_IN_DAY); // ingore beyond one day
+  hour := CInt(time / SECONDS_IN_HOUR);
+  second := CInt(time % SECONDS_IN_HOUR);
+  minute := CInt(second / SECONDS_IN_MINUTE);
+  second := CInt(second % SECONDS_IN_MINUTE);  
+endfunction
+
+const D1 := 365;
+const D4 := D1 * 4 + 1;
+const D100 := D4 * 25 - 1;
+const D400 := D100 * 4 + 1;
+
+/**
+ * Used internally to decode Time to Years, Months and Days.
+ *  
+ * @param time            Time value to decode.
+ * @param year            Year result of the decode. Byref value.
+ * @param month           Month result of the decode. Byref value.
+ * @param day             Day result of the decode. Byref value.
+ */
+function DecodeDate(time, byref year, byref month, byref day)
+//function DecodeDate(Time, byref Year, byref Month, byref Day, byref DOW, byref Reminder)
+//  Reminder := CInt(Time % SECONDS_IN_DAY);
+  
+  var T := CInt(time / SECONDS_IN_DAY) + DateDelta;
+  if (T &lt;= 0)
+    year := 0;
+    month := 0;
+    day := 0;
+//    DOW := 0;
+  else
+//    DOW := T % 7;
+    T := T - 1;
+    // Calculate years. Meaning of D??? is to take care of leapyears.
+    var Y := 1;
+    while (T &gt;= D400)
+      T := T - D400;
+      Y := Y + 400;
+    endwhile
+    var I, D;
+    DivMod(T, D100, I, D);
+    if (I == 4)
+      I := I - 1;
+      D := D + D100;
+    endif    
+    Y := Y + (I * 100);
+    DivMod(D, D4, I, D);
+    Y := Y + (I * 4);
+    DivMod(D, D1, I, D);
+    if (I == 4)
+      I := I - 1;
+      D := D + D1;
+    endif
+    Y := Y + I;    
+    // Reminder has months and days.
+    var IsLeap := IsLeapYear(Y) + 1;
+    var M := 1;
+    while (1)
+      I := MonthDays[IsLeap][M];
+      if (D &lt; I) break; endif
+      D := D - I;
+      M := M + 1;
+    endwhile
+    year := Y;
+    month := M;
+    day := D + 1;
+  endif
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/OLD/utils/utilsdate/utilsStrings.inc
===================================================================
--- trunk/096/pkg/OLD/utils/utilsdate/utilsStrings.inc	2006-05-12 21:15:41 UTC (rev 1363)
+++ trunk/096/pkg/OLD/utils/utilsdate/utilsStrings.inc	2006-05-12 21:16:24 UTC (rev 1364)
@@ -0,0 +1,183 @@
+/**
+ * Functions to process strings in various ways.
+ *
+ * @author     Andromeda UO
+ * @author     Jouni Airaksinen, <A HREF="https://lists.berlios.de/mailman/listinfo/poldistro-svn">mintus at andromeda-uo.net</A>
+ * @url        <A HREF="http://www.andromeda-uo.net/">http://www.andromeda-uo.net/</A>
+ * @version    1.1 (%G%)
+ * @copyright  (C) Copyright 2002-2003
+ */
+
+use uo;
+
+// --------------------------------------------------------------------------
+//
+// Msg constants 
+//
+
+
+// --------------------------------------------------------------------------
+//
+// String functions
+//
+
+/**
+ * This function inserts values from array into given format string. 
+ * &lt;p&gt;
+ * Example: var s := Format(&quot;Do you, %s, want to continue?&quot;, {who.name});
+ *  
+ * @param formatstr       String which can have multiple %s and they are 
+ *                        replaced with the elements of strings in same order.
+ * @param strings         Array of the values to be inserted.
+ * @return                Resulting string value.
+ */
+function Format(formatstr, strings)
+  var st := 1;
+  foreach str in (strings)
+    var p := find(formatstr, &quot;%s&quot;, st);
+    if (p)
+      st := p + len(str);
+      formatstr := CStr(formatstr[1 , p - 1]) + str + CStr(formatstr[p + 2, len(formatstr)]);
+    else 
+      return formatstr;
+    endif
+  endforeach
+  return formatstr;
+endfunction
+
+/**
+ * This function XOR encodes/decodes string with value given. If you XOR string
+ * twice with same value you get the original string. Note, the string might 
+ * result with unwanted control characters. You might want to use 
+ * CAscZ(str) (and maybe Pack()) for it before storing.
+ *  
+ * @param str             String which will be XOR'ed
+ * @param value           The 'seed' value to use.
+ * @return                Resulting string value.
+ */
+function XorString(str, value)
+  var str_asc := CAscZ(str);
+  var I;
+  for (I := 1; I &lt; len(str_asc); I := I + 1)
+    str_asc[I] := (str_asc[I] ^ value);
+  endfor
+  return CChrZ(str_asc);
+endfunction
+
+
+var NumbersArray := array { &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot; };  // preinitialize the array
+/**
+ * removes numbers from a given string and returns the new string.
+ *  
+ * @param text            String from which all number characters
+ *                        should be removed.
+ * @return                Resulting string value.
+ */ 
+function RemoveNumbers(text)
+  var I;
+  var r := &quot;&quot;;
+  for (I := 1; I &lt;= len(text); I := I + 1)
+    if (!(text[I] in NumbersArray))
+      r := r + text[I];
+    endif
+  endfor
+  return r;
+endfunction
+
+
+/**
+ * Parse delimited string to array of strings. This in a sense corresponds
+ * the core SplitWords() function with the difference you can specify the
+ * delimeter character (instead of hardcoded space).
+ * Note that the function doesn't remove eg. trailing/leading spaces like
+ * the SplitWords() does.
+ *  
+ * @param str             String which to parse into components.
+ * @param delimiter       Character which is used to cut the string (defaults to &quot; &quot;).
+ *                        Should be just one character.
+ * @return                Resulting array of the components.
+ */ 
+function ParseDelimitedString(str, delimiter := &quot; &quot;)
+/*  if (delimiter == &quot; &quot;)
+    return SplitWords(str);
+  endif*/
+  var r := array {};
+  var st := 1;
+  var p := find(str, delimiter, st);
+  while (p)
+    r.append(str[st, p - 1]);
+    st := p + 1;
+    p := find(str, delimiter, st);
+  endwhile
+  r.append(str[st, len(str)]);
+  return r;
+endfunction
+
+/**
+ * Returns string of given character.
+ * Does not do check validity of  char parameter. This for effiency.
+ *  
+ * @param length          Length of the resulting string.
+ * @param char            Character which is used to create the string.
+ * @return                Resulting string value.
+ */ 
+function StringOfChar(length, char)
+  var R := char;
+  if (length &gt; 1)
+    var I;
+    for (I := 1; I &lt; length; I + 1)
+      R := R + char;
+    endfor
+  endif
+  return R;
+endfunction
+
+/**
+ * Pads string with given character (defaults to &quot;0&quot;).
+ *  
+ * @param value           String to pad.
+ * @param length          Length of the resulting string into which to pad.
+ * @param padchar         Character which is used to padding. Defaults to &quot;0&quot;.
+ * @return                Resulting string value.
+ */ 
+function CPadStr(value, length, padchar := &quot;0&quot;)
+  value := CStr(value);
+  if (len(value) &lt; length)
+    value := StringOfChar(length - len(value), padchar) + value;
+  endif
+  return value;
+endfunction
+
+/**
+ * Trims leading commas and spaces and ending spaces from a string.
+ * Useful eg. with title_prefix, title_suffix properties.
+ *  
+ * @param text            String &quot;cleap up&quot;.
+ * @return                Resulting string value.
+ */ 
+function CleanUp(text)
+  if (text == error)
+    return &quot;&quot;;
+  endif
+  var I;
+  var S := 1;
+  // trim leading &quot;,&quot; and &quot; &quot;
+  for (I := 1; I &lt;= len(text); I := I + 1) 
+    if (!(text[I] in {&quot;,&quot;, &quot; &quot;}))
+      break;
+    endif
+    S := S + 1;
+  endfor
+  text := text[S, len(text)];
+  
+  // trim ending &quot; &quot;
+  var E := len(text);
+  for (I := E; I &gt; 0; I := I - 1)
+    if (text[I] != &quot; &quot;)
+      E := I;
+      break;
+    endif
+  endfor
+  return text[1, E];
+endfunction
+


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001332.html">[Poldistro-svn] r1363 - trunk/096/pkg/utils
</A></li>
	<LI>Next message: <A HREF="001334.html">[Poldistro-svn] r1365 - in trunk/096/pkg/OLD/systems: . config config/config config/include scheduler scheduler/config scheduler/include
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1333">[ date ]</a>
              <a href="thread.html#1333">[ thread ]</a>
              <a href="subject.html#1333">[ subject ]</a>
              <a href="author.html#1333">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/poldistro-svn">More information about the Poldistro-svn
mailing list</a><br>
</body></html>
