<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Poldistro-svn] r699 - in trunk/096/pkg/mobiles/oldAI: . combat main
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/poldistro-svn/2005-October/index.html" >
   <LINK REL="made" HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r699%20-%20in%20trunk/096/pkg/mobiles/oldAI%3A%20.%20combat%20main&In-Reply-To=%3C200510292013.j9TKDMqe007153%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000672.html">
   <LINK REL="Next"  HREF="000674.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Poldistro-svn] r699 - in trunk/096/pkg/mobiles/oldAI: . combat main</H1>
    <B>Scott E. Royalty at BerliOS</B> 
    <A HREF="mailto:poldistro-svn%40lists.berlios.de?Subject=Re%3A%20%5BPoldistro-svn%5D%20r699%20-%20in%20trunk/096/pkg/mobiles/oldAI%3A%20.%20combat%20main&In-Reply-To=%3C200510292013.j9TKDMqe007153%40sheep.berlios.de%3E"
       TITLE="[Poldistro-svn] r699 - in trunk/096/pkg/mobiles/oldAI: . combat main">muaddiblsd at berlios.de
       </A><BR>
    <I>Sat Oct 29 22:13:22 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000672.html">[Poldistro-svn] r698 - in trunk/096/pkg/mobiles/oldAI: . combat main
</A></li>
        <LI>Next message: <A HREF="000674.html">[Poldistro-svn] r700 - in trunk/096/pkg/mobiles/oldAI: . main
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#673">[ date ]</a>
              <a href="thread.html#673">[ thread ]</a>
              <a href="subject.html#673">[ subject ]</a>
              <a href="author.html#673">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: muaddiblsd
Date: 2005-10-29 22:13:13 +0200 (Sat, 29 Oct 2005)
New Revision: 699

Modified:
   trunk/096/pkg/mobiles/oldAI/animal.src
   trunk/096/pkg/mobiles/oldAI/barker.src
   trunk/096/pkg/mobiles/oldAI/cat.src
   trunk/096/pkg/mobiles/oldAI/combat/fireCombatEvent.inc
   trunk/096/pkg/mobiles/oldAI/combat/immobileFight.inc
   trunk/096/pkg/mobiles/oldAI/combat/packFight.inc
   trunk/096/pkg/mobiles/oldAI/combat/poisonCombatEvent.inc
   trunk/096/pkg/mobiles/oldAI/combat/slimeCombatEvent.inc
   trunk/096/pkg/mobiles/oldAI/combat/spellFireEvent.inc
   trunk/096/pkg/mobiles/oldAI/combat/spiderCombatEvent.inc
   trunk/096/pkg/mobiles/oldAI/combat/vortexCombatEvent.inc
   trunk/096/pkg/mobiles/oldAI/combat/warriorcombatevent.inc
   trunk/096/pkg/mobiles/oldAI/cow.src
   trunk/096/pkg/mobiles/oldAI/crier.src
   trunk/096/pkg/mobiles/oldAI/dumbKillPCs.src
   trunk/096/pkg/mobiles/oldAI/firebreather.src
   trunk/096/pkg/mobiles/oldAI/goodCaster.src
   trunk/096/pkg/mobiles/oldAI/helpPCs.src
   trunk/096/pkg/mobiles/oldAI/immobile.src
   trunk/096/pkg/mobiles/oldAI/immobileSpell.src
   trunk/096/pkg/mobiles/oldAI/killAny.src
   trunk/096/pkg/mobiles/oldAI/killPCs.src
   trunk/096/pkg/mobiles/oldAI/main/killPCsLoop.inc
   trunk/096/pkg/mobiles/oldAI/main/mainLoopAnimal.inc
   trunk/096/pkg/mobiles/oldAI/main/mainLoopBarker.inc
   trunk/096/pkg/mobiles/oldAI/main/mainLoopCat.inc
   trunk/096/pkg/mobiles/oldAI/main/mainLoopCow.inc
   trunk/096/pkg/mobiles/oldAI/main/mainLoopCrier.inc
   trunk/096/pkg/mobiles/oldAI/main/mainLoopGood.inc
   trunk/096/pkg/mobiles/oldAI/main/mainLoopImmobile.inc
   trunk/096/pkg/mobiles/oldAI/main/mainLoopKillAny.inc
   trunk/096/pkg/mobiles/oldAI/main/mainLoopMeek.inc
   trunk/096/pkg/mobiles/oldAI/main/mainLoopSheep.inc
   trunk/096/pkg/mobiles/oldAI/main/mainLoopWolf.inc
   trunk/096/pkg/mobiles/oldAI/main/packKillPCsLoop.inc
   trunk/096/pkg/mobiles/oldAI/main/sleepMode.inc
   trunk/096/pkg/mobiles/oldAI/main/sleepModeCow.inc
   trunk/096/pkg/mobiles/oldAI/main/sleepModeSheep.inc
   trunk/096/pkg/mobiles/oldAI/meek.src
   trunk/096/pkg/mobiles/oldAI/merchant.src
   trunk/096/pkg/mobiles/oldAI/packFirebreather.src
   trunk/096/pkg/mobiles/oldAI/poisonElemental.src
   trunk/096/pkg/mobiles/oldAI/poisonKillPCs.src
   trunk/096/pkg/mobiles/oldAI/sheep.src
   trunk/096/pkg/mobiles/oldAI/slime.src
   trunk/096/pkg/mobiles/oldAI/spellFire.src
   trunk/096/pkg/mobiles/oldAI/spellKillPCs.src
   trunk/096/pkg/mobiles/oldAI/spiders.src
   trunk/096/pkg/mobiles/oldAI/townGuard.src
   trunk/096/pkg/mobiles/oldAI/townHealer.src
   trunk/096/pkg/mobiles/oldAI/townPerson.src
   trunk/096/pkg/mobiles/oldAI/undead.src
   trunk/096/pkg/mobiles/oldAI/undeadKillPCs.src
   trunk/096/pkg/mobiles/oldAI/vortexAI.src
   trunk/096/pkg/mobiles/oldAI/wolf.src
   trunk/096/pkg/mobiles/oldAI/worker.src
Log:
Fixed unused var reports.

Modified: trunk/096/pkg/mobiles/oldAI/animal.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/animal.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/animal.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -20,8 +20,9 @@
 var npccfgfile := ReadConfigFile(&quot;::npcdesc&quot;);
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
-
 program KillPlayers()
 	SetWarMode(0);
 	main_AI_loop();

Modified: trunk/096/pkg/mobiles/oldAI/barker.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/barker.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/barker.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -21,6 +21,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   SetWarMode( 0 );

Modified: trunk/096/pkg/mobiles/oldAI/cat.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/cat.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/cat.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -21,6 +21,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   SetWarMode( 0 );

Modified: trunk/096/pkg/mobiles/oldAI/combat/fireCombatEvent.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/combat/fireCombatEvent.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/combat/fireCombatEvent.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -7,6 +7,7 @@
 endfunction
 
 function process_flee_event(opponent)
+  opponent := opponent;
   return 0;
 endfunction
 
@@ -18,7 +19,7 @@
     PerformAction(me,0x0c);
     sleep(1);
     PlaySoundEffect(me, 0x16b);
-    sleep(1);    
+    sleep(1);
     var base := Cint(((FLAME_STRENGTH * GetHp(me)) / GetMaxHp(me)) / 2);
     var dmg :=  RandomInt(base) + base;
     PlayMovingEffect(me, opponent, 0x36d4, 10, 1, 1);
@@ -35,6 +36,7 @@
 endfunction
 
 function prepare_for_fight(opponent)
+  opponent := opponent;
   DisableMainEvents();
   EnableCombatEvents();
 endfunction

Modified: trunk/096/pkg/mobiles/oldAI/combat/immobileFight.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/combat/immobileFight.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/combat/immobileFight.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -4,13 +4,12 @@
     opponent := 0;
 	return;
   endif
-  var oldprio := set_priority(50);
+  set_priority(50);
   SetOpponent(opponent);
   prepare_for_fight(opponent);
   TurnToward(opponent);
   var loops := 0;
-  var ev;
-  var waittime := 0;
+  waittime := 0;
   while((opponent) &amp;&amp; not (opponent.dead || opponent.hidden || opponent.concealed) &amp;&amp; (dist(me,opponent) &lt; 20) )
 	if(!CloseDistance(opponent))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/combat/packFight.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/combat/packFight.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/combat/packFight.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -11,13 +11,12 @@
       return;
     endif
   endif
-  var oldprio := set_priority(50);
+  set_priority(50);
   SetOpponent( opponent );
   prepare_for_fight( opponent );
   TurnToward( opponent );
   var loops := 0;
-  var ev;
-  var waittime := 0;
+  waittime := 0;
   while ( (opponent) &amp;&amp; not (opponent.dead || opponent.hidden || opponent.concealed) &amp;&amp; (dist(me,opponent) &lt; 20) )
     if (!CloseDistance( opponent ) )
       loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/combat/poisonCombatEvent.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/combat/poisonCombatEvent.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/combat/poisonCombatEvent.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -8,6 +8,7 @@
 endfunction
 
 function process_flee_event(opponent)
+  opponent := opponent;
   return 0;
 endfunction
 
@@ -29,6 +30,7 @@
 endfunction
 
 function prepare_for_fight(opponent)
+  opponent := opponent;
   DisableMainEvents();
   EnableCombatEvents();
 endfunction

Modified: trunk/096/pkg/mobiles/oldAI/combat/slimeCombatEvent.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/combat/slimeCombatEvent.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/combat/slimeCombatEvent.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -17,6 +17,7 @@
 endfunction
 
 function process_flee_event(opponent)
+  opponent := opponent;
   return 0;
 endfunction
 
@@ -38,6 +39,7 @@
 endfunction
 
 function prepare_for_fight(opponent)
+  opponent := opponent;
   DisableMainEvents();
   EnableCombatEvents();
 endfunction
@@ -65,6 +67,7 @@
 endfunction
 
 function CanEat(character, item)
+  character := character;
   if ( ( item.objtype &gt;= 0x2030 ) &amp;&amp; (item.objtype &lt;= 0x2060) )
     return 0;
   endif

Modified: trunk/096/pkg/mobiles/oldAI/combat/spellFireEvent.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/combat/spellFireEvent.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/combat/spellFireEvent.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -60,6 +60,7 @@
 endfunction
 
 function prepare_for_fight(opponent)
+  opponent := opponent;
   if (!CInt(GetObjProperty(me, &quot;mr&quot;)))
 	CastSpell(me,me,&quot;reflect&quot;);
   endif

Modified: trunk/096/pkg/mobiles/oldAI/combat/spiderCombatEvent.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/combat/spiderCombatEvent.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/combat/spiderCombatEvent.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -9,6 +9,7 @@
 endfunction
 
 function process_flee_event(opponent)
+  opponent := opponent;
   return 0;
 endfunction
 
@@ -39,7 +40,7 @@
 endfunction
 
 function prepare_for_fight(opponent)
-
+	opponent := opponent;
 	DisableMainEvents();
 	EnableCombatEvents();
 

Modified: trunk/096/pkg/mobiles/oldAI/combat/vortexCombatEvent.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/combat/vortexCombatEvent.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/combat/vortexCombatEvent.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -12,7 +12,7 @@
 endfunction
 
 function prepare_for_fight(opponent)
-
+	opponent := opponent;
 	DisableMainEvents();
 	EnableCombatEvents();
 

Modified: trunk/096/pkg/mobiles/oldAI/combat/warriorcombatevent.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/combat/warriorcombatevent.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/combat/warriorcombatevent.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -9,6 +9,7 @@
 endfunction
 
 function process_flee_event(opponent)
+  opponent := opponent;
   return 0;
 endfunction
 
@@ -29,6 +30,7 @@
 endfunction
 
 function prepare_for_fight(opponent)
+  opponent := opponent;
   DisableMainEvents();
   EnableCombatEvents();
 endfunction

Modified: trunk/096/pkg/mobiles/oldAI/cow.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/cow.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/cow.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -20,6 +20,8 @@
 var npccfgfile := ReadConfigFile(&quot;::npcdesc&quot;);
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program cow()
 	SetWarMode(0);

Modified: trunk/096/pkg/mobiles/oldAI/crier.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/crier.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/crier.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -22,6 +22,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program TownCrier()
   SetWarMode( 0 );
@@ -43,7 +45,7 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
+  waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/dumbKillPCs.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/dumbKillPCs.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/dumbKillPCs.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -22,6 +22,8 @@
 var npccfgfile := ReadConfigFile(&quot;::npcdesc&quot;);
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   SetWarMode( 0 );

Modified: trunk/096/pkg/mobiles/oldAI/firebreather.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/firebreather.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/firebreather.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -24,6 +24,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   SetWarMode( 0 );

Modified: trunk/096/pkg/mobiles/oldAI/goodCaster.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/goodCaster.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/goodCaster.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -26,6 +26,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   SetWarMode( 0 );
@@ -50,7 +52,7 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
+  waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/helpPCs.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/helpPCs.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/helpPCs.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -14,7 +14,7 @@
 include &quot;:npcutils:anchors&quot;;
 include &quot;:oldAI:main/mainLoopGood&quot;;
 include &quot;:oldAI:combat/fight&quot;;
-include &quot;:oldAI:combat/warriorCombatEvent&quot;;
+include &quot;:oldAI:combat/warriorcombatevent&quot;;
 include &quot;:oldAI:setup/setup&quot;;
 include &quot;:oldAI:main/loot&quot;;
 include &quot;:oldAI:main/sleepMode&quot;;
@@ -24,6 +24,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program HelpPlayers()
   SetWarMode( 0 );
@@ -45,7 +47,7 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
+  waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/immobile.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/immobile.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/immobile.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -22,6 +22,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   	SetWarMode( 0 );
@@ -29,6 +31,7 @@
 endprogram
 
 function CloseDistance( opponent )
+  opponent := opponent;
   sleepms(100);
 endfunction
 
@@ -38,7 +41,7 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
+  waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/immobileSpell.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/immobileSpell.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/immobileSpell.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -41,6 +41,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   SetWarMode( 0 );
@@ -48,6 +50,7 @@
 endprogram
 
 function CloseDistance( opponent )
+  opponent := opponent;
   sleepms(100);
 endfunction
 
@@ -57,7 +60,7 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
+  waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/killAny.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/killAny.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/killAny.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -40,6 +40,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
 

Modified: trunk/096/pkg/mobiles/oldAI/killPCs.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/killPCs.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/killPCs.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -24,6 +24,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
 

Modified: trunk/096/pkg/mobiles/oldAI/main/killPCsLoop.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/killPCsLoop.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/killPCsLoop.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -1,6 +1,6 @@
 
 function main_AI_loop()
-  var ev := os::wait_for_event(0);
+  ev := os::wait_for_event(0);
   var wanders := 60;
   var next_loot := ReadGameClock() + 20;
   EnableMainEvents();
@@ -63,7 +63,7 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
+  waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;
@@ -94,4 +94,4 @@
     default: WalkTowardLocation(lx, ly);
              return 0;
   endcase
-endfunction  
\ No newline at end of file
+endfunction
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/oldAI/main/mainLoopAnimal.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/mainLoopAnimal.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/mainLoopAnimal.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -1,5 +1,4 @@
 function main_AI_loop()
-  var ev;
   var wanders := 60;
   EnableMainEvents();
   while(1)
@@ -55,7 +54,6 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/main/mainLoopBarker.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/mainLoopBarker.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/mainLoopBarker.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -1,5 +1,4 @@
 function main_AI_loop()
-  var ev;
   var wanders := 60;
   var mynoise := bark();
   EnableMainEvents();
@@ -28,7 +27,6 @@
 endfunction
 
 function RunLikeHell(opponent)
-  var ev;
   while((opponent)&amp;&amp; not(opponent.dead || opponent.hidden || opponent.concealed)&amp;&amp;(dist(me,opponent)&lt; 25))
     WalkAwayFrom(opponent);
     repeat
@@ -115,7 +113,6 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/main/mainLoopCat.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/mainLoopCat.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/mainLoopCat.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -1,5 +1,4 @@
 function main_AI_loop()
-  var ev;
   var wanders := 60;
   var hatelist := &quot;bird eagle rat chicken&quot;;
   EnableMainEvents();
@@ -55,7 +54,6 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/main/mainLoopCow.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/mainLoopCow.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/mainLoopCow.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -1,5 +1,5 @@
 function main_AI_loop()
-  var ev;
+
   var wanders := 0;
   EnableMainEvents();
   EnableEvents(SYSEVENT_DOUBLECLICKED);
@@ -30,7 +30,7 @@
 endfunction
 
 function RunLikeHell(opponent)
-  var ev;
+
   while((opponent)&amp;&amp; not(opponent.dead || opponent.hidden || opponent.concealed)&amp;&amp;(dist(me,opponent)&lt; 25))
     WalkAwayFrom(opponent);
     repeat
@@ -61,7 +61,7 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
+
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/main/mainLoopCrier.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/mainLoopCrier.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/mainLoopCrier.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -1,5 +1,4 @@
 function main_AI_loop()
-  var ev;
   var wanders := 60;
   var next_wander := ReadGameClock();
   EnableMainEvents();

Modified: trunk/096/pkg/mobiles/oldAI/main/mainLoopGood.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/mainLoopGood.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/mainLoopGood.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -1,5 +1,4 @@
 function main_AI_loop(next_wander := 0)
-  var ev;
   var wanders := 60;
   /*var next_loot := ReadGameClock() + 20;*/  // variable unused in this AI type
   EnableMainEvents();

Modified: trunk/096/pkg/mobiles/oldAI/main/mainLoopImmobile.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/mainLoopImmobile.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/mainLoopImmobile.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -1,6 +1,5 @@
 function main_AI_loop()
   var next_wander := ReadGameClock() + 10;
-  var ev;
   var wanders := 120;
   EnableMainEvents();
   while(1)

Modified: trunk/096/pkg/mobiles/oldAI/main/mainLoopKillAny.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/mainLoopKillAny.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/mainLoopKillAny.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -1,5 +1,4 @@
 function main_AI_loop()
-  var ev;
   var wanders := 60;
   var next_loot := ReadGameClock() + 20;
   EnableMainEvents();
@@ -53,7 +52,7 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
+  waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/main/mainLoopMeek.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/mainLoopMeek.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/mainLoopMeek.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -1,5 +1,4 @@
 function main_AI_loop()
-  var ev;
   var wanders := 60;
   var next_loot := ReadGameClock() + 20;
   var next_wander := 0;
@@ -64,7 +63,7 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
+  waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/main/mainLoopSheep.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/mainLoopSheep.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/mainLoopSheep.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -4,7 +4,6 @@
 
 
 function main_AI_loop()
-  var ev;
   var wanders := 60;
   var next_wander := 0;
   var next_regrow := ReadGameClock() + 1800;
@@ -54,7 +53,7 @@
 endfunction
 
 function RunLikeHell(opponent)
-  var ev;
+  opponent := opponent;
   while((opponent) &amp;&amp; not (opponent.dead || opponent.hidden || opponent.concealed) &amp;&amp; (dist(me,opponent) &lt; 25))
         RunAwayFrom(opponent);
     repeat
@@ -88,7 +87,7 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
+  waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/main/mainLoopWolf.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/mainLoopWolf.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/mainLoopWolf.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -1,5 +1,4 @@
 function main_AI_loop()
-  var ev;
   var wanders := 60;
   var hatelist := &quot;animal cat barker tamed chicken sheep bird&quot;;
   EnableMainEvents();
@@ -63,12 +62,12 @@
 endfunction
 
 function get_help( opponent)
-  var ev := struct;
-  ev.+type := EVID_ALL_ATTACK_CMD;
-  ev.+source := opponent;
+  var newev := struct;
+  newev.+type := EVID_ALL_ATTACK_CMD;
+  newev.+source := opponent;
   foreach critter in ListMobilesNearLocation( me.x, me.y, me.z, HALT_THRESHOLD, me.realm)
     if((critter.npctemplate == me.npctemplate) &amp;&amp;(critter.script != &quot;tamed&quot;) &amp;&amp;(!critter.warmode))
-      SendEvent(critter, ev);
+      SendEvent(critter, newev);
     endif
   endforeach
 endfunction
@@ -79,7 +78,7 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
+  waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/main/packKillPCsLoop.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/packKillPCsLoop.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/packKillPCsLoop.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -1,5 +1,4 @@
 function main_AI_loop()
-  var ev;
   var wanders := 60;
   var next_loot := ReadGameClock() + 20;
   EnableMainEvents();
@@ -111,7 +110,7 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
+  waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/main/sleepMode.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/sleepMode.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/sleepMode.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -19,7 +19,6 @@
   EnableEvents(SYSEVENT_ENTEREDAREA,18);
   EnableEvents(SYSEVENT_ENGAGED);
   EnableEvents(SYSEVENT_DAMAGED);
-  var ev;
   while (1)
     ev := os::wait_for_event(30);
     repeat

Modified: trunk/096/pkg/mobiles/oldAI/main/sleepModeCow.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/sleepModeCow.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/sleepModeCow.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -19,7 +19,6 @@
   EnableEvents(SYSEVENT_ENTEREDAREA,18);
   EnableEvents(SYSEVENT_ENGAGED);
   EnableEvents(SYSEVENT_DAMAGED);
-  var ev;
   EnableEvents(SYSEVENT_DOUBLECLICKED);
   while (1)
     ev := os::wait_for_event(30);

Modified: trunk/096/pkg/mobiles/oldAI/main/sleepModeSheep.inc
===================================================================
--- trunk/096/pkg/mobiles/oldAI/main/sleepModeSheep.inc	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/main/sleepModeSheep.inc	2005-10-29 20:13:13 UTC (rev 699)
@@ -19,7 +19,6 @@
   EnableEvents(SYSEVENT_ENTEREDAREA,18);
   EnableEvents(SYSEVENT_ENGAGED);
   EnableEvents(SYSEVENT_DAMAGED);
-  var ev;
   EnableEvents(SYSEVENT_DOUBLECLICKED);
   while (1)
     ev := os::wait_for_event(30);

Modified: trunk/096/pkg/mobiles/oldAI/meek.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/meek.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/meek.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -40,6 +40,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
 
@@ -71,7 +73,7 @@
 
     EnableEvents( SYSEVENT_DISENGAGED );
 
-    var waittime;
+    waittime := 0;
     var loops := 0;
 
     outer:
@@ -83,7 +85,7 @@
 		break outer;
 	endif
 
-        var ev := wait_for_event( waittime );
+        ev := wait_for_event( waittime );
         case (ev.type)
             SYSEVENT_DISENGAGED:
                 if (ev.source.serial == opponent.serial)

Modified: trunk/096/pkg/mobiles/oldAI/merchant.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/merchant.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/merchant.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -59,7 +59,7 @@
     me.frozen := 1;
   endif
   var next_wander := ReadGameClock() + 10;
-  const loops := 0;
+  var res := 0;
   while (1)
     var ev;
     ev := os::wait_for_event(120);
@@ -73,13 +73,13 @@
                                   else
                                     if(txt[&quot;buy&quot;])
                                       TurnToward(ev.source);
-                                      var res := SendBuyWindow(ev.source, inv_fs, me, inv_pb);
+                                      res := SendBuyWindow(ev.source, inv_fs, me, inv_pb);
                                     elseif(txt[&quot;sell&quot;])
                                       if(GetObjProperty(inv_rs, &quot;MyGold&quot;) &gt;= 1000)
                                         TurnToward(ev.source);
                                         var count := ModifyPCSellList(merchant_type, (ev.source).backpack);
                                         if(count &gt;= 1)
-                                          var res := SendSellWindow(ev.source, me, inv_fs, inv_pb, inv_1c);
+                                          res := SendSellWindow(ev.source, me, inv_fs, inv_pb, inv_1c);
                                         else
                                           PrintTextAbovePrivate(me, &quot;You don't have anything I would be interested in.&quot;, ev.source);
                                         endif

Modified: trunk/096/pkg/mobiles/oldAI/packFirebreather.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/packFirebreather.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/packFirebreather.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -24,6 +24,8 @@
 var FLAME_STRENGTH := npccfgfile[me.npctemplate].flamestrength;
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   SetWarMode( 0 );

Modified: trunk/096/pkg/mobiles/oldAI/poisonElemental.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/poisonElemental.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/poisonElemental.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -27,6 +27,8 @@
 var npcfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npcfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npcfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   if (GetObjProperty(me, &quot;frozen&quot;))
@@ -89,6 +91,7 @@
 endfunction
 
 function prepare_for_fight(opponent)
+  opponent := opponent;
   if(!CInt(GetObjProperty(me, &quot;mr&quot;)))
 	CastSpell(me,me,&quot;reflect&quot;);
   endif

Modified: trunk/096/pkg/mobiles/oldAI/poisonKillPCs.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/poisonKillPCs.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/poisonKillPCs.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -21,6 +21,8 @@
 var npccfgfile := ReadConfigFile(&quot;::npcdesc&quot;);
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   SetWarMode( 0 );

Modified: trunk/096/pkg/mobiles/oldAI/sheep.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/sheep.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/sheep.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -21,6 +21,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   SetWarMode( 0 );

Modified: trunk/096/pkg/mobiles/oldAI/slime.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/slime.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/slime.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -23,6 +23,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   colorme();

Modified: trunk/096/pkg/mobiles/oldAI/spellFire.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/spellFire.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/spellFire.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -27,6 +27,8 @@
 var FLAME_STRENGTH := npccfgfile[me.npctemplate].flamestrength;
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   if (GetObjProperty(me, &quot;frozen&quot;))

Modified: trunk/096/pkg/mobiles/oldAI/spellKillPCs.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/spellKillPCs.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/spellKillPCs.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -28,6 +28,8 @@
 var FLAME_STRENGTH := npccfgfile[me.npctemplate].flamestrength;
 var idlesnd1       := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2       := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   if(GetObjProperty(me, &quot;frozen&quot;))

Modified: trunk/096/pkg/mobiles/oldAI/spiders.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/spiders.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/spiders.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -23,6 +23,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
 

Modified: trunk/096/pkg/mobiles/oldAI/townGuard.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/townGuard.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/townGuard.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -149,7 +149,7 @@
   PlaySoundEffect(me, 0x01ff);
   PrintTextAbove(me, &quot;Thou shalt regret thine actions, swine!&quot;);
   SetObjProperty(opponent, &quot;guardkill&quot;, 1);
-  var oldprio := set_priority(50);
+  set_priority(50);
   if(tries &gt;= 5)
     PerformAction(me, 13);
     ApplyRawDamage(opponent, GetHP(opponent) + 10);
@@ -230,6 +230,7 @@
 endfunction
 
 function prepare_for_fight(opponent)
+  opponent := opponent;
   DisableMainEvents();
   EnableCombatEvents();
 endfunction
@@ -256,6 +257,7 @@
 endfunction
 
 function in_combat_event_loop(opponent, loops)
+  opponent := opponent;
   var allpoisons := GetAllPoisons(me);
   if(allpoisons.size() &gt; 0)
     sleep(1);

Modified: trunk/096/pkg/mobiles/oldAI/townHealer.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/townHealer.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/townHealer.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -65,7 +65,7 @@
     SetObjProperty(me, &quot;MyGold&quot;, 1000);
   endif
   var next_wander := ReadGameClock() + 10;
-  const loops := 0;
+  var res := 0;
   while (1)
     var ev;
     ev := os::wait_for_event(120);
@@ -81,7 +81,7 @@
                                   else
                                     if(ev.text[&quot;buy&quot;])
                                       TurnToward(ev.source);
-                                      var res := SendBuyWindow(ev.source, inv_fs, Self(), inv_pb);
+                                      res := SendBuyWindow(ev.source, inv_fs, Self(), inv_pb);
                                       foreach thing in ListRootItemsInContainer((ev.source).backpack)
                                         EraseObjProperty(thing, &quot;ClearRestock&quot;);
                                       endforeach
@@ -89,7 +89,7 @@
                                       if(GetObjProperty(me, &quot;MyGold&quot;) &gt;= 1000)
                                         TurnToward(ev.source);
                                         ModifyPCSellList(merchant_type, (ev.source).backpack);
-                                        var res := SendSellWindow(ev.source, Self(), inv_fs, inv_pb, inv_1c);
+                                        res := SendSellWindow(ev.source, Self(), inv_fs, inv_pb, inv_1c);
                                         if(res)
                                           PrintTextAbovePrivate(Self(), &quot;You don't have anything I would be interested in.&quot;, ev.source);
                                         endif
@@ -144,7 +144,7 @@
 
 function lookiehere(who)
   var mobiles := ListMobilesNearLocation(who.x, who.y, who.z, 15, who.realm);
-  var guard, num, i, hogcall, guardzone, element, range, timer, elem;
+  var num, hogcall, guardzone, element, range, timer, elem;
   var cfgfile := ReadConfigFile(&quot;::gzone&quot;);
   var entries := GetConfigStringKeys(cfgfile);
   foreach listing in entries

Modified: trunk/096/pkg/mobiles/oldAI/townPerson.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/townPerson.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/townPerson.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -10,7 +10,7 @@
 include &quot;:npcutils:anchors&quot;;
 include &quot;include/dist&quot;;
 include &quot;:oldAI:main/mainLoopGood&quot;;
-include &quot;:oldAI:combat/warriorCombatEvent&quot;;
+include &quot;:oldAI:combat/warriorcombatevent&quot;;
 include &quot;:oldAI:combat/fight&quot;;
 include &quot;:oldAI:main/loot&quot;;
 include &quot;:npcutils:vetement&quot;;
@@ -22,6 +22,8 @@
 include &quot;:begging:begging&quot;;
 
 const HALT_THRESHOLD := 2;
+var waittime := 0;
+var ev := 0;
 
 program CastleGuard()
   drop_anchor();
@@ -33,7 +35,6 @@
   endif
   SetWarMode( 0 );
   set_priority(10);
-  var ev;
   var looter := GetObjProperty( me, &quot;looter&quot;);
   var next_wander := ReadGameClock() + 10;
   var txt;
@@ -191,11 +192,14 @@
 endfunction
 
 function GoldForSkillGain( npc_skill, pc_skill, skillid )
+  skillid := skillid;
   var maxskill := npc_skill - pc_skill;
   return maxskill*10;
 endfunction
 
 function SkillGainForGold(npc_level, pc_level, trainskillid, goldreceived)
+  npc_level := npc_level;
+  trainskillid := trainskillid;
   return (goldreceived/10) + pc_level;
 endfunction
 
@@ -205,7 +209,7 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
+  waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/undead.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/undead.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/undead.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -69,7 +69,7 @@
     opponent := 0;
 	return;
   endif
-  var oldprio := set_priority(50);
+  set_priority(50);
   SetOpponent(opponent);
   prepare_for_fight(opponent);
   TurnToward(opponent);
@@ -127,6 +127,7 @@
 endfunction
 
 function prepare_for_fight(opponent)
+  opponent := opponent;
   DisableMainEvents();
   EnableCombatEvents();
 endfunction

Modified: trunk/096/pkg/mobiles/oldAI/undeadKillPCs.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/undeadKillPCs.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/undeadKillPCs.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -23,6 +23,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   SetWarMode( 0 );

Modified: trunk/096/pkg/mobiles/oldAI/vortexAI.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/vortexAI.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/vortexAI.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -20,9 +20,10 @@
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
 var masterserial := GetObjProperty(me, &quot;master&quot;);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
-  var master;
   foreach char in EnumerateOnlineCharacters()
     if(char.serial == masterserial)
       master := char;
@@ -47,7 +48,6 @@
 endfunction
 
 function main_AI_loop()
-  var ev;
   var wanders := 0;
   EnableMainEvents();
   look_around();
@@ -78,13 +78,12 @@
     opponent := 0;
 	return;
   endif
-  var oldprio := set_priority(50);
+  set_priority(50);
   SetOpponent(opponent);
   prepare_for_fight(opponent);
   TurnToward(opponent);
   var loops := 0;
-  var ev;
-  var waittime := 0;
+  waittime := 0;
   while((opponent) &amp;&amp; (!opponent.dead) &amp;&amp; (!opponent.hidden) &amp;&amp; (!opponent.concealed) &amp;&amp; (dist(me,opponent) &lt; 20))
 	if(!CloseDistance(opponent))
 	  loops := loops + 1;
@@ -148,7 +147,7 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
+  waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;

Modified: trunk/096/pkg/mobiles/oldAI/wolf.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/wolf.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/wolf.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -22,6 +22,8 @@
 var npccfgfile := ReadConfigFile( &quot;::npcdesc&quot; );
 var idlesnd1 := CInt(npccfgfile[me.npctemplate].idlesound1);
 var idlesnd2 := CInt(npccfgfile[me.npctemplate].idlesound2);
+var waittime := 0;
+var ev := 0;
 
 program KillPlayers()
   SetWarMode( 0 );

Modified: trunk/096/pkg/mobiles/oldAI/worker.src
===================================================================
--- trunk/096/pkg/mobiles/oldAI/worker.src	2005-10-29 19:28:27 UTC (rev 698)
+++ trunk/096/pkg/mobiles/oldAI/worker.src	2005-10-29 20:13:13 UTC (rev 699)
@@ -10,7 +10,7 @@
 include &quot;:npcutils:anchors&quot;;
 include &quot;include/dist&quot;;
 include &quot;:oldAI:main/mainLoopGood&quot;;
-include &quot;:oldAI:combat/warriorCombatEvent&quot;;
+include &quot;:oldAI:combat/warriorcombatevent&quot;;
 include &quot;:oldAI:combat/fight&quot;;
 include &quot;:oldAI:main/loot&quot;;
 include &quot;:npcutils:vetement&quot;;
@@ -68,10 +68,8 @@
   endif
   SetWarMode( 0 );
   set_priority(10);
-  var ev;
   var looter := GetObjProperty( me, &quot;looter&quot;);
-  var next_wander := ReadGameClock() + 10;
-  var txt;
+  next_wander := ReadGameClock() + 10;
   var ph := SplitWords(me.name);
   var myname := lower(ph[1]);
   cost := GetObjProperty(me, &quot;HireCost&quot;);
@@ -281,11 +279,14 @@
 endfunction
 
 function GoldForSkillGain(npc_skill, pc_skill, skillid)
+  skillid := skillid;
   var maxskill := npc_skill - pc_skill;
   return maxskill*10;
 endfunction
 
 function SkillGainForGold(npc_level, pc_level, trainskillid, goldreceived)
+  npc_level := npc_level;
+  trainskillid := trainskillid;
   return (goldreceived/10) + pc_level;
 endfunction
 
@@ -295,7 +296,7 @@
   var ly := holder[2];
   var loops := 0;
   var opponent;
-  var waittime := 0;
+  waittime := 0;
   while(1)
 	if(!CloseIn(me, lx, ly))
 	  loops := loops + 1;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000672.html">[Poldistro-svn] r698 - in trunk/096/pkg/mobiles/oldAI: . combat main
</A></li>
	<LI>Next message: <A HREF="000674.html">[Poldistro-svn] r700 - in trunk/096/pkg/mobiles/oldAI: . main
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#673">[ date ]</a>
              <a href="thread.html#673">[ thread ]</a>
              <a href="subject.html#673">[ subject ]</a>
              <a href="author.html#673">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/poldistro-svn">More information about the Poldistro-svn
mailing list</a><br>
</body></html>
