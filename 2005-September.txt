From austin at berlios.de  Thu Sep  1 00:00:23 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 1 Sep 2005 00:00:23 +0200
Subject: [Poldistro-svn] r26 - in trunk/096/pkg/mobiles: . ai_brain ai_brain/config ai_brain/include ai_brain/include/braincore
Message-ID: <200508312200.j7VM0NMt008696@sheep.berlios.de>

Author: austin
Date: 2005-09-01 00:00:23 +0200 (Thu, 01 Sep 2005)
New Revision: 26

Added:
   trunk/096/pkg/mobiles/ai_brain/
   trunk/096/pkg/mobiles/ai_brain/brain.src
   trunk/096/pkg/mobiles/ai_brain/config/
   trunk/096/pkg/mobiles/ai_brain/config/hatelist.cfg
   trunk/096/pkg/mobiles/ai_brain/config/icp.cfg
   trunk/096/pkg/mobiles/ai_brain/docs/
   trunk/096/pkg/mobiles/ai_brain/include/
   trunk/096/pkg/mobiles/ai_brain/include/braincore/
   trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
   trunk/096/pkg/mobiles/ai_brain/include/eventid.inc
   trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc
   trunk/096/pkg/mobiles/ai_brain/include/npc_settings.inc
   trunk/096/pkg/mobiles/ai_brain/include/npc_util.inc
   trunk/096/pkg/mobiles/ai_brain/pkg.cfg
Log:


Added: trunk/096/pkg/mobiles/ai_brain/brain.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/brain.src	2005-08-31 21:40:47 UTC (rev 25)
+++ trunk/096/pkg/mobiles/ai_brain/brain.src	2005-08-31 22:00:23 UTC (rev 26)
@@ -0,0 +1,324 @@
+/*===============================================================
+* Current Version
+* BRAIN.SRC - v5.0
+* Updated 8/31/2005 7:48AM
+*
+* NPC AI-Script to control all non-setup actions. Acts as the "brain"
+* and fires off external scripts that act as the "nerves" of the NPC.
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+use npc;
+use cfgfile;
+use polsys;
+
+include "include/sysevent";
+include ":ai_brain:include/eventid";
+include ":ai_brain:include/npc_commands";
+include ":ai_brain:include/npc_settings";
+include ":ai_brain:include/npc_util";
+include ":ai_brain:include/braincore/error";
+include ":ai_brain:include/braincore/movement";
+include ":ai_brain:include/braincore/setup";
+
+//
+// * Global variables
+//
+var npc := Self();
+var idle_ticks := 0;
+var sleep_mode := 0;
+var g_settings := dictionary;
+
+program BrainAI()
+	//Run setup steps for the npc.
+	set_critical(1);
+	InitializeSettings();
+	InitializeEvents();
+	set_critical(1);
+	StartupScripts();
+	
+	while ( npc )
+		var ev := wait_for_event(g_settings["cycle_wait"]);
+		
+		if ( sleep_mode )
+			
+		ProcessEvent(ev);
+	endwhile
+endprogram
+
+function ProcessEvent(byref ev)
+	var old_priority := set_priority(25);
+	
+	case( ev.type )
+		//Check movement first, since its the event
+		//that seems to be sent most often.
+
+		// Move NPC
+		// .source	: From/To whom/what?
+		// .speed	: Walk/Run
+		// .direction	: Away/Towards
+		// .loop	: Number of times to attempt to loop the movement.
+		NPCEVENT_MOVE:
+			Movement(ev);
+		
+		// Instructs the npc to walk toward an XY coordinate.
+		// .x and .y	: From/To  coordinates
+		// .speed	: Walk/Run
+		// .direction	: Away/Towards
+		// .loop	: Number of times to attempt to loop the movement.
+		NPCEVENT_MOVE_XY:
+			MovementXY(ev);
+		
+		// Triggered when a mobile enter's the npcs "reaction_range".
+		// .source	: What entered the area
+		SYSEVENT_ENTEREDAREA:
+			if ( g_settings.exists("enter_react_script") )
+				var process := 0; //GetNerve("EnterReaction");
+				if ( !process )
+					//StartNerve("EnterReaction", g_settings["enter_react_script"], {me, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+		
+		// Triggered when a mobile leaves the npc's "leave_react_range".
+		// .source	: What left the area
+		SYSEVENT_LEFTAREA:
+			if ( g_settings.exists("leave_react_script") )
+				var process := 0; //GetNerve("LeaveReaction");
+				if ( !process )
+					//StartNerve("LeaveReaction", g_settings["leave_react_script"], {me, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+		
+		// Sent when something targets the npc to begin combat or
+		// when something has damaged the npc.
+		// .source	: What caused the damage or engaged the npc
+		// For SYSEVENT_DAMAGED
+		// .damaged	: Integer amount of damage.
+		SYSEVENT_ENGAGED:
+		SYSEVENT_DAMAGED:
+			if ( g_settings.exists("combat_script") )
+				if ( (ev.source).ISA(POLCLASS_MOBILE) )
+					var process := 0; //GetNerve("Combat");
+					if ( !process )
+						//StartNerve("Combat", g_settings["combat_script"], {me, ev, settings});
+					else
+						process.SendEvent(ev);
+					endif
+				endif
+			endif
+		
+		// Instructs the npc to run its disengage nerve.
+		// When something attacking it goes out of warmode, this is run.
+		// .source	: What was targetting this npc but has now left combat mode.
+		SYSEVENT_DISENGAGED:
+			if ( g_settings.exists("disengage_script") )
+				var process := 0; //GetNerve("Disengage");
+				if ( !process )
+					//StartNerve("Disengage", g_settings["disengage_script"], {me, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+		
+		// When speech is made by a player, this nerve is used.
+		// Note: The NPC function Say() doesnt yet pass around the speech event.
+		// .source	: Where the speech originated.
+		// .text	: The actual speech
+		// extra 095 stuff
+		// .uc_text	: a "Unicode array" of 2-byte "Big Endian" integers.
+		// .langcode	: a 3-character, uppercase language code.
+		// .texttype	: "yell", "whisper", "emote", "default".
+		SYSEVENT_SPEECH:
+			if( g_settings.exists("listen_script") )
+				var process := 0; //GetNerve("Speech");
+				if ( !process )
+					//StartNerve("Speech", g_settings["listen_script"], {me, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+		
+		// Instructs the npc to run its double click script.
+		// Run when the npc is double clicked by a player.
+		// .source	: What sent the double click
+		SYSEVENT_DOUBLECLICKED:
+			if ( g_settings.exists("dbl_click_script") )
+				if ( Distance(ev.source, npc) <= g_settings["dbl_click_range"] )
+					var process := 0; //GetNerve("DblClick");
+					if ( !process )
+						//StartNerve("DblClick", g_settings["dbl_click_script"], {npc, ev, settings});
+					else
+						process.SendEvent(ev);
+					endif
+				endif
+			endif
+			
+		// The NPC is a merchant, and has sold or purchased something.
+		// Both sold and bought events are sent to this same nerve.
+		// The best thing to do is fork it into two functions inside the
+		// nerve script to handle each event type.
+		// MERCHANT_SOLD means the merchant sold an item to the player.
+		// MERCHANT_BOUGHT means the merchatn bought something from the player.
+		//
+		// .source	: Who the merchant is selling to/buying from.
+		// .amount	: Gold amount for the sale/purchase.
+		SYSEVENT_MERCHANT_SOLD:
+		SYSEVENT_MERCHANT_BOUGHT:
+			if ( g_settings.exists("merchant_script") )
+				var process := 0; //GetNerve("Merchant");
+				if ( !process )
+					//StartNerve("Merchant", g_settings["merchant_script"], {npc, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+		
+		// Someone has dragged an item onto the npc.
+		// .source	: What dragged the item over the npc.
+		// .item	: The item being given to the npc.
+		SYSEVENT_ITEM_GIVEN:
+			if ( g_settings.exists("give_item_script") )
+				var process := 0; //GetNerve("GiveItem");
+				if ( !process )
+					//StartNerve("GiveItem", g_settings["give_item_script"], {npc, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+				
+		// Instructs the npc to run its flee script.
+		// .source	: What to flee from.
+		NPCEVENT_FLEE:
+			if ( g_settings.exists("flee_script") )
+				var process := 0; //GetNerve("Flee");
+				if ( !process )
+					//StartNerve("Flee", g_settings["flee_script"], {npc, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+			
+		// The npc has killed its opponent and
+		// the combat script has sent the winfight event
+		// .source	: Defeated foe!
+		NPCEVENT_WINFIGHT:
+			if ( g_settings.exists("win_script") )
+				var process := 0; //GetNerve("Win");
+				if ( !process )
+					//StartNerve("Win", g_settings["win_script"], {npc, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+			
+		//A nerve has instructed the brain to kill another nerve or its self.
+		// .name	: Nerve name
+		NPCEVENT_ENDNERVE:
+			//KillNerve(ev.name);
+			
+		//A nerve has instructed the brain to start another nerve.
+		// .name	: Nerve name
+		// .script	: Nerve script
+		// .data	: array of goodies
+		NPCEVENT_STARTNERVE:
+			//StartNerve(ev.name, ev.script, ev.data);
+		
+		// Set a new opponent!
+		// NOTE: Auto-sets Warmode=1!
+		// .source	: Opponent (mobile)
+		NPCEVENT_OPPONENT:
+			SetOpponent(ev.source);
+		
+		// Say something
+		// .text	: Speech content
+		NPCEVENT_SPEAK:
+			say(ev.text);
+		
+		// Turn toward something
+		// .source	: Target (anything)
+		// .direction	: NETURN_TOWARD or NETURN_AWAY
+		NPCEVENT_TURN:
+			case (ev.direction)
+				NETURN_TOWARD:
+					TurnToward(ev.source);
+				NETURN_AWAY:
+					TurnAwayFrom(ev.source);
+			endcase
+		
+		// Face towards or away from XY coordinates.
+		// .x and .y replace .source for TURN_XY
+		// .direction	: NETURN_TOWARD or NETURN_AWAY
+		NPCEVENT_TURN_XY:
+			case (ev.direction)
+				NETURN_TOWARD:
+					TurnTowardLocation(ev.x, ev.y);
+				NETURN_AWAY:
+					TurnAwayFromLocation(ev.x, ev.y);
+			endcase
+		
+		// Set WarMode state
+		// NOTE: Auto-clears Opponent if turned off!
+		// .value : 0=Off. 1=On.
+		NPCEVENT_WARMODE:
+			SetWarmode( ev.value );
+		
+		// Wander somewhere
+		NPCEVENT_WANDER:
+	   		Wander();
+	   	
+	   	// Force the npc to go into its sleep mode.
+	   	// If the next event in the queue tells it to wake up,
+	   	// this command will be useless.
+	   	NPCEVENT_SLEEP:
+	   		//idle_ticks := g_settings["idle_ticks"]+1;
+	   	
+	   	// Force the npc out of sleep mode.
+	   	NPCEVENT_WAKEUP:
+	   		//sleep_mode := 0;
+	   		//idle_ticks := 0;
+	   		
+	   	// Forward an event from one nerve to another.
+	   	// .NerveName	: The name of the nerve to forward the event to.
+	   	// .mask	: Type of event for the nerve to receive.
+	   	// .data	: Data to forward to the nerve.
+	   	NPCEVENT_FWDNERVE:
+	   		var process := 0; //GetNerve(ev.NerveName);
+			if ( process )
+				process.SendEvent(ev);
+			endif
+			
+		// If the event .type is unknown, send it to the
+		// npc's "virtual" nerve if it has one.
+	   	default:
+	   		if ( g_settings.exists("virtual_nerve") )
+	   			var process := 0; //GetNerve("Virtual");
+				if ( !process )
+					//StartNerve("Virtual", g_g_settings["virtual_nerve"], {npc, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+	   endcase
+
+	   // If the event has a .process, reply to it by sending
+	   // an event with .type being the NPCEVENT_DONE constant
+	   // and telling it what event it sent that has finished
+	   // being processed.
+	   if ( ev.process )
+	   	var temp := struct;
+	   	temp.+type := NPCEVENT_DONE;
+	   	temp.+source := ev.type;
+	   	(ev.process).SendEvent(temp);
+	   endif
+	   
+	   set_priority(old_priority);
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/config/hatelist.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/config/hatelist.cfg	2005-08-31 21:40:47 UTC (rev 25)
+++ trunk/096/pkg/mobiles/ai_brain/config/hatelist.cfg	2005-08-31 22:00:23 UTC (rev 26)
@@ -0,0 +1,10 @@
+HateList Dog
+{
+	Hates	cat
+	Hates	bird
+	Hates	chicken
+}
+
+HateList Wolf
+{
+	Hates	C
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/config/icp.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/config/icp.cfg	2005-08-31 21:40:47 UTC (rev 25)
+++ trunk/096/pkg/mobiles/ai_brain/config/icp.cfg	2005-08-31 22:00:23 UTC (rev 26)
@@ -0,0 +1,30 @@
+ICP Register
+{
+	Name		Brain AI - Krane Edition
+	Version		5.0
+	Description	Advanced artificial intelligence system that allows NPCs to perform multiple actions at the same time. [P]
+	Description	The name gives credit to the Ninja Turtle's villian [P] 
+	Description	sometimes the bad guys deserve respect because of all the crap they put up with.
+	
+	Creator		Austin
+	C_Email		Austin at tsse.net
+	
+	Maintainer	Austin
+	M_Email		Austin at tsse.net
+	
+	//Script	cmdlevel path
+			
+	//TextCmd	cmdlevel path
+	TextCmd		3 :control:textcmd/gm/attack
+	TextCmd		3 :control:textcmd/gm/cmassacre
+	TextCmd		3 :control:textcmd/gm/createnpc
+	TextCmd		3 :control:textcmd/gm/makeswarm
+	TextCmd		3 :control:textcmd/gm/massacre
+	TextCmd		3 :control:textcmd/gm/npcsleep
+	TextCmd		3 :control:textcmd/gm/npcwipe
+	TextCmd		3 :control:textcmd/gm/puttosleep
+	TextCmd		3 :control:textcmd/gm/removenpc
+	TextCmd		3 :control:textcmd/gm/resetnpcs
+	TextCmd		3 :control:textcmd/gm/restartnpc
+	TextCmd		3 :control:textcmd/gm/sendevent
+}

Added: trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc	2005-08-31 21:40:47 UTC (rev 25)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc	2005-08-31 22:00:23 UTC (rev 26)
@@ -0,0 +1,66 @@
+/*===============================================================
+* Current Version
+* ERROR.INC - v1.0
+* Updated 8/31/2005 5:08AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+
+/*
+ * FatalError(errmsg)
+ *
+ * Purpose
+ * Logs an error message and then kills the npc.
+ *
+ * Parameters
+ * errmsg:	Error message - reason for removing the npc.
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function FatalError(errmsg)
+	set_critical(1);
+	
+	PrintTextAbove(npc, errmsg, _DEFAULT_TEXT_FONT, 32);
+	
+	BrainSysLog(errmsg);
+	
+	npc.cmdlevel := 1;
+	npc.concealed := 1;
+	
+	npc.disable("invul");
+	SetObjProperty(npc, "GuardKill", 1);
+	ApplyRawDamage(npc, GetVitalMaximumValue(npc, "Hits"));
+	
+	set_critical(0);
+	
+	return 1;
+endfunction
+
+/*
+ * FatalError(errmsg)
+ *
+ * Purpose
+ * Logs an error message.
+ *
+ * Parameters
+ * errmsg:	Error message
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function BrainSysLog( errmsg )
+	SysLog("NPC Template: " + npc.npctemplate);
+	SysLog("NPC Name    : " + npc.name);
+	SysLog(errmsg );
+	SysLog("------------");
+	
+	return 1;
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc	2005-08-31 21:40:47 UTC (rev 25)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc	2005-08-31 22:00:23 UTC (rev 26)
@@ -0,0 +1,152 @@
+/*===============================================================
+* Current Version
+* MOVEMENT.INC - v1.0
+* Updated 8/30/2005 6:52AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+use npc;
+
+/*
+ * Movement(ev)
+ *
+ * Purpose
+ * Handles NPC movenpcnt to/from an object for the brain.
+ *
+ * Parameters
+ * ev:	Strucuture containing event information.
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function Movement(ev)
+	var old_pri := set_priority(50);
+	
+	case ( ev.speed )
+		NEMOVE_WALK:
+			case ( ev.direction )
+				NEMOVE_AWAY:
+					repeat
+						WalkAwayFrom(ev.source);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+				NEMOVE_TOWARD:
+					repeat
+						WalkToward(ev.source);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+			endcase	
+		NEMOVE_RUN:
+			case( ev.direction )
+				NEMOVE_AWAY:
+					repeat
+						RunAWayFrom(ev.source);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );	
+				NEMOVE_TOWARD:
+					repeat
+						RunToward(ev.source);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+			endcase
+	endcase
+	
+	set_priority(old_pri);
+	
+	return 1;
+endfunction
+
+/*
+ * MovementXY(ev)
+ *
+ * Purpose
+ * Handles NPC movement to/from a coordinate for the brain.
+ *
+ * Parameters
+ * ev:	Strucuture containing event information.
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function MovementXY(ev)
+	var old_pri := set_priority(50);
+	
+	case ( ev.speed )
+		NEMOVE_WALK:
+			case ( ev.direction )
+				NEMOVE_AWAY:
+					repeat
+						WalkAwayFromLocation(ev.x, ev.y);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+				NEMOVE_TOWARD:
+					repeat
+						WalkTowardLocation(ev.x, ev.y);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+			endcase	
+		NEMOVE_RUN:
+			case( ev.direction )
+				NEMOVE_AWAY:
+					repeat
+						RunAwayFromLocation(ev.x, ev.y);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );	
+				NEMOVE_TOWARD:
+					repeat
+						RunTowardLocation(ev.x, ev.y);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+			endcase
+	endcase
+	
+	set_priority(old_pri);
+	
+	return 1;
+endfunction
+
+/*
+ * MoveLoop(ev)
+ *
+ * Purpose
+ * Determines if the npc should continue trying to move
+ * or if something else needs the brain's attention.
+ *
+ * Parameters
+ * ev:	Strucuture containing event information.
+ *
+ * Return value
+ * Returns 1 if the npc may continue moving.
+ *
+ */
+function MoveLoopCheck(byref ev)
+	if ( Events_Waiting() )
+		return 0;
+	elseif ( ev.loop < 1 )
+		return 0;
+	elseif ( npc.frozen )
+		return 0;
+	elseif ( npc.paralyzed )
+		return 0;
+	endif
+	if ( ev.source )
+		// Dont need to worry about distance in an XY movement check. 
+		// It wont run in circles around XY coordinates like it does an object.
+		if ( ev.direction == NEMOVE_TOWARD )
+			if ( Distance(npc, ev.source) <= 1 )
+				return 0;
+			endif
+		endif
+	endif
+	
+	ev.loop := ev.loop-1;
+	
+	return 1;
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-08-31 21:40:47 UTC (rev 25)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-08-31 22:00:23 UTC (rev 26)
@@ -0,0 +1,130 @@
+/*===============================================================
+* Current Version
+* SETUP.INC - v1.0
+* Updated 8/31/2005 4:54AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+/*
+ * InitializeSettings()
+ * 
+ * Purpose
+ * Initializes g_settings in the brain.
+ *
+ * Parameters
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function InitializeSettings()
+	g_settings := NPC_LoadCfgDefaults(npc.npctemplate);
+	g_settings := NPC_LoadCustomSettings(npc, g_settings);
+	g_settings := NPC_GetDefaultSettings(g_settings);
+	
+	return 1;
+endfunction
+
+/*
+ * InitializeEvents()
+ *
+ * Purpose
+ * Enables system events the core sends based on g_settings
+ *
+ * Parameters
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function InitializeEvents()
+	//
+	// * Events that use the core 'speech' range.
+	//
+	if ( g_settings.exists("listen_script") )
+		EnableEvents(SYSEVENT_SPEECH, g_settings["listen_range"]);
+	endif
+	if ( g_settings.exists("ghost_listen_script") )
+		EnableEvents(SYSEVENT_GHOST_SPEECH, g_settings["listen_range"]);
+	endif
+	
+	//
+	// * Events that use the core 'area size' range.
+	//
+	if ( g_settings.exists("enter_react_script") )
+		EnableEvents(SYSEVENT_ENTEREDAREA, g_settings["area_size"]);
+	endif
+	if ( g_settings.exists("leave_react_script") )
+		EnableEvents(SYSEVENT_LEFTAREA, g_settings["area_size"]);
+	endif
+	if ( g_settings.exists("gone_criminal_script") )
+		EnableEvents(SYSEVENT_GONE_CRIMINAL, g_settings["area_size"]);
+	endif
+	
+	//
+	// * Events that do not have a core range check.
+	//
+	if ( g_settings.exists("dbl_click_script") )
+		EnableEvents(SYSEVENT_DOUBLECLICKED, g_settings["dbl_click_range"]);
+	endif
+	if ( g_settings.exists("given_item_script") )
+		EnableEvents(SYSEVENT_ITEM_GIVEN);
+	endif
+	if ( g_settings.exists("disengage_script") )
+		EnableEvents(SYSEVENT_DISENGAGED);
+	endif
+	if ( g_settings.exists("merchant_script") )
+		EnableEvents(SYSEVENT_MERCHANT_BOUGHT);
+		EnableEvents(SYSEVENT_MERCHANT_SOLD);
+	endif
+	if ( g_settings.exists("combat_script") )
+		EnableEvents(SYSEVENT_ENGAGED+SYSEVENT_DAMAGED);
+	endif
+	
+	return 1;
+endfunction
+
+/*
+ * StartupScripts()
+ *
+ * Purpose
+ * Runs the restart_script or init_script. Sets up the npc_info cprop.
+ *
+ * Parameters
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function StartupScripts()
+	if ( GetObjProperty(npc, "npc_info") )
+		//This can only happen if restart() was done on the npc or when POL starts up.
+		
+		SetWarmode(0);
+		//StopNerves();
+		
+		if ( g_settings.exists("restart_script") )
+			var restart_script := Run_Script_To_Completion(g_settings["restart_script"], {npc, g_settings});
+			if ( restart_script.errortext )
+				//KillMe("Restart script failed:"+restart_script.errortext);
+				return 0;
+			endif
+		endif
+	else
+		var npc_info := struct{"npctemplate":=npc.npctemplate, "serial":=npc.serial};
+		SetObjProperty(npc, "npc_info", npc_info);
+		
+		if ( g_settings.exists("init_script") )
+			var init_script := Run_Script_To_Completion(g_settings["init_script"], {npc, g_settings});
+			if ( init_script.errortext )
+				//KillMe("Init script failed:"+init_script.errortext);
+				return 0;
+			endif
+		endif
+	endif
+	
+	return 1;
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/include/eventid.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/eventid.inc	2005-08-31 21:40:47 UTC (rev 25)
+++ trunk/096/pkg/mobiles/ai_brain/include/eventid.inc	2005-08-31 22:00:23 UTC (rev 26)
@@ -0,0 +1,72 @@
+/*===============================================================
+* Current Version
+* EVENTID.INC - v1.0
+* Updated 8/31/2005 5:50AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+//
+// * Custom brain AI event IDs
+//
+const NPCEVENT_MOVE				:= 0xA00003;	// Has NEMOVE_* helper constants
+const NPCEVENT_OPPONENT				:= 0xA00004;	// Set New Opponent (.source)
+const NPCEVENT_SPEAK				:= 0xA00005;	// Speak (.text)
+const NPCEVENT_TURN				:= 0xA00006;	// Turn towards or away from an object
+const NPCEVENT_WARMODE				:= 0xA00007;	// Set WarMode state (.value=0|1)
+const NPCEVENT_WINFIGHT				:= 0xA00008;	// NPC killed '.source' mobile
+const NPCEVENT_FLEE				:= 0xA00009;	// Tell the NPC to flee
+const NPCEVENT_ATTACK				:= 0xA0000A;	// Tell the npc to attack something
+const NPCEVENT_MOVE_XY				:= 0xA0000B;	// Tell the NPC to move to coordinates
+const NPCEVENT_TURN_XY				:= 0xA0000C;	// Tell the NPC to turn towards coordinates
+const NPCEVENT_WANDER				:= 0xA0000D;	// Tell the npc to wander
+
+const NPCEVENT_ENDNERVE				:= 0xA0000F;	// Tell the brain to stop a nerve.
+const NPCEVENT_STARTNERVE			:= 0xA00010;	// Tell the brain to start a nerve.
+const NPCEVENT_DONE				:= 0xA00011;	// Brain tells a nerve that its instruction is done.
+
+const NPCEVENT_SLEEP				:= 0xA00012;	// Tell the brain to go to sleep.
+const NPCEVENT_WAKEUP				:= 0xA00013;	// Tell the brain to wake up.
+
+const NPCEVENT_FWDNERVE				:= 0xA00014;	// Tell the brain to forward an event to a nerve.
+
+//
+// * NPCEVENT_MOVE helper constants (.source = object)
+//
+const NEMOVE_WALK				:= 1;	// .speed (default)
+const NEMOVE_RUN				:= 2;	// .speed
+const NEMOVE_TOWARD 				:= 1;	// .direction (default)
+const NEMOVE_AWAY				:= 2;	// .direction
+
+//
+// * NE_TURN helper constants
+//
+const NETURN_TOWARD				:= 1;
+const NETURN_AWAY				:= 2;
+
+//
+// * AWAKEN CONSTANTS
+// 
+const WAKEUP					:= 0;
+const NOWAKE					:= 1;
+
+//
+// * CLEAR THOUGHT CONSTANTS
+//
+const CLR_BRAIN					:= 1;
+const CLR_NERVE					:= 2;
+const CLR_BOTH					:= 3;
+
+//
+//* NPC.EM constants (only brain can access npc.em)
+//
+// Constants for texttype flags in the AI_Speak() function
+const SPEAK_TEXTTYPE_DEFAULT			:= "default";
+const SPEAK_TEXTTYPE_WHISPER			:= "whisper";
+const SPEAK_TEXTTYPE_YELL			:= "yell";
+
+// Constants for doevent flag in AI_Speak() function
+const SPEAK_DOEVENT_DISABLE			:= 0x0;
+const SPEAK_DOEVENT_ENABLE			:= 0x1;

Added: trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc	2005-08-31 21:40:47 UTC (rev 25)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc	2005-08-31 22:00:23 UTC (rev 26)
@@ -0,0 +1,202 @@
+/*===============================================================
+* Current Version
+* NPC_COMMANDS.INC - v1.0
+* Updated 8/31/2005 6:38AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+
+include "include/sysevent";
+include ":ai_brain:include/eventid";
+
+function AI_ClearThoughts(mobile, flags)
+	var brain	:= flags & CLR_BRAIN;
+	var nerve	:= flags & CLR_NERVE;
+	var both	:= flags & CLR_BOTH;
+	
+	if ( both || brain )
+		brain := mobile.process;
+		brain.clear_event_queue();
+	endif
+	
+	if ( both || nerve )
+		nerve := GetProcess(GetPid());
+		nerve.clear_event_queue();
+	endif
+endfunction
+
+function AI_Move(mobile, object, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_MOVE;
+	ev.+source	:= object;
+	ev.+direction	:= to_from;
+	ev.+speed	:= speed;
+	ev.+WakeUp	:= no_wake;
+	ev.+loop	:= loop;
+	ev.+process	:= GetProcess(GetPid());
+	
+	SendEvent(mobile, ev);
+endfunction
+
+function AI_MoveXY(mobile, x, y, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_MOVE_XY;
+	ev.+x		:= x;
+	ev.+y		:= y;
+	ev.+direction	:= to_from;
+	ev.+speed	:= speed;
+	ev.+WakeUp	:= no_wake;
+	ev.+loop	:= loop;
+	ev.+process	:= GetProcess(GetPid());
+	
+	SendEvent(mobile, ev);
+endfunction
+
+function AI_Wander(mobile, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_WANDER;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+	
+	SendEvent(mobile, ev);
+endfunction
+
+function AI_Turn(mobile, turn_to, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_TURN;
+	ev.+source	:= turn_to;
+	ev.+direction	:= direction;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+	
+	SendEvent(mobile, ev);
+endfunction
+
+function AI_TurnXY(mobile, x, y, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_TURN_XY;
+	ev.+x		:= x;
+	ev.+y		:= y;
+	ev.+direction	:= direction;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+	
+	SendEvent(mobile, ev);
+endfunction
+
+function AI_SetOpponent(mobile, opponent, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_OPPONENT;
+	ev.+source	:= opponent;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+	
+	SendEvent(mobile, ev);
+endfunction
+
+function AI_Warmode(mobile, mode:=1, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_WARMODE;
+	ev.+value	:= mode;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	SendEvent(mobile, ev);
+endfunction
+
+function AI_Speak(mobile, text:="!?", text_type:=SPEAK_TEXTTYPE_DEFAULT, do_event:=SPEAK_DOEVENT_DISABLE, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_SPEAK;
+	ev.+text	:= text;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+	
+	SendEvent(mobile, ev);
+endfunction
+
+function AI_StartNerve(mobile, nerve_name, script_name, data, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_STARTNERVE;
+	ev.+name	:= nerve_name;
+	ev.+script	:= script_name;
+	ev.+data	:= data;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+	
+	SendEvent(mobile, ev);
+endfunction
+
+function AI_EndNerve(mobile, nerve_name, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_ENDNERVE;
+	ev.+name	:= nerve_name;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	SendEvent(mobile, ev);
+endfunction
+
+function AI_WinFight(mobile, opponent, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_WINFIGHT;
+	ev.+source	:= opponent;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+	
+	SendEvent(mobile, ev);
+endfunction
+
+function AI_Attack(mobile, opponent, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= SYSEVENT_ENGAGED;
+	ev.+source	:= opponent;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+	
+	SendEvent(mobile, ev);
+endfunction
+
+function AI_Flee(mobile, opponent, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_FLEE;
+	ev.+source	:= opponent;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+	
+	SendEvent(mobile, ev);
+endfunction
+
+function AI_FowardEvent(mobile, nerve_name, mask, data, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_FWDNERVE;
+	ev.+NerveName	:= nerve_name;
+	ev.+mask	:= mask;
+	ev.+data	:= data;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+	
+	SendEvent(mobile, ev);
+endfunction
+
+function AI_Sleep(mobile)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_SLEEP;
+	ev.+WakeUp	:= NOWAKE;
+	ev.+process	:= GetProcess(GetPid());
+	
+	SendEvent(mobile, ev);
+endfunction
+
+function AI_WakeUp(mobile)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_WAKEUP;
+	ev.+WakeUp	:= WAKEUP;
+	ev.+process	:= GetProcess(GetPid());
+	
+	SendEvent(mobile, ev);
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/include/npc_settings.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_settings.inc	2005-08-31 21:40:47 UTC (rev 25)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_settings.inc	2005-08-31 22:00:23 UTC (rev 26)
@@ -0,0 +1,126 @@
+/*===============================================================
+* Current Version
+* NPC_SETTINGS.INC - v1.0
+* Updated 8/30/2005 7:28AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+use cfgfile;
+
+include ":ai_brain:include/npc_util";
+
+/*
+ * NPC_LoadCfgDefaults(template_name)
+ *
+ * Purpose
+ * Loads settings for a template from npcdesc.cfg
+ *
+ * Parameters
+ * template:	Name of the npc template to load settings for.
+ *
+ * Return value
+ * Returns a dictionary
+ *
+ */
+function NPC_LoadCfgDefaults(template)
+	if ( !template.package )
+		template := NPC_ParseTemplateName(template);
+	endif
+	
+	var npc_cfg := ReadConfigFile(template.package+"npcdesc");
+	var npc_elem := npc_cfg[template];
+	
+	var settings := dictionary;
+	/*
+	 * NPC Settings - Step 1 - npcdesc.cfg defaults.
+	 * Reads in the AISetting lines from the npcdesc.cfg elem.
+	 * Values are stored in packed form.
+	 */
+	foreach setting in GetConfigStringArray(npc_elem, "AISetting")
+		setting := SplitWords(setting);
+		var key := setting[1];
+		var value := setting[2];
+
+		settings[key] := UnPack(value);
+
+		sleepms(2);
+	endforeach
+
+	return settings;
+endfunction
+
+/*
+ * NPC_LoadCustomSettings(npc_ref, settings:=0)
+ * 
+ * Purpose
+ * Loads custom settings that are set on a specific npc.
+ *
+ * Parameters
+ * npc_ref:		Mobile reference
+ * settings:	Optional parameter
+ *		Dictionary read in from LoadNPCCfgDefaults()
+ *		Existing keys will be overwritten with any custom settings.
+ * 
+ * Return value
+ * Returns a dictionary
+ *		
+ */
+function NPC_LoadCustomSettings(npc_ref, settings:=0)
+	if ( Lower(TypeOf(settings)) != "dictionary" )
+		settings := dictionary;
+	endif
+	
+	var cstm_settings := GetObjProperty(npc_ref, "AI_Settings");
+	foreach key in (cstm_settings.keys())
+		var value := cstm_settings[key];
+		if ( value == error )
+			settings.erase(key);
+		else
+			settings[key] := value;
+		endif
+		
+		sleepms(2);
+	endforeach
+	
+	return settings;
+endfunction
+
+/*
+ * NPC_DefaultSettings(settings:=0)
+ *
+ * Purpose
+ * Checks the settings dictionary to make sure required values are set.
+ * If a dictionary is passed, it will check it for required parameters.
+ * If they are not present, they will be set. 
+ * Nothing will be overwritten in this function.
+ *
+ * Parameters
+ * settings:	Optional parameter
+ *		Dictionary read in from NPC_GetDefaultSettings()
+ *
+ * Return value
+ * Returns a dictionary 
+ *
+ */
+function NPC_GetDefaultSettings(settings:=0)
+	if ( Lower(TypeOf(settings)) != "dictionary" )
+		settings := dictionary;
+	endif
+	
+	if ( CInt(settings.exists("cycle_wait")) <= 0 )
+		settings["cycle_wait"] := 10;
+	endif
+	if ( CInt(settings.exists("sleep_time")) <= 0 )
+		settings["sleep_time"] := 1024;
+	endif
+	if ( CInt(settings.exists("idle_ticks")) <= 0 )
+		settings["idle_ticks"] := 5;
+	endif
+		
+	return settings;
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/include/npc_util.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_util.inc	2005-08-31 21:40:47 UTC (rev 25)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_util.inc	2005-08-31 22:00:23 UTC (rev 26)
@@ -0,0 +1,45 @@
+/*===============================================================
+* Current Version
+* NPC_UTIL.INC - v1.0
+* Updated 8/31/2005 4:23AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+/*
+ * NPC_ParseTemplateName(template_name)
+ *
+ * Purpose
+ * Finds the appropriate npcdesc.cfg to load.
+ * This enables npcs to be placed in packages and not just the ::npcdesc file.
+ * ReadConfigFile(":*:npcdesc") does not work in this case because packaged npcs
+ * have the package name at the begining of their .npctemplate member. Reading the
+ * specific config file - helps to avoid possible elem name collisions.
+ *
+ * Parameters
+ * template_name:	Name of the npc template to parse
+ *
+ * Return value
+ * Returns struct .package .template
+ *
+ */
+function NPC_ParseTemplateName(template_name)
+	//Find positions of ":" characters
+	var colon_a := Find(template_name, ":", 1);
+	var colon_b := Find(template_name, ":", 2);
+
+	var parsed := struct{"package", "template"};
+
+	if ( !colon_a || !colon_b )
+		//Not a complete package name - use default npcdesc.cfg
+		parsed.package := "::";
+		parsed.template := template_name;
+	else
+		parsed.package := template_name[colon_a, colon_b];
+		parsed.template := template_name[colon_b+1, Len(template_name)];
+	endif
+
+	return parsed;
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/pkg.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/pkg.cfg	2005-08-31 21:40:47 UTC (rev 25)
+++ trunk/096/pkg/mobiles/ai_brain/pkg.cfg	2005-08-31 22:00:23 UTC (rev 26)
@@ -0,0 +1,14 @@
+Enabled		1
+Name		ai_brain
+
+Version		5.0
+
+CoreRequired	96
+Requires	gumps 1.5
+
+Creator		Austin Heilman
+Email		Austin at tsse.net
+Maintainer	Austin Heilman
+Email		Austin at tsse.net
+
+#Conflicts none



From austin at berlios.de  Thu Sep  1 00:20:47 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 1 Sep 2005 00:20:47 +0200
Subject: [Poldistro-svn] r27 - in trunk/096/pkg/mobiles/ai_brain: . commands commands/gm
Message-ID: <200508312220.j7VMKlmo009947@sheep.berlios.de>

Author: austin
Date: 2005-09-01 00:20:46 +0200 (Thu, 01 Sep 2005)
New Revision: 27

Added:
   trunk/096/pkg/mobiles/ai_brain/commands/
   trunk/096/pkg/mobiles/ai_brain/commands/gm/
   trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/cmassacre.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/makeswarm.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/massacre.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/npcsleep.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/removenpc.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/restartnpc.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/sendevent.src
Log:


Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src	2005-08-31 22:00:23 UTC (rev 26)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src	2005-08-31 22:20:46 UTC (rev 27)
@@ -0,0 +1,23 @@
+//Example: .attack -> Makes an npc attack another mobile.
+use uo;
+use os;
+
+include ":ai_brain:include/NPC_Commands";
+
+program MakeAttack(who)
+	SendSysMessage(who, "Select an npc (attacker).");
+	var targ := target(who);
+	if ( !targ.npctemplate ) 
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	endif
+	
+	SendSysMessage(who, "Select a mobile (defender).");
+	var targ2 := target(who);
+	if ( !targ2.IsA(POLCLASS_MOBILE) )
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	endif
+	
+	AI_Attack(targ, targ2);
+endprogram

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/cmassacre.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/cmassacre.src	2005-08-31 22:00:23 UTC (rev 26)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/cmassacre.src	2005-08-31 22:20:46 UTC (rev 27)
@@ -0,0 +1,19 @@
+//Example: .massacre [radius] - Kills npcs within the radius and leaves the corpses.
+use uo;
+
+include ":gumps:include/requestgump";
+
+program Massacre(who, range)
+	
+	range := CInt(range);
+	if ( !range )
+		range := CInt(RequestGump(who, "Enter the radius to kill npcs.", "", 0));
+	endif
+	
+	foreach mobile in ListMobilesNearLocationEX(who.x, who.y, who.z, CInt(range), LISTEX_FLAG_NORMAL+LISTEX_FLAG_HIDDEN, who.realm)
+		if ( mobile.npctemplate )
+			ApplyRawDamage(mobile, 6000);
+		endif
+		sleepms(2);
+	endforeach
+endprogram
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src	2005-08-31 22:00:23 UTC (rev 26)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src	2005-08-31 22:20:46 UTC (rev 27)
@@ -0,0 +1,257 @@
+use uo;
+use os;
+
+include ":datafile:include/datafile";
+include ":gumps:include/gumps";
+include ":gumps:include/gumps_ex";
+
+const UNCACHE_BTN	:= 0xF000000;
+const DEFAULT_CATEGORY	:= "None";
+
+var data_file := DFOpenDataFile(":ai_brain:createnpc", DF_CREATE);
+
+program MakeNPC(who, template)
+	if ( !template )
+		template := SelectTemplateFromGump(who);
+		if ( !template )
+			return 0;
+		endif
+	endif
+	
+	var targ := TargetCoordinates(who);
+	if ( !targ )
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	endif
+
+	var npc := CreateNPCFromTemplate(template, targ.x, targ.y, targ.z, 0, who.realm);
+	npc.facing := who.facing;
+	if ( npc.errortext )
+		SendSysMessage(who, "Error creating NPC ["+template+"] -> "+npc.errortext);
+		return 0;
+	endif
+endprogram
+
+function SelectTemplateFromGump(who)
+	var input := GFSendGump(who, RetrieveGump("Index"));
+	if ( !input )
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	elseif ( input[UNCACHE_BTN] )
+		foreach elem_name in DFGetElemNames(data_file)
+			data_file.DeleteElement(elem_name);
+			sleepms(2);
+		endforeach
+		
+		SendSysMessage(who, "All createnpc data uncached.");
+		return 0;
+	endif
+		
+	var category_names := GetCategoryNames();
+	input := GFSendGump(who, BuildNPCGump(category_names[input[0]]));
+	if ( !input )
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	endif
+	
+	var elem_names := GetConfigStringKeys(ReadConfigFile("::npcdesc"));
+	return elem_names[input[0]];
+endfunction
+
+function RetrieveGump(category_name)
+	if ( category_name == "Index" )
+		var data_elem := DFFindElement(data_file, "Index");
+		var gump := data_elem.GetProp("Gump");
+		if ( !gump )
+			gump := BuildIndexGump();
+		endif
+		
+		return gump;
+	else
+		var data_elem := DFFindElement(data_file, category_name);
+		var gump := data_elem.GetProp("Gump");
+		if ( !gump )
+			gump := BuildNPCGump(category_name);
+		endif
+		
+		return gump;
+	endif
+endfunction
+
+function GetCategoryNames()
+	var data_elem := DFFindElement(data_file, "Index");
+	var category_names := data_elem.GetProp("CategoryNames");
+	if ( !category_names )
+		category_names := SetupCategoryNames();
+	endif
+	
+	return category_names;
+endfunction
+
+function SetupCategoryNames()
+	var category_names := (SortNPCs().keys());
+	var data_elem := DFFindElement(data_file, "Index", DF_CREATE);
+	data_elem.SetProp("CategoryNames", category_names);
+	
+	return category_names;
+endfunction
+
+function BuildIndexGump()
+	Set_Priority(100);
+	var category_names := GetCategoryNames();
+	
+	var data_elem := DFFindElement(data_file, "Index", DF_CREATE);
+	data_elem.SetProp("CategoryNames", category_names);
+	
+	var bkgnd_silvertrim := GFCfgConst("BackGrounds", "SILVERTRIM");
+	var bkgnd_dark_stone := GFCfgConst("BackGrounds", "DARK_STONE");
+	
+	var gump := GFCreateGump();
+	GFPage(gump, 0);
+	GFResizePic(gump, 0, 0, bkgnd_silvertrim, 300, 480);
+	GFResizePic(gump, 10, 10, bkgnd_dark_stone, 280, 460);
+	var y_pos := 40;
+	var counter := 1;
+	var page_num := 1;
+	GFTextMid(gump, 10, 15, 280, 2100, "NPC Categories");
+	
+	/////
+	GFAddButton(gump, 158, 445, 4002, 4003, GF_CLOSE_BTN, UNCACHE_BTN);
+	GFTextLine(gump, 193, 445, 2100, "Uncache data");
+	/////
+	
+	GFPage(gump, page_num);
+	foreach category_name in (category_names)
+		GFAddButton(gump, 20, y_pos+3, 2117, 2118, GF_CLOSE_BTN, (_category_name_iter));
+		GFTextLine(gump, 40, y_pos, 2100, category_name);
+		y_pos := y_pos+20;
+		counter := counter+1;
+		
+		if ( counter > 20 )
+			counter := 1;
+			y_pos := 40;
+			GFAddButton(gump, 265, 445, 2648, 2649, GF_PAGE_BTN, page_num+1);
+			page_num := page_num+1;
+			GFPage(gump, page_num);
+			GFAddButton(gump, 265, 15, 2650, 2651, GF_PAGE_BTN, page_num-1);
+		endif
+		sleepms(2);
+	endforeach
+	data_elem.SetProp("Gump", gump);
+	
+	return gump;
+endfunction
+
+function BuildNPCGump(category_name)
+	Set_Priority(100);
+	
+	var npc_list := SortNPCs();
+	if ( !npc_list.Exists(category_name) )
+		//Nifty new trick below.
+		return error{"errortext":="Category name does not exist."};
+	endif
+	
+	var data_elem := DFFindElement(data_file, Lower(category_name), DF_CREATE);	
+	npc_list := npc_list[category_name];
+
+	var bkgnd_silvertrim := GFCfgConst("BackGrounds", "SILVERTRIM");
+	var bkgnd_dark_stone := GFCfgConst("BackGrounds", "DARK_STONE");
+	
+	var gump := GFCreateGump();
+	GFPage(gump, 0);
+	GFResizePic(gump, 0, 0, bkgnd_silvertrim, 300, 480);
+	GFResizePic(gump, 10, 10, bkgnd_dark_stone, 280, 460);
+	var y_pos := 40;
+	var counter := 1;
+	var page_num := 1;
+	GFTextMid(gump, 10, 15, 280, 2100, "NPC List - "+category_name);
+	GFPage(gump, page_num);
+	foreach template in (npc_list[category_name])
+		GFAddButton(gump, 20, y_pos+3, 2117, 2118, GF_CLOSE_BTN, template.pos);
+		GFTextLine(gump, 40, y_pos, template.color, template.name);
+		y_pos := y_pos+20;
+		counter := counter+1;
+
+		if ( counter > 21 )
+			counter := 1;
+			y_pos := 40;
+			GFAddButton(gump, 265, 445, 2648, 2649, GF_PAGE_BTN, page_num+1);
+			page_num := page_num+1;
+			GFPage(gump, page_num);
+			GFAddButton(gump, 265, 15, 2650, 2651, GF_PAGE_BTN, page_num-1);
+		endif
+		sleepms(2);
+	endforeach
+	data_elem.SetProp("Gump", gump);
+	
+	return gump;
+endfunction
+
+function SortNPCs()
+	var data_elem := DFFindElement(data_file, "Index", DF_CREATE);
+	var categories :=  data_elem.GetProp("NPCListSorted");
+	if ( categories )
+		return categories;
+	endif
+		
+	var npc_config := ReadConfigFile("::npcdesc");
+	var cfg_keys := GetConfigStringKeys(npc_config);
+
+	categories := dictionary;
+	categories[DEFAULT_CATEGORY] := array{};
+
+	foreach template_name in (cfg_keys)
+		var cfg_elem := npc_config[template_name];
+		var template := struct;
+		template.+name :=template_name;
+		template.+pos :=_template_name_iter;
+		template.+color :=GetNameColor(npc_config[template_name].alignment);
+
+		if ( !cfg_elem.category )
+			categories[DEFAULT_CATEGORY].append(template);
+		else
+			if ( Lower(TypeOf(categories[cfg_elem.category])) != "array" )
+				categories[cfg_elem.category] := array{};
+			endif
+
+			categories[cfg_elem.category].append(template);
+		endif
+		sleepms(2);
+	endforeach
+	
+	// This function is time consuming.. so its results get saved.	
+	data_elem.SetProp("NPCListSorted", categories);
+
+	return categories;
+endfunction
+
+function GetNameColor(reputation)
+	var reputation_cfg := ReadConfigFile("::repsys");
+	//We know the config is there - core won't start without it.
+	var reputation_elem := reputation_cfg["NameColoring"];
+	if ( !reputation_elem )
+		/*
+		 * In most shards the config is setup as
+		 * NameColoring
+		 * {
+		 * // Information here
+		 * }
+		 * **---=[! Needs to be changed to !]=---**
+		 * NameColoring NameColoring
+		 * {
+		 * //Information here
+		 * }
+		 */
+		SysLog("Unable to read in repsys.cfg elem [NameColoring] ->"+reputation_elem.errortext);
+		SysLog("You probably don't have an elem name set for it. Thats naughty!");
+		return 0;
+	endif
+	
+	case ( reputation )
+		"good":		return (GetConfigInt(reputation_elem, "innocent")-1);
+		"neutral":	return (GetConfigInt(reputation_elem, "attackable")-1);
+		"evil":		return (GetConfigInt(reputation_elem, "murderer")-1);
+		 // No alignment for an npc is considered neutral
+		default: 	return (GetConfigInt(reputation_elem, "attackable")-1);
+	endcase
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/makeswarm.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/makeswarm.src	2005-08-31 22:00:23 UTC (rev 26)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/makeswarm.src	2005-08-31 22:20:46 UTC (rev 27)
@@ -0,0 +1,60 @@
+//Example: .makeswarm [templateate] [radius] - Makes npcs on every tile in the radius around you.
+
+use uo;
+use util;
+use os;
+use util;
+
+include ":gumps:include/requestgump";
+
+program MakeSwarm(who, text)
+
+	var template:=0, radius:=0;
+	if ( text ) 
+		text := SplitWords(text);
+		template := text[1];
+		radius := CInt(text[2]);
+	endif
+		
+	if ( !template )
+		template := RequestGump(who, "Enter the npc template name to use.", "");
+		if ( !template )
+			SendSysMessage(who, "Cancelled.");
+			return 0;
+		endif
+	endif
+	if ( !radius )
+		if ( !radius )
+			radius := CInt(RequestGump(who, "Enter the radius to create npcs.", "", 1));
+		endif
+		if ( !radius )
+			SendSysMessage(who, "Radius is less than 1. Setting to 1.");
+			radius := 1;
+		endif
+	endif
+	if ( radius > 10 ) // 100 npcs
+		SendSysMessage(who, "Radius exceeds 10 spaces. Setting to 10.");
+		radius := 10;
+	endif
+	
+	var start_x := who.x - CInt(radius);
+	var start_y := who.y - CInt(radius);
+	var end_x := who.x + CInt(radius);
+	var end_y := who.y + CInt(radius);
+
+	var x, y;
+	var created := 0;
+	
+	for ( x:=start_x; x<=end_x; x:=x+1 )
+		for ( y:=start_y; y<=end_y; y:=y+1 )
+			var npc := CreateNPCFromTemplate(template, x, y, who.z, who.realm);
+			if ( npc )
+				created := created+1;
+			endif
+			
+			sleepms(3);
+		endfor
+	endfor
+	
+	SendSysMessage(who, "Done making npc swarm. Created ["+created+"] npcs.");
+endprogram        

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/massacre.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/massacre.src	2005-08-31 22:00:23 UTC (rev 26)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/massacre.src	2005-08-31 22:20:46 UTC (rev 27)
@@ -0,0 +1,22 @@
+//Example: .massacre [radius] - Kills npcs within the radius.
+use uo;
+use os;
+
+include ":gumps:include/requestgump";
+
+program Massacre(who, range)
+	range := CInt(range);
+	if ( !range )
+		range := CInt(RequestGump(who, "Enter the radius to kill npcs.", "", 0));
+	endif
+	
+	var mobile_list := ListMobilesNearLocationEX(who.x, who.y, who.z, CInt(range), LISTEX_FLAG_NORMAL+LISTEX_FLAG_HIDDEN, who.realm);
+	
+	foreach mobile in (mobile_list)
+		if ( mobile.npctemplate )
+			SetObjProperty(mobile, "GuardKill", 1);
+			ApplyRawDamage(mobile, 6000);
+		endif
+		sleepms(2);
+	endforeach
+endprogram

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/npcsleep.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/npcsleep.src	2005-08-31 22:00:23 UTC (rev 26)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/npcsleep.src	2005-08-31 22:20:46 UTC (rev 27)
@@ -0,0 +1,33 @@
+//Example: .npcsleep -> Forces all npcs to go to sleep.
+use uo;
+use os;
+use polsys;
+
+include ":gumps:include/requestgump";
+include ":ai_brain:include/NPC_Commands";
+
+program PutEveryNPCToSleep(who)
+	var realm_name := RequestGump(who, "Enter the realm name to put npcs to sleep on.", "", who.realm);
+	var realm_info := Realms()[realm_name];
+	if ( !realm_info )
+		SendSysMessage(who, "Invalid realm name.");
+		return 0;
+	endif
+	
+	//To do: Set X2 and Y2 to the realm's maximum values
+	var x1 := 1, y1 := 1, x2 := realm_info.width, y2 := realm_info.height;
+	var z1 := -120, z2 := 120;
+	
+	foreach mobile in ListObjectsInBox(x1, y1, z1, x2, y2, z2, realm_name)
+		if ( mobile.npctemplate )
+			AI_Sleep(mobile);
+		endif
+		
+		sleepms(5);
+		
+		//Clear out event responses the brain sends back to this command.
+		clear_event_queue();
+	endforeach
+	
+	SendSysMessage(who, "Done telling all npcs to sleep.");
+endprogram
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src	2005-08-31 22:00:23 UTC (rev 26)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src	2005-08-31 22:20:46 UTC (rev 27)
@@ -0,0 +1,45 @@
+//Example: .npcwipe (x1) (y1) (x2) (y2) -> Removes all npcs.
+use uo;
+use os;
+use polsys;
+
+include ":gumps:include/requestgump";
+
+program npcwipe(who, text)
+	Set_Priority(100);
+	
+	var realm_name := RequestGump(who, "Enter the realm name to perform the wipe on.", "", who.realm);
+	var realm_info := Realms()[realm_name];
+	if ( !realm_info )
+		SendSysMessage(who, "Invalid realm name.");
+		return 0;
+	endif
+	
+	var x1 := 1, y1 := 1, x2 := realm_info.width, y2 := realm_info.height;
+	var z1 := -120, z2 := 120;
+			
+	if ( x2 > realm_info.width )
+		SendSysMessage(who, "Error - X coordinate exceeds ["+realm_info.width+"] for realm ["+realm_name+"]");
+		return 0;
+	elseif ( y2 > realm_info.height )
+		SendSysMessage(who, "Error - Y coordinate exceeds ["+realm_info.height+"] for realm ["+realm_name+"]");
+		return 0;
+	endif
+					
+	SendSysMessage(who, "Starting npc wiper [" + x1 + " " + y1 + " " + x2 + " " + y2 + "] on realm ["+realm_name+"]");
+	SysLog("Starting npc wiper [" + x1 + " " + y1 + " " + x2 + " " + y2 + "] on realm ["+realm_name+"]");
+	
+	var count := 0;
+	foreach thing in ListObjectsInBox(x1, y1, z1, x2, y2, z2, realm_name)
+		if ( thing.npctemplate )
+			SetObjProperty(thing, "GuardKill", 1);
+			ApplyRawDamage(thing, 6000);
+			count := count + 1;
+			sleepms(4);
+		endif
+		sleepms(5);
+	endforeach
+	
+	SendSysMessage(who, "Killed " + count + " NPCs");
+	SysLog("Killed " + count + " NPCs");
+endprogram

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src	2005-08-31 22:00:23 UTC (rev 26)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src	2005-08-31 22:20:46 UTC (rev 27)
@@ -0,0 +1,16 @@
+//Example: .puttosleep -> Puts targetted NPC to sleep.
+use uo;
+use os;
+
+include ":ai_brain:include/NPC_Commands";
+
+program FixAI(who)
+	var targ := target(who);
+	
+	if ( targ.IsA(POLCLASS_NPC) )
+		AI_Sleep(targ);
+	else
+		SendSysMessage(who, "Cancelled.");
+		return 0;
+	endif
+endprogram
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/removenpc.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/removenpc.src	2005-08-31 22:00:23 UTC (rev 26)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/removenpc.src	2005-08-31 22:20:46 UTC (rev 27)
@@ -0,0 +1,38 @@
+//Example: .removenpc [npc template] -> Removes every npc of that type.
+use uo;
+use os;
+use polsys;
+
+include ":gumps:include/requestgump";
+
+program NPCWipe(who, template)
+	if ( !template )
+		template := RequestGump(who, "Enter the npc template name to remove.");
+		if ( !template )
+			SendSysMessage(who, "Cancelled.");
+			return 0;
+		endif
+	endif
+	template := Lower(template);
+		
+	var realm_name := RequestGump(who, "Enter the realm name to perform the wipe on.", "", who.realm);
+	var realm_info := Realms()[realm_name];
+	if ( !realm_info )
+		SendSysMessage(who, "Invalid realm name.");
+		return 0;
+	endif
+	
+	var x1 := 1, y1 := 1, x2 := realm_info.width, y2 := realm_info.height;
+	var z1 := -120, z2 := 120;
+	
+	var count := 0;
+	foreach thing in ListObjectsInBox(x1, y1, z1, x2, y2, z2, realm_name)
+		if ( Lower(thing.npctemplate) == template )
+			SetObjProperty(thing, "GuardKill", 1);
+			ApplyRawDamage(thing, 8000);
+			count := count + 1;
+		endif
+		sleepms(2);
+	endforeach
+	SendSysMessage(who, "Killed " + count + " NPCs");
+endprogram

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src	2005-08-31 22:00:23 UTC (rev 26)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src	2005-08-31 22:20:46 UTC (rev 27)
@@ -0,0 +1,35 @@
+//Example: .resetnpcs -> Restarts the AI script of every npc on the shard.
+use uo;
+use os;
+use polsys;
+
+include ":ai_brain:include/NPC_Commands";
+include ":gumps:include/requestgump";
+
+program ResetAllNPCs(who)
+	var realm_name := RequestGump(who, "Enter the realm name to perform the wipe on.", "", who.realm);
+	var realm_info := Realms()[realm_name];
+	if ( !realm_info )
+		SendSysMessage(who, "Invalid realm name.");
+		return 0;
+	endif
+	
+	SysLog("Starting NPC AI reset.");
+	SendSysMessage(who, "Starting NPC AI reset.");
+	
+	var x1 := 1, y1 := 1, x2 := realm_info.width, y2 := realm_info.height;
+	var z1 := -120, z2 := 120;
+	
+	foreach mobile in ListObjectsInBox( x1, y1, z1, x2, y2, z2)
+		if (mobile.npctemplate)
+			RestartScript(mobile);
+			sleepms(5);
+			
+			//Clear out event responses the brain sends back to this command.
+			clear_event_queue();
+		endif
+	endforeach
+	
+	SendSysMessage(who, "Done restarting all npcs.");
+	SysLog("Finished restarting all npcs.");
+endprogram
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/restartnpc.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/restartnpc.src	2005-08-31 22:00:23 UTC (rev 26)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/restartnpc.src	2005-08-31 22:20:46 UTC (rev 27)
@@ -0,0 +1,8 @@
+use uo;
+
+program FixAI(who)
+	var targ := target(who);
+	var result := RestartScript(targ);
+	
+	SendSysMessage(who, "Result of RestartScript("+targ.name+") ->"+result);
+endprogram
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/sendevent.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/sendevent.src	2005-08-31 22:00:23 UTC (rev 26)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/sendevent.src	2005-08-31 22:20:46 UTC (rev 27)
@@ -0,0 +1,27 @@
+//Example: .sendevent [event] -> Sends an event to the targetted npc.
+use uo;
+use os;
+
+include ":gumps:include/requestgump";
+
+program ControlNPC(who, event)
+	if ( !event )
+		event := CInt(RequestGump(who, "Enter event value", "Place a + or - at the begining if it is a number."));
+	endif
+	
+	if ( event[1] in {"+", "-"})
+		event := CInt(event);
+	endif
+
+	var ev := struct;
+	ev.+source := who;
+	ev.+type := event;
+	
+	var targ := target(who);
+	if ( targ )
+		SendEvent(targ, ev);
+		SendSysMessage(who, "Event sent as "+TypeOf(event)+")");
+	else
+		SendSysMessage(who, "Cancelled");
+	endif
+endprogram
\ No newline at end of file



From austin at berlios.de  Thu Sep  1 15:33:56 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 1 Sep 2005 15:33:56 +0200
Subject: [Poldistro-svn] r31 - trunk/096/pkg/mobiles/ai_brain/include
Message-ID: <200509011333.j81DXuRx024561@sheep.berlios.de>

Author: austin
Date: 2005-09-01 15:33:56 +0200 (Thu, 01 Sep 2005)
New Revision: 31

Modified:
   trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc	2005-09-01 13:24:22 UTC (rev 30)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc	2005-09-01 13:33:56 UTC (rev 31)
@@ -36,7 +36,33 @@
 //
 /////////////////////////////////////////////////////////////////
 
+/*
+ * AI_Attack(mobile, opponent, no_wake)
+ *
+ * Purpose
+ * Triggers the npc's combat script on opponent.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * opponent:	What the npc's combat nerve will attack.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Attack(mobile, opponent, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= SYSEVENT_ENGAGED;
+	ev.+source	:= opponent;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
 
+	return SendEvent(mobile, ev);
+endfunction
+
 /*
  * AI_ClearThoughts(mobile, flags)
  *
@@ -73,14 +99,14 @@
 endfunction
 
 /*
- * AI_Attack(mobile, opponent, no_wake)
+ * AI_EndNerve(mobile, nerve_name, no_wake)
  *
  * Purpose
- * Triggers the npc's combat script on opponent.
+ * Used to tell the brain to stop a nerve script.
  *
  * Parameters
  * mobile:	The npc that will receive the command.
- * opponent:	What the npc's combat nerve will attack.
+ * nerve_name:	String containing the name of the nerve (dictionary key).
  * no_wake:	Optional wakeup flag:
  *		WAKEUP - Will stop the sleep script if it is running - Default.
  *		NOWAKE - Will not stop the sleep script if it is running.
@@ -89,10 +115,10 @@
  * Result of SendEvent()
  *
  */
-function AI_Attack(mobile, opponent, no_wake:=WAKEUP)
+function AI_EndNerve(mobile, nerve_name, no_wake:=WAKEUP)
 	var ev		:= struct;
-	ev.+type	:= SYSEVENT_ENGAGED;
-	ev.+source	:= opponent;
+	ev.+type	:= NPCEVENT_ENDNERVE;
+	ev.+name	:= nerve_name;
 	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
 
@@ -100,91 +126,43 @@
 endfunction
 
 /*
- * AI_Move(mobile, opponent, to_from, speed, no_wake, loop)
+ * AI_Flee(mobile, opponent, no_wake)
  *
  * Purpose
- * Commands an npc to move toward / away from an item or mobile.
+ * Used to tell the brain to stop a nerve script.
  *
  * Parameters
  * mobile:	The npc that will receive the command.
- * object:	Item or mobile the npc will move away from/toward.
- * to_from:	Direction the npc will go:
- *		NEMOVE_TOWARD - Will make the npc move toward the object - Default
- *		NEMOVE_AWAY   - Will make the npc move away from the object.
- * speed:	Speed the npc will move at:
- *		NEMOVE_RUN  - NPC will run
- *		NEMOVE_WALK - NPC will walk
- * no_wake:	Optional wakeup flag::
+ * opponent:	Opponent to flee from.
+ * no_wake:	Optional wakeup flag:
  *		WAKEUP - Will stop the sleep script if it is running - Default.
  *		NOWAKE - Will not stop the sleep script if it is running.
- * loop:	Number of steps for the npc to take toward/away from the object.
- *		Note: Loop can be interrupted and end prematurely!
  *
  * Return value
  * Result of SendEvent()
  *
  */
-function AI_Move(mobile, object, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
+function AI_Flee(mobile, opponent, no_wake:=WAKEUP)
 	var ev		:= struct;
-	ev.+type	:= NPCEVENT_MOVE;
-	ev.+source	:= object;
-	ev.+direction	:= to_from;
-	ev.+speed	:= speed;
+	ev.+type	:= NPCEVENT_FLEE;
+	ev.+source	:= opponent;
 	ev.+WakeUp	:= no_wake;
-	ev.+loop	:= loop;
 	ev.+process	:= GetProcess(GetPid());
 
 	return SendEvent(mobile, ev);
 endfunction
 
 /*
- * AI_MoveXY(mobile, x, y, to_from, speed, no_wake, loop)
+ * AI_ForwardEvent(mobile, nerve_name, mask, data, no_wake)
  *
  * Purpose
- * Commands an npc to move toward or away from an XY coordinate.
+ * Used to send an event from one nerve to another.
  *
  * Parameters
  * mobile:	The npc that will receive the command.
- * x:		X coordinate to move away from/toward
- * y:		Y coordinate to move away from/toward
- * to_from:	Direction the npc will go:
- *		NEMOVE_TOWARD - Will make the npc move toward the object - Default
- *		NEMOVE_AWAY   - Will make the npc move away from the object.
- * speed:	Speed the npc will move at:
- *		NEMOVE_RUN  - NPC will run
- *		NEMOVE_WALK - NPC will walk
- * no_wake:	Optional wakeup flag::
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
- * loop:	Number of steps for the npc to take toward/away from the object.
- *		Note: Loop can be interrupted and end prematurely!
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_MoveXY(mobile, x, y, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_MOVE_XY;
-	ev.+x		:= x;
-	ev.+y		:= y;
-	ev.+direction	:= to_from;
-	ev.+speed	:= speed;
-	ev.+WakeUp	:= no_wake;
-	ev.+loop	:= loop;
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction
-
-/*
- * AI_Wander(mobile, opponent, no_wake)
- *
- * Purpose
- * Commands the NPC to wander one step in a random direction.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
+ * nerve_name:	String containing the name of the nerve to forward the event to (dictionary key).
+ * mask:	The type of event the nerve should handle the forward as. (example: SYSEVENT_LEFTAREA)
+ * data:	Data that the nerve will receive.
  * no_wake:	Optional wakeup flag:
  *		WAKEUP - Will stop the sleep script if it is running - Default.
  *		NOWAKE - Will not stop the sleep script if it is running.
@@ -193,9 +171,12 @@
  * Result of SendEvent()
  *
  */
-function AI_Wander(mobile, no_wake:=WAKEUP)
+function AI_FowardEvent(mobile, nerve_name, mask, data, no_wake:=WAKEUP)
 	var ev		:= struct;
-	ev.+type	:= NPCEVENT_WANDER;
+	ev.+type	:= NPCEVENT_FWDNERVE;
+	ev.+NerveName	:= nerve_name;
+	ev.+mask	:= mask;
+	ev.+data	:= data;
 	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
 
@@ -203,64 +184,78 @@
 endfunction
 
 /*
- * AI_Turn(mobile, turn_to, direction, no_wake)
+ * AI_Move(mobile, opponent, to_from, speed, no_wake, loop)
  *
  * Purpose
- * Commands the NPC to face away from / toward an object.
+ * Commands an npc to move toward / away from an item or mobile.
  *
  * Parameters
  * mobile:	The npc that will receive the command.
- * turn_to:	item or moble reference to turn away from / toward.
- * direction:	Direction the npc will face:
- *		NETURN_TOWARD - Will make the npc turn toward the object - Default.
- 		NETURN_AWAY   - Will make the npc turn away from the object.
- * no_wake:	Optional wakeup flag:
+ * object:	Item or mobile the npc will move away from/toward.
+ * to_from:	Direction the npc will go:
+ *		NEMOVE_TOWARD - Will make the npc move toward the object - Default
+ *		NEMOVE_AWAY   - Will make the npc move away from the object.
+ * speed:	Speed the npc will move at:
+ *		NEMOVE_RUN  - NPC will run
+ *		NEMOVE_WALK - NPC will walk
+ * no_wake:	Optional wakeup flag::
  *		WAKEUP - Will stop the sleep script if it is running - Default.
  *		NOWAKE - Will not stop the sleep script if it is running.
+ * loop:	Number of steps for the npc to take toward/away from the object.
+ *		Note: Loop can be interrupted and end prematurely!
  *
  * Return value
  * Result of SendEvent()
  *
  */
-function AI_Turn(mobile, turn_to, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
+function AI_Move(mobile, object, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
 	var ev		:= struct;
-	ev.+type	:= NPCEVENT_TURN;
-	ev.+source	:= turn_to;
-	ev.+direction	:= direction;
+	ev.+type	:= NPCEVENT_MOVE;
+	ev.+source	:= object;
+	ev.+direction	:= to_from;
+	ev.+speed	:= speed;
 	ev.+WakeUp	:= no_wake;
+	ev.+loop	:= loop;
 	ev.+process	:= GetProcess(GetPid());
 
 	return SendEvent(mobile, ev);
 endfunction
 
 /*
- * AI_TurnXY(mobile, x, y, direction, no_wake)
+ * AI_MoveXY(mobile, x, y, to_from, speed, no_wake, loop)
  *
  * Purpose
- * Commands the NPC to face away from / toward a coordinate.
+ * Commands an npc to move toward or away from an XY coordinate.
  *
  * Parameters
  * mobile:	The npc that will receive the command.
- * x:		X coordinate to turn away from / toward.
- * y:		Y coordinate to turn away from / toward.
- * direction:	Direction the npc will face:
- *		NETURN_TOWARD - Will make the npc turn toward the object - Default.
- 		NETURN_AWAY   - Will make the npc turn away from the object.
- * no_wake:	Optional wakeup flag:
+ * x:		X coordinate to move away from/toward
+ * y:		Y coordinate to move away from/toward
+ * to_from:	Direction the npc will go:
+ *		NEMOVE_TOWARD - Will make the npc move toward the object - Default
+ *		NEMOVE_AWAY   - Will make the npc move away from the object.
+ * speed:	Speed the npc will move at:
+ *		NEMOVE_RUN  - NPC will run
+ *		NEMOVE_WALK - NPC will walk
+ * no_wake:	Optional wakeup flag::
  *		WAKEUP - Will stop the sleep script if it is running - Default.
  *		NOWAKE - Will not stop the sleep script if it is running.
+ * loop:	Number of steps for the npc to take toward/away from the object.
+ *		Note: Loop can be interrupted and end prematurely!
  *
  * Return value
  * Result of SendEvent()
  *
  */
-function AI_TurnXY(mobile, x, y, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
+function AI_MoveXY(mobile, x, y, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
 	var ev		:= struct;
-	ev.+type	:= NPCEVENT_TURN_XY;
+	ev.+type	:= NPCEVENT_MOVE_XY;
 	ev.+x		:= x;
 	ev.+y		:= y;
-	ev.+direction	:= direction;
+	ev.+direction	:= to_from;
+	ev.+speed	:= speed;
 	ev.+WakeUp	:= no_wake;
+	ev.+loop	:= loop;
 	ev.+process	:= GetProcess(GetPid());
 
 	return SendEvent(mobile, ev);
@@ -294,28 +289,22 @@
 endfunction
 
 /*
- * AI_SetOpponent(mobile, opponent, no_wake)
+ * AI_Sleep(mobile)
  *
  * Purpose
- * Toggles warmode on the npc. Setting to 0 also clears the opponent.
+ * Instructs the npc to go into sleep mode - shuts down all nerves.
  *
  * Parameters
  * mobile:	The npc that will receive the command.
- * mode:	0 - Takes the NPC out of warmode and clears the opponent - Default.
- *		1 - Places the npc into warmode.
- * no_wake:	Optional wakeup flag:
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
  *
  * Return value
  * Result of SendEvent()
  *
  */
-function AI_Warmode(mobile, mode:=0, no_wake:=WAKEUP)
+function AI_Sleep(mobile)
 	var ev		:= struct;
-	ev.+type	:= NPCEVENT_WARMODE;
-	ev.+value	:= mode;
-	ev.+WakeUp	:= no_wake;
+	ev.+type	:= NPCEVENT_SLEEP;
+	ev.+WakeUp	:= NOWAKE;
 	ev.+process	:= GetProcess(GetPid());
 
 	return SendEvent(mobile, ev);
@@ -345,10 +334,12 @@
  * Result of SendEvent()
  *
  */
-function AI_Speak(mobile, text:="!?", text_type:=SPEAK_TEXTTYPE_DEFAULT, do_event:=SPEAK_DOEVENT_DISABLE, no_wake:=WAKEUP)
+function AI_Speak(mobile, text, text_type:=SPEAK_TEXTTYPE_DEFAULT, do_event:=SPEAK_DOEVENT_DISABLE, no_wake:=WAKEUP)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_SPEAK;
 	ev.+text	:= text;
+	ev.+texttype	:= text_type;
+	ev.+doevent	:= do_event;
 	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
 
@@ -387,14 +378,17 @@
 endfunction
 
 /*
- * AI_EndNerve(mobile, nerve_name, no_wake)
+ * AI_Turn(mobile, turn_to, direction, no_wake)
  *
  * Purpose
- * Used to tell the brain to stop a nerve script.
+ * Commands the NPC to face away from / toward an object.
  *
  * Parameters
  * mobile:	The npc that will receive the command.
- * nerve_name:	String containing the name of the nerve (dictionary key).
+ * turn_to:	item or moble reference to turn away from / toward.
+ * direction:	Direction the npc will face:
+ *		NETURN_TOWARD - Will make the npc turn toward the object - Default.
+ 		NETURN_AWAY   - Will make the npc turn away from the object.
  * no_wake:	Optional wakeup flag:
  *		WAKEUP - Will stop the sleep script if it is running - Default.
  *		NOWAKE - Will not stop the sleep script if it is running.
@@ -403,10 +397,11 @@
  * Result of SendEvent()
  *
  */
-function AI_EndNerve(mobile, nerve_name, no_wake:=WAKEUP)
+function AI_Turn(mobile, turn_to, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
 	var ev		:= struct;
-	ev.+type	:= NPCEVENT_ENDNERVE;
-	ev.+name	:= nerve_name;
+	ev.+type	:= NPCEVENT_TURN;
+	ev.+source	:= turn_to;
+	ev.+direction	:= direction;
 	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
 
@@ -414,14 +409,18 @@
 endfunction
 
 /*
- * AI_Flee(mobile, opponent, no_wake)
+ * AI_TurnXY(mobile, x, y, direction, no_wake)
  *
  * Purpose
- * Used to tell the brain to stop a nerve script.
+ * Commands the NPC to face away from / toward a coordinate.
  *
  * Parameters
  * mobile:	The npc that will receive the command.
- * opponent:	Opponent to flee from.
+ * x:		X coordinate to turn away from / toward.
+ * y:		Y coordinate to turn away from / toward.
+ * direction:	Direction the npc will face:
+ *		NETURN_TOWARD - Will make the npc turn toward the object - Default.
+ 		NETURN_AWAY   - Will make the npc turn away from the object.
  * no_wake:	Optional wakeup flag:
  *		WAKEUP - Will stop the sleep script if it is running - Default.
  *		NOWAKE - Will not stop the sleep script if it is running.
@@ -430,10 +429,12 @@
  * Result of SendEvent()
  *
  */
-function AI_Flee(mobile, opponent, no_wake:=WAKEUP)
+function AI_TurnXY(mobile, x, y, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
 	var ev		:= struct;
-	ev.+type	:= NPCEVENT_FLEE;
-	ev.+source	:= opponent;
+	ev.+type	:= NPCEVENT_TURN_XY;
+	ev.+x		:= x;
+	ev.+y		:= y;
+	ev.+direction	:= direction;
 	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
 
@@ -441,75 +442,75 @@
 endfunction
 
 /*
- * AI_ForwardEvent(mobile, nerve_name, mask, data, no_wake)
+ * AI_WakeUp(mobile)
  *
  * Purpose
- * Used to send an event from one nerve to another.
+ * Sends an event to the npc causing its sleep script to end.
  *
  * Parameters
  * mobile:	The npc that will receive the command.
- * nerve_name:	String containing the name of the nerve to forward the event to (dictionary key).
- * mask:	The type of event the nerve should handle the forward as. (example: SYSEVENT_LEFTAREA)
- * data:	Data that the nerve will receive.
- * no_wake:	Optional wakeup flag:
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
  *
  * Return value
  * Result of SendEvent()
  *
  */
-function AI_FowardEvent(mobile, nerve_name, mask, data, no_wake:=WAKEUP)
+function AI_WakeUp(mobile)
 	var ev		:= struct;
-	ev.+type	:= NPCEVENT_FWDNERVE;
-	ev.+NerveName	:= nerve_name;
-	ev.+mask	:= mask;
-	ev.+data	:= data;
-	ev.+WakeUp	:= no_wake;
+	ev.+type	:= NPCEVENT_WAKEUP;
+	ev.+WakeUp	:= WAKEUP;
 	ev.+process	:= GetProcess(GetPid());
 
 	return SendEvent(mobile, ev);
 endfunction
 
 /*
- * AI_Sleep(mobile)
+ * AI_Wander(mobile, opponent, no_wake)
  *
  * Purpose
- * Instructs the npc to go into sleep mode - shuts down all nerves.
+ * Commands the NPC to wander one step in a random direction.
  *
  * Parameters
  * mobile:	The npc that will receive the command.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
  *
  * Return value
  * Result of SendEvent()
  *
  */
-function AI_Sleep(mobile)
+function AI_Wander(mobile, no_wake:=WAKEUP)
 	var ev		:= struct;
-	ev.+type	:= NPCEVENT_SLEEP;
-	ev.+WakeUp	:= NOWAKE;
+	ev.+type	:= NPCEVENT_WANDER;
+	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
 
 	return SendEvent(mobile, ev);
 endfunction
 
 /*
- * AI_WakeUp(mobile)
+ * AI_WarMode(mobile, mode, no_wake)
  *
  * Purpose
- * Sends an event to the npc causing its sleep script to end.
+ * Toggles warmode on the npc. Setting to 0 also clears the opponent.
  *
  * Parameters
  * mobile:	The npc that will receive the command.
+ * mode:	0 - Takes the NPC out of warmode and clears the opponent - Default.
+ *		1 - Places the npc into warmode.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
  *
  * Return value
  * Result of SendEvent()
  *
  */
-function AI_WakeUp(mobile)
+function AI_WarMode(mobile, mode:=0, no_wake:=WAKEUP)
 	var ev		:= struct;
-	ev.+type	:= NPCEVENT_WAKEUP;
-	ev.+WakeUp	:= WAKEUP;
+	ev.+type	:= NPCEVENT_WARMODE;
+	ev.+value	:= mode;
+	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
 
 	return SendEvent(mobile, ev);



From austin at berlios.de  Thu Sep  1 15:15:58 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 1 Sep 2005 15:15:58 +0200
Subject: [Poldistro-svn] r28 - trunk/096/pkg/mobiles/ai_brain/include
Message-ID: <200509011315.j81DFwKC023514@sheep.berlios.de>

Author: austin
Date: 2005-09-01 15:15:58 +0200 (Thu, 01 Sep 2005)
New Revision: 28

Modified:
   trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc	2005-08-31 22:20:46 UTC (rev 27)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc	2005-09-01 13:15:58 UTC (rev 28)
@@ -14,22 +14,116 @@
 include "include/sysevent";
 include ":ai_brain:include/eventid";
 
+/////////////////////////////////////////////////////////////////
+// * Function List *
+//
+// AI_Attack()
+// AI_ClearThoughts()
+// AI_EndNerve()
+// AI_Flee()
+// AI_FowardEvent()
+// AI_Move()
+// AI_MoveXY()
+// AI_SetOpponent()
+// AI_Sleep()
+// AI_StartNerve()
+// AI_Turn()
+// AI_TurnXY()
+// AI_WakeUp()
+// AI_Wander()
+// AI_Warmode()
+// AI_WinFight()
+//
+/////////////////////////////////////////////////////////////////
+
+
+/*
+ * AI_ClearThoughts(mobile, flags)
+ *
+ * Purpose
+ * Clears the event queue for the script calling it and or the brain.
+ *
+ * Parameters
+ * mobile:	A reference to the npc.
+ * flags:	CLR_* flag for what scripts should have their event queues cleared.
+ *		CLR_BRAIN - Clears the brain's queue.
+ *		CLR_NERVE - Clears the nerve's queue.
+ *		CLR_BOTH  - Clears the queue for both.
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
 function AI_ClearThoughts(mobile, flags)
 	var brain	:= flags & CLR_BRAIN;
 	var nerve	:= flags & CLR_NERVE;
 	var both	:= flags & CLR_BOTH;
-	
+
 	if ( both || brain )
 		brain := mobile.process;
 		brain.clear_event_queue();
 	endif
-	
+
 	if ( both || nerve )
 		nerve := GetProcess(GetPid());
 		nerve.clear_event_queue();
 	endif
+
+	return 1;
 endfunction
 
+/*
+ * AI_Attack(mobile, opponent, no_wake)
+ *
+ * Purpose
+ * Triggers the npc's combat script on opponent.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * opponent:	What the npc's combat nerve will attack.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Attack(mobile, opponent, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= SYSEVENT_ENGAGED;
+	ev.+source	:= opponent;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_Move(mobile, opponent, to_from, speed, no_wake, loop)
+ *
+ * Purpose
+ * Commands an npc to move toward / away from an item or mobile.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * object:	Item or mobile the npc will move away from/toward.
+ * to_from:	Direction the npc will go:
+ *		NEMOVE_TOWARD - Will make the npc move toward the object - Default
+ *		NEMOVE_AWAY   - Will make the npc move away from the object.
+ * speed:	Speed the npc will move at:
+ *		NEMOVE_RUN  - NPC will run
+ *		NEMOVE_WALK - NPC will walk
+ * no_wake:	Optional wakeup flag::
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ * loop:	Number of steps for the npc to take toward/away from the object.
+ *		Note: Loop can be interrupted and end prematurely!
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
 function AI_Move(mobile, object, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_MOVE;
@@ -39,10 +133,36 @@
 	ev.+WakeUp	:= no_wake;
 	ev.+loop	:= loop;
 	ev.+process	:= GetProcess(GetPid());
-	
-	SendEvent(mobile, ev);
+
+	return SendEvent(mobile, ev);
 endfunction
 
+/*
+ * AI_MoveXY(mobile, x, y, to_from, speed, no_wake, loop)
+ *
+ * Purpose
+ * Commands an npc to move toward or away from an XY coordinate.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * x:		X coordinate to move away from/toward
+ * y:		Y coordinate to move away from/toward
+ * to_from:	Direction the npc will go:
+ *		NEMOVE_TOWARD - Will make the npc move toward the object - Default
+ *		NEMOVE_AWAY   - Will make the npc move away from the object.
+ * speed:	Speed the npc will move at:
+ *		NEMOVE_RUN  - NPC will run
+ *		NEMOVE_WALK - NPC will walk
+ * no_wake:	Optional wakeup flag::
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ * loop:	Number of steps for the npc to take toward/away from the object.
+ *		Note: Loop can be interrupted and end prematurely!
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
 function AI_MoveXY(mobile, x, y, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_MOVE_XY;
@@ -53,19 +173,55 @@
 	ev.+WakeUp	:= no_wake;
 	ev.+loop	:= loop;
 	ev.+process	:= GetProcess(GetPid());
-	
-	SendEvent(mobile, ev);
+
+	return SendEvent(mobile, ev);
 endfunction
 
+/*
+ * AI_Wander(mobile, opponent, no_wake)
+ *
+ * Purpose
+ * Commands the NPC to wander one step in a random direction.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
 function AI_Wander(mobile, no_wake:=WAKEUP)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_WANDER;
 	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
-	
-	SendEvent(mobile, ev);
+
+	return SendEvent(mobile, ev);
 endfunction
 
+/*
+ * AI_Turn(mobile, turn_to, direction, no_wake)
+ *
+ * Purpose
+ * Commands the NPC to face away from / toward an object.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * turn_to:	item or moble reference to turn away from / toward.
+ * direction:	Direction the npc will face:
+ *		NETURN_TOWARD - Will make the npc turn toward the object - Default.
+ 		NETURN_AWAY   - Will make the npc turn away from the object.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
 function AI_Turn(mobile, turn_to, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_TURN;
@@ -73,10 +229,31 @@
 	ev.+direction	:= direction;
 	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
-	
-	SendEvent(mobile, ev);
+
+	return SendEvent(mobile, ev);
 endfunction
 
+/*
+ * AI_TurnXY(mobile, x, y, direction, no_wake)
+ *
+ * Purpose
+ * Commands the NPC to face away from / toward a coordinate.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * x:		X coordinate to turn away from / toward.
+ * y:		Y coordinate to turn away from / toward.
+ * direction:	Direction the npc will face:
+ *		NETURN_TOWARD - Will make the npc turn toward the object - Default.
+ 		NETURN_AWAY   - Will make the npc turn away from the object.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
 function AI_TurnXY(mobile, x, y, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_TURN_XY;
@@ -85,40 +262,118 @@
 	ev.+direction	:= direction;
 	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
-	
-	SendEvent(mobile, ev);
+
+	return SendEvent(mobile, ev);
 endfunction
 
+/*
+ * AI_SetOpponent(mobile, opponent, no_wake)
+ *
+ * Purpose
+ * Places the npc into war mode and sets an opponent.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * opponent:	Mobile reference that will be considered an opponent.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
 function AI_SetOpponent(mobile, opponent, no_wake:=WAKEUP)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_OPPONENT;
 	ev.+source	:= opponent;
 	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
-	
-	SendEvent(mobile, ev);
+
+	return SendEvent(mobile, ev);
 endfunction
 
-function AI_Warmode(mobile, mode:=1, no_wake:=WAKEUP)
+/*
+ * AI_SetOpponent(mobile, opponent, no_wake)
+ *
+ * Purpose
+ * Toggles warmode on the npc. Setting to 0 also clears the opponent.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * mode:	0 - Takes the NPC out of warmode and clears the opponent - Default.
+ *		1 - Places the npc into warmode.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Warmode(mobile, mode:=0, no_wake:=WAKEUP)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_WARMODE;
 	ev.+value	:= mode;
 	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
 
-	SendEvent(mobile, ev);
+	return SendEvent(mobile, ev);
 endfunction
 
+/*
+ * AI_Speak(mobile, text, text_type, do_event, no_wake)
+ *
+ * Purpose
+ * Commands the NPC to speak.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * text:	The text the npc will speak.
+ * text_type:	text_type for npc.em :
+ *		SPEAK_TEXTTYPE_DEFAULT - Default
+ *		SPEAK_TEXTTYPE_WHISPER
+ *		SPEAK_TEXTTYPE_YELL
+ * do_event:	Flags for sending a system event for speech to surrounding npcs.
+ *		SPEAK_DOEVENT_DISABLE - Default
+ *		SPEAK_DOEVENT_ENABLE
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
 function AI_Speak(mobile, text:="!?", text_type:=SPEAK_TEXTTYPE_DEFAULT, do_event:=SPEAK_DOEVENT_DISABLE, no_wake:=WAKEUP)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_SPEAK;
 	ev.+text	:= text;
 	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
-	
-	SendEvent(mobile, ev);
+
+	return SendEvent(mobile, ev);
 endfunction
 
+/*
+ * AI_StartNerve(mobile, nerve_name, script_name, data, no_wake)
+ *
+ * Purpose
+ * Used to start a custom nerve up from within a nerve.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * nerve_name:	String containing the name of the nerve (dictionary key).
+ * script_name:	Path of the script to start.
+ * data:	Data to be sent to the nerve once it starts.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
 function AI_StartNerve(mobile, nerve_name, script_name, data, no_wake:=WAKEUP)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_STARTNERVE;
@@ -127,10 +382,27 @@
 	ev.+data	:= data;
 	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
-	
-	SendEvent(mobile, ev);
+
+	return SendEvent(mobile, ev);
 endfunction
 
+/*
+ * AI_EndNerve(mobile, nerve_name, no_wake)
+ *
+ * Purpose
+ * Used to tell the brain to stop a nerve script.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * nerve_name:	String containing the name of the nerve (dictionary key).
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
 function AI_EndNerve(mobile, nerve_name, no_wake:=WAKEUP)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_ENDNERVE;
@@ -138,39 +410,55 @@
 	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
 
-	SendEvent(mobile, ev);
+	return SendEvent(mobile, ev);
 endfunction
 
-function AI_WinFight(mobile, opponent, no_wake:=WAKEUP)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_WINFIGHT;
-	ev.+source	:= opponent;
-	ev.+WakeUp	:= no_wake;
-	ev.+process	:= GetProcess(GetPid());
-	
-	SendEvent(mobile, ev);
-endfunction
-
-function AI_Attack(mobile, opponent, no_wake:=WAKEUP)
-	var ev		:= struct;
-	ev.+type	:= SYSEVENT_ENGAGED;
-	ev.+source	:= opponent;
-	ev.+WakeUp	:= no_wake;
-	ev.+process	:= GetProcess(GetPid());
-	
-	SendEvent(mobile, ev);
-endfunction
-
+/*
+ * AI_Flee(mobile, opponent, no_wake)
+ *
+ * Purpose
+ * Used to tell the brain to stop a nerve script.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * opponent:	Opponent to flee from.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
 function AI_Flee(mobile, opponent, no_wake:=WAKEUP)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_FLEE;
 	ev.+source	:= opponent;
 	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
-	
-	SendEvent(mobile, ev);
+
+	return SendEvent(mobile, ev);
 endfunction
 
+/*
+ * AI_ForwardEvent(mobile, nerve_name, mask, data, no_wake)
+ *
+ * Purpose
+ * Used to send an event from one nerve to another.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * nerve_name:	String containing the name of the nerve to forward the event to (dictionary key).
+ * mask:	The type of event the nerve should handle the forward as. (example: SYSEVENT_LEFTAREA)
+ * data:	Data that the nerve will receive.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
 function AI_FowardEvent(mobile, nerve_name, mask, data, no_wake:=WAKEUP)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_FWDNERVE;
@@ -179,24 +467,50 @@
 	ev.+data	:= data;
 	ev.+WakeUp	:= no_wake;
 	ev.+process	:= GetProcess(GetPid());
-	
-	SendEvent(mobile, ev);
+
+	return SendEvent(mobile, ev);
 endfunction
 
+/*
+ * AI_Sleep(mobile)
+ *
+ * Purpose
+ * Instructs the npc to go into sleep mode - shuts down all nerves.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
 function AI_Sleep(mobile)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_SLEEP;
 	ev.+WakeUp	:= NOWAKE;
 	ev.+process	:= GetProcess(GetPid());
-	
-	SendEvent(mobile, ev);
+
+	return SendEvent(mobile, ev);
 endfunction
 
+/*
+ * AI_WakeUp(mobile)
+ *
+ * Purpose
+ * Sends an event to the npc causing its sleep script to end.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
 function AI_WakeUp(mobile)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_WAKEUP;
 	ev.+WakeUp	:= WAKEUP;
 	ev.+process	:= GetProcess(GetPid());
-	
-	SendEvent(mobile, ev);
+
+	return SendEvent(mobile, ev);
 endfunction



From austin at berlios.de  Thu Sep  1 15:21:52 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 1 Sep 2005 15:21:52 +0200
Subject: [Poldistro-svn] r29 - trunk/096/pkg/mobiles/ai_brain
Message-ID: <200509011321.j81DLqKo023786@sheep.berlios.de>

Author: austin
Date: 2005-09-01 15:21:52 +0200 (Thu, 01 Sep 2005)
New Revision: 29

Modified:
   trunk/096/pkg/mobiles/ai_brain/brain.src
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/brain.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-01 13:15:58 UTC (rev 28)
+++ trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-01 13:21:52 UTC (rev 29)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * BRAIN.SRC - v5.0
-* Updated 8/31/2005 7:48AM
+* Updated 9/1/2005 6:20AM
 *
 * NPC AI-Script to control all non-setup actions. Acts as the "brain"
 * and fires off external scripts that act as the "nerves" of the NPC.
@@ -23,6 +23,7 @@
 include ":ai_brain:include/npc_settings";
 include ":ai_brain:include/npc_util";
 include ":ai_brain:include/braincore/error";
+include ":ai_brain:include/braincore/eventprocessor";
 include ":ai_brain:include/braincore/movement";
 include ":ai_brain:include/braincore/setup";
 
@@ -45,280 +46,6 @@
 	while ( npc )
 		var ev := wait_for_event(g_settings["cycle_wait"]);
 		
-		if ( sleep_mode )
-			
 		ProcessEvent(ev);
 	endwhile
 endprogram
-
-function ProcessEvent(byref ev)
-	var old_priority := set_priority(25);
-	
-	case( ev.type )
-		//Check movement first, since its the event
-		//that seems to be sent most often.
-
-		// Move NPC
-		// .source	: From/To whom/what?
-		// .speed	: Walk/Run
-		// .direction	: Away/Towards
-		// .loop	: Number of times to attempt to loop the movement.
-		NPCEVENT_MOVE:
-			Movement(ev);
-		
-		// Instructs the npc to walk toward an XY coordinate.
-		// .x and .y	: From/To  coordinates
-		// .speed	: Walk/Run
-		// .direction	: Away/Towards
-		// .loop	: Number of times to attempt to loop the movement.
-		NPCEVENT_MOVE_XY:
-			MovementXY(ev);
-		
-		// Triggered when a mobile enter's the npcs "reaction_range".
-		// .source	: What entered the area
-		SYSEVENT_ENTEREDAREA:
-			if ( g_settings.exists("enter_react_script") )
-				var process := 0; //GetNerve("EnterReaction");
-				if ( !process )
-					//StartNerve("EnterReaction", g_settings["enter_react_script"], {me, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-		
-		// Triggered when a mobile leaves the npc's "leave_react_range".
-		// .source	: What left the area
-		SYSEVENT_LEFTAREA:
-			if ( g_settings.exists("leave_react_script") )
-				var process := 0; //GetNerve("LeaveReaction");
-				if ( !process )
-					//StartNerve("LeaveReaction", g_settings["leave_react_script"], {me, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-		
-		// Sent when something targets the npc to begin combat or
-		// when something has damaged the npc.
-		// .source	: What caused the damage or engaged the npc
-		// For SYSEVENT_DAMAGED
-		// .damaged	: Integer amount of damage.
-		SYSEVENT_ENGAGED:
-		SYSEVENT_DAMAGED:
-			if ( g_settings.exists("combat_script") )
-				if ( (ev.source).ISA(POLCLASS_MOBILE) )
-					var process := 0; //GetNerve("Combat");
-					if ( !process )
-						//StartNerve("Combat", g_settings["combat_script"], {me, ev, settings});
-					else
-						process.SendEvent(ev);
-					endif
-				endif
-			endif
-		
-		// Instructs the npc to run its disengage nerve.
-		// When something attacking it goes out of warmode, this is run.
-		// .source	: What was targetting this npc but has now left combat mode.
-		SYSEVENT_DISENGAGED:
-			if ( g_settings.exists("disengage_script") )
-				var process := 0; //GetNerve("Disengage");
-				if ( !process )
-					//StartNerve("Disengage", g_settings["disengage_script"], {me, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-		
-		// When speech is made by a player, this nerve is used.
-		// Note: The NPC function Say() doesnt yet pass around the speech event.
-		// .source	: Where the speech originated.
-		// .text	: The actual speech
-		// extra 095 stuff
-		// .uc_text	: a "Unicode array" of 2-byte "Big Endian" integers.
-		// .langcode	: a 3-character, uppercase language code.
-		// .texttype	: "yell", "whisper", "emote", "default".
-		SYSEVENT_SPEECH:
-			if( g_settings.exists("listen_script") )
-				var process := 0; //GetNerve("Speech");
-				if ( !process )
-					//StartNerve("Speech", g_settings["listen_script"], {me, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-		
-		// Instructs the npc to run its double click script.
-		// Run when the npc is double clicked by a player.
-		// .source	: What sent the double click
-		SYSEVENT_DOUBLECLICKED:
-			if ( g_settings.exists("dbl_click_script") )
-				if ( Distance(ev.source, npc) <= g_settings["dbl_click_range"] )
-					var process := 0; //GetNerve("DblClick");
-					if ( !process )
-						//StartNerve("DblClick", g_settings["dbl_click_script"], {npc, ev, settings});
-					else
-						process.SendEvent(ev);
-					endif
-				endif
-			endif
-			
-		// The NPC is a merchant, and has sold or purchased something.
-		// Both sold and bought events are sent to this same nerve.
-		// The best thing to do is fork it into two functions inside the
-		// nerve script to handle each event type.
-		// MERCHANT_SOLD means the merchant sold an item to the player.
-		// MERCHANT_BOUGHT means the merchatn bought something from the player.
-		//
-		// .source	: Who the merchant is selling to/buying from.
-		// .amount	: Gold amount for the sale/purchase.
-		SYSEVENT_MERCHANT_SOLD:
-		SYSEVENT_MERCHANT_BOUGHT:
-			if ( g_settings.exists("merchant_script") )
-				var process := 0; //GetNerve("Merchant");
-				if ( !process )
-					//StartNerve("Merchant", g_settings["merchant_script"], {npc, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-		
-		// Someone has dragged an item onto the npc.
-		// .source	: What dragged the item over the npc.
-		// .item	: The item being given to the npc.
-		SYSEVENT_ITEM_GIVEN:
-			if ( g_settings.exists("give_item_script") )
-				var process := 0; //GetNerve("GiveItem");
-				if ( !process )
-					//StartNerve("GiveItem", g_settings["give_item_script"], {npc, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-				
-		// Instructs the npc to run its flee script.
-		// .source	: What to flee from.
-		NPCEVENT_FLEE:
-			if ( g_settings.exists("flee_script") )
-				var process := 0; //GetNerve("Flee");
-				if ( !process )
-					//StartNerve("Flee", g_settings["flee_script"], {npc, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			
-		// The npc has killed its opponent and
-		// the combat script has sent the winfight event
-		// .source	: Defeated foe!
-		NPCEVENT_WINFIGHT:
-			if ( g_settings.exists("win_script") )
-				var process := 0; //GetNerve("Win");
-				if ( !process )
-					//StartNerve("Win", g_settings["win_script"], {npc, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			
-		//A nerve has instructed the brain to kill another nerve or its self.
-		// .name	: Nerve name
-		NPCEVENT_ENDNERVE:
-			//KillNerve(ev.name);
-			
-		//A nerve has instructed the brain to start another nerve.
-		// .name	: Nerve name
-		// .script	: Nerve script
-		// .data	: array of goodies
-		NPCEVENT_STARTNERVE:
-			//StartNerve(ev.name, ev.script, ev.data);
-		
-		// Set a new opponent!
-		// NOTE: Auto-sets Warmode=1!
-		// .source	: Opponent (mobile)
-		NPCEVENT_OPPONENT:
-			SetOpponent(ev.source);
-		
-		// Say something
-		// .text	: Speech content
-		NPCEVENT_SPEAK:
-			say(ev.text);
-		
-		// Turn toward something
-		// .source	: Target (anything)
-		// .direction	: NETURN_TOWARD or NETURN_AWAY
-		NPCEVENT_TURN:
-			case (ev.direction)
-				NETURN_TOWARD:
-					TurnToward(ev.source);
-				NETURN_AWAY:
-					TurnAwayFrom(ev.source);
-			endcase
-		
-		// Face towards or away from XY coordinates.
-		// .x and .y replace .source for TURN_XY
-		// .direction	: NETURN_TOWARD or NETURN_AWAY
-		NPCEVENT_TURN_XY:
-			case (ev.direction)
-				NETURN_TOWARD:
-					TurnTowardLocation(ev.x, ev.y);
-				NETURN_AWAY:
-					TurnAwayFromLocation(ev.x, ev.y);
-			endcase
-		
-		// Set WarMode state
-		// NOTE: Auto-clears Opponent if turned off!
-		// .value : 0=Off. 1=On.
-		NPCEVENT_WARMODE:
-			SetWarmode( ev.value );
-		
-		// Wander somewhere
-		NPCEVENT_WANDER:
-	   		Wander();
-	   	
-	   	// Force the npc to go into its sleep mode.
-	   	// If the next event in the queue tells it to wake up,
-	   	// this command will be useless.
-	   	NPCEVENT_SLEEP:
-	   		//idle_ticks := g_settings["idle_ticks"]+1;
-	   	
-	   	// Force the npc out of sleep mode.
-	   	NPCEVENT_WAKEUP:
-	   		//sleep_mode := 0;
-	   		//idle_ticks := 0;
-	   		
-	   	// Forward an event from one nerve to another.
-	   	// .NerveName	: The name of the nerve to forward the event to.
-	   	// .mask	: Type of event for the nerve to receive.
-	   	// .data	: Data to forward to the nerve.
-	   	NPCEVENT_FWDNERVE:
-	   		var process := 0; //GetNerve(ev.NerveName);
-			if ( process )
-				process.SendEvent(ev);
-			endif
-			
-		// If the event .type is unknown, send it to the
-		// npc's "virtual" nerve if it has one.
-	   	default:
-	   		if ( g_settings.exists("virtual_nerve") )
-	   			var process := 0; //GetNerve("Virtual");
-				if ( !process )
-					//StartNerve("Virtual", g_g_settings["virtual_nerve"], {npc, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-	   endcase
-
-	   // If the event has a .process, reply to it by sending
-	   // an event with .type being the NPCEVENT_DONE constant
-	   // and telling it what event it sent that has finished
-	   // being processed.
-	   if ( ev.process )
-	   	var temp := struct;
-	   	temp.+type := NPCEVENT_DONE;
-	   	temp.+source := ev.type;
-	   	(ev.process).SendEvent(temp);
-	   endif
-	   
-	   set_priority(old_priority);
-endfunction
\ No newline at end of file



From austin at berlios.de  Thu Sep  1 15:24:22 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 1 Sep 2005 15:24:22 +0200
Subject: [Poldistro-svn] r30 - trunk/096/pkg/mobiles/ai_brain/include/braincore
Message-ID: <200509011324.j81DOMXa023996@sheep.berlios.de>

Author: austin
Date: 2005-09-01 15:24:22 +0200 (Thu, 01 Sep 2005)
New Revision: 30

Added:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc
Log:


Added: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc	2005-09-01 13:21:52 UTC (rev 29)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc	2005-09-01 13:24:22 UTC (rev 30)
@@ -0,0 +1,281 @@
+/*===============================================================
+* Current Version
+* EVENTPROCESSOR.INC - v1.0
+* Updated 9/1/2005 6:20AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+function ProcessEvent(byref ev)
+	var old_priority := set_priority(25);
+	
+	case( ev.type )
+		//Check movement first, since its the event
+		//that seems to be sent most often.
+
+		// Move NPC
+		// .source	: From/To whom/what?
+		// .speed	: Walk/Run
+		// .direction	: Away/Towards
+		// .loop	: Number of times to attempt to loop the movement.
+		NPCEVENT_MOVE:
+			Movement(ev);
+		
+		// Instructs the npc to walk toward an XY coordinate.
+		// .x and .y	: From/To  coordinates
+		// .speed	: Walk/Run
+		// .direction	: Away/Towards
+		// .loop	: Number of times to attempt to loop the movement.
+		NPCEVENT_MOVE_XY:
+			MovementXY(ev);
+		
+		// Triggered when a mobile enter's the npcs "reaction_range".
+		// .source	: What entered the area
+		SYSEVENT_ENTEREDAREA:
+			if ( g_settings.exists("enter_react_script") )
+				var process := 0; //GetNerve("EnterReaction");
+				if ( !process )
+					//StartNerve("EnterReaction", g_settings["enter_react_script"], {me, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+		
+		// Triggered when a mobile leaves the npc's "leave_react_range".
+		// .source	: What left the area
+		SYSEVENT_LEFTAREA:
+			if ( g_settings.exists("leave_react_script") )
+				var process := 0; //GetNerve("LeaveReaction");
+				if ( !process )
+					//StartNerve("LeaveReaction", g_settings["leave_react_script"], {me, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+		
+		// Sent when something targets the npc to begin combat or
+		// when something has damaged the npc.
+		// .source	: What caused the damage or engaged the npc
+		// For SYSEVENT_DAMAGED
+		// .damaged	: Integer amount of damage.
+		SYSEVENT_ENGAGED:
+		SYSEVENT_DAMAGED:
+			if ( g_settings.exists("combat_script") )
+				if ( (ev.source).ISA(POLCLASS_MOBILE) )
+					var process := 0; //GetNerve("Combat");
+					if ( !process )
+						//StartNerve("Combat", g_settings["combat_script"], {me, ev, settings});
+					else
+						process.SendEvent(ev);
+					endif
+				endif
+			endif
+		
+		// Instructs the npc to run its disengage nerve.
+		// When something attacking it goes out of warmode, this is run.
+		// .source	: What was targetting this npc but has now left combat mode.
+		SYSEVENT_DISENGAGED:
+			if ( g_settings.exists("disengage_script") )
+				var process := 0; //GetNerve("Disengage");
+				if ( !process )
+					//StartNerve("Disengage", g_settings["disengage_script"], {me, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+		
+		// When speech is made by a player, this nerve is used.
+		// Note: The NPC function Say() doesnt yet pass around the speech event.
+		// .source	: Where the speech originated.
+		// .text	: The actual speech
+		// extra 095 stuff
+		// .uc_text	: a "Unicode array" of 2-byte "Big Endian" integers.
+		// .langcode	: a 3-character, uppercase language code.
+		// .texttype	: "yell", "whisper", "emote", "default".
+		SYSEVENT_SPEECH:
+			if( g_settings.exists("listen_script") )
+				var process := 0; //GetNerve("Speech");
+				if ( !process )
+					//StartNerve("Speech", g_settings["listen_script"], {me, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+		
+		// Instructs the npc to run its double click script.
+		// Run when the npc is double clicked by a player.
+		// .source	: What sent the double click
+		SYSEVENT_DOUBLECLICKED:
+			if ( g_settings.exists("dbl_click_script") )
+				if ( Distance(ev.source, npc) <= g_settings["dbl_click_range"] )
+					var process := 0; //GetNerve("DblClick");
+					if ( !process )
+						//StartNerve("DblClick", g_settings["dbl_click_script"], {npc, ev, settings});
+					else
+						process.SendEvent(ev);
+					endif
+				endif
+			endif
+			
+		// The NPC is a merchant, and has sold or purchased something.
+		// Both sold and bought events are sent to this same nerve.
+		// The best thing to do is fork it into two functions inside the
+		// nerve script to handle each event type.
+		// MERCHANT_SOLD means the merchant sold an item to the player.
+		// MERCHANT_BOUGHT means the merchatn bought something from the player.
+		//
+		// .source	: Who the merchant is selling to/buying from.
+		// .amount	: Gold amount for the sale/purchase.
+		SYSEVENT_MERCHANT_SOLD:
+		SYSEVENT_MERCHANT_BOUGHT:
+			if ( g_settings.exists("merchant_script") )
+				var process := 0; //GetNerve("Merchant");
+				if ( !process )
+					//StartNerve("Merchant", g_settings["merchant_script"], {npc, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+		
+		// Someone has dragged an item onto the npc.
+		// .source	: What dragged the item over the npc.
+		// .item	: The item being given to the npc.
+		SYSEVENT_ITEM_GIVEN:
+			if ( g_settings.exists("give_item_script") )
+				var process := 0; //GetNerve("GiveItem");
+				if ( !process )
+					//StartNerve("GiveItem", g_settings["give_item_script"], {npc, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+				
+		// Instructs the npc to run its flee script.
+		// .source	: What to flee from.
+		NPCEVENT_FLEE:
+			if ( g_settings.exists("flee_script") )
+				var process := 0; //GetNerve("Flee");
+				if ( !process )
+					//StartNerve("Flee", g_settings["flee_script"], {npc, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+			
+		// The npc has killed its opponent and
+		// the combat script has sent the winfight event
+		// .source	: Defeated foe!
+		NPCEVENT_WINFIGHT:
+			if ( g_settings.exists("win_script") )
+				var process := 0; //GetNerve("Win");
+				if ( !process )
+					//StartNerve("Win", g_settings["win_script"], {npc, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+			
+		//A nerve has instructed the brain to kill another nerve or its self.
+		// .name	: Nerve name
+		NPCEVENT_ENDNERVE:
+			//KillNerve(ev.name);
+			
+		//A nerve has instructed the brain to start another nerve.
+		// .name	: Nerve name
+		// .script	: Nerve script
+		// .data	: array of goodies
+		NPCEVENT_STARTNERVE:
+			//StartNerve(ev.name, ev.script, ev.data);
+		
+		// Set a new opponent!
+		// NOTE: Auto-sets Warmode=1!
+		// .source	: Opponent (mobile)
+		NPCEVENT_OPPONENT:
+			SetOpponent(ev.source);
+		
+		// Say something
+		// .text	: Speech content
+		NPCEVENT_SPEAK:
+			say(ev.text);
+		
+		// Turn toward something
+		// .source	: Target (anything)
+		// .direction	: NETURN_TOWARD or NETURN_AWAY
+		NPCEVENT_TURN:
+			case (ev.direction)
+				NETURN_TOWARD:
+					TurnToward(ev.source);
+				NETURN_AWAY:
+					TurnAwayFrom(ev.source);
+			endcase
+		
+		// Face towards or away from XY coordinates.
+		// .x and .y replace .source for TURN_XY
+		// .direction	: NETURN_TOWARD or NETURN_AWAY
+		NPCEVENT_TURN_XY:
+			case (ev.direction)
+				NETURN_TOWARD:
+					TurnTowardLocation(ev.x, ev.y);
+				NETURN_AWAY:
+					TurnAwayFromLocation(ev.x, ev.y);
+			endcase
+		
+		// Set WarMode state
+		// NOTE: Auto-clears Opponent if turned off!
+		// .value : 0=Off. 1=On.
+		NPCEVENT_WARMODE:
+			SetWarmode( ev.value );
+		
+		// Wander somewhere
+		NPCEVENT_WANDER:
+	   		Wander();
+	   	
+	   	// Force the npc to go into its sleep mode.
+	   	// If the next event in the queue tells it to wake up,
+	   	// this command will be useless.
+	   	NPCEVENT_SLEEP:
+	   		//idle_ticks := g_settings["idle_ticks"]+1;
+	   	
+	   	// Force the npc out of sleep mode.
+	   	NPCEVENT_WAKEUP:
+	   		//sleep_mode := 0;
+	   		//idle_ticks := 0;
+	   		
+	   	// Forward an event from one nerve to another.
+	   	// .NerveName	: The name of the nerve to forward the event to.
+	   	// .mask	: Type of event for the nerve to receive.
+	   	// .data	: Data to forward to the nerve.
+	   	NPCEVENT_FWDNERVE:
+	   		var process := 0; //GetNerve(ev.NerveName);
+			if ( process )
+				process.SendEvent(ev);
+			endif
+			
+		// If the event .type is unknown, send it to the
+		// npc's "virtual" nerve if it has one.
+	   	default:
+	   		if ( g_settings.exists("virtual_nerve") )
+	   			var process := 0; //GetNerve("Virtual");
+				if ( !process )
+					//StartNerve("Virtual", g_g_settings["virtual_nerve"], {npc, ev, settings});
+				else
+					process.SendEvent(ev);
+				endif
+			endif
+	   endcase
+
+	   // If the event has a .process, reply to it by sending
+	   // an event with .type being the NPCEVENT_DONE constant
+	   // and telling it what event it sent that has finished
+	   // being processed.
+	   if ( ev.process )
+	   	var temp := struct;
+	   	temp.+type := NPCEVENT_DONE;
+	   	temp.+source := ev.type;
+	   	(ev.process).SendEvent(temp);
+	   endif
+	   
+	   set_priority(old_priority);
+endfunctions
\ No newline at end of file



From austin at berlios.de  Thu Sep  1 15:49:47 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 1 Sep 2005 15:49:47 +0200
Subject: [Poldistro-svn] r32 - trunk/096/pkg/mobiles/ai_brain/include
Message-ID: <200509011349.j81DnlwE025549@sheep.berlios.de>

Author: austin
Date: 2005-09-01 15:49:47 +0200 (Thu, 01 Sep 2005)
New Revision: 32

Modified:
   trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc	2005-09-01 13:33:56 UTC (rev 31)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc	2005-09-01 13:49:47 UTC (rev 32)
@@ -474,15 +474,18 @@
  * no_wake:	Optional wakeup flag:
  *		WAKEUP - Will stop the sleep script if it is running - Default.
  *		NOWAKE - Will not stop the sleep script if it is running.
+ * loop:	Number of times to attempt to wander.
+ *		Note: Loop can be interrupted and end prematurely!
  *
  * Return value
  * Result of SendEvent()
  *
  */
-function AI_Wander(mobile, no_wake:=WAKEUP)
+function AI_Wander(mobile, no_wake:=WAKEUP, loop:=0)
 	var ev		:= struct;
 	ev.+type	:= NPCEVENT_WANDER;
 	ev.+WakeUp	:= no_wake;
+	ev.+loop	:= CInt(loop);
 	ev.+process	:= GetProcess(GetPid());
 
 	return SendEvent(mobile, ev);



From austin at berlios.de  Thu Sep  1 15:50:33 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 1 Sep 2005 15:50:33 +0200
Subject: [Poldistro-svn] r33 - trunk/096/pkg/mobiles/ai_brain/include/braincore
Message-ID: <200509011350.j81DoXHp025677@sheep.berlios.de>

Author: austin
Date: 2005-09-01 15:50:33 +0200 (Thu, 01 Sep 2005)
New Revision: 33

Modified:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc	2005-09-01 13:49:47 UTC (rev 32)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc	2005-09-01 13:50:33 UTC (rev 33)
@@ -12,9 +12,10 @@
 	var old_priority := set_priority(25);
 	
 	case( ev.type )
-		//Check movement first, since its the event
-		//that seems to be sent most often.
-
+		//
+		// *Check movement first, since its the event that seems to be sent most often.
+		//
+		
 		// Move NPC
 		// .source	: From/To whom/what?
 		// .speed	: Walk/Run
@@ -22,7 +23,8 @@
 		// .loop	: Number of times to attempt to loop the movement.
 		NPCEVENT_MOVE:
 			Movement(ev);
-		
+			break;
+			
 		// Instructs the npc to walk toward an XY coordinate.
 		// .x and .y	: From/To  coordinates
 		// .speed	: Walk/Run
@@ -30,8 +32,15 @@
 		// .loop	: Number of times to attempt to loop the movement.
 		NPCEVENT_MOVE_XY:
 			MovementXY(ev);
-		
-		// Triggered when a mobile enter's the npcs "reaction_range".
+			break;
+			
+		// Wander somewhere
+		// .loop	: Number of times to attept to wander.
+		NPCEVENT_WANDER:
+	   		MovementWander();
+	   		break;
+			
+		// Triggered when a mobile enter's the npcs 'area size'.
 		// .source	: What entered the area
 		SYSEVENT_ENTEREDAREA:
 			if ( g_settings.exists("enter_react_script") )
@@ -42,8 +51,13 @@
 					process.SendEvent(ev);
 				endif
 			endif
-		
-		// Triggered when a mobile leaves the npc's "leave_react_range".
+			break;
+			
+		//
+		// * Check System Events that the core sends.
+		//
+			
+		// Triggered when a mobile leaves the npc's 'area size'.
 		// .source	: What left the area
 		SYSEVENT_LEFTAREA:
 			if ( g_settings.exists("leave_react_script") )
@@ -54,7 +68,8 @@
 					process.SendEvent(ev);
 				endif
 			endif
-		
+			break;
+			
 		// Sent when something targets the npc to begin combat or
 		// when something has damaged the npc.
 		// .source	: What caused the damage or engaged the npc
@@ -72,7 +87,8 @@
 					endif
 				endif
 			endif
-		
+			break;
+			
 		// Instructs the npc to run its disengage nerve.
 		// When something attacking it goes out of warmode, this is run.
 		// .source	: What was targetting this npc but has now left combat mode.
@@ -85,12 +101,12 @@
 					process.SendEvent(ev);
 				endif
 			endif
-		
+			break;
+			
 		// When speech is made by a player, this nerve is used.
 		// Note: The NPC function Say() doesnt yet pass around the speech event.
 		// .source	: Where the speech originated.
 		// .text	: The actual speech
-		// extra 095 stuff
 		// .uc_text	: a "Unicode array" of 2-byte "Big Endian" integers.
 		// .langcode	: a 3-character, uppercase language code.
 		// .texttype	: "yell", "whisper", "emote", "default".
@@ -103,7 +119,8 @@
 					process.SendEvent(ev);
 				endif
 			endif
-		
+			break;
+			
 		// Instructs the npc to run its double click script.
 		// Run when the npc is double clicked by a player.
 		// .source	: What sent the double click
@@ -118,6 +135,7 @@
 					endif
 				endif
 			endif
+			break;
 			
 		// The NPC is a merchant, and has sold or purchased something.
 		// Both sold and bought events are sent to this same nerve.
@@ -138,7 +156,8 @@
 					process.SendEvent(ev);
 				endif
 			endif
-		
+			break;
+			
 		// Someone has dragged an item onto the npc.
 		// .source	: What dragged the item over the npc.
 		// .item	: The item being given to the npc.
@@ -151,6 +170,11 @@
 					process.SendEvent(ev);
 				endif
 			endif
+			break;
+			
+		//
+		// * Check custom events
+		//
 				
 		// Instructs the npc to run its flee script.
 		// .source	: What to flee from.
@@ -163,24 +187,13 @@
 					process.SendEvent(ev);
 				endif
 			endif
+			break;
 			
-		// The npc has killed its opponent and
-		// the combat script has sent the winfight event
-		// .source	: Defeated foe!
-		NPCEVENT_WINFIGHT:
-			if ( g_settings.exists("win_script") )
-				var process := 0; //GetNerve("Win");
-				if ( !process )
-					//StartNerve("Win", g_settings["win_script"], {npc, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			
 		//A nerve has instructed the brain to kill another nerve or its self.
 		// .name	: Nerve name
 		NPCEVENT_ENDNERVE:
 			//KillNerve(ev.name);
+			break;
 			
 		//A nerve has instructed the brain to start another nerve.
 		// .name	: Nerve name
@@ -188,18 +201,23 @@
 		// .data	: array of goodies
 		NPCEVENT_STARTNERVE:
 			//StartNerve(ev.name, ev.script, ev.data);
-		
+			break;
+			
 		// Set a new opponent!
 		// NOTE: Auto-sets Warmode=1!
 		// .source	: Opponent (mobile)
 		NPCEVENT_OPPONENT:
 			SetOpponent(ev.source);
-		
+			break;
+			
 		// Say something
 		// .text	: Speech content
+		// .texttype	: Speech type ("default", "whisper", yell")
+		// .doevent	: Sends SYSEVENT_SPEECH to surrounding npcs
 		NPCEVENT_SPEAK:
-			say(ev.text);
-		
+			Say(ev.text, ev.texttype, ev.doevent);
+			break;
+			
 		// Turn toward something
 		// .source	: Target (anything)
 		// .direction	: NETURN_TOWARD or NETURN_AWAY
@@ -210,7 +228,8 @@
 				NETURN_AWAY:
 					TurnAwayFrom(ev.source);
 			endcase
-		
+			break;
+			
 		// Face towards or away from XY coordinates.
 		// .x and .y replace .source for TURN_XY
 		// .direction	: NETURN_TOWARD or NETURN_AWAY
@@ -221,27 +240,27 @@
 				NETURN_AWAY:
 					TurnAwayFromLocation(ev.x, ev.y);
 			endcase
-		
+			break;
+			
 		// Set WarMode state
 		// NOTE: Auto-clears Opponent if turned off!
 		// .value : 0=Off. 1=On.
 		NPCEVENT_WARMODE:
 			SetWarmode( ev.value );
-		
-		// Wander somewhere
-		NPCEVENT_WANDER:
-	   		Wander();
-	   	
+			break;
+	   		
 	   	// Force the npc to go into its sleep mode.
 	   	// If the next event in the queue tells it to wake up,
 	   	// this command will be useless.
 	   	NPCEVENT_SLEEP:
 	   		//idle_ticks := g_settings["idle_ticks"]+1;
-	   	
+	   		break;
+	   		
 	   	// Force the npc out of sleep mode.
 	   	NPCEVENT_WAKEUP:
 	   		//sleep_mode := 0;
 	   		//idle_ticks := 0;
+	   		break;
 	   		
 	   	// Forward an event from one nerve to another.
 	   	// .NerveName	: The name of the nerve to forward the event to.
@@ -252,6 +271,7 @@
 			if ( process )
 				process.SendEvent(ev);
 			endif
+			break;
 			
 		// If the event .type is unknown, send it to the
 		// npc's "virtual" nerve if it has one.
@@ -264,6 +284,7 @@
 					process.SendEvent(ev);
 				endif
 			endif
+			break;
 	   endcase
 
 	   // If the event has a .process, reply to it by sending
@@ -271,10 +292,7 @@
 	   // and telling it what event it sent that has finished
 	   // being processed.
 	   if ( ev.process )
-	   	var temp := struct;
-	   	temp.+type := NPCEVENT_DONE;
-	   	temp.+source := ev.type;
-	   	(ev.process).SendEvent(temp);
+	   	(ev.process).SendEvent(struct{"type":=NPCEVENT_DONE, "source":=ev.type});
 	   endif
 	   
 	   set_priority(old_priority);

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc	2005-09-01 13:49:47 UTC (rev 32)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc	2005-09-01 13:50:33 UTC (rev 33)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * MOVEMENT.INC - v1.0
-* Updated 8/30/2005 6:52AM
+* Updated 9/1/2005 6:42AM
 *
 * -- Revision v1.0 --
 * Austin:
@@ -113,6 +113,26 @@
 endfunction
 
 /*
+ * MovementWander(ev)
+ *
+ * Purpose
+ * Handles NPC wander movement for the brain.
+ *
+ * Parameters
+ * ev:	Strucuture containing event information.
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function MovementWander(ev)
+	repeat
+		Wander();
+		sleepms(3);
+	until ( !MoveLoopCheck(ev) );
+endfunction
+
+/*
  * MoveLoop(ev)
  *
  * Purpose



From panosl at berlios.de  Thu Sep  1 16:30:02 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Thu, 1 Sep 2005 16:30:02 +0200
Subject: [Poldistro-svn] r34 - trunk/096/pkg/mobiles/ai_brain/commands/gm
Message-ID: <200509011430.j81EU2jr029128@sheep.berlios.de>

Author: panosl
Date: 2005-09-01 16:30:01 +0200 (Thu, 01 Sep 2005)
New Revision: 34

Modified:
   trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src	2005-09-01 13:50:33 UTC (rev 33)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src	2005-09-01 14:30:01 UTC (rev 34)
@@ -2,15 +2,25 @@
 use uo;
 use os;
 
-include ":ai_brain:include/NPC_Commands";
+include ":ai_brain:NPC_Commands";
+include "include/messages";
+include "include/localization";
 
-program FixAI(who)
-	var targ := target(who);
-	
-	if ( targ.IsA(POLCLASS_NPC) )
-		AI_Sleep(targ);
+
+program command_puttosleep(who)
+	var mobile; := target(who);
+
+	SendMessage(who, MSG_TARGET_MOB, {}, MSG_COMMAND);
+
+	if ((mobile := Target(who, TGTOPT_NOCHECK_LOS)) == 0)
+		SendMessage(who, MSG_CANCELLED, {}, MSG_COMMAND);
+	endif
+
+	if (!mobile.IsA(POLCLASS_NPC))
+		SendMessage(who, MSG_NO_MOB, {}, MSG_COMMAND);
+		return 0;
 	else
-		SendSysMessage(who, "Cancelled.");
-		return 0;
+		AI_Sleep(mobile);
+		SendMessage(who, MSG_DONE, {}, MSG_COMMAND);
 	endif
 endprogram
\ No newline at end of file



From austin at berlios.de  Fri Sep  2 03:04:41 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 2 Sep 2005 03:04:41 +0200
Subject: [Poldistro-svn] r35 - trunk/096/pkg/mobiles/ai_brain/include
Message-ID: <200509020104.j8214f2a010349@sheep.berlios.de>

Author: austin
Date: 2005-09-02 03:04:38 +0200 (Fri, 02 Sep 2005)
New Revision: 35

Modified:
   trunk/096/pkg/mobiles/ai_brain/include/eventid.inc
   trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/include/eventid.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/eventid.inc	2005-09-01 14:30:01 UTC (rev 34)
+++ trunk/096/pkg/mobiles/ai_brain/include/eventid.inc	2005-09-02 01:04:38 UTC (rev 35)
@@ -16,7 +16,6 @@
 const NPCEVENT_SPEAK				:= 0xA00005;	// Speak (.text)
 const NPCEVENT_TURN				:= 0xA00006;	// Turn towards or away from an object
 const NPCEVENT_WARMODE				:= 0xA00007;	// Set WarMode state (.value=0|1)
-const NPCEVENT_WINFIGHT				:= 0xA00008;	// NPC killed '.source' mobile
 const NPCEVENT_FLEE				:= 0xA00009;	// Tell the NPC to flee
 const NPCEVENT_ATTACK				:= 0xA0000A;	// Tell the npc to attack something
 const NPCEVENT_MOVE_XY				:= 0xA0000B;	// Tell the NPC to move to coordinates

Modified: trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc	2005-09-01 14:30:01 UTC (rev 34)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc	2005-09-02 01:04:38 UTC (rev 35)
@@ -26,6 +26,7 @@
 // AI_MoveXY()
 // AI_SetOpponent()
 // AI_Sleep()
+// AI_Speak()
 // AI_StartNerve()
 // AI_Turn()
 // AI_TurnXY()



From austin at berlios.de  Fri Sep  2 05:02:54 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 2 Sep 2005 05:02:54 +0200
Subject: [Poldistro-svn] r36 - trunk/096/scripts/include
Message-ID: <200509020302.j8232sxO027018@sheep.berlios.de>

Author: austin
Date: 2005-09-02 05:02:48 +0200 (Fri, 02 Sep 2005)
New Revision: 36

Modified:
   trunk/096/scripts/include/sysEvent.inc
Log:


Modified: trunk/096/scripts/include/sysEvent.inc
===================================================================
--- trunk/096/scripts/include/sysEvent.inc	2005-09-02 01:04:38 UTC (rev 35)
+++ trunk/096/scripts/include/sysEvent.inc	2005-09-02 03:02:48 UTC (rev 36)
@@ -35,6 +35,9 @@
 const SYSEVENT_DOUBLECLICKED        := 0x00000800;
 
 const SYSEVENT_GHOST_SPEECH         := 0x00001000;
+
+const SYSEVENT_GONE_CRIMINAL        := 0x00002000;
+
 const SYSEVENT_RESERVED_00002000    := 0x00002000;
 const SYSEVENT_RESERVED_00004000    := 0x00004000;
 const SYSEVENT_RESERVED_00008000    := 0x00008000;



From austin at berlios.de  Fri Sep  2 08:35:17 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 2 Sep 2005 08:35:17 +0200
Subject: [Poldistro-svn] r37 - trunk/096/pkg/mobiles/ai_brain/include
Message-ID: <200509020635.j826ZHDE032607@sheep.berlios.de>

Author: austin
Date: 2005-09-02 08:35:17 +0200 (Fri, 02 Sep 2005)
New Revision: 37

Added:
   trunk/096/pkg/mobiles/ai_brain/include/npc_error.inc
   trunk/096/pkg/mobiles/ai_brain/include/npc_nerves.inc
Modified:
   trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc	2005-09-02 03:02:48 UTC (rev 36)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc	2005-09-02 06:35:17 UTC (rev 37)
@@ -11,30 +11,29 @@
 use uo;
 use os;
 
-include "include/sysevent";
+include "include/sysEvent";
 include ":ai_brain:include/eventid";
 
 /////////////////////////////////////////////////////////////////
 // * Function List *
 //
-// AI_Attack()
-// AI_ClearThoughts()
-// AI_EndNerve()
-// AI_Flee()
-// AI_FowardEvent()
-// AI_Move()
-// AI_MoveXY()
-// AI_SetOpponent()
-// AI_Sleep()
-// AI_Speak()
-// AI_StartNerve()
-// AI_Turn()
-// AI_TurnXY()
-// AI_WakeUp()
-// AI_Wander()
-// AI_Warmode()
-// AI_WinFight()
-//
+// AI_Attack(mobile, opponent, no_wake:=WAKEUP)
+// AI_ClearThoughts(mobile, flags)
+// AI_EndNerve(mobile, nerve_name, no_wake:=WAKEUP)
+// AI_Flee(mobile, opponent, no_wake:=WAKEUP)
+// AI_FowardEvent(mobile, nerve_name, mask, data, no_wake:=WAKEUP)
+// AI_Move(mobile, object, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
+// AI_MoveXY(mobile, x, y, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
+// AI_SetOpponent(mobile, opponent, no_wake:=WAKEUP)
+// AI_Sleep(mobile)
+// AI_Speak(mobile, text, text_type:=SPEAK_TEXTTYPE_DEFAULT, do_event:=SPEAK_DOEVENT_DISABLE, no_wake:=WAKEUP)
+// AI_StartNerve(mobile, nerve_name, script_name, data, no_wake:=WAKEUP)
+// AI_Turn(mobile, turn_to, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
+// AI_TurnXY(mobile, x, y, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
+// AI_WakeUp(mobile)
+// AI_Wander(mobile, no_wake:=WAKEUP, loop:=0)
+// AI_WarMode(mobile, mode:=0, no_wake:=WAKEUP)
+// 
 /////////////////////////////////////////////////////////////////
 
 /*

Added: trunk/096/pkg/mobiles/ai_brain/include/npc_error.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_error.inc	2005-09-02 03:02:48 UTC (rev 36)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_error.inc	2005-09-02 06:35:17 UTC (rev 37)
@@ -0,0 +1,36 @@
+/*===============================================================
+* Current Version
+* NPC_ERRORS.INC - v1.0
+* Updated 8/31/2005 5:08AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+
+/*
+ * NPC_ErrorSysLog(errmsg)
+ *
+ * Purpose
+ * Logs an error message.
+ *
+ * Parameters
+ * errmsg:	Error message
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function NPC_ErrorSysLog(mobile, errmsg)
+	Set_Critical(1);
+	SysLog("NPC Template: " + mobile.npctemplate);
+	SysLog("NPC Name    : " + mobile.name);
+	SysLog(errmsg );
+	SysLog("------------");
+	Set_Critical(0);
+	
+	return 1;
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/include/npc_nerves.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_nerves.inc	2005-09-02 03:02:48 UTC (rev 36)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_nerves.inc	2005-09-02 06:35:17 UTC (rev 37)
@@ -0,0 +1,213 @@
+/*===============================================================
+* Current Version
+* NERVES.INC - v1.0
+* Updated 9/1/2005 6:15PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+
+include ":ai_brain:include/npc_error";
+
+/////////////////////////////////////////////////////////////////
+// * Function List *
+//
+// GetNerveFlags(mobile, nerve_name, byref nerve_dict:=0)
+// GetNerveProcess(mobile, nerve_name, byref nerve_dict:=0)
+// LoadNerves(mobile)
+// SaveNerves(mobile, nerve_dict)
+// StartNerve(mobile, nerve_name, nerve_script, data:=array, flags:=NF_NO_FLAGS, byref nerve_dict:=0)
+// StopNerve(mobile, nerve_name, byref nerve_dict:=0)
+//
+/////////////////////////////////////////////////////////////////
+// * Global Varibles *
+//
+// Nerve flags
+const NF_NO_FLAGS		:= 0x0;
+const NF_CONTINUE_ON_SLEEP	:= 0x1;
+//
+/////////////////////////////////////////////////////////////////
+
+/*
+ * LoadNerves()
+ *
+ * Purpose
+ * Loads nerve information for an npc.
+ *
+ * Parameters
+ * mobile:	NPC to get the nerve settings from.
+ *
+ * Return value
+ * Returns a dictionary
+ *
+ */
+function LoadNerves(mobile)
+	var nerve_dict := GetObjProperty(mobile, "#NerveInfo");
+	if ( Lower(TypeOf(nerve_dict)) != "dictionary" )
+		nerve_dict := dictionary;
+	endif
+
+	return nerve_dict;
+endfunction
+
+/*
+ * SaveNerves(mobile, nerve_dict)
+ *
+ * Purpose
+ * Saves nerve information for an npc.
+ *
+ * Parameters
+ * mobile:	NPC to save the nerve settings on.
+ * nerve_dict:	Dictionary containing nerve information.
+ *
+ * Return value
+ * Returns 1 on success
+ *
+ */
+function SaveNerves(mobile, nerve_dict)
+	return SetObjProperty(mobile, "#NerveInfo", nerve_dict);
+endfunction
+
+/*
+ * GetNerveProcess(mobile, nerve_name, byref nerve_dict)
+ *
+ * Purpose
+ * Retrieves a reference to a running nerve script.
+ *
+ * Parameters
+ * mobile:	NPC to get the nerve information from.
+ * nerve_name:	Name of the nerve to get the information for.
+ * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
+ *
+ * Return value
+ * Returns a script reference.
+ *
+ */
+function GetNerveProcess(mobile, nerve_name, byref nerve_dict:=0)
+	if ( !nerve_dict )
+		nerve_dict := LoadNerves(mobile);
+	endif
+
+	if ( nerve_dict.exists(nerve_name) )
+		return GetProcess(CInt(nerve_dict[nerve_name].pid));
+	else
+		return error{"errortext" := "GetNerveProcess() - Invalid nerve name  ["+nerve_name+"]"};
+	endif
+endfunction
+
+/*
+ * GetNerveFlags(mobile, nerve_name, byref nerve_dict)
+ *
+ * Purpose
+ * Retrieves the flag setting set on a nerve.
+ *
+ * Parameters
+ * mobile:	NPC to get the nerve information from.
+ * nerve_name:	Name of the nerve to get the information for.
+ * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
+ *
+ * Return value
+ * Returns a script reference.
+ *
+ */
+function GetNerveFlags(mobile, nerve_name, byref nerve_dict:=0)
+	if ( !nerve_dict )
+		nerve_dict := LoadNerves(mobile);
+	endif
+
+	if ( nerve_dict.exists(nerve_name) )
+		return GetProcess(CInt(nerve_dict[nerve_name].flags));
+	else
+		return error{"errortext" := "GetNerveProcess() - Invalid nerve name  ["+nerve_name+"]"};
+	endif
+endfunction
+
+/*
+ * StartNerve(mobile, nerve_name, nerve_script, data, flags, byref nerve_dict)
+ *
+ * Purpose
+ * Starts up a nerve script.
+ *
+ * Parameters
+ * mobile:	NPC the nerve will be running for.
+ * nerve_name:	The name the nerve script will be run under. (Example: "combat_script")
+ * data:	Array of data to send to the nerve script when it starts.
+ * flags:	Can contain anything - but should use NF_* flags for bitwise checks.
+ * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
+ *
+ * Notes:
+ * data[1] - Will contain the mobile argument.
+ * data[2] - Will contain the nerve name argument.
+ * If data is not an array, it will be placed at index[3].
+ * If data is sent as an array, it will begin at the index of [3].
+ *
+ * Return value
+ * Returns a script reference to the nerve script.
+ *
+ */
+function StartNerve(mobile, nerve_name, nerve_script, data:=array, flags:=NF_NO_FLAGS, byref nerve_dict:=0)
+	if ( Lower(TypeOf(data)) != "array")
+		data := array{data};
+	endif
+	//Mobile is always the begining of the data array.
+	data.Insert(1, mobile);
+	//Nerve name is always the second part of the data array.
+	data.Insert(2, nerve_name);
+
+	var process := start_script(nerve_script, data);
+
+	if ( process.errortext )
+		var errmsg := "StartNerve() ["+nerve_name+"] ["+nerve_script+"] failed to start! ->"+process.errortext;
+		NPC_ErrorSysLog(mobile, errmsg);
+		return error{"errortext":=errmsg};
+	else
+		//Before setting the new nerve, check if one is already running.
+		if ( nerve_dict.exists(nerve_name) )
+			//Stop the old nerve, before storing the new one.
+			StopNerve(mobile, nerve_name, nerve_dict);
+		endif
+		var nerve_info := struct;
+		nerve_info.+pid := process.pid;
+		nerve_info.+flags := flags;
+		nerve_dict[nerve_name] := nerve_info;
+
+		SaveNerves(mobile, nerve_dict);
+
+		return process;
+	endif
+endfunction
+
+/*
+ * StopNerve(mobile, nerve_name, byref nerve_dict)
+ *
+ * Purpose
+ * Starts up a nerve script.
+ *
+ * Parameters
+ * mobile:	NPC the nerve will be stopped on.
+ * nerve_name:	The name of the nerve script to stop.
+ * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
+ *
+ * Return value
+ * Returns 1 on success.
+ *
+ */
+function StopNerve(mobile, nerve_name, byref nerve_dict:=0)
+	if ( !nerve_dict )
+		nerve_dict := LoadNerves(mobile);
+	endif
+
+	if ( nerve_dict.Exists(nerve_name) )
+		GetNerveProcess(mobile, nerve_name, nerve_dict).kill();
+		nerve_dict.Erase(nerve_name);
+
+		return SaveNerves(mobile, nerve_dict);
+	else
+		return error{"errortext" := "StopNerve() - Invalid nerve name  ["+nerve_name+"]"};
+	endif
+endfunction
+



From austin at berlios.de  Fri Sep  2 08:36:02 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 2 Sep 2005 08:36:02 +0200
Subject: [Poldistro-svn] r38 - trunk/096/pkg/mobiles/ai_brain/include/braincore
Message-ID: <200509020636.j826a28q032643@sheep.berlios.de>

Author: austin
Date: 2005-09-02 08:36:02 +0200 (Fri, 02 Sep 2005)
New Revision: 38

Modified:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc	2005-09-02 06:35:17 UTC (rev 37)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc	2005-09-02 06:36:02 UTC (rev 38)
@@ -8,9 +8,6 @@
 *  Created include file
 ===============================================================*/
 
-use uo;
-use os;
-
 /*
  * FatalError(errmsg)
  *
@@ -29,7 +26,7 @@
 	
 	PrintTextAbove(npc, errmsg, _DEFAULT_TEXT_FONT, 32);
 	
-	BrainSysLog(errmsg);
+	NPC_ErrorSysLog(npc, errmsg);
 	
 	npc.cmdlevel := 1;
 	npc.concealed := 1;
@@ -43,24 +40,4 @@
 	return 1;
 endfunction
 
-/*
- * FatalError(errmsg)
- *
- * Purpose
- * Logs an error message.
- *
- * Parameters
- * errmsg:	Error message
- *
- * Return value
- * Always returns 1
- *
- */
-function BrainSysLog( errmsg )
-	SysLog("NPC Template: " + npc.npctemplate);
-	SysLog("NPC Name    : " + npc.name);
-	SysLog(errmsg );
-	SysLog("------------");
-	
-	return 1;
-endfunction
+

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc	2005-09-02 06:35:17 UTC (rev 37)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc	2005-09-02 06:36:02 UTC (rev 38)
@@ -37,7 +37,7 @@
 		// Wander somewhere
 		// .loop	: Number of times to attept to wander.
 		NPCEVENT_WANDER:
-	   		MovementWander();
+	   		MovementWander(ev);
 	   		break;
 			
 		// Triggered when a mobile enter's the npcs 'area size'.
@@ -287,7 +287,7 @@
 			break;
 	   endcase
 
-	   // If the event has a .process, reply to it by sending
+	   // If the event has a .process member, reply to it by sending
 	   // an event with .type being the NPCEVENT_DONE constant
 	   // and telling it what event it sent that has finished
 	   // being processed.
@@ -296,4 +296,4 @@
 	   endif
 	   
 	   set_priority(old_priority);
-endfunctions
\ No newline at end of file
+endfunction

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc	2005-09-02 06:35:17 UTC (rev 37)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc	2005-09-02 06:36:02 UTC (rev 38)
@@ -8,10 +8,6 @@
 *  Created include file
 ===============================================================*/
 
-use uo;
-use os;
-use npc;
-
 /*
  * Movement(ev)
  *



From austin at berlios.de  Fri Sep  2 08:58:39 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 2 Sep 2005 08:58:39 +0200
Subject: [Poldistro-svn] r39 - trunk/096/pkg/mobiles/ai_brain
Message-ID: <200509020658.j826wdMf000590@sheep.berlios.de>

Author: austin
Date: 2005-09-02 08:58:39 +0200 (Fri, 02 Sep 2005)
New Revision: 39

Modified:
   trunk/096/pkg/mobiles/ai_brain/brain.src
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/brain.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-02 06:36:02 UTC (rev 38)
+++ trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-02 06:58:39 UTC (rev 39)
@@ -17,15 +17,16 @@
 use cfgfile;
 use polsys;
 
-include "include/sysevent";
+include "include/sysEvent";
+include ":ai_brain:include/braincore/error";
+include ":ai_brain:include/braincore/eventprocessor";
+include ":ai_brain:include/braincore/movement";
+include ":ai_brain:include/braincore/setup";
 include ":ai_brain:include/eventid";
 include ":ai_brain:include/npc_commands";
+include ":ai_brain:include/npc_nerves";
 include ":ai_brain:include/npc_settings";
 include ":ai_brain:include/npc_util";
-include ":ai_brain:include/braincore/error";
-include ":ai_brain:include/braincore/eventprocessor";
-include ":ai_brain:include/braincore/movement";
-include ":ai_brain:include/braincore/setup";
 
 //
 // * Global variables
@@ -34,6 +35,7 @@
 var idle_ticks := 0;
 var sleep_mode := 0;
 var g_settings := dictionary;
+var g_nerves := dictionary;
 
 program BrainAI()
 	//Run setup steps for the npc.
@@ -44,8 +46,7 @@
 	StartupScripts();
 	
 	while ( npc )
-		var ev := wait_for_event(g_settings["cycle_wait"]);
-		
+		var ev := Wait_For_Event(g_settings["cycle_wait"]);
 		ProcessEvent(ev);
 	endwhile
 endprogram



From austin at berlios.de  Sat Sep  3 08:02:26 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 3 Sep 2005 08:02:26 +0200
Subject: [Poldistro-svn] r40 - trunk/096/scripts/include
Message-ID: <200509030602.j8362QSj014393@sheep.berlios.de>

Author: austin
Date: 2005-09-03 08:02:21 +0200 (Sat, 03 Sep 2005)
New Revision: 40

Added:
   trunk/096/scripts/include/cfgFile_ex.inc
Log:


Added: trunk/096/scripts/include/cfgFile_ex.inc
===================================================================
--- trunk/096/scripts/include/cfgFile_ex.inc	2005-09-02 06:58:39 UTC (rev 39)
+++ trunk/096/scripts/include/cfgFile_ex.inc	2005-09-03 06:02:21 UTC (rev 40)
@@ -0,0 +1,51 @@
+/*===============================================================
+* Current Version
+* CFGFILE_EX.INC - v1.0
+* Updated 8/30/2005 7:28AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+use cfgfile;
+
+
+/////////////////////////////////////////////////////////////////
+// * Function List *
+// 
+// GetConfigStringDict(cfg_elem, property_name)
+//
+/////////////////////////////////////////////////////////////////
+
+/*
+ * GetConfigStringDictionary(cfg_elem, property_name)
+ *
+ * Purpose
+ * Works similarly as GetConfigStringArray() but sets up the data in a dictionary.
+ *
+ * Parameters
+ * cfg_elem:		Config file element to pull the data from.
+ * property_name:	Property name to use with GetConfigStringArray()
+ *
+ * Return value
+ * Returns a dictionary
+ *
+ */
+function GetConfigStringDictionary(cfg_elem, property_name)
+	var array_data := GetConfigStringArray(cfg_elem, property_name);
+	var dict := dictionary;
+	
+	foreach line in (array_data)
+		var temp := SplitWords(line);
+		var key := temp[1];
+		var data := line[Len(temp)+1, Len(line)];
+		
+		dict[key] := data;
+		sleepms(2);
+	endforeach
+	
+	return dict;
+endfunction



From austin at berlios.de  Sat Sep  3 08:03:20 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 3 Sep 2005 08:03:20 +0200
Subject: [Poldistro-svn] r41 - trunk/096/pkg/mobiles/ai_brain/include
Message-ID: <200509030603.j8363K1C014794@sheep.berlios.de>

Author: austin
Date: 2005-09-03 08:03:19 +0200 (Sat, 03 Sep 2005)
New Revision: 41

Modified:
   trunk/096/pkg/mobiles/ai_brain/include/npc_nerves.inc
   trunk/096/pkg/mobiles/ai_brain/include/npc_settings.inc
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/include/npc_nerves.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_nerves.inc	2005-09-03 06:02:21 UTC (rev 40)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_nerves.inc	2005-09-03 06:03:19 UTC (rev 41)
@@ -68,7 +68,7 @@
  * Returns 1 on success
  *
  */
-function SaveNerves(mobile, nerve_dict)
+function SaveNerves(mobile, byref nerve_dict)
 	return SetObjProperty(mobile, "#NerveInfo", nerve_dict);
 endfunction
 
@@ -134,7 +134,7 @@
  *
  * Parameters
  * mobile:	NPC the nerve will be running for.
- * nerve_name:	The name the nerve script will be run under. (Example: "combat_script")
+ * nerve_name:	The name the nerve script will be run under. (Example: "CombatScript" or "EnterReact")
  * data:	Array of data to send to the nerve script when it starts.
  * flags:	Can contain anything - but should use NF_* flags for bitwise checks.
  * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.

Modified: trunk/096/pkg/mobiles/ai_brain/include/npc_settings.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_settings.inc	2005-09-03 06:02:21 UTC (rev 40)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_settings.inc	2005-09-03 06:03:19 UTC (rev 41)
@@ -54,6 +54,33 @@
 	return settings;
 endfunction
 
+function NPC_LoadScriptSettings(source)
+	var template:=source;
+	if ( source.IsA(POLCLASS_NPC) )
+		template := NPC_ParseTemplateName(source.npctemplate);
+	elseif ( !template.package )
+		template := NPC_ParseTemplateName(template);
+	endif
+	
+	var npc_cfg := ReadConfigFile(template.package+"npcdesc");
+	var npc_elem := npc_cfg[template];
+	
+	var script_list := GetConfigStringArray(npc_elem, "AIScript");
+	var flag_list := GetConfigStringArray(npc_elem, "AIScriptFlag");
+	
+	var script_settings := dictionary;
+	foreach script_line in (script_list)
+		script_line := SplitWords(script_line);
+		var key := script_line[1];
+		var value := script_line[2];
+		var flags := 		
+		
+		var temp := struct;
+		
+		script_settings[key] := struct{"
+		
+endfunction
+
 /*
  * NPC_LoadCustomSettings(npc_ref, settings:=0)
  * 



From austin at berlios.de  Sat Sep  3 08:04:01 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 3 Sep 2005 08:04:01 +0200
Subject: [Poldistro-svn] r42 - trunk/096/pkg/mobiles/ai_brain/include/braincore
Message-ID: <200509030604.j836402I015198@sheep.berlios.de>

Author: austin
Date: 2005-09-03 08:03:59 +0200 (Sat, 03 Sep 2005)
New Revision: 42

Modified:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-03 06:03:19 UTC (rev 41)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-03 06:03:59 UTC (rev 42)
@@ -44,43 +44,45 @@
 	//
 	// * Events that use the core 'speech' range.
 	//
-	if ( g_settings.exists("listen_script") )
-		EnableEvents(SYSEVENT_SPEECH, g_settings["listen_range"]);
+	if ( g_settings.exists("ListenScript") )
+		if ( g_settings["HearSpeech"] )
+			EnableEvents(SYSEVENT_SPEECH, g_settings["ListenRange"]);
+		endif
+		if ( g_settings["HearGhosts"] )
+			EnableEvents(SYSEVENT_GHOST_SPEECH, g_settings["ListenRange"]);
+		endif
 	endif
-	if ( g_settings.exists("ghost_listen_script") )
-		EnableEvents(SYSEVENT_GHOST_SPEECH, g_settings["listen_range"]);
-	endif
-	
+		
 	//
 	// * Events that use the core 'area size' range.
 	//
-	if ( g_settings.exists("enter_react_script") )
-		EnableEvents(SYSEVENT_ENTEREDAREA, g_settings["area_size"]);
+	if ( g_settings.exists("EnterAreaScript") )
+		EnableEvents(SYSEVENT_ENTEREDAREA, g_settings["AreaSize"]);
 	endif
-	if ( g_settings.exists("leave_react_script") )
-		EnableEvents(SYSEVENT_LEFTAREA, g_settings["area_size"]);
+	if ( g_settings.exists("LeftAreaScript") )
+		EnableEvents(SYSEVENT_LEFTAREA, g_settings["AreaSize"]);
 	endif
-	if ( g_settings.exists("gone_criminal_script") )
-		EnableEvents(SYSEVENT_GONE_CRIMINAL, g_settings["area_size"]);
+	if ( g_settings.exists("GoneCriminalScript") )
+		EnableEvents(SYSEVENT_GONE_CRIMINAL, g_settings["AreaSize"]);
 	endif
 	
 	//
 	// * Events that do not have a core range check.
 	//
-	if ( g_settings.exists("dbl_click_script") )
-		EnableEvents(SYSEVENT_DOUBLECLICKED, g_settings["dbl_click_range"]);
+	if ( g_settings.exists("DblClickScript") )
+		EnableEvents(SYSEVENT_DOUBLECLICKED);
 	endif
-	if ( g_settings.exists("given_item_script") )
+	if ( g_settings.exists("GivenItemScript") )
 		EnableEvents(SYSEVENT_ITEM_GIVEN);
 	endif
-	if ( g_settings.exists("disengage_script") )
+	if ( g_settings.exists("DisengagedScript") )
 		EnableEvents(SYSEVENT_DISENGAGED);
 	endif
-	if ( g_settings.exists("merchant_script") )
+	if ( g_settings.exists("MerchantScript") )
 		EnableEvents(SYSEVENT_MERCHANT_BOUGHT);
 		EnableEvents(SYSEVENT_MERCHANT_SOLD);
 	endif
-	if ( g_settings.exists("combat_script") )
+	if ( g_settings.exists("CombatScript") )
 		EnableEvents(SYSEVENT_ENGAGED+SYSEVENT_DAMAGED);
 	endif
 	



From austin at berlios.de  Sat Sep  3 20:47:31 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 3 Sep 2005 20:47:31 +0200
Subject: [Poldistro-svn] r43 - trunk/096/pkg/mobiles/ai_brain/include
Message-ID: <200509031847.j83IlVMO011414@sheep.berlios.de>

Author: austin
Date: 2005-09-03 20:47:31 +0200 (Sat, 03 Sep 2005)
New Revision: 43

Added:
   trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcError.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
Log:


Copied: trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc (from rev 42, trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc)

Copied: trunk/096/pkg/mobiles/ai_brain/include/npcError.inc (from rev 42, trunk/096/pkg/mobiles/ai_brain/include/npc_error.inc)

Copied: trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc (from rev 42, trunk/096/pkg/mobiles/ai_brain/include/npc_nerves.inc)

Copied: trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc (from rev 42, trunk/096/pkg/mobiles/ai_brain/include/npc_settings.inc)

Copied: trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc (from rev 42, trunk/096/pkg/mobiles/ai_brain/include/npc_util.inc)



From austin at berlios.de  Sat Sep  3 20:48:57 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 3 Sep 2005 20:48:57 +0200
Subject: [Poldistro-svn] r44 - trunk/096/pkg/mobiles/ai_brain/include/braincore
Message-ID: <200509031848.j83Imvpf011491@sheep.berlios.de>

Author: austin
Date: 2005-09-03 20:48:57 +0200 (Sat, 03 Sep 2005)
New Revision: 44

Added:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventproc.inc
Log:


Copied: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventproc.inc (from rev 42, trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc)



From austin at berlios.de  Sat Sep  3 20:50:24 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 3 Sep 2005 20:50:24 +0200
Subject: [Poldistro-svn] r45 - trunk/096/pkg/mobiles/ai_brain/include/braincore
Message-ID: <200509031850.j83IoOfG011568@sheep.berlios.de>

Author: austin
Date: 2005-09-03 20:50:24 +0200 (Sat, 03 Sep 2005)
New Revision: 45

Added:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
Log:
There, all the includes meet naming conventions! >:-/

Copied: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc (from rev 44, trunk/096/pkg/mobiles/ai_brain/include/braincore/eventproc.inc)



From austin at berlios.de  Sat Sep  3 20:51:35 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 3 Sep 2005 20:51:35 +0200
Subject: [Poldistro-svn] r46 - trunk/096/pkg/mobiles/ai_brain/include/braincore
Message-ID: <200509031851.j83IpZ9b011634@sheep.berlios.de>

Author: austin
Date: 2005-09-03 20:51:35 +0200 (Sat, 03 Sep 2005)
New Revision: 46

Removed:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventproc.inc
Log:


Deleted: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventproc.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventproc.inc	2005-09-03 18:50:24 UTC (rev 45)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventproc.inc	2005-09-03 18:51:35 UTC (rev 46)
@@ -1,299 +0,0 @@
-/*===============================================================
-* Current Version
-* EVENTPROCESSOR.INC - v1.0
-* Updated 9/1/2005 6:20AM
-*
-* -- Revision v1.0 --
-* Austin:
-*  Created include file
-===============================================================*/
-
-function ProcessEvent(byref ev)
-	var old_priority := set_priority(25);
-	
-	case( ev.type )
-		//
-		// *Check movement first, since its the event that seems to be sent most often.
-		//
-		
-		// Move NPC
-		// .source	: From/To whom/what?
-		// .speed	: Walk/Run
-		// .direction	: Away/Towards
-		// .loop	: Number of times to attempt to loop the movement.
-		NPCEVENT_MOVE:
-			Movement(ev);
-			break;
-			
-		// Instructs the npc to walk toward an XY coordinate.
-		// .x and .y	: From/To  coordinates
-		// .speed	: Walk/Run
-		// .direction	: Away/Towards
-		// .loop	: Number of times to attempt to loop the movement.
-		NPCEVENT_MOVE_XY:
-			MovementXY(ev);
-			break;
-			
-		// Wander somewhere
-		// .loop	: Number of times to attept to wander.
-		NPCEVENT_WANDER:
-	   		MovementWander(ev);
-	   		break;
-			
-		// Triggered when a mobile enter's the npcs 'area size'.
-		// .source	: What entered the area
-		SYSEVENT_ENTEREDAREA:
-			if ( g_settings.exists("enter_react_script") )
-				var process := 0; //GetNerve("EnterReaction");
-				if ( !process )
-					//StartNerve("EnterReaction", g_settings["enter_react_script"], {me, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-			
-		//
-		// * Check System Events that the core sends.
-		//
-			
-		// Triggered when a mobile leaves the npc's 'area size'.
-		// .source	: What left the area
-		SYSEVENT_LEFTAREA:
-			if ( g_settings.exists("leave_react_script") )
-				var process := 0; //GetNerve("LeaveReaction");
-				if ( !process )
-					//StartNerve("LeaveReaction", g_settings["leave_react_script"], {me, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-			
-		// Sent when something targets the npc to begin combat or
-		// when something has damaged the npc.
-		// .source	: What caused the damage or engaged the npc
-		// For SYSEVENT_DAMAGED
-		// .damaged	: Integer amount of damage.
-		SYSEVENT_ENGAGED:
-		SYSEVENT_DAMAGED:
-			if ( g_settings.exists("combat_script") )
-				if ( (ev.source).ISA(POLCLASS_MOBILE) )
-					var process := 0; //GetNerve("Combat");
-					if ( !process )
-						//StartNerve("Combat", g_settings["combat_script"], {me, ev, settings});
-					else
-						process.SendEvent(ev);
-					endif
-				endif
-			endif
-			break;
-			
-		// Instructs the npc to run its disengage nerve.
-		// When something attacking it goes out of warmode, this is run.
-		// .source	: What was targetting this npc but has now left combat mode.
-		SYSEVENT_DISENGAGED:
-			if ( g_settings.exists("disengage_script") )
-				var process := 0; //GetNerve("Disengage");
-				if ( !process )
-					//StartNerve("Disengage", g_settings["disengage_script"], {me, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-			
-		// When speech is made by a player, this nerve is used.
-		// Note: The NPC function Say() doesnt yet pass around the speech event.
-		// .source	: Where the speech originated.
-		// .text	: The actual speech
-		// .uc_text	: a "Unicode array" of 2-byte "Big Endian" integers.
-		// .langcode	: a 3-character, uppercase language code.
-		// .texttype	: "yell", "whisper", "emote", "default".
-		SYSEVENT_SPEECH:
-			if( g_settings.exists("listen_script") )
-				var process := 0; //GetNerve("Speech");
-				if ( !process )
-					//StartNerve("Speech", g_settings["listen_script"], {me, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-			
-		// Instructs the npc to run its double click script.
-		// Run when the npc is double clicked by a player.
-		// .source	: What sent the double click
-		SYSEVENT_DOUBLECLICKED:
-			if ( g_settings.exists("dbl_click_script") )
-				if ( Distance(ev.source, npc) <= g_settings["dbl_click_range"] )
-					var process := 0; //GetNerve("DblClick");
-					if ( !process )
-						//StartNerve("DblClick", g_settings["dbl_click_script"], {npc, ev, settings});
-					else
-						process.SendEvent(ev);
-					endif
-				endif
-			endif
-			break;
-			
-		// The NPC is a merchant, and has sold or purchased something.
-		// Both sold and bought events are sent to this same nerve.
-		// The best thing to do is fork it into two functions inside the
-		// nerve script to handle each event type.
-		// MERCHANT_SOLD means the merchant sold an item to the player.
-		// MERCHANT_BOUGHT means the merchatn bought something from the player.
-		//
-		// .source	: Who the merchant is selling to/buying from.
-		// .amount	: Gold amount for the sale/purchase.
-		SYSEVENT_MERCHANT_SOLD:
-		SYSEVENT_MERCHANT_BOUGHT:
-			if ( g_settings.exists("merchant_script") )
-				var process := 0; //GetNerve("Merchant");
-				if ( !process )
-					//StartNerve("Merchant", g_settings["merchant_script"], {npc, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-			
-		// Someone has dragged an item onto the npc.
-		// .source	: What dragged the item over the npc.
-		// .item	: The item being given to the npc.
-		SYSEVENT_ITEM_GIVEN:
-			if ( g_settings.exists("give_item_script") )
-				var process := 0; //GetNerve("GiveItem");
-				if ( !process )
-					//StartNerve("GiveItem", g_settings["give_item_script"], {npc, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-			
-		//
-		// * Check custom events
-		//
-				
-		// Instructs the npc to run its flee script.
-		// .source	: What to flee from.
-		NPCEVENT_FLEE:
-			if ( g_settings.exists("flee_script") )
-				var process := 0; //GetNerve("Flee");
-				if ( !process )
-					//StartNerve("Flee", g_settings["flee_script"], {npc, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-			
-		//A nerve has instructed the brain to kill another nerve or its self.
-		// .name	: Nerve name
-		NPCEVENT_ENDNERVE:
-			//KillNerve(ev.name);
-			break;
-			
-		//A nerve has instructed the brain to start another nerve.
-		// .name	: Nerve name
-		// .script	: Nerve script
-		// .data	: array of goodies
-		NPCEVENT_STARTNERVE:
-			//StartNerve(ev.name, ev.script, ev.data);
-			break;
-			
-		// Set a new opponent!
-		// NOTE: Auto-sets Warmode=1!
-		// .source	: Opponent (mobile)
-		NPCEVENT_OPPONENT:
-			SetOpponent(ev.source);
-			break;
-			
-		// Say something
-		// .text	: Speech content
-		// .texttype	: Speech type ("default", "whisper", yell")
-		// .doevent	: Sends SYSEVENT_SPEECH to surrounding npcs
-		NPCEVENT_SPEAK:
-			Say(ev.text, ev.texttype, ev.doevent);
-			break;
-			
-		// Turn toward something
-		// .source	: Target (anything)
-		// .direction	: NETURN_TOWARD or NETURN_AWAY
-		NPCEVENT_TURN:
-			case (ev.direction)
-				NETURN_TOWARD:
-					TurnToward(ev.source);
-				NETURN_AWAY:
-					TurnAwayFrom(ev.source);
-			endcase
-			break;
-			
-		// Face towards or away from XY coordinates.
-		// .x and .y replace .source for TURN_XY
-		// .direction	: NETURN_TOWARD or NETURN_AWAY
-		NPCEVENT_TURN_XY:
-			case (ev.direction)
-				NETURN_TOWARD:
-					TurnTowardLocation(ev.x, ev.y);
-				NETURN_AWAY:
-					TurnAwayFromLocation(ev.x, ev.y);
-			endcase
-			break;
-			
-		// Set WarMode state
-		// NOTE: Auto-clears Opponent if turned off!
-		// .value : 0=Off. 1=On.
-		NPCEVENT_WARMODE:
-			SetWarmode( ev.value );
-			break;
-	   		
-	   	// Force the npc to go into its sleep mode.
-	   	// If the next event in the queue tells it to wake up,
-	   	// this command will be useless.
-	   	NPCEVENT_SLEEP:
-	   		//idle_ticks := g_settings["idle_ticks"]+1;
-	   		break;
-	   		
-	   	// Force the npc out of sleep mode.
-	   	NPCEVENT_WAKEUP:
-	   		//sleep_mode := 0;
-	   		//idle_ticks := 0;
-	   		break;
-	   		
-	   	// Forward an event from one nerve to another.
-	   	// .NerveName	: The name of the nerve to forward the event to.
-	   	// .mask	: Type of event for the nerve to receive.
-	   	// .data	: Data to forward to the nerve.
-	   	NPCEVENT_FWDNERVE:
-	   		var process := 0; //GetNerve(ev.NerveName);
-			if ( process )
-				process.SendEvent(ev);
-			endif
-			break;
-			
-		// If the event .type is unknown, send it to the
-		// npc's "virtual" nerve if it has one.
-	   	default:
-	   		if ( g_settings.exists("virtual_nerve") )
-	   			var process := 0; //GetNerve("Virtual");
-				if ( !process )
-					//StartNerve("Virtual", g_g_settings["virtual_nerve"], {npc, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-	   endcase
-
-	   // If the event has a .process member, reply to it by sending
-	   // an event with .type being the NPCEVENT_DONE constant
-	   // and telling it what event it sent that has finished
-	   // being processed.
-	   if ( ev.process )
-	   	(ev.process).SendEvent(struct{"type":=NPCEVENT_DONE, "source":=ev.type});
-	   endif
-	   
-	   set_priority(old_priority);
-endfunction



From austin at berlios.de  Sat Sep  3 20:52:13 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 3 Sep 2005 20:52:13 +0200
Subject: [Poldistro-svn] r47 - trunk/096/pkg/mobiles/ai_brain/include
Message-ID: <200509031852.j83IqDJ9011675@sheep.berlios.de>

Author: austin
Date: 2005-09-03 20:52:13 +0200 (Sat, 03 Sep 2005)
New Revision: 47

Removed:
   trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc
   trunk/096/pkg/mobiles/ai_brain/include/npc_error.inc
   trunk/096/pkg/mobiles/ai_brain/include/npc_nerves.inc
   trunk/096/pkg/mobiles/ai_brain/include/npc_settings.inc
   trunk/096/pkg/mobiles/ai_brain/include/npc_util.inc
Log:


Deleted: trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc	2005-09-03 18:51:35 UTC (rev 46)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_commands.inc	2005-09-03 18:52:13 UTC (rev 47)
@@ -1,520 +0,0 @@
-/*===============================================================
-* Current Version
-* NPC_COMMANDS.INC - v1.0
-* Updated 8/31/2005 6:38AM
-*
-* -- Revision v1.0 --
-* Austin:
-*  Created include file
-===============================================================*/
-
-use uo;
-use os;
-
-include "include/sysEvent";
-include ":ai_brain:include/eventid";
-
-/////////////////////////////////////////////////////////////////
-// * Function List *
-//
-// AI_Attack(mobile, opponent, no_wake:=WAKEUP)
-// AI_ClearThoughts(mobile, flags)
-// AI_EndNerve(mobile, nerve_name, no_wake:=WAKEUP)
-// AI_Flee(mobile, opponent, no_wake:=WAKEUP)
-// AI_FowardEvent(mobile, nerve_name, mask, data, no_wake:=WAKEUP)
-// AI_Move(mobile, object, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
-// AI_MoveXY(mobile, x, y, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
-// AI_SetOpponent(mobile, opponent, no_wake:=WAKEUP)
-// AI_Sleep(mobile)
-// AI_Speak(mobile, text, text_type:=SPEAK_TEXTTYPE_DEFAULT, do_event:=SPEAK_DOEVENT_DISABLE, no_wake:=WAKEUP)
-// AI_StartNerve(mobile, nerve_name, script_name, data, no_wake:=WAKEUP)
-// AI_Turn(mobile, turn_to, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
-// AI_TurnXY(mobile, x, y, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
-// AI_WakeUp(mobile)
-// AI_Wander(mobile, no_wake:=WAKEUP, loop:=0)
-// AI_WarMode(mobile, mode:=0, no_wake:=WAKEUP)
-// 
-/////////////////////////////////////////////////////////////////
-
-/*
- * AI_Attack(mobile, opponent, no_wake)
- *
- * Purpose
- * Triggers the npc's combat script on opponent.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
- * opponent:	What the npc's combat nerve will attack.
- * no_wake:	Optional wakeup flag:
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_Attack(mobile, opponent, no_wake:=WAKEUP)
-	var ev		:= struct;
-	ev.+type	:= SYSEVENT_ENGAGED;
-	ev.+source	:= opponent;
-	ev.+WakeUp	:= no_wake;
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction
-
-/*
- * AI_ClearThoughts(mobile, flags)
- *
- * Purpose
- * Clears the event queue for the script calling it and or the brain.
- *
- * Parameters
- * mobile:	A reference to the npc.
- * flags:	CLR_* flag for what scripts should have their event queues cleared.
- *		CLR_BRAIN - Clears the brain's queue.
- *		CLR_NERVE - Clears the nerve's queue.
- *		CLR_BOTH  - Clears the queue for both.
- *
- * Return value
- * Always returns 1
- *
- */
-function AI_ClearThoughts(mobile, flags)
-	var brain	:= flags & CLR_BRAIN;
-	var nerve	:= flags & CLR_NERVE;
-	var both	:= flags & CLR_BOTH;
-
-	if ( both || brain )
-		brain := mobile.process;
-		brain.clear_event_queue();
-	endif
-
-	if ( both || nerve )
-		nerve := GetProcess(GetPid());
-		nerve.clear_event_queue();
-	endif
-
-	return 1;
-endfunction
-
-/*
- * AI_EndNerve(mobile, nerve_name, no_wake)
- *
- * Purpose
- * Used to tell the brain to stop a nerve script.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
- * nerve_name:	String containing the name of the nerve (dictionary key).
- * no_wake:	Optional wakeup flag:
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_EndNerve(mobile, nerve_name, no_wake:=WAKEUP)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_ENDNERVE;
-	ev.+name	:= nerve_name;
-	ev.+WakeUp	:= no_wake;
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction
-
-/*
- * AI_Flee(mobile, opponent, no_wake)
- *
- * Purpose
- * Used to tell the brain to stop a nerve script.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
- * opponent:	Opponent to flee from.
- * no_wake:	Optional wakeup flag:
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_Flee(mobile, opponent, no_wake:=WAKEUP)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_FLEE;
-	ev.+source	:= opponent;
-	ev.+WakeUp	:= no_wake;
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction
-
-/*
- * AI_ForwardEvent(mobile, nerve_name, mask, data, no_wake)
- *
- * Purpose
- * Used to send an event from one nerve to another.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
- * nerve_name:	String containing the name of the nerve to forward the event to (dictionary key).
- * mask:	The type of event the nerve should handle the forward as. (example: SYSEVENT_LEFTAREA)
- * data:	Data that the nerve will receive.
- * no_wake:	Optional wakeup flag:
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_FowardEvent(mobile, nerve_name, mask, data, no_wake:=WAKEUP)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_FWDNERVE;
-	ev.+NerveName	:= nerve_name;
-	ev.+mask	:= mask;
-	ev.+data	:= data;
-	ev.+WakeUp	:= no_wake;
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction
-
-/*
- * AI_Move(mobile, opponent, to_from, speed, no_wake, loop)
- *
- * Purpose
- * Commands an npc to move toward / away from an item or mobile.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
- * object:	Item or mobile the npc will move away from/toward.
- * to_from:	Direction the npc will go:
- *		NEMOVE_TOWARD - Will make the npc move toward the object - Default
- *		NEMOVE_AWAY   - Will make the npc move away from the object.
- * speed:	Speed the npc will move at:
- *		NEMOVE_RUN  - NPC will run
- *		NEMOVE_WALK - NPC will walk
- * no_wake:	Optional wakeup flag::
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
- * loop:	Number of steps for the npc to take toward/away from the object.
- *		Note: Loop can be interrupted and end prematurely!
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_Move(mobile, object, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_MOVE;
-	ev.+source	:= object;
-	ev.+direction	:= to_from;
-	ev.+speed	:= speed;
-	ev.+WakeUp	:= no_wake;
-	ev.+loop	:= loop;
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction
-
-/*
- * AI_MoveXY(mobile, x, y, to_from, speed, no_wake, loop)
- *
- * Purpose
- * Commands an npc to move toward or away from an XY coordinate.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
- * x:		X coordinate to move away from/toward
- * y:		Y coordinate to move away from/toward
- * to_from:	Direction the npc will go:
- *		NEMOVE_TOWARD - Will make the npc move toward the object - Default
- *		NEMOVE_AWAY   - Will make the npc move away from the object.
- * speed:	Speed the npc will move at:
- *		NEMOVE_RUN  - NPC will run
- *		NEMOVE_WALK - NPC will walk
- * no_wake:	Optional wakeup flag::
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
- * loop:	Number of steps for the npc to take toward/away from the object.
- *		Note: Loop can be interrupted and end prematurely!
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_MoveXY(mobile, x, y, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_MOVE_XY;
-	ev.+x		:= x;
-	ev.+y		:= y;
-	ev.+direction	:= to_from;
-	ev.+speed	:= speed;
-	ev.+WakeUp	:= no_wake;
-	ev.+loop	:= loop;
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction
-
-/*
- * AI_SetOpponent(mobile, opponent, no_wake)
- *
- * Purpose
- * Places the npc into war mode and sets an opponent.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
- * opponent:	Mobile reference that will be considered an opponent.
- * no_wake:	Optional wakeup flag:
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_SetOpponent(mobile, opponent, no_wake:=WAKEUP)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_OPPONENT;
-	ev.+source	:= opponent;
-	ev.+WakeUp	:= no_wake;
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction
-
-/*
- * AI_Sleep(mobile)
- *
- * Purpose
- * Instructs the npc to go into sleep mode - shuts down all nerves.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_Sleep(mobile)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_SLEEP;
-	ev.+WakeUp	:= NOWAKE;
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction
-
-/*
- * AI_Speak(mobile, text, text_type, do_event, no_wake)
- *
- * Purpose
- * Commands the NPC to speak.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
- * text:	The text the npc will speak.
- * text_type:	text_type for npc.em :
- *		SPEAK_TEXTTYPE_DEFAULT - Default
- *		SPEAK_TEXTTYPE_WHISPER
- *		SPEAK_TEXTTYPE_YELL
- * do_event:	Flags for sending a system event for speech to surrounding npcs.
- *		SPEAK_DOEVENT_DISABLE - Default
- *		SPEAK_DOEVENT_ENABLE
- * no_wake:	Optional wakeup flag:
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_Speak(mobile, text, text_type:=SPEAK_TEXTTYPE_DEFAULT, do_event:=SPEAK_DOEVENT_DISABLE, no_wake:=WAKEUP)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_SPEAK;
-	ev.+text	:= text;
-	ev.+texttype	:= text_type;
-	ev.+doevent	:= do_event;
-	ev.+WakeUp	:= no_wake;
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction
-
-/*
- * AI_StartNerve(mobile, nerve_name, script_name, data, no_wake)
- *
- * Purpose
- * Used to start a custom nerve up from within a nerve.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
- * nerve_name:	String containing the name of the nerve (dictionary key).
- * script_name:	Path of the script to start.
- * data:	Data to be sent to the nerve once it starts.
- * no_wake:	Optional wakeup flag:
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_StartNerve(mobile, nerve_name, script_name, data, no_wake:=WAKEUP)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_STARTNERVE;
-	ev.+name	:= nerve_name;
-	ev.+script	:= script_name;
-	ev.+data	:= data;
-	ev.+WakeUp	:= no_wake;
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction
-
-/*
- * AI_Turn(mobile, turn_to, direction, no_wake)
- *
- * Purpose
- * Commands the NPC to face away from / toward an object.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
- * turn_to:	item or moble reference to turn away from / toward.
- * direction:	Direction the npc will face:
- *		NETURN_TOWARD - Will make the npc turn toward the object - Default.
- 		NETURN_AWAY   - Will make the npc turn away from the object.
- * no_wake:	Optional wakeup flag:
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_Turn(mobile, turn_to, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_TURN;
-	ev.+source	:= turn_to;
-	ev.+direction	:= direction;
-	ev.+WakeUp	:= no_wake;
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction
-
-/*
- * AI_TurnXY(mobile, x, y, direction, no_wake)
- *
- * Purpose
- * Commands the NPC to face away from / toward a coordinate.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
- * x:		X coordinate to turn away from / toward.
- * y:		Y coordinate to turn away from / toward.
- * direction:	Direction the npc will face:
- *		NETURN_TOWARD - Will make the npc turn toward the object - Default.
- 		NETURN_AWAY   - Will make the npc turn away from the object.
- * no_wake:	Optional wakeup flag:
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_TurnXY(mobile, x, y, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_TURN_XY;
-	ev.+x		:= x;
-	ev.+y		:= y;
-	ev.+direction	:= direction;
-	ev.+WakeUp	:= no_wake;
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction
-
-/*
- * AI_WakeUp(mobile)
- *
- * Purpose
- * Sends an event to the npc causing its sleep script to end.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_WakeUp(mobile)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_WAKEUP;
-	ev.+WakeUp	:= WAKEUP;
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction
-
-/*
- * AI_Wander(mobile, opponent, no_wake)
- *
- * Purpose
- * Commands the NPC to wander one step in a random direction.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
- * no_wake:	Optional wakeup flag:
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
- * loop:	Number of times to attempt to wander.
- *		Note: Loop can be interrupted and end prematurely!
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_Wander(mobile, no_wake:=WAKEUP, loop:=0)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_WANDER;
-	ev.+WakeUp	:= no_wake;
-	ev.+loop	:= CInt(loop);
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction
-
-/*
- * AI_WarMode(mobile, mode, no_wake)
- *
- * Purpose
- * Toggles warmode on the npc. Setting to 0 also clears the opponent.
- *
- * Parameters
- * mobile:	The npc that will receive the command.
- * mode:	0 - Takes the NPC out of warmode and clears the opponent - Default.
- *		1 - Places the npc into warmode.
- * no_wake:	Optional wakeup flag:
- *		WAKEUP - Will stop the sleep script if it is running - Default.
- *		NOWAKE - Will not stop the sleep script if it is running.
- *
- * Return value
- * Result of SendEvent()
- *
- */
-function AI_WarMode(mobile, mode:=0, no_wake:=WAKEUP)
-	var ev		:= struct;
-	ev.+type	:= NPCEVENT_WARMODE;
-	ev.+value	:= mode;
-	ev.+WakeUp	:= no_wake;
-	ev.+process	:= GetProcess(GetPid());
-
-	return SendEvent(mobile, ev);
-endfunction

Deleted: trunk/096/pkg/mobiles/ai_brain/include/npc_error.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_error.inc	2005-09-03 18:51:35 UTC (rev 46)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_error.inc	2005-09-03 18:52:13 UTC (rev 47)
@@ -1,36 +0,0 @@
-/*===============================================================
-* Current Version
-* NPC_ERRORS.INC - v1.0
-* Updated 8/31/2005 5:08AM
-*
-* -- Revision v1.0 --
-* Austin:
-*  Created include file
-===============================================================*/
-
-use uo;
-use os;
-
-/*
- * NPC_ErrorSysLog(errmsg)
- *
- * Purpose
- * Logs an error message.
- *
- * Parameters
- * errmsg:	Error message
- *
- * Return value
- * Always returns 1
- *
- */
-function NPC_ErrorSysLog(mobile, errmsg)
-	Set_Critical(1);
-	SysLog("NPC Template: " + mobile.npctemplate);
-	SysLog("NPC Name    : " + mobile.name);
-	SysLog(errmsg );
-	SysLog("------------");
-	Set_Critical(0);
-	
-	return 1;
-endfunction
\ No newline at end of file

Deleted: trunk/096/pkg/mobiles/ai_brain/include/npc_nerves.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_nerves.inc	2005-09-03 18:51:35 UTC (rev 46)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_nerves.inc	2005-09-03 18:52:13 UTC (rev 47)
@@ -1,213 +0,0 @@
-/*===============================================================
-* Current Version
-* NERVES.INC - v1.0
-* Updated 9/1/2005 6:15PM
-*
-* -- Revision v1.0 --
-* Austin:
-*  Created include file
-===============================================================*/
-
-use uo;
-use os;
-
-include ":ai_brain:include/npc_error";
-
-/////////////////////////////////////////////////////////////////
-// * Function List *
-//
-// GetNerveFlags(mobile, nerve_name, byref nerve_dict:=0)
-// GetNerveProcess(mobile, nerve_name, byref nerve_dict:=0)
-// LoadNerves(mobile)
-// SaveNerves(mobile, nerve_dict)
-// StartNerve(mobile, nerve_name, nerve_script, data:=array, flags:=NF_NO_FLAGS, byref nerve_dict:=0)
-// StopNerve(mobile, nerve_name, byref nerve_dict:=0)
-//
-/////////////////////////////////////////////////////////////////
-// * Global Varibles *
-//
-// Nerve flags
-const NF_NO_FLAGS		:= 0x0;
-const NF_CONTINUE_ON_SLEEP	:= 0x1;
-//
-/////////////////////////////////////////////////////////////////
-
-/*
- * LoadNerves()
- *
- * Purpose
- * Loads nerve information for an npc.
- *
- * Parameters
- * mobile:	NPC to get the nerve settings from.
- *
- * Return value
- * Returns a dictionary
- *
- */
-function LoadNerves(mobile)
-	var nerve_dict := GetObjProperty(mobile, "#NerveInfo");
-	if ( Lower(TypeOf(nerve_dict)) != "dictionary" )
-		nerve_dict := dictionary;
-	endif
-
-	return nerve_dict;
-endfunction
-
-/*
- * SaveNerves(mobile, nerve_dict)
- *
- * Purpose
- * Saves nerve information for an npc.
- *
- * Parameters
- * mobile:	NPC to save the nerve settings on.
- * nerve_dict:	Dictionary containing nerve information.
- *
- * Return value
- * Returns 1 on success
- *
- */
-function SaveNerves(mobile, byref nerve_dict)
-	return SetObjProperty(mobile, "#NerveInfo", nerve_dict);
-endfunction
-
-/*
- * GetNerveProcess(mobile, nerve_name, byref nerve_dict)
- *
- * Purpose
- * Retrieves a reference to a running nerve script.
- *
- * Parameters
- * mobile:	NPC to get the nerve information from.
- * nerve_name:	Name of the nerve to get the information for.
- * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
- *
- * Return value
- * Returns a script reference.
- *
- */
-function GetNerveProcess(mobile, nerve_name, byref nerve_dict:=0)
-	if ( !nerve_dict )
-		nerve_dict := LoadNerves(mobile);
-	endif
-
-	if ( nerve_dict.exists(nerve_name) )
-		return GetProcess(CInt(nerve_dict[nerve_name].pid));
-	else
-		return error{"errortext" := "GetNerveProcess() - Invalid nerve name  ["+nerve_name+"]"};
-	endif
-endfunction
-
-/*
- * GetNerveFlags(mobile, nerve_name, byref nerve_dict)
- *
- * Purpose
- * Retrieves the flag setting set on a nerve.
- *
- * Parameters
- * mobile:	NPC to get the nerve information from.
- * nerve_name:	Name of the nerve to get the information for.
- * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
- *
- * Return value
- * Returns a script reference.
- *
- */
-function GetNerveFlags(mobile, nerve_name, byref nerve_dict:=0)
-	if ( !nerve_dict )
-		nerve_dict := LoadNerves(mobile);
-	endif
-
-	if ( nerve_dict.exists(nerve_name) )
-		return GetProcess(CInt(nerve_dict[nerve_name].flags));
-	else
-		return error{"errortext" := "GetNerveProcess() - Invalid nerve name  ["+nerve_name+"]"};
-	endif
-endfunction
-
-/*
- * StartNerve(mobile, nerve_name, nerve_script, data, flags, byref nerve_dict)
- *
- * Purpose
- * Starts up a nerve script.
- *
- * Parameters
- * mobile:	NPC the nerve will be running for.
- * nerve_name:	The name the nerve script will be run under. (Example: "CombatScript" or "EnterReact")
- * data:	Array of data to send to the nerve script when it starts.
- * flags:	Can contain anything - but should use NF_* flags for bitwise checks.
- * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
- *
- * Notes:
- * data[1] - Will contain the mobile argument.
- * data[2] - Will contain the nerve name argument.
- * If data is not an array, it will be placed at index[3].
- * If data is sent as an array, it will begin at the index of [3].
- *
- * Return value
- * Returns a script reference to the nerve script.
- *
- */
-function StartNerve(mobile, nerve_name, nerve_script, data:=array, flags:=NF_NO_FLAGS, byref nerve_dict:=0)
-	if ( Lower(TypeOf(data)) != "array")
-		data := array{data};
-	endif
-	//Mobile is always the begining of the data array.
-	data.Insert(1, mobile);
-	//Nerve name is always the second part of the data array.
-	data.Insert(2, nerve_name);
-
-	var process := start_script(nerve_script, data);
-
-	if ( process.errortext )
-		var errmsg := "StartNerve() ["+nerve_name+"] ["+nerve_script+"] failed to start! ->"+process.errortext;
-		NPC_ErrorSysLog(mobile, errmsg);
-		return error{"errortext":=errmsg};
-	else
-		//Before setting the new nerve, check if one is already running.
-		if ( nerve_dict.exists(nerve_name) )
-			//Stop the old nerve, before storing the new one.
-			StopNerve(mobile, nerve_name, nerve_dict);
-		endif
-		var nerve_info := struct;
-		nerve_info.+pid := process.pid;
-		nerve_info.+flags := flags;
-		nerve_dict[nerve_name] := nerve_info;
-
-		SaveNerves(mobile, nerve_dict);
-
-		return process;
-	endif
-endfunction
-
-/*
- * StopNerve(mobile, nerve_name, byref nerve_dict)
- *
- * Purpose
- * Starts up a nerve script.
- *
- * Parameters
- * mobile:	NPC the nerve will be stopped on.
- * nerve_name:	The name of the nerve script to stop.
- * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
- *
- * Return value
- * Returns 1 on success.
- *
- */
-function StopNerve(mobile, nerve_name, byref nerve_dict:=0)
-	if ( !nerve_dict )
-		nerve_dict := LoadNerves(mobile);
-	endif
-
-	if ( nerve_dict.Exists(nerve_name) )
-		GetNerveProcess(mobile, nerve_name, nerve_dict).kill();
-		nerve_dict.Erase(nerve_name);
-
-		return SaveNerves(mobile, nerve_dict);
-	else
-		return error{"errortext" := "StopNerve() - Invalid nerve name  ["+nerve_name+"]"};
-	endif
-endfunction
-

Deleted: trunk/096/pkg/mobiles/ai_brain/include/npc_settings.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_settings.inc	2005-09-03 18:51:35 UTC (rev 46)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_settings.inc	2005-09-03 18:52:13 UTC (rev 47)
@@ -1,153 +0,0 @@
-/*===============================================================
-* Current Version
-* NPC_SETTINGS.INC - v1.0
-* Updated 8/30/2005 7:28AM
-*
-* -- Revision v1.0 --
-* Austin:
-*  Created include file
-===============================================================*/
-
-use uo;
-use os;
-use cfgfile;
-
-include ":ai_brain:include/npc_util";
-
-/*
- * NPC_LoadCfgDefaults(template_name)
- *
- * Purpose
- * Loads settings for a template from npcdesc.cfg
- *
- * Parameters
- * template:	Name of the npc template to load settings for.
- *
- * Return value
- * Returns a dictionary
- *
- */
-function NPC_LoadCfgDefaults(template)
-	if ( !template.package )
-		template := NPC_ParseTemplateName(template);
-	endif
-	
-	var npc_cfg := ReadConfigFile(template.package+"npcdesc");
-	var npc_elem := npc_cfg[template];
-	
-	var settings := dictionary;
-	/*
-	 * NPC Settings - Step 1 - npcdesc.cfg defaults.
-	 * Reads in the AISetting lines from the npcdesc.cfg elem.
-	 * Values are stored in packed form.
-	 */
-	foreach setting in GetConfigStringArray(npc_elem, "AISetting")
-		setting := SplitWords(setting);
-		var key := setting[1];
-		var value := setting[2];
-
-		settings[key] := UnPack(value);
-
-		sleepms(2);
-	endforeach
-
-	return settings;
-endfunction
-
-function NPC_LoadScriptSettings(source)
-	var template:=source;
-	if ( source.IsA(POLCLASS_NPC) )
-		template := NPC_ParseTemplateName(source.npctemplate);
-	elseif ( !template.package )
-		template := NPC_ParseTemplateName(template);
-	endif
-	
-	var npc_cfg := ReadConfigFile(template.package+"npcdesc");
-	var npc_elem := npc_cfg[template];
-	
-	var script_list := GetConfigStringArray(npc_elem, "AIScript");
-	var flag_list := GetConfigStringArray(npc_elem, "AIScriptFlag");
-	
-	var script_settings := dictionary;
-	foreach script_line in (script_list)
-		script_line := SplitWords(script_line);
-		var key := script_line[1];
-		var value := script_line[2];
-		var flags := 		
-		
-		var temp := struct;
-		
-		script_settings[key] := struct{"
-		
-endfunction
-
-/*
- * NPC_LoadCustomSettings(npc_ref, settings:=0)
- * 
- * Purpose
- * Loads custom settings that are set on a specific npc.
- *
- * Parameters
- * npc_ref:		Mobile reference
- * settings:	Optional parameter
- *		Dictionary read in from LoadNPCCfgDefaults()
- *		Existing keys will be overwritten with any custom settings.
- * 
- * Return value
- * Returns a dictionary
- *		
- */
-function NPC_LoadCustomSettings(npc_ref, settings:=0)
-	if ( Lower(TypeOf(settings)) != "dictionary" )
-		settings := dictionary;
-	endif
-	
-	var cstm_settings := GetObjProperty(npc_ref, "AI_Settings");
-	foreach key in (cstm_settings.keys())
-		var value := cstm_settings[key];
-		if ( value == error )
-			settings.erase(key);
-		else
-			settings[key] := value;
-		endif
-		
-		sleepms(2);
-	endforeach
-	
-	return settings;
-endfunction
-
-/*
- * NPC_DefaultSettings(settings:=0)
- *
- * Purpose
- * Checks the settings dictionary to make sure required values are set.
- * If a dictionary is passed, it will check it for required parameters.
- * If they are not present, they will be set. 
- * Nothing will be overwritten in this function.
- *
- * Parameters
- * settings:	Optional parameter
- *		Dictionary read in from NPC_GetDefaultSettings()
- *
- * Return value
- * Returns a dictionary 
- *
- */
-function NPC_GetDefaultSettings(settings:=0)
-	if ( Lower(TypeOf(settings)) != "dictionary" )
-		settings := dictionary;
-	endif
-	
-	if ( CInt(settings.exists("cycle_wait")) <= 0 )
-		settings["cycle_wait"] := 10;
-	endif
-	if ( CInt(settings.exists("sleep_time")) <= 0 )
-		settings["sleep_time"] := 1024;
-	endif
-	if ( CInt(settings.exists("idle_ticks")) <= 0 )
-		settings["idle_ticks"] := 5;
-	endif
-		
-	return settings;
-endfunction

Deleted: trunk/096/pkg/mobiles/ai_brain/include/npc_util.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npc_util.inc	2005-09-03 18:51:35 UTC (rev 46)
+++ trunk/096/pkg/mobiles/ai_brain/include/npc_util.inc	2005-09-03 18:52:13 UTC (rev 47)
@@ -1,45 +0,0 @@
-/*===============================================================
-* Current Version
-* NPC_UTIL.INC - v1.0
-* Updated 8/31/2005 4:23AM
-*
-* -- Revision v1.0 --
-* Austin:
-*  Created include file
-===============================================================*/
-
-/*
- * NPC_ParseTemplateName(template_name)
- *
- * Purpose
- * Finds the appropriate npcdesc.cfg to load.
- * This enables npcs to be placed in packages and not just the ::npcdesc file.
- * ReadConfigFile(":*:npcdesc") does not work in this case because packaged npcs
- * have the package name at the begining of their .npctemplate member. Reading the
- * specific config file - helps to avoid possible elem name collisions.
- *
- * Parameters
- * template_name:	Name of the npc template to parse
- *
- * Return value
- * Returns struct .package .template
- *
- */
-function NPC_ParseTemplateName(template_name)
-	//Find positions of ":" characters
-	var colon_a := Find(template_name, ":", 1);
-	var colon_b := Find(template_name, ":", 2);
-
-	var parsed := struct{"package", "template"};
-
-	if ( !colon_a || !colon_b )
-		//Not a complete package name - use default npcdesc.cfg
-		parsed.package := "::";
-		parsed.template := template_name;
-	else
-		parsed.package := template_name[colon_a, colon_b];
-		parsed.template := template_name[colon_b+1, Len(template_name)];
-	endif
-
-	return parsed;
-endfunction



From austin at berlios.de  Sun Sep  4 03:14:11 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 4 Sep 2005 03:14:11 +0200
Subject: [Poldistro-svn] r48 - trunk/096/pkg/mobiles/ai_brain/include
Message-ID: <200509040114.j841EB5C027347@sheep.berlios.de>

Author: austin
Date: 2005-09-04 03:14:10 +0200 (Sun, 04 Sep 2005)
New Revision: 48

Modified:
   trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc	2005-09-03 18:52:13 UTC (rev 47)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc	2005-09-04 01:14:10 UTC (rev 48)
@@ -11,7 +11,7 @@
 use uo;
 use os;
 
-include ":ai_brain:include/npc_error";
+include ":ai_brain:include/npcError";
 
 /////////////////////////////////////////////////////////////////
 // * Function List *

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-03 18:52:13 UTC (rev 47)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-04 01:14:10 UTC (rev 48)
@@ -12,7 +12,7 @@
 use os;
 use cfgfile;
 
-include ":ai_brain:include/npc_util";
+include ":ai_brain:include/npcUtil";
 
 /*
  * NPC_LoadCfgDefaults(template_name)
@@ -21,39 +21,63 @@
  * Loads settings for a template from npcdesc.cfg
  *
  * Parameters
- * template:	Name of the npc template to load settings for.
+ * source:	Name of the npc template to load settings for.
+ *		Can also be an npc reference - if custom settings should be loaded off it.
  *
  * Return value
  * Returns a dictionary
  *
  */
-function NPC_LoadCfgDefaults(template)
-	if ( !template.package )
+function NPC_LoadTemplateSettings(source)
+	var template:=source;
+	if ( source.IsA(POLCLASS_NPC) )
+		template := NPC_ParseTemplateName(source.npctemplate);
+	elseif ( !template.package )
 		template := NPC_ParseTemplateName(template);
 	endif
-	
+
+	//
+	// * Load config defaults first
+	//
 	var npc_cfg := ReadConfigFile(template.package+"npcdesc");
 	var npc_elem := npc_cfg[template];
+
+	var setting_list := GetConfigStringDictionary(npc_elem, "AISetting");
 	
 	var settings := dictionary;
-	/*
-	 * NPC Settings - Step 1 - npcdesc.cfg defaults.
-	 * Reads in the AISetting lines from the npcdesc.cfg elem.
-	 * Values are stored in packed form.
-	 */
-	foreach setting in GetConfigStringArray(npc_elem, "AISetting")
-		setting := SplitWords(setting);
-		var key := setting[1];
-		var value := setting[2];
-
-		settings[key] := UnPack(value);
-
+	foreach setting_name in (setting_list.keys())
+		settings[setting_name] := UnPack(setting_list[setting_name]);
 		sleepms(2);
 	endforeach
 
+	//
+	// * If the source is an npc, check it for custom settings.
+	//
+	if ( source.IsA(POLCLASS_NPC) )
+		var cstm_scripts := GetObjProperty(source, "AISettings");
+		foreach key in (cstm_scripts.keys())
+			settings[key] := cstm_scripts[key];
+			sleepms(2);
+		endforeach
+	endif
+	
 	return settings;
 endfunction
 
+/*
+ * NPC_LoadScriptSettings(source)
+ *
+ * Purpose
+ * Loads brain AI script settings for an NPC. Gives .script and .flag values for them.
+ *
+ * Parameters
+ * source:	Name of the npc template to load settings for.
+ *		Can also be an npc reference - if custom settings should be loaded off it.
+ *
+ * Return value
+ * Returns a dictionary
+ *
+ */
 function NPC_LoadScriptSettings(source)
 	var template:=source;
 	if ( source.IsA(POLCLASS_NPC) )
@@ -61,29 +85,44 @@
 	elseif ( !template.package )
 		template := NPC_ParseTemplateName(template);
 	endif
-	
+
+	//
+	// * Load config defaults first
+	//
 	var npc_cfg := ReadConfigFile(template.package+"npcdesc");
 	var npc_elem := npc_cfg[template];
-	
-	var script_list := GetConfigStringArray(npc_elem, "AIScript");
-	var flag_list := GetConfigStringArray(npc_elem, "AIScriptFlag");
-	
+
+	var script_list := GetConfigStringDictionary(npc_elem, "AIScript");
+	var flag_list := GetConfigStringDictionary(npc_elem, "AIScriptFlag");
+
 	var script_settings := dictionary;
-	foreach script_line in (script_list)
-		script_line := SplitWords(script_line);
-		var key := script_line[1];
-		var value := script_line[2];
-		var flags := 		
-		
+	foreach script_type in (script_list.keys())
 		var temp := struct;
-		
-		script_settings[key] := struct{"
-		
+		temp.+script := script_list[script_type];
+		temp.+flags := UnPack(flag_list[script_type]);
+
+		script_settings[script_type] := temp;
+		sleepms(2);
+	endforeach
+
+	//
+	// * If the source is an npc, check it for custom script settings.
+	//   Assumes each key in the dictionary property has a .script and .flags pair already.
+	//
+	if ( source.IsA(POLCLASS_NPC) )
+		var cstm_scripts := GetObjProperty(source, "AIScripts");
+		foreach key in (cstm_scripts.keys())
+			script_settings[key] := cstm_scripts[key];
+			sleepms(2);
+		endforeach
+	endif
+	
+	return script_settings;
 endfunction
 
 /*
  * NPC_LoadCustomSettings(npc_ref, settings:=0)
- * 
+ *
  * Purpose
  * Loads custom settings that are set on a specific npc.
  *
@@ -92,16 +131,16 @@
  * settings:	Optional parameter
  *		Dictionary read in from LoadNPCCfgDefaults()
  *		Existing keys will be overwritten with any custom settings.
- * 
+ *
  * Return value
  * Returns a dictionary
- *		
+ *
  */
 function NPC_LoadCustomSettings(npc_ref, settings:=0)
 	if ( Lower(TypeOf(settings)) != "dictionary" )
 		settings := dictionary;
 	endif
-	
+
 	var cstm_settings := GetObjProperty(npc_ref, "AI_Settings");
 	foreach key in (cstm_settings.keys())
 		var value := cstm_settings[key];
@@ -110,10 +149,10 @@
 		else
 			settings[key] := value;
 		endif
-		
+
 		sleepms(2);
 	endforeach
-	
+
 	return settings;
 endfunction
 
@@ -123,7 +162,7 @@
  * Purpose
  * Checks the settings dictionary to make sure required values are set.
  * If a dictionary is passed, it will check it for required parameters.
- * If they are not present, they will be set. 
+ * If they are not present, they will be set.
  * Nothing will be overwritten in this function.
  *
  * Parameters
@@ -131,14 +170,14 @@
  *		Dictionary read in from NPC_GetDefaultSettings()
  *
  * Return value
- * Returns a dictionary 
+ * Returns a dictionary
  *
  */
 function NPC_GetDefaultSettings(settings:=0)
 	if ( Lower(TypeOf(settings)) != "dictionary" )
 		settings := dictionary;
 	endif
-	
+
 	if ( CInt(settings.exists("cycle_wait")) <= 0 )
 		settings["cycle_wait"] := 10;
 	endif
@@ -148,6 +187,6 @@
 	if ( CInt(settings.exists("idle_ticks")) <= 0 )
 		settings["idle_ticks"] := 5;
 	endif
-		
+
 	return settings;
 endfunction



From austin at berlios.de  Sun Sep  4 03:15:24 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 4 Sep 2005 03:15:24 +0200
Subject: [Poldistro-svn] r49 - trunk/096/pkg/mobiles/ai_brain
Message-ID: <200509040115.j841FOeY027414@sheep.berlios.de>

Author: austin
Date: 2005-09-04 03:15:22 +0200 (Sun, 04 Sep 2005)
New Revision: 49

Modified:
   trunk/096/pkg/mobiles/ai_brain/brain.src
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/brain.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-04 01:14:10 UTC (rev 48)
+++ trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-04 01:15:22 UTC (rev 49)
@@ -19,14 +19,14 @@
 
 include "include/sysEvent";
 include ":ai_brain:include/braincore/error";
-include ":ai_brain:include/braincore/eventprocessor";
+include ":ai_brain:include/braincore/eventProcessor";
 include ":ai_brain:include/braincore/movement";
 include ":ai_brain:include/braincore/setup";
 include ":ai_brain:include/eventid";
-include ":ai_brain:include/npc_commands";
-include ":ai_brain:include/npc_nerves";
-include ":ai_brain:include/npc_settings";
-include ":ai_brain:include/npc_util";
+include ":ai_brain:include/npcCommands";
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcSettings";
+include ":ai_brain:include/npcUtil";
 
 //
 // * Global variables
@@ -35,6 +35,7 @@
 var idle_ticks := 0;
 var sleep_mode := 0;
 var g_settings := dictionary;
+var g_scripts := dictionary;
 var g_nerves := dictionary;
 
 program BrainAI()



From panosl at berlios.de  Sun Sep  4 15:10:41 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Sun, 4 Sep 2005 15:10:41 +0200
Subject: [Poldistro-svn] r50 - trunk/096/pkg/mobiles/ai_brain/include/braincore
Message-ID: <200509041310.j84DAfD3014594@sheep.berlios.de>

Author: panosl
Date: 2005-09-04 15:10:41 +0200 (Sun, 04 Sep 2005)
New Revision: 50

Removed:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc
Log:


Deleted: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc	2005-09-04 01:15:22 UTC (rev 49)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventprocessor.inc	2005-09-04 13:10:41 UTC (rev 50)
@@ -1,299 +0,0 @@
-/*===============================================================
-* Current Version
-* EVENTPROCESSOR.INC - v1.0
-* Updated 9/1/2005 6:20AM
-*
-* -- Revision v1.0 --
-* Austin:
-*  Created include file
-===============================================================*/
-
-function ProcessEvent(byref ev)
-	var old_priority := set_priority(25);
-	
-	case( ev.type )
-		//
-		// *Check movement first, since its the event that seems to be sent most often.
-		//
-		
-		// Move NPC
-		// .source	: From/To whom/what?
-		// .speed	: Walk/Run
-		// .direction	: Away/Towards
-		// .loop	: Number of times to attempt to loop the movement.
-		NPCEVENT_MOVE:
-			Movement(ev);
-			break;
-			
-		// Instructs the npc to walk toward an XY coordinate.
-		// .x and .y	: From/To  coordinates
-		// .speed	: Walk/Run
-		// .direction	: Away/Towards
-		// .loop	: Number of times to attempt to loop the movement.
-		NPCEVENT_MOVE_XY:
-			MovementXY(ev);
-			break;
-			
-		// Wander somewhere
-		// .loop	: Number of times to attept to wander.
-		NPCEVENT_WANDER:
-	   		MovementWander(ev);
-	   		break;
-			
-		// Triggered when a mobile enter's the npcs 'area size'.
-		// .source	: What entered the area
-		SYSEVENT_ENTEREDAREA:
-			if ( g_settings.exists("enter_react_script") )
-				var process := 0; //GetNerve("EnterReaction");
-				if ( !process )
-					//StartNerve("EnterReaction", g_settings["enter_react_script"], {me, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-			
-		//
-		// * Check System Events that the core sends.
-		//
-			
-		// Triggered when a mobile leaves the npc's 'area size'.
-		// .source	: What left the area
-		SYSEVENT_LEFTAREA:
-			if ( g_settings.exists("leave_react_script") )
-				var process := 0; //GetNerve("LeaveReaction");
-				if ( !process )
-					//StartNerve("LeaveReaction", g_settings["leave_react_script"], {me, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-			
-		// Sent when something targets the npc to begin combat or
-		// when something has damaged the npc.
-		// .source	: What caused the damage or engaged the npc
-		// For SYSEVENT_DAMAGED
-		// .damaged	: Integer amount of damage.
-		SYSEVENT_ENGAGED:
-		SYSEVENT_DAMAGED:
-			if ( g_settings.exists("combat_script") )
-				if ( (ev.source).ISA(POLCLASS_MOBILE) )
-					var process := 0; //GetNerve("Combat");
-					if ( !process )
-						//StartNerve("Combat", g_settings["combat_script"], {me, ev, settings});
-					else
-						process.SendEvent(ev);
-					endif
-				endif
-			endif
-			break;
-			
-		// Instructs the npc to run its disengage nerve.
-		// When something attacking it goes out of warmode, this is run.
-		// .source	: What was targetting this npc but has now left combat mode.
-		SYSEVENT_DISENGAGED:
-			if ( g_settings.exists("disengage_script") )
-				var process := 0; //GetNerve("Disengage");
-				if ( !process )
-					//StartNerve("Disengage", g_settings["disengage_script"], {me, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-			
-		// When speech is made by a player, this nerve is used.
-		// Note: The NPC function Say() doesnt yet pass around the speech event.
-		// .source	: Where the speech originated.
-		// .text	: The actual speech
-		// .uc_text	: a "Unicode array" of 2-byte "Big Endian" integers.
-		// .langcode	: a 3-character, uppercase language code.
-		// .texttype	: "yell", "whisper", "emote", "default".
-		SYSEVENT_SPEECH:
-			if( g_settings.exists("listen_script") )
-				var process := 0; //GetNerve("Speech");
-				if ( !process )
-					//StartNerve("Speech", g_settings["listen_script"], {me, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-			
-		// Instructs the npc to run its double click script.
-		// Run when the npc is double clicked by a player.
-		// .source	: What sent the double click
-		SYSEVENT_DOUBLECLICKED:
-			if ( g_settings.exists("dbl_click_script") )
-				if ( Distance(ev.source, npc) <= g_settings["dbl_click_range"] )
-					var process := 0; //GetNerve("DblClick");
-					if ( !process )
-						//StartNerve("DblClick", g_settings["dbl_click_script"], {npc, ev, settings});
-					else
-						process.SendEvent(ev);
-					endif
-				endif
-			endif
-			break;
-			
-		// The NPC is a merchant, and has sold or purchased something.
-		// Both sold and bought events are sent to this same nerve.
-		// The best thing to do is fork it into two functions inside the
-		// nerve script to handle each event type.
-		// MERCHANT_SOLD means the merchant sold an item to the player.
-		// MERCHANT_BOUGHT means the merchatn bought something from the player.
-		//
-		// .source	: Who the merchant is selling to/buying from.
-		// .amount	: Gold amount for the sale/purchase.
-		SYSEVENT_MERCHANT_SOLD:
-		SYSEVENT_MERCHANT_BOUGHT:
-			if ( g_settings.exists("merchant_script") )
-				var process := 0; //GetNerve("Merchant");
-				if ( !process )
-					//StartNerve("Merchant", g_settings["merchant_script"], {npc, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-			
-		// Someone has dragged an item onto the npc.
-		// .source	: What dragged the item over the npc.
-		// .item	: The item being given to the npc.
-		SYSEVENT_ITEM_GIVEN:
-			if ( g_settings.exists("give_item_script") )
-				var process := 0; //GetNerve("GiveItem");
-				if ( !process )
-					//StartNerve("GiveItem", g_settings["give_item_script"], {npc, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-			
-		//
-		// * Check custom events
-		//
-				
-		// Instructs the npc to run its flee script.
-		// .source	: What to flee from.
-		NPCEVENT_FLEE:
-			if ( g_settings.exists("flee_script") )
-				var process := 0; //GetNerve("Flee");
-				if ( !process )
-					//StartNerve("Flee", g_settings["flee_script"], {npc, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-			
-		//A nerve has instructed the brain to kill another nerve or its self.
-		// .name	: Nerve name
-		NPCEVENT_ENDNERVE:
-			//KillNerve(ev.name);
-			break;
-			
-		//A nerve has instructed the brain to start another nerve.
-		// .name	: Nerve name
-		// .script	: Nerve script
-		// .data	: array of goodies
-		NPCEVENT_STARTNERVE:
-			//StartNerve(ev.name, ev.script, ev.data);
-			break;
-			
-		// Set a new opponent!
-		// NOTE: Auto-sets Warmode=1!
-		// .source	: Opponent (mobile)
-		NPCEVENT_OPPONENT:
-			SetOpponent(ev.source);
-			break;
-			
-		// Say something
-		// .text	: Speech content
-		// .texttype	: Speech type ("default", "whisper", yell")
-		// .doevent	: Sends SYSEVENT_SPEECH to surrounding npcs
-		NPCEVENT_SPEAK:
-			Say(ev.text, ev.texttype, ev.doevent);
-			break;
-			
-		// Turn toward something
-		// .source	: Target (anything)
-		// .direction	: NETURN_TOWARD or NETURN_AWAY
-		NPCEVENT_TURN:
-			case (ev.direction)
-				NETURN_TOWARD:
-					TurnToward(ev.source);
-				NETURN_AWAY:
-					TurnAwayFrom(ev.source);
-			endcase
-			break;
-			
-		// Face towards or away from XY coordinates.
-		// .x and .y replace .source for TURN_XY
-		// .direction	: NETURN_TOWARD or NETURN_AWAY
-		NPCEVENT_TURN_XY:
-			case (ev.direction)
-				NETURN_TOWARD:
-					TurnTowardLocation(ev.x, ev.y);
-				NETURN_AWAY:
-					TurnAwayFromLocation(ev.x, ev.y);
-			endcase
-			break;
-			
-		// Set WarMode state
-		// NOTE: Auto-clears Opponent if turned off!
-		// .value : 0=Off. 1=On.
-		NPCEVENT_WARMODE:
-			SetWarmode( ev.value );
-			break;
-	   		
-	   	// Force the npc to go into its sleep mode.
-	   	// If the next event in the queue tells it to wake up,
-	   	// this command will be useless.
-	   	NPCEVENT_SLEEP:
-	   		//idle_ticks := g_settings["idle_ticks"]+1;
-	   		break;
-	   		
-	   	// Force the npc out of sleep mode.
-	   	NPCEVENT_WAKEUP:
-	   		//sleep_mode := 0;
-	   		//idle_ticks := 0;
-	   		break;
-	   		
-	   	// Forward an event from one nerve to another.
-	   	// .NerveName	: The name of the nerve to forward the event to.
-	   	// .mask	: Type of event for the nerve to receive.
-	   	// .data	: Data to forward to the nerve.
-	   	NPCEVENT_FWDNERVE:
-	   		var process := 0; //GetNerve(ev.NerveName);
-			if ( process )
-				process.SendEvent(ev);
-			endif
-			break;
-			
-		// If the event .type is unknown, send it to the
-		// npc's "virtual" nerve if it has one.
-	   	default:
-	   		if ( g_settings.exists("virtual_nerve") )
-	   			var process := 0; //GetNerve("Virtual");
-				if ( !process )
-					//StartNerve("Virtual", g_g_settings["virtual_nerve"], {npc, ev, settings});
-				else
-					process.SendEvent(ev);
-				endif
-			endif
-			break;
-	   endcase
-
-	   // If the event has a .process member, reply to it by sending
-	   // an event with .type being the NPCEVENT_DONE constant
-	   // and telling it what event it sent that has finished
-	   // being processed.
-	   if ( ev.process )
-	   	(ev.process).SendEvent(struct{"type":=NPCEVENT_DONE, "source":=ev.type});
-	   endif
-	   
-	   set_priority(old_priority);
-endfunction



From panosl at berlios.de  Sun Sep  4 15:45:36 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Sun, 4 Sep 2005 15:45:36 +0200
Subject: [Poldistro-svn] r52 - in trunk/096/pkg: systems/storage/include utils/gumps/docs utils/gumps/include
Message-ID: <200509041345.j84Djahq018644@sheep.berlios.de>

Author: panosl
Date: 2005-09-04 15:45:35 +0200 (Sun, 04 Sep 2005)
New Revision: 52

Modified:
   trunk/096/pkg/systems/storage/include/storage.inc
   trunk/096/pkg/utils/gumps/docs/changes.txt
   trunk/096/pkg/utils/gumps/include/gumps.inc
Log:


Modified: trunk/096/pkg/systems/storage/include/storage.inc
===================================================================
--- trunk/096/pkg/systems/storage/include/storage.inc	2005-09-04 13:15:12 UTC (rev 51)
+++ trunk/096/pkg/systems/storage/include/storage.inc	2005-09-04 13:45:35 UTC (rev 52)
@@ -26,19 +26,23 @@
 //Toggles the bank related debug messages on and off.
 var storage_debug_mode	:= 1;
 
-// * GetBox(mobile, string)
-//
-// Returns the bank box of 'who' for the bank_name passed.
-// bank_name defaults to  "Global"
-//
-// When a new bank box is made, its stored in a global
-// property called "banks" through the RegisterBank() function
-//
-// Use SendOpenSpecialContainer(who, GetBox(who, bank_name));
-// to show someone their bank box.
+
+
+/*
+ * GetBox(who, string)
+ *
+ * Purpose
+ *
+ * Parameters
+ * who: reference to the mobile whos container we want to view
+ * bank_name: the container that belongs to the mobile referenced.
+ *
+ * Return Value
+ * The bank box of who, for the bank_name passed.
+ */
 function GetBox(who, bank_name)
 
-	if ( (!bank_name) || (bank_name == error) )
+	if ((!bank_name) || (bank_name == error))
 		bank_name := "Global";
 	endif
 
@@ -78,6 +82,7 @@
 	return bank_box;
 endfunction
 
+
 function HasBankBox(who, bank_name)
 	if ( (!bank_name) || (bank_name == error) )
 		bank_name := "Global";
@@ -94,6 +99,7 @@
 	endif
 endfunction
 
+
 // *DestroyBox(mobile, string)
 //
 // Used to remove a mobile's bank box and everything inside of it.
@@ -113,6 +119,7 @@
 	return DestroyRootItemInStorageArea(bank, box_name);
 endfunction
 
+
 // * RegisterBank(string)
 //
 // Registers the bank name in a global property called "banks".
@@ -137,6 +144,7 @@
 	set_critical(0);
 endfunction
 
+
 // * GetBankNames()
 //
 // Returns an array of all storage area names.
@@ -171,6 +179,7 @@
 	return temp;
 endfunction
 
+
 function BankDbgMsg(text)
 	if ( storage_debug_mode )
 		SysLog(text);

Modified: trunk/096/pkg/utils/gumps/docs/changes.txt
===================================================================
--- trunk/096/pkg/utils/gumps/docs/changes.txt	2005-09-04 13:15:12 UTC (rev 51)
+++ trunk/096/pkg/utils/gumps/docs/changes.txt	2005-09-04 13:45:35 UTC (rev 52)
@@ -1,3 +1,50 @@
+/*===============================================================
+* Current Version
+* GUMPS.INC - v0.3
+* include ":gumps:includes/gumps";
+*
+* -- Revision v0.3 --
+* Austin
+*  Added:
+*      Support for setting arbitrary data locations for GFTextEntry()
+*
+* -- Revision v0.2 --
+* Austin
+*  Added:
+*	Support for setting arbitrary button ID's and automatic assignments.
+*	Ability to change a gumps 'NoMove' 'NoClose' 'NoDispose' settings multiple times.
+*	XGFError()
+*  Changed:
+*	Function names and prototypes to better match the old gumps.inc for faster migration time.
+*	Rewrote various functions for improved error checking and utility. Will document better later
+	on as a lot of code was changed (Sorry, Melanius!)
+*
+* -- Revision v0.1 --
+* Melanius
+*  First version created to handle gumps as an object rather than as a global variable.
+*  This new include now allows multiple gumps to be handled in a single script as well
+*  as allowing easier saving of them.
+*  Added:
+*	AddCheckBox()
+*	AddGumpButton()
+*	AddGumpPic()
+*	AddHTML()
+*	AddHTMLLocalized()
+*	AddLabel()
+*	AddLabelCropped()
+*	AddPage()
+*	AddRadioButton()
+*	AddRadioGroup()
+*	AddTextInput()
+*	AddTilePic()
+*	CreateGump()
+*	Disposable()
+*	Movable()
+*	ResizePic()
+*	SendGump()
+*
+===============================================================*/
+
 -=[ 4:55PM Jul. 07, 2005 (Austin)]=---------
 Changed:
 	* Renamed "configs" to "config"

Modified: trunk/096/pkg/utils/gumps/include/gumps.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/gumps.inc	2005-09-04 13:15:12 UTC (rev 51)
+++ trunk/096/pkg/utils/gumps/include/gumps.inc	2005-09-04 13:45:35 UTC (rev 52)
@@ -1,3 +1,33 @@
+/* gumps v0.3
+ *
+ * Purpose
+ * Provide various functions for creating and managing gumps as an object.
+ * Allow multiple gumps to handled in a single script.
+ *
+ * Function List
+ * GFAddButton(byref gump, x, y, off_id, on_id, btn_type:=GF_PAGE_BTN, btn_value:=0)
+ * GFAddHTMLLocalized(byref gump, x, y, width, height, cliloc, background, scrollbar, hue := 0)
+ * GFCheckBox(byref gump, x, y, unc_id, che_id, status:=0, btn_value:=0)
+ * GFCreateGump(x:=0, y:=0, width:=0, height:=0)
+ * GFDisposable(byref gump, bool)
+ * GFExtractData(input, data_id)
+ * GFGumpPic(byref gump, x, y, gump_id, hue := 0)
+ * GFHTMLArea(byref gump, x, y, width, height, text, background:=0, scrollbar:=0)
+ * GFMovable(byref gump, bool)
+ * GFPage(byref gump, page)
+ * GFRadioButton(byref gump, x, y, unp_id, pres_id, status:=0, btn_value:=0)
+ * GFResizePic(byref gump, x, y, gump_id, width:=0, height:=0)
+ * GFSendGump(who, byref gump)
+ * GFSetRadioGroup(byref gump, group_id)
+ * GFTextCrop(byref gump, x, y, width, height, hue:=0, text:="")
+ * GFTextEntry(byref gump, x, y, width, height, txt_color, ini_text:="")
+ * GFTextLine(byref gump, x, y, hue:=0, text:="")
+ * GFTilePic(byref gump, x, y, tile_id, hue := 0)
+ *
+ * Internal/Private Function List
+ * XGFError(text)
+ */
+
 use uo;
 use os;
 use basic;
@@ -2,85 +32,8 @@
 
-/*===============================================================
-* Current Version
-* GUMPS.INC - v0.3
-* include ":gumps:includes/gumps";
-*
-* -- Revision v0.3 --
-* Austin
-*  Added:
-*      Support for setting arbitrary data locations for GFTextEntry()
-*
-* -- Revision v0.2 --
-* Austin
-*  Added:
-*	Support for setting arbitrary button ID's and automatic assignments.
-*	Ability to change a gumps 'NoMove' 'NoClose' 'NoDispose' settings multiple times.
-*	XGFError()
-*  Changed:
-*	Function names and prototypes to better match the old gumps.inc for faster migration time.
-*	Rewrote various functions for improved error checking and utility. Will document better later
-	on as a lot of code was changed (Sorry, Melanius!)
-*
-* -- Revision v0.1 --
-* Melanius
-*  First version created to handle gumps as an object rather than as a global variable.
-*  This new include now allows multiple gumps to be handled in a single script as well
-*  as allowing easier saving of them.
-*  Added:
-*	AddCheckBox()
-*	AddGumpButton()
-*	AddGumpPic()
-*	AddHTML()
-*	AddHTMLLocalized()
-*	AddLabel()
-*	AddLabelCropped()
-*	AddPage()
-*	AddRadioButton()
-*	AddRadioGroup()
-*	AddTextInput()
-*	AddTilePic()
-*	CreateGump()
-*	Disposable()
-*	Movable()
-*	ResizePic()
-*	SendGump()
-*
-===============================================================*/
-
-/////////////////////////////////////////////////////////////////
-// * Function List *
-//
-// GFAddButton(byref gump, x, y, off_id, on_id, btn_type:=GF_PAGE_BTN, btn_value:=0)
-// GFAddHTMLLocalized(byref gump, x, y, width, height, cliloc, background, scrollbar, hue := 0)
-// GFCheckBox(byref gump, x, y, unc_id, che_id, status:=0, btn_value:=0)
-// GFCreateGump(x:=0, y:=0, width:=0, height:=0)
-// GFDisposable(byref gump, bool)
-// GFExtractData(input, data_id)
-// GFGumpPic(byref gump, x, y, gump_id, hue := 0)
-// GFHTMLArea(byref gump, x, y, width, height, text, background:=0, scrollbar:=0)
-// GFMovable(byref gump, bool)
-// GFPage(byref gump, page)
-// GFRadioButton(byref gump, x, y, unp_id, pres_id, status:=0, btn_value:=0)
-// GFResizePic(byref gump, x, y, gump_id, width:=0, height:=0)
-// GFSendGump(who, byref gump)
-// GFSetRadioGroup(byref gump, group_id)
-// GFTextCrop(byref gump, x, y, width, height, hue:=0, text:="")
-// GFTextEntry(byref gump, x, y, width, height, txt_color, ini_text:="")
-// GFTextLine(byref gump, x, y, hue:=0, text:="")
-// GFTilePic(byref gump, x, y, tile_id, hue := 0)
-//
-/////////////////////////////////////////////////////////////////
-// * Internal/Private Function List *
-//
-// XGFError(text)
-/////////////////////////////////////////////////////////////////
-// * Global Variables *
-//
-// Constants for the GFAddButton() function
+//Constants for the GFAddButton() function
 const GF_PAGE_BTN	:= 0x0;
 const GF_CLOSE_BTN	:= 0x1;
 const GF_DUMMY_BTN	:= 0x2;
-//
-/////////////////////////////////////////////////////////////////
 
+
 /*
@@ -130,6 +83,7 @@
 	return(gump);
 endfunction
 
+
 /*
  * GFClosable(byref gump, bool)
  *
@@ -145,7 +99,7 @@
  * Returns 1 on success, error on failure.
  *
  */
- function GFClosable(byref gump, bool)
+function GFClosable(byref gump, bool)
 	case(bool)
 		0:
 			if ( gump.base.CloseLoc )
@@ -167,8 +121,9 @@
 			return XGFError("gumps::Closable: Invalid bool value '"+bool+"'");
 	endcase
 	return 1;
- endfunction
+endfunction
 
+
 /*
  * GFDisposable(byref gump, bool)
  *
@@ -212,6 +167,7 @@
 	return 1;
  endfunction
 
+
 /*
  * GFMovable(byref gump, bool)
  *
@@ -251,6 +207,7 @@
 	return 1;
  endfunction
 
+
 /*
  * GFPage(byref gump, page)
  *
@@ -272,6 +229,7 @@
 	return 1;
 endfunction
 
+
 /*
  * GFResizePic(byref gump, x, y, gump_id, width, height)
  *
@@ -305,6 +263,7 @@
 	return 1;
 endfunction
 
+
 /*
  * GFAddAlphaRegion(byref gump, x, y, width, height)
  *
@@ -328,6 +287,7 @@
 	return 1;
  endfunction
 
+
 /*
  * GFAddButton(byref gump, x, y, off_id, on_id, btn_type, btn_value)
  *
@@ -352,7 +312,6 @@
  * Return value is the button value.
  *
  */
-
 function GFAddButton(byref gump, x, y, off_id, on_id, btn_type:=GF_PAGE_BTN, btn_value:=0)
 	var line := "Button " + CStr(gump.base.x + x) + " " + CStr(gump.base.y + y) + " " + CStr(off_id) + " " + CStr(on_id);
 
@@ -375,6 +334,7 @@
 	return (btn_value);
 endfunction
 
+
 /*
  * GFCheckBox(byref gump, x, y, unc_id, che_id, status, btn_value)
  *
@@ -422,6 +382,7 @@
 	return (btn_value);
 endfunction
 
+
 /*
  * GFSetRadioGroup(byref gump, group_id)
  *
@@ -444,6 +405,7 @@
 	return 1;
 endfunction
 
+
 /*
  * GFHTMLArea(byref gump, x, y, width, height, text, background, scrollbar)
  *
@@ -476,6 +438,7 @@
 	return (index);
 endfunction
 
+
 /*
  * GFAddHTMLLocalized(byref gump, x, y, width, height, cliloc, background, scrollbar, hue)
  *
@@ -511,6 +474,7 @@
 	return 1;
 endfunction
 
+
 /*
  * GFGumpPic(byref gump, x, y, gump_id, hue)
  *
@@ -543,6 +507,7 @@
 	return 1;
 endfunction
 
+
 /*
  * GFTilePic(byref gump, x, y, tile_id, hue)
  *
@@ -575,6 +540,7 @@
 	return 1;
 endfunction
 
+
 /*
  * GFTextLine(byref gump, x, y, hue, text)
  *
@@ -601,6 +567,7 @@
 	return (index);
 endfunction
 
+
 /*
  * GFTextCrop(byref gump, x, y, width, height, hue, text)
  *
@@ -631,6 +598,7 @@
 	return (index);
 endfunction
 
+
 /*
  * GFRadioButton(byref gump, x, y, unp_id, pres_id, status, btn_value)
  *
@@ -676,6 +644,7 @@
 	return (btn_value);
 endfunction
 
+
 /*
  * GFTextEntry(byref gump, x, y, width, height, txt_color, ini_text)
  *
@@ -717,6 +686,7 @@
 	return (txt_id);
 endfunction
 
+
 /*
  * GFSendGump(who, gump)
  *
@@ -742,6 +712,7 @@
 	return ret_val;
 endfunction
 
+
 /*
  * XGFErrorSetup(who, gump)
  *



From austin at berlios.de  Sun Sep  4 18:15:18 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 4 Sep 2005 18:15:18 +0200
Subject: [Poldistro-svn] r53 - trunk/096/pkg/mobiles
Message-ID: <200509041615.j84GFI3G032684@sheep.berlios.de>

Author: austin
Date: 2005-09-04 18:15:18 +0200 (Sun, 04 Sep 2005)
New Revision: 53

Removed:
   trunk/096/pkg/mobiles/ai_brain/
Log:




From austin at berlios.de  Sun Sep  4 18:28:06 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 4 Sep 2005 18:28:06 +0200
Subject: [Poldistro-svn] r55 - trunk/096/pkg/mobiles
Message-ID: <200509041628.j84GS6CB001338@sheep.berlios.de>

Author: austin
Date: 2005-09-04 18:28:05 +0200 (Sun, 04 Sep 2005)
New Revision: 55

Removed:
   trunk/096/pkg/mobiles/ai_brain/
Log:




From austin at berlios.de  Sun Sep  4 18:37:25 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 4 Sep 2005 18:37:25 +0200
Subject: [Poldistro-svn] r57 - trunk/096/pkg/mobiles/ai_brain/include/braincore
Message-ID: <200509041637.j84GbPXu014647@sheep.berlios.de>

Author: austin
Date: 2005-09-04 18:37:23 +0200 (Sun, 04 Sep 2005)
New Revision: 57

Modified:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-04 16:30:56 UTC (rev 56)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-04 16:37:23 UTC (rev 57)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * EVENTPROCESSOR.INC - v1.0
-* Updated 9/1/2005 6:20AM
+* Updated 9/4/2005 9:30AM
 *
 * -- Revision v1.0 --
 * Austin:
@@ -10,12 +10,12 @@
 
 function ProcessEvent(byref event)
 	var old_priority := set_priority(25);
-	
+
 	case( event.type )
 		//
 		// *Check movement first, since its the event that seems to be sent most often.
 		//
-		
+
 		// Move NPC
 		// .source	: From/To whom/what?
 		// .speed	: Walk/Run
@@ -24,7 +24,7 @@
 		NPCEVENT_MOVE:
 			Movement(event);
 			break;
-			
+
 		// Instructs the npc to walk toward an XY coordinate.
 		// .x and .y	: From/To  coordinates
 		// .speed	: Walk/Run
@@ -33,17 +33,17 @@
 		NPCEVENT_MOVE_XY:
 			MovementXY(event);
 			break;
-			
+
 		// Wander somewhere
 		// .loop	: Number of times to attept to wander.
 		NPCEVENT_WANDER:
 	   		MovementWander(event);
 	   		break;
-		
+
 		//
 		// * Check System Events that the core sends.
 		//
-			
+
 		// Triggered when a mobile enter's the npcs 'area size'.
 		// .source	: What entered the area
 		SYSEVENT_ENTEREDAREA:
@@ -56,7 +56,7 @@
 				endif
 			endif
 			break;
-			
+
 		// Triggered when a mobile leaves the npc's 'area size'.
 		// .source	: What left the area
 		SYSEVENT_LEFTAREA:
@@ -69,7 +69,7 @@
 				endif
 			endif
 			break;
-			
+
 		// Someone has changed from blue to gray/red and was already within the ENTERED_AREA range
 		// .source	: What changed criminal status.
 		SYSEVENT_GONE_CRIMINAL:
@@ -82,7 +82,7 @@
 				endif
 			endif
 			break;
-			
+
 		// Sent when something targets the npc to begin combat or
 		// when something has damaged the npc.
 		// .source	: What caused the damage or engaged the npc
@@ -101,7 +101,7 @@
 				endif
 			endif
 			break;
-			
+
 		// Instructs the npc to run its disengage nerve.
 		// When something attacking it goes out of warmode, this is run.
 		// .source	: What was targetting this npc but has now left combat mode.
@@ -115,9 +115,8 @@
 				endif
 			endif
 			break;
-			
-		// When speech is made by a player, this nerve is used.
-		// Note: The NPC function Say() doesnt yet pass around the speech event.
+
+		// When speech is made by a mobile, this nerve is used.
 		// .source	: Where the speech originated.
 		// .text	: The actual speech
 		// .uc_text	: a "Unicode array" of 2-byte "Big Endian" integers.
@@ -134,7 +133,7 @@
 				endif
 			endif
 			break;
-			
+
 		// Instructs the npc to run its double click script.
 		// Run when the npc is double clicked by a player.
 		// .source	: What sent the double click
@@ -150,7 +149,7 @@
 				endif
 			endif
 			break;
-			
+
 		// The NPC is a merchant, and has sold or purchased something.
 		// Both sold and bought events are sent to this same nerve.
 		// The best thing to do is fork it into two functions inside the
@@ -171,7 +170,7 @@
 				endif
 			endif
 			break;
-			
+
 		// Someone has dragged an item onto the npc.
 		// .source	: What dragged the item over the npc.
 		// .item	: The item being given to the npc.
@@ -185,16 +184,17 @@
 				endif
 			endif
 			break;
-			
+
 		//
 		// * Check custom events
 		//
+
 		//A nerve has instructed the brain to kill another nerve or its self.
 		// .name	: Nerve name
 		NPCEVENT_ENDNERVE:
 			StopNerve(npc, event.name, g_nerves);
 			break;
-			
+
 		//A nerve has instructed the brain to start another nerve.
 		// .name	: Nerve name
 		// .script	: Nerve script
@@ -202,14 +202,14 @@
 		NPCEVENT_STARTNERVE:
 			StartNerve(npc, event.name, event.script, event.data, event.flags, g_nerves);
 			break;
-			
+
 		// Set a new opponent!
 		// NOTE: Auto-sets Warmode=1!
 		// .source	: Opponent (mobile)
 		NPCEVENT_OPPONENT:
 			SetOpponent(event.source);
 			break;
-			
+
 		// Say something
 		// .text	: Speech content
 		// .texttype	: Speech type ("default", "whisper", yell")
@@ -217,7 +217,7 @@
 		NPCEVENT_SPEAK:
 			Say(event.text, event.texttype, event.doevent);
 			break;
-			
+
 		// Turn toward something
 		// .source	: Target (anything)
 		// .direction	: NETURN_TOWARD or NETURN_AWAY
@@ -229,7 +229,7 @@
 					TurnAwayFrom(event.source);
 			endcase
 			break;
-			
+
 		// Face towards or away from XY coordinates.
 		// .x and .y replace .source for TURN_XY
 		// .direction	: NETURN_TOWARD or NETURN_AWAY
@@ -241,27 +241,27 @@
 					TurnAwayFromLocation(event.x, event.y);
 			endcase
 			break;
-			
+
 		// Set WarMode state
 		// NOTE: Auto-clears Opponent if turned off!
 		// .value : 0=Off. 1=On.
 		NPCEVENT_WARMODE:
 			SetWarmode( event.value );
 			break;
-	   		
+
 	   	// Force the npc to go into its sleep mode.
 	   	// If the next event in the queue tells it to wake up,
 	   	// this command will be useless.
 	   	NPCEVENT_SLEEP:
 	   		//idle_ticks := g_settings["idle_ticks"]+1;
 	   		break;
-	   		
+
 	   	// Force the npc out of sleep mode.
 	   	NPCEVENT_WAKEUP:
 	   		//sleep_mode := 0;
 	   		//idle_ticks := 0;
 	   		break;
-	   		
+
 	   	// Forward an event from one nerve to another.
 	   	// .NerveName	: The name of the nerve to forward the event to.
 	   	// .mask	: Type of event for the nerve to receive.
@@ -272,7 +272,7 @@
 				process.SendEvent(event);
 			endif
 			break;
-			
+
 		// If the event .type is unknown, send it to the
 		// npc's "virtual" nerve if it has one.
 	   	default:
@@ -294,6 +294,6 @@
 	   if ( event.process )
 	   	(event.process).SendEvent(struct{"type":=NPCEVENT_DONE, "source":=event.type});
 	   endif
-	   
+
 	   set_priority(old_priority);
 endfunction



From austin at berlios.de  Sun Sep  4 18:40:17 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 4 Sep 2005 18:40:17 +0200
Subject: [Poldistro-svn] r58 - trunk/096/pkg/mobiles/ai_brain/include/braincore
Message-ID: <200509041640.j84GeHO4016737@sheep.berlios.de>

Author: austin
Date: 2005-09-04 18:39:27 +0200 (Sun, 04 Sep 2005)
New Revision: 58

Modified:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-04 16:37:23 UTC (rev 57)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-04 16:39:27 UTC (rev 58)
@@ -37,8 +37,8 @@
 		// Wander somewhere
 		// .loop	: Number of times to attept to wander.
 		NPCEVENT_WANDER:
-	   		MovementWander(event);
-	   		break;
+			MovementWander(event);
+			break;
 
 		//
 		// * Check System Events that the core sends.
@@ -249,25 +249,25 @@
 			SetWarmode( event.value );
 			break;
 
-	   	// Force the npc to go into its sleep mode.
-	   	// If the next event in the queue tells it to wake up,
-	   	// this command will be useless.
-	   	NPCEVENT_SLEEP:
-	   		//idle_ticks := g_settings["idle_ticks"]+1;
-	   		break;
+		// Force the npc to go into its sleep mode.
+		// If the next event in the queue tells it to wake up,
+		// this command will be useless.
+		NPCEVENT_SLEEP:
+			//idle_ticks := g_settings["idle_ticks"]+1;
+			break;
 
-	   	// Force the npc out of sleep mode.
-	   	NPCEVENT_WAKEUP:
-	   		//sleep_mode := 0;
-	   		//idle_ticks := 0;
-	   		break;
+		// Force the npc out of sleep mode.
+		NPCEVENT_WAKEUP:
+			//sleep_mode := 0;
+			//idle_ticks := 0;
+			break;
 
-	   	// Forward an event from one nerve to another.
-	   	// .NerveName	: The name of the nerve to forward the event to.
-	   	// .mask	: Type of event for the nerve to receive.
-	   	// .data	: Data to forward to the nerve.
-	   	NPCEVENT_FWDNERVE:
-	   	var process := GetNerveProcess(npc, event.NerveName, g_nerves);
+		// Forward an event from one nerve to another.
+		// .NerveName	: The name of the nerve to forward the event to.
+		// .mask	: Type of event for the nerve to receive.
+		// .data	: Data to forward to the nerve.
+		NPCEVENT_FWDNERVE:
+		var process := GetNerveProcess(npc, event.NerveName, g_nerves);
 			if ( process )
 				process.SendEvent(event);
 			endif
@@ -275,9 +275,9 @@
 
 		// If the event .type is unknown, send it to the
 		// npc's "virtual" nerve if it has one.
-	   	default:
-	   		if ( g_scripts.Exists("Virtual") )
-	   			var process := GetNerveProcess(npc, "Virtual", g_nerves);
+		default:
+			if ( g_scripts.Exists("Virtual") )
+				var process := GetNerveProcess(npc, "Virtual", g_nerves);
 				if ( !process )
 					StartNerve(npc, "Virtual", g_scripts["Virtual"].script, {event, g_settings, g_scripts}, g_scripts["Virtual"].flags, g_nerves);
 				else
@@ -292,7 +292,7 @@
 	   // and telling it what event it sent that has finished
 	   // being processed.
 	   if ( event.process )
-	   	(event.process).SendEvent(struct{"type":=NPCEVENT_DONE, "source":=event.type});
+		(event.process).SendEvent(struct{"type":=NPCEVENT_DONE, "source":=event.type});
 	   endif
 
 	   set_priority(old_priority);



From panosl at berlios.de  Sun Sep  4 15:15:39 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Sun, 4 Sep 2005 15:15:39 +0200
Subject: [Poldistro-svn] r51 - in trunk/096: data pkg/systems/storage
Message-ID: <200509041315.j84DFdGG015066@sheep.berlios.de>

Author: panosl
Date: 2005-09-04 15:15:12 +0200 (Sun, 04 Sep 2005)
New Revision: 51

Added:
   trunk/096/pkg/systems/storage/docs/
Modified:
   trunk/096/data/datastore.txt
   trunk/096/data/items.txt
   trunk/096/data/npcequip.txt
   trunk/096/data/npcs.txt
   trunk/096/data/pol.txt
Log:


Modified: trunk/096/data/datastore.txt
===================================================================
--- trunk/096/data/datastore.txt	2005-09-04 13:10:41 UTC (rev 50)
+++ trunk/096/data/datastore.txt	2005-09-04 13:15:12 UTC (rev 51)
@@ -8,8 +8,8 @@
 	Name	BountySystem
 	Package	bountyboard
 	Flags	0
-	Version	15
-	OldVersion	14
+	Version	16
+	OldVersion	15
 }
 
 DataFile
@@ -28,8 +28,8 @@
 	Name	gumps
 	Package	control
 	Flags	0
-	Version	19
-	OldVersion	18
+	Version	20
+	OldVersion	19
 }
 
 DataFile
@@ -38,8 +38,8 @@
 	Name	packages
 	Package	control
 	Flags	0
-	Version	31
-	OldVersion	30
+	Version	32
+	OldVersion	31
 }
 
 DataFile
@@ -84,11 +84,41 @@
 
 DataFile
 {
+	Descriptor	:spawnsystem:Groups
+	Name	Groups
+	Package	spawnsystem
+	Flags	0
+	Version	1
+	OldVersion	0
+}
+
+DataFile
+{
+	Descriptor	:spawnsystem:Realms
+	Name	Realms
+	Package	spawnsystem
+	Flags	0
+	Version	1
+	OldVersion	0
+}
+
+DataFile
+{
+	Descriptor	:spawnsystem:Regions
+	Name	Regions
+	Package	spawnsystem
+	Flags	0
+	Version	1
+	OldVersion	0
+}
+
+DataFile
+{
 	Descriptor	:sysbook:staticbooks
 	Name	staticbooks
 	Package	sysbook
 	Flags	1
-	Version	3
+	Version	4
 	OldVersion	3
 }
 

Modified: trunk/096/data/items.txt
===================================================================
--- trunk/096/data/items.txt	2005-09-04 13:10:41 UTC (rev 50)
+++ trunk/096/data/items.txt	2005-09-04 13:15:12 UTC (rev 51)
@@ -2779,15 +2779,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb43b3
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	523
 	Y	955
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711809
@@ -3028,14 +3028,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4d1ec21a
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	555
 	Y	991
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i1112180i1112175
@@ -4202,7 +4203,7 @@
 	X	523
 	Y	1013
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712396
@@ -5989,14 +5990,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x48f72f27
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	573
 	Y	2120
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i926421i926424
@@ -6034,15 +6036,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4374
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	567
 	Y	2135
 	Z	11
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -7456,14 +7458,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140a42c
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	562
 	Y	2179
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a6:i213955i213957i213961i213959i213960i213953
@@ -7501,15 +7504,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4377
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	567
 	Y	2193
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711873
@@ -7522,15 +7525,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb437a
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	567
 	Y	2251
 	Z	2
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711810
@@ -8256,15 +8259,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4307
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	619
 	Y	825
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711764
@@ -9958,15 +9961,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4308
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	619
 	Y	883
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711819
@@ -10231,15 +10234,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb43b4
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	581
 	Y	955
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -10292,15 +10295,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb43b6
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	581
 	Y	1013
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711778
@@ -14497,14 +14500,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140a36a
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	591
 	Y	2167
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i213944
@@ -14518,14 +14522,15 @@
 
 Item
 {
-	Name	a banker node [enabled]
+	Name	a banker node [initializing]
 	Serial	0x4140a446
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	591
 	Y	2143
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i213963i213962i213964
@@ -14539,14 +14544,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140a4b4
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	611
 	Y	2159
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i213967
@@ -14575,14 +14581,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x5b73a042
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	631
 	Y	2162
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i213977i213975i213978i213976
@@ -14596,15 +14603,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4375
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	625
 	Y	2135
 	Z	11
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -17066,14 +17073,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140a31a
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	583
 	Y	2187
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i213941
@@ -17094,7 +17102,7 @@
 	X	607
 	Y	2183
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a5:i214034i214037i214035i214033i214036
@@ -17108,14 +17116,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140a877
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	593
 	Y	2207
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i214038
@@ -17129,14 +17138,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140a8be
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	583
 	Y	2231
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i214040i214039i214041
@@ -17150,14 +17160,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140a8f8
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	607
 	Y	2239
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i214042
@@ -17178,7 +17189,7 @@
 	X	623
 	Y	2214
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i214044i214045i214046i214043
@@ -17192,14 +17203,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4292a398
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	628
 	Y	2191
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i214024i552919
@@ -17213,15 +17225,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4378
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	625
 	Y	2193
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711779
@@ -18129,7 +18141,7 @@
 	X	599
 	Y	2279
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a2:i214048i214047
@@ -18143,15 +18155,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb437b
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	625
 	Y	2251
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711820
@@ -18252,14 +18264,15 @@
 
 Item
 {
-	Name	a banker node [enabled]
+	Name	a banker node [initializing]
 	Serial	0x4311aeec
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	655
 	Y	822
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i595307i595306i595305
@@ -21798,7 +21811,7 @@
 	X	655
 	Y	2159
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i213979
@@ -21812,14 +21825,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140a5c1
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	663
 	Y	2143
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i213981i213980
@@ -21833,15 +21847,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4376
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	676
 	Y	2134
 	Z	2
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711859
@@ -22323,14 +22337,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140a6e8
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	647
 	Y	2183
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i214001i213995i214003i213997
@@ -22564,7 +22579,7 @@
 	X	663
 	Y	2193
 	Z	2
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712191
@@ -22577,15 +22592,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb437c
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	678
 	Y	2247
 	Z	2
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711881
@@ -22938,167 +22953,121 @@
 
 Item
 {
-	Serial	0x6ae1208a
-	ObjType	0xe43
-	Graphic	0xe43
-	X	852
-	Y	1687
+	Serial	0x6ae1231f
+	ObjType	0xe77
+	Graphic	0xe77
+	X	850
+	Y	1689
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i1
-	CProp	furniture i1
+	CProp	LockPickDiff i2
 	CProp	level i1
 	CProp	link i1101472363
-	CProp	lockid i1231
+	CProp	lockid i1243
 	CProp	trap_strength i20
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae120a0
+	Serial	0x6ae12334
 	ObjType	0xeed
 	Graphic	0xeed
-	X	139
-	Y	70
+	X	41
+	Y	61
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	47
-	Container	0x6ae1208a
-	DecayAt	25191006
+	Amount	13
+	Container	0x6ae1231f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120ad
-	ObjType	0xf18
-	Graphic	0xf18
-	X	133
-	Y	127
+	Serial	0x6ae12340
+	ObjType	0xf25
+	Graphic	0xf25
+	X	44
+	Y	27
 	Z	0
 	Revision	2
 	Realm	britannia
 	Amount	2
-	Container	0x6ae1208a
-	DecayAt	25191006
+	Container	0x6ae1231f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120c3
-	ObjType	0xdc0c
-	Graphic	0xf08
-	X	49
-	Y	85
+	Serial	0x6ae12357
+	ObjType	0xdc0e
+	Graphic	0xf0b
+	X	54
+	Y	47
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae1208a
-	DecayAt	25191006
+	Container	0x6ae1231f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120d4
-	ObjType	0xf25
-	Graphic	0xf25
-	X	63
-	Y	132
+	Serial	0x6ae1236a
+	ObjType	0xf0f
+	Graphic	0xf0f
+	X	57
+	Y	66
 	Z	0
-	Revision	2
-	Realm	britannia
-	Amount	2
-	Container	0x6ae1208a
-	DecayAt	25191006
-}
-
-Item
-{
-	Serial	0x6ae120df
-	ObjType	0xdc0e
-	Graphic	0xf0b
-	X	98
-	Y	122
-	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae1208a
-	DecayAt	25191006
+	Container	0x6ae1231f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12100
-	ObjType	0xe43
-	Graphic	0xe43
-	X	853
-	Y	1687
+	Serial	0x6ae12384
+	ObjType	0xe77
+	Graphic	0xe77
+	X	852
+	Y	1689
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i14
-	CProp	furniture i1
+	CProp	LockPickDiff i6
 	CProp	level i1
 	CProp	link i1101472363
-	CProp	lockid i1235
+	CProp	lockid i1246
 	CProp	trap_strength i20
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae1212d
+	Serial	0x6ae123a0
 	ObjType	0xeed
 	Graphic	0xeed
-	X	89
-	Y	79
+	X	48
+	Y	46
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	20
-	Container	0x6ae12100
-	DecayAt	25191006
+	Amount	41
+	Container	0x6ae12384
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12135
-	ObjType	0xdc08
-	Graphic	0xf0d
-	X	140
-	Y	94
-	Z	0
-	Revision	1
-	Realm	britannia
-	Container	0x6ae12100
-	DecayAt	25191006
-}
-
-Item
-{
-	Serial	0x6ae1213b
-	ObjType	0xf11
-	Graphic	0xf11
-	X	109
-	Y	108
-	Z	0
-	Revision	2
-	Realm	britannia
-	Amount	2
-	Container	0x6ae12100
-	DecayAt	25191006
-}
-
-Item
-{
 	Serial	0x4f86e8b3
 	ObjType	0x122a
 	Graphic	0x122a
@@ -23375,15 +23344,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42c3
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1122
 	Y	1574
 	Z	1
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711857
@@ -23441,15 +23410,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42c9
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1101
 	Y	1632
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711846
@@ -23470,7 +23439,7 @@
 	X	1139
 	Y	1690
 	Z	3
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712150
@@ -23483,15 +23452,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42d5
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1112
 	Y	1762
 	Z	3
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711812
@@ -23512,7 +23481,7 @@
 	X	1103
 	Y	1806
 	Z	3
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712474
@@ -28348,7 +28317,7 @@
 	X	1159
 	Y	1574
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712320
@@ -28361,15 +28330,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42ca
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1159
 	Y	1632
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711798
@@ -28382,15 +28351,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42d0
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1159
 	Y	1690
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711897
@@ -28403,15 +28372,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42dc
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1159
 	Y	1806
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711743
@@ -28424,15 +28393,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42e2
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1159
 	Y	1864
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711891
@@ -28773,7 +28742,7 @@
 	X	1217
 	Y	1574
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712415
@@ -28786,15 +28755,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42c6
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1275
 	Y	1574
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711747
@@ -28807,15 +28776,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42cb
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1217
 	Y	1632
 	Z	1
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711823
@@ -28828,15 +28797,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42cc
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1275
 	Y	1632
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711806
@@ -28849,15 +28818,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42d1
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1217
 	Y	1690
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711896
@@ -28870,15 +28839,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42d2
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1275
 	Y	1690
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711858
@@ -28899,7 +28868,7 @@
 	X	1217
 	Y	1748
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712377
@@ -28920,7 +28889,7 @@
 	X	1275
 	Y	1748
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712502
@@ -28933,15 +28902,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42dd
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1217
 	Y	1806
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711899
@@ -28962,7 +28931,7 @@
 	X	1275
 	Y	1806
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712578
@@ -28975,15 +28944,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42e3
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1217
 	Y	1864
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711890
@@ -28996,15 +28965,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42e4
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1275
 	Y	1864
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711742
@@ -29315,15 +29284,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42c7
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1333
 	Y	1574
 	Z	31
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711864
@@ -29596,15 +29565,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42cd
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1333
 	Y	1632
 	Z	51
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711827
@@ -29701,15 +29670,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42d3
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1333
 	Y	1690
 	Z	31
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711876
@@ -30061,7 +30030,7 @@
 	X	1295
 	Y	1762
 	Z	10
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a2:i203725i203735
@@ -30075,15 +30044,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42d9
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1333
 	Y	1749
 	Z	21
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711847
@@ -30128,7 +30097,7 @@
 	X	1333
 	Y	1806
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -30149,7 +30118,7 @@
 	X	1333
 	Y	1864
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712224
@@ -31295,7 +31264,7 @@
 	X	1323
 	Y	3693
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712455
@@ -31473,14 +31442,15 @@
 
 Item
 {
-	Name	a banker node [enabled]
+	Name	a banker node [initializing]
 	Serial	0x42a23ea9
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1319
 	Y	3775
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i558564i558563
@@ -31506,15 +31476,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb430d
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1323
 	Y	3751
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711804
@@ -32174,15 +32144,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42c8
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1391
 	Y	1574
 	Z	31
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -33215,14 +33185,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x42b1a8b4
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1388
 	Y	1651
 	Z	30
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i563514
@@ -33256,15 +33227,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42ce
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1391
 	Y	1632
 	Z	31
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711855
@@ -33445,15 +33416,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42d4
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1391
 	Y	1690
 	Z	31
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -33789,14 +33760,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fba58
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1351
 	Y	1778
 	Z	15
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a2:i201215i201214
@@ -33838,15 +33810,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42da
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1391
 	Y	1748
 	Z	21
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711792
@@ -34033,15 +34005,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42e0
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1391
 	Y	1806
 	Z	1
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -34054,15 +34026,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42e6
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1391
 	Y	1864
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711808
@@ -34131,7 +34103,7 @@
 	X	1381
 	Y	3693
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712054
@@ -34342,7 +34314,7 @@
 	X	1381
 	Y	3751
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -35089,7 +35061,7 @@
 	X	1391
 	Y	3827
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i1681625
@@ -35227,15 +35199,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4311
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1346
 	Y	3807
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711814
@@ -35248,15 +35220,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4312
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1381
 	Y	3809
 	Z	1
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711851
@@ -35725,15 +35697,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4315
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1344
 	Y	3867
 	Z	8
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711774
@@ -35754,7 +35726,7 @@
 	X	1381
 	Y	3867
 	Z	8
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -36772,14 +36744,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fc5a7
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1467
 	Y	1518
 	Z	20
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a1:i201288
@@ -36806,15 +36779,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42e7
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1445
 	Y	1529
 	Z	39
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711886
@@ -40072,7 +40045,7 @@
 	X	1413
 	Y	1599
 	Z	30
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i201227i201228
@@ -40086,14 +40059,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fbcff
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1412
 	Y	1599
 	Z	50
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i201229
@@ -40107,14 +40081,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fbe24
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1456
 	Y	1557
 	Z	30
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i201235
@@ -40128,14 +40103,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41406be5
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1421
 	Y	1551
 	Z	30
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i211363i211362
@@ -42623,14 +42599,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x43f29d88
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1433
 	Y	1595
 	Z	20
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i651569i201225i201226i201224
@@ -42716,15 +42693,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42ed
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1445
 	Y	1587
 	Z	21
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711805
@@ -44265,7 +44242,7 @@
 	X	1443
 	Y	1649
 	Z	10
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i201193
@@ -44286,7 +44263,7 @@
 	X	1426
 	Y	1655
 	Z	10
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i201195i201194
@@ -44300,14 +44277,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fbac4
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1433
 	Y	1611
 	Z	20
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i201216i201217
@@ -44321,14 +44299,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fbae6
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1453
 	Y	1613
 	Z	20
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i201218
@@ -47739,15 +47718,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42f3
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1445
 	Y	1645
 	Z	19
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -50114,14 +50093,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fb469
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1453
 	Y	1685
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i201112
@@ -50142,7 +50122,7 @@
 	X	1471
 	Y	1689
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i201184i201186i201187i201185
@@ -50163,7 +50143,7 @@
 	X	1431
 	Y	1723
 	Z	20
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a5:i201201i201200i201199i201198i201197
@@ -50184,7 +50164,7 @@
 	X	1455
 	Y	1723
 	Z	6
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i201207
@@ -50996,7 +50976,7 @@
 	X	1431
 	Y	1682
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i200273i200272i1499758
@@ -51034,15 +51014,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42f9
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1445
 	Y	1703
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711757
@@ -52533,14 +52513,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fb892
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1420
 	Y	1751
 	Z	13
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i201204i201205i201203i201206
@@ -52554,15 +52535,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42ff
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1445
 	Y	1761
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -52701,15 +52682,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb430b
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1439
 	Y	3693
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711895
@@ -52966,7 +52947,7 @@
 	X	1439
 	Y	3751
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -53239,7 +53220,7 @@
 	X	1431
 	Y	3823
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i1285497i1285498i1285499i1285496
@@ -53521,15 +53502,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4313
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1439
 	Y	3809
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711887
@@ -53694,15 +53675,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4317
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1439
 	Y	3867
 	Z	8
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -54071,14 +54052,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x51e7c6e2
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1455
 	Y	4007
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a4:i1285474i1285471i1285473i1285472
@@ -54237,7 +54219,7 @@
 	X	1455
 	Y	4027
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a1:i1285479
@@ -54464,14 +54446,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x51e859c1
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1447
 	Y	3983
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a2:i1285491i1285490
@@ -54510,14 +54493,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x51e86ce6
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1423
 	Y	3983
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a4:i1285492i1285495i1285494i1285493
@@ -57037,7 +57021,7 @@
 	X	1529
 	Y	1429
 	Z	16
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -57222,7 +57206,7 @@
 	X	1503
 	Y	1529
 	Z	41
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712743
@@ -59782,14 +59766,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fbe56
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1472
 	Y	1579
 	Z	20
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i201236i201237
@@ -59803,14 +59788,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fbe94
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1483
 	Y	1585
 	Z	20
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i201238
@@ -59861,14 +59847,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41406aea
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1517
 	Y	1545
 	Z	25
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i211361i211360
@@ -59889,7 +59876,7 @@
 	X	1490
 	Y	1550
 	Z	30
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a10:i201243i201241i201239i201240i201244i201242i201246i201248i201245i201247
@@ -59975,7 +59962,7 @@
 	X	1503
 	Y	1587
 	Z	11
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712382
@@ -61150,14 +61137,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fbb0e
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1473
 	Y	1611
 	Z	20
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i201219i201220
@@ -61171,14 +61159,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fbb5b
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1496
 	Y	1613
 	Z	20
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i201223
@@ -61192,14 +61181,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fbfc2
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1501
 	Y	1661
 	Z	27
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i201189i201190i201250i201249
@@ -61259,15 +61249,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42f4
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1503
 	Y	1645
 	Z	21
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711756
@@ -62758,7 +62748,7 @@
 	X	1495
 	Y	1718
 	Z	7
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i201209i201208
@@ -62779,7 +62769,7 @@
 	X	1493
 	Y	1687
 	Z	20
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i201210i201213i201212i201211
@@ -62793,14 +62783,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4263e405
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1475
 	Y	1669
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i514811i201133i201132i201131
@@ -63644,14 +63635,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x42b405fd
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1477
 	Y	1723
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i550504
@@ -63719,15 +63711,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42fa
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1503
 	Y	1703
 	Z	21
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711790
@@ -65093,15 +65085,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4300
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1499
 	Y	1761
 	Z	2
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711824
@@ -65272,15 +65264,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb430c
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1497
 	Y	3693
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711789
@@ -65293,15 +65285,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4310
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1497
 	Y	3758
 	Z	2
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711753
@@ -65322,7 +65314,7 @@
 	X	1491
 	Y	3809
 	Z	2
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712055
@@ -65381,7 +65373,7 @@
 	X	1487
 	Y	3863
 	Z	2
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -67620,7 +67612,7 @@
 	X	1561
 	Y	1529
 	Z	41
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712704
@@ -69055,14 +69047,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fc2fc
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1587
 	Y	1591
 	Z	20
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i201272
@@ -69076,15 +69069,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42ef
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1561
 	Y	1587
 	Z	11
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711841
@@ -69689,14 +69682,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fc126
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1555
 	Y	1655
 	Z	20
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a6:i201251i201254i201252i201256i201255i201253
@@ -69717,7 +69711,7 @@
 	X	1595
 	Y	1655
 	Z	10
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a6:i201263i201260i201262i201264i201265i201261
@@ -69791,15 +69785,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42f5
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1561
 	Y	1645
 	Z	21
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711835
@@ -71379,7 +71373,7 @@
 	X	1574
 	Y	1706
 	Z	35
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i201280i201281i201282
@@ -71401,7 +71395,7 @@
 	X	1561
 	Y	1703
 	Z	36
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712223
@@ -75135,14 +75129,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fc56b
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1556
 	Y	1767
 	Z	10
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a5:i201285i201284i201283i201287i201286
@@ -75156,15 +75151,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4301
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1561
 	Y	1761
 	Z	11
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711797
@@ -75963,15 +75958,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42ea
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1619
 	Y	1529
 	Z	41
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711825
@@ -77290,14 +77285,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fc2c1
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1619
 	Y	1583
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i201269i201270i201271i201268
@@ -77331,7 +77327,7 @@
 	X	1619
 	Y	1587
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712231
@@ -78177,7 +78173,7 @@
 	X	1655
 	Y	1607
 	Z	20
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i201266i201267
@@ -78198,7 +78194,7 @@
 	X	1655
 	Y	1647
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i201273
@@ -78212,15 +78208,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42f6
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1619
 	Y	1645
 	Z	36
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711783
@@ -78908,14 +78904,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fc367
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1639
 	Y	1699
 	Z	36
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i201274
@@ -78929,14 +78926,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x413fc3d9
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1607
 	Y	1711
 	Z	20
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a5:i201275i201279i201276i201278i201277
@@ -78950,15 +78948,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42fc
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1619
 	Y	1703
 	Z	28
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711813
@@ -79031,7 +79029,7 @@
 	X	1619
 	Y	1761
 	Z	66
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712610
@@ -79168,7 +79166,7 @@
 	X	1677
 	Y	1529
 	Z	24
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712634
@@ -80383,15 +80381,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42f1
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1677
 	Y	1587
 	Z	8
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711776
@@ -80404,15 +80402,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42f2
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1727
 	Y	1586
 	Z	19
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711834
@@ -80478,15 +80476,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42f7
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1677
 	Y	1645
 	Z	6
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711830
@@ -80507,7 +80505,7 @@
 	X	1668
 	Y	1703
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712426
@@ -80625,15 +80623,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb42ec
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1735
 	Y	1529
 	Z	5
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711767
@@ -84828,15 +84826,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb437d
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1823
 	Y	2667
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712530
@@ -84849,14 +84847,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x6ae0cfc2
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1855
 	Y	2677
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	NpcList a2:i1711734i1711733
 	CProp	Range i15
@@ -85239,14 +85238,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41b5c14c
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1844
 	Y	2735
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i379821
@@ -85260,14 +85260,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41b5c646
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1843
 	Y	2709
 	Z	10
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i379846i379842
@@ -85281,14 +85282,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x42684353
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1822
 	Y	2735
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i522358
@@ -86718,15 +86720,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4383
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1823
 	Y	2725
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711874
@@ -87150,14 +87152,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41b5bbae
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1852
 	Y	2792
 	Z	-8
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i379791i379793i379792
@@ -89202,15 +89205,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4389
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1823
 	Y	2783
 	Z	1
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711838
@@ -89358,14 +89361,15 @@
 
 Item
 {
-	Name	a banker node [enabled]
+	Name	a banker node [initializing]
 	Serial	0x41b5b052
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1813
 	Y	2828
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i379740i379741
@@ -89543,15 +89547,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb438f
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1823
 	Y	2841
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711900
@@ -89627,15 +89631,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4395
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1823
 	Y	2899
 	Z	13
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711863
@@ -90343,7 +90347,7 @@
 	X	1891
 	Y	2687
 	Z	10
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i214981i214982
@@ -90954,14 +90958,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x42682753
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1895
 	Y	2652
 	Z	10
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i522289
@@ -91405,15 +91410,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb437e
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1881
 	Y	2667
 	Z	-1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711781
@@ -91458,7 +91463,7 @@
 	X	1892
 	Y	2688
 	Z	30
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i214983
@@ -93533,15 +93538,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4384
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1883
 	Y	2724
 	Z	21
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711803
@@ -93899,14 +93904,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41b5b9e2
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1898
 	Y	2805
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i379749i379767
@@ -93927,7 +93933,7 @@
 	X	1914
 	Y	2806
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i379789i379790i379788
@@ -93941,14 +93947,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41b5bbc6
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1883
 	Y	2806
 	Z	10
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i379794
@@ -95225,15 +95232,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb438a
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1881
 	Y	2783
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -95316,7 +95323,7 @@
 	X	1881
 	Y	2841
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712342
@@ -95342,15 +95349,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4396
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1881
 	Y	2899
 	Z	13
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -97660,15 +97667,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb437f
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1939
 	Y	2667
 	Z	-1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -98921,7 +98928,7 @@
 	X	1939
 	Y	2725
 	Z	11
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712108
@@ -99078,7 +99085,7 @@
 	X	1939
 	Y	2766
 	Z	10
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i214980
@@ -100322,7 +100329,7 @@
 	X	1930
 	Y	2796
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i214978i214977i214979
@@ -100336,15 +100343,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb438b
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1939
 	Y	2783
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711802
@@ -100630,14 +100637,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x42987227
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1983
 	Y	2838
 	Z	15
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i555089i555090i555088
@@ -100651,15 +100659,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4391
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1939
 	Y	2842
 	Z	12
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711807
@@ -100680,7 +100688,7 @@
 	X	1939
 	Y	2899
 	Z	13
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -103613,15 +103621,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4386
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1997
 	Y	2725
 	Z	31
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711842
@@ -103642,7 +103650,7 @@
 	X	2037
 	Y	2724
 	Z	7
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712228
@@ -105071,7 +105079,7 @@
 	X	2031
 	Y	2797
 	Z	10
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i553065
@@ -105092,7 +105100,7 @@
 	X	2015
 	Y	2804
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i553068
@@ -105114,7 +105122,7 @@
 	X	1997
 	Y	2783
 	Z	19
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712353
@@ -106682,14 +106690,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x42982395
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2028
 	Y	2844
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i554917i554918
@@ -106729,7 +106738,7 @@
 	X	1997
 	Y	2841
 	Z	16
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712056
@@ -106818,15 +106827,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4398
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	1997
 	Y	2899
 	Z	6
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711868
@@ -106854,14 +106863,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x6ae0d03a
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	1991
 	Y	2886
 	Z	5
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	NpcList a1:i1711735
 	CProp	Range i10
@@ -106933,15 +106943,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4382
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2108
 	Y	2667
 	Z	2
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711817
@@ -107116,15 +107126,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb438d
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2055
 	Y	2783
 	Z	19
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -107604,15 +107614,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4393
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2055
 	Y	2841
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711832
@@ -107625,15 +107635,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4399
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2048
 	Y	2890
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711844
@@ -107731,15 +107741,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4388
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2113
 	Y	2725
 	Z	11
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711788
@@ -107752,15 +107762,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb438e
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2113
 	Y	2783
 	Z	11
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711770
@@ -107781,7 +107791,7 @@
 	X	2119
 	Y	2833
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712225
@@ -107950,7 +107960,7 @@
 	X	2235
 	Y	1145
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712477
@@ -108396,14 +108406,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41406c33
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2215
 	Y	1191
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i211367i211366
@@ -108424,7 +108435,7 @@
 	X	2215
 	Y	1167
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i211384
@@ -108446,7 +108457,7 @@
 	X	2235
 	Y	1203
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712354
@@ -109670,7 +109681,7 @@
 	X	2256
 	Y	1185
 	Z	-2
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i211397
@@ -109684,14 +109695,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41406d93
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2256
 	Y	1171
 	Z	-2
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i211394
@@ -110123,14 +110135,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41406df6
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2243
 	Y	1231
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i211429i211428
@@ -111088,7 +111101,7 @@
 	X	2423
 	Y	399
 	Z	16
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712158
@@ -111540,7 +111553,7 @@
 	X	2423
 	Y	457
 	Z	16
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712235
@@ -111591,14 +111604,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41407a31
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2423
 	Y	551
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i212818
@@ -112609,15 +112623,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4332
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2423
 	Y	515
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711793
@@ -112630,15 +112644,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4336
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2424
 	Y	565
 	Z	2
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711892
@@ -112659,7 +112673,7 @@
 	X	2423
 	Y	662
 	Z	2
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712521
@@ -112968,14 +112982,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41407afe
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2455
 	Y	431
 	Z	15
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i212828i212827i212826
@@ -112996,7 +113011,7 @@
 	X	2439
 	Y	407
 	Z	15
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i212829
@@ -113017,7 +113032,7 @@
 	X	2477
 	Y	404
 	Z	15
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a5:i212834i212833i212832i212831i212830
@@ -117155,7 +117170,7 @@
 	X	2481
 	Y	399
 	Z	16
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712671
@@ -117251,7 +117266,7 @@
 	X	2461
 	Y	457
 	Z	15
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i212825
@@ -118468,15 +118483,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb432f
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2481
 	Y	457
 	Z	16
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711884
@@ -118541,14 +118556,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41407a1e
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2472
 	Y	560
 	Z	5
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i212805i212806
@@ -119064,15 +119080,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4333
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2481
 	Y	515
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711777
@@ -119085,15 +119101,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4337
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2481
 	Y	573
 	Z	8
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711758
@@ -119793,6 +119809,530 @@
 
 Item
 {
+	Serial	0x6ae1232e
+	ObjType	0xe77
+	Graphic	0xe77
+	X	2441
+	Y	1087
+	Z	48
+	Revision	1
+	Realm	britannia
+	CProp	LockPickDiff i97
+	CProp	level i5
+	CProp	link i1243277599
+	CProp	lockid i1243
+	CProp	trap_strength i100
+	CProp	trap_type s3
+	OnUseScript	:tinkering:tinkerTraps
+	DecayAt	25191073
+	Locked	1
+}
+
+Item
+{
+	Serial	0x6ae12333
+	ObjType	0xeed
+	Graphic	0xeed
+	X	52
+	Y	77
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	163
+	Container	0x6ae1232e
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1234a
+	ObjType	0x1f50
+	Graphic	0x1f50
+	X	55
+	Y	63
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1232e
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12356
+	ObjType	0x1f58
+	Graphic	0x1f58
+	X	55
+	Y	29
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1232e
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12360
+	ObjType	0x1f59
+	Graphic	0x1f59
+	X	55
+	Y	49
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1232e
+	DecayAt	25191073
+}
+
+Item
+{
+	Name	a magic hatchet
+	Serial	0x6ae1236e
+	ObjType	0xf43
+	Graphic	0xf43
+	X	58
+	Y	39
+	Z	0
+	Revision	2
+	Realm	britannia
+	CProp	OnHit a1:S9:silverHit
+	CProp	accuracy saccurate
+	CProp	damagemod sof ruin
+	CProp	durability sdurable
+	CProp	gain i5
+	CProp	silvermod i1
+	CProp	type saccuracy
+	Container	0x6ae1232e
+	DecayAt	25191073
+	Quality	1
+	HP	60
+	maxhp_mod	5
+	dmg_mod	1
+	HitScript	mainHitScript
+}
+
+Item
+{
+	Name	a magic round shield
+	Serial	0x6ae1237e
+	ObjType	0x1b72
+	Graphic	0x1b72
+	X	58
+	Y	77
+	Z	0
+	Revision	2
+	Realm	britannia
+	CProp	damagemod sof fortification
+	CProp	durability sdurable
+	Container	0x6ae1232e
+	DecayAt	25191073
+	Quality	1
+	HP	33
+	maxhp_mod	5
+	AR_mod	20
+}
+
+Item
+{
+	Name	a magic heavy crossbow
+	Serial	0x6ae1238c
+	ObjType	0x13fd
+	Graphic	0x13fd
+	X	57
+	Y	69
+	Z	0
+	Revision	2
+	Realm	britannia
+	CProp	OnHit a1:S9:silverHit
+	CProp	accuracy seminently accurate
+	CProp	damagemod sof power
+	CProp	durability sdurable
+	CProp	gain i15
+	CProp	silvermod i1
+	CProp	type saccuracy
+	Container	0x6ae1232e
+	DecayAt	25191073
+	Quality	1
+	HP	70
+	maxhp_mod	5
+	dmg_mod	7
+	HitScript	mainHitScript
+}
+
+Item
+{
+	Serial	0x6ae123a3
+	ObjType	0xf25
+	Graphic	0xf25
+	X	47
+	Y	52
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1232e
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123a9
+	ObjType	0xf18
+	Graphic	0xf18
+	X	52
+	Y	76
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	2
+	Container	0x6ae1232e
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123af
+	ObjType	0xf10
+	Graphic	0xf10
+	X	56
+	Y	28
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1232e
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123b6
+	ObjType	0xf30
+	Graphic	0xf30
+	X	40
+	Y	66
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1232e
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123bf
+	ObjType	0xf16
+	Graphic	0xf16
+	X	45
+	Y	54
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	2
+	Container	0x6ae1232e
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123c5
+	ObjType	0xf0f
+	Graphic	0xf0f
+	X	59
+	Y	43
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	2
+	Container	0x6ae1232e
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123cf
+	ObjType	0xdc08
+	Graphic	0xf0d
+	X	44
+	Y	75
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1232e
+	DecayAt	25191073
+}
+
+Item
+{
+	Name	a magic cloak
+	Serial	0x6ae123db
+	ObjType	0x1515
+	Graphic	0x1515
+	X	51
+	Y	36
+	Z	0
+	Revision	2
+	Realm	britannia
+	CProp	charges i31
+	CProp	damagemod s of strength
+	CProp	type sstrength
+	Container	0x6ae1232e
+	DecayAt	25191073
+	Quality	1
+	HP	20
+}
+
+Item
+{
+	Name	a magic heater shield
+	Serial	0x6ae123e5
+	ObjType	0x1b76
+	Graphic	0x1b76
+	X	51
+	Y	56
+	Z	0
+	Revision	2
+	Realm	britannia
+	CProp	damagemod sof guarding
+	CProp	durability sdurable
+	Container	0x6ae1232e
+	DecayAt	25191073
+	Quality	1
+	HP	45
+	maxhp_mod	10
+	AR_mod	10
+}
+
+Item
+{
+	Name	a magic leather skirt
+	Serial	0x6ae123f1
+	ObjType	0x1c08
+	Graphic	0x1c08
+	X	50
+	Y	34
+	Z	0
+	Revision	2
+	Realm	britannia
+	CProp	damagemod sof fortification
+	CProp	durability sfortified
+	Container	0x6ae1232e
+	DecayAt	25191073
+	Quality	1
+	HP	55
+	maxhp_mod	20
+	AR_mod	20
+}
+
+Item
+{
+	Serial	0x6ae1241b
+	ObjType	0xe42
+	Graphic	0xe42
+	X	2446
+	Y	1087
+	Z	48
+	Revision	1
+	Realm	britannia
+	CProp	LockPickDiff i96
+	CProp	furniture i1
+	CProp	level i5
+	CProp	link i1243277599
+	CProp	lockid i1251
+	CProp	trap_strength i100
+	CProp	trap_type s3
+	OnUseScript	:tinkering:tinkerTraps
+	DecayAt	25191073
+	Locked	1
+}
+
+Item
+{
+	Serial	0x6ae12420
+	ObjType	0xeed
+	Graphic	0xeed
+	X	99
+	Y	76
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	158
+	Container	0x6ae1241b
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12426
+	ObjType	0xf15
+	Graphic	0xf15
+	X	82
+	Y	132
+	Z	0
+	Revision	4
+	Realm	britannia
+	Amount	4
+	Container	0x6ae1241b
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1242b
+	ObjType	0xf30
+	Graphic	0xf30
+	X	95
+	Y	119
+	Z	0
+	Revision	4
+	Realm	britannia
+	Amount	4
+	Container	0x6ae1241b
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1242f
+	ObjType	0xf16
+	Graphic	0xf16
+	X	121
+	Y	117
+	Z	0
+	Revision	4
+	Realm	britannia
+	Amount	4
+	Container	0x6ae1241b
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12435
+	ObjType	0xf18
+	Graphic	0xf18
+	X	116
+	Y	84
+	Z	0
+	Revision	3
+	Realm	britannia
+	Amount	3
+	Container	0x6ae1241b
+	DecayAt	25191073
+}
+
+Item
+{
+	Name	a magic large battle axe
+	Serial	0x6ae12439
+	ObjType	0x13fa
+	Graphic	0x13fa
+	X	61
+	Y	119
+	Z	0
+	Revision	2
+	Realm	britannia
+	CProp	accuracy sexceedingly accurate
+	CProp	damagemod sof ruin
+	CProp	durability sdurable
+	CProp	gain i20
+	CProp	type saccuracy
+	Container	0x6ae1241b
+	DecayAt	25191073
+	Quality	1
+	HP	75
+	maxhp_mod	5
+	dmg_mod	1
+	HitScript	mainHitScript
+}
+
+Item
+{
+	Serial	0x6ae12443
+	ObjType	0xf25
+	Graphic	0xf25
+	X	76
+	Y	106
+	Z	0
+	Revision	4
+	Realm	britannia
+	Amount	4
+	Container	0x6ae1241b
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1244b
+	ObjType	0xf11
+	Graphic	0xf11
+	X	117
+	Y	111
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	2
+	Container	0x6ae1241b
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1244e
+	ObjType	0xdc14
+	Graphic	0xf07
+	X	75
+	Y	106
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1241b
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1244f
+	ObjType	0x1f52
+	Graphic	0x1f52
+	X	83
+	Y	73
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1241b
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12451
+	ObjType	0x1f4c
+	Graphic	0x1f4c
+	X	125
+	Y	106
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1241b
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12453
+	ObjType	0x1f50
+	Graphic	0x1f50
+	X	51
+	Y	111
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1241b
+	DecayAt	25191073
+}
+
+Item
+{
 	Serial	0x4a1a46b0
 	ObjType	0x859
 	Graphic	0x859
@@ -120720,14 +121260,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41407be7
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2526
 	Y	378
 	Z	23
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i212835
@@ -121827,15 +122368,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb432c
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2539
 	Y	399
 	Z	16
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711854
@@ -122104,14 +122645,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x52ada779
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2513
 	Y	473
 	Z	15
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i212823i1320024i212821i212822
@@ -122486,15 +123028,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4330
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2539
 	Y	457
 	Z	16
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -122610,14 +123152,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140790e
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2527
 	Y	551
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i212799i212801i212800
@@ -122631,14 +123174,15 @@
 
 Item
 {
-	Name	a banker node [enabled]
+	Name	a banker node [initializing]
 	Serial	0x41407924
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2503
 	Y	551
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i212802i212803i212804
@@ -123741,15 +124285,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4334
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2539
 	Y	515
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -123770,7 +124314,7 @@
 	X	2539
 	Y	573
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712660
@@ -123809,14 +124353,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x414078be
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2529
 	Y	577
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i212798
@@ -124214,15 +124759,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb433b
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2498
 	Y	631
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711833
@@ -124243,7 +124788,7 @@
 	X	2539
 	Y	631
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -124698,14 +125243,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41407802
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2577
 	Y	594
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i212790i212789i212791
@@ -125091,15 +125637,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb433d
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2597
 	Y	631
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711787
@@ -126170,14 +126716,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x428d7d80
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2635
 	Y	2083
 	Z	10
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a2:i547938i547939
@@ -126336,14 +126883,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x428d9808
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2627
 	Y	2099
 	Z	10
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a2:i548034i548032
@@ -127591,14 +128139,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x429026cc
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2676
 	Y	2238
 	Z	8
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a7:i550282i550247i550240i550252i550264i550334i550263
@@ -128927,14 +129476,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x429166c0
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2718
 	Y	2090
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a2:i552475i552476
@@ -129704,14 +130254,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4291bf32
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2707
 	Y	2139
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a2:i552480i552479
@@ -130351,14 +130902,15 @@
 
 Item
 {
-	Name	a banker node [enabled]
+	Name	a banker node [initializing]
 	Serial	0x463a3242
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2731
 	Y	2187
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a1:i542604
@@ -131203,14 +131755,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x42915bc7
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2735
 	Y	2255
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a5:i552444i552443i552442i552340i552336
@@ -131224,15 +131777,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb43a3
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2814
 	Y	779
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711862
@@ -132081,14 +132634,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41408490
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2775
 	Y	967
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a1:i212948
@@ -132475,7 +133029,7 @@
 	X	2823
 	Y	663
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712585
@@ -133194,14 +133748,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41407ea9
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2879
 	Y	719
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i212853
@@ -133215,15 +133770,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb439f
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2823
 	Y	721
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711785
@@ -133703,14 +134258,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140813c
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2859
 	Y	807
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i212874
@@ -133724,14 +134280,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41408204
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2839
 	Y	803
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i212876i212875
@@ -134768,14 +135325,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41408242
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2863
 	Y	855
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i212877
@@ -134796,7 +135354,7 @@
 	X	2839
 	Y	875
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a5:i212888i212894i212898i212885i212882
@@ -134818,7 +135376,7 @@
 	X	2823
 	Y	837
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712326
@@ -134831,15 +135389,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb43ab
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2826
 	Y	894
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711818
@@ -134852,15 +135410,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb43ac
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2865
 	Y	894
 	Z	2
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711815
@@ -135579,7 +136137,7 @@
 	X	2823
 	Y	953
 	Z	3
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712263
@@ -136489,7 +137047,7 @@
 	X	2862
 	Y	996
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i212922i212923
@@ -136510,7 +137068,7 @@
 	X	2860
 	Y	996
 	Z	-21
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i212926i212928i212927
@@ -136548,14 +137106,15 @@
 
 Item
 {
-	Name	a banker node [enabled]
+	Name	a banker node [initializing]
 	Serial	0x42991d13
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2879
 	Y	3471
 	Z	15
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i555291i555296i555294
@@ -138565,7 +139124,7 @@
 	X	2919
 	Y	671
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i212847i212846i212848
@@ -138579,14 +139138,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41407e6b
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2887
 	Y	655
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i212850i212849
@@ -138600,14 +139160,15 @@
 
 Item
 {
-	Name	a banker node [enabled]
+	Name	a banker node [initializing]
 	Serial	0x41407e7b
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2882
 	Y	683
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i212851i212852
@@ -138648,15 +139209,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb439c
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2881
 	Y	663
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711786
@@ -138669,15 +139230,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb439d
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2934
 	Y	663
 	Z	2
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711828
@@ -139768,14 +140329,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x428c3df1
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2891
 	Y	743
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i547652i547649i547651
@@ -139797,7 +140359,7 @@
 	X	2881
 	Y	721
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -139810,15 +140372,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb43a1
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2920
 	Y	721
 	Z	2
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711879
@@ -140705,7 +141267,7 @@
 	X	2895
 	Y	791
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i212854i212855
@@ -140719,14 +141281,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41407f4d
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2919
 	Y	799
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i212856i212858i212857
@@ -140748,7 +141311,7 @@
 	X	2881
 	Y	779
 	Z	8
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712537
@@ -140761,15 +141324,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb43a5
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2939
 	Y	782
 	Z	2
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711893
@@ -141071,14 +141634,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41407f89
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2919
 	Y	855
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i212859i212861i212860
@@ -141100,7 +141664,7 @@
 	X	2881
 	Y	837
 	Z	4
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712170
@@ -141113,15 +141677,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb43ad
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2942
 	Y	893
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711772
@@ -142862,14 +143426,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140837f
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2902
 	Y	908
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i212920i212918i212919i212921
@@ -144689,14 +145254,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x42a09100
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2936
 	Y	3502
 	Z	10
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i557578i557863i557579i557577
@@ -144717,7 +145283,7 @@
 	X	2903
 	Y	3516
 	Z	10
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i557030i557029
@@ -145057,7 +145623,7 @@
 	X	2889
 	Y	3489
 	Z	11
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712333
@@ -145118,14 +145684,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x42a09dea
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2902
 	Y	3527
 	Z	10
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i557029
@@ -145895,14 +146462,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41407d3e
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2962
 	Y	623
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a5:i212836i212837i212839i212840i212838
@@ -145923,7 +146491,7 @@
 	X	2988
 	Y	639
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a5:i212843i212844i212842i212845i212841
@@ -146334,15 +146902,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb439e
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2997
 	Y	663
 	Z	1
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711869
@@ -146965,7 +147533,7 @@
 	X	2999
 	Y	763
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i212868
@@ -147003,15 +147571,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb43a2
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2986
 	Y	734
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711867
@@ -148225,14 +148793,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41408042
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3000
 	Y	815
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i212867i212865i212866
@@ -148246,14 +148815,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41408083
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2991
 	Y	779
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i212869
@@ -148267,15 +148837,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb43a6
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2997
 	Y	779
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711877
@@ -149322,14 +149892,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41407fc6
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2967
 	Y	879
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i212862
@@ -149343,14 +149914,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41408009
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	2991
 	Y	839
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i212864i212863
@@ -149364,15 +149936,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb43a9
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2952
 	Y	837
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -149385,15 +149957,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb43aa
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2997
 	Y	837
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711759
@@ -149406,15 +149978,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb43ae
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2978
 	Y	892
 	Z	4
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711782
@@ -149585,15 +150157,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb43b1
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2944
 	Y	946
 	Z	1
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711831
@@ -149918,14 +150490,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x42ec3260
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3007
 	Y	3355
 	Z	15
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a6:i583434i583468i583466i583472i583471i583470
@@ -150107,7 +150680,7 @@
 	X	2958
 	Y	3365
 	Z	16
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712557
@@ -152233,7 +152806,7 @@
 	X	2958
 	Y	3423
 	Z	16
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712387
@@ -152427,15 +153000,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4371
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	2958
 	Y	3481
 	Z	16
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711889
@@ -152763,7 +153336,7 @@
 	X	3023
 	Y	763
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i212873
@@ -153599,14 +154172,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4263e4d2
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3013
 	Y	788
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i514839i514838i514837
@@ -155817,15 +156391,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb436e
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3016
 	Y	3365
 	Z	16
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711843
@@ -156838,7 +157412,7 @@
 	X	3016
 	Y	3423
 	Z	16
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -157318,15 +157892,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4372
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3025
 	Y	3481
 	Z	2
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711880
@@ -157464,15 +158038,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4343
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3525
 	Y	1104
 	Z	21
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711763
@@ -157485,15 +158059,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4348
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3525
 	Y	1149
 	Z	21
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711856
@@ -157689,15 +158263,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb434d
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3525
 	Y	1207
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712726
@@ -157710,15 +158284,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb434e
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3583
 	Y	1207
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711748
@@ -157739,7 +158313,7 @@
 	X	3525
 	Y	1323
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -157752,15 +158326,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4345
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3641
 	Y	1091
 	Z	1
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711836
@@ -157781,7 +158355,7 @@
 	X	3641
 	Y	1149
 	Z	2
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712190
@@ -157964,15 +158538,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb434f
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3641
 	Y	1207
 	Z	1
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711837
@@ -158357,15 +158931,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4353
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3599
 	Y	1265
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711870
@@ -158378,15 +158952,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4354
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3641
 	Y	1265
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711765
@@ -158399,15 +158973,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4358
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3605
 	Y	1315
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711799
@@ -158420,15 +158994,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4359
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3641
 	Y	1323
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711885
@@ -158467,14 +159041,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x43210792
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3615
 	Y	2472
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i599496i599495
@@ -159415,15 +159990,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4361
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3617
 	Y	2475
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711882
@@ -159573,14 +160148,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x43207e42
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3631
 	Y	2539
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a6:i599219i599223i599200i599220i599202i599221
@@ -159594,14 +160170,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x43216a1d
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3640
 	Y	2502
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i599564
@@ -160792,15 +161369,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4364
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3617
 	Y	2533
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711795
@@ -161013,14 +161590,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4320c878
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3632
 	Y	2572
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i599300i599301
@@ -161041,7 +161619,7 @@
 	X	3611
 	Y	2574
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i599310i599308
@@ -161055,14 +161633,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4320d6f8
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3600
 	Y	2609
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i599390i599391
@@ -161083,7 +161662,7 @@
 	X	3630
 	Y	2607
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i599396i599397i599398
@@ -161104,7 +161683,7 @@
 	X	3639
 	Y	2598
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i599599i599600
@@ -161125,7 +161704,7 @@
 	X	3639
 	Y	2599
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i599602
@@ -162747,15 +163326,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4367
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3617
 	Y	2591
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711780
@@ -162818,14 +163397,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4320dcb8
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3632
 	Y	2639
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i599428i599414i599420i599433
@@ -163541,15 +164121,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb436a
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3617
 	Y	2649
 	Z	41
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -164369,7 +164949,7 @@
 	X	3699
 	Y	1091
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712546
@@ -164382,15 +164962,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb434b
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3698
 	Y	1149
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711898
@@ -164677,15 +165257,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4350
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3699
 	Y	1207
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -164804,7 +165384,7 @@
 	X	3702
 	Y	1256
 	Z	21
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712407
@@ -164922,7 +165502,7 @@
 	X	3699
 	Y	1323
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712590
@@ -164955,7 +165535,7 @@
 	X	3702
 	Y	1369
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712143
@@ -165176,7 +165756,7 @@
 	X	3675
 	Y	2069
 	Z	28
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712663
@@ -165859,7 +166439,7 @@
 	X	3675
 	Y	2127
 	Z	21
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712066
@@ -165941,14 +166521,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x414111a3
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3663
 	Y	2187
 	Z	20
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i226880i226881
@@ -165962,14 +166543,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4141121a
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3666
 	Y	2233
 	Z	20
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i226883i226882
@@ -165983,14 +166565,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x414113a7
 	ObjType	0x887a
 	Graphic	0x1f1c
+	Color	0x35
 	X	3703
 	Y	2219
 	Z	20
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a7:i226895i226890i226893i226896i226892i226891i226894
@@ -166004,14 +166587,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x414113ed
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3687
 	Y	2219
 	Z	20
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i226898i226899i226900
@@ -166364,7 +166948,7 @@
 	X	3675
 	Y	2185
 	Z	21
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711971
@@ -166436,7 +167020,7 @@
 	X	3667
 	Y	2254
 	Z	20
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i226885i226884
@@ -166450,14 +167034,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x414112af
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3686
 	Y	2254
 	Z	20
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i226888i226887i226889i226886
@@ -168190,15 +168775,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4327
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3675
 	Y	2243
 	Z	21
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711800
@@ -168247,14 +168832,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x432167d8
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3676
 	Y	2475
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i599508
@@ -169797,15 +170383,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4362
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3675
 	Y	2475
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711888
@@ -169907,14 +170493,15 @@
 
 Item
 {
-	Name	a banker node [enabled]
+	Name	a banker node [initializing]
 	Serial	0x4320453e
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3694
 	Y	2510
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i599191i599190i599192
@@ -169941,14 +170528,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4320c7d7
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3667
 	Y	2534
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i599253i599254
@@ -171223,15 +171811,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4365
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3675
 	Y	2533
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -171354,14 +171942,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x43204441
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3666
 	Y	2588
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i599188i599187i599186
@@ -171375,14 +171964,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4320e6d6
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3671
 	Y	2614
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i599479i599480
@@ -172381,7 +172971,7 @@
 	X	3675
 	Y	2591
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -172456,14 +173046,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4320e645
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3671
 	Y	2648
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i599474i599476i599470i599471
@@ -173445,15 +174036,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb436b
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3675
 	Y	2649
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711750
@@ -173506,15 +174097,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4347
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3757
 	Y	1116
 	Z	21
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711866
@@ -173535,7 +174126,7 @@
 	X	3757
 	Y	1149
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712308
@@ -173670,14 +174261,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4851c41d
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3775
 	Y	1166
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a5:i900950i900932i900942i900961i900952
@@ -173691,14 +174283,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4851f6a3
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3738
 	Y	1195
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i901026i901029
@@ -173720,7 +174313,7 @@
 	X	3757
 	Y	1207
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712328
@@ -173871,14 +174464,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x484f22db
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3771
 	Y	1259
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a7:i900512i900504i900500i900501i900508i900513i900509
@@ -173892,14 +174486,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x48513c4c
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3771
 	Y	1227
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a7:i900793i900706i900840i900798i900841i900838i900744
@@ -173920,7 +174515,7 @@
 	X	3737
 	Y	1258
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a9:i901099i901129i901098i901097i901096i901132i901127i901147i901148
@@ -174032,15 +174627,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4356
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3757
 	Y	1265
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711875
@@ -174291,7 +174886,7 @@
 	X	3763
 	Y	1318
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i895620i895621
@@ -174305,15 +174900,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb435b
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3757
 	Y	1323
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711848
@@ -174459,7 +175054,7 @@
 	X	3740
 	Y	1381
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712086
@@ -174498,15 +175093,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb431f
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3733
 	Y	2069
 	Z	6
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711850
@@ -174519,15 +175114,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4320
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3769
 	Y	2069
 	Z	21
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711853
@@ -174587,7 +175182,7 @@
 	X	3735
 	Y	2151
 	Z	20
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i226875i226877i226876
@@ -174608,7 +175203,7 @@
 	X	3719
 	Y	2127
 	Z	20
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i226879i226878
@@ -174622,15 +175217,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4322
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3733
 	Y	2127
 	Z	21
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711762
@@ -174723,14 +175318,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x414110cd
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3727
 	Y	2223
 	Z	20
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i226870i226872i226871i226873
@@ -174744,14 +175340,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x414110ef
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	3759
 	Y	2223
 	Z	20
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i226874
@@ -174765,15 +175362,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4325
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3733
 	Y	2185
 	Z	21
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711829
@@ -174800,15 +175397,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4328
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3733
 	Y	2243
 	Z	21
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711883
@@ -174821,15 +175418,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4363
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3733
 	Y	2475
 	Z	30
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711860
@@ -174842,15 +175439,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4366
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3733
 	Y	2533
 	Z	25
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711769
@@ -175008,15 +175605,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4369
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3733
 	Y	2591
 	Z	41
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711894
@@ -175511,15 +176108,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb436c
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3733
 	Y	2649
 	Z	41
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711849
@@ -175877,7 +176474,7 @@
 	X	3791
 	Y	2127
 	Z	29
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712454
@@ -175890,15 +176487,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4329
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	3791
 	Y	2243
 	Z	21
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:u
@@ -180024,7 +180621,7 @@
 	X	4391
 	Y	1087
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i213147i213148
@@ -180038,14 +180635,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41408510
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	4391
 	Y	1063
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i213149i213150
@@ -180059,14 +180657,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140856f
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	4415
 	Y	1063
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i213160i213167i213170i213162
@@ -180080,14 +180679,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x414087df
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	4415
 	Y	1087
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a4:i213244i213241i213242i213243
@@ -181479,15 +182079,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb433f
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	4408
 	Y	1074
 	Z	1
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711872
@@ -182503,14 +183103,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41408855
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	4415
 	Y	1111
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i213246i213245i213247
@@ -182524,14 +183125,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x414088a1
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	4391
 	Y	1111
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i213248
@@ -182552,7 +183154,7 @@
 	X	4391
 	Y	1137
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i213249
@@ -182566,14 +183168,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140890c
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	4415
 	Y	1135
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i213250i213251i213252
@@ -183337,7 +183940,7 @@
 	X	4408
 	Y	1132
 	Z	1
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712171
@@ -183762,14 +184365,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41408946
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	4398
 	Y	1159
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i213253
@@ -186404,14 +187008,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41408611
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	4455
 	Y	1063
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i213202i213206i213208
@@ -186425,14 +187030,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x41408761
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	4455
 	Y	1087
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a5:i213225i213231i213229i213221i213223
@@ -186902,7 +187508,7 @@
 	X	4479
 	Y	1085
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i1572224i1572225
@@ -186928,15 +187534,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4340
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	4466
 	Y	1074
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711811
@@ -188121,15 +188727,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb4342
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	4466
 	Y	1132
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711822
@@ -188920,7 +189526,7 @@
 	X	4439
 	Y	1159
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i213254
@@ -188941,7 +189547,7 @@
 	X	4471
 	Y	1162
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a2:i213258i213259
@@ -188955,14 +189561,15 @@
 
 Item
 {
-	Name	a banker node [enabled]
+	Name	a banker node [initializing]
 	Serial	0x414089dd
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	4471
 	Y	1163
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a3:i213255i213256i213257
@@ -191193,14 +191800,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140864c
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	4483
 	Y	1063
 	Z	0
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i1
 	CProp	NpcList a1:i213218
@@ -193273,14 +193881,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140a1e7
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	4545
 	Y	860
 	Z	30
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a9:i213842i213849i213829i213833i213847i213830i213836i213831i213838
@@ -195283,14 +195892,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140a093
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	4623
 	Y	1207
 	Z	0
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a6:i213827i213824i213825i213823i213826i213828
@@ -196531,14 +197141,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4140a2f5
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	4683
 	Y	1413
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a7:i213892i213905i213894i213907i213899i213896i213901
@@ -196879,7 +197490,7 @@
 	X	5151
 	Y	59
 	Z	25
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a3:i901515i901518i901516
@@ -196893,14 +197504,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4853c8b0
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5171
 	Y	27
 	Z	27
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a1:i901601
@@ -196988,7 +197600,7 @@
 	X	5147
 	Y	75
 	Z	25
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a2:i901525i901526
@@ -197158,209 +197770,184 @@
 
 Item
 {
-	Serial	0x6ae1208b
-	ObjType	0xe77
-	Graphic	0xe77
-	X	5149
-	Y	621
+	Serial	0x6ae12325
+	ObjType	0xe42
+	Graphic	0xe42
+	X	5146
+	Y	620
 	Z	-50
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i16
+	CProp	LockPickDiff i15
+	CProp	furniture i1
 	CProp	level i1
 	CProp	link i1248056208
-	CProp	lockid i1231
+	CProp	lockid i1243
 	CProp	trap_strength i20
 	CProp	trap_type s2
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae1209b
+	Serial	0x6ae12330
 	ObjType	0xeed
 	Graphic	0xeed
-	X	47
-	Y	30
+	X	74
+	Y	120
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	26
-	Container	0x6ae1208b
-	DecayAt	25191006
+	Amount	17
+	Container	0x6ae12325
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120ac
-	ObjType	0xf30
-	Graphic	0xf30
-	X	42
-	Y	63
+	Serial	0x6ae1234f
+	ObjType	0xf18
+	Graphic	0xf18
+	X	132
+	Y	76
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae1208b
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae12325
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120bb
-	ObjType	0xdce6
-	Graphic	0xf06
-	X	52
-	Y	67
-	Z	0
-	Revision	1
-	Realm	britannia
-	Container	0x6ae1208b
-	DecayAt	25191006
-}
-
-Item
-{
-	Serial	0x6ae120d2
-	ObjType	0xdc01
-	Graphic	0xf0c
-	X	55
-	Y	59
-	Z	0
-	Revision	1
-	Realm	britannia
-	Container	0x6ae1208b
-	DecayAt	25191006
-}
-
-Item
-{
-	Serial	0x6ae120e5
-	ObjType	0xe77
-	Graphic	0xe77
-	X	5149
-	Y	618
+	Serial	0x6ae1236f
+	ObjType	0xe42
+	Graphic	0xe42
+	X	5141
+	Y	615
 	Z	-50
 	Revision	1
 	Realm	britannia
 	CProp	LockPickDiff i6
+	CProp	furniture i1
 	CProp	level i1
 	CProp	link i1248056208
-	CProp	lockid i1234
+	CProp	lockid i1245
 	CProp	trap_strength i20
-	CProp	trap_type s2
+	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae12107
+	Serial	0x6ae1238e
 	ObjType	0xeed
 	Graphic	0xeed
-	X	58
-	Y	75
+	X	104
+	Y	136
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	22
-	Container	0x6ae120e5
-	DecayAt	25191006
+	Amount	32
+	Container	0x6ae1236f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1210d
-	ObjType	0xf18
-	Graphic	0xf18
-	X	42
-	Y	62
+	Serial	0x6ae12393
+	ObjType	0xdc08
+	Graphic	0xf0d
+	X	97
+	Y	101
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae120e5
-	DecayAt	25191006
+	Container	0x6ae1236f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12118
-	ObjType	0xf11
-	Graphic	0xf11
-	X	42
-	Y	71
+	Serial	0x6ae123a4
+	ObjType	0xdc0c
+	Graphic	0xf08
+	X	98
+	Y	70
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae120e5
-	DecayAt	25191006
+	Container	0x6ae1236f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12128
-	ObjType	0xe40
-	Graphic	0xe40
-	X	5144
-	Y	617
-	Z	-50
+	Serial	0x6ae123b3
+	ObjType	0xe42
+	Graphic	0xe42
+	X	5147
+	Y	616
+	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i1
+	CProp	LockPickDiff i5
+	CProp	furniture i1
 	CProp	level i1
 	CProp	link i1248056208
-	CProp	lockid i1236
+	CProp	lockid i1248
 	CProp	trap_strength i20
-	CProp	trap_type s2
+	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae12146
+	Serial	0x6ae123d2
 	ObjType	0xeed
 	Graphic	0xeed
-	X	62
-	Y	115
+	X	134
+	Y	123
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	26
-	Container	0x6ae12128
-	DecayAt	25191006
+	Amount	45
+	Container	0x6ae123b3
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1214c
-	ObjType	0xf25
-	Graphic	0xf25
-	X	142
-	Y	95
+	Serial	0x6ae123d7
+	ObjType	0xf13
+	Graphic	0xf13
+	X	140
+	Y	90
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12128
-	DecayAt	25191006
+	Container	0x6ae123b3
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12159
-	ObjType	0xdc14
-	Graphic	0xf07
-	X	115
-	Y	125
+	Serial	0x6ae123e0
+	ObjType	0xdc01
+	Graphic	0xf0c
+	X	101
+	Y	103
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12128
-	DecayAt	25191006
+	Container	0x6ae123b3
+	DecayAt	25191073
 }
 
 Item
@@ -197436,191 +198023,175 @@
 
 Item
 {
-	Serial	0x6ae1208c
-	ObjType	0xe43
-	Graphic	0xe43
-	X	5151
-	Y	744
+	Serial	0x6ae12320
+	ObjType	0xe40
+	Graphic	0xe40
+	X	5150
+	Y	743
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i57
-	CProp	furniture i1
+	CProp	LockPickDiff i42
 	CProp	level i3
 	CProp	link i1248080879
-	CProp	lockid i1231
+	CProp	lockid i1243
 	CProp	trap_strength i60
-	CProp	trap_type s3
+	CProp	trap_type s2
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae120a1
+	Serial	0x6ae1232f
 	ObjType	0xeed
 	Graphic	0xeed
-	X	112
-	Y	134
+	X	61
+	Y	72
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	104
-	Container	0x6ae1208c
-	DecayAt	25191006
+	Amount	103
+	Container	0x6ae12320
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120c0
-	ObjType	0xf11
-	Graphic	0xf11
-	X	59
-	Y	114
+	Serial	0x6ae12341
+	ObjType	0xf16
+	Graphic	0xf16
+	X	63
+	Y	137
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae1208c
-	DecayAt	25191006
+	Container	0x6ae12320
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120cf
-	ObjType	0xf25
-	Graphic	0xf25
-	X	84
-	Y	99
+	Serial	0x6ae1234b
+	ObjType	0xf13
+	Graphic	0xf13
+	X	85
+	Y	83
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae1208c
-	DecayAt	25191006
+	Container	0x6ae12320
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120d7
+	Serial	0x6ae12359
 	ObjType	0xf10
 	Graphic	0xf10
-	X	49
-	Y	67
+	X	84
+	Y	107
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae1208c
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae12320
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120e1
-	ObjType	0xdc08
-	Graphic	0xf0d
-	X	49
-	Y	97
+	Serial	0x6ae1236b
+	ObjType	0xdc0e
+	Graphic	0xf0b
+	X	80
+	Y	135
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae1208c
-	DecayAt	25191006
+	Container	0x6ae12320
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12101
-	ObjType	0xe40
-	Graphic	0xe40
+	Serial	0x6ae12387
+	ObjType	0xe42
+	Graphic	0xe42
 	X	5152
 	Y	744
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i48
+	CProp	LockPickDiff i54
+	CProp	furniture i1
 	CProp	level i3
 	CProp	link i1248080879
-	CProp	lockid i1235
+	CProp	lockid i1246
 	CProp	trap_strength i60
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae1212e
+	Serial	0x6ae123a2
 	ObjType	0xeed
 	Graphic	0xeed
-	X	73
-	Y	102
+	X	111
+	Y	75
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	79
-	Container	0x6ae12101
-	DecayAt	25191006
+	Amount	108
+	Container	0x6ae12387
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12139
-	ObjType	0xf10
-	Graphic	0xf10
-	X	100
-	Y	116
+	Serial	0x6ae123a8
+	ObjType	0xf15
+	Graphic	0xf15
+	X	51
+	Y	139
 	Z	0
-	Revision	2
+	Revision	4
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12101
-	DecayAt	25191006
+	Amount	4
+	Container	0x6ae12387
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1213d
-	ObjType	0xf11
-	Graphic	0xf11
-	X	138
-	Y	99
+	Serial	0x6ae123ae
+	ObjType	0xf25
+	Graphic	0xf25
+	X	71
+	Y	109
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12101
-	DecayAt	25191006
+	Container	0x6ae12387
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1213e
-	ObjType	0xf15
-	Graphic	0xf15
-	X	135
-	Y	114
+	Serial	0x6ae123c9
+	ObjType	0xdc0c
+	Graphic	0xf08
+	X	101
+	Y	122
 	Z	0
-	Revision	2
-	Realm	britannia
-	Amount	2
-	Container	0x6ae12101
-	DecayAt	25191006
-}
-
-Item
-{
-	Serial	0x6ae12140
-	ObjType	0xdc11
-	Graphic	0xf09
-	X	57
-	Y	80
-	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12101
-	DecayAt	25191006
+	Container	0x6ae12387
+	DecayAt	25191073
 }
 
 Item
@@ -207212,15 +207783,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb730f
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5157
 	Y	3965
 	Z	55
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711794
@@ -207233,15 +207804,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb7312
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5157
 	Y	4009
 	Z	41
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711840
@@ -207288,15 +207859,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb7315
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5157
 	Y	4067
 	Z	42
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711871
@@ -207421,14 +207992,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x48538677
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5215
 	Y	117
 	Z	1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a3:i901494i901512i901499
@@ -207442,14 +208014,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4853baa9
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5202
 	Y	90
 	Z	5
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a1:i901586
@@ -207546,14 +208119,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x48537913
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5246
 	Y	182
 	Z	15
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a1:i901449
@@ -207567,14 +208141,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x485379fa
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5237
 	Y	143
 	Z	15
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a1:i901480
@@ -212225,15 +212800,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb7310
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5215
 	Y	3951
 	Z	41
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711773
@@ -212677,14 +213252,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x658f747f
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5190
 	Y	3988
 	Z	37
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a3:i1671119i1671118i1671120
@@ -212733,7 +213309,7 @@
 	X	5215
 	Y	4009
 	Z	38
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712248
@@ -212746,15 +213322,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb7316
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5215
 	Y	4067
 	Z	41
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711878
@@ -212767,14 +213343,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4852ea22
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5311
 	Y	35
 	Z	40
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a1:i901318
@@ -212822,7 +213399,7 @@
 	X	5300
 	Y	94
 	Z	15
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a1:i901223
@@ -212897,7 +213474,7 @@
 	X	5264
 	Y	130
 	Z	20
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a1:i901381
@@ -213770,400 +214347,458 @@
 
 Item
 {
-	Serial	0x6ae1208d
-	ObjType	0xe42
-	Graphic	0xe42
-	X	5268
-	Y	692
+	Serial	0x6ae1232b
+	ObjType	0xe77
+	Graphic	0xe77
+	X	5265
+	Y	690
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i42
-	CProp	furniture i1
+	CProp	LockPickDiff i49
 	CProp	level i3
 	CProp	link i1102278426
-	CProp	lockid i1231
+	CProp	lockid i1243
 	CProp	trap_strength i60
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae120a2
+	Serial	0x6ae1233d
 	ObjType	0xeed
 	Graphic	0xeed
-	X	70
-	Y	103
+	X	55
+	Y	65
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	90
-	Container	0x6ae1208d
-	DecayAt	25191006
+	Amount	62
+	Container	0x6ae1232b
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120ca
+	Serial	0x6ae12346
+	ObjType	0xf18
+	Graphic	0xf18
+	X	40
+	Y	48
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1232b
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1234d
+	ObjType	0xf0f
+	Graphic	0xf0f
+	X	48
+	Y	35
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	2
+	Container	0x6ae1232b
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1235e
+	ObjType	0xf13
+	Graphic	0xf13
+	X	41
+	Y	60
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	2
+	Container	0x6ae1232b
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12385
 	ObjType	0xe77
 	Graphic	0xe77
-	X	5268
-	Y	691
+	X	5269
+	Y	693
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i52
+	CProp	LockPickDiff i55
 	CProp	level i3
 	CProp	link i1102278426
-	CProp	lockid i1233
+	CProp	lockid i1246
 	CProp	trap_strength i60
-	CProp	trap_type s3
+	CProp	trap_type s2
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae120e9
+	Serial	0x6ae1239d
 	ObjType	0xeed
 	Graphic	0xeed
-	X	59
-	Y	23
+	X	42
+	Y	72
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	138
-	Container	0x6ae120ca
-	DecayAt	25191006
+	Amount	120
+	Container	0x6ae12385
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120f1
-	ObjType	0xdc01
-	Graphic	0xf0c
-	X	55
-	Y	27
+	Serial	0x6ae123ac
+	ObjType	0xdc04
+	Graphic	0xf0a
+	X	57
+	Y	72
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae120ca
-	DecayAt	25191006
+	Container	0x6ae12385
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120fa
-	ObjType	0xf15
-	Graphic	0xf15
-	X	57
-	Y	77
+	Serial	0x6ae123bc
+	ObjType	0xf30
+	Graphic	0xf30
+	X	49
+	Y	75
 	Z	0
 	Revision	2
 	Realm	britannia
 	Amount	2
-	Container	0x6ae120ca
-	DecayAt	25191006
+	Container	0x6ae12385
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120fe
-	ObjType	0xf11
-	Graphic	0xf11
-	X	45
-	Y	28
+	Serial	0x6ae123c2
+	ObjType	0xf10
+	Graphic	0xf10
+	X	54
+	Y	60
 	Z	0
-	Revision	2
-	Realm	britannia
-	Amount	2
-	Container	0x6ae120ca
-	DecayAt	25191006
-}
-
-Item
-{
-	Serial	0x6ae1210c
-	ObjType	0xf30
-	Graphic	0xf30
-	X	59
-	Y	56
-	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae120ca
-	DecayAt	25191006
+	Container	0x6ae12385
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12112
-	ObjType	0xdc04
-	Graphic	0xf0a
-	X	46
-	Y	52
+	Serial	0x6ae123c6
+	ObjType	0xf13
+	Graphic	0xf13
+	X	51
+	Y	59
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae120ca
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae12385
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12127
-	ObjType	0xe43
-	Graphic	0xe43
+	Serial	0x6ae123ea
+	ObjType	0xe40
+	Graphic	0xe40
 	X	5269
 	Y	690
 	Z	0
 	Revision	1
 	Realm	britannia
 	CProp	LockPickDiff i56
-	CProp	furniture i1
 	CProp	level i3
 	CProp	link i1102278426
-	CProp	lockid i1236
+	CProp	lockid i1250
 	CProp	trap_strength i60
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae1214a
+	Serial	0x6ae12409
 	ObjType	0xeed
 	Graphic	0xeed
-	X	48
-	Y	83
+	X	128
+	Y	138
 	Z	0
 	Revision	2
 	Realm	britannia
 	Amount	104
-	Container	0x6ae12127
-	DecayAt	25191006
+	Container	0x6ae123ea
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1214e
-	ObjType	0xf30
-	Graphic	0xf30
-	X	95
-	Y	112
+	Serial	0x6ae1240f
+	ObjType	0x1f5c
+	Graphic	0x1f5c
+	X	68
+	Y	98
 	Z	0
 	Revision	3
 	Realm	britannia
 	Amount	3
-	Container	0x6ae12127
-	DecayAt	25191006
+	Container	0x6ae123ea
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12153
-	ObjType	0xf0f
-	Graphic	0xf0f
-	X	140
-	Y	129
+	Serial	0x6ae12416
+	ObjType	0xdc14
+	Graphic	0xf07
+	X	57
+	Y	101
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12127
-	DecayAt	25191006
+	Container	0x6ae123ea
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1215e
-	ObjType	0xdc01
-	Graphic	0xf0c
-	X	115
-	Y	70
+	Serial	0x6ae1241d
+	ObjType	0xe42
+	Graphic	0xe42
+	X	5269
+	Y	692
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12127
-	DecayAt	25191006
+	CProp	LockPickDiff i59
+	CProp	furniture i1
+	CProp	level i3
+	CProp	link i1102278426
+	CProp	lockid i1251
+	CProp	trap_strength i60
+	CProp	trap_type s2
+	OnUseScript	:tinkering:tinkerTraps
+	DecayAt	25191073
+	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae12168
-	ObjType	0xf25
-	Graphic	0xf25
-	X	99
-	Y	95
+	Serial	0x6ae12422
+	ObjType	0xeed
+	Graphic	0xeed
+	X	82
+	Y	116
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12127
-	DecayAt	25191006
+	Amount	128
+	Container	0x6ae1241d
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1216a
-	ObjType	0xf13
-	Graphic	0xf13
-	X	59
-	Y	133
+	Serial	0x6ae12428
+	ObjType	0xf30
+	Graphic	0xf30
+	X	99
+	Y	91
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12127
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae1241d
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1216f
-	ObjType	0xf18
-	Graphic	0xf18
+	Serial	0x6ae1242a
+	ObjType	0xf15
+	Graphic	0xf15
 	X	76
-	Y	99
+	Y	72
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12127
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae1241d
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1218d
-	ObjType	0xe42
-	Graphic	0xe42
-	X	5265
-	Y	692
+	Serial	0x6ae1242c
+	ObjType	0xf0f
+	Graphic	0xf0f
+	X	72
+	Y	74
 	Z	0
+	Revision	4
+	Realm	britannia
+	Amount	4
+	Container	0x6ae1241d
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12430
+	ObjType	0xdc04
+	Graphic	0xf0a
+	X	102
+	Y	114
+	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i49
-	CProp	furniture i1
-	CProp	level i3
-	CProp	link i1102278426
-	CProp	lockid i1240
-	CProp	trap_strength i60
-	CProp	trap_type s3
-	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
-	Locked	1
+	Container	0x6ae1241d
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12199
-	ObjType	0xeed
-	Graphic	0xeed
-	X	75
-	Y	85
+	Serial	0x6ae12432
+	ObjType	0x1f50
+	Graphic	0x1f50
+	X	52
+	Y	88
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	101
-	Container	0x6ae1218d
-	DecayAt	25191006
+	Container	0x6ae1241d
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1219f
-	ObjType	0xf30
-	Graphic	0xf30
-	X	54
-	Y	105
+	Serial	0x6ae12434
+	ObjType	0x1f53
+	Graphic	0x1f53
+	X	86
+	Y	103
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae1218d
-	DecayAt	25191006
+	Container	0x6ae1241d
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121a3
-	ObjType	0xf15
-	Graphic	0xf15
-	X	84
-	Y	97
+	Serial	0x6ae12437
+	ObjType	0x1f54
+	Graphic	0x1f54
+	X	141
+	Y	72
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae1218d
-	DecayAt	25191006
+	Container	0x6ae1241d
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121a6
+	Serial	0x6ae1243c
 	ObjType	0xf18
 	Graphic	0xf18
-	X	130
-	Y	91
+	X	45
+	Y	107
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae1218d
-	DecayAt	25191006
+	Container	0x6ae1241d
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121ad
-	ObjType	0xe77
-	Graphic	0xe77
-	X	5269
-	Y	692
+	Serial	0x6ae1243e
+	ObjType	0xf16
+	Graphic	0xf16
+	X	110
+	Y	99
 	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	2
+	Container	0x6ae1241d
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1245a
+	ObjType	0xe40
+	Graphic	0xe40
+	X	5266
+	Y	690
+	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i49
+	CProp	LockPickDiff i54
 	CProp	level i3
 	CProp	link i1102278426
-	CProp	lockid i1242
+	CProp	lockid i1254
 	CProp	trap_strength i60
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191007
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae121c2
+	Serial	0x6ae12466
 	ObjType	0xeed
 	Graphic	0xeed
-	X	42
-	Y	31
+	X	99
+	Y	79
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	84
-	Container	0x6ae121ad
-	DecayAt	25191007
+	Amount	109
+	Container	0x6ae1245a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121c5
-	ObjType	0xdc11
-	Graphic	0xf09
-	X	46
-	Y	51
+	Serial	0x6ae12469
+	ObjType	0xdc0e
+	Graphic	0xf0b
+	X	106
+	Y	138
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae121ad
-	DecayAt	25191007
+	Container	0x6ae1245a
+	DecayAt	25191073
 }
 
 Item
@@ -214398,15 +215033,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb7311
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5273
 	Y	3951
 	Z	38
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711801
@@ -214593,14 +215228,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x658e3f57
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5285
 	Y	3980
 	Z	37
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a3:i1671114i1671112i1671113
@@ -214628,14 +215264,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x658e3ff2
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5295
 	Y	3977
 	Z	37
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a3:i1671115i1671117i1671116
@@ -215016,14 +215653,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x65b1e9b9
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5296
 	Y	4005
 	Z	40
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a2:i1674539i1674538
@@ -215045,7 +215683,7 @@
 	X	5273
 	Y	4009
 	Z	41
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712443
@@ -215058,15 +215696,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb7317
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5278
 	Y	4064
 	Z	38
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711865
@@ -215192,7 +215830,7 @@
 	X	5343
 	Y	56
 	Z	15
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a1:i901371
@@ -215206,14 +215844,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4852eee7
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5349
 	Y	51
 	Z	15
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a1:i901372
@@ -215227,14 +215866,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4852f985
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5354
 	Y	56
 	Z	15
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a1:i901374
@@ -215319,353 +215959,364 @@
 
 Item
 {
-	Serial	0x6ae1208e
-	ObjType	0xe43
-	Graphic	0xe43
-	X	5322
-	Y	569
+	Serial	0x6ae1232a
+	ObjType	0xe77
+	Graphic	0xe77
+	X	5323
+	Y	570
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i39
-	CProp	furniture i1
+	CProp	LockPickDiff i26
 	CProp	level i2
 	CProp	link i1248056249
-	CProp	lockid i1231
+	CProp	lockid i1243
 	CProp	trap_strength i40
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae120a3
+	Serial	0x6ae1233c
 	ObjType	0xeed
 	Graphic	0xeed
-	X	133
-	Y	108
+	X	48
+	Y	44
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	82
-	Container	0x6ae1208e
-	DecayAt	25191006
+	Amount	36
+	Container	0x6ae1232a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120b0
-	ObjType	0xf10
-	Graphic	0xf10
-	X	76
-	Y	89
+	Serial	0x6ae12352
+	ObjType	0xf13
+	Graphic	0xf13
+	X	53
+	Y	30
 	Z	0
-	Revision	3
+	Revision	1
 	Realm	britannia
-	Amount	3
-	Container	0x6ae1208e
-	DecayAt	25191006
+	Container	0x6ae1232a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120bd
-	ObjType	0xf30
-	Graphic	0xf30
-	X	49
-	Y	121
+	Serial	0x6ae1235d
+	ObjType	0xf11
+	Graphic	0xf11
+	X	43
+	Y	76
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae1208e
-	DecayAt	25191006
+	Container	0x6ae1232a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120dc
+	Serial	0x6ae12367
 	ObjType	0xf25
 	Graphic	0xf25
-	X	96
-	Y	116
+	X	47
+	Y	41
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae1208e
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae1232a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120e3
-	ObjType	0xf0f
-	Graphic	0xf0f
-	X	101
-	Y	98
+	Serial	0x6ae12377
+	ObjType	0xdc0e
+	Graphic	0xf0b
+	X	45
+	Y	51
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae1208e
-	DecayAt	25191006
+	Container	0x6ae1232a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120ed
-	ObjType	0xf15
-	Graphic	0xf15
-	X	67
-	Y	65
-	Z	0
-	Revision	2
-	Realm	britannia
-	Amount	2
-	Container	0x6ae1208e
-	DecayAt	25191006
-}
-
-Item
-{
-	Serial	0x6ae12102
+	Serial	0x6ae12398
 	ObjType	0xe40
 	Graphic	0xe40
-	X	5323
-	Y	572
+	X	5325
+	Y	571
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i35
+	CProp	LockPickDiff i26
 	CProp	level i2
 	CProp	link i1248056249
-	CProp	lockid i1235
+	CProp	lockid i1247
 	CProp	trap_strength i40
-	CProp	trap_type s2
+	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae1212b
+	Serial	0x6ae123b9
 	ObjType	0xeed
 	Graphic	0xeed
-	X	62
-	Y	121
+	X	95
+	Y	79
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	32
-	Container	0x6ae12102
-	DecayAt	25191006
+	Amount	74
+	Container	0x6ae12398
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12136
-	ObjType	0xdc0c
-	Graphic	0xf08
-	X	97
-	Y	107
+	Serial	0x6ae123c1
+	ObjType	0xdc11
+	Graphic	0xf09
+	X	118
+	Y	118
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12102
-	DecayAt	25191006
+	Container	0x6ae12398
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12143
-	ObjType	0xe40
-	Graphic	0xe40
-	X	5325
-	Y	572
+	Serial	0x6ae123c8
+	ObjType	0xf18
+	Graphic	0xf18
+	X	98
+	Y	99
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i25
-	CProp	level i2
-	CProp	link i1248056249
-	CProp	lockid i1237
-	CProp	trap_strength i40
-	CProp	trap_type s2
-	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
-	Locked	1
+	Container	0x6ae12398
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12165
-	ObjType	0xeed
-	Graphic	0xeed
-	X	76
-	Y	87
-	Z	0
-	Revision	2
-	Realm	britannia
-	Amount	46
-	Container	0x6ae12143
-	DecayAt	25191006
-}
-
-Item
-{
-	Serial	0x6ae12167
+	Serial	0x6ae123ce
 	ObjType	0xf16
 	Graphic	0xf16
-	X	95
-	Y	95
+	X	82
+	Y	83
 	Z	0
-	Revision	3
+	Revision	1
 	Realm	britannia
-	Amount	3
-	Container	0x6ae12143
-	DecayAt	25191006
+	Container	0x6ae12398
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1216c
-	ObjType	0xf15
-	Graphic	0xf15
-	X	88
-	Y	107
+	Serial	0x6ae123d5
+	ObjType	0xf10
+	Graphic	0xf10
+	X	96
+	Y	129
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12143
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae12398
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12175
-	ObjType	0xdce6
-	Graphic	0xf06
-	X	94
-	Y	138
+	Serial	0x6ae123e4
+	ObjType	0xdc01
+	Graphic	0xf0c
+	X	138
+	Y	78
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12143
-	DecayAt	25191006
+	Container	0x6ae12398
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1218e
-	ObjType	0xe77
-	Graphic	0xe77
-	X	5322
-	Y	571
+	Serial	0x6ae123eb
+	ObjType	0xe40
+	Graphic	0xe40
+	X	5324
+	Y	572
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i27
+	CProp	LockPickDiff i26
 	CProp	level i2
 	CProp	link i1248056249
-	CProp	lockid i1240
+	CProp	lockid i1250
 	CProp	trap_strength i40
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae1219a
+	Serial	0x6ae1240a
 	ObjType	0xeed
 	Graphic	0xeed
-	X	45
-	Y	66
+	X	106
+	Y	122
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	51
-	Container	0x6ae1218e
-	DecayAt	25191006
+	Amount	80
+	Container	0x6ae123eb
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1219e
-	ObjType	0xdc01
-	Graphic	0xf0c
-	X	53
-	Y	73
+	Serial	0x6ae1240d
+	ObjType	0xf11
+	Graphic	0xf11
+	X	93
+	Y	95
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae1218e
-	DecayAt	25191006
+	Container	0x6ae123eb
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121a1
-	ObjType	0xf25
-	Graphic	0xf25
-	X	54
-	Y	28
+	Serial	0x6ae12412
+	ObjType	0xf0f
+	Graphic	0xf0f
+	X	108
+	Y	124
 	Z	0
-	Revision	2
+	Revision	3
 	Realm	britannia
-	Amount	2
-	Container	0x6ae1218e
-	DecayAt	25191006
+	Amount	3
+	Container	0x6ae123eb
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121a5
-	ObjType	0xf16
-	Graphic	0xf16
-	X	49
-	Y	49
+	Serial	0x6ae12414
+	ObjType	0xdc14
+	Graphic	0xf07
+	X	110
+	Y	120
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae1218e
-	DecayAt	25191006
+	Container	0x6ae123eb
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121a7
-	ObjType	0xf13
-	Graphic	0xf13
-	X	45
-	Y	75
+	Serial	0x6ae12417
+	ObjType	0xf30
+	Graphic	0xf30
+	X	95
+	Y	105
 	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae123eb
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12418
+	ObjType	0xf18
+	Graphic	0xf18
+	X	104
+	Y	88
+	Z	0
 	Revision	2
 	Realm	britannia
 	Amount	2
-	Container	0x6ae1218e
-	DecayAt	25191006
+	Container	0x6ae123eb
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121a9
-	ObjType	0xdc14
-	Graphic	0xf07
-	X	57
-	Y	47
+	Serial	0x6ae12419
+	ObjType	0xf10
+	Graphic	0xf10
+	X	72
+	Y	139
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae1218e
-	DecayAt	25191006
+	Container	0x6ae123eb
+	DecayAt	25191073
 }
 
 Item
 {
+	Serial	0x6ae1241e
+	ObjType	0xe77
+	Graphic	0xe77
+	X	5321
+	Y	570
+	Z	0
+	Revision	1
+	Realm	britannia
+	CProp	LockPickDiff i22
+	CProp	level i2
+	CProp	link i1248056249
+	CProp	lockid i1251
+	CProp	trap_strength i40
+	CProp	trap_type s3
+	OnUseScript	:tinkering:tinkerTraps
+	DecayAt	25191073
+	Locked	1
+}
+
+Item
+{
+	Serial	0x6ae12424
+	ObjType	0xeed
+	Graphic	0xeed
+	X	48
+	Y	54
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	59
+	Container	0x6ae1241e
+	DecayAt	25191073
+}
+
+Item
+{
 	Serial	0x401910ac
 	ObjType	0x6c5
 	Graphic	0x6c5
@@ -218111,123 +218762,209 @@
 
 Item
 {
-	Serial	0x6ae1208f
-	ObjType	0xe77
-	Graphic	0xe77
+	Serial	0x6ae12321
+	ObjType	0xe40
+	Graphic	0xe40
 	X	5423
 	Y	1854
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i38
+	CProp	LockPickDiff i39
 	CProp	level i2
 	CProp	link i1113426334
-	CProp	lockid i1231
+	CProp	lockid i1243
 	CProp	trap_strength i40
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae120a4
+	Serial	0x6ae12335
 	ObjType	0xeed
 	Graphic	0xeed
-	X	48
-	Y	21
+	X	135
+	Y	85
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	36
-	Container	0x6ae1208f
-	DecayAt	25191006
+	Amount	79
+	Container	0x6ae12321
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120b3
-	ObjType	0xdce6
-	Graphic	0xf06
-	X	51
-	Y	70
+	Serial	0x6ae12343
+	ObjType	0xf15
+	Graphic	0xf15
+	X	57
+	Y	119
 	Z	0
-	Revision	1
+	Revision	3
 	Realm	britannia
-	Container	0x6ae1208f
-	DecayAt	25191006
+	Amount	3
+	Container	0x6ae12321
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120c6
-	ObjType	0xf13
-	Graphic	0xf13
-	X	47
-	Y	35
+	Serial	0x6ae12354
+	ObjType	0xf25
+	Graphic	0xf25
+	X	49
+	Y	121
 	Z	0
-	Revision	3
+	Revision	5
 	Realm	britannia
-	Amount	3
-	Container	0x6ae1208f
-	DecayAt	25191006
+	Amount	5
+	Container	0x6ae12321
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120da
-	ObjType	0xf30
-	Graphic	0xf30
-	X	59
-	Y	26
+	Serial	0x6ae1236c
+	ObjType	0xdc11
+	Graphic	0xf09
+	X	113
+	Y	89
 	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae12321
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1237a
+	ObjType	0xf0f
+	Graphic	0xf0f
+	X	112
+	Y	80
+	Z	0
 	Revision	2
 	Realm	britannia
 	Amount	2
-	Container	0x6ae1208f
-	DecayAt	25191006
+	Container	0x6ae12321
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12123
-	ObjType	0xe42
-	Graphic	0xe42
+	Serial	0x6ae12396
+	ObjType	0xdc11
+	Graphic	0xf09
+	X	78
+	Y	125
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae12321
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123b1
+	ObjType	0xe77
+	Graphic	0xe77
 	X	5422
 	Y	1854
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i27
-	CProp	furniture i1
+	CProp	LockPickDiff i35
 	CProp	level i2
 	CProp	link i1113426334
-	CProp	lockid i1236
+	CProp	lockid i1248
 	CProp	trap_strength i40
-	CProp	trap_type s3
+	CProp	trap_type s2
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae12148
+	Serial	0x6ae123d0
 	ObjType	0xeed
 	Graphic	0xeed
-	X	115
-	Y	72
+	X	48
+	Y	26
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	55
-	Container	0x6ae12123
-	DecayAt	25191006
+	Amount	65
+	Container	0x6ae123b1
+	DecayAt	25191073
 }
 
 Item
 {
+	Serial	0x6ae123da
+	ObjType	0xdc01
+	Graphic	0xf0c
+	X	50
+	Y	62
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae123b1
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123e7
+	ObjType	0xf15
+	Graphic	0xf15
+	X	52
+	Y	23
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	2
+	Container	0x6ae123b1
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123ed
+	ObjType	0xf30
+	Graphic	0xf30
+	X	58
+	Y	76
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae123b1
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123f4
+	ObjType	0xf18
+	Graphic	0xf18
+	X	57
+	Y	79
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	2
+	Container	0x6ae123b1
+	DecayAt	25191073
+}
+
+Item
+{
 	Serial	0x425d89cb
 	ObjType	0x888b
 	Graphic	0x1
@@ -218246,139 +218983,193 @@
 
 Item
 {
-	Serial	0x6ae12090
-	ObjType	0xe43
-	Graphic	0xe43
-	X	5428
-	Y	1907
+	Serial	0x6ae1233f
+	ObjType	0xe40
+	Graphic	0xe40
+	X	5427
+	Y	1905
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i23
-	CProp	furniture i1
+	CProp	LockPickDiff i22
 	CProp	level i2
 	CProp	link i1113426379
-	CProp	lockid i1231
+	CProp	lockid i1244
 	CProp	trap_strength i40
-	CProp	trap_type s2
+	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae1209c
+	Serial	0x6ae1234e
 	ObjType	0xeed
 	Graphic	0xeed
-	X	54
-	Y	88
+	X	76
+	Y	96
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	31
-	Container	0x6ae12090
-	DecayAt	25191006
+	Amount	9
+	Container	0x6ae1233f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120ae
-	ObjType	0xf25
-	Graphic	0xf25
-	X	57
-	Y	104
+	Serial	0x6ae1235b
+	ObjType	0xf15
+	Graphic	0xf15
+	X	132
+	Y	97
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12090
-	DecayAt	25191006
+	Container	0x6ae1233f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120bc
+	Serial	0x6ae12366
 	ObjType	0xf18
 	Graphic	0xf18
-	X	54
-	Y	127
+	X	53
+	Y	113
 	Z	0
-	Revision	4
+	Revision	2
 	Realm	britannia
-	Amount	4
-	Container	0x6ae12090
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae1233f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120cd
-	ObjType	0xf30
-	Graphic	0xf30
-	X	118
-	Y	91
+	Serial	0x6ae12374
+	ObjType	0xf11
+	Graphic	0xf11
+	X	51
+	Y	69
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12090
-	DecayAt	25191006
+	Container	0x6ae1233f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120e0
-	ObjType	0xf0f
-	Graphic	0xf0f
-	X	44
-	Y	118
+	Serial	0x6ae1237c
+	ObjType	0xdc11
+	Graphic	0xf09
+	X	81
+	Y	101
 	Z	0
-	Revision	3
+	Revision	1
 	Realm	britannia
-	Amount	3
-	Container	0x6ae12090
-	DecayAt	25191006
+	Container	0x6ae1233f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12124
+	Serial	0x6ae12388
+	ObjType	0xf25
+	Graphic	0xf25
+	X	52
+	Y	99
+	Z	0
+	Revision	4
+	Realm	britannia
+	Amount	4
+	Container	0x6ae1233f
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12391
+	ObjType	0xf16
+	Graphic	0xf16
+	X	114
+	Y	120
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	2
+	Container	0x6ae1233f
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123ca
 	ObjType	0xe40
 	Graphic	0xe40
-	X	5427
-	Y	1907
+	X	5426
+	Y	1906
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i21
+	CProp	LockPickDiff i39
 	CProp	level i2
 	CProp	link i1113426379
-	CProp	lockid i1236
+	CProp	lockid i1249
 	CProp	trap_strength i40
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae12149
+	Serial	0x6ae123ef
 	ObjType	0xeed
 	Graphic	0xeed
-	X	99
-	Y	73
+	X	89
+	Y	71
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	46
-	Container	0x6ae12124
-	DecayAt	25191006
+	Amount	75
+	Container	0x6ae123ca
+	DecayAt	25191073
 }
 
 Item
 {
+	Serial	0x6ae123f8
+	ObjType	0xdc08
+	Graphic	0xf0d
+	X	130
+	Y	129
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae123ca
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12401
+	ObjType	0xdc04
+	Graphic	0xf0a
+	X	106
+	Y	126
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae123ca
+	DecayAt	25191073
+}
+
+Item
+{
 	Serial	0x41408a62
 	ObjType	0x6200
 	Graphic	0x1
@@ -219178,295 +219969,330 @@
 
 Item
 {
-	Serial	0x6ae12091
+	Serial	0x6ae12322
 	ObjType	0xe43
 	Graphic	0xe43
 	X	5465
-	Y	1796
+	Y	1798
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i61
+	CProp	LockPickDiff i78
 	CProp	furniture i1
 	CProp	level i4
 	CProp	link i1113429224
-	CProp	lockid i1231
+	CProp	lockid i1243
 	CProp	trap_strength i80
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae120a5
+	Serial	0x6ae12336
 	ObjType	0xeed
 	Graphic	0xeed
-	X	52
-	Y	135
+	X	94
+	Y	132
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	136
-	Container	0x6ae12091
-	DecayAt	25191006
+	Amount	113
+	Container	0x6ae12322
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120b4
-	ObjType	0xdce6
-	Graphic	0xf06
-	X	136
-	Y	96
+	Serial	0x6ae12358
+	ObjType	0xf15
+	Graphic	0xf15
+	X	63
+	Y	80
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12091
-	DecayAt	25191006
+	Container	0x6ae12322
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120d1
+	Serial	0x6ae12362
+	ObjType	0xf0f
+	Graphic	0xf0f
+	X	101
+	Y	105
+	Z	0
+	Revision	3
+	Realm	britannia
+	Amount	3
+	Container	0x6ae12322
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12372
+	ObjType	0xf18
+	Graphic	0xf18
+	X	82
+	Y	86
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	2
+	Container	0x6ae12322
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1237b
+	ObjType	0xf10
+	Graphic	0xf10
+	X	60
+	Y	71
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae12322
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1238b
 	ObjType	0xdc0e
 	Graphic	0xf0b
-	X	72
-	Y	68
+	X	71
+	Y	73
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12091
-	DecayAt	25191006
+	Container	0x6ae12322
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120e6
-	ObjType	0xe42
-	Graphic	0xe42
-	X	5466
-	Y	1798
+	Serial	0x6ae1239a
+	ObjType	0xe40
+	Graphic	0xe40
+	X	5464
+	Y	1797
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i74
-	CProp	furniture i1
+	CProp	LockPickDiff i70
 	CProp	level i4
 	CProp	link i1113429224
-	CProp	lockid i1234
+	CProp	lockid i1247
 	CProp	trap_strength i80
-	CProp	trap_type s3
+	CProp	trap_type s2
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae12109
+	Serial	0x6ae123b8
 	ObjType	0xeed
 	Graphic	0xeed
-	X	57
-	Y	117
+	X	89
+	Y	92
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	110
-	Container	0x6ae120e6
-	DecayAt	25191006
+	Amount	137
+	Container	0x6ae1239a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1210f
-	ObjType	0xf10
-	Graphic	0xf10
-	X	117
-	Y	74
+	Serial	0x6ae123be
+	ObjType	0xf11
+	Graphic	0xf11
+	X	72
+	Y	100
 	Z	0
-	Revision	6
+	Revision	4
 	Realm	britannia
-	Amount	6
-	Container	0x6ae120e6
-	DecayAt	25191006
+	Amount	4
+	Container	0x6ae1239a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12119
+	Serial	0x6ae123cc
 	ObjType	0xf16
 	Graphic	0xf16
-	X	63
-	Y	87
+	X	66
+	Y	65
 	Z	0
 	Revision	2
 	Realm	britannia
 	Amount	2
-	Container	0x6ae120e6
-	DecayAt	25191006
+	Container	0x6ae1239a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1211d
-	ObjType	0xf25
-	Graphic	0xf25
-	X	121
-	Y	70
+	Serial	0x6ae123d6
+	ObjType	0xf30
+	Graphic	0xf30
+	X	64
+	Y	88
 	Z	0
-	Revision	4
+	Revision	5
 	Realm	britannia
-	Amount	4
-	Container	0x6ae120e6
-	DecayAt	25191006
+	Amount	5
+	Container	0x6ae1239a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12121
-	ObjType	0xdc0e
-	Graphic	0xf0b
-	X	133
-	Y	132
+	Serial	0x6ae123dd
+	ObjType	0xf15
+	Graphic	0xf15
+	X	80
+	Y	95
 	Z	0
-	Revision	1
+	Revision	3
 	Realm	britannia
-	Container	0x6ae120e6
-	DecayAt	25191006
+	Amount	3
+	Container	0x6ae1239a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1212a
-	ObjType	0x1f55
-	Graphic	0x1f55
-	X	73
-	Y	136
+	Serial	0x6ae123e6
+	ObjType	0xdc01
+	Graphic	0xf0c
+	X	66
+	Y	106
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae120e6
-	DecayAt	25191006
+	Container	0x6ae1239a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12131
-	ObjType	0x1f5d
-	Graphic	0x1f5d
-	X	130
-	Y	103
+	Serial	0x6ae123ec
+	ObjType	0x1f4c
+	Graphic	0x1f4c
+	X	95
+	Y	77
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae120e6
-	DecayAt	25191006
+	Container	0x6ae1239a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12137
-	ObjType	0x1f52
-	Graphic	0x1f52
-	X	119
-	Y	126
+	Serial	0x6ae123f3
+	ObjType	0x1f56
+	Graphic	0x1f56
+	X	46
+	Y	108
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae120e6
-	DecayAt	25191006
+	Container	0x6ae1239a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1213f
-	ObjType	0xf15
-	Graphic	0xf15
-	X	134
+	Serial	0x6ae123f9
+	ObjType	0x1f5c
+	Graphic	0x1f5c
+	X	140
 	Y	123
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae120e6
-	DecayAt	25191006
+	Container	0x6ae1239a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12142
-	ObjType	0xf11
-	Graphic	0xf11
-	X	113
-	Y	72
+	Name	a magic ring
+	Serial	0x6ae123fe
+	ObjType	0x108a
+	Graphic	0x108a
+	X	73
+	Y	73
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	2
-	Container	0x6ae120e6
-	DecayAt	25191006
+	CProp	charges i21
+	CProp	damagemod s of protection
+	CProp	type sprotection
+	Container	0x6ae1239a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12155
-	ObjType	0x1f47
-	Graphic	0x1f47
-	X	79
-	Y	107
+	Serial	0x6ae1240b
+	ObjType	0xf25
+	Graphic	0xf25
+	X	86
+	Y	81
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae120e6
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae1239a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12157
-	ObjType	0x1f58
-	Graphic	0x1f58
-	X	108
-	Y	99
+	Serial	0x6ae12410
+	ObjType	0xf13
+	Graphic	0xf13
+	X	113
+	Y	88
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae120e6
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae1239a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1215c
-	ObjType	0x1f45
-	Graphic	0x1f45
+	Name	magic female studded armor
+	Serial	0x6ae12415
+	ObjType	0x1c02
+	Graphic	0x1c02
 	X	94
-	Y	95
+	Y	138
 	Z	0
-	Revision	1
-	Realm	britannia
-	Container	0x6ae120e6
-	DecayAt	25191006
-}
-
-Item
-{
-	Name	a magic helmet
-	Serial	0x6ae12164
-	ObjType	0x140a
-	Graphic	0x140a
-	X	77
-	Y	66
-	Z	0
 	Revision	2
 	Realm	britannia
-	CProp	damagemod sof guarding
-	Container	0x6ae120e6
-	DecayAt	25191006
+	CProp	damagemod sof defense
+	Container	0x6ae1239a
+	DecayAt	25191073
 	Quality	1
-	HP	55
-	AR_mod	10
+	HP	109
+	AR_mod	5
 }
 
 Item
@@ -219698,347 +220524,354 @@
 
 Item
 {
-	Serial	0x6ae12092
-	ObjType	0xe40
-	Graphic	0xe40
+	Serial	0x6ae12323
+	ObjType	0xe42
+	Graphic	0xe42
 	X	5483
 	Y	1982
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i22
+	CProp	LockPickDiff i21
+	CProp	furniture i1
 	CProp	level i2
 	CProp	link i1113426689
-	CProp	lockid i1231
+	CProp	lockid i1243
 	CProp	trap_strength i40
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae120a6
+	Serial	0x6ae12337
 	ObjType	0xeed
 	Graphic	0xeed
-	X	126
-	Y	73
+	X	100
+	Y	96
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	73
-	Container	0x6ae12092
-	DecayAt	25191006
+	Amount	61
+	Container	0x6ae12323
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120ba
-	ObjType	0xf11
-	Graphic	0xf11
-	X	46
-	Y	70
+	Serial	0x6ae12351
+	ObjType	0xf18
+	Graphic	0xf18
+	X	123
+	Y	95
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12092
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae12323
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120c5
+	Serial	0x6ae12361
 	ObjType	0xf10
 	Graphic	0xf10
-	X	47
-	Y	132
+	X	125
+	Y	121
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12092
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae12323
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120d0
-	ObjType	0xf25
-	Graphic	0xf25
-	X	104
-	Y	120
+	Serial	0x6ae12371
+	ObjType	0xf30
+	Graphic	0xf30
+	X	106
+	Y	126
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12092
-	DecayAt	25191006
+	Container	0x6ae12323
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120d8
-	ObjType	0xdce6
-	Graphic	0xf06
-	X	57
-	Y	79
+	Serial	0x6ae12378
+	ObjType	0xdc0e
+	Graphic	0xf0b
+	X	87
+	Y	127
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12092
-	DecayAt	25191006
+	Container	0x6ae12323
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120e7
-	ObjType	0xe40
-	Graphic	0xe40
-	X	5481
-	Y	1983
+	Serial	0x425d8a83
+	ObjType	0x888b
+	Graphic	0x1
+	X	5474
+	Y	2035
 	Z	0
-	Revision	1
+	Revision	0
 	Realm	britannia
-	CProp	LockPickDiff i29
-	CProp	level i2
-	CProp	link i1113426689
-	CProp	lockid i1234
-	CProp	trap_strength i40
-	CProp	trap_type s3
-	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
-	Locked	1
+	CProp	amount i2
+	CProp	chestarray a2:i1768589083i1768601169
+	CProp	duration i1800
+	CProp	level i1
+	CProp	range i2
+	DecayAt	5398279
 }
 
 Item
 {
-	Serial	0x6ae1210a
-	ObjType	0xeed
-	Graphic	0xeed
-	X	79
-	Y	78
+	Serial	0x6ae12324
+	ObjType	0xe43
+	Graphic	0xe43
+	X	5475
+	Y	2035
 	Z	0
-	Revision	2
-	Realm	britannia
-	Amount	62
-	Container	0x6ae120e7
-	DecayAt	25191006
-}
-
-Item
-{
-	Serial	0x6ae12113
-	ObjType	0xf30
-	Graphic	0xf30
-	X	133
-	Y	132
-	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae120e7
-	DecayAt	25191006
+	CProp	LockPickDiff i2
+	CProp	furniture i1
+	CProp	level i1
+	CProp	link i1113426563
+	CProp	lockid i1243
+	CProp	trap_strength i20
+	CProp	trap_type s3
+	OnUseScript	:tinkering:tinkerTraps
+	DecayAt	25191073
+	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae12117
-	ObjType	0xf11
-	Graphic	0xf11
-	X	105
-	Y	101
+	Serial	0x6ae12338
+	ObjType	0xeed
+	Graphic	0xeed
+	X	46
+	Y	71
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	2
-	Container	0x6ae120e7
-	DecayAt	25191006
+	Amount	23
+	Container	0x6ae12324
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1211c
-	ObjType	0xf18
-	Graphic	0xf18
-	X	109
-	Y	126
-	Z	0
-	Revision	1
-	Realm	britannia
-	Container	0x6ae120e7
-	DecayAt	25191006
-}
-
-Item
-{
-	Serial	0x6ae1211e
+	Serial	0x6ae12347
 	ObjType	0xdc11
 	Graphic	0xf09
-	X	96
-	Y	103
+	X	98
+	Y	69
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae120e7
-	DecayAt	25191006
+	Container	0x6ae12324
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x425d8a83
-	ObjType	0x888b
-	Graphic	0x1
-	X	5474
-	Y	2035
+	Serial	0x6ae1235f
+	ObjType	0xdc01
+	Graphic	0xf0c
+	X	110
+	Y	118
 	Z	0
-	Revision	0
+	Revision	1
 	Realm	britannia
-	CProp	amount i2
-	CProp	chestarray a2:i1768589083i1768601169
-	CProp	duration i1800
-	CProp	level i1
-	CProp	range i2
-	DecayAt	5398279
+	Container	0x6ae12324
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1209a
-	ObjType	0xe40
-	Graphic	0xe40
+	Serial	0x6ae12382
+	ObjType	0xe43
+	Graphic	0xe43
 	X	5473
-	Y	2034
+	Y	2035
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i5
+	CProp	LockPickDiff i18
+	CProp	furniture i1
 	CProp	level i1
 	CProp	link i1113426563
-	CProp	lockid i1232
+	CProp	lockid i1246
 	CProp	trap_strength i20
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae120ab
+	Serial	0x6ae1239e
 	ObjType	0xeed
 	Graphic	0xeed
-	X	78
-	Y	105
+	X	134
+	Y	95
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	18
-	Container	0x6ae1209a
-	DecayAt	25191006
+	Amount	20
+	Container	0x6ae12382
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120b7
-	ObjType	0xdce6
-	Graphic	0xf06
-	X	50
-	Y	76
+	Serial	0x6ae123aa
+	ObjType	0xdc14
+	Graphic	0xf07
+	X	80
+	Y	104
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae1209a
-	DecayAt	25191006
+	Container	0x6ae12382
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120cc
-	ObjType	0xf25
-	Graphic	0xf25
-	X	88
-	Y	78
+	Serial	0x6ae123b7
+	ObjType	0xdc0e
+	Graphic	0xf0b
+	X	76
+	Y	101
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae1209a
-	DecayAt	25191006
+	Container	0x6ae12382
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120e4
-	ObjType	0xe77
-	Graphic	0xe77
-	X	5475
-	Y	2034
+	Serial	0x6ae12386
+	ObjType	0xe42
+	Graphic	0xe42
+	X	5482
+	Y	1984
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i18
-	CProp	level i1
-	CProp	link i1113426563
-	CProp	lockid i1234
-	CProp	trap_strength i20
+	CProp	LockPickDiff i38
+	CProp	furniture i1
+	CProp	level i2
+	CProp	link i1113426689
+	CProp	lockid i1246
+	CProp	trap_strength i40
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae12108
+	Serial	0x6ae123a1
 	ObjType	0xeed
 	Graphic	0xeed
-	X	51
-	Y	39
+	X	129
+	Y	117
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	26
-	Container	0x6ae120e4
-	DecayAt	25191006
+	Amount	52
+	Container	0x6ae12386
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1210e
+	Serial	0x6ae123a7
+	ObjType	0xf18
+	Graphic	0xf18
+	X	70
+	Y	98
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae12386
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123ad
 	ObjType	0xf10
 	Graphic	0xf10
-	X	49
-	Y	39
+	X	125
+	Y	115
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae120e4
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae12386
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12114
-	ObjType	0xdc11
-	Graphic	0xf09
-	X	57
-	Y	67
+	Serial	0x6ae123bd
+	ObjType	0xdce6
+	Graphic	0xf06
+	X	69
+	Y	81
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae120e4
-	DecayAt	25191006
+	Container	0x6ae12386
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1211b
-	ObjType	0xdc08
-	Graphic	0xf0d
-	X	45
-	Y	40
+	Serial	0x6ae123c7
+	ObjType	0xf25
+	Graphic	0xf25
+	X	126
+	Y	75
 	Z	0
+	Revision	5
+	Realm	britannia
+	Amount	5
+	Container	0x6ae12386
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123e2
+	ObjType	0xdc01
+	Graphic	0xf0c
+	X	87
+	Y	87
+	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae120e4
-	DecayAt	25191006
+	Container	0x6ae12386
+	DecayAt	25191073
 }
 
 Item
@@ -222913,386 +223746,383 @@
 
 Item
 {
-	Serial	0x6ae12093
+	Serial	0x6ae1232c
 	ObjType	0xe43
 	Graphic	0xe43
-	X	5617
-	Y	1836
+	X	5614
+	Y	1835
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i2
+	CProp	LockPickDiff i1
 	CProp	furniture i1
 	CProp	level i1
 	CProp	link i1113427871
-	CProp	lockid i1231
+	CProp	lockid i1243
 	CProp	trap_strength i20
-	CProp	trap_type s3
+	CProp	trap_type s2
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae120a7
+	Serial	0x6ae12332
 	ObjType	0xeed
 	Graphic	0xeed
-	X	68
-	Y	108
+	X	67
+	Y	113
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	40
-	Container	0x6ae12093
-	DecayAt	25191006
+	Amount	32
+	Container	0x6ae1232c
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120bf
-	ObjType	0xdc0e
-	Graphic	0xf0b
-	X	67
-	Y	89
+	Serial	0x6ae12350
+	ObjType	0xf10
+	Graphic	0xf10
+	X	59
+	Y	66
 	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	2
+	Container	0x6ae1232c
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12365
+	ObjType	0xdce6
+	Graphic	0xf06
+	X	95
+	Y	109
+	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12093
-	DecayAt	25191006
+	Container	0x6ae1232c
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120cb
-	ObjType	0xe42
-	Graphic	0xe42
+	Serial	0x6ae12370
+	ObjType	0xe40
+	Graphic	0xe40
 	X	5614
-	Y	1840
+	Y	1836
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i13
-	CProp	furniture i1
+	CProp	LockPickDiff i11
 	CProp	level i1
 	CProp	link i1113427871
-	CProp	lockid i1233
+	CProp	lockid i1245
 	CProp	trap_strength i20
-	CProp	trap_type s3
+	CProp	trap_type s2
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae120ea
+	Serial	0x6ae1238d
 	ObjType	0xeed
 	Graphic	0xeed
-	X	59
-	Y	95
+	X	135
+	Y	135
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	54
-	Container	0x6ae120cb
-	DecayAt	25191006
+	Amount	21
+	Container	0x6ae12370
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120f0
-	ObjType	0xf15
-	Graphic	0xf15
-	X	108
-	Y	115
+	Serial	0x6ae12395
+	ObjType	0xf11
+	Graphic	0xf11
+	X	130
+	Y	85
 	Z	0
 	Revision	2
 	Realm	britannia
 	Amount	2
-	Container	0x6ae120cb
-	DecayAt	25191006
+	Container	0x6ae12370
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12104
-	ObjType	0xe43
-	Graphic	0xe43
-	X	5613
-	Y	1838
+	Serial	0x6ae123a6
+	ObjType	0xdce6
+	Graphic	0xf06
+	X	56
+	Y	82
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i12
-	CProp	furniture i1
+	Container	0x6ae12370
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123b4
+	ObjType	0xe40
+	Graphic	0xe40
+	X	5611
+	Y	1840
+	Z	0
+	Revision	1
+	Realm	britannia
+	CProp	LockPickDiff i7
 	CProp	level i1
 	CProp	link i1113427871
-	CProp	lockid i1235
+	CProp	lockid i1248
 	CProp	trap_strength i20
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae12130
+	Serial	0x6ae123d3
 	ObjType	0xeed
 	Graphic	0xeed
-	X	117
-	Y	116
+	X	64
+	Y	107
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	26
-	Container	0x6ae12104
-	DecayAt	25191006
+	Amount	60
+	Container	0x6ae123b4
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12133
+	Serial	0x6ae123d8
 	ObjType	0xf18
 	Graphic	0xf18
-	X	101
-	Y	124
+	X	109
+	Y	138
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12104
-	DecayAt	25191006
+	Container	0x6ae123b4
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12162
-	ObjType	0xe40
-	Graphic	0xe40
-	X	5612
-	Y	1839
+	Serial	0x6ae123e1
+	ObjType	0xdc04
+	Graphic	0xf0a
+	X	93
+	Y	84
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i18
+	Container	0x6ae123b4
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1241a
+	ObjType	0xe77
+	Graphic	0xe77
+	X	5615
+	Y	1835
+	Z	0
+	Revision	1
+	Realm	britannia
+	CProp	LockPickDiff i7
 	CProp	level i1
 	CProp	link i1113427871
-	CProp	lockid i1238
+	CProp	lockid i1251
 	CProp	trap_strength i20
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae1217b
+	Serial	0x6ae12423
 	ObjType	0xeed
 	Graphic	0xeed
-	X	117
-	Y	90
+	X	44
+	Y	41
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	34
-	Container	0x6ae12162
-	DecayAt	25191006
+	Amount	5
+	Container	0x6ae1241a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1217c
-	ObjType	0xdc01
-	Graphic	0xf0c
-	X	91
-	Y	95
+	Serial	0x6ae12425
+	ObjType	0xf25
+	Graphic	0xf25
+	X	57
+	Y	25
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12162
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae1241a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12180
-	ObjType	0xf18
-	Graphic	0xf18
+	Serial	0x6ae1242d
+	ObjType	0xdc01
+	Graphic	0xf0c
 	X	57
-	Y	101
+	Y	43
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12162
-	DecayAt	25191006
+	Container	0x6ae1241a
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1218f
-	ObjType	0xe40
-	Graphic	0xe40
-	X	5619
-	Y	1836
+	Serial	0x6ae12441
+	ObjType	0xe42
+	Graphic	0xe42
+	X	5618
+	Y	1834
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i4
+	CProp	LockPickDiff i6
+	CProp	furniture i1
 	CProp	level i1
 	CProp	link i1113427871
-	CProp	lockid i1240
+	CProp	lockid i1253
 	CProp	trap_strength i20
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae1219b
+	Serial	0x6ae1245d
 	ObjType	0xeed
 	Graphic	0xeed
-	X	86
-	Y	72
+	X	79
+	Y	134
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	48
-	Container	0x6ae1218f
-	DecayAt	25191006
+	Amount	36
+	Container	0x6ae12441
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1219c
-	ObjType	0xf10
-	Graphic	0xf10
-	X	97
-	Y	85
+	Serial	0x6ae12460
+	ObjType	0xf18
+	Graphic	0xf18
+	X	121
+	Y	115
 	Z	0
 	Revision	2
 	Realm	britannia
 	Amount	2
-	Container	0x6ae1218f
-	DecayAt	25191006
+	Container	0x6ae12441
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121a0
-	ObjType	0xdc08
-	Graphic	0xf0d
-	X	107
-	Y	121
-	Z	0
-	Revision	1
-	Realm	britannia
-	Container	0x6ae1218f
-	DecayAt	25191006
-}
-
-Item
-{
-	Serial	0x6ae121a4
-	ObjType	0xf25
-	Graphic	0xf25
-	X	69
-	Y	115
-	Z	0
-	Revision	1
-	Realm	britannia
-	Container	0x6ae1218f
-	DecayAt	25191006
-}
-
-Item
-{
-	Serial	0x6ae121ac
-	ObjType	0xe43
-	Graphic	0xe43
-	X	5619
+	Serial	0x6ae12464
+	ObjType	0xe42
+	Graphic	0xe42
+	X	5612
 	Y	1835
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i6
+	CProp	LockPickDiff i9
 	CProp	furniture i1
 	CProp	level i1
 	CProp	link i1113427871
-	CProp	lockid i1242
+	CProp	lockid i1255
 	CProp	trap_strength i20
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191007
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae121c1
+	Serial	0x6ae12478
 	ObjType	0xeed
 	Graphic	0xeed
-	X	44
-	Y	133
+	X	67
+	Y	82
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	48
-	Container	0x6ae121ac
-	DecayAt	25191007
+	Amount	16
+	Container	0x6ae12464
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121c3
-	ObjType	0xf25
-	Graphic	0xf25
-	X	114
-	Y	106
+	Serial	0x6ae12479
+	ObjType	0xf13
+	Graphic	0xf13
+	X	67
+	Y	101
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae121ac
-	DecayAt	25191007
+	Container	0x6ae12464
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121c4
-	ObjType	0xdc14
-	Graphic	0xf07
-	X	95
-	Y	98
+	Serial	0x6ae1247a
+	ObjType	0xdc08
+	Graphic	0xf0d
+	X	52
+	Y	115
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae121ac
-	DecayAt	25191007
+	Container	0x6ae12464
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121c6
-	ObjType	0xf30
-	Graphic	0xf30
-	X	77
-	Y	93
-	Z	0
-	Revision	2
-	Realm	britannia
-	Amount	2
-	Container	0x6ae121ac
-	DecayAt	25191007
-}
-
-Item
-{
 	Serial	0x425d77a3
 	ObjType	0x6c5
 	Graphic	0x6c5
@@ -223781,136 +224611,163 @@
 
 Item
 {
-	Serial	0x6ae12097
+	Serial	0x6ae1232d
 	ObjType	0xe40
 	Graphic	0xe40
-	X	5575
-	Y	2006
+	X	5576
+	Y	2004
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i15
+	CProp	LockPickDiff i11
 	CProp	level i1
 	CProp	link i1113426425
-	CProp	lockid i1231
+	CProp	lockid i1243
 	CProp	trap_strength i20
-	CProp	trap_type s2
+	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae1209e
+	Serial	0x6ae1233e
 	ObjType	0xeed
 	Graphic	0xeed
-	X	137
-	Y	82
+	X	44
+	Y	132
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	23
-	Container	0x6ae12097
-	DecayAt	25191006
+	Amount	34
+	Container	0x6ae1232d
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120b9
-	ObjType	0xf13
-	Graphic	0xf13
-	X	132
-	Y	76
+	Serial	0x6ae12348
+	ObjType	0xdc0c
+	Graphic	0xf08
+	X	65
+	Y	81
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12097
-	DecayAt	25191006
+	Container	0x6ae1232d
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120ce
-	ObjType	0xdc08
-	Graphic	0xf0d
-	X	108
-	Y	130
+	Serial	0x6ae1235c
+	ObjType	0xf0f
+	Graphic	0xf0f
+	X	128
+	Y	133
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12097
-	DecayAt	25191006
+	Container	0x6ae1232d
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120ff
-	ObjType	0xe40
-	Graphic	0xe40
-	X	5576
+	Serial	0x6ae12369
+	ObjType	0xdce6
+	Graphic	0xf06
+	X	100
+	Y	101
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1232d
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12383
+	ObjType	0xe43
+	Graphic	0xe43
+	X	5574
 	Y	2005
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i10
+	CProp	LockPickDiff i17
+	CProp	furniture i1
 	CProp	level i1
 	CProp	link i1113426425
-	CProp	lockid i1235
+	CProp	lockid i1246
 	CProp	trap_strength i20
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae1212c
+	Serial	0x6ae1239f
 	ObjType	0xeed
 	Graphic	0xeed
-	X	114
-	Y	67
+	X	69
+	Y	69
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	27
-	Container	0x6ae120ff
-	DecayAt	25191006
+	Amount	11
+	Container	0x6ae12383
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12132
-	ObjType	0xf18
-	Graphic	0xf18
-	X	78
-	Y	118
+	Serial	0x6ae123ab
+	ObjType	0xdce6
+	Graphic	0xf06
+	X	118
+	Y	132
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae120ff
-	DecayAt	25191006
+	Container	0x6ae12383
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1213c
-	ObjType	0xdc14
-	Graphic	0xf07
-	X	125
-	Y	77
+	Serial	0x6ae123b5
+	ObjType	0xf16
+	Graphic	0xf16
+	X	133
+	Y	103
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae120ff
-	DecayAt	25191006
+	Container	0x6ae12383
+	DecayAt	25191073
 }
 
 Item
 {
+	Serial	0x6ae123c0
+	ObjType	0xdc08
+	Graphic	0xf0d
+	X	88
+	Y	105
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae12383
+	DecayAt	25191073
+}
+
+Item
+{
 	Serial	0x43ee2fe7
 	ObjType	0xcc8
 	Graphic	0xcc8
@@ -224415,14 +225272,15 @@
 
 Item
 {
-	Name	a banker node [enabled]
+	Name	a banker node [initializing]
 	Serial	0x48a0aa84
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5670
 	Y	3130
 	Z	13
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a2:i913654i913641
@@ -224436,15 +225294,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb7318
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5661
 	Y	3135
 	Z	-3
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711775
@@ -224457,14 +225315,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x48a0ad1b
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5661
 	Y	3148
 	Z	13
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a2:i913738i913642
@@ -224512,7 +225371,7 @@
 	X	5662
 	Y	3193
 	Z	3
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712459
@@ -224525,14 +225384,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x65b07d53
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5694
 	Y	3209
 	Z	10
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a8:i1671145i1671144i1671140i1671142i1671146i1671141i1671147i1671143
@@ -224546,15 +225406,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb7320
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5662
 	Y	3251
 	Z	-14
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711845
@@ -224589,7 +225449,7 @@
 	X	5662
 	Y	3309
 	Z	-14
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712156
@@ -224710,286 +225570,334 @@
 
 Item
 {
-	Serial	0x6ae12098
-	ObjType	0xe77
-	Graphic	0xe77
+	Serial	0x6ae12326
+	ObjType	0xe43
+	Graphic	0xe43
 	X	5739
-	Y	51
-	Z	2
+	Y	52
+	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i66
+	CProp	LockPickDiff i62
+	CProp	furniture i1
 	CProp	level i4
 	CProp	link i1094914622
-	CProp	lockid i1231
+	CProp	lockid i1243
 	CProp	trap_strength i80
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae120aa
+	Serial	0x6ae12339
 	ObjType	0xeed
 	Graphic	0xeed
-	X	55
-	Y	20
+	X	137
+	Y	127
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	92
-	Container	0x6ae12098
-	DecayAt	25191006
+	Amount	107
+	Container	0x6ae12326
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120b5
+	Serial	0x6ae12349
 	ObjType	0xdc04
 	Graphic	0xf0a
-	X	57
-	Y	25
+	X	107
+	Y	72
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12098
-	DecayAt	25191006
+	Container	0x6ae12326
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120d5
-	ObjType	0xf11
-	Graphic	0xf11
-	X	44
-	Y	72
+	Serial	0x6ae12368
+	ObjType	0xdc0e
+	Graphic	0xf0b
+	X	137
+	Y	117
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12098
-	DecayAt	25191006
+	Container	0x6ae12326
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120de
-	ObjType	0xf0f
-	Graphic	0xf0f
-	X	45
-	Y	51
+	Serial	0x6ae12375
+	ObjType	0x1f46
+	Graphic	0x1f46
+	X	135
+	Y	103
 	Z	0
-	Revision	4
-	Realm	britannia
-	Amount	4
-	Container	0x6ae12098
-	DecayAt	25191006
-}
-
-Item
-{
-	Serial	0x6ae120f2
-	ObjType	0xf10
-	Graphic	0xf10
-	X	49
-	Y	27
-	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12098
-	DecayAt	25191006
+	Container	0x6ae12326
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120f7
-	ObjType	0xf15
-	Graphic	0xf15
-	X	58
-	Y	56
+	Serial	0x6ae12379
+	ObjType	0x1f5b
+	Graphic	0x1f5b
+	X	65
+	Y	98
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12098
-	DecayAt	25191006
+	Container	0x6ae12326
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120fb
-	ObjType	0xdc0e
-	Graphic	0xf0b
-	X	49
-	Y	31
+	Serial	0x6ae1237f
+	ObjType	0x1f49
+	Graphic	0x1f49
+	X	85
+	Y	94
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12098
-	DecayAt	25191006
+	Container	0x6ae12326
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12125
-	ObjType	0xe40
-	Graphic	0xe40
+	Serial	0x6ae12399
+	ObjType	0xe43
+	Graphic	0xe43
 	X	5741
-	Y	52
+	Y	51
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i76
+	CProp	LockPickDiff i69
+	CProp	furniture i1
 	CProp	level i4
 	CProp	link i1094914622
-	CProp	lockid i1236
+	CProp	lockid i1247
 	CProp	trap_strength i80
-	CProp	trap_type s2
+	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae12144
+	Serial	0x6ae123ba
 	ObjType	0xeed
 	Graphic	0xeed
-	X	132
-	Y	90
+	X	138
+	Y	72
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	170
-	Container	0x6ae12125
-	DecayAt	25191006
+	Amount	142
+	Container	0x6ae12399
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1214f
-	ObjType	0xdc0e
-	Graphic	0xf0b
-	X	76
-	Y	106
+	Serial	0x6ae123cd
+	ObjType	0xf18
+	Graphic	0xf18
+	X	96
+	Y	86
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12125
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae12399
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12156
-	ObjType	0x1f54
-	Graphic	0x1f54
-	X	90
-	Y	113
+	Serial	0x6ae123d9
+	ObjType	0xf11
+	Graphic	0xf11
+	X	139
+	Y	120
 	Z	0
-	Revision	2
+	Revision	3
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12125
-	DecayAt	25191006
+	Amount	3
+	Container	0x6ae12399
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1215b
-	ObjType	0x1f50
-	Graphic	0x1f50
-	X	68
-	Y	134
+	Serial	0x6ae123de
+	ObjType	0xf30
+	Graphic	0xf30
+	X	132
+	Y	90
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12125
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae12399
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1215d
-	ObjType	0x1f4c
-	Graphic	0x1f4c
-	X	94
-	Y	104
+	Serial	0x6ae123ee
+	ObjType	0xf13
+	Graphic	0xf13
+	X	130
+	Y	113
 	Z	0
 	Revision	2
 	Realm	britannia
 	Amount	2
-	Container	0x6ae12125
-	DecayAt	25191006
+	Container	0x6ae12399
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1216d
-	ObjType	0x1f45
-	Graphic	0x1f45
-	X	97
-	Y	131
+	Serial	0x6ae123fa
+	ObjType	0xdc14
+	Graphic	0xf07
+	X	50
+	Y	112
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12125
-	DecayAt	25191006
+	Container	0x6ae12399
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12176
-	ObjType	0xe40
-	Graphic	0xe40
+	Serial	0x6ae12440
+	ObjType	0xe77
+	Graphic	0xe77
 	X	5740
-	Y	52
+	Y	50
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i72
+	CProp	LockPickDiff i80
 	CProp	level i4
 	CProp	link i1094914622
-	CProp	lockid i1239
+	CProp	lockid i1253
 	CProp	trap_strength i80
-	CProp	trap_type s3
+	CProp	trap_type s2
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae12191
+	Serial	0x6ae1245c
 	ObjType	0xeed
 	Graphic	0xeed
-	X	132
-	Y	99
+	X	53
+	Y	34
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	142
-	Container	0x6ae12176
-	DecayAt	25191006
+	Amount	131
+	Container	0x6ae12440
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12194
-	ObjType	0xdc08
-	Graphic	0xf0d
-	X	102
-	Y	92
+	Serial	0x6ae1245e
+	ObjType	0xf13
+	Graphic	0xf13
+	X	58
+	Y	27
 	Z	0
+	Revision	3
+	Realm	britannia
+	Amount	3
+	Container	0x6ae12440
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1245f
+	ObjType	0xf15
+	Graphic	0xf15
+	X	49
+	Y	35
+	Z	0
+	Revision	3
+	Realm	britannia
+	Amount	3
+	Container	0x6ae12440
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12461
+	ObjType	0xf16
+	Graphic	0xf16
+	X	41
+	Y	23
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	2
+	Container	0x6ae12440
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12462
+	ObjType	0x1f45
+	Graphic	0x1f45
+	X	59
+	Y	25
+	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12176
-	DecayAt	25191006
+	Container	0x6ae12440
+	DecayAt	25191073
 }
 
 Item
 {
+	Serial	0x6ae12463
+	ObjType	0x1f58
+	Graphic	0x1f58
+	X	52
+	Y	66
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	2
+	Container	0x6ae12440
+	DecayAt	25191073
+}
+
+Item
+{
 	Serial	0x414311ef
 	ObjType	0x6203
 	Graphic	0x1fd4
@@ -225026,328 +225934,313 @@
 
 Item
 {
-	Serial	0x6ae12096
-	ObjType	0xe40
-	Graphic	0xe40
-	X	5699
-	Y	80
+	Serial	0x6ae12329
+	ObjType	0xe42
+	Graphic	0xe42
+	X	5698
+	Y	81
 	Z	0
 	Revision	1
 	Realm	britannia
 	CProp	LockPickDiff i52
+	CProp	furniture i1
 	CProp	level i3
 	CProp	link i1094914549
-	CProp	lockid i1231
+	CProp	lockid i1243
 	CProp	trap_strength i60
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae120a9
+	Serial	0x6ae1233b
 	ObjType	0xeed
 	Graphic	0xeed
-	X	84
-	Y	123
+	X	101
+	Y	128
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	78
-	Container	0x6ae12096
-	DecayAt	25191006
+	Amount	65
+	Container	0x6ae12329
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120b1
-	ObjType	0xf15
-	Graphic	0xf15
-	X	79
-	Y	127
+	Serial	0x6ae12345
+	ObjType	0xf30
+	Graphic	0xf30
+	X	57
+	Y	104
 	Z	0
-	Revision	4
+	Revision	2
 	Realm	britannia
-	Amount	4
-	Container	0x6ae12096
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae12329
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120be
-	ObjType	0xf11
-	Graphic	0xf11
+	Serial	0x6ae12355
+	ObjType	0xf16
+	Graphic	0xf16
 	X	124
 	Y	135
 	Z	0
 	Revision	2
 	Realm	britannia
 	Amount	2
-	Container	0x6ae12096
-	DecayAt	25191006
+	Container	0x6ae12329
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120d9
-	ObjType	0xdc01
-	Graphic	0xf0c
-	X	136
-	Y	91
+	Serial	0x6ae12363
+	ObjType	0xf11
+	Graphic	0xf11
+	X	88
+	Y	78
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12096
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae12329
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120eb
-	ObjType	0xf25
-	Graphic	0xf25
-	X	139
-	Y	91
+	Serial	0x6ae12376
+	ObjType	0xdc04
+	Graphic	0xf0a
+	X	96
+	Y	116
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12096
-	DecayAt	25191006
+	Container	0x6ae12329
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120f3
-	ObjType	0xf10
-	Graphic	0xf10
-	X	97
-	Y	103
+	Serial	0x6ae1237d
+	ObjType	0x1f47
+	Graphic	0x1f47
+	X	88
+	Y	125
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12096
-	DecayAt	25191006
+	Container	0x6ae12329
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120f9
-	ObjType	0xf18
-	Graphic	0xf18
-	X	57
-	Y	82
+	Serial	0x6ae12380
+	ObjType	0x1f51
+	Graphic	0x1f51
+	X	96
+	Y	132
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12096
-	DecayAt	25191006
+	Container	0x6ae12329
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120fd
-	ObjType	0xdc08
-	Graphic	0xf0d
-	X	68
-	Y	75
+	Serial	0x6ae1238a
+	ObjType	0x1f5b
+	Graphic	0x1f5b
+	X	97
+	Y	103
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12096
-	DecayAt	25191006
+	Container	0x6ae12329
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12126
-	ObjType	0xe43
-	Graphic	0xe43
-	X	5698
-	Y	83
+	Serial	0x6ae1239b
+	ObjType	0xe40
+	Graphic	0xe40
+	X	5701
+	Y	80
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i54
-	CProp	furniture i1
+	CProp	LockPickDiff i44
 	CProp	level i3
 	CProp	link i1094914549
-	CProp	lockid i1236
+	CProp	lockid i1247
 	CProp	trap_strength i60
-	CProp	trap_type s2
+	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae12145
+	Serial	0x6ae123bb
 	ObjType	0xeed
 	Graphic	0xeed
-	X	105
-	Y	110
+	X	124
+	Y	93
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	88
-	Container	0x6ae12126
-	DecayAt	25191006
+	Amount	85
+	Container	0x6ae1239b
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12150
-	ObjType	0xdc08
-	Graphic	0xf0d
-	X	125
-	Y	109
+	Serial	0x6ae123cb
+	ObjType	0xe42
+	Graphic	0xe42
+	X	5702
+	Y	84
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12126
-	DecayAt	25191006
+	CProp	LockPickDiff i58
+	CProp	furniture i1
+	CProp	level i3
+	CProp	link i1094914549
+	CProp	lockid i1249
+	CProp	trap_strength i60
+	CProp	trap_type s3
+	OnUseScript	:tinkering:tinkerTraps
+	DecayAt	25191073
+	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae1215a
-	ObjType	0xf0f
-	Graphic	0xf0f
-	X	78
-	Y	93
+	Serial	0x6ae123f0
+	ObjType	0xeed
+	Graphic	0xeed
+	X	91
+	Y	113
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12126
-	DecayAt	25191006
+	Amount	132
+	Container	0x6ae123cb
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12160
-	ObjType	0xf18
-	Graphic	0xf18
-	X	78
-	Y	138
-	Z	0
-	Revision	2
-	Realm	britannia
-	Amount	2
-	Container	0x6ae12126
-	DecayAt	25191006
-}
-
-Item
-{
-	Serial	0x6ae12166
+	Serial	0x6ae123f5
 	ObjType	0xf11
 	Graphic	0xf11
-	X	82
-	Y	91
+	X	74
+	Y	119
 	Z	0
-	Revision	1
+	Revision	4
 	Realm	britannia
-	Container	0x6ae12126
-	DecayAt	25191006
+	Amount	4
+	Container	0x6ae123cb
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1216b
-	ObjType	0x1f46
-	Graphic	0x1f46
-	X	72
-	Y	113
+	Serial	0x6ae123fc
+	ObjType	0xf18
+	Graphic	0xf18
+	X	123
+	Y	90
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12126
-	DecayAt	25191006
+	Container	0x6ae123cb
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12170
-	ObjType	0x1f4b
-	Graphic	0x1f4b
-	X	112
-	Y	111
+	Serial	0x6ae123ff
+	ObjType	0xf15
+	Graphic	0xf15
+	X	73
+	Y	99
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12126
-	DecayAt	25191006
+	Container	0x6ae123cb
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12173
-	ObjType	0x1f47
-	Graphic	0x1f47
-	X	110
-	Y	129
+	Serial	0x6ae12404
+	ObjType	0xdc0e
+	Graphic	0xf0b
+	X	83
+	Y	108
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12126
-	DecayAt	25191006
+	Container	0x6ae123cb
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12177
-	ObjType	0xe77
-	Graphic	0xe77
-	X	5700
+	Serial	0x6ae1240c
+	ObjType	0xf25
+	Graphic	0xf25
+	X	69
 	Y	83
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	CProp	LockPickDiff i49
-	CProp	level i3
-	CProp	link i1094914549
-	CProp	lockid i1239
-	CProp	trap_strength i60
-	CProp	trap_type s3
-	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
-	Locked	1
+	Amount	2
+	Container	0x6ae123cb
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12192
-	ObjType	0xeed
-	Graphic	0xeed
-	X	57
-	Y	25
+	Serial	0x6ae12411
+	ObjType	0xf10
+	Graphic	0xf10
+	X	77
+	Y	98
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	139
-	Container	0x6ae12177
-	DecayAt	25191006
+	Container	0x6ae123cb
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12196
-	ObjType	0xdce6
-	Graphic	0xf06
-	X	57
-	Y	71
+	Serial	0x6ae12413
+	ObjType	0xdc01
+	Graphic	0xf0c
+	X	46
+	Y	101
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12177
-	DecayAt	25191006
+	Container	0x6ae123cb
+	DecayAt	25191073
 }
 
 Item
@@ -225838,15 +226731,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb7319
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5720
 	Y	3135
 	Z	-3
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711821
@@ -225931,7 +226824,7 @@
 	X	5731
 	Y	3194
 	Z	8
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a7:i913506i913510i913508i913507i913501i913498i913505
@@ -225945,14 +226838,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x4f8b4475
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5751
 	Y	3198
 	Z	15
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a2:i1203180i1203181
@@ -225966,15 +226860,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb731d
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5720
 	Y	3193
 	Z	-4
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711861
@@ -226040,14 +226934,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x48a0f4dc
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5736
 	Y	3221
 	Z	11
-	Revision	66
+	Revision	67
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a1:i913826
@@ -226075,14 +226970,15 @@
 
 Item
 {
-	Name	a merchant node [enabled]
+	Name	a merchant node [initializing]
 	Serial	0x65b05348
 	ObjType	0x887a
 	Graphic	0x1f19
+	Color	0x35
 	X	5712
 	Y	3201
 	Z	12
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	GuardZone i2
 	CProp	NpcList a4:i1671138i1671136i1671139i1671137
@@ -226104,7 +227000,7 @@
 	X	5720
 	Y	3252
 	Z	2
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712547
@@ -226117,15 +227013,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb7325
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5720
 	Y	3309
 	Z	14
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711768
@@ -226173,457 +227069,576 @@
 
 Item
 {
-	Serial	0x6ae12094
-	ObjType	0xe40
-	Graphic	0xe40
-	X	5784
-	Y	24
+	Serial	0x6ae12327
+	ObjType	0xe42
+	Graphic	0xe42
+	X	5781
+	Y	27
 	Z	0
 	Revision	1
 	Realm	britannia
 	CProp	LockPickDiff i62
+	CProp	furniture i1
 	CProp	level i4
 	CProp	link i1094915040
-	CProp	lockid i1231
+	CProp	lockid i1243
 	CProp	trap_strength i80
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae120a8
+	Serial	0x6ae1233a
 	ObjType	0xeed
 	Graphic	0xeed
-	X	127
-	Y	97
+	X	55
+	Y	83
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	90
-	Container	0x6ae12094
-	DecayAt	25191006
+	Amount	101
+	Container	0x6ae12327
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120b6
-	ObjType	0x1f53
-	Graphic	0x1f53
-	X	60
-	Y	107
+	Serial	0x6ae12344
+	ObjType	0xf30
+	Graphic	0xf30
+	X	133
+	Y	127
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12094
-	DecayAt	25191006
+	Container	0x6ae12327
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120c1
-	ObjType	0x1f58
-	Graphic	0x1f58
-	X	67
-	Y	101
+	Serial	0x6ae1234c
+	ObjType	0xf25
+	Graphic	0xf25
+	X	113
+	Y	132
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12094
-	DecayAt	25191006
+	Container	0x6ae12327
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120c8
-	ObjType	0x1f4f
-	Graphic	0x1f4f
-	X	111
-	Y	107
+	Serial	0x6ae1235a
+	ObjType	0xf0f
+	Graphic	0xf0f
+	X	65
+	Y	133
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12094
-	DecayAt	25191006
+	Container	0x6ae12327
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120dd
-	ObjType	0xdc0e
-	Graphic	0xf0b
-	X	64
-	Y	114
+	Serial	0x6ae12364
+	ObjType	0xf15
+	Graphic	0xf15
+	X	79
+	Y	119
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12094
-	DecayAt	25191006
+	Container	0x6ae12327
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120e8
-	ObjType	0x1f49
-	Graphic	0x1f49
-	X	121
-	Y	99
+	Serial	0x6ae1236d
+	ObjType	0xf18
+	Graphic	0xf18
+	X	113
+	Y	82
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12094
-	DecayAt	25191006
+	Container	0x6ae12327
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120ef
-	ObjType	0x1f5a
-	Graphic	0x1f5a
-	X	70
-	Y	70
+	Serial	0x6ae12381
+	ObjType	0xdc0c
+	Graphic	0xf08
+	X	110
+	Y	80
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12094
-	DecayAt	25191006
+	Container	0x6ae12327
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120f5
-	ObjType	0x1f5b
-	Graphic	0x1f5b
-	X	63
-	Y	74
+	Serial	0x6ae1238f
+	ObjType	0x1f46
+	Graphic	0x1f46
+	X	81
+	Y	131
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12094
-	DecayAt	25191006
+	Container	0x6ae12327
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12103
-	ObjType	0xe77
-	Graphic	0xe77
+	Serial	0x6ae12392
+	ObjType	0x1f4e
+	Graphic	0x1f4e
+	X	86
+	Y	80
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae12327
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12397
+	ObjType	0x1f47
+	Graphic	0x1f47
+	X	125
+	Y	70
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae12327
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123b2
+	ObjType	0xe40
+	Graphic	0xe40
 	X	5783
-	Y	23
+	Y	20
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i73
+	CProp	LockPickDiff i63
 	CProp	level i4
 	CProp	link i1094915040
-	CProp	lockid i1235
+	CProp	lockid i1248
 	CProp	trap_strength i80
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae1212f
+	Serial	0x6ae123d1
 	ObjType	0xeed
 	Graphic	0xeed
-	X	40
-	Y	41
+	X	84
+	Y	117
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	108
-	Container	0x6ae12103
-	DecayAt	25191006
+	Amount	130
+	Container	0x6ae123b2
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12134
-	ObjType	0xf11
-	Graphic	0xf11
-	X	55
-	Y	28
+	Serial	0x6ae123dc
+	ObjType	0x1f54
+	Graphic	0x1f54
+	X	69
+	Y	128
 	Z	0
-	Revision	3
+	Revision	1
 	Realm	britannia
-	Amount	3
-	Container	0x6ae12103
-	DecayAt	25191006
+	Container	0x6ae123b2
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12138
-	ObjType	0xf0f
-	Graphic	0xf0f
-	X	48
-	Y	64
+	Serial	0x6ae123e3
+	ObjType	0x1f4d
+	Graphic	0x1f4d
+	X	129
+	Y	91
 	Z	0
-	Revision	4
+	Revision	1
 	Realm	britannia
-	Amount	4
-	Container	0x6ae12103
-	DecayAt	25191006
+	Container	0x6ae123b2
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1213a
+	Serial	0x6ae123e8
+	ObjType	0x1f45
+	Graphic	0x1f45
+	X	99
+	Y	89
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae123b2
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123f6
+	ObjType	0xf10
+	Graphic	0xf10
+	X	140
+	Y	123
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae123b2
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae123fb
 	ObjType	0xf18
 	Graphic	0xf18
-	X	46
-	Y	58
+	X	75
+	Y	117
 	Z	0
-	Revision	3
+	Revision	2
 	Realm	britannia
-	Amount	3
-	Container	0x6ae12103
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae123b2
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12141
-	ObjType	0xdc0e
-	Graphic	0xf0b
-	X	57
-	Y	76
+	Serial	0x6ae12400
+	ObjType	0xf11
+	Graphic	0xf11
+	X	91
+	Y	100
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12103
-	DecayAt	25191006
+	Container	0x6ae123b2
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1214b
-	ObjType	0x1f47
-	Graphic	0x1f47
-	X	50
-	Y	50
+	Serial	0x6ae12403
+	ObjType	0xf13
+	Graphic	0xf13
+	X	64
+	Y	96
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12103
-	DecayAt	25191006
+	Container	0x6ae123b2
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12151
-	ObjType	0x1f45
-	Graphic	0x1f45
-	X	54
-	Y	58
+	Serial	0x6ae12405
+	ObjType	0xf30
+	Graphic	0xf30
+	X	130
+	Y	86
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12103
-	DecayAt	25191006
+	Container	0x6ae123b2
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12154
-	ObjType	0x1f5f
-	Graphic	0x1f5f
-	X	46
-	Y	32
+	Serial	0x6ae12407
+	ObjType	0x1f4e
+	Graphic	0x1f4e
+	X	101
+	Y	126
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12103
-	DecayAt	25191006
+	Container	0x6ae123b2
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12163
-	ObjType	0xf16
-	Graphic	0xf16
-	X	47
-	Y	58
+	Serial	0x6ae12408
+	ObjType	0x1f62
+	Graphic	0x1f62
+	X	94
+	Y	138
 	Z	0
-	Revision	3
+	Revision	1
 	Realm	britannia
-	Amount	3
-	Container	0x6ae12103
-	DecayAt	25191006
+	Container	0x6ae123b2
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12171
-	ObjType	0xf15
-	Graphic	0xf15
-	X	52
-	Y	50
+	Serial	0x6ae1240e
+	ObjType	0x1f46
+	Graphic	0x1f46
+	X	75
+	Y	90
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12103
-	DecayAt	25191006
+	Container	0x6ae123b2
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12178
-	ObjType	0xe43
-	Graphic	0xe43
-	X	5785
-	Y	24
+	Serial	0x6ae1241c
+	ObjType	0xe77
+	Graphic	0xe77
+	X	5784
+	Y	21
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i73
-	CProp	furniture i1
+	CProp	LockPickDiff i67
 	CProp	level i4
 	CProp	link i1094915040
-	CProp	lockid i1239
+	CProp	lockid i1251
 	CProp	trap_strength i80
 	CProp	trap_type s2
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae12190
+	Serial	0x6ae12421
 	ObjType	0xeed
 	Graphic	0xeed
-	X	117
-	Y	81
+	X	50
+	Y	65
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	71
-	Container	0x6ae12178
-	DecayAt	25191006
+	Amount	155
+	Container	0x6ae1241c
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12193
-	ObjType	0xf18
-	Graphic	0xf18
-	X	129
-	Y	72
+	Serial	0x6ae12427
+	ObjType	0xf0f
+	Graphic	0xf0f
+	X	57
+	Y	63
 	Z	0
-	Revision	2
+	Revision	3
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12178
-	DecayAt	25191006
+	Amount	3
+	Container	0x6ae1241c
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12195
+	Serial	0x6ae12429
 	ObjType	0xf25
 	Graphic	0xf25
-	X	44
-	Y	124
+	X	51
+	Y	42
 	Z	0
 	Revision	5
 	Realm	britannia
 	Amount	5
-	Container	0x6ae12178
-	DecayAt	25191006
+	Container	0x6ae1241c
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12198
-	ObjType	0xf16
-	Graphic	0xf16
-	X	109
-	Y	111
+	Serial	0x6ae1242e
+	ObjType	0xf30
+	Graphic	0xf30
+	X	52
+	Y	50
 	Z	0
 	Revision	2
 	Realm	britannia
 	Amount	2
-	Container	0x6ae12178
-	DecayAt	25191006
+	Container	0x6ae1241c
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1219d
-	ObjType	0xdc0e
-	Graphic	0xf0b
-	X	50
-	Y	138
+	Serial	0x6ae12431
+	ObjType	0xf13
+	Graphic	0xf13
+	X	47
+	Y	28
 	Z	0
+	Revision	3
+	Realm	britannia
+	Amount	3
+	Container	0x6ae1241c
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12433
+	ObjType	0xdc08
+	Graphic	0xf0d
+	X	42
+	Y	40
+	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12178
-	DecayAt	25191006
+	Container	0x6ae1241c
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121a2
-	ObjType	0xf0f
-	Graphic	0xf0f
-	X	120
-	Y	66
+	Serial	0x6ae12436
+	ObjType	0x1f49
+	Graphic	0x1f49
+	X	59
+	Y	23
 	Z	0
-	Revision	3
+	Revision	1
 	Realm	britannia
-	Amount	3
-	Container	0x6ae12178
-	DecayAt	25191006
+	Container	0x6ae1241c
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121a8
-	ObjType	0xf30
-	Graphic	0xf30
-	X	45
-	Y	113
+	Serial	0x6ae12438
+	ObjType	0x1f5c
+	Graphic	0x1f5c
+	X	58
+	Y	42
 	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1241c
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1243a
+	ObjType	0x1f5d
+	Graphic	0x1f5d
+	X	43
+	Y	38
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1241c
+	DecayAt	25191073
+}
+
+Item
+{
+	Name	a magic crossbow
+	Serial	0x6ae1243b
+	ObjType	0xf4f
+	Graphic	0xf4f
+	X	49
+	Y	53
+	Z	0
 	Revision	2
 	Realm	britannia
+	CProp	accuracy ssupremely accurate
+	CProp	damagemod sof ruin
+	CProp	durability sdurable
+	CProp	gain i25
+	CProp	type saccuracy
+	Container	0x6ae1241c
+	DecayAt	25191073
+	Quality	1
+	HP	50
+	maxhp_mod	5
+	dmg_mod	1
+	HitScript	mainHitScript
+}
+
+Item
+{
+	Serial	0x6ae12446
+	ObjType	0xf18
+	Graphic	0xf18
+	X	50
+	Y	65
+	Z	0
+	Revision	2
+	Realm	britannia
 	Amount	2
-	Container	0x6ae12178
-	DecayAt	25191006
+	Container	0x6ae1241c
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121aa
+	Serial	0x6ae12448
 	ObjType	0xf10
 	Graphic	0xf10
-	X	84
-	Y	116
+	X	46
+	Y	59
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12178
-	DecayAt	25191006
+	Container	0x6ae1241c
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121ab
-	ObjType	0xf11
-	Graphic	0xf11
-	X	75
-	Y	103
+	Serial	0x6ae1244c
+	ObjType	0xdce6
+	Graphic	0xf06
+	X	46
+	Y	61
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12178
-	DecayAt	25191006
+	Container	0x6ae1241c
+	DecayAt	25191073
 }
 
 Item
@@ -230276,15 +231291,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb731a
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5778
 	Y	3135
 	Z	-1
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711784
@@ -230297,15 +231312,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb731e
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5778
 	Y	3193
 	Z	-3
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711852
@@ -230318,15 +231333,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb731f
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5819
 	Y	3193
 	Z	0
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711791
@@ -230339,15 +231354,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb7322
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5778
 	Y	3251
 	Z	-1
-	Revision	67
+	Revision	68
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711826
@@ -230360,15 +231375,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb7326
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5778
 	Y	3309
 	Z	-14
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711839
@@ -231518,7 +232533,7 @@
 	X	5826
 	Y	3145
 	Z	0
-	Revision	68
+	Revision	70
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1712408
@@ -231531,15 +232546,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb7323
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5836
 	Y	3253
 	Z	3
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711796
@@ -231552,15 +232567,15 @@
 
 Item
 {
-	Name	a guard node [enabled]
+	Name	a guard node [initializing]
 	Serial	0x6adb7327
 	ObjType	0x887b
 	Graphic	0x1f19
-	Color	0x85
+	Color	0x35
 	X	5836
 	Y	3309
 	Z	17
-	Revision	68
+	Revision	69
 	Realm	britannia
 	CProp	Amount i1
 	CProp	Children a1:i1711816
@@ -238967,735 +239982,858 @@
 
 Item
 {
-	Serial	0x6ae12095
-	ObjType	0xe42
-	Graphic	0xe42
-	X	6090
-	Y	183
+	Serial	0x6ae12328
+	ObjType	0xe40
+	Graphic	0xe40
+	X	6091
+	Y	182
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i82
-	CProp	furniture i1
+	CProp	LockPickDiff i93
 	CProp	level i5
 	CProp	link i1138839801
-	CProp	lockid i1231
+	CProp	lockid i1243
 	CProp	trap_strength i100
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae1209d
+	Serial	0x6ae12331
 	ObjType	0xeed
 	Graphic	0xeed
-	X	117
-	Y	104
+	X	96
+	Y	135
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	181
-	Container	0x6ae12095
-	DecayAt	25191006
+	Amount	188
+	Container	0x6ae12328
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120b2
-	ObjType	0xdc04
-	Graphic	0xf0a
-	X	107
-	Y	72
+	Serial	0x6ae12342
+	ObjType	0xf25
+	Graphic	0xf25
+	X	132
+	Y	111
 	Z	0
-	Revision	1
+	Revision	7
 	Realm	britannia
-	Container	0x6ae12095
-	DecayAt	25191006
+	Amount	7
+	Container	0x6ae12328
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120c2
-	ObjType	0x1f52
-	Graphic	0x1f52
-	X	64
-	Y	122
+	Serial	0x6ae12353
+	ObjType	0xf0f
+	Graphic	0xf0f
+	X	54
+	Y	127
 	Z	0
-	Revision	1
+	Revision	4
 	Realm	britannia
-	Container	0x6ae12095
-	DecayAt	25191006
+	Amount	4
+	Container	0x6ae12328
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120c9
-	ObjType	0x1f4f
-	Graphic	0x1f4f
-	X	122
-	Y	101
+	Serial	0x6ae12373
+	ObjType	0xf18
+	Graphic	0xf18
+	X	54
+	Y	73
 	Z	0
+	Revision	4
+	Realm	britannia
+	Amount	4
+	Container	0x6ae12328
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12390
+	ObjType	0xdc14
+	Graphic	0xf07
+	X	49
+	Y	70
+	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12095
-	DecayAt	25191006
+	Container	0x6ae12328
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120d3
+	Serial	0x6ae12394
 	ObjType	0x1f57
 	Graphic	0x1f57
-	X	139
-	Y	92
+	X	92
+	Y	129
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12095
-	DecayAt	25191006
+	Container	0x6ae12328
+	DecayAt	25191073
 }
 
 Item
 {
-	Name	a magic butcher's knife
-	Serial	0x6ae120db
-	ObjType	0x13f6
-	Graphic	0x13f6
-	X	77
-	Y	132
+	Serial	0x6ae1239c
+	ObjType	0x1f4d
+	Graphic	0x1f4d
+	X	98
+	Y	98
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	CProp	accuracy ssurpassingly accurate
-	CProp	damagemod sof might
-	CProp	durability sdurable
-	CProp	gain i10
-	CProp	type saccuracy
-	Container	0x6ae12095
-	DecayAt	25191006
-	Quality	1
-	HP	40
-	maxhp_mod	5
-	dmg_mod	3
-	HitScript	mainHitScript
+	Container	0x6ae12328
+	DecayAt	25191073
 }
 
 Item
 {
-	Name	magic studded leather sleeves
-	Serial	0x6ae120ec
-	ObjType	0x13d4
-	Graphic	0x13d4
-	X	103
-	Y	124
+	Serial	0x6ae123a5
+	ObjType	0x1f5e
+	Graphic	0x1f5e
+	X	139
+	Y	136
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	CProp	damagemod sof fortification
-	Container	0x6ae12095
-	DecayAt	25191006
-	Quality	1
-	HP	40
-	AR_mod	20
+	Container	0x6ae12328
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae120fc
-	ObjType	0xf18
-	Graphic	0xf18
-	X	76
-	Y	94
+	Serial	0x6ae123b0
+	ObjType	0xf16
+	Graphic	0xf16
+	X	112
+	Y	77
 	Z	0
 	Revision	2
 	Realm	britannia
 	Amount	2
-	Container	0x6ae12095
-	DecayAt	25191006
+	Container	0x6ae12328
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12106
+	Serial	0x6ae123c4
 	ObjType	0xf30
 	Graphic	0xf30
-	X	127
-	Y	106
+	X	130
+	Y	103
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12095
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae12328
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1210b
-	ObjType	0xf10
-	Graphic	0xf10
-	X	98
-	Y	70
+	Serial	0x6ae123d4
+	ObjType	0xf13
+	Graphic	0xf13
+	X	81
+	Y	79
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12095
-	DecayAt	25191006
+	Amount	2
+	Container	0x6ae12328
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12111
-	ObjType	0xf15
-	Graphic	0xf15
-	X	122
-	Y	84
+	Serial	0x6ae123df
+	ObjType	0xf11
+	Graphic	0xf11
+	X	105
+	Y	110
 	Z	0
 	Revision	2
 	Realm	britannia
 	Amount	2
-	Container	0x6ae12095
-	DecayAt	25191006
+	Container	0x6ae12328
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12116
-	ObjType	0xf25
-	Graphic	0xf25
-	X	79
-	Y	78
+	Serial	0x6ae123e9
+	ObjType	0x1f53
+	Graphic	0x1f53
+	X	75
+	Y	100
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12095
-	DecayAt	25191006
+	Container	0x6ae12328
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1211a
-	ObjType	0xf13
-	Graphic	0xf13
-	X	108
-	Y	80
+	Serial	0x6ae123f2
+	ObjType	0x1f52
+	Graphic	0x1f52
+	X	135
+	Y	68
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12095
-	DecayAt	25191006
+	Container	0x6ae12328
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1211f
+	Serial	0x6ae123f7
 	ObjType	0x1f48
 	Graphic	0x1f48
-	X	100
-	Y	125
+	X	94
+	Y	77
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12095
-	DecayAt	25191006
+	Container	0x6ae12328
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12120
-	ObjType	0x1f45
-	Graphic	0x1f45
-	X	77
-	Y	139
+	Name	magic leather sleeves
+	Serial	0x6ae123fd
+	ObjType	0x13cd
+	Graphic	0x13cd
+	X	93
+	Y	76
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12095
-	DecayAt	25191006
+	CProp	durability ssubstantial
+	Container	0x6ae12328
+	DecayAt	25191073
+	Quality	1
+	HP	55
+	maxhp_mod	20
 }
 
 Item
 {
-	Serial	0x6ae12122
-	ObjType	0x1f5a
-	Graphic	0x1f5a
-	X	46
-	Y	128
+	Name	magic studded leather gorget
+	Serial	0x6ae12402
+	ObjType	0x13d6
+	Graphic	0x13d6
+	X	129
+	Y	119
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12095
-	DecayAt	25191006
+	CProp	damagemod sof defense
+	Container	0x6ae12328
+	DecayAt	25191073
+	Quality	1
+	HP	40
+	AR_mod	5
 }
 
 Item
 {
-	Serial	0x6ae12161
-	ObjType	0xe40
-	Graphic	0xe40
-	X	6094
-	Y	184
+	Name	magic female studded armor
+	Serial	0x6ae12406
+	ObjType	0x1c02
+	Graphic	0x1c02
+	X	72
+	Y	79
 	Z	0
+	Revision	2
+	Realm	britannia
+	CProp	damagemod sof invulnerability
+	CProp	durability sdurable
+	Container	0x6ae12328
+	DecayAt	25191073
+	Quality	1
+	HP	114
+	maxhp_mod	5
+	AR_mod	25
+}
+
+Item
+{
+	Serial	0x6ae1241f
+	ObjType	0xe77
+	Graphic	0xe77
+	X	6093
+	Y	185
+	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i94
+	CProp	LockPickDiff i88
 	CProp	level i5
 	CProp	link i1138839801
-	CProp	lockid i1238
+	CProp	lockid i1252
 	CProp	trap_strength i100
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae1217a
+	Serial	0x6ae12442
 	ObjType	0xeed
 	Graphic	0xeed
-	X	136
-	Y	109
+	X	58
+	Y	74
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	183
-	Container	0x6ae12161
-	DecayAt	25191006
+	Amount	200
+	Container	0x6ae1241f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1217d
-	ObjType	0x1f5c
-	Graphic	0x1f5c
-	X	69
-	Y	134
+	Serial	0x6ae12444
+	ObjType	0x1f52
+	Graphic	0x1f52
+	X	54
+	Y	40
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12161
-	DecayAt	25191006
+	Container	0x6ae1241f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1217f
-	ObjType	0x1f45
-	Graphic	0x1f45
-	X	65
-	Y	138
+	Serial	0x6ae12445
+	ObjType	0x1f56
+	Graphic	0x1f56
+	X	44
+	Y	47
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12161
-	DecayAt	25191006
+	Container	0x6ae1241f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12181
-	ObjType	0x1f49
-	Graphic	0x1f49
-	X	103
-	Y	71
+	Serial	0x6ae12447
+	ObjType	0x1f48
+	Graphic	0x1f48
+	X	54
+	Y	32
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12161
-	DecayAt	25191006
+	Container	0x6ae1241f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12183
-	ObjType	0xdc04
-	Graphic	0xf0a
-	X	133
-	Y	135
+	Name	a magic gnarled staff
+	Serial	0x6ae12449
+	ObjType	0x13f9
+	Graphic	0x13f9
+	X	58
+	Y	56
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12161
-	DecayAt	25191006
+	CProp	SpellId i30
+	CProp	charges i8
+	CProp	damagemod sof lightning
+	Container	0x6ae1241f
+	OnUseScript	:wands:magicWands
+	DecayAt	25191073
+	Quality	1
+	HP	40
+	HitScript	mainHitScript
 }
 
 Item
 {
-	Serial	0x6ae12185
-	ObjType	0x1f4c
-	Graphic	0x1f4c
-	X	84
-	Y	103
+	Name	a magic platemail helm
+	Serial	0x6ae1244a
+	ObjType	0x1412
+	Graphic	0x1412
+	X	59
+	Y	30
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12161
-	DecayAt	25191006
+	CProp	charges i20
+	CProp	damagemod s of protection
+	CProp	durability sdurable
+	CProp	type sprotection
+	Container	0x6ae1241f
+	DecayAt	25191073
+	Quality	1
+	HP	65
+	maxhp_mod	10
 }
 
 Item
 {
-	Serial	0x6ae12187
-	ObjType	0x1f4f
-	Graphic	0x1f4f
-	X	63
-	Y	129
+	Name	a magic war hammer
+	Serial	0x6ae1244d
+	ObjType	0x1438
+	Graphic	0x1438
+	X	53
+	Y	66
 	Z	0
+	Revision	2
+	Realm	britannia
+	CProp	OnHit a1:S15::combat:maceHit
+	CProp	accuracy saccurate
+	CProp	damagemod sof ruin
+	CProp	durability sdurable
+	CProp	gain i5
+	CProp	type saccuracy
+	Container	0x6ae1241f
+	DecayAt	25191073
+	Quality	1
+	HP	75
+	maxhp_mod	5
+	dmg_mod	1
+	HitScript	mainHitScript
+}
+
+Item
+{
+	Serial	0x6ae12450
+	ObjType	0xf11
+	Graphic	0xf11
+	X	52
+	Y	38
+	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12161
-	DecayAt	25191006
+	Container	0x6ae1241f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12189
-	ObjType	0x1f4a
-	Graphic	0x1f4a
-	X	107
-	Y	113
+	Serial	0x6ae12452
+	ObjType	0xf0f
+	Graphic	0xf0f
+	X	54
+	Y	71
 	Z	0
+	Revision	3
+	Realm	britannia
+	Amount	3
+	Container	0x6ae1241f
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12454
+	ObjType	0xf15
+	Graphic	0xf15
+	X	41
+	Y	65
+	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12161
-	DecayAt	25191006
+	Container	0x6ae1241f
+	DecayAt	25191073
 }
 
 Item
 {
-	Name	a magic nose helm
-	Serial	0x6ae1218b
-	ObjType	0x140e
-	Graphic	0x140e
-	X	52
+	Serial	0x6ae12455
+	ObjType	0xf25
+	Graphic	0xf25
+	X	59
 	Y	66
 	Z	0
 	Revision	2
 	Realm	britannia
-	CProp	damagemod sof defense
-	Container	0x6ae12161
-	DecayAt	25191006
-	Quality	1
-	HP	55
-	AR_mod	5
+	Amount	2
+	Container	0x6ae1241f
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12197
+	Serial	0x6ae12456
+	ObjType	0xf18
+	Graphic	0xf18
+	X	53
+	Y	62
+	Z	0
+	Revision	2
+	Realm	britannia
+	Amount	2
+	Container	0x6ae1241f
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12457
+	ObjType	0x1f45
+	Graphic	0x1f45
+	X	43
+	Y	74
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1241f
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12458
+	ObjType	0x1f50
+	Graphic	0x1f50
+	X	58
+	Y	26
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1241f
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae12459
+	ObjType	0x1f4a
+	Graphic	0x1f4a
+	X	55
+	Y	70
+	Z	0
+	Revision	1
+	Realm	britannia
+	Container	0x6ae1241f
+	DecayAt	25191073
+}
+
+Item
+{
+	Serial	0x6ae1245b
 	ObjType	0xe77
 	Graphic	0xe77
-	X	6090
+	X	6093
 	Y	186
 	Z	0
 	Revision	1
 	Realm	britannia
-	CProp	LockPickDiff i96
+	CProp	LockPickDiff i84
 	CProp	level i5
 	CProp	link i1138839801
-	CProp	lockid i1241
+	CProp	lockid i1254
 	CProp	trap_strength i100
 	CProp	trap_type s3
 	OnUseScript	:tinkering:tinkerTraps
-	DecayAt	25191006
+	DecayAt	25191073
 	Locked	1
 }
 
 Item
 {
-	Serial	0x6ae121ae
+	Serial	0x6ae12465
 	ObjType	0xeed
 	Graphic	0xeed
-	X	57
-	Y	55
+	X	49
+	Y	32
 	Z	0
 	Revision	2
 	Realm	britannia
-	Amount	181
-	Container	0x6ae12197
-	DecayAt	25191007
+	Amount	195
+	Container	0x6ae1245b
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121af
-	ObjType	0xf11
-	Graphic	0xf11
-	X	46
-	Y	61
+	Serial	0x6ae12467
+	ObjType	0xf30
+	Graphic	0xf30
+	X	45
+	Y	56
 	Z	0
-	Revision	1
+	Revision	2
 	Realm	britannia
-	Container	0x6ae12197
-	DecayAt	25191007
+	Amount	2
+	Container	0x6ae1245b
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121b0
-	ObjType	0xf25
-	Graphic	0xf25
-	X	55
-	Y	71
+	Serial	0x6ae12468
+	ObjType	0xf0f
+	Graphic	0xf0f
+	X	56
+	Y	56
 	Z	0
-	Revision	3
+	Revision	2
 	Realm	britannia
-	Amount	3
-	Container	0x6ae12197
-	DecayAt	25191007
+	Amount	2
+	Container	0x6ae1245b
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121b1
-	ObjType	0xf18
-	Graphic	0xf18
-	X	45
-	Y	36
+	Serial	0x6ae1246a
+	ObjType	0xf16
+	Graphic	0xf16
+	X	43
+	Y	22
 	Z	0
-	Revision	1
+	Revision	5
 	Realm	britannia
-	Container	0x6ae12197
-	DecayAt	25191007
+	Amount	5
+	Container	0x6ae1245b
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121b2
-	ObjType	0xf15
-	Graphic	0xf15
-	X	54
-	Y	32
+	Serial	0x6ae1246b
+	ObjType	0xf11
+	Graphic	0xf11
+	X	46
+	Y	27
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	Amount	2
-	Container	0x6ae12197
-	DecayAt	25191007
+	Container	0x6ae1245b
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121b3
-	ObjType	0xf10
-	Graphic	0xf10
-	X	48
-	Y	30
+	Serial	0x6ae1246c
+	ObjType	0xf25
+	Graphic	0xf25
+	X	44
+	Y	61
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12197
-	DecayAt	25191007
+	Container	0x6ae1245b
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121b4
-	ObjType	0xdc11
-	Graphic	0xf09
-	X	58
-	Y	56
+	Serial	0x6ae1246d
+	ObjType	0xf13
+	Graphic	0xf13
+	X	54
+	Y	23
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12197
-	DecayAt	25191007
+	Container	0x6ae1245b
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121b5
-	ObjType	0x1f55
-	Graphic	0x1f55
-	X	53
-	Y	59
+	Serial	0x6ae1246e
+	ObjType	0x1f45
+	Graphic	0x1f45
+	X	59
+	Y	29
 	Z	0
-	Revision	2
-	Realm	britannia
-	Amount	2
-	Container	0x6ae12197
-	DecayAt	25191007
-}
-
-Item
-{
-	Serial	0x6ae121b6
-	ObjType	0x1f4a
-	Graphic	0x1f4a
-	X	55
-	Y	79
-	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12197
-	DecayAt	25191007
+	Container	0x6ae1245b
+	DecayAt	25191073
 }
 
 Item
 {
-	Name	magic studded leather sleeves
-	Serial	0x6ae121b7
-	ObjType	0x13d4
-	Graphic	0x13d4
-	X	58
-	Y	74
+	Serial	0x6ae1246f
+	ObjType	0x1f4c
+	Graphic	0x1f4c
+	X	44
+	Y	29
 	Z	0
 	Revision	2
 	Realm	britannia
-	CProp	damagemod sof fortification
-	CProp	durability smassive
-	Container	0x6ae12197
-	DecayAt	25191007
-	Quality	1
-	HP	60
-	maxhp_mod	20
-	AR_mod	20
+	Amount	2
+	Container	0x6ae1245b
+	DecayAt	25191073
 }
 
 Item
 {
-	Name	a magic pickaxe
-	Serial	0x6ae121b8
-	ObjType	0xe85
-	Graphic	0xe85
-	X	52
-	Y	59
+	Serial	0x6ae12470
+	ObjType	0x1f5d
+	Graphic	0x1f5d
+	X	58
+	Y	49
 	Z	0
-	Revision	2
+	Revision	1
 	Realm	britannia
-	CProp	OnHit a1:S15::combat:maceHit
-	CProp	accuracy ssurpassingly accurate
-	CProp	damagemod sof force
-	CProp	durability sdurable
-	CProp	gain i10
-	CProp	type saccuracy
-	Container	0x6ae12197
-	DecayAt	25191007
-	Quality	1
-	HP	50
-	maxhp_mod	5
-	dmg_mod	5
-	HitScript	mainHitScript
+	Container	0x6ae1245b
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121ba
-	ObjType	0xdc0c
-	Graphic	0xf08
-	X	47
-	Y	64
+	Serial	0x6ae12471
+	ObjType	0xf18
+	Graphic	0xf18
+	X	55
+	Y	66
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12197
-	DecayAt	25191007
+	Container	0x6ae1245b
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121bb
-	ObjType	0x1f5f
-	Graphic	0x1f5f
-	X	52
-	Y	25
+	Serial	0x6ae12472
+	ObjType	0xf15
+	Graphic	0xf15
+	X	59
+	Y	52
 	Z	0
-	Revision	1
+	Revision	3
 	Realm	britannia
-	Container	0x6ae12197
-	DecayAt	25191007
+	Amount	3
+	Container	0x6ae1245b
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121bc
-	ObjType	0x1f52
-	Graphic	0x1f52
+	Serial	0x6ae12473
+	ObjType	0x1f4f
+	Graphic	0x1f4f
 	X	49
-	Y	37
+	Y	79
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12197
-	DecayAt	25191007
+	Container	0x6ae1245b
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae121bd
-	ObjType	0x1f50
-	Graphic	0x1f50
-	X	49
-	Y	56
+	Serial	0x6ae12474
+	ObjType	0x1f48
+	Graphic	0x1f48
+	X	47
+	Y	66
 	Z	0
 	Revision	1
 	Realm	britannia
-	Container	0x6ae12197
-	DecayAt	25191007
+	Container	0x6ae1245b
+	DecayAt	25191073
 }
 
 Item
 {
-	Name	a magic gold necklace
-	Serial	0x6ae121be
-	ObjType	0x1089
-	Graphic	0x1089
-	X	51
-	Y	25
+	Name	a magic mace
+	Serial	0x6ae12475
+	ObjType	0xf5c
+	Graphic	0xf5c
+	X	55
+	Y	24
 	Z	0
 	Revision	2
 	Realm	britannia
-	CProp	charges i22
-	CProp	damagemod s of strength
-	CProp	type sstrength
-	Container	0x6ae12197
-	DecayAt	25191007
+	CProp	OnHit a1:S15::combat:maceHit
+	CProp	accuracy seminently accurate
+	CProp	damagemod sof force
+	CProp	durability sdurable
+	CProp	gain i15
+	CProp	type saccuracy
+	Container	0x6ae1245b
+	DecayAt	25191073
+	Quality	1
+	HP	55
+	maxhp_mod	5
+	dmg_mod	5
+	HitScript	mainHitScript
 }
 
 Item
 {
-	Name	magic ringmail sleeves
-	Serial	0x6ae121bf
-	ObjType	0x13ee
-	Graphic	0x13ee
-	X	57
-	Y	69
+	Name	a magic large battle axe
+	Serial	0x6ae12476
+	ObjType	0x13fa
+	Graphic	0x13fa
+	X	40
+	Y	76
 	Z	0
 	Revision	2
 	Realm	britannia
-	CProp	damagemod sof defense
-	CProp	durability sfortified
-	Container	0x6ae12197
-	DecayAt	25191007
+	CProp	accuracy saccurate
+	CProp	damagemod sof ruin
+	CProp	durability ssubstantial
+	CProp	gain i5
+	CProp	type saccuracy
+	Container	0x6ae1245b
+	DecayAt	25191073
 	Quality	1
-	HP	70
-	maxhp_mod	25
-	AR_mod	5
+	HP	80
+	maxhp_mod	10
+	dmg_mod	1
+	HitScript	mainHitScript
 }
 
 Item
 {
-	Name	a magic wooden shield
-	Serial	0x6ae121c0
-	ObjType	0x1b7a
-	Graphic	0x1b7a
-	X	46
+	Name	a magic chainmail coif
+	Serial	0x6ae12477
+	ObjType	0x13bb
+	Graphic	0x13bb
+	X	42
 	Y	77
 	Z	0
 	Revision	2
 	Realm	britannia
-	CProp	damagemod sof defense
+	CProp	damagemod sof hardening
 	CProp	durability sdurable
-	Container	0x6ae12197
-	DecayAt	25191007
+	Container	0x6ae1245b
+	DecayAt	25191073
 	Quality	1
-	HP	27
+	HP	45
 	maxhp_mod	5
-	AR_mod	5
+	AR_mod	15
 }
 
 Item

Modified: trunk/096/data/npcequip.txt
===================================================================
--- trunk/096/data/npcequip.txt	2005-09-04 13:10:41 UTC (rev 50)
+++ trunk/096/data/npcequip.txt	2005-09-04 13:15:12 UTC (rev 51)
@@ -72882,7 +72882,7 @@
 
 Item
 {
-	Serial	0x6ae11ff7
+	Serial	0x6ae1228c
 	ObjType	0x170d
 	Graphic	0x170d
 	Color	0x450
@@ -72893,14 +72893,14 @@
 	Realm	britannia
 	Layer	3
 	Container	0x1a1e7b
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae11ff5
+	Serial	0x6ae1228a
 	ObjType	0x1517
 	Graphic	0x1517
 	Color	0x450
@@ -72911,14 +72911,14 @@
 	Realm	britannia
 	Layer	5
 	Container	0x1a1e7b
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae11ff8
+	Serial	0x6ae1228d
 	ObjType	0x1515
 	Graphic	0x1515
 	Color	0x450
@@ -72929,14 +72929,14 @@
 	Realm	britannia
 	Layer	20
 	Container	0x1a1e7b
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae11ff6
+	Serial	0x6ae1228b
 	ObjType	0x1516
 	Graphic	0x1516
 	Color	0x450
@@ -72947,14 +72947,14 @@
 	Realm	britannia
 	Layer	23
 	Container	0x1a1e7b
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae11ffc
+	Serial	0x6ae12291
 	ObjType	0xf5e
 	Graphic	0xf5e
 	X	1
@@ -72964,7 +72964,7 @@
 	Realm	britannia
 	Layer	1
 	Container	0x1a1e7c
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	65
 	HitScript	mainHitScript
@@ -72972,7 +72972,7 @@
 
 Item
 {
-	Serial	0x6ae12004
+	Serial	0x6ae12299
 	ObjType	0x1b76
 	Graphic	0x1b76
 	X	1
@@ -72982,14 +72982,14 @@
 	Realm	britannia
 	Layer	2
 	Container	0x1a1e7c
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
 
 Item
 {
-	Serial	0x6ae11ffb
+	Serial	0x6ae12290
 	ObjType	0x1711
 	Graphic	0x1711
 	X	1
@@ -72999,14 +72999,14 @@
 	Realm	britannia
 	Layer	3
 	Container	0x1a1e7c
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	50
 }
 
 Item
 {
-	Serial	0x6ae12001
+	Serial	0x6ae12296
 	ObjType	0x13be
 	Graphic	0x13be
 	X	1
@@ -73016,14 +73016,14 @@
 	Realm	britannia
 	Layer	4
 	Container	0x1a1e7c
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	55
 }
 
 Item
 {
-	Serial	0x6ae11ffe
+	Serial	0x6ae12293
 	ObjType	0x13bb
 	Graphic	0x13bb
 	X	1
@@ -73033,14 +73033,14 @@
 	Realm	britannia
 	Layer	6
 	Container	0x1a1e7c
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	40
 }
 
 Item
 {
-	Serial	0x6ae12002
+	Serial	0x6ae12297
 	ObjType	0x1414
 	Graphic	0x1414
 	X	1
@@ -73050,14 +73050,14 @@
 	Realm	britannia
 	Layer	7
 	Container	0x1a1e7c
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae12003
+	Serial	0x6ae12298
 	ObjType	0x1413
 	Graphic	0x1413
 	X	1
@@ -73067,14 +73067,14 @@
 	Realm	britannia
 	Layer	10
 	Container	0x1a1e7c
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae11fff
+	Serial	0x6ae12294
 	ObjType	0x13bf
 	Graphic	0x13bf
 	X	1
@@ -73084,14 +73084,14 @@
 	Realm	britannia
 	Layer	13
 	Container	0x1a1e7c
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	53
 }
 
 Item
 {
-	Serial	0x6ae12000
+	Serial	0x6ae12295
 	ObjType	0x1410
 	Graphic	0x1410
 	X	1
@@ -73101,14 +73101,14 @@
 	Realm	britannia
 	Layer	19
 	Container	0x1a1e7c
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae12008
+	Serial	0x6ae1229d
 	ObjType	0x170d
 	Graphic	0x170d
 	Color	0x21f
@@ -73119,14 +73119,14 @@
 	Realm	britannia
 	Layer	3
 	Container	0x1a1e7d
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae12007
+	Serial	0x6ae1229c
 	ObjType	0x153a
 	Graphic	0x153a
 	Color	0x21f
@@ -73137,14 +73137,14 @@
 	Realm	britannia
 	Layer	4
 	Container	0x1a1e7d
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae12006
+	Serial	0x6ae1229b
 	ObjType	0x1efd
 	Graphic	0x1efd
 	Color	0x21f
@@ -73155,14 +73155,14 @@
 	Realm	britannia
 	Layer	5
 	Container	0x1a1e7d
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae1200c
+	Serial	0x6ae122a1
 	ObjType	0x1440
 	Graphic	0x1440
 	X	1
@@ -73172,7 +73172,7 @@
 	Realm	britannia
 	Layer	1
 	Container	0x1a1e7e
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	55
 	HitScript	mainHitScript
@@ -73180,7 +73180,7 @@
 
 Item
 {
-	Serial	0x6ae12014
+	Serial	0x6ae122a9
 	ObjType	0x1b72
 	Graphic	0x1b72
 	X	1
@@ -73190,14 +73190,14 @@
 	Realm	britannia
 	Layer	2
 	Container	0x1a1e7e
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	28
 }
 
 Item
 {
-	Serial	0x6ae1200b
+	Serial	0x6ae122a0
 	ObjType	0x170b
 	Graphic	0x170b
 	X	1
@@ -73207,14 +73207,14 @@
 	Realm	britannia
 	Layer	3
 	Container	0x1a1e7e
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	50
 }
 
 Item
 {
-	Serial	0x6ae12011
+	Serial	0x6ae122a6
 	ObjType	0x13be
 	Graphic	0x13be
 	X	1
@@ -73224,14 +73224,14 @@
 	Realm	britannia
 	Layer	4
 	Container	0x1a1e7e
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	55
 }
 
 Item
 {
-	Serial	0x6ae1200e
+	Serial	0x6ae122a3
 	ObjType	0x13bb
 	Graphic	0x13bb
 	X	1
@@ -73241,14 +73241,14 @@
 	Realm	britannia
 	Layer	6
 	Container	0x1a1e7e
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	40
 }
 
 Item
 {
-	Serial	0x6ae12012
+	Serial	0x6ae122a7
 	ObjType	0x1414
 	Graphic	0x1414
 	X	1
@@ -73258,14 +73258,14 @@
 	Realm	britannia
 	Layer	7
 	Container	0x1a1e7e
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae12013
+	Serial	0x6ae122a8
 	ObjType	0x1413
 	Graphic	0x1413
 	X	1
@@ -73275,14 +73275,14 @@
 	Realm	britannia
 	Layer	10
 	Container	0x1a1e7e
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae1200f
+	Serial	0x6ae122a4
 	ObjType	0x13bf
 	Graphic	0x13bf
 	X	1
@@ -73292,14 +73292,14 @@
 	Realm	britannia
 	Layer	13
 	Container	0x1a1e7e
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	53
 }
 
 Item
 {
-	Serial	0x6ae12010
+	Serial	0x6ae122a5
 	ObjType	0x1410
 	Graphic	0x1410
 	X	1
@@ -73309,14 +73309,14 @@
 	Realm	britannia
 	Layer	19
 	Container	0x1a1e7e
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae12017
+	Serial	0x6ae122ac
 	ObjType	0x1401
 	Graphic	0x1401
 	X	1
@@ -73326,7 +73326,7 @@
 	Realm	britannia
 	Layer	1
 	Container	0x1a1e7f
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 	HitScript	mainHitScript
@@ -73334,7 +73334,7 @@
 
 Item
 {
-	Serial	0x6ae1201e
+	Serial	0x6ae122b3
 	ObjType	0x1b78
 	Graphic	0x1b78
 	X	1
@@ -73344,14 +73344,14 @@
 	Realm	britannia
 	Layer	2
 	Container	0x1a1e7f
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	55
 }
 
 Item
 {
-	Serial	0x6ae12016
+	Serial	0x6ae122ab
 	ObjType	0x170b
 	Graphic	0x170b
 	X	1
@@ -73361,14 +73361,14 @@
 	Realm	britannia
 	Layer	3
 	Container	0x1a1e7f
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	50
 }
 
 Item
 {
-	Serial	0x6ae1201b
+	Serial	0x6ae122b0
 	ObjType	0x13f0
 	Graphic	0x13f0
 	X	1
@@ -73378,14 +73378,14 @@
 	Realm	britannia
 	Layer	4
 	Container	0x1a1e7f
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	45
 }
 
 Item
 {
-	Serial	0x6ae12018
+	Serial	0x6ae122ad
 	ObjType	0x1db9
 	Graphic	0x1db9
 	X	1
@@ -73395,14 +73395,14 @@
 	Realm	britannia
 	Layer	6
 	Container	0x1a1e7f
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
 
 Item
 {
-	Serial	0x6ae1201c
+	Serial	0x6ae122b1
 	ObjType	0x13f2
 	Graphic	0x13f2
 	X	1
@@ -73412,14 +73412,14 @@
 	Realm	britannia
 	Layer	7
 	Container	0x1a1e7f
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	45
 }
 
 Item
 {
-	Serial	0x6ae1201d
+	Serial	0x6ae122b2
 	ObjType	0x1413
 	Graphic	0x1413
 	X	1
@@ -73429,14 +73429,14 @@
 	Realm	britannia
 	Layer	10
 	Container	0x1a1e7f
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae12019
+	Serial	0x6ae122ae
 	ObjType	0x13ec
 	Graphic	0x13ec
 	X	1
@@ -73446,14 +73446,14 @@
 	Realm	britannia
 	Layer	13
 	Container	0x1a1e7f
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	45
 }
 
 Item
 {
-	Serial	0x6ae1201a
+	Serial	0x6ae122af
 	ObjType	0x13ee
 	Graphic	0x13ee
 	X	1
@@ -73463,14 +73463,14 @@
 	Realm	britannia
 	Layer	19
 	Container	0x1a1e7f
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	45
 }
 
 Item
 {
-	Serial	0x6ae12021
+	Serial	0x6ae122b6
 	ObjType	0xf5c
 	Graphic	0xf5c
 	X	1
@@ -73481,7 +73481,7 @@
 	CProp	OnHit a1:S15::combat:maceHit
 	Layer	1
 	Container	0x1a1e80
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	50
 	HitScript	mainHitScript
@@ -73489,7 +73489,7 @@
 
 Item
 {
-	Serial	0x6ae1202a
+	Serial	0x6ae122bf
 	ObjType	0x1b78
 	Graphic	0x1b78
 	X	1
@@ -73499,14 +73499,14 @@
 	Realm	britannia
 	Layer	2
 	Container	0x1a1e80
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	55
 }
 
 Item
 {
-	Serial	0x6ae12020
+	Serial	0x6ae122b5
 	ObjType	0x1711
 	Graphic	0x1711
 	X	1
@@ -73516,14 +73516,14 @@
 	Realm	britannia
 	Layer	3
 	Container	0x1a1e80
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	50
 }
 
 Item
 {
-	Serial	0x6ae12027
+	Serial	0x6ae122bc
 	ObjType	0x13f0
 	Graphic	0x13f0
 	X	1
@@ -73533,14 +73533,14 @@
 	Realm	britannia
 	Layer	4
 	Container	0x1a1e80
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	45
 }
 
 Item
 {
-	Serial	0x6ae12024
+	Serial	0x6ae122b9
 	ObjType	0x1db9
 	Graphic	0x1db9
 	X	1
@@ -73550,14 +73550,14 @@
 	Realm	britannia
 	Layer	6
 	Container	0x1a1e80
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
 
 Item
 {
-	Serial	0x6ae12028
+	Serial	0x6ae122bd
 	ObjType	0x13f2
 	Graphic	0x13f2
 	X	1
@@ -73567,14 +73567,14 @@
 	Realm	britannia
 	Layer	7
 	Container	0x1a1e80
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	45
 }
 
 Item
 {
-	Serial	0x6ae12029
+	Serial	0x6ae122be
 	ObjType	0x1413
 	Graphic	0x1413
 	X	1
@@ -73584,14 +73584,14 @@
 	Realm	britannia
 	Layer	10
 	Container	0x1a1e80
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae12025
+	Serial	0x6ae122ba
 	ObjType	0x13ec
 	Graphic	0x13ec
 	X	1
@@ -73601,14 +73601,14 @@
 	Realm	britannia
 	Layer	13
 	Container	0x1a1e80
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	45
 }
 
 Item
 {
-	Serial	0x6ae12026
+	Serial	0x6ae122bb
 	ObjType	0x13ee
 	Graphic	0x13ee
 	X	1
@@ -73618,14 +73618,14 @@
 	Realm	britannia
 	Layer	19
 	Container	0x1a1e80
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	45
 }
 
 Item
 {
-	Serial	0x6ae1202c
+	Serial	0x6ae122c1
 	ObjType	0x1440
 	Graphic	0x1440
 	X	1
@@ -73635,7 +73635,7 @@
 	Realm	britannia
 	Layer	1
 	Container	0x1a1e81
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	55
 	HitScript	mainHitScript
@@ -73643,7 +73643,7 @@
 
 Item
 {
-	Serial	0x6ae12037
+	Serial	0x6ae122cc
 	ObjType	0x1b74
 	Graphic	0x1b74
 	X	1
@@ -73653,14 +73653,14 @@
 	Realm	britannia
 	Layer	2
 	Container	0x1a1e81
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	110
 }
 
 Item
 {
-	Serial	0x6ae12034
+	Serial	0x6ae122c9
 	ObjType	0x1411
 	Graphic	0x1411
 	X	1
@@ -73670,14 +73670,14 @@
 	Realm	britannia
 	Layer	4
 	Container	0x1a1e81
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae12031
+	Serial	0x6ae122c6
 	ObjType	0x1408
 	Graphic	0x1408
 	X	1
@@ -73687,14 +73687,14 @@
 	Realm	britannia
 	Layer	6
 	Container	0x1a1e81
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	55
 }
 
 Item
 {
-	Serial	0x6ae12035
+	Serial	0x6ae122ca
 	ObjType	0x1414
 	Graphic	0x1414
 	X	1
@@ -73704,14 +73704,14 @@
 	Realm	britannia
 	Layer	7
 	Container	0x1a1e81
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae12036
+	Serial	0x6ae122cb
 	ObjType	0x1413
 	Graphic	0x1413
 	X	1
@@ -73721,14 +73721,14 @@
 	Realm	britannia
 	Layer	10
 	Container	0x1a1e81
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae12032
+	Serial	0x6ae122c7
 	ObjType	0x1415
 	Graphic	0x1415
 	X	1
@@ -73738,14 +73738,14 @@
 	Realm	britannia
 	Layer	13
 	Container	0x1a1e81
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae1202e
+	Serial	0x6ae122c3
 	ObjType	0x1541
 	Graphic	0x1541
 	Color	0x34
@@ -73756,14 +73756,14 @@
 	Realm	britannia
 	Layer	17
 	Container	0x1a1e81
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae12033
+	Serial	0x6ae122c8
 	ObjType	0x1410
 	Graphic	0x1410
 	X	1
@@ -73773,14 +73773,14 @@
 	Realm	britannia
 	Layer	19
 	Container	0x1a1e81
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae1202d
+	Serial	0x6ae122c2
 	ObjType	0x1515
 	Graphic	0x1515
 	Color	0x34
@@ -73791,14 +73791,14 @@
 	Realm	britannia
 	Layer	20
 	Container	0x1a1e81
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae1203b
+	Serial	0x6ae122d0
 	ObjType	0x170d
 	Graphic	0x170d
 	Color	0x223
@@ -73809,14 +73809,14 @@
 	Realm	britannia
 	Layer	3
 	Container	0x1a1e82
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae1203a
+	Serial	0x6ae122cf
 	ObjType	0x152e
 	Graphic	0x152e
 	Color	0x223
@@ -73827,14 +73827,14 @@
 	Realm	britannia
 	Layer	4
 	Container	0x1a1e82
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae12039
+	Serial	0x6ae122ce
 	ObjType	0x1517
 	Graphic	0x1517
 	Color	0x223
@@ -73845,14 +73845,14 @@
 	Realm	britannia
 	Layer	5
 	Container	0x1a1e82
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae1203f
+	Serial	0x6ae122d4
 	ObjType	0xf60
 	Graphic	0xf60
 	X	1
@@ -73862,7 +73862,7 @@
 	Realm	britannia
 	Layer	1
 	Container	0x1a1e83
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 	HitScript	mainHitScript
@@ -73870,7 +73870,7 @@
 
 Item
 {
-	Serial	0x6ae12047
+	Serial	0x6ae122dc
 	ObjType	0x1b72
 	Graphic	0x1b72
 	X	1
@@ -73880,14 +73880,14 @@
 	Realm	britannia
 	Layer	2
 	Container	0x1a1e83
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	28
 }
 
 Item
 {
-	Serial	0x6ae1203e
+	Serial	0x6ae122d3
 	ObjType	0x170b
 	Graphic	0x170b
 	X	1
@@ -73897,14 +73897,14 @@
 	Realm	britannia
 	Layer	3
 	Container	0x1a1e83
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	50
 }
 
 Item
 {
-	Serial	0x6ae12044
+	Serial	0x6ae122d9
 	ObjType	0x13be
 	Graphic	0x13be
 	X	1
@@ -73914,14 +73914,14 @@
 	Realm	britannia
 	Layer	4
 	Container	0x1a1e83
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	55
 }
 
 Item
 {
-	Serial	0x6ae12041
+	Serial	0x6ae122d6
 	ObjType	0x13bb
 	Graphic	0x13bb
 	X	1
@@ -73931,14 +73931,14 @@
 	Realm	britannia
 	Layer	6
 	Container	0x1a1e83
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	40
 }
 
 Item
 {
-	Serial	0x6ae12045
+	Serial	0x6ae122da
 	ObjType	0x1414
 	Graphic	0x1414
 	X	1
@@ -73948,14 +73948,14 @@
 	Realm	britannia
 	Layer	7
 	Container	0x1a1e83
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae12046
+	Serial	0x6ae122db
 	ObjType	0x1413
 	Graphic	0x1413
 	X	1
@@ -73965,14 +73965,14 @@
 	Realm	britannia
 	Layer	10
 	Container	0x1a1e83
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae12042
+	Serial	0x6ae122d7
 	ObjType	0x13bf
 	Graphic	0x13bf
 	X	1
@@ -73982,14 +73982,14 @@
 	Realm	britannia
 	Layer	13
 	Container	0x1a1e83
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	53
 }
 
 Item
 {
-	Serial	0x6ae12043
+	Serial	0x6ae122d8
 	ObjType	0x1410
 	Graphic	0x1410
 	X	1
@@ -73999,14 +73999,14 @@
 	Realm	britannia
 	Layer	19
 	Container	0x1a1e83
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae12049
+	Serial	0x6ae122de
 	ObjType	0x13fe
 	Graphic	0x13fe
 	X	1
@@ -74016,7 +74016,7 @@
 	Realm	britannia
 	Layer	1
 	Container	0x1a1e84
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 	HitScript	mainHitScript
@@ -74024,7 +74024,7 @@
 
 Item
 {
-	Serial	0x6ae12053
+	Serial	0x6ae122e8
 	ObjType	0x1b74
 	Graphic	0x1b74
 	X	1
@@ -74034,14 +74034,14 @@
 	Realm	britannia
 	Layer	2
 	Container	0x1a1e84
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	110
 }
 
 Item
 {
-	Serial	0x6ae12050
+	Serial	0x6ae122e5
 	ObjType	0x1411
 	Graphic	0x1411
 	X	1
@@ -74051,14 +74051,14 @@
 	Realm	britannia
 	Layer	4
 	Container	0x1a1e84
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae1204d
+	Serial	0x6ae122e2
 	ObjType	0x1408
 	Graphic	0x1408
 	X	1
@@ -74068,14 +74068,14 @@
 	Realm	britannia
 	Layer	6
 	Container	0x1a1e84
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	55
 }
 
 Item
 {
-	Serial	0x6ae12051
+	Serial	0x6ae122e6
 	ObjType	0x1414
 	Graphic	0x1414
 	X	1
@@ -74085,14 +74085,14 @@
 	Realm	britannia
 	Layer	7
 	Container	0x1a1e84
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae12052
+	Serial	0x6ae122e7
 	ObjType	0x1413
 	Graphic	0x1413
 	X	1
@@ -74102,14 +74102,14 @@
 	Realm	britannia
 	Layer	10
 	Container	0x1a1e84
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae1204e
+	Serial	0x6ae122e3
 	ObjType	0x1c0c
 	Graphic	0x1c0c
 	X	1
@@ -74119,14 +74119,14 @@
 	Realm	britannia
 	Layer	13
 	Container	0x1a1e84
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	110
 }
 
 Item
 {
-	Serial	0x6ae1204b
+	Serial	0x6ae122e0
 	ObjType	0x1541
 	Graphic	0x1541
 	Color	0x22e
@@ -74137,14 +74137,14 @@
 	Realm	britannia
 	Layer	17
 	Container	0x1a1e84
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae1204f
+	Serial	0x6ae122e4
 	ObjType	0x1410
 	Graphic	0x1410
 	X	1
@@ -74154,14 +74154,14 @@
 	Realm	britannia
 	Layer	19
 	Container	0x1a1e84
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae1204a
+	Serial	0x6ae122df
 	ObjType	0x1515
 	Graphic	0x1515
 	Color	0x22e
@@ -74172,14 +74172,14 @@
 	Realm	britannia
 	Layer	20
 	Container	0x1a1e84
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae12055
+	Serial	0x6ae122ea
 	ObjType	0xefa
 	Graphic	0xefa
 	X	1
@@ -74189,7 +74189,7 @@
 	Realm	britannia
 	Layer	1
 	Container	0x1a1e85
-	DecayAt	25191006
+	DecayAt	25191073
 	Spellbits0	0
 	Spellbits1	0
 	Spellbits2	0
@@ -74202,7 +74202,7 @@
 
 Item
 {
-	Serial	0x6ae12057
+	Serial	0x6ae122ec
 	ObjType	0x170f
 	Graphic	0x170f
 	Color	0x7
@@ -74213,14 +74213,14 @@
 	Realm	britannia
 	Layer	3
 	Container	0x1a1e85
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae12056
+	Serial	0x6ae122eb
 	ObjType	0x1f03
 	Graphic	0x1f03
 	Color	0x7
@@ -74231,14 +74231,14 @@
 	Realm	britannia
 	Layer	22
 	Container	0x1a1e85
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	10
 }
 
 Item
 {
-	Serial	0x6ae1205c
+	Serial	0x6ae122f1
 	ObjType	0xf5e
 	Graphic	0xf5e
 	X	1
@@ -74248,7 +74248,7 @@
 	Realm	britannia
 	Layer	1
 	Container	0x1a1e86
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	65
 	HitScript	mainHitScript
@@ -74256,7 +74256,7 @@
 
 Item
 {
-	Serial	0x6ae12064
+	Serial	0x6ae122f9
 	ObjType	0x1b72
 	Graphic	0x1b72
 	X	1
@@ -74266,14 +74266,14 @@
 	Realm	britannia
 	Layer	2
 	Container	0x1a1e86
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	28
 }
 
 Item
 {
-	Serial	0x6ae1205b
+	Serial	0x6ae122f0
 	ObjType	0x170b
 	Graphic	0x170b
 	X	1
@@ -74283,14 +74283,14 @@
 	Realm	britannia
 	Layer	3
 	Container	0x1a1e86
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	50
 }
 
 Item
 {
-	Serial	0x6ae12061
+	Serial	0x6ae122f6
 	ObjType	0x13cb
 	Graphic	0x13cb
 	X	1
@@ -74300,14 +74300,14 @@
 	Realm	britannia
 	Layer	4
 	Container	0x1a1e86
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
 
 Item
 {
-	Serial	0x6ae12062
+	Serial	0x6ae122f7
 	ObjType	0x13c6
 	Graphic	0x13c6
 	X	1
@@ -74317,14 +74317,14 @@
 	Realm	britannia
 	Layer	7
 	Container	0x1a1e86
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
 
 Item
 {
-	Serial	0x6ae1205f
+	Serial	0x6ae122f4
 	ObjType	0x13c7
 	Graphic	0x13c7
 	X	1
@@ -74334,14 +74334,14 @@
 	Realm	britannia
 	Layer	10
 	Container	0x1a1e86
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
 
 Item
 {
-	Serial	0x6ae1205e
+	Serial	0x6ae122f3
 	ObjType	0x13cc
 	Graphic	0x13cc
 	X	1
@@ -74351,14 +74351,14 @@
 	Realm	britannia
 	Layer	13
 	Container	0x1a1e86
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
 
 Item
 {
-	Serial	0x6ae12060
+	Serial	0x6ae122f5
 	ObjType	0x13cd
 	Graphic	0x13cd
 	X	1
@@ -74368,14 +74368,14 @@
 	Realm	britannia
 	Layer	19
 	Container	0x1a1e86
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
 
 Item
 {
-	Serial	0x6ae12063
+	Serial	0x6ae122f8
 	ObjType	0x13c7
 	Graphic	0x13c7
 	X	76
@@ -74384,8 +74384,8 @@
 	Revision	1
 	Realm	britannia
 	Layer	10
-	Container	0x6ae1205a
-	DecayAt	25191006
+	Container	0x6ae122ef
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
@@ -74648,7 +74648,7 @@
 
 Item
 {
-	Serial	0x6ae12067
+	Serial	0x6ae122fc
 	ObjType	0xf5e
 	Graphic	0xf5e
 	X	1
@@ -74658,7 +74658,7 @@
 	Realm	britannia
 	Layer	1
 	Container	0x1a1eee
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	65
 	HitScript	mainHitScript
@@ -74666,7 +74666,7 @@
 
 Item
 {
-	Serial	0x6ae12070
+	Serial	0x6ae12305
 	ObjType	0x1b72
 	Graphic	0x1b72
 	X	1
@@ -74676,14 +74676,14 @@
 	Realm	britannia
 	Layer	2
 	Container	0x1a1eee
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	28
 }
 
 Item
 {
-	Serial	0x6ae12066
+	Serial	0x6ae122fb
 	ObjType	0x170b
 	Graphic	0x170b
 	X	1
@@ -74693,14 +74693,14 @@
 	Realm	britannia
 	Layer	3
 	Container	0x1a1eee
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	50
 }
 
 Item
 {
-	Serial	0x6ae1206d
+	Serial	0x6ae12302
 	ObjType	0x13cb
 	Graphic	0x13cb
 	X	1
@@ -74710,14 +74710,14 @@
 	Realm	britannia
 	Layer	4
 	Container	0x1a1eee
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
 
 Item
 {
-	Serial	0x6ae1206e
+	Serial	0x6ae12303
 	ObjType	0x13c6
 	Graphic	0x13c6
 	X	1
@@ -74727,14 +74727,14 @@
 	Realm	britannia
 	Layer	7
 	Container	0x1a1eee
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
 
 Item
 {
-	Serial	0x6ae1206b
+	Serial	0x6ae12300
 	ObjType	0x13c7
 	Graphic	0x13c7
 	X	1
@@ -74744,14 +74744,14 @@
 	Realm	britannia
 	Layer	10
 	Container	0x1a1eee
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
 
 Item
 {
-	Serial	0x6ae1206a
+	Serial	0x6ae122ff
 	ObjType	0x13cc
 	Graphic	0x13cc
 	X	1
@@ -74761,14 +74761,14 @@
 	Realm	britannia
 	Layer	13
 	Container	0x1a1eee
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
 
 Item
 {
-	Serial	0x6ae1206c
+	Serial	0x6ae12301
 	ObjType	0x13cd
 	Graphic	0x13cd
 	X	1
@@ -74778,14 +74778,14 @@
 	Realm	britannia
 	Layer	19
 	Container	0x1a1eee
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
 
 Item
 {
-	Serial	0x6ae1206f
+	Serial	0x6ae12304
 	ObjType	0x13c7
 	Graphic	0x13c7
 	X	123
@@ -74794,15 +74794,15 @@
 	Revision	1
 	Realm	britannia
 	Layer	10
-	Container	0x6ae12065
-	DecayAt	25191006
+	Container	0x6ae122fa
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
 
 Item
 {
-	Serial	0x6ae12073
+	Serial	0x6ae12308
 	ObjType	0x13b5
 	Graphic	0x13b5
 	X	1
@@ -74812,7 +74812,7 @@
 	Realm	britannia
 	Layer	1
 	Container	0x1a1eef
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	50
 	HitScript	mainHitScript
@@ -74820,7 +74820,7 @@
 
 Item
 {
-	Serial	0x6ae1207a
+	Serial	0x6ae1230f
 	ObjType	0x1b78
 	Graphic	0x1b78
 	X	1
@@ -74830,14 +74830,14 @@
 	Realm	britannia
 	Layer	2
 	Container	0x1a1eef
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	55
 }
 
 Item
 {
-	Serial	0x6ae12072
+	Serial	0x6ae12307
 	ObjType	0x1711
 	Graphic	0x1711
 	X	1
@@ -74847,14 +74847,14 @@
 	Realm	britannia
 	Layer	3
 	Container	0x1a1eef
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	50
 }
 
 Item
 {
-	Serial	0x6ae12077
+	Serial	0x6ae1230c
 	ObjType	0x13f0
 	Graphic	0x13f0
 	X	1
@@ -74864,14 +74864,14 @@
 	Realm	britannia
 	Layer	4
 	Container	0x1a1eef
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	45
 }
 
 Item
 {
-	Serial	0x6ae12074
+	Serial	0x6ae12309
 	ObjType	0x1db9
 	Graphic	0x1db9
 	X	1
@@ -74881,14 +74881,14 @@
 	Realm	britannia
 	Layer	6
 	Container	0x1a1eef
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	35
 }
 
 Item
 {
-	Serial	0x6ae12078
+	Serial	0x6ae1230d
 	ObjType	0x13f2
 	Graphic	0x13f2
 	X	1
@@ -74898,14 +74898,14 @@
 	Realm	britannia
 	Layer	7
 	Container	0x1a1eef
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	45
 }
 
 Item
 {
-	Serial	0x6ae12079
+	Serial	0x6ae1230e
 	ObjType	0x1413
 	Graphic	0x1413
 	X	1
@@ -74915,14 +74915,14 @@
 	Realm	britannia
 	Layer	10
 	Container	0x1a1eef
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	60
 }
 
 Item
 {
-	Serial	0x6ae12075
+	Serial	0x6ae1230a
 	ObjType	0x13ec
 	Graphic	0x13ec
 	X	1
@@ -74932,14 +74932,14 @@
 	Realm	britannia
 	Layer	13
 	Container	0x1a1eef
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	45
 }
 
 Item
 {
-	Serial	0x6ae12076
+	Serial	0x6ae1230b
 	ObjType	0x13ee
 	Graphic	0x13ee
 	X	1
@@ -74949,7 +74949,7 @@
 	Realm	britannia
 	Layer	19
 	Container	0x1a1eef
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	45
 }
@@ -75746,7 +75746,7 @@
 
 Item
 {
-	Serial	0x6ae1207e
+	Serial	0x6ae12313
 	ObjType	0x170f
 	Graphic	0x170f
 	Color	0x450
@@ -75757,14 +75757,14 @@
 	Realm	britannia
 	Layer	3
 	Container	0x1a1f23
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae1207c
+	Serial	0x6ae12311
 	ObjType	0x1efd
 	Graphic	0x1efd
 	Color	0x450
@@ -75775,14 +75775,14 @@
 	Realm	britannia
 	Layer	5
 	Container	0x1a1f23
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae1207d
+	Serial	0x6ae12312
 	ObjType	0x1516
 	Graphic	0x1516
 	Color	0x450
@@ -75793,14 +75793,14 @@
 	Realm	britannia
 	Layer	23
 	Container	0x1a1f23
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae12081
+	Serial	0x6ae12316
 	ObjType	0xefa
 	Graphic	0xefa
 	X	1
@@ -75810,7 +75810,7 @@
 	Realm	britannia
 	Layer	1
 	Container	0x1a1f24
-	DecayAt	25191006
+	DecayAt	25191073
 	Spellbits0	0
 	Spellbits1	0
 	Spellbits2	0
@@ -75823,7 +75823,7 @@
 
 Item
 {
-	Serial	0x6ae12083
+	Serial	0x6ae12318
 	ObjType	0x1711
 	Graphic	0x1711
 	Color	0x242
@@ -75834,14 +75834,14 @@
 	Realm	britannia
 	Layer	3
 	Container	0x1a1f24
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	50
 }
 
 Item
 {
-	Serial	0x6ae12082
+	Serial	0x6ae12317
 	ObjType	0x1f03
 	Graphic	0x1f03
 	Color	0x242
@@ -75852,14 +75852,14 @@
 	Realm	britannia
 	Layer	22
 	Container	0x1a1f24
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	10
 }
 
 Item
 {
-	Serial	0x6ae12088
+	Serial	0x6ae1231d
 	ObjType	0x170d
 	Graphic	0x170d
 	Color	0x223
@@ -75870,14 +75870,14 @@
 	Realm	britannia
 	Layer	3
 	Container	0x1a1f25
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae12087
+	Serial	0x6ae1231c
 	ObjType	0x153a
 	Graphic	0x153a
 	Color	0x223
@@ -75888,14 +75888,14 @@
 	Realm	britannia
 	Layer	4
 	Container	0x1a1f25
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }
 
 Item
 {
-	Serial	0x6ae12086
+	Serial	0x6ae1231b
 	ObjType	0x1517
 	Graphic	0x1517
 	Color	0x223
@@ -75906,7 +75906,7 @@
 	Realm	britannia
 	Layer	5
 	Container	0x1a1f25
-	DecayAt	25191006
+	DecayAt	25191073
 	Quality	1
 	HP	20
 }

Modified: trunk/096/data/npcs.txt
===================================================================
--- trunk/096/data/npcs.txt	2005-09-04 13:10:41 UTC (rev 50)
+++ trunk/096/data/npcs.txt	2005-09-04 13:15:12 UTC (rev 51)
@@ -44,7 +44,7 @@
 	CreatedAt	0
 	AR	30
 	script	battleMage
-	SpeechColor	97
+	SpeechColor	54
 }
 
 Item
@@ -116,7 +116,7 @@
 	CreatedAt	0
 	AR	30
 	script	battleMage
-	SpeechColor	37
+	SpeechColor	193
 }
 
 Item
@@ -189,7 +189,7 @@
 	CreatedAt	0
 	AR	30
 	script	battleMage
-	SpeechColor	160
+	SpeechColor	34
 }
 
 Item
@@ -262,7 +262,7 @@
 	CreatedAt	0
 	AR	30
 	script	battleMage
-	SpeechColor	196
+	SpeechColor	902
 }
 
 Item
@@ -336,7 +336,7 @@
 	CreatedAt	0
 	AR	30
 	script	battleMage
-	SpeechColor	7
+	SpeechColor	32
 }
 
 Item
@@ -409,7 +409,7 @@
 	CreatedAt	0
 	AR	30
 	script	battleMage
-	SpeechColor	442
+	SpeechColor	71
 }
 
 Item
@@ -481,7 +481,7 @@
 	CreatedAt	0
 	AR	30
 	script	battleMage
-	SpeechColor	192
+	SpeechColor	18
 }
 
 Item
@@ -606,8 +606,8 @@
 	CProp	MerchantType sstable
 	CProp	MyGold i1000
 	CProp	Pets a0:
-	CProp	counter i448
-	CProp	countercheck i25190405
+	CProp	counter i449
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	mypen s8
 	CProp	restockserial i1793081515
@@ -628,7 +628,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	52
+	SpeechColor	87
 }
 
 Item
@@ -683,8 +683,8 @@
 	CProp	MerchantType sstable
 	CProp	MyGold i1000
 	CProp	Pets a0:
-	CProp	counter i448
-	CProp	countercheck i25190405
+	CProp	counter i449
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	mypen s9
 	CProp	restockserial i1793081514
@@ -704,7 +704,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	348
+	SpeechColor	558
 }
 
 Item
@@ -3277,7 +3277,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	404
+	SpeechColor	901
 }
 
 Item
@@ -3353,7 +3353,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	42
+	SpeechColor	192
 }
 
 Item
@@ -8145,8 +8145,8 @@
 	CProp	MerchantType sstable
 	CProp	MyGold i188673
 	CProp	Pets a0:
-	CProp	counter i295
-	CProp	countercheck i25190405
+	CProp	counter i296
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	mypen s1
 	CProp	restockserial i1793081525
@@ -8167,7 +8167,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	32
+	SpeechColor	537
 }
 
 Item
@@ -8222,8 +8222,8 @@
 	CProp	MerchantType sstable
 	CProp	MyGold i179368
 	CProp	Pets a0:
-	CProp	counter i294
-	CProp	countercheck i25190405
+	CProp	counter i295
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	mypen s2
 	CProp	restockserial i1793081512
@@ -8244,7 +8244,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	17
+	SpeechColor	648
 }
 
 Item
@@ -11281,7 +11281,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	52
+	SpeechColor	340
 }
 
 Item
@@ -11439,7 +11439,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	101
+	SpeechColor	19
 }
 
 Item
@@ -11510,7 +11510,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	97
+	SpeechColor	438
 }
 
 Item
@@ -13232,7 +13232,7 @@
 	Settings	invul 
 	CreatedAt	0
 	script	barber
-	SpeechColor	53
+	SpeechColor	34
 }
 
 Item
@@ -14015,7 +14015,7 @@
 	CreatedAt	0
 	AR	32
 	script	bucsTownHealer
-	SpeechColor	63
+	SpeechColor	207
 }
 
 Item
@@ -14090,7 +14090,7 @@
 	CreatedAt	0
 	AR	32
 	script	bucsTownHealer
-	SpeechColor	36
+	SpeechColor	52
 }
 
 Item
@@ -14283,8 +14283,8 @@
 	CProp	MerchantType sstable
 	CProp	MyGold i11377
 	CProp	Pets a0:
-	CProp	counter i363
-	CProp	countercheck i25190405
+	CProp	counter i364
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	restockserial i1793081517
 	TrueColor	0x83f8
@@ -14303,7 +14303,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	12
+	SpeechColor	196
 }
 
 Item
@@ -14445,7 +14445,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	160
+	SpeechColor	442
 }
 
 Item
@@ -14881,7 +14881,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	707
+	SpeechColor	243
 }
 
 Item
@@ -14951,7 +14951,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	13
+	SpeechColor	442
 }
 
 Item
@@ -15039,7 +15039,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	903
+	SpeechColor	19
 }
 
 Item
@@ -15930,8 +15930,8 @@
 	CProp	MyGold i652688
 	CProp	Pets a0:
 	CProp	TempDamage i1
-	CProp	counter i180
-	CProp	countercheck i25190405
+	CProp	counter i181
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	mypen s3
 	CProp	restockserial i1793081510
@@ -15954,7 +15954,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	17
+	SpeechColor	7
 }
 
 Item
@@ -16009,8 +16009,8 @@
 	CProp	MerchantType sstable
 	CProp	MyGold i833074
 	CProp	Pets a0:
-	CProp	counter i181
-	CProp	countercheck i25190405
+	CProp	counter i182
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	mypen s4
 	CProp	restockserial i1793081511
@@ -16031,7 +16031,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	63
+	SpeechColor	207
 }
 
 Item
@@ -16626,7 +16626,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	19
+	SpeechColor	707
 }
 
 Item
@@ -16714,7 +16714,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	7
+	SpeechColor	18
 }
 
 Item
@@ -18250,7 +18250,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	558
+	SpeechColor	48
 }
 
 Item
@@ -18338,7 +18338,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	80
+	SpeechColor	87
 }
 
 Item
@@ -18411,7 +18411,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	558
+	SpeechColor	97
 }
 
 Item
@@ -20249,8 +20249,8 @@
 	CProp	MerchantType sstable
 	CProp	MyGold i362033
 	CProp	Pets a0:
-	CProp	counter i114
-	CProp	countercheck i25190405
+	CProp	counter i115
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	mypen s5
 	CProp	restockserial i1793081516
@@ -20271,7 +20271,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	19
+	SpeechColor	12
 }
 
 Item
@@ -22010,7 +22010,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	648
+	SpeechColor	362
 }
 
 Item
@@ -22081,7 +22081,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	7
+	SpeechColor	48
 }
 
 Item
@@ -24814,8 +24814,8 @@
 	CProp	MerchantType sstable
 	CProp	MyGold i6280
 	CProp	Pets a0:
-	CProp	counter i212
-	CProp	countercheck i25190405
+	CProp	counter i213
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	restockserial i1793081526
 	TrueColor	0x83f8
@@ -24834,7 +24834,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	340
+	SpeechColor	902
 }
 
 Item
@@ -24889,8 +24889,8 @@
 	CProp	MerchantType sstable
 	CProp	MyGold i9310
 	CProp	Pets a0:
-	CProp	counter i212
-	CProp	countercheck i25190405
+	CProp	counter i213
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	restockserial i1793081522
 	TrueColor	0x83f8
@@ -24909,7 +24909,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	18
+	SpeechColor	404
 }
 
 Item
@@ -25482,7 +25482,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	32
+	SpeechColor	160
 }
 
 Item
@@ -25553,7 +25553,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	98
+	SpeechColor	558
 }
 
 Item
@@ -26250,7 +26250,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	9
+	SpeechColor	404
 }
 
 Item
@@ -33546,7 +33546,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	442
+	SpeechColor	42
 }
 
 Item
@@ -33617,7 +33617,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	97
+	SpeechColor	52
 }
 
 Item
@@ -33688,7 +33688,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	228
+	SpeechColor	101
 }
 
 Item
@@ -33776,7 +33776,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	901
+	SpeechColor	97
 }
 
 Item
@@ -34125,9 +34125,9 @@
 	Serial	0x1006d7
 	ObjType	0x5
 	Graphic	0x5
-	X	5171
-	Y	3202
-	Z	80
+	X	5172
+	Y	3203
+	Z	81
 	Facing	3
 	Revision	0
 	Realm	britannia
@@ -34152,7 +34152,7 @@
 	CreatedAt	0
 	AR	11
 	script	animal
-	SpeechColor	7
+	SpeechColor	63
 }
 
 NPC deer
@@ -34164,6 +34164,7 @@
 	X	5136
 	Y	3231
 	Z	95
+	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1050336
@@ -34689,8 +34690,8 @@
 	CProp	MerchantType sstable
 	CProp	MyGold i580501
 	CProp	Pets a0:
-	CProp	counter i521
-	CProp	countercheck i25190405
+	CProp	counter i522
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	restockserial i1793081513
 	TrueColor	0x83f8
@@ -34709,7 +34710,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	34
+	SpeechColor	63
 }
 
 Item
@@ -35455,8 +35456,8 @@
 	CProp	Graphic i400
 	CProp	MerchantType sstable
 	CProp	MyGold i1000
-	CProp	counter i433
-	CProp	countercheck i25190405
+	CProp	counter i434
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	restockserial i1793081523
 	TrueColor	0x83f8
@@ -35547,8 +35548,8 @@
 	CProp	Graphic i400
 	CProp	MerchantType sstable
 	CProp	MyGold i1000
-	CProp	counter i433
-	CProp	countercheck i25190405
+	CProp	counter i434
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	restockserial i1793081521
 	TrueColor	0x83f8
@@ -35568,7 +35569,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	37
+	SpeechColor	71
 }
 
 Item
@@ -35639,8 +35640,8 @@
 	CProp	Graphic i400
 	CProp	MerchantType sstable
 	CProp	MyGold i1000
-	CProp	counter i433
-	CProp	countercheck i25190405
+	CProp	counter i434
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	restockserial i1793081524
 	TrueColor	0x83f8
@@ -35660,7 +35661,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	71
+	SpeechColor	9
 }
 
 Item
@@ -36573,7 +36574,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	192
+	SpeechColor	160
 }
 
 Item
@@ -38564,7 +38565,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	32
+	SpeechColor	707
 }
 
 Item
@@ -38635,7 +38636,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	97
+	SpeechColor	13
 }
 
 Item
@@ -38723,7 +38724,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	438
+	SpeechColor	903
 }
 
 Item
@@ -38985,8 +38986,8 @@
 	CProp	MerchantType sstable
 	CProp	MyGold i20023
 	CProp	Pets a0:
-	CProp	counter i86
-	CProp	countercheck i25190405
+	CProp	counter i87
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	mypen s10
 	CProp	restockserial i1793081520
@@ -39007,7 +39008,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	648
+	SpeechColor	228
 }
 
 Item
@@ -39852,7 +39853,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	32
+	SpeechColor	19
 }
 
 Item
@@ -39939,7 +39940,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	558
+	SpeechColor	7
 }
 
 Item
@@ -40010,7 +40011,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	196
+	SpeechColor	558
 }
 
 Item
@@ -40565,7 +40566,7 @@
 	CreatedAt	0
 	AR	30
 	script	battleMage
-	SpeechColor	97
+	SpeechColor	348
 }
 
 Item
@@ -40607,8 +40608,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	662
-	Y	2185
+	X	661
+	Y	2186
 	Z	0
 	Facing	1
 	Revision	0
@@ -40634,7 +40635,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	707
+	SpeechColor	202
 	RunSpeed	500
 }
 
@@ -40677,7 +40678,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1143
+	X	1142
 	Y	1689
 	Z	0
 	Facing	1
@@ -40704,7 +40705,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	228
+	SpeechColor	648
 	RunSpeed	500
 }
 
@@ -40748,7 +40749,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1337
-	Y	1809
+	Y	1807
 	Z	0
 	Facing	4
 	Revision	0
@@ -40774,7 +40775,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	904
+	SpeechColor	202
 	RunSpeed	500
 }
 
@@ -40818,7 +40819,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1531
-	Y	1432
+	Y	1430
 	Z	15
 	Facing	4
 	Revision	0
@@ -40844,7 +40845,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	404
+	SpeechColor	63
 	RunSpeed	500
 }
 
@@ -40931,7 +40932,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	160
+	SpeechColor	578
 	RunSpeed	500
 }
 
@@ -40992,7 +40993,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	4401
-	Y	1133
+	Y	1135
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -41017,7 +41018,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	7
+	SpeechColor	53
 	RunSpeed	500
 }
 
@@ -41087,7 +41088,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	196
+	SpeechColor	228
 	RunSpeed	500
 }
 
@@ -41131,7 +41132,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	1997
-	Y	2838
+	Y	2840
 	Z	15
 	Revision	0
 	Realm	britannia
@@ -41156,7 +41157,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	9
+	SpeechColor	558
 	RunSpeed	500
 }
 
@@ -41199,8 +41200,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2428
-	Y	396
+	X	2430
+	Y	398
 	Z	15
 	Facing	7
 	Revision	0
@@ -41226,7 +41227,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	362
+	SpeechColor	80
 	RunSpeed	500
 }
 
@@ -41269,8 +41270,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	3675
-	Y	2130
+	X	3676
+	Y	2129
 	Z	20
 	Facing	6
 	Revision	0
@@ -41299,7 +41300,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	903
+	SpeechColor	7
 	RunSpeed	500
 }
 
@@ -41359,8 +41360,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	3673
-	Y	2185
+	X	3674
+	Y	2184
 	Z	20
 	Facing	5
 	Revision	0
@@ -41386,7 +41387,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	101
+	SpeechColor	52
 	RunSpeed	500
 }
 
@@ -41455,7 +41456,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	18
+	SpeechColor	707
 	RunSpeed	500
 }
 
@@ -41499,7 +41500,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	3703
-	Y	1376
+	Y	1374
 	Z	0
 	Facing	4
 	Revision	0
@@ -41525,7 +41526,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	17
+	SpeechColor	97
 	RunSpeed	500
 }
 
@@ -41569,7 +41570,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	1335
-	Y	1863
+	Y	1864
 	Z	0
 	Facing	7
 	Revision	0
@@ -41595,7 +41596,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	9
+	SpeechColor	37
 	RunSpeed	500
 }
 
@@ -41638,7 +41639,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1384
+	X	1382
 	Y	3694
 	Z	0
 	Facing	2
@@ -41665,7 +41666,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	101
+	SpeechColor	12
 	RunSpeed	500
 }
 
@@ -41708,9 +41709,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	5217
-	Y	4007
-	Z	44
+	X	5216
+	Y	4008
+	Z	37
 	Facing	1
 	Revision	0
 	Realm	britannia
@@ -41735,7 +41736,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	13
+	SpeechColor	97
 	RunSpeed	500
 }
 
@@ -41795,9 +41796,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	3786
-	Y	2125
-	Z	23
+	X	3785
+	Y	2124
+	Z	22
 	Facing	3
 	Revision	0
 	Realm	britannia
@@ -41822,7 +41823,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	207
+	SpeechColor	12
 	RunSpeed	500
 }
 
@@ -41883,7 +41884,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	3733
-	Y	1386
+	Y	1384
 	Z	0
 	Facing	4
 	Revision	0
@@ -41909,7 +41910,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	87
+	SpeechColor	71
 	RunSpeed	500
 }
 
@@ -41952,7 +41953,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	3010
+	X	3012
 	Y	3428
 	Z	15
 	Facing	6
@@ -41979,7 +41980,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	578
+	SpeechColor	160
 	RunSpeed	500
 }
 
@@ -42022,8 +42023,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	3667
-	Y	2588
+	X	3669
+	Y	2586
 	Z	0
 	Facing	5
 	Revision	0
@@ -42049,7 +42050,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	34
+	SpeechColor	71
 	RunSpeed	500
 }
 
@@ -42119,7 +42120,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	537
+	SpeechColor	228
 	RunSpeed	500
 }
 
@@ -42162,8 +42163,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1383
-	Y	3760
+	X	1382
+	Y	3759
 	Z	0
 	Facing	2
 	Revision	0
@@ -42189,7 +42190,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	193
+	SpeechColor	52
 	RunSpeed	500
 }
 
@@ -42233,8 +42234,8 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	2038
-	Y	2728
-	Z	11
+	Y	2730
+	Z	20
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711512
@@ -42258,7 +42259,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	13
+	SpeechColor	348
 	RunSpeed	500
 }
 
@@ -42302,8 +42303,8 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1995
-	Y	2785
-	Z	16
+	Y	2787
+	Z	15
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711513
@@ -42327,7 +42328,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	150
+	SpeechColor	32
 	RunSpeed	500
 }
 
@@ -42387,8 +42388,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	5272
-	Y	4005
+	X	5273
+	Y	4004
 	Z	40
 	Facing	4
 	Revision	0
@@ -42414,7 +42415,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	150
+	SpeechColor	17
 	RunSpeed	500
 }
 
@@ -42457,9 +42458,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	2881
-	Y	838
-	Z	2
+	X	2879
+	Y	840
+	Z	1
 	Facing	1
 	Revision	0
 	Realm	britannia
@@ -42484,7 +42485,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	404
+	SpeechColor	12
 	RunSpeed	500
 }
 
@@ -42527,7 +42528,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1271
+	X	1270
 	Y	1755
 	Z	0
 	Facing	3
@@ -42554,7 +42555,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	14
+	SpeechColor	17
 	RunSpeed	500
 }
 
@@ -42597,9 +42598,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1620
-	Y	1594
-	Z	5
+	X	1619
+	Y	1593
+	Z	3
 	Facing	3
 	Revision	0
 	Realm	britannia
@@ -42624,7 +42625,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	32
+	SpeechColor	63
 	RunSpeed	500
 }
 
@@ -42667,8 +42668,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2825
-	Y	834
+	X	2824
+	Y	833
 	Z	8
 	Facing	3
 	Revision	0
@@ -42694,7 +42695,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	243
+	SpeechColor	19
 	RunSpeed	500
 }
 
@@ -42738,7 +42739,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	2119
-	Y	2826
+	Y	2828
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -42763,7 +42764,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	150
+	SpeechColor	340
 	RunSpeed	500
 }
 
@@ -42807,8 +42808,8 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1491
-	Y	3812
-	Z	-2
+	Y	3811
+	Z	1
 	Facing	4
 	Revision	0
 	Realm	britannia
@@ -42833,7 +42834,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	87
+	SpeechColor	18
 	RunSpeed	500
 }
 
@@ -42903,7 +42904,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	42
+	SpeechColor	34
 	RunSpeed	500
 }
 
@@ -42946,7 +42947,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	518
+	X	520
 	Y	1015
 	Z	0
 	Facing	6
@@ -42973,7 +42974,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	101
+	SpeechColor	48
 	RunSpeed	500
 }
 
@@ -43016,8 +43017,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1320
-	Y	3694
+	X	1322
+	Y	3692
 	Z	0
 	Facing	5
 	Revision	0
@@ -43043,7 +43044,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	340
+	SpeechColor	37
 	RunSpeed	500
 }
 
@@ -43087,7 +43088,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1377
-	Y	3864
+	Y	3866
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -43173,7 +43174,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1562
-	Y	1694
+	Y	1693
 	Z	30
 	Facing	4
 	Revision	0
@@ -43199,7 +43200,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	12
+	SpeechColor	648
 	RunSpeed	500
 }
 
@@ -43243,7 +43244,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	2420
-	Y	463
+	Y	461
 	Z	15
 	Facing	4
 	Revision	0
@@ -43269,7 +43270,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	904
+	SpeechColor	207
 	RunSpeed	500
 }
 
@@ -43313,7 +43314,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	2545
-	Y	633
+	Y	632
 	Z	0
 	Facing	4
 	Revision	0
@@ -43339,7 +43340,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	7
+	SpeechColor	97
 	RunSpeed	500
 }
 
@@ -43382,9 +43383,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	5658
-	Y	3185
-	Z	-9
+	X	5660
+	Y	3187
+	Z	2
 	Facing	7
 	Revision	0
 	Realm	britannia
@@ -43409,7 +43410,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	63
+	SpeechColor	97
 	RunSpeed	500
 }
 
@@ -43453,7 +43454,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1433
-	Y	3750
+	Y	3748
 	Z	0
 	Facing	4
 	Revision	0
@@ -43479,7 +43480,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	9
+	SpeechColor	37
 	RunSpeed	500
 }
 
@@ -43540,8 +43541,8 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1874
-	Y	2832
-	Z	17
+	Y	2831
+	Z	13
 	Facing	5
 	Revision	0
 	Realm	britannia
@@ -43566,7 +43567,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	53
+	SpeechColor	160
 	RunSpeed	500
 }
 
@@ -43609,7 +43610,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2887
+	X	2885
 	Y	728
 	Z	0
 	Facing	2
@@ -43636,7 +43637,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	97
+	SpeechColor	196
 	RunSpeed	500
 }
 
@@ -43680,8 +43681,8 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	2882
-	Y	780
-	Z	12
+	Y	779
+	Z	17
 	Facing	4
 	Revision	0
 	Realm	britannia
@@ -43706,7 +43707,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	18
+	SpeechColor	7
 	RunSpeed	500
 }
 
@@ -43750,8 +43751,8 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	5838
-	Y	3310
-	Z	-2
+	Y	3312
+	Z	13
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711533
@@ -43775,7 +43776,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	9
+	SpeechColor	442
 	RunSpeed	500
 }
 
@@ -43818,8 +43819,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1269
-	Y	1808
+	X	1271
+	Y	1806
 	Z	0
 	Facing	5
 	Revision	0
@@ -43845,7 +43846,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	904
+	SpeechColor	192
 	RunSpeed	500
 }
 
@@ -43906,7 +43907,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1506
-	Y	1587
+	Y	1586
 	Z	10
 	Facing	5
 	Revision	0
@@ -43932,7 +43933,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	32
+	SpeechColor	97
 	RunSpeed	500
 }
 
@@ -43975,8 +43976,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1480
-	Y	3862
+	X	1482
+	Y	3860
 	Z	0
 	Facing	5
 	Revision	0
@@ -44002,7 +44003,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	63
+	SpeechColor	97
 	RunSpeed	500
 }
 
@@ -44045,9 +44046,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	2823
-	Y	954
-	Z	12
+	X	2822
+	Y	955
+	Z	7
 	Facing	1
 	Revision	0
 	Realm	britannia
@@ -44072,7 +44073,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	48
+	SpeechColor	438
 	RunSpeed	500
 }
 
@@ -44132,7 +44133,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	3699
+	X	3700
 	Y	1094
 	Z	0
 	Facing	5
@@ -44159,7 +44160,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	442
+	SpeechColor	707
 	RunSpeed	500
 }
 
@@ -44202,8 +44203,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1211
-	Y	1573
+	X	1212
+	Y	1574
 	Z	0
 	Facing	6
 	Revision	0
@@ -44229,7 +44230,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	18
+	SpeechColor	228
 	RunSpeed	500
 }
 
@@ -44273,7 +44274,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	1155
-	Y	1574
+	Y	1573
 	Z	0
 	Facing	5
 	Revision	0
@@ -44299,7 +44300,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	207
+	SpeechColor	904
 	RunSpeed	500
 }
 
@@ -44343,8 +44344,8 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	1685
-	Y	1535
-	Z	39
+	Y	1534
+	Z	38
 	Facing	4
 	Revision	0
 	Realm	britannia
@@ -44369,7 +44370,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	7
+	SpeechColor	404
 	RunSpeed	500
 }
 
@@ -44412,7 +44413,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1933
+	X	1935
 	Y	2903
 	Z	12
 	Facing	6
@@ -44439,7 +44440,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	63
+	SpeechColor	160
 	RunSpeed	500
 }
 
@@ -44499,8 +44500,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2228
-	Y	1148
+	X	2230
+	Y	1146
 	Z	0
 	Facing	5
 	Revision	0
@@ -44526,7 +44527,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	160
+	SpeechColor	7
 	RunSpeed	500
 }
 
@@ -44569,7 +44570,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2233
+	X	2232
 	Y	1210
 	Z	0
 	Facing	2
@@ -44596,7 +44597,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	578
+	SpeechColor	196
 	RunSpeed	500
 }
 
@@ -44640,7 +44641,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	2888
-	Y	3492
+	Y	3490
 	Z	10
 	Facing	4
 	Revision	0
@@ -44666,7 +44667,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	18
+	SpeechColor	9
 	RunSpeed	500
 }
 
@@ -44735,7 +44736,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	572
+	SpeechColor	362
 	RunSpeed	500
 }
 
@@ -44778,9 +44779,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1659
-	Y	1700
-	Z	10
+	X	1661
+	Y	1702
+	Z	11
 	Facing	7
 	Revision	0
 	Realm	britannia
@@ -44805,7 +44806,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	648
+	SpeechColor	903
 	RunSpeed	500
 }
 
@@ -44848,8 +44849,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1110
-	Y	1807
+	X	1109
+	Y	1806
 	Z	0
 	Facing	3
 	Revision	0
@@ -44875,7 +44876,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	9
+	SpeechColor	101
 	RunSpeed	500
 }
 
@@ -44918,8 +44919,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2486
-	Y	402
+	X	2487
+	Y	401
 	Z	15
 	Facing	5
 	Revision	0
@@ -44945,7 +44946,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	54
+	SpeechColor	18
 	RunSpeed	500
 }
 
@@ -44989,7 +44990,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	3671
-	Y	2075
+	Y	2074
 	Z	22
 	Facing	5
 	Revision	0
@@ -45015,7 +45016,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	13
+	SpeechColor	17
 	RunSpeed	500
 }
 
@@ -45076,7 +45077,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	1216
-	Y	1746
+	Y	1748
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -45101,7 +45102,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	87
+	SpeechColor	9
 	RunSpeed	500
 }
 
@@ -45144,7 +45145,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2819
+	X	2820
 	Y	662
 	Z	0
 	Facing	6
@@ -45171,7 +45172,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	71
+	SpeechColor	101
 	RunSpeed	500
 }
 
@@ -45214,7 +45215,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	3697
+	X	3698
 	Y	1257
 	Z	20
 	Facing	5
@@ -45241,7 +45242,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	101
+	SpeechColor	13
 	RunSpeed	500
 }
 
@@ -45285,7 +45286,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	5712
-	Y	3253
+	Y	3252
 	Z	-15
 	Facing	5
 	Revision	0
@@ -45311,7 +45312,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	32
+	SpeechColor	207
 	RunSpeed	500
 }
 
@@ -45371,8 +45372,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2960
-	Y	3427
+	X	2959
+	Y	3426
 	Z	15
 	Facing	3
 	Revision	0
@@ -45398,7 +45399,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	48
+	SpeechColor	87
 	RunSpeed	500
 }
 
@@ -45441,8 +45442,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	3702
-	Y	1317
+	X	3701
+	Y	1318
 	Z	0
 	Facing	1
 	Revision	0
@@ -45468,7 +45469,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	80
+	SpeechColor	578
 	RunSpeed	500
 }
 
@@ -45511,8 +45512,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1504
-	Y	1518
+	X	1506
+	Y	1520
 	Z	40
 	Facing	7
 	Revision	0
@@ -45538,7 +45539,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	101
+	SpeechColor	34
 	RunSpeed	500
 }
 
@@ -45607,7 +45608,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	17
+	SpeechColor	537
 	RunSpeed	500
 }
 
@@ -45677,7 +45678,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	97
+	SpeechColor	193
 	RunSpeed	500
 }
 
@@ -45720,7 +45721,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1621
+	X	1623
 	Y	1755
 	Z	60
 	Facing	6
@@ -45747,7 +45748,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	207
+	SpeechColor	13
 	RunSpeed	500
 }
 
@@ -45790,7 +45791,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1826
+	X	1825
 	Y	2667
 	Z	0
 	Facing	3
@@ -45817,7 +45818,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	202
+	SpeechColor	150
 	RunSpeed	500
 }
 
@@ -45860,8 +45861,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	3523
-	Y	1203
+	X	3521
+	Y	1201
 	Z	0
 	Facing	3
 	Revision	0
@@ -45887,7 +45888,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	101
+	SpeechColor	150
 	RunSpeed	500
 }
 
@@ -45930,7 +45931,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	3679
+	X	3680
 	Y	2541
 	Z	0
 	Facing	7
@@ -45957,7 +45958,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	572
+	SpeechColor	404
 	RunSpeed	500
 }
 
@@ -46000,9 +46001,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	3684
+	X	3682
 	Y	2646
-	Z	1
+	Z	0
 	Facing	2
 	Revision	0
 	Realm	britannia
@@ -46027,7 +46028,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	63
+	SpeechColor	14
 	RunSpeed	500
 }
 
@@ -46070,8 +46071,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	564
-	Y	2126
+	X	563
+	Y	2127
 	Z	0
 	Facing	1
 	Revision	0
@@ -46097,7 +46098,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	572
+	SpeechColor	32
 	RunSpeed	500
 }
 
@@ -46140,9 +46141,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1283
-	Y	1573
-	Z	14
+	X	1281
+	Y	1575
+	Z	5
 	Facing	1
 	Revision	0
 	Realm	britannia
@@ -46167,7 +46168,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	707
+	SpeechColor	243
 	RunSpeed	500
 }
 
@@ -46211,7 +46212,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	2478
-	Y	509
+	Y	511
 	Z	15
 	Revision	0
 	Realm	britannia
@@ -46236,7 +46237,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	36
+	SpeechColor	150
 	RunSpeed	500
 }
 
@@ -46280,7 +46281,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	2997
-	Y	839
+	Y	837
 	Z	0
 	Facing	4
 	Revision	0
@@ -46306,7 +46307,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	207
+	SpeechColor	87
 	RunSpeed	500
 }
 
@@ -46349,7 +46350,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	613
+	X	615
 	Y	822
 	Z	0
 	Facing	6
@@ -46376,7 +46377,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	243
+	SpeechColor	42
 	RunSpeed	500
 }
 
@@ -46437,7 +46438,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1350
-	Y	3868
+	Y	3870
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -46462,7 +46463,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	901
+	SpeechColor	101
 	RunSpeed	500
 }
 
@@ -46505,8 +46506,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	3580
-	Y	1210
+	X	3579
+	Y	1209
 	Z	0
 	Facing	2
 	Revision	0
@@ -46532,7 +46533,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	12
+	SpeechColor	340
 	RunSpeed	500
 }
 
@@ -46592,9 +46593,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	5664
-	Y	3143
-	Z	12
+	X	5665
+	Y	3144
+	Z	-2
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711572
@@ -46618,7 +46619,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	700
+	SpeechColor	71
 	RunSpeed	500
 }
 
@@ -46661,8 +46662,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1156
-	Y	1799
+	X	1157
+	Y	1800
 	Z	0
 	Facing	7
 	Revision	0
@@ -46688,7 +46689,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	17
+	SpeechColor	12
 	RunSpeed	500
 }
 
@@ -46731,7 +46732,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	2421
+	X	2420
 	Y	669
 	Z	0
 	Facing	2
@@ -46758,7 +46759,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	196
+	SpeechColor	904
 	RunSpeed	500
 }
 
@@ -46801,8 +46802,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1273
-	Y	1862
+	X	1274
+	Y	1861
 	Z	0
 	Facing	5
 	Revision	0
@@ -46828,7 +46829,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	80
+	SpeechColor	7
 	RunSpeed	500
 }
 
@@ -46889,7 +46890,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	1621
-	Y	1645
+	Y	1644
 	Z	35
 	Facing	3
 	Revision	0
@@ -46915,7 +46916,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	97
+	SpeechColor	63
 	RunSpeed	500
 }
 
@@ -46958,7 +46959,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2115
+	X	2114
 	Y	2722
 	Z	10
 	Facing	2
@@ -46985,7 +46986,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	19
+	SpeechColor	9
 	RunSpeed	500
 }
 
@@ -47028,8 +47029,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	2589
-	Y	628
+	X	2590
+	Y	629
 	Z	0
 	Facing	6
 	Revision	0
@@ -47055,7 +47056,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	97
+	SpeechColor	53
 	RunSpeed	500
 }
 
@@ -47099,7 +47100,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	3519
-	Y	1104
+	Y	1102
 	Z	20
 	Facing	4
 	Revision	0
@@ -47125,7 +47126,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	52
+	SpeechColor	97
 	RunSpeed	500
 }
 
@@ -47185,7 +47186,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1440
+	X	1441
 	Y	1695
 	Z	0
 	Facing	7
@@ -47212,7 +47213,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	903
+	SpeechColor	18
 	RunSpeed	500
 }
 
@@ -47272,8 +47273,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1740
-	Y	1531
+	X	1741
+	Y	1532
 	Z	4
 	Facing	7
 	Revision	0
@@ -47299,7 +47300,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	63
+	SpeechColor	9
 	RunSpeed	500
 }
 
@@ -47342,8 +47343,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	3734
-	Y	2137
+	X	3733
+	Y	2136
 	Z	20
 	Facing	3
 	Revision	0
@@ -47369,7 +47370,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	558
+	SpeechColor	904
 	RunSpeed	500
 }
 
@@ -47412,9 +47413,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1879
+	X	1877
 	Y	2664
-	Z	-5
+	Z	-9
 	Facing	2
 	Revision	0
 	Realm	britannia
@@ -47439,7 +47440,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	901
+	SpeechColor	32
 	RunSpeed	500
 }
 
@@ -47509,7 +47510,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	52
+	SpeechColor	63
 	RunSpeed	500
 }
 
@@ -47569,8 +47570,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1391
-	Y	1752
+	X	1390
+	Y	1751
 	Z	0
 	Facing	3
 	Revision	0
@@ -47596,7 +47597,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	13
+	SpeechColor	48
 	RunSpeed	500
 }
 
@@ -47666,7 +47667,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	192
+	SpeechColor	442
 	RunSpeed	500
 }
 
@@ -47710,7 +47711,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	3639
-	Y	1263
+	Y	1265
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -47735,7 +47736,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	63
+	SpeechColor	18
 	RunSpeed	500
 }
 
@@ -47795,7 +47796,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	2957
+	X	2956
 	Y	831
 	Z	0
 	Facing	2
@@ -47822,7 +47823,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	12
+	SpeechColor	207
 	RunSpeed	500
 }
 
@@ -47892,7 +47893,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	54
+	SpeechColor	7
 	RunSpeed	500
 }
 
@@ -47935,7 +47936,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	633
+	X	631
 	Y	2197
 	Z	0
 	Facing	2
@@ -47962,7 +47963,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	700
+	SpeechColor	63
 	RunSpeed	500
 }
 
@@ -48022,8 +48023,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1272
-	Y	1627
+	X	1274
+	Y	1625
 	Z	0
 	Facing	5
 	Revision	0
@@ -48049,7 +48050,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	243
+	SpeechColor	160
 	RunSpeed	500
 }
 
@@ -48092,7 +48093,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	3617
+	X	3619
 	Y	2656
 	Z	-2
 	Facing	6
@@ -48119,7 +48120,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	438
+	SpeechColor	578
 	RunSpeed	500
 }
 
@@ -48162,9 +48163,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	3735
-	Y	2525
-	Z	30
+	X	3733
+	Y	2523
+	Z	28
 	Facing	3
 	Revision	0
 	Realm	britannia
@@ -48189,7 +48190,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	97
+	SpeechColor	18
 	RunSpeed	500
 }
 
@@ -48232,9 +48233,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	5222
-	Y	3951
-	Z	40
+	X	5221
+	Y	3952
+	Z	41
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711594
@@ -48258,7 +48259,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	48
+	SpeechColor	572
 	RunSpeed	500
 }
 
@@ -48327,7 +48328,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	12
+	SpeechColor	648
 	RunSpeed	500
 }
 
@@ -48370,9 +48371,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1499
-	Y	3759
-	Z	0
+	X	1497
+	Y	3757
+	Z	-2
 	Facing	3
 	Revision	0
 	Realm	britannia
@@ -48397,7 +48398,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	707
+	SpeechColor	9
 	RunSpeed	500
 }
 
@@ -48441,7 +48442,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	1435
-	Y	1586
+	Y	1587
 	Z	20
 	Facing	7
 	Revision	0
@@ -48467,7 +48468,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	192
+	SpeechColor	54
 	RunSpeed	500
 }
 
@@ -48510,8 +48511,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	3610
-	Y	2526
+	X	3611
+	Y	2525
 	Z	0
 	Facing	5
 	Revision	0
@@ -48537,7 +48538,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	572
+	SpeechColor	13
 	RunSpeed	500
 }
 
@@ -48597,9 +48598,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	5781
-	Y	3141
-	Z	1
+	X	5782
+	Y	3140
+	Z	0
 	Facing	6
 	Revision	0
 	Realm	britannia
@@ -48624,7 +48625,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	36
+	SpeechColor	87
 	RunSpeed	500
 }
 
@@ -48684,8 +48685,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	2480
-	Y	572
+	X	2482
+	Y	570
 	Z	5
 	Facing	5
 	Revision	0
@@ -48711,7 +48712,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	63
+	SpeechColor	71
 	RunSpeed	500
 }
 
@@ -48771,8 +48772,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1163
-	Y	1631
+	X	1162
+	Y	1632
 	Z	0
 	Facing	1
 	Revision	0
@@ -48798,7 +48799,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	53
+	SpeechColor	101
 	RunSpeed	500
 }
 
@@ -48842,7 +48843,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	2973
-	Y	890
+	Y	891
 	Z	0
 	Facing	1
 	Revision	0
@@ -48868,7 +48869,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	243
+	SpeechColor	32
 	RunSpeed	500
 }
 
@@ -48912,7 +48913,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	3615
-	Y	1317
+	Y	1315
 	Z	0
 	Facing	4
 	Revision	0
@@ -48938,7 +48939,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	98
+	SpeechColor	48
 	RunSpeed	500
 }
 
@@ -49008,7 +49009,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	7
+	SpeechColor	80
 	RunSpeed	500
 }
 
@@ -49068,9 +49069,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	5718
-	Y	3308
-	Z	14
+	X	5720
+	Y	3306
+	Z	15
 	Facing	5
 	Revision	0
 	Realm	britannia
@@ -49095,7 +49096,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	7
+	SpeechColor	101
 	RunSpeed	500
 }
 
@@ -49139,7 +49140,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1938
-	Y	2778
+	Y	2777
 	Z	0
 	Facing	4
 	Revision	0
@@ -49165,7 +49166,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	207
+	SpeechColor	17
 	RunSpeed	500
 }
 
@@ -49252,7 +49253,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	348
+	SpeechColor	97
 	RunSpeed	500
 }
 
@@ -49295,9 +49296,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	5813
-	Y	3187
-	Z	1
+	X	5814
+	Y	3186
+	Z	-1
 	Facing	6
 	Revision	0
 	Realm	britannia
@@ -49322,7 +49323,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	87
+	SpeechColor	207
 	RunSpeed	500
 }
 
@@ -49366,7 +49367,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	1675
-	Y	1585
+	Y	1586
 	Z	7
 	Revision	0
 	Realm	britannia
@@ -49391,7 +49392,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	707
+	SpeechColor	202
 	RunSpeed	500
 }
 
@@ -49434,8 +49435,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	3620
-	Y	2590
+	X	3619
+	Y	2591
 	Z	0
 	Facing	2
 	Revision	0
@@ -49461,7 +49462,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	87
+	SpeechColor	101
 	RunSpeed	500
 }
 
@@ -49505,7 +49506,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	3696
-	Y	1209
+	Y	1208
 	Z	0
 	Facing	3
 	Revision	0
@@ -49531,7 +49532,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	700
+	SpeechColor	572
 	RunSpeed	500
 }
 
@@ -49574,7 +49575,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	5151
+	X	5153
 	Y	3971
 	Z	54
 	Facing	6
@@ -49601,7 +49602,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	202
+	SpeechColor	63
 	RunSpeed	500
 }
 
@@ -49688,7 +49689,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	193
+	SpeechColor	572
 	RunSpeed	500
 }
 
@@ -49731,7 +49732,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2943
+	X	2945
 	Y	890
 	Z	0
 	Facing	6
@@ -49758,7 +49759,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	150
+	SpeechColor	707
 	RunSpeed	500
 }
 
@@ -49828,7 +49829,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	9
+	SpeechColor	36
 	RunSpeed	500
 }
 
@@ -49871,8 +49872,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1506
-	Y	1708
+	X	1505
+	Y	1707
 	Z	20
 	Facing	2
 	Revision	0
@@ -49898,7 +49899,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	98
+	SpeechColor	207
 	RunSpeed	500
 }
 
@@ -49968,7 +49969,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	32
+	SpeechColor	243
 	RunSpeed	500
 }
 
@@ -50011,9 +50012,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	2418
+	X	2416
 	Y	511
-	Z	12
+	Z	14
 	Facing	2
 	Revision	0
 	Realm	britannia
@@ -50038,7 +50039,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	98
+	SpeechColor	901
 	RunSpeed	500
 }
 
@@ -50081,7 +50082,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	2880
+	X	2882
 	Y	659
 	Z	0
 	Facing	6
@@ -50108,7 +50109,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	37
+	SpeechColor	12
 	RunSpeed	500
 }
 
@@ -50151,8 +50152,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	618
-	Y	880
+	X	620
+	Y	882
 	Z	0
 	Facing	7
 	Revision	0
@@ -50178,7 +50179,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	53
+	SpeechColor	700
 	RunSpeed	500
 }
 
@@ -50222,8 +50223,8 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	628
-	Y	2261
-	Z	-2
+	Y	2259
+	Z	0
 	Facing	4
 	Revision	0
 	Realm	britannia
@@ -50248,7 +50249,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	903
+	SpeechColor	17
 	RunSpeed	500
 }
 
@@ -50291,8 +50292,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2048
-	Y	2845
+	X	2047
+	Y	2844
 	Z	0
 	Facing	3
 	Revision	0
@@ -50318,7 +50319,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	42
+	SpeechColor	196
 	RunSpeed	500
 }
 
@@ -50361,8 +50362,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	2863
-	Y	896
+	X	2864
+	Y	897
 	Z	0
 	Facing	7
 	Revision	0
@@ -50388,7 +50389,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	9
+	SpeechColor	80
 	RunSpeed	500
 }
 
@@ -50431,9 +50432,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	5823
+	X	5821
 	Y	3147
-	Z	2
+	Z	1
 	Facing	2
 	Revision	0
 	Realm	britannia
@@ -50458,7 +50459,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	36
+	SpeechColor	97
 	RunSpeed	500
 }
 
@@ -50501,8 +50502,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	5838
-	Y	3256
+	X	5836
+	Y	3254
 	Z	2
 	Facing	3
 	Revision	0
@@ -50528,7 +50529,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	150
+	SpeechColor	19
 	RunSpeed	500
 }
 
@@ -50571,7 +50572,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	2819
+	X	2818
 	Y	717
 	Z	0
 	Facing	2
@@ -50598,7 +50599,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	71
+	SpeechColor	97
 	RunSpeed	500
 }
 
@@ -50641,7 +50642,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1389
+	X	1390
 	Y	1577
 	Z	30
 	Facing	7
@@ -50668,7 +50669,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	63
+	SpeechColor	52
 	RunSpeed	500
 }
 
@@ -50711,7 +50712,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1563
+	X	1561
 	Y	1640
 	Z	15
 	Facing	2
@@ -50738,7 +50739,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	707
+	SpeechColor	903
 	RunSpeed	500
 }
 
@@ -50808,7 +50809,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	12
+	SpeechColor	63
 	RunSpeed	500
 }
 
@@ -50851,9 +50852,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	2935
-	Y	663
-	Z	-1
+	X	2933
+	Y	661
+	Z	5
 	Facing	3
 	Revision	0
 	Realm	britannia
@@ -50878,7 +50879,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	160
+	SpeechColor	558
 	RunSpeed	500
 }
 
@@ -50938,8 +50939,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	571
-	Y	2254
+	X	570
+	Y	2253
 	Z	0
 	Facing	3
 	Revision	0
@@ -51009,7 +51010,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	1883
-	Y	2720
+	Y	2722
 	Z	20
 	Revision	0
 	Realm	britannia
@@ -51034,7 +51035,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	348
+	SpeechColor	52
 	RunSpeed	500
 }
 
@@ -51077,8 +51078,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1343
-	Y	3810
+	X	1341
+	Y	3812
 	Z	0
 	Facing	1
 	Revision	0
@@ -51104,7 +51105,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	207
+	SpeechColor	13
 	RunSpeed	500
 }
 
@@ -51164,9 +51165,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1677
+	X	1675
 	Y	1655
-	Z	15
+	Z	13
 	Facing	2
 	Revision	0
 	Realm	britannia
@@ -51191,7 +51192,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	243
+	SpeechColor	192
 	RunSpeed	500
 }
 
@@ -51234,8 +51235,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2109
-	Y	2674
+	X	2111
+	Y	2672
 	Z	0
 	Facing	5
 	Revision	0
@@ -51261,7 +51262,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	9
+	SpeechColor	63
 	RunSpeed	500
 }
 
@@ -51305,7 +51306,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	2499
-	Y	623
+	Y	624
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -51330,7 +51331,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	8
+	SpeechColor	12
 	RunSpeed	500
 }
 
@@ -51374,7 +51375,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1566
-	Y	1760
+	Y	1761
 	Z	10
 	Revision	0
 	Realm	britannia
@@ -51399,7 +51400,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	192
+	SpeechColor	54
 	RunSpeed	500
 }
 
@@ -51459,8 +51460,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	519
-	Y	956
+	X	521
+	Y	958
 	Z	0
 	Facing	7
 	Revision	0
@@ -51486,7 +51487,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	53
+	SpeechColor	700
 	RunSpeed	500
 }
 
@@ -51546,7 +51547,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1326
+	X	1325
 	Y	3758
 	Z	0
 	Facing	2
@@ -51573,7 +51574,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	80
+	SpeechColor	243
 	RunSpeed	500
 }
 
@@ -51617,7 +51618,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1401
-	Y	1859
+	Y	1860
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -51642,7 +51643,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	7
+	SpeechColor	438
 	RunSpeed	500
 }
 
@@ -51686,7 +51687,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	3673
-	Y	2243
+	Y	2241
 	Z	20
 	Facing	4
 	Revision	0
@@ -51712,7 +51713,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	8
+	SpeechColor	97
 	RunSpeed	500
 }
 
@@ -51755,8 +51756,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	3739
-	Y	2195
+	X	3737
+	Y	2193
 	Z	20
 	Facing	3
 	Revision	0
@@ -51782,7 +51783,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	7
+	SpeechColor	48
 	RunSpeed	500
 }
 
@@ -51852,7 +51853,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	8
+	SpeechColor	12
 	RunSpeed	500
 }
 
@@ -51879,7 +51880,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	4466
-	Y	1128
+	Y	1126
 	Z	0
 	Facing	4
 	Revision	0
@@ -51905,7 +51906,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	202
+	SpeechColor	707
 	RunSpeed	500
 }
 
@@ -51948,8 +51949,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1106
-	Y	1631
+	X	1104
+	Y	1629
 	Z	0
 	Facing	3
 	Revision	0
@@ -51975,7 +51976,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	700
+	SpeechColor	192
 	RunSpeed	500
 }
 
@@ -52018,7 +52019,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1330
+	X	1328
 	Y	1630
 	Z	50
 	Facing	2
@@ -52045,7 +52046,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	80
+	SpeechColor	572
 	RunSpeed	500
 }
 
@@ -52089,7 +52090,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1442
-	Y	3864
+	Y	3865
 	Z	0
 	Facing	7
 	Revision	0
@@ -52115,7 +52116,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	707
+	SpeechColor	36
 	RunSpeed	500
 }
 
@@ -52142,8 +52143,8 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	2055
-	Y	2885
-	Z	-1
+	Y	2883
+	Z	1
 	Facing	4
 	Revision	0
 	Realm	britannia
@@ -52168,7 +52169,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	101
+	SpeechColor	63
 	RunSpeed	500
 }
 
@@ -52211,8 +52212,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	5779
-	Y	3311
+	X	5778
+	Y	3312
 	Z	-15
 	Facing	1
 	Revision	0
@@ -52238,7 +52239,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	18
+	SpeechColor	53
 	RunSpeed	500
 }
 
@@ -52308,7 +52309,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	71
+	SpeechColor	243
 	RunSpeed	500
 }
 
@@ -52351,7 +52352,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1881
+	X	1883
 	Y	2784
 	Z	0
 	Facing	6
@@ -52378,7 +52379,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	12
+	SpeechColor	98
 	RunSpeed	500
 }
 
@@ -52421,8 +52422,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1220
-	Y	1627
+	X	1221
+	Y	1626
 	Z	0
 	Facing	6
 	Revision	0
@@ -52491,7 +52492,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1499
+	X	1498
 	Y	1758
 	Z	-2
 	Facing	2
@@ -52518,7 +52519,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	578
+	SpeechColor	7
 	RunSpeed	500
 }
 
@@ -52561,9 +52562,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	5773
+	X	5772
 	Y	3253
-	Z	-6
+	Z	-4
 	Facing	2
 	Revision	0
 	Realm	britannia
@@ -52588,7 +52589,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	340
+	SpeechColor	207
 	RunSpeed	500
 }
 
@@ -52648,9 +52649,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1929
-	Y	2669
-	Z	2
+	X	1930
+	Y	2670
+	Z	4
 	Facing	7
 	Revision	0
 	Realm	britannia
@@ -52675,7 +52676,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	12
+	SpeechColor	348
 	RunSpeed	500
 }
 
@@ -52718,7 +52719,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1818
+	X	1820
 	Y	2777
 	Z	0
 	Facing	6
@@ -52745,7 +52746,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	558
+	SpeechColor	87
 	RunSpeed	500
 }
 
@@ -52788,8 +52789,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	3649
-	Y	1089
+	X	3648
+	Y	1088
 	Z	0
 	Facing	2
 	Revision	0
@@ -52815,7 +52816,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	63
+	SpeechColor	707
 	RunSpeed	500
 }
 
@@ -52858,8 +52859,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	3729
-	Y	2650
+	X	3731
+	Y	2652
 	Z	40
 	Facing	7
 	Revision	0
@@ -52885,7 +52886,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	36
+	SpeechColor	87
 	RunSpeed	500
 }
 
@@ -52955,7 +52956,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	98
+	SpeechColor	700
 	RunSpeed	500
 }
 
@@ -52998,9 +52999,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	5774
-	Y	3193
-	Z	-3
+	X	5776
+	Y	3195
+	Z	3
 	Facing	7
 	Revision	0
 	Realm	britannia
@@ -53025,7 +53026,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	904
+	SpeechColor	202
 	RunSpeed	500
 }
 
@@ -53138,9 +53139,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	3759
+	X	3760
 	Y	2064
-	Z	27
+	Z	24
 	Facing	7
 	Revision	0
 	Realm	britannia
@@ -53165,7 +53166,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	558
+	SpeechColor	150
 	RunSpeed	500
 }
 
@@ -53208,8 +53209,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2954
-	Y	943
+	X	2953
+	Y	942
 	Z	0
 	Facing	3
 	Revision	0
@@ -53235,7 +53236,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	87
+	SpeechColor	9
 	RunSpeed	500
 }
 
@@ -53305,7 +53306,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	901
+	SpeechColor	98
 	RunSpeed	500
 }
 
@@ -53348,7 +53349,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1998
+	X	2000
 	Y	2723
 	Z	30
 	Facing	6
@@ -53375,7 +53376,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	12
+	SpeechColor	32
 	RunSpeed	500
 }
 
@@ -53435,7 +53436,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	3643
+	X	3645
 	Y	1207
 	Z	0
 	Facing	6
@@ -53462,7 +53463,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	52
+	SpeechColor	98
 	RunSpeed	500
 }
 
@@ -53532,7 +53533,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	63
+	SpeechColor	37
 	RunSpeed	500
 }
 
@@ -53593,7 +53594,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	1119
-	Y	1582
+	Y	1580
 	Z	0
 	Facing	4
 	Revision	0
@@ -53619,7 +53620,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	18
+	SpeechColor	53
 	RunSpeed	500
 }
 
@@ -53662,9 +53663,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1720
-	Y	1575
-	Z	19
+	X	1722
+	Y	1577
+	Z	24
 	Facing	7
 	Revision	0
 	Realm	britannia
@@ -53689,7 +53690,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	87
+	SpeechColor	903
 	RunSpeed	500
 }
 
@@ -53749,9 +53750,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	5155
+	X	5157
 	Y	4013
-	Z	41
+	Z	39
 	Facing	6
 	Revision	0
 	Realm	britannia
@@ -53776,7 +53777,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	904
+	SpeechColor	42
 	RunSpeed	500
 }
 
@@ -53837,7 +53838,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	3004
-	Y	660
+	Y	658
 	Z	0
 	Facing	4
 	Revision	0
@@ -53863,7 +53864,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	13
+	SpeechColor	9
 	RunSpeed	500
 }
 
@@ -53906,7 +53907,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1390
+	X	1389
 	Y	1806
 	Z	0
 	Facing	3
@@ -53933,7 +53934,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	193
+	SpeechColor	36
 	RunSpeed	500
 }
 
@@ -53976,8 +53977,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1390
-	Y	3804
+	X	1389
+	Y	3805
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -54002,7 +54003,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	48
+	SpeechColor	150
 	RunSpeed	500
 }
 
@@ -54046,7 +54047,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1561
-	Y	1592
+	Y	1593
 	Z	10
 	Revision	0
 	Realm	britannia
@@ -54071,7 +54072,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	97
+	SpeechColor	71
 	RunSpeed	500
 }
 
@@ -54131,8 +54132,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	5667
-	Y	3257
+	X	5668
+	Y	3256
 	Z	-15
 	Facing	5
 	Revision	0
@@ -54158,7 +54159,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	558
+	SpeechColor	63
 	RunSpeed	500
 }
 
@@ -54201,8 +54202,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	5159
-	Y	4071
+	X	5160
+	Y	4072
 	Z	40
 	Facing	7
 	Revision	0
@@ -54228,7 +54229,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	207
+	SpeechColor	707
 	RunSpeed	500
 }
 
@@ -54314,7 +54315,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	901
+	SpeechColor	12
 	RunSpeed	500
 }
 
@@ -54357,7 +54358,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2919
+	X	2917
 	Y	719
 	Z	0
 	Facing	2
@@ -54384,7 +54385,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	8
+	SpeechColor	160
 	RunSpeed	500
 }
 
@@ -54428,7 +54429,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	3015
-	Y	3363
+	Y	3365
 	Z	15
 	Revision	0
 	Realm	britannia
@@ -54453,7 +54454,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	97
+	SpeechColor	901
 	RunSpeed	500
 }
 
@@ -54497,7 +54498,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	568
-	Y	2185
+	Y	2186
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -54522,7 +54523,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	903
+	SpeechColor	348
 	RunSpeed	500
 }
 
@@ -54582,8 +54583,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1324
-	Y	1690
+	X	1326
+	Y	1688
 	Z	30
 	Facing	5
 	Revision	0
@@ -54609,7 +54610,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	32
+	SpeechColor	207
 	RunSpeed	500
 }
 
@@ -54670,7 +54671,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	1444
-	Y	1763
+	Y	1762
 	Z	-2
 	Facing	4
 	Revision	0
@@ -54696,7 +54697,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	7
+	SpeechColor	243
 	RunSpeed	500
 }
 
@@ -54740,7 +54741,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	3754
-	Y	1326
+	Y	1328
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -54765,7 +54766,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	101
+	SpeechColor	9
 	RunSpeed	500
 }
 
@@ -54808,8 +54809,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	3724
-	Y	2242
+	X	3726
+	Y	2244
 	Z	20
 	Facing	7
 	Revision	0
@@ -54835,7 +54836,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	48
+	SpeechColor	8
 	RunSpeed	500
 }
 
@@ -54895,9 +54896,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	3740
-	Y	2482
-	Z	31
+	X	3741
+	Y	2483
+	Z	32
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711685
@@ -54921,7 +54922,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	53
+	SpeechColor	192
 	RunSpeed	500
 }
 
@@ -54964,8 +54965,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	4407
-	Y	1073
+	X	4408
+	Y	1074
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -54990,7 +54991,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	13
+	SpeechColor	53
 	RunSpeed	500
 }
 
@@ -55034,7 +55035,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	2835
-	Y	892
+	Y	893
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -55059,7 +55060,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	648
+	SpeechColor	80
 	RunSpeed	500
 }
 
@@ -55119,8 +55120,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1827
-	Y	2900
+	X	1825
+	Y	2902
 	Z	20
 	Facing	1
 	Revision	0
@@ -55146,7 +55147,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	14
+	SpeechColor	7
 	RunSpeed	500
 }
 
@@ -55189,8 +55190,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2538
-	Y	400
+	X	2539
+	Y	401
 	Z	15
 	Facing	7
 	Revision	0
@@ -55216,7 +55217,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	707
+	SpeechColor	8
 	RunSpeed	500
 }
 
@@ -55260,7 +55261,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	3794
-	Y	2246
+	Y	2244
 	Z	20
 	Facing	4
 	Revision	0
@@ -55286,7 +55287,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	17
+	SpeechColor	7
 	RunSpeed	500
 }
 
@@ -55329,7 +55330,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	5224
+	X	5223
 	Y	4067
 	Z	39
 	Facing	2
@@ -55356,7 +55357,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	12
+	SpeechColor	8
 	RunSpeed	500
 }
 
@@ -55400,7 +55401,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	578
-	Y	957
+	Y	959
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -55425,7 +55426,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	32
+	SpeechColor	202
 	RunSpeed	500
 }
 
@@ -55469,7 +55470,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	680
-	Y	2246
+	Y	2247
 	Z	-3
 	Facing	1
 	Revision	0
@@ -55495,7 +55496,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	537
+	SpeechColor	700
 	RunSpeed	500
 }
 
@@ -55556,7 +55557,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1396
-	Y	1628
+	Y	1627
 	Z	30
 	Facing	2
 	Revision	0
@@ -55582,7 +55583,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	71
+	SpeechColor	80
 	RunSpeed	500
 }
 
@@ -55626,7 +55627,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	3528
-	Y	1143
+	Y	1145
 	Z	20
 	Revision	0
 	Realm	britannia
@@ -55651,7 +55652,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	160
+	SpeechColor	707
 	RunSpeed	500
 }
 
@@ -55711,9 +55712,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	3598
-	Y	1262
-	Z	0
+	X	3597
+	Y	1261
+	Z	-1
 	Facing	3
 	Revision	0
 	Realm	britannia
@@ -55738,7 +55739,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	207
+	SpeechColor	101
 	RunSpeed	500
 }
 
@@ -55808,7 +55809,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	52
+	SpeechColor	18
 	RunSpeed	500
 }
 
@@ -55868,7 +55869,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2050
+	X	2049
 	Y	2776
 	Z	0
 	Facing	2
@@ -55895,7 +55896,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	192
+	SpeechColor	71
 	RunSpeed	500
 }
 
@@ -55938,7 +55939,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1332
+	X	1334
 	Y	1582
 	Z	30
 	Facing	6
@@ -55965,7 +55966,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	438
+	SpeechColor	12
 	RunSpeed	500
 }
 
@@ -56009,8 +56010,8 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	1880
-	Y	2901
-	Z	5
+	Y	2903
+	Z	10
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711700
@@ -56034,7 +56035,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	202
+	SpeechColor	7
 	RunSpeed	500
 }
 
@@ -56077,7 +56078,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2480
+	X	2481
 	Y	450
 	Z	15
 	Facing	6
@@ -56104,7 +56105,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	207
+	SpeechColor	578
 	RunSpeed	500
 }
 
@@ -56173,7 +56174,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	362
+	SpeechColor	340
 	RunSpeed	500
 }
 
@@ -56216,8 +56217,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	670
-	Y	2129
+	X	669
+	Y	2128
 	Z	0
 	Facing	2
 	Revision	0
@@ -56243,7 +56244,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	97
+	SpeechColor	12
 	RunSpeed	500
 }
 
@@ -56287,7 +56288,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	1158
-	Y	1862
+	Y	1860
 	Z	0
 	Facing	4
 	Revision	0
@@ -56313,7 +56314,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	438
+	SpeechColor	558
 	RunSpeed	500
 }
 
@@ -56357,7 +56358,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	1446
-	Y	1534
+	Y	1532
 	Z	35
 	Facing	4
 	Revision	0
@@ -56383,7 +56384,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	32
+	SpeechColor	63
 	RunSpeed	500
 }
 
@@ -56426,7 +56427,7 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1272
+	X	1273
 	Y	1691
 	Z	0
 	Facing	6
@@ -56453,7 +56454,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	52
+	SpeechColor	36
 	RunSpeed	500
 }
 
@@ -56513,9 +56514,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2975
-	Y	738
-	Z	1
+	X	2976
+	Y	737
+	Z	2
 	Facing	5
 	Revision	0
 	Realm	britannia
@@ -56540,7 +56541,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	53
+	SpeechColor	98
 	RunSpeed	500
 }
 
@@ -56583,9 +56584,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	3766
-	Y	1115
-	Z	20
+	X	3764
+	Y	1113
+	Z	-2
 	Facing	3
 	Revision	0
 	Realm	britannia
@@ -56610,7 +56611,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	9
+	SpeechColor	904
 	RunSpeed	500
 }
 
@@ -56654,7 +56655,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	1160
-	Y	1685
+	Y	1683
 	Z	0
 	Facing	4
 	Revision	0
@@ -56680,7 +56681,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	63
+	SpeechColor	193
 	RunSpeed	500
 }
 
@@ -56724,7 +56725,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1218
-	Y	1867
+	Y	1868
 	Z	0
 	Facing	7
 	Revision	0
@@ -56750,7 +56751,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	34
+	SpeechColor	558
 	RunSpeed	500
 }
 
@@ -56811,7 +56812,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	2991
-	Y	779
+	Y	781
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -56836,7 +56837,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	207
+	SpeechColor	87
 	RunSpeed	500
 }
 
@@ -56897,7 +56898,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	3732
-	Y	2588
+	Y	2590
 	Z	40
 	Revision	0
 	Realm	britannia
@@ -56922,7 +56923,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	48
+	SpeechColor	901
 	RunSpeed	500
 }
 
@@ -56983,7 +56984,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1218
-	Y	1693
+	Y	1692
 	Z	0
 	Facing	4
 	Revision	0
@@ -57009,7 +57010,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	52
+	SpeechColor	12
 	RunSpeed	500
 }
 
@@ -57053,7 +57054,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	1830
-	Y	2727
+	Y	2725
 	Z	0
 	Facing	4
 	Revision	0
@@ -57079,7 +57080,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	438
+	SpeechColor	52
 	RunSpeed	500
 }
 
@@ -57123,7 +57124,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	2421
-	Y	562
+	Y	560
 	Z	0
 	Facing	4
 	Revision	0
@@ -57149,7 +57150,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	537
+	SpeechColor	63
 	RunSpeed	500
 }
 
@@ -57192,7 +57193,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	3761
+	X	3763
 	Y	1267
 	Z	0
 	Facing	6
@@ -57219,7 +57220,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	228
+	SpeechColor	18
 	RunSpeed	500
 }
 
@@ -57262,8 +57263,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	2811
-	Y	779
+	X	2812
+	Y	780
 	Z	0
 	Facing	7
 	Revision	0
@@ -57289,7 +57290,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	340
+	SpeechColor	87
 	RunSpeed	500
 }
 
@@ -57332,9 +57333,9 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	5284
-	Y	4070
-	Z	40
+	X	5283
+	Y	4069
+	Z	41
 	Facing	2
 	Revision	0
 	Realm	britannia
@@ -57359,7 +57360,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	63
+	SpeechColor	904
 	RunSpeed	500
 }
 
@@ -57402,8 +57403,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	1217
-	Y	1795
+	X	1215
+	Y	1797
 	Z	0
 	Facing	1
 	Revision	0
@@ -57429,7 +57430,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	7
+	SpeechColor	13
 	RunSpeed	500
 }
 
@@ -57472,8 +57473,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1432
-	Y	3692
+	X	1434
+	Y	3694
 	Z	0
 	Facing	7
 	Revision	0
@@ -57499,7 +57500,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	97
+	SpeechColor	193
 	RunSpeed	500
 }
 
@@ -57542,9 +57543,9 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	3694
+	X	3696
 	Y	1141
-	Z	0
+	Z	-10
 	Facing	6
 	Revision	0
 	Realm	britannia
@@ -57569,7 +57570,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	63
+	SpeechColor	48
 	RunSpeed	500
 }
 
@@ -57612,7 +57613,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1432
+	X	1430
 	Y	3813
 	Z	0
 	Facing	2
@@ -57639,7 +57640,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	192
+	SpeechColor	97
 	RunSpeed	500
 }
 
@@ -57682,7 +57683,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	1825
+	X	1824
 	Y	2836
 	Z	0
 	Facing	1
@@ -57709,7 +57710,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	578
+	SpeechColor	558
 	RunSpeed	500
 }
 
@@ -57753,7 +57754,7 @@
 	Graphic	0x190
 	Color	0x83ea
 	X	3619
-	Y	2480
+	Y	2481
 	Z	0
 	Facing	2
 	Revision	0
@@ -57779,7 +57780,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	558
+	SpeechColor	207
 	RunSpeed	500
 }
 
@@ -57823,7 +57824,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	2959
-	Y	3481
+	Y	3479
 	Z	15
 	Facing	4
 	Revision	0
@@ -57849,7 +57850,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	19
+	SpeechColor	901
 	RunSpeed	500
 }
 
@@ -57919,7 +57920,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	243
+	SpeechColor	8
 	RunSpeed	500
 }
 
@@ -57962,8 +57963,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	2939
-	Y	782
+	X	2937
+	Y	784
 	Z	0
 	Facing	1
 	Revision	0
@@ -57989,7 +57990,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	707
+	SpeechColor	97
 	RunSpeed	500
 }
 
@@ -58049,8 +58050,8 @@
 	ObjType	0x190
 	Graphic	0x190
 	Color	0x83ea
-	X	3642
-	Y	1326
+	X	3640
+	Y	1324
 	Z	0
 	Facing	3
 	Revision	0
@@ -58076,7 +58077,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	101
+	SpeechColor	903
 	RunSpeed	500
 }
 
@@ -58136,8 +58137,8 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	2528
-	Y	508
+	X	2529
+	Y	507
 	Z	15
 	Facing	4
 	Revision	0
@@ -58163,7 +58164,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	101
+	SpeechColor	32
 	RunSpeed	500
 }
 
@@ -58206,7 +58207,7 @@
 	ObjType	0x190
 	Graphic	0x191
 	Color	0x83ea
-	X	3026
+	X	3027
 	Y	3480
 	Z	15
 	Facing	6
@@ -58277,7 +58278,7 @@
 	Graphic	0x191
 	Color	0x83ea
 	X	2531
-	Y	450
+	Y	449
 	Z	15
 	Facing	4
 	Revision	0
@@ -58303,7 +58304,7 @@
 	CreatedAt	0
 	AR	1
 	script	townGuard
-	SpeechColor	32
+	SpeechColor	101
 	RunSpeed	500
 }
 
@@ -58562,7 +58563,7 @@
 	X	2040
 	Y	1027
 	Z	0
-	Facing	5
+	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711736
@@ -58586,7 +58587,7 @@
 	CreatedAt	0
 	AR	15
 	script	killPCs
-	SpeechColor	48
+	SpeechColor	13
 }
 
 NPC alligator
@@ -58595,7 +58596,7 @@
 	Serial	0x1a1e79
 	ObjType	0xca
 	Graphic	0xca
-	X	2035
+	X	2036
 	Y	1018
 	Z	0
 	Facing	2
@@ -58631,8 +58632,8 @@
 	Serial	0x1a1e7a
 	ObjType	0xca
 	Graphic	0xca
-	X	2060
-	Y	979
+	X	2061
+	Y	980
 	Z	0
 	Facing	3
 	Revision	0
@@ -58658,12 +58659,12 @@
 	CreatedAt	0
 	AR	15
 	script	killPCs
-	SpeechColor	9
+	SpeechColor	52
 }
 
 NPC employee
 {
-	Name	<employee> the beggar the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief
+	Name	<employee> the beggar the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief
 	Serial	0x1a1e7b
 	ObjType	0x190
 	Graphic	0x191
@@ -58672,7 +58673,7 @@
 	Y	1197
 	Z	0
 	Facing	3
-	Revision	34
+	Revision	35
 	Realm	britannia
 	CProp	AiSerial i1711739
 	CProp	Anchor a3:i2243i1197i0
@@ -58705,7 +58706,7 @@
 
 Item
 {
-	Serial	0x6ae11ff9
+	Serial	0x6ae1228e
 	ObjType	0x203c
 	Graphic	0x203c
 	Color	0x96
@@ -58717,12 +58718,12 @@
 	CProp	faceloc i11
 	Layer	11
 	Container	0x1a1e7b
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae11ff4
+	Serial	0x6ae12289
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -58732,12 +58733,12 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1e7b
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC employee
 {
-	Name	<employee> the mage the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
+	Name	<employee> the mage the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
 	Serial	0x1a1e7c
 	ObjType	0x190
 	Graphic	0x191
@@ -58745,7 +58746,7 @@
 	X	2237
 	Y	1230
 	Z	0
-	Revision	34
+	Revision	35
 	Realm	britannia
 	CProp	AiSerial i1711740
 	CProp	Anchor a3:i2237i1230i0
@@ -58783,7 +58784,7 @@
 
 Item
 {
-	Serial	0x6ae11ffd
+	Serial	0x6ae12292
 	ObjType	0x203c
 	Graphic	0x203c
 	Color	0x39a
@@ -58795,12 +58796,12 @@
 	CProp	faceloc i11
 	Layer	11
 	Container	0x1a1e7c
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae11ffa
+	Serial	0x6ae1228f
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -58810,12 +58811,12 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1e7c
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC employee
 {
-	Name	<employee> the fighter the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar
+	Name	<employee> the fighter the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar
 	Serial	0x1a1e7d
 	ObjType	0x190
 	Graphic	0x191
@@ -58824,7 +58825,7 @@
 	Y	1172
 	Z	0
 	Facing	2
-	Revision	34
+	Revision	35
 	Realm	britannia
 	CProp	AiSerial i1711741
 	CProp	Anchor a3:i2214i1172i0
@@ -58859,7 +58860,7 @@
 
 Item
 {
-	Serial	0x6ae12009
+	Serial	0x6ae1229e
 	ObjType	0x203b
 	Graphic	0x203b
 	Color	0x386
@@ -58871,12 +58872,12 @@
 	CProp	faceloc i11
 	Layer	11
 	Container	0x1a1e7d
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12005
+	Serial	0x6ae1229a
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -58886,12 +58887,12 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1e7d
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC employee
 {
-	Name	<employee> the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
+	Name	<employee> the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
 	Serial	0x1a1e7e
 	ObjType	0x190
 	Graphic	0x190
@@ -58900,7 +58901,7 @@
 	Y	1190
 	Z	0
 	Facing	4
-	Revision	34
+	Revision	35
 	Realm	britannia
 	CProp	AiSerial i1711742
 	CProp	Anchor a3:i2235i1190i0
@@ -58936,7 +58937,7 @@
 
 Item
 {
-	Serial	0x6ae1200d
+	Serial	0x6ae122a2
 	ObjType	0x2044
 	Graphic	0x2044
 	Color	0x21e
@@ -58948,12 +58949,12 @@
 	CProp	faceloc i11
 	Layer	11
 	Container	0x1a1e7e
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1200a
+	Serial	0x6ae1229f
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -58963,12 +58964,12 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1e7e
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC employee
 {
-	Name	<employee> the thief the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
+	Name	<employee> the thief the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
 	Serial	0x1a1e7f
 	ObjType	0x190
 	Graphic	0x190
@@ -58977,7 +58978,7 @@
 	Y	1174
 	Z	0
 	Facing	4
-	Revision	34
+	Revision	35
 	Realm	britannia
 	CProp	AiSerial i1711743
 	CProp	Anchor a3:i2206i1174i0
@@ -59013,7 +59014,7 @@
 
 Item
 {
-	Serial	0x6ae12015
+	Serial	0x6ae122aa
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -59023,12 +59024,12 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1e7f
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC employee
 {
-	Name	<employee> the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
+	Name	<employee> the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
 	Serial	0x1a1e80
 	ObjType	0x190
 	Graphic	0x190
@@ -59036,7 +59037,7 @@
 	X	2224
 	Y	1190
 	Z	0
-	Revision	34
+	Revision	35
 	Realm	britannia
 	CProp	AiSerial i1711744
 	CProp	Anchor a3:i2224i1190i0
@@ -59072,7 +59073,7 @@
 
 Item
 {
-	Serial	0x6ae12022
+	Serial	0x6ae122b7
 	ObjType	0x2045
 	Graphic	0x2045
 	Color	0x21e
@@ -59084,12 +59085,12 @@
 	CProp	faceloc i11
 	Layer	11
 	Container	0x1a1e80
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12023
+	Serial	0x6ae122b8
 	ObjType	0x203e
 	Graphic	0x203e
 	Color	0x21e
@@ -59101,12 +59102,12 @@
 	CProp	faceloc i16
 	Layer	16
 	Container	0x1a1e80
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1201f
+	Serial	0x6ae122b4
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -59116,12 +59117,12 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1e80
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC employee
 {
-	Name	<employee> the fighter the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin
+	Name	<employee> the fighter the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin
 	Serial	0x1a1e81
 	ObjType	0x190
 	Graphic	0x190
@@ -59130,7 +59131,7 @@
 	Y	1226
 	Z	0
 	Facing	7
-	Revision	34
+	Revision	35
 	Realm	britannia
 	CProp	AiSerial i1711745
 	CProp	Anchor a3:i2228i1226i0
@@ -59166,7 +59167,7 @@
 
 Item
 {
-	Serial	0x6ae1202f
+	Serial	0x6ae122c4
 	ObjType	0x203d
 	Graphic	0x203d
 	Color	0x21e
@@ -59178,12 +59179,12 @@
 	CProp	faceloc i11
 	Layer	11
 	Container	0x1a1e81
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12030
+	Serial	0x6ae122c5
 	ObjType	0x2040
 	Graphic	0x2040
 	Color	0x21e
@@ -59195,12 +59196,12 @@
 	CProp	faceloc i16
 	Layer	16
 	Container	0x1a1e81
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1202b
+	Serial	0x6ae122c0
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -59210,12 +59211,12 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1e81
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC employee
 {
-	Name	<employee> the mage the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar
+	Name	<employee> the mage the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar
 	Serial	0x1a1e82
 	ObjType	0x190
 	Graphic	0x190
@@ -59224,7 +59225,7 @@
 	Y	3940
 	Z	0
 	Facing	2
-	Revision	34
+	Revision	35
 	Realm	britannia
 	CProp	AiSerial i1711746
 	CProp	Anchor a3:i5226i3940i0
@@ -59257,7 +59258,7 @@
 
 Item
 {
-	Serial	0x6ae1203c
+	Serial	0x6ae122d1
 	ObjType	0x2047
 	Graphic	0x2047
 	Color	0x99
@@ -59269,12 +59270,12 @@
 	CProp	faceloc i11
 	Layer	11
 	Container	0x1a1e82
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12038
+	Serial	0x6ae122cd
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -59284,12 +59285,12 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1e82
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC employee
 {
-	Name	<employee> the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
+	Name	<employee> the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
 	Serial	0x1a1e83
 	ObjType	0x190
 	Graphic	0x190
@@ -59298,7 +59299,7 @@
 	Y	3978
 	Z	55
 	Facing	6
-	Revision	34
+	Revision	35
 	Realm	britannia
 	CProp	AiSerial i1711747
 	CProp	Anchor a3:i5141i3978i55
@@ -59334,7 +59335,7 @@
 
 Item
 {
-	Serial	0x6ae12040
+	Serial	0x6ae122d5
 	ObjType	0x2044
 	Graphic	0x2044
 	Color	0x39a
@@ -59346,12 +59347,12 @@
 	CProp	faceloc i11
 	Layer	11
 	Container	0x1a1e83
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1203d
+	Serial	0x6ae122d2
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -59361,12 +59362,12 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1e83
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC employee
 {
-	Name	<employee> the fighter the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin
+	Name	<employee> the fighter the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin the paladin
 	Serial	0x1a1e84
 	ObjType	0x190
 	Graphic	0x191
@@ -59375,7 +59376,7 @@
 	Y	4023
 	Z	37
 	Facing	2
-	Revision	34
+	Revision	35
 	Realm	britannia
 	CProp	AiSerial i1711748
 	CProp	Anchor a3:i5195i4023i37
@@ -59411,7 +59412,7 @@
 
 Item
 {
-	Serial	0x6ae1204c
+	Serial	0x6ae122e1
 	ObjType	0x2046
 	Graphic	0x2046
 	Color	0x99
@@ -59423,12 +59424,12 @@
 	CProp	faceloc i11
 	Layer	11
 	Container	0x1a1e84
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12048
+	Serial	0x6ae122dd
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -59438,12 +59439,12 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1e84
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC employee
 {
-	Name	<employee> the beggar the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage
+	Name	<employee> the beggar the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage
 	Serial	0x1a1e85
 	ObjType	0x190
 	Graphic	0x190
@@ -59452,7 +59453,7 @@
 	Y	4020
 	Z	40
 	Facing	2
-	Revision	34
+	Revision	35
 	Realm	britannia
 	CProp	AiSerial i1711749
 	CProp	Anchor a3:i5277i4020i40
@@ -59485,7 +59486,7 @@
 
 Item
 {
-	Serial	0x6ae12058
+	Serial	0x6ae122ed
 	ObjType	0x2045
 	Graphic	0x2045
 	Color	0x386
@@ -59497,12 +59498,12 @@
 	CProp	faceloc i11
 	Layer	11
 	Container	0x1a1e85
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12059
+	Serial	0x6ae122ee
 	ObjType	0x203f
 	Graphic	0x203f
 	Color	0x386
@@ -59514,12 +59515,12 @@
 	CProp	faceloc i16
 	Layer	16
 	Container	0x1a1e85
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12054
+	Serial	0x6ae122e9
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -59529,12 +59530,12 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1e85
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC employee
 {
-	Name	<employee> the paladin the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
+	Name	<employee> the paladin the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
 	Serial	0x1a1e86
 	ObjType	0x190
 	Graphic	0x190
@@ -59543,7 +59544,7 @@
 	Y	4026
 	Z	12
 	Facing	4
-	Revision	34
+	Revision	35
 	Realm	britannia
 	CProp	AiSerial i1711750
 	CProp	Anchor a3:i5173i4026i12
@@ -59578,7 +59579,7 @@
 
 Item
 {
-	Serial	0x6ae1205d
+	Serial	0x6ae122f2
 	ObjType	0x2044
 	Graphic	0x2044
 	Color	0x99
@@ -59590,12 +59591,12 @@
 	CProp	faceloc i11
 	Layer	11
 	Container	0x1a1e86
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1205a
+	Serial	0x6ae122ef
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -59605,7 +59606,7 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1e86
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC waterelemental
@@ -59614,8 +59615,8 @@
 	Serial	0x1a1e87
 	ObjType	0x10
 	Graphic	0x10
-	X	5211
-	Y	777
+	X	5212
+	Y	776
 	Z	0
 	Facing	1
 	Revision	0
@@ -59644,7 +59645,7 @@
 	CreatedAt	0
 	AR	25
 	script	spellKillPCs
-	SpeechColor	14
+	SpeechColor	17
 }
 
 Item
@@ -59698,7 +59699,7 @@
 	CreatedAt	0
 	AR	25
 	script	spellKillPCs
-	SpeechColor	558
+	SpeechColor	37
 }
 
 Item
@@ -59722,7 +59723,7 @@
 	Serial	0x1a1e89
 	ObjType	0xd1
 	Graphic	0xd1
-	X	5372
+	X	5371
 	Y	4022
 	Z	-3
 	Facing	6
@@ -59749,7 +59750,7 @@
 	CreatedAt	0
 	AR	5
 	script	animal
-	SpeechColor	192
+	SpeechColor	97
 }
 
 NPC sheep
@@ -59761,7 +59762,7 @@
 	X	5358
 	Y	3835
 	Z	2
-	Facing	3
+	Facing	2
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711754
@@ -59835,7 +59836,7 @@
 	CreatedAt	0
 	AR	9
 	script	cow
-	SpeechColor	578
+	SpeechColor	63
 }
 
 NPC sheep
@@ -59895,12 +59896,12 @@
 	ObjType	0xcf
 	Graphic	0xcf
 	X	5330
-	Y	4011
-	Z	0
+	Y	4010
+	Z	2
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711757
-	CProp	Anchor a3:i5330i4012i1
+	CProp	Anchor a3:i5330i4011i0
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills e of deluciaS8:domestic
@@ -59943,14 +59944,14 @@
 	Serial	0x1a1e8e
 	ObjType	0xe9
 	Graphic	0xe9
-	X	5351
+	X	5350
 	Y	4052
-	Z	-1
+	Z	-3
 	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711758
-	CProp	Anchor a3:i5352i4052i2
+	CProp	Anchor a3:i5351i4052i-1
 	CProp	Fame i3
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills e of deluciaS8:domestic
@@ -59970,7 +59971,7 @@
 	CreatedAt	0
 	AR	14
 	script	animal
-	SpeechColor	202
+	SpeechColor	192
 }
 
 NPC cow
@@ -60006,7 +60007,7 @@
 	CreatedAt	0
 	AR	9
 	script	cow
-	SpeechColor	207
+	SpeechColor	578
 }
 
 NPC pig
@@ -60015,14 +60016,14 @@
 	Serial	0x1a1e90
 	ObjType	0xcb
 	Graphic	0xcb
-	X	5327
+	X	5326
 	Y	3833
-	Z	-2
+	Z	-3
 	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711760
-	CProp	Anchor a3:i5328i3833i-1
+	CProp	Anchor a3:i5327i3833i-2
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills e of deluciaS8:domestic
@@ -60042,7 +60043,7 @@
 	CreatedAt	0
 	AR	6
 	script	barker
-	SpeechColor	63
+	SpeechColor	558
 }
 
 NPC cow
@@ -60054,7 +60055,7 @@
 	X	5311
 	Y	3965
 	Z	0
-	Facing	5
+	Facing	4
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711761
@@ -60078,7 +60079,7 @@
 	CreatedAt	0
 	AR	9
 	script	cow
-	SpeechColor	902
+	SpeechColor	19
 }
 
 NPC sheep
@@ -60087,14 +60088,14 @@
 	Serial	0x1a1e92
 	ObjType	0xcf
 	Graphic	0xcf
-	X	5337
+	X	5338
 	Y	3965
 	Z	-2
 	Facing	2
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711762
-	CProp	Anchor a3:i5336i3965i-1
+	CProp	Anchor a3:i5337i3965i-2
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills e of deluciaS8:domestic
@@ -60138,7 +60139,7 @@
 	ObjType	0xcb
 	Graphic	0xcb
 	X	5383
-	Y	3942
+	Y	3943
 	Z	0
 	Facing	4
 	Revision	0
@@ -60164,7 +60165,7 @@
 	CreatedAt	0
 	AR	6
 	script	barker
-	SpeechColor	80
+	SpeechColor	243
 }
 
 NPC cow
@@ -60174,13 +60175,13 @@
 	ObjType	0xd8
 	Graphic	0xd8
 	X	5312
-	Y	3888
+	Y	3889
 	Z	30
-	Facing	6
+	Facing	3
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711764
-	CProp	Anchor a3:i5317i3889i30
+	CProp	Anchor a3:i5312i3888i30
 	CProp	Fame i10
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills e of deluciaS8:domestic
@@ -60196,11 +60197,11 @@
 	Wrestling	6
 	Life	30
 	Mana	1
-	Stamina	14
+	Stamina	15
 	CreatedAt	0
 	AR	9
 	script	cow
-	SpeechColor	37
+	SpeechColor	707
 }
 
 NPC goat
@@ -60212,10 +60213,11 @@
 	X	5321
 	Y	4015
 	Z	-3
+	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711765
-	CProp	Anchor a3:i5321i4016i-2
+	CProp	Anchor a3:i5321i4015i-3
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills e of deluciaS8:domestic
@@ -60235,7 +60237,7 @@
 	CreatedAt	0
 	AR	5
 	script	animal
-	SpeechColor	52
+	SpeechColor	101
 }
 
 NPC goat
@@ -60247,7 +60249,6 @@
 	X	5374
 	Y	3850
 	Z	-1
-	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711766
@@ -60271,7 +60272,7 @@
 	CreatedAt	0
 	AR	5
 	script	animal
-	SpeechColor	54
+	SpeechColor	101
 }
 
 NPC pig
@@ -60280,9 +60281,9 @@
 	Serial	0x1a1e97
 	ObjType	0xcb
 	Graphic	0xcb
-	X	5367
+	X	5368
 	Y	3875
-	Z	0
+	Z	2
 	Facing	2
 	Revision	0
 	Realm	britannia
@@ -60307,7 +60308,7 @@
 	CreatedAt	0
 	AR	6
 	script	barker
-	SpeechColor	707
+	SpeechColor	7
 }
 
 NPC cow
@@ -60317,13 +60318,13 @@
 	ObjType	0xd8
 	Graphic	0xd8
 	X	5322
-	Y	3926
+	Y	3928
 	Z	-2
-	Facing	4
+	Facing	3
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711768
-	CProp	Anchor a3:i5314i3919i0
+	CProp	Anchor a3:i5322i3926i-2
 	CProp	Fame i10
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills e of deluciaS8:domestic
@@ -60339,11 +60340,11 @@
 	Wrestling	6
 	Life	30
 	Mana	1
-	Stamina	14
+	Stamina	15
 	CreatedAt	0
 	AR	9
 	script	cow
-	SpeechColor	14
+	SpeechColor	32
 }
 
 NPC sheep
@@ -60355,11 +60356,11 @@
 	X	5314
 	Y	3945
 	Z	-2
-	Facing	6
+	Facing	4
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711769
-	CProp	Anchor a3:i5315i3945i-3
+	CProp	Anchor a3:i5314i3945i-2
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills e of deluciaS8:domestic
@@ -60405,7 +60406,7 @@
 	X	5345
 	Y	3964
 	Z	0
-	Facing	6
+	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711770
@@ -60428,7 +60429,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	404
+	SpeechColor	63
 }
 
 NPC sheep
@@ -60440,7 +60441,6 @@
 	X	5331
 	Y	4010
 	Z	0
-	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711771
@@ -60490,7 +60490,7 @@
 	X	5314
 	Y	3996
 	Z	9
-	Facing	1
+	Facing	2
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711772
@@ -60514,7 +60514,7 @@
 	CreatedAt	0
 	AR	6
 	script	barker
-	SpeechColor	37
+	SpeechColor	36
 }
 
 NPC goat
@@ -60526,6 +60526,7 @@
 	X	5337
 	Y	3860
 	Z	46
+	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711773
@@ -60559,8 +60560,8 @@
 	ObjType	0x6
 	Graphic	0x6
 	Color	0x25
-	X	5336
-	Y	3918
+	X	5335
+	Y	3917
 	Z	-2
 	Facing	7
 	Revision	0
@@ -60587,7 +60588,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	207
+	SpeechColor	48
 }
 
 NPC bull
@@ -60599,7 +60600,6 @@
 	X	5350
 	Y	4049
 	Z	0
-	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711775
@@ -60623,7 +60623,7 @@
 	CreatedAt	0
 	AR	14
 	script	animal
-	SpeechColor	12
+	SpeechColor	42
 }
 
 NPC rat
@@ -60635,7 +60635,7 @@
 	X	5366
 	Y	3905
 	Z	0
-	Facing	5
+	Facing	4
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711776
@@ -60658,7 +60658,7 @@
 	CreatedAt	0
 	AR	3
 	script	animal
-	SpeechColor	97
+	SpeechColor	63
 }
 
 NPC goat
@@ -60694,7 +60694,7 @@
 	CreatedAt	0
 	AR	5
 	script	animal
-	SpeechColor	98
+	SpeechColor	202
 }
 
 NPC llama
@@ -60703,14 +60703,14 @@
 	Serial	0x1a1ea2
 	ObjType	0xdc
 	Graphic	0xdc
-	X	5362
+	X	5363
 	Y	3967
-	Z	-1
+	Z	1
 	Facing	2
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711778
-	CProp	Anchor a3:i5361i3967i0
+	CProp	Anchor a3:i5362i3967i-1
 	CProp	Fame i3
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills e of deluciaS12:newbieforest
@@ -60730,7 +60730,7 @@
 	CreatedAt	0
 	AR	8
 	script	animal
-	SpeechColor	340
+	SpeechColor	243
 }
 
 NPC bird
@@ -60741,12 +60741,12 @@
 	Graphic	0x6
 	Color	0x26
 	X	5370
-	Y	3971
+	Y	3970
 	Z	0
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711779
-	CProp	Anchor a3:i5370i3972i-1
+	CProp	Anchor a3:i5370i3971i0
 	CProp	Color i38
 	CProp	Fame i1
 	CProp	Karma i0
@@ -60767,7 +60767,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	901
+	SpeechColor	48
 }
 
 NPC chicken
@@ -60776,14 +60776,14 @@
 	Serial	0x1a1ea4
 	ObjType	0xd0
 	Graphic	0xd0
-	X	5382
+	X	5383
 	Y	4060
-	Z	0
+	Z	-3
 	Facing	2
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711780
-	CProp	Anchor a3:i5381i4060i2
+	CProp	Anchor a3:i5382i4060i0
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills e of deluciaS12:newbieforest
@@ -60802,7 +60802,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	48
+	SpeechColor	7
 }
 
 NPC bird
@@ -60812,14 +60812,14 @@
 	ObjType	0x6
 	Graphic	0x6
 	Color	0x1c0
-	X	5372
+	X	5371
 	Y	3935
 	Z	-2
 	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711781
-	CProp	Anchor a3:i5373i3935i1
+	CProp	Anchor a3:i5372i3935i-2
 	CProp	Color i448
 	CProp	Fame i1
 	CProp	Karma i0
@@ -60840,7 +60840,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	578
+	SpeechColor	34
 }
 
 NPC chicken
@@ -60852,11 +60852,11 @@
 	X	5344
 	Y	3889
 	Z	47
-	Facing	2
+	Facing	3
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711782
-	CProp	Anchor a3:i5343i3889i47
+	CProp	Anchor a3:i5344i3889i47
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills e of deluciaS12:newbieforest
@@ -60875,7 +60875,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	42
+	SpeechColor	160
 }
 
 NPC goat
@@ -60884,7 +60884,7 @@
 	Serial	0x1a1ea7
 	ObjType	0xd1
 	Graphic	0xd1
-	X	5337
+	X	5338
 	Y	3912
 	Z	5
 	Facing	2
@@ -60911,7 +60911,7 @@
 	CreatedAt	0
 	AR	5
 	script	animal
-	SpeechColor	17
+	SpeechColor	160
 }
 
 NPC bird
@@ -60949,7 +60949,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	160
+	SpeechColor	537
 }
 
 NPC Rabbit
@@ -60958,14 +60958,14 @@
 	Serial	0x1a1ea9
 	ObjType	0xcd
 	Graphic	0xcd
-	X	5324
-	Y	4036
+	X	5323
+	Y	4035
 	Z	-1
 	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711785
-	CProp	Anchor a3:i5325i4037i0
+	CProp	Anchor a3:i5324i4036i-1
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills e of deluciaS12:newbieforest
@@ -60984,7 +60984,7 @@
 	CreatedAt	0
 	AR	4
 	script	barker
-	SpeechColor	7
+	SpeechColor	8
 }
 
 NPC bear
@@ -60993,14 +60993,14 @@
 	Serial	0x1a1eaa
 	ObjType	0xd3
 	Graphic	0xd3
-	X	5329
-	Y	3965
-	Z	0
+	X	5330
+	Y	3966
+	Z	-2
 	Facing	3
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711786
-	CProp	Anchor a3:i5328i3964i-3
+	CProp	Anchor a3:i5329i3965i0
 	CProp	Fame i2
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills e of deluciaS12:newbieforest
@@ -61020,7 +61020,7 @@
 	CreatedAt	0
 	AR	12
 	script	animal
-	SpeechColor	87
+	SpeechColor	48
 }
 
 NPC bird
@@ -61058,7 +61058,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	52
+	SpeechColor	207
 }
 
 NPC Rabbit
@@ -61070,7 +61070,7 @@
 	X	5340
 	Y	3855
 	Z	44
-	Facing	3
+	Facing	4
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711788
@@ -61093,7 +61093,7 @@
 	CreatedAt	0
 	AR	4
 	script	barker
-	SpeechColor	903
+	SpeechColor	13
 }
 
 NPC cow
@@ -61102,14 +61102,14 @@
 	Serial	0x1a1ead
 	ObjType	0xd8
 	Graphic	0xd8
-	X	5400
-	Y	3887
-	Z	22
-	Facing	5
+	X	5399
+	Y	3888
+	Z	19
+	Facing	3
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711789
-	CProp	Anchor a3:i5401i3882i17
+	CProp	Anchor a3:i5400i3887i22
 	CProp	Fame i10
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills e of deluciaS12:newbieforest
@@ -61129,7 +61129,7 @@
 	CreatedAt	0
 	AR	9
 	script	cow
-	SpeechColor	54
+	SpeechColor	902
 }
 
 NPC bear
@@ -61141,11 +61141,11 @@
 	X	5370
 	Y	4028
 	Z	-1
-	Facing	3
+	Facing	2
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711790
-	CProp	Anchor a3:i5369i4027i5
+	CProp	Anchor a3:i5370i4028i-1
 	CProp	Fame i2
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills e of deluciaS12:newbieforest
@@ -61165,7 +61165,7 @@
 	CreatedAt	0
 	AR	12
 	script	animal
-	SpeechColor	196
+	SpeechColor	53
 }
 
 NPC bird
@@ -61178,6 +61178,7 @@
 	X	5318
 	Y	3987
 	Z	-2
+	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711791
@@ -61202,7 +61203,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	578
+	SpeechColor	901
 }
 
 NPC blackbear
@@ -61212,9 +61213,9 @@
 	ObjType	0xd3
 	Graphic	0xd3
 	Color	0x2e6
-	X	5357
-	Y	3838
-	Z	1
+	X	5356
+	Y	3837
+	Z	2
 	Facing	7
 	Revision	0
 	Realm	britannia
@@ -61239,7 +61240,7 @@
 	CreatedAt	0
 	AR	8
 	script	animal
-	SpeechColor	53
+	SpeechColor	37
 }
 
 NPC wanderingHealer
@@ -61276,7 +61277,7 @@
 	CreatedAt	0
 	AR	32
 	script	davesHealer
-	SpeechColor	48
+	SpeechColor	14
 }
 
 Item
@@ -61337,11 +61338,10 @@
 	X	5201
 	Y	3853
 	Z	0
-	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711794
-	CProp	Anchor a3:i5200i3854i-1
+	CProp	Anchor a3:i5201i3853i0
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS8:domestic
@@ -61361,7 +61361,7 @@
 	CreatedAt	0
 	AR	5
 	script	animal
-	SpeechColor	34
+	SpeechColor	7
 }
 
 NPC cow
@@ -61397,7 +61397,7 @@
 	CreatedAt	0
 	AR	9
 	script	cow
-	SpeechColor	36
+	SpeechColor	7
 }
 
 NPC sheep
@@ -61409,7 +61409,6 @@
 	X	5274
 	Y	3851
 	Z	0
-	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711796
@@ -61456,9 +61455,9 @@
 	Serial	0x1a1eb5
 	ObjType	0xd0
 	Graphic	0xd0
-	X	5213
-	Y	3913
-	Z	10
+	X	5214
+	Y	3912
+	Z	11
 	Facing	1
 	Revision	0
 	Realm	britannia
@@ -61482,7 +61481,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	648
+	SpeechColor	192
 }
 
 NPC goat
@@ -61491,14 +61490,14 @@
 	Serial	0x1a1eb6
 	ObjType	0xd1
 	Graphic	0xd1
-	X	5196
-	Y	3882
-	Z	2
+	X	5197
+	Y	3881
+	Z	-1
 	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711798
-	CProp	Anchor a3:i5195i3883i0
+	CProp	Anchor a3:i5196i3882i2
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS8:domestic
@@ -61518,7 +61517,7 @@
 	CreatedAt	0
 	AR	5
 	script	animal
-	SpeechColor	202
+	SpeechColor	578
 }
 
 NPC sheep
@@ -61530,7 +61529,7 @@
 	X	5162
 	Y	3907
 	Z	-2
-	Facing	7
+	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711799
@@ -61577,14 +61576,14 @@
 	Serial	0x1a1eb8
 	ObjType	0xcf
 	Graphic	0xcf
-	X	5152
+	X	5151
 	Y	3864
-	Z	1
+	Z	-1
 	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711800
-	CProp	Anchor a3:i5153i3864i0
+	CProp	Anchor a3:i5152i3864i1
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS8:domestic
@@ -61630,11 +61629,11 @@
 	X	5275
 	Y	3901
 	Z	14
-	Facing	5
+	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711801
-	CProp	Anchor a3:i5276i3900i15
+	CProp	Anchor a3:i5275i3901i14
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS8:domestic
@@ -61653,7 +61652,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	32
+	SpeechColor	202
 }
 
 NPC sheep
@@ -61663,12 +61662,12 @@
 	ObjType	0xcf
 	Graphic	0xcf
 	X	5260
-	Y	3897
-	Z	1
+	Y	3896
+	Z	0
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711802
-	CProp	Anchor a3:i5260i3898i2
+	CProp	Anchor a3:i5260i3897i1
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS8:domestic
@@ -61714,6 +61713,7 @@
 	X	5174
 	Y	3904
 	Z	0
+	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711803
@@ -61760,8 +61760,8 @@
 	Serial	0x1a1ebc
 	ObjType	0xe9
 	Graphic	0xe9
-	X	5179
-	Y	3931
+	X	5178
+	Y	3932
 	Z	19
 	Facing	5
 	Revision	0
@@ -61787,7 +61787,7 @@
 	CreatedAt	0
 	AR	14
 	script	animal
-	SpeechColor	228
+	SpeechColor	207
 }
 
 NPC goat
@@ -61823,7 +61823,7 @@
 	CreatedAt	0
 	AR	5
 	script	animal
-	SpeechColor	648
+	SpeechColor	63
 }
 
 NPC cow
@@ -61835,11 +61835,11 @@
 	X	5236
 	Y	3824
 	Z	26
-	Facing	5
+	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711806
-	CProp	Anchor a3:i5234i3826i24
+	CProp	Anchor a3:i5236i3824i26
 	CProp	Fame i10
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS8:domestic
@@ -61859,7 +61859,7 @@
 	CreatedAt	0
 	AR	9
 	script	cow
-	SpeechColor	228
+	SpeechColor	902
 }
 
 NPC cow
@@ -61895,7 +61895,7 @@
 	CreatedAt	0
 	AR	9
 	script	cow
-	SpeechColor	63
+	SpeechColor	80
 }
 
 NPC sheep
@@ -61904,14 +61904,14 @@
 	Serial	0x1a1ec0
 	ObjType	0xcf
 	Graphic	0xcf
-	X	5170
-	Y	3865
-	Z	1
+	X	5169
+	Y	3866
+	Z	-2
 	Facing	5
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711808
-	CProp	Anchor a3:i5171i3864i1
+	CProp	Anchor a3:i5170i3865i1
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS8:domestic
@@ -61955,13 +61955,13 @@
 	ObjType	0xcf
 	Graphic	0xcf
 	X	5287
-	Y	3850
+	Y	3851
 	Z	9
 	Facing	4
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711809
-	CProp	Anchor a3:i5287i3849i9
+	CProp	Anchor a3:i5287i3850i9
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS8:domestic
@@ -62007,11 +62007,11 @@
 	X	5147
 	Y	3886
 	Z	14
-	Facing	6
+	Facing	4
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711810
-	CProp	Anchor a3:i5148i3886i13
+	CProp	Anchor a3:i5147i3886i14
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS8:domestic
@@ -62057,7 +62057,7 @@
 	X	5267
 	Y	3863
 	Z	18
-	Facing	3
+	Facing	4
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711811
@@ -62104,14 +62104,14 @@
 	Serial	0x1a1ec4
 	ObjType	0xd1
 	Graphic	0xd1
-	X	5287
+	X	5286
 	Y	3878
-	Z	2
+	Z	1
 	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711812
-	CProp	Anchor a3:i5288i3878i0
+	CProp	Anchor a3:i5287i3878i2
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS8:domestic
@@ -62131,7 +62131,7 @@
 	CreatedAt	0
 	AR	5
 	script	animal
-	SpeechColor	32
+	SpeechColor	37
 }
 
 NPC goat
@@ -62143,7 +62143,7 @@
 	X	5309
 	Y	3890
 	Z	0
-	Facing	7
+	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711813
@@ -62167,7 +62167,7 @@
 	CreatedAt	0
 	AR	5
 	script	animal
-	SpeechColor	193
+	SpeechColor	52
 }
 
 NPC bird
@@ -62180,7 +62180,7 @@
 	X	5208
 	Y	3871
 	Z	9
-	Facing	7
+	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711814
@@ -62205,7 +62205,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	192
+	SpeechColor	578
 }
 
 NPC bird
@@ -62243,7 +62243,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	36
+	SpeechColor	160
 }
 
 NPC blackbear
@@ -62256,11 +62256,11 @@
 	X	5154
 	Y	3895
 	Z	-1
-	Facing	5
+	Facing	4
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711816
-	CProp	Anchor a3:i5155i3894i2
+	CProp	Anchor a3:i5154i3895i-1
 	CProp	Fame i2
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS12:newbieforest
@@ -62280,7 +62280,7 @@
 	CreatedAt	0
 	AR	8
 	script	animal
-	SpeechColor	87
+	SpeechColor	54
 }
 
 NPC bull
@@ -62289,14 +62289,14 @@
 	Serial	0x1a1ec9
 	ObjType	0xe9
 	Graphic	0xe9
-	X	5178
+	X	5177
 	Y	3835
-	Z	-2
+	Z	-1
 	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711817
-	CProp	Anchor a3:i5179i3835i-3
+	CProp	Anchor a3:i5178i3835i-2
 	CProp	Fame i3
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS12:newbieforest
@@ -62316,7 +62316,7 @@
 	CreatedAt	0
 	AR	14
 	script	animal
-	SpeechColor	193
+	SpeechColor	707
 }
 
 NPC goat
@@ -62351,7 +62351,7 @@
 	CreatedAt	0
 	AR	5
 	script	animal
-	SpeechColor	32
+	SpeechColor	14
 }
 
 NPC eagle
@@ -62361,12 +62361,12 @@
 	ObjType	0x5
 	Graphic	0x5
 	X	5156
-	Y	3838
+	Y	3837
 	Z	-1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711819
-	CProp	Anchor a3:i5156i3839i-1
+	CProp	Anchor a3:i5156i3838i-1
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS12:newbieforest
@@ -62386,7 +62386,7 @@
 	CreatedAt	0
 	AR	11
 	script	animal
-	SpeechColor	32
+	SpeechColor	404
 }
 
 NPC cow
@@ -62398,7 +62398,7 @@
 	X	5218
 	Y	3947
 	Z	0
-	Facing	2
+	Facing	4
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711820
@@ -62422,7 +62422,7 @@
 	CreatedAt	0
 	AR	9
 	script	cow
-	SpeechColor	578
+	SpeechColor	37
 }
 
 NPC blackbear
@@ -62438,7 +62438,7 @@
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711821
-	CProp	Anchor a3:i5268i3814i2
+	CProp	Anchor a3:i5268i3813i2
 	CProp	Fame i2
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS12:newbieforest
@@ -62458,7 +62458,7 @@
 	CreatedAt	0
 	AR	8
 	script	animal
-	SpeechColor	243
+	SpeechColor	340
 }
 
 NPC snake
@@ -62467,9 +62467,9 @@
 	Serial	0x1a1ece
 	ObjType	0x34
 	Graphic	0x34
-	X	5298
-	Y	3881
-	Z	-1
+	X	5299
+	Y	3880
+	Z	1
 	Facing	1
 	Revision	0
 	Realm	britannia
@@ -62494,7 +62494,7 @@
 	CreatedAt	0
 	AR	1
 	script	killPCs
-	SpeechColor	228
+	SpeechColor	71
 }
 
 NPC bird
@@ -62504,9 +62504,9 @@
 	ObjType	0x6
 	Graphic	0x6
 	Color	0x27
-	X	5273
-	Y	3814
-	Z	1
+	X	5272
+	Y	3813
+	Z	7
 	Facing	7
 	Revision	0
 	Realm	britannia
@@ -62532,7 +62532,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	902
+	SpeechColor	52
 }
 
 NPC deer
@@ -62541,14 +62541,14 @@
 	Serial	0x1a1ed0
 	ObjType	0xed
 	Graphic	0xed
-	X	5222
-	Y	3871
+	X	5223
+	Y	3870
 	Z	32
 	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711824
-	CProp	Anchor a3:i5221i3872i32
+	CProp	Anchor a3:i5222i3871i32
 	CProp	Fame i2
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS12:newbieforest
@@ -62568,7 +62568,7 @@
 	CreatedAt	0
 	AR	8
 	script	animal
-	SpeechColor	32
+	SpeechColor	12
 }
 
 NPC bird
@@ -62581,11 +62581,11 @@
 	X	5246
 	Y	3846
 	Z	-3
-	Facing	5
+	Facing	4
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711825
-	CProp	Anchor a3:i5247i3845i0
+	CProp	Anchor a3:i5246i3846i-3
 	CProp	Color i550
 	CProp	Fame i1
 	CProp	Karma i0
@@ -62606,7 +62606,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	442
+	SpeechColor	578
 }
 
 NPC Rabbit
@@ -62615,14 +62615,14 @@
 	Serial	0x1a1ed2
 	ObjType	0xcd
 	Graphic	0xcd
-	X	5177
-	Y	3888
-	Z	-2
+	X	5178
+	Y	3887
+	Z	0
 	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711826
-	CProp	Anchor a3:i5176i3889i-1
+	CProp	Anchor a3:i5177i3888i-2
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS12:newbieforest
@@ -62641,7 +62641,7 @@
 	CreatedAt	0
 	AR	4
 	script	barker
-	SpeechColor	404
+	SpeechColor	97
 }
 
 NPC bird
@@ -62679,7 +62679,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	87
+	SpeechColor	192
 }
 
 NPC cow
@@ -62688,14 +62688,14 @@
 	Serial	0x1a1ed4
 	ObjType	0xd8
 	Graphic	0xd8
-	X	5253
-	Y	3910
-	Z	8
+	X	5250
+	Y	3913
+	Z	15
 	Facing	5
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711828
-	CProp	Anchor a3:i5253i3902i1
+	CProp	Anchor a3:i5253i3910i8
 	CProp	Fame i10
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS12:newbieforest
@@ -62711,7 +62711,7 @@
 	Wrestling	6
 	Life	30
 	Mana	1
-	Stamina	14
+	Stamina	15
 	CreatedAt	0
 	AR	9
 	script	cow
@@ -62725,12 +62725,12 @@
 	ObjType	0xcd
 	Graphic	0xcd
 	X	5158
-	Y	3807
-	Z	2
+	Y	3806
+	Z	-2
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711829
-	CProp	Anchor a3:i5158i3808i1
+	CProp	Anchor a3:i5158i3807i2
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS12:newbieforest
@@ -62749,7 +62749,7 @@
 	CreatedAt	0
 	AR	4
 	script	barker
-	SpeechColor	17
+	SpeechColor	340
 }
 
 NPC blackbear
@@ -62759,14 +62759,14 @@
 	ObjType	0xd3
 	Graphic	0xd3
 	Color	0x2e6
-	X	5280
-	Y	3827
+	X	5281
+	Y	3826
 	Z	-2
 	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711830
-	CProp	Anchor a3:i5279i3828i0
+	CProp	Anchor a3:i5280i3827i-2
 	CProp	Fame i2
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS12:newbieforest
@@ -62786,7 +62786,7 @@
 	CreatedAt	0
 	AR	8
 	script	animal
-	SpeechColor	7
+	SpeechColor	48
 }
 
 NPC blackbear
@@ -62796,14 +62796,14 @@
 	ObjType	0xd3
 	Graphic	0xd3
 	Color	0x2e6
-	X	5259
+	X	5258
 	Y	3916
-	Z	21
+	Z	20
 	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711831
-	CProp	Anchor a3:i5260i3916i23
+	CProp	Anchor a3:i5259i3916i21
 	CProp	Fame i2
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS12:newbieforest
@@ -62823,7 +62823,7 @@
 	CreatedAt	0
 	AR	8
 	script	animal
-	SpeechColor	12
+	SpeechColor	42
 }
 
 NPC deer
@@ -62833,8 +62833,8 @@
 	ObjType	0xed
 	Graphic	0xed
 	X	5308
-	Y	3807
-	Z	25
+	Y	3806
+	Z	23
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711832
@@ -62858,7 +62858,7 @@
 	CreatedAt	0
 	AR	8
 	script	animal
-	SpeechColor	12
+	SpeechColor	17
 }
 
 NPC blackbear
@@ -62868,14 +62868,14 @@
 	ObjType	0xd3
 	Graphic	0xd3
 	Color	0x2e6
-	X	5299
-	Y	3874
-	Z	1
+	X	5300
+	Y	3873
+	Z	2
 	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711833
-	CProp	Anchor a3:i5298i3875i0
+	CProp	Anchor a3:i5299i3874i1
 	CProp	Fame i2
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:hills n of deluciaS12:newbieforest
@@ -62895,7 +62895,7 @@
 	CreatedAt	0
 	AR	8
 	script	animal
-	SpeechColor	228
+	SpeechColor	7
 }
 
 NPC wanderingHealer
@@ -62932,7 +62932,7 @@
 	CreatedAt	0
 	AR	32
 	script	davesHealer
-	SpeechColor	48
+	SpeechColor	340
 }
 
 Item
@@ -62973,14 +62973,14 @@
 	Serial	0x1a1edb
 	ObjType	0xdd
 	Graphic	0xdd
-	X	4242
-	Y	331
+	X	4243
+	Y	330
 	Z	-5
 	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711835
-	CProp	Anchor a3:i4241i332i-5
+	CProp	Anchor a3:i4242i331i-5
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S10:ice islandS13:arcticanimals
@@ -63001,7 +63001,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	7
+	SpeechColor	87
 }
 
 NPC walrus
@@ -63011,13 +63011,13 @@
 	ObjType	0xdd
 	Graphic	0xdd
 	X	4034
-	Y	432
+	Y	433
 	Z	3
 	Facing	4
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711836
-	CProp	Anchor a3:i4034i431i3
+	CProp	Anchor a3:i4034i432i3
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S10:ice islandS13:arcticanimals
@@ -63038,7 +63038,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	438
+	SpeechColor	903
 }
 
 NPC walrus
@@ -63047,14 +63047,14 @@
 	Serial	0x1a1edd
 	ObjType	0xdd
 	Graphic	0xdd
-	X	3903
-	Y	344
+	X	3902
+	Y	343
 	Z	-5
 	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711837
-	CProp	Anchor a3:i3904i345i-5
+	CProp	Anchor a3:i3903i344i-5
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S10:ice islandS13:arcticanimals
@@ -63075,7 +63075,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	207
+	SpeechColor	54
 }
 
 NPC walrus
@@ -63085,12 +63085,12 @@
 	ObjType	0xdd
 	Graphic	0xdd
 	X	3932
-	Y	634
+	Y	633
 	Z	-5
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711838
-	CProp	Anchor a3:i3932i635i-5
+	CProp	Anchor a3:i3932i634i-5
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S10:ice islandS13:arcticanimals
@@ -63111,7 +63111,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	17
+	SpeechColor	196
 }
 
 NPC walrus
@@ -63120,14 +63120,14 @@
 	Serial	0x1a1edf
 	ObjType	0xdd
 	Graphic	0xdd
-	X	3914
-	Y	307
+	X	3913
+	Y	308
 	Z	0
 	Facing	5
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711839
-	CProp	Anchor a3:i3915i306i0
+	CProp	Anchor a3:i3914i307i0
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S10:ice islandS13:arcticanimals
@@ -63148,7 +63148,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	32
+	SpeechColor	53
 }
 
 NPC walrus
@@ -63160,7 +63160,7 @@
 	X	4212
 	Y	505
 	Z	-5
-	Facing	4
+	Facing	5
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711840
@@ -63185,7 +63185,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	228
+	SpeechColor	34
 }
 
 NPC walrus
@@ -63194,8 +63194,8 @@
 	Serial	0x1a1ee1
 	ObjType	0xdd
 	Graphic	0xdd
-	X	4089
-	Y	237
+	X	4090
+	Y	238
 	Z	-5
 	Facing	3
 	Revision	0
@@ -63222,7 +63222,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	228
+	SpeechColor	36
 }
 
 NPC walrus
@@ -63234,11 +63234,11 @@
 	X	4284
 	Y	232
 	Z	-5
-	Facing	3
+	Facing	4
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711842
-	CProp	Anchor a3:i4283i231i-5
+	CProp	Anchor a3:i4284i232i-5
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S10:ice islandS13:arcticanimals
@@ -63259,7 +63259,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	442
+	SpeechColor	648
 }
 
 NPC walrus
@@ -63295,7 +63295,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	12
+	SpeechColor	202
 }
 
 NPC walrus
@@ -63332,7 +63332,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	442
+	SpeechColor	32
 }
 
 NPC walrus
@@ -63369,7 +63369,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	572
+	SpeechColor	228
 }
 
 NPC walrus
@@ -63378,14 +63378,14 @@
 	Serial	0x1a1ee6
 	ObjType	0xdd
 	Graphic	0xdd
-	X	4035
-	Y	559
+	X	4034
+	Y	558
 	Z	0
 	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711846
-	CProp	Anchor a3:i4036i560i0
+	CProp	Anchor a3:i4035i559i0
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S10:ice islandS13:arcticanimals
@@ -63406,7 +63406,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	63
+	SpeechColor	648
 }
 
 NPC walrus
@@ -63418,11 +63418,11 @@
 	X	4144
 	Y	535
 	Z	0
-	Facing	2
+	Facing	3
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711847
-	CProp	Anchor a3:i4143i535i0
+	CProp	Anchor a3:i4144i535i0
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S10:ice islandS13:arcticanimals
@@ -63443,7 +63443,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	80
+	SpeechColor	228
 }
 
 NPC walrus
@@ -63455,7 +63455,6 @@
 	X	4237
 	Y	201
 	Z	-5
-	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711848
@@ -63480,7 +63479,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	901
+	SpeechColor	63
 }
 
 NPC walrus
@@ -63490,7 +63489,7 @@
 	ObjType	0xdd
 	Graphic	0xdd
 	X	4224
-	Y	427
+	Y	428
 	Z	-5
 	Facing	4
 	Revision	0
@@ -63517,7 +63516,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	97
+	SpeechColor	32
 }
 
 NPC walrus
@@ -63554,7 +63553,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	572
+	SpeechColor	193
 }
 
 NPC walrus
@@ -63563,14 +63562,14 @@
 	Serial	0x1a1eeb
 	ObjType	0xdd
 	Graphic	0xdd
-	X	4071
+	X	4072
 	Y	696
 	Z	-5
 	Facing	2
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711851
-	CProp	Anchor a3:i4070i696i-5
+	CProp	Anchor a3:i4071i696i-5
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S10:ice islandS13:arcticanimals
@@ -63591,7 +63590,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	150
+	SpeechColor	87
 }
 
 NPC walrus
@@ -63600,14 +63599,14 @@
 	Serial	0x1a1eec
 	ObjType	0xdd
 	Graphic	0xdd
-	X	4103
-	Y	316
+	X	4104
+	Y	315
 	Z	0
 	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711852
-	CProp	Anchor a3:i4102i317i0
+	CProp	Anchor a3:i4103i316i0
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S10:ice islandS13:arcticanimals
@@ -63628,7 +63627,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	37
+	SpeechColor	193
 }
 
 NPC walrus
@@ -63638,12 +63637,12 @@
 	ObjType	0xdd
 	Graphic	0xdd
 	X	4254
-	Y	475
+	Y	474
 	Z	-5
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711853
-	CProp	Anchor a3:i4254i476i-5
+	CProp	Anchor a3:i4254i475i-5
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S10:ice islandS13:arcticanimals
@@ -63664,12 +63663,12 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	537
+	SpeechColor	32
 }
 
 NPC employee
 {
-	Name	<employee> the mage the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
+	Name	<employee> the mage the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
 	Serial	0x1a1eee
 	ObjType	0x190
 	Graphic	0x190
@@ -63678,7 +63677,7 @@
 	Y	3851
 	Z	0
 	Facing	5
-	Revision	34
+	Revision	35
 	Realm	britannia
 	CProp	AiSerial i1711854
 	CProp	Anchor a3:i1533i3851i0
@@ -63715,7 +63714,7 @@
 
 Item
 {
-	Serial	0x6ae12068
+	Serial	0x6ae122fd
 	ObjType	0x203d
 	Graphic	0x203d
 	Color	0x99
@@ -63727,12 +63726,12 @@
 	CProp	faceloc i11
 	Layer	11
 	Container	0x1a1eee
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12069
+	Serial	0x6ae122fe
 	ObjType	0x203e
 	Graphic	0x203e
 	Color	0x99
@@ -63744,12 +63743,12 @@
 	CProp	faceloc i16
 	Layer	16
 	Container	0x1a1eee
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12065
+	Serial	0x6ae122fa
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -63759,12 +63758,12 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1eee
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC employee
 {
-	Name	<employee> the beggar the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
+	Name	<employee> the beggar the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter the fighter
 	Serial	0x1a1eef
 	ObjType	0x190
 	Graphic	0x190
@@ -63773,7 +63772,7 @@
 	Y	3828
 	Z	0
 	Facing	5
-	Revision	34
+	Revision	35
 	Realm	britannia
 	CProp	AiSerial i1711855
 	CProp	Anchor a3:i1374i3828i0
@@ -63809,7 +63808,7 @@
 
 Item
 {
-	Serial	0x6ae12071
+	Serial	0x6ae12306
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -63819,7 +63818,7 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1eef
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC grizzly
@@ -63853,7 +63852,7 @@
 	CreatedAt	0
 	AR	12
 	script	killPCs
-	SpeechColor	14
+	SpeechColor	42
 }
 
 NPC bird
@@ -63891,7 +63890,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	37
+	SpeechColor	36
 }
 
 NPC bird
@@ -63904,7 +63903,7 @@
 	X	1472
 	Y	635
 	Z	0
-	Facing	5
+	Facing	4
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711858
@@ -63929,7 +63928,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	63
+	SpeechColor	902
 }
 
 NPC Rabbit
@@ -63939,7 +63938,7 @@
 	ObjType	0xcd
 	Graphic	0xcd
 	X	1082
-	Y	490
+	Y	491
 	Z	1
 	Facing	4
 	Revision	0
@@ -63964,7 +63963,7 @@
 	CreatedAt	0
 	AR	4
 	script	barker
-	SpeechColor	97
+	SpeechColor	32
 }
 
 NPC ratman2
@@ -63973,7 +63972,7 @@
 	Serial	0x1a1ef4
 	ObjType	0x2c
 	Graphic	0x2c
-	X	1373
+	X	1372
 	Y	548
 	Z	1
 	Facing	6
@@ -63999,7 +63998,7 @@
 	CreatedAt	0
 	AR	14
 	script	killPCs
-	SpeechColor	52
+	SpeechColor	54
 }
 
 Item
@@ -64026,7 +64025,7 @@
 	X	1306
 	Y	643
 	Z	6
-	Facing	5
+	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711861
@@ -64049,7 +64048,7 @@
 	CreatedAt	0
 	AR	14
 	script	killPCs
-	SpeechColor	160
+	SpeechColor	202
 }
 
 Item
@@ -64074,7 +64073,7 @@
 	ObjType	0x12
 	Graphic	0x12
 	X	1334
-	Y	619
+	Y	620
 	Z	6
 	Facing	4
 	Revision	0
@@ -64100,7 +64099,7 @@
 	CreatedAt	0
 	AR	19
 	script	killPCs
-	SpeechColor	12
+	SpeechColor	7
 }
 
 Item
@@ -64151,7 +64150,7 @@
 	CreatedAt	0
 	AR	19
 	script	killPCs
-	SpeechColor	54
+	SpeechColor	101
 }
 
 Item
@@ -64176,7 +64175,7 @@
 	ObjType	0xe4
 	Graphic	0xe4
 	X	1130
-	Y	553
+	Y	552
 	Z	1
 	Revision	0
 	Realm	britannia
@@ -64201,7 +64200,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	340
+	SpeechColor	578
 }
 
 NPC horse
@@ -64237,7 +64236,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	707
+	SpeechColor	243
 }
 
 NPC wanderingHealer
@@ -64274,7 +64273,7 @@
 	CreatedAt	0
 	AR	32
 	script	davesHealer
-	SpeechColor	34
+	SpeechColor	97
 }
 
 Item
@@ -64332,14 +64331,14 @@
 	Serial	0x1a1efb
 	ObjType	0xdd
 	Graphic	0xdd
-	X	4486
+	X	4485
 	Y	1400
 	Z	23
 	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711867
-	CProp	Anchor a3:i4487i1400i23
+	CProp	Anchor a3:i4486i1400i23
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S16:moonglow_zoo_iceS7:zoo_ice
@@ -64360,7 +64359,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	150
+	SpeechColor	32
 }
 
 NPC alligator
@@ -64369,7 +64368,7 @@
 	Serial	0x1a1efc
 	ObjType	0xca
 	Graphic	0xca
-	X	4553
+	X	4554
 	Y	1336
 	Z	8
 	Facing	2
@@ -64396,7 +64395,7 @@
 	CreatedAt	0
 	AR	15
 	script	killPCs
-	SpeechColor	193
+	SpeechColor	12
 }
 
 NPC alligator
@@ -64406,7 +64405,7 @@
 	ObjType	0xca
 	Graphic	0xca
 	X	4485
-	Y	1344
+	Y	1343
 	Z	8
 	Revision	0
 	Realm	britannia
@@ -64431,7 +64430,7 @@
 	CreatedAt	0
 	AR	15
 	script	killPCs
-	SpeechColor	34
+	SpeechColor	12
 }
 
 NPC corpser
@@ -64466,7 +64465,7 @@
 	CreatedAt	0
 	AR	15
 	script	immobile
-	SpeechColor	404
+	SpeechColor	160
 }
 
 Item
@@ -64516,7 +64515,7 @@
 	CreatedAt	0
 	AR	8
 	script	animal
-	SpeechColor	97
+	SpeechColor	404
 }
 
 NPC Rabbit
@@ -64525,14 +64524,14 @@
 	Serial	0x1a1f00
 	ObjType	0xcd
 	Graphic	0xcd
-	X	1024
-	Y	338
+	X	1025
+	Y	337
 	Z	1
 	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711872
-	CProp	Anchor a3:i1023i339i0
+	CProp	Anchor a3:i1024i338i1
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:n_yew_e_penninsulaS13:forestanimals
@@ -64551,7 +64550,7 @@
 	CreatedAt	0
 	AR	4
 	script	barker
-	SpeechColor	12
+	SpeechColor	98
 }
 
 NPC eagle
@@ -64560,14 +64559,14 @@
 	Serial	0x1a1f01
 	ObjType	0x5
 	Graphic	0x5
-	X	952
-	Y	310
+	X	953
+	Y	309
 	Z	0
 	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711873
-	CProp	Anchor a3:i951i311i0
+	CProp	Anchor a3:i952i310i0
 	CProp	Fame i1
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:n_yew_e_penninsulaS13:forestanimals
@@ -64587,7 +64586,7 @@
 	CreatedAt	0
 	AR	11
 	script	animal
-	SpeechColor	52
+	SpeechColor	17
 }
 
 NPC deer
@@ -64597,12 +64596,12 @@
 	ObjType	0xed
 	Graphic	0xed
 	X	939
-	Y	349
+	Y	348
 	Z	0
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711874
-	CProp	Anchor a3:i939i350i0
+	CProp	Anchor a3:i939i349i0
 	CProp	Fame i2
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:n_yew_e_penninsulaS13:forestanimals
@@ -64622,7 +64621,7 @@
 	CreatedAt	0
 	AR	8
 	script	animal
-	SpeechColor	196
+	SpeechColor	7
 }
 
 NPC deer
@@ -64631,14 +64630,14 @@
 	Serial	0x1a1f03
 	ObjType	0xed
 	Graphic	0xed
-	X	1020
+	X	1019
 	Y	379
 	Z	0
 	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711875
-	CProp	Anchor a3:i1021i379i0
+	CProp	Anchor a3:i1020i379i0
 	CProp	Fame i2
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:n_yew_e_penninsulaS13:forestanimals
@@ -64658,7 +64657,7 @@
 	CreatedAt	0
 	AR	8
 	script	animal
-	SpeechColor	572
+	SpeechColor	12
 }
 
 NPC ghart
@@ -64670,11 +64669,11 @@
 	X	1002
 	Y	339
 	Z	0
-	Facing	5
+	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711876
-	CProp	Anchor a3:i1003i338i0
+	CProp	Anchor a3:i1002i339i0
 	CProp	Fame i3
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S18:n_yew_e_penninsulaS13:forestanimals
@@ -64693,7 +64692,7 @@
 	CreatedAt	0
 	AR	12
 	script	animal
-	SpeechColor	34
+	SpeechColor	12
 }
 
 NPC eagle
@@ -64705,7 +64704,7 @@
 	X	1025
 	Y	294
 	Z	0
-	Facing	4
+	Facing	5
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711877
@@ -64729,7 +64728,7 @@
 	CreatedAt	0
 	AR	11
 	script	animal
-	SpeechColor	901
+	SpeechColor	228
 }
 
 NPC gargoyle
@@ -64739,7 +64738,7 @@
 	ObjType	0x4
 	Graphic	0x4
 	X	830
-	Y	406
+	Y	405
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -64765,7 +64764,7 @@
 	CreatedAt	0
 	AR	22
 	script	spellKillPCs
-	SpeechColor	17
+	SpeechColor	53
 }
 
 Item
@@ -64789,8 +64788,8 @@
 	Serial	0x1a1f07
 	ObjType	0xd1
 	Graphic	0xd1
-	X	830
-	Y	385
+	X	831
+	Y	386
 	Z	0
 	Facing	3
 	Revision	0
@@ -64816,7 +64815,7 @@
 	CreatedAt	0
 	AR	5
 	script	animal
-	SpeechColor	8
+	SpeechColor	7
 }
 
 NPC pig
@@ -64825,9 +64824,9 @@
 	Serial	0x1a1f08
 	ObjType	0xcb
 	Graphic	0xcb
-	X	849
-	Y	383
-	Z	0
+	X	848
+	Y	382
+	Z	1
 	Facing	7
 	Revision	0
 	Realm	britannia
@@ -64852,7 +64851,7 @@
 	CreatedAt	0
 	AR	6
 	script	barker
-	SpeechColor	80
+	SpeechColor	438
 }
 
 NPC sheep
@@ -64989,7 +64988,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	18
+	SpeechColor	207
 }
 
 NPC walrus
@@ -64998,14 +64997,14 @@
 	Serial	0x1a1f0c
 	ObjType	0xdd
 	Graphic	0xdd
-	X	5219
+	X	5220
 	Y	2330
-	Z	30
+	Z	31
 	Facing	2
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711884
-	CProp	Anchor a3:i5218i2330i29
+	CProp	Anchor a3:i5219i2330i30
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S14:nw iceland t2aS13:arcticanimals
@@ -65038,11 +65037,10 @@
 	X	5172
 	Y	2369
 	Z	17
-	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711885
-	CProp	Anchor a3:i5173i2370i22
+	CProp	Anchor a3:i5172i2369i17
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S14:nw iceland t2aS13:arcticanimals
@@ -65063,7 +65061,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	54
+	SpeechColor	32
 }
 
 NPC walrus
@@ -65073,8 +65071,8 @@
 	ObjType	0xdd
 	Graphic	0xdd
 	X	5177
-	Y	2386
-	Z	20
+	Y	2385
+	Z	19
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711886
@@ -65099,7 +65097,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	71
+	SpeechColor	228
 }
 
 NPC walrus
@@ -65111,6 +65109,7 @@
 	X	5168
 	Y	2313
 	Z	-5
+	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711887
@@ -65135,7 +65134,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	196
+	SpeechColor	228
 }
 
 NPC bird
@@ -65145,9 +65144,9 @@
 	ObjType	0x6
 	Graphic	0x6
 	Color	0x1c0
-	X	5845
-	Y	3990
-	Z	14
+	X	5844
+	Y	3991
+	Z	15
 	Facing	5
 	Revision	0
 	Realm	britannia
@@ -65173,7 +65172,7 @@
 	CreatedAt	0
 	AR	1
 	script	animal
-	SpeechColor	362
+	SpeechColor	442
 }
 
 NPC ettin
@@ -65207,7 +65206,7 @@
 	CreatedAt	0
 	AR	19
 	script	killPCs
-	SpeechColor	902
+	SpeechColor	17
 }
 
 Item
@@ -65231,8 +65230,8 @@
 	Serial	0x1a1f12
 	ObjType	0x16
 	Graphic	0x16
-	X	5576
-	Y	3823
+	X	5577
+	Y	3824
 	Z	14
 	Facing	3
 	Revision	0
@@ -65259,7 +65258,7 @@
 	CreatedAt	0
 	AR	22
 	script	spellKillPCs
-	SpeechColor	98
+	SpeechColor	54
 }
 
 Item
@@ -65309,7 +65308,7 @@
 	CreatedAt	0
 	AR	14
 	script	killPCs
-	SpeechColor	572
+	SpeechColor	903
 }
 
 Item
@@ -65360,7 +65359,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	348
+	SpeechColor	442
 }
 
 NPC wanderingHealer
@@ -65397,7 +65396,7 @@
 	CreatedAt	0
 	AR	32
 	script	davesHealer
-	SpeechColor	537
+	SpeechColor	14
 }
 
 Item
@@ -65459,6 +65458,7 @@
 	X	5143
 	Y	3830
 	Z	0
+	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711894
@@ -65482,7 +65482,7 @@
 	CreatedAt	0
 	AR	8
 	script	animal
-	SpeechColor	901
+	SpeechColor	12
 }
 
 NPC orclord
@@ -65492,7 +65492,7 @@
 	ObjType	0x7
 	Graphic	0x7
 	X	5196
-	Y	3808
+	Y	3807
 	Z	12
 	Revision	0
 	Realm	britannia
@@ -65516,7 +65516,7 @@
 	CreatedAt	0
 	AR	35
 	script	killPCs
-	SpeechColor	37
+	SpeechColor	7
 }
 
 Item
@@ -65540,9 +65540,9 @@
 	Serial	0x1a1f18
 	ObjType	0xcc
 	Graphic	0xcc
-	X	5244
-	Y	3815
-	Z	-1
+	X	5245
+	Y	3816
+	Z	0
 	Facing	3
 	Revision	0
 	Realm	britannia
@@ -65567,7 +65567,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	192
+	SpeechColor	442
 }
 
 NPC horse3
@@ -65579,11 +65579,10 @@
 	X	5178
 	Y	3810
 	Z	2
-	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711897
-	CProp	Anchor a3:i5177i3811i1
+	CProp	Anchor a3:i5178i3810i2
 	CProp	Fame i4
 	CProp	Karma i5
 	CProp	SpawnRegion a2:S23:past hills n of deluciaS6:horses
@@ -65603,7 +65602,7 @@
 	CreatedAt	0
 	AR	9
 	script	barker
-	SpeechColor	340
+	SpeechColor	572
 }
 
 NPC ratman1
@@ -65612,9 +65611,9 @@
 	Serial	0x1a1f1a
 	ObjType	0x2a
 	Graphic	0x2a
-	X	5824
-	Y	3372
-	Z	1
+	X	5823
+	Y	3373
+	Z	2
 	Facing	5
 	Revision	0
 	Realm	britannia
@@ -65638,7 +65637,7 @@
 	CreatedAt	0
 	AR	14
 	script	killPCs
-	SpeechColor	903
+	SpeechColor	80
 }
 
 Item
@@ -65662,7 +65661,7 @@
 	Serial	0x1a1f1b
 	ObjType	0x10
 	Graphic	0x10
-	X	5791
+	X	5792
 	Y	3386
 	Z	-10
 	Facing	2
@@ -65692,7 +65691,7 @@
 	CreatedAt	0
 	AR	25
 	script	spellKillPCs
-	SpeechColor	442
+	SpeechColor	19
 }
 
 Item
@@ -65717,7 +65716,7 @@
 	ObjType	0xca
 	Graphic	0xca
 	X	3646
-	Y	2119
+	Y	2120
 	Z	23
 	Facing	4
 	Revision	0
@@ -65743,7 +65742,7 @@
 	CreatedAt	0
 	AR	15
 	script	killPCs
-	SpeechColor	32
+	SpeechColor	12
 }
 
 NPC alligator
@@ -65755,6 +65754,7 @@
 	X	4525
 	Y	1355
 	Z	23
+	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711901
@@ -65778,7 +65778,7 @@
 	CreatedAt	0
 	AR	15
 	script	killPCs
-	SpeechColor	71
+	SpeechColor	707
 }
 
 NPC alligator
@@ -65790,7 +65790,7 @@
 	X	4505
 	Y	1386
 	Z	23
-	Facing	7
+	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711902
@@ -65814,7 +65814,7 @@
 	CreatedAt	0
 	AR	15
 	script	killPCs
-	SpeechColor	18
+	SpeechColor	71
 }
 
 NPC walrus
@@ -65823,14 +65823,14 @@
 	Serial	0x1a1f1f
 	ObjType	0xdd
 	Graphic	0xdd
-	X	4513
+	X	4512
 	Y	1398
 	Z	23
 	Facing	6
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711903
-	CProp	Anchor a3:i4514i1398i23
+	CProp	Anchor a3:i4513i1398i23
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S16:moonglow_zoo_iceS7:zoo_ice
@@ -65851,7 +65851,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	19
+	SpeechColor	63
 }
 
 NPC alligator
@@ -65863,7 +65863,7 @@
 	X	4491
 	Y	1386
 	Z	23
-	Facing	4
+	Facing	5
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711904
@@ -65887,7 +65887,7 @@
 	CreatedAt	0
 	AR	15
 	script	killPCs
-	SpeechColor	348
+	SpeechColor	243
 }
 
 NPC alligator
@@ -65897,7 +65897,7 @@
 	ObjType	0xca
 	Graphic	0xca
 	X	2055
-	Y	1006
+	Y	1005
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -65922,7 +65922,7 @@
 	CreatedAt	0
 	AR	15
 	script	killPCs
-	SpeechColor	700
+	SpeechColor	572
 }
 
 NPC alligator
@@ -65932,7 +65932,7 @@
 	ObjType	0xca
 	Graphic	0xca
 	X	2026
-	Y	1013
+	Y	1012
 	Z	0
 	Revision	0
 	Realm	britannia
@@ -65957,12 +65957,12 @@
 	CreatedAt	0
 	AR	15
 	script	killPCs
-	SpeechColor	48
+	SpeechColor	32
 }
 
 NPC employee
 {
-	Name	<employee> the fighter the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief
+	Name	<employee> the fighter the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief the thief
 	Serial	0x1a1f23
 	ObjType	0x190
 	Graphic	0x191
@@ -65971,7 +65971,7 @@
 	Y	1215
 	Z	0
 	Facing	4
-	Revision	33
+	Revision	34
 	Realm	britannia
 	CProp	AiSerial i1711907
 	CProp	Anchor a3:i2236i1215i0
@@ -66006,7 +66006,7 @@
 
 Item
 {
-	Serial	0x6ae1207f
+	Serial	0x6ae12314
 	ObjType	0x2046
 	Graphic	0x2046
 	Color	0x34
@@ -66018,12 +66018,12 @@
 	CProp	faceloc i11
 	Layer	11
 	Container	0x1a1f23
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae1207b
+	Serial	0x6ae12310
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -66033,12 +66033,12 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1f23
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC employee
 {
-	Name	<employee> the paladin the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage
+	Name	<employee> the paladin the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage the mage
 	Serial	0x1a1f24
 	ObjType	0x190
 	Graphic	0x190
@@ -66047,7 +66047,7 @@
 	Y	1206
 	Z	0
 	Facing	5
-	Revision	33
+	Revision	34
 	Realm	britannia
 	CProp	AiSerial i1711908
 	CProp	Anchor a3:i2222i1206i0
@@ -66084,7 +66084,7 @@
 
 Item
 {
-	Serial	0x6ae12084
+	Serial	0x6ae12319
 	ObjType	0x204a
 	Graphic	0x204a
 	Color	0x39a
@@ -66096,12 +66096,12 @@
 	CProp	faceloc i11
 	Layer	11
 	Container	0x1a1f24
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12080
+	Serial	0x6ae12315
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -66111,12 +66111,12 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1f24
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC employee
 {
-	Name	<employee> the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar
+	Name	<employee> the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar the beggar
 	Serial	0x1a1f25
 	ObjType	0x190
 	Graphic	0x190
@@ -66125,7 +66125,7 @@
 	Y	1194
 	Z	0
 	Facing	7
-	Revision	33
+	Revision	34
 	Realm	britannia
 	CProp	AiSerial i1711909
 	CProp	Anchor a3:i2214i1194i0
@@ -66155,7 +66155,7 @@
 
 Item
 {
-	Serial	0x6ae12089
+	Serial	0x6ae1231e
 	ObjType	0x2047
 	Graphic	0x2047
 	Color	0x386
@@ -66167,12 +66167,12 @@
 	CProp	faceloc i11
 	Layer	11
 	Container	0x1a1f25
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 Item
 {
-	Serial	0x6ae12085
+	Serial	0x6ae1231a
 	ObjType	0xe75
 	Graphic	0xe75
 	X	1
@@ -66182,7 +66182,7 @@
 	Realm	britannia
 	Layer	21
 	Container	0x1a1f25
-	DecayAt	25191006
+	DecayAt	25191073
 }
 
 NPC walrus
@@ -66194,6 +66194,7 @@
 	X	4305
 	Y	550
 	Z	-5
+	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711910
@@ -66218,7 +66219,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	438
+	SpeechColor	80
 }
 
 NPC walrus
@@ -66230,6 +66231,7 @@
 	X	4071
 	Y	613
 	Z	-5
+	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711911
@@ -66254,7 +66256,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	442
+	SpeechColor	901
 }
 
 NPC walrus
@@ -66266,7 +66268,7 @@
 	X	3866
 	Y	189
 	Z	-5
-	Facing	2
+	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711912
@@ -66291,7 +66293,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	243
+	SpeechColor	97
 }
 
 NPC walrus
@@ -66300,14 +66302,14 @@
 	Serial	0x1a1f29
 	ObjType	0xdd
 	Graphic	0xdd
-	X	3951
-	Y	343
+	X	3950
+	Y	342
 	Z	0
 	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711913
-	CProp	Anchor a3:i3952i344i0
+	CProp	Anchor a3:i3951i343i0
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S10:ice islandS13:arcticanimals
@@ -66328,7 +66330,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	442
+	SpeechColor	572
 }
 
 NPC walrus
@@ -66337,14 +66339,14 @@
 	Serial	0x1a1f2a
 	ObjType	0xdd
 	Graphic	0xdd
-	X	4032
+	X	4033
 	Y	581
 	Z	0
 	Facing	2
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711914
-	CProp	Anchor a3:i4031i581i0
+	CProp	Anchor a3:i4032i581i0
 	CProp	Fame i5
 	CProp	Karma i0
 	CProp	SpawnRegion a2:S10:ice islandS13:arcticanimals
@@ -66365,7 +66367,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	19
+	SpeechColor	150
 }
 
 NPC walrus
@@ -66377,7 +66379,7 @@
 	X	4021
 	Y	376
 	Z	-5
-	Facing	6
+	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711915
@@ -66402,7 +66404,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	707
+	SpeechColor	37
 }
 
 NPC alligator
@@ -66412,7 +66414,7 @@
 	ObjType	0xca
 	Graphic	0xca
 	X	1897
-	Y	2272
+	Y	2273
 	Z	0
 	Facing	4
 	Revision	0
@@ -66438,7 +66440,7 @@
 	CreatedAt	0
 	AR	15
 	script	killPCs
-	SpeechColor	71
+	SpeechColor	340
 }
 
 NPC walrus
@@ -66475,7 +66477,7 @@
 	CreatedAt	0
 	AR	9
 	script	animal
-	SpeechColor	18
+	SpeechColor	537
 }
 
 NPC bear
@@ -66487,7 +66489,6 @@
 	X	5291
 	Y	3824
 	Z	-2
-	Facing	7
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711918
@@ -66511,7 +66512,7 @@
 	CreatedAt	0
 	AR	12
 	script	animal
-	SpeechColor	48
+	SpeechColor	97
 }
 
 NPC ettin2
@@ -66521,8 +66522,8 @@
 	ObjType	0x12
 	Graphic	0x12
 	X	5242
-	Y	3829
-	Z	2
+	Y	3828
+	Z	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711919
@@ -66546,7 +66547,7 @@
 	CreatedAt	0
 	AR	19
 	script	killPCs
-	SpeechColor	9
+	SpeechColor	7
 }
 
 Item
@@ -66573,6 +66574,7 @@
 	X	5178
 	Y	3811
 	Z	-1
+	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711920
@@ -66597,7 +66599,7 @@
 	CreatedAt	0
 	AR	22
 	script	spellKillPCs
-	SpeechColor	160
+	SpeechColor	9
 }
 
 Item
@@ -66622,8 +66624,8 @@
 	ObjType	0xd
 	Graphic	0xd
 	Color	0x3c4
-	X	2209
-	Y	1338
+	X	2208
+	Y	1339
 	Z	-5
 	Facing	5
 	Revision	0
@@ -66652,7 +66654,7 @@
 	CreatedAt	0
 	AR	25
 	script	spellKillPCs
-	SpeechColor	37
+	SpeechColor	160
 }
 
 Item
@@ -66676,7 +66678,7 @@
 	Serial	0x1a1f32
 	ObjType	0xca
 	Graphic	0xca
-	X	1160
+	X	1161
 	Y	2768
 	Z	0
 	Facing	2
@@ -66703,7 +66705,7 @@
 	CreatedAt	0
 	AR	15
 	script	killPCs
-	SpeechColor	42
+	SpeechColor	707
 }
 
 NPC wolf
@@ -66715,6 +66717,7 @@
 	X	5805
 	Y	3381
 	Z	-10
+	Facing	1
 	Revision	0
 	Realm	britannia
 	CProp	AiSerial i1711923
@@ -66738,7 +66741,7 @@
 	CreatedAt	0
 	AR	9
 	script	wolf
-	SpeechColor	87
+	SpeechColor	340
 }
 
 NPC stablemaster
@@ -66761,8 +66764,8 @@
 	CProp	MerchantType sstable
 	CProp	MyGold i9615
 	CProp	Pets a0:
-	CProp	counter i219
-	CProp	countercheck i25190405
+	CProp	counter i220
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	mypen s6
 	CProp	restockserial i1793081519
@@ -66784,7 +66787,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	207
+	SpeechColor	14
 }
 
 Item
@@ -66838,8 +66841,8 @@
 	CProp	MerchantType sstable
 	CProp	MyGold i1750
 	CProp	Pets a0:
-	CProp	counter i219
-	CProp	countercheck i25190405
+	CProp	counter i220
+	CProp	countercheck i25190473
 	CProp	guardkill i1
 	CProp	mypen s7
 	CProp	restockserial i1793081518
@@ -66860,7 +66863,7 @@
 	CreatedAt	0
 	AR	32
 	script	stablemaster
-	SpeechColor	97
+	SpeechColor	12
 }
 
 Item
@@ -68187,7 +68190,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	34
+	SpeechColor	80
 }
 
 Item
@@ -68258,7 +68261,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	19
+	SpeechColor	558
 }
 
 Item
@@ -68346,7 +68349,7 @@
 	CreatedAt	0
 	AR	32
 	script	townHealer
-	SpeechColor	150
+	SpeechColor	648
 }
 
 Item

Modified: trunk/096/data/pol.txt
===================================================================
--- trunk/096/data/pol.txt	2005-09-04 13:10:41 UTC (rev 50)
+++ trunk/096/data/pol.txt	2005-09-04 13:15:12 UTC (rev 51)
@@ -1,16 +1,16 @@
 #
-#  Created by Version: POL096-2005-07-05
+#  Created by Version: POL096-2005-08-29
 #  Mobiles:         1033
-#  Top-level Items: 16013
+#  Top-level Items: 16015
 #
 
 System
 {
 	CoreVersion	96
-	CoreVersionString	POL096-2005-07-05
-	CompileDate	Jul 28 2005
-	CompileTime	03:37:39
-	LastItemSerialNumber	1793139142
+	CoreVersionString	POL096-2005-08-29
+	CompileDate	Aug 29 2005
+	CompileTime	19:51:09
+	LastItemSerialNumber	1793139834
 	LastCharSerialNumber	1711924
 }
 
@@ -18,10 +18,10 @@
 {
 	CProp	SystemTeleportersCreated i1
 	CProp	TimeStamp t3:S5:monthi8S3:sumi1122854400S4:yeari2005
-	CProp	Weather a8:i0i0i2i0i18i16i0i0
+	CProp	Weather a8:i0i0i2i0i18i17i0i0
 	CProp	day i2
-	CProp	gameclock s25190478
-	CProp	nextlockid i1243
+	CProp	gameclock s25190493
+	CProp	nextlockid i1256
 	CProp	orelist d0:
 	CProp	r117ghorses i-1
 	CProp	r25gdomestic i-2



From austin at berlios.de  Sun Sep  4 18:17:41 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 4 Sep 2005 18:17:41 +0200
Subject: [Poldistro-svn] r54 - in trunk/096/pkg/mobiles: . ai_brain ai_brain/include ai_brain/include/braincore
Message-ID: <200509041617.j84GHf3M000043@sheep.berlios.de>

Author: austin
Date: 2005-09-04 18:17:40 +0200 (Sun, 04 Sep 2005)
New Revision: 54

Added:
   trunk/096/pkg/mobiles/ai_brain/
   trunk/096/pkg/mobiles/ai_brain/brain.src
   trunk/096/pkg/mobiles/ai_brain/include/
   trunk/096/pkg/mobiles/ai_brain/include/braincore/
   trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
   trunk/096/pkg/mobiles/ai_brain/include/eventid.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcError.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
   trunk/096/pkg/mobiles/ai_brain/pkg.cfg
Log:


Added: trunk/096/pkg/mobiles/ai_brain/brain.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-04 16:15:18 UTC (rev 53)
+++ trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-04 16:17:40 UTC (rev 54)
@@ -0,0 +1,53 @@
+/*===============================================================
+* Current Version
+* BRAIN.SRC - v5.0
+* Updated 9/1/2005 6:20AM
+*
+* NPC AI-Script to control all non-setup actions. Acts as the "brain"
+* and fires off external scripts that act as the "nerves" of the NPC.
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+use npc;
+use cfgfile;
+use polsys;
+
+include "include/sysEvent";
+include ":ai_brain:include/braincore/error";
+include ":ai_brain:include/braincore/eventProcessor";
+include ":ai_brain:include/braincore/movement";
+include ":ai_brain:include/braincore/setup";
+include ":ai_brain:include/eventid";
+include ":ai_brain:include/npcCommands";
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcSettings";
+include ":ai_brain:include/npcUtil";
+
+//
+// * Global variables
+//
+var npc := Self();
+var idle_ticks := 0;
+var sleep_mode := 0;
+var g_settings := dictionary; //"setting name"->value
+var g_scripts := dictionary; // "script type"->value{.flags, .script}
+var g_nerves := dictionary; // "nerve name"->value{.flags, .pid}
+
+program BrainAI()
+	//Run setup steps for the npc.
+	set_critical(1);
+	InitializeSettings();
+	InitializeEvents();
+	set_critical(1);
+	StartupScripts();
+	
+	while ( npc )
+		var ev := Wait_For_Event(g_settings["cycle_wait"]);
+		ProcessEvent(ev);
+	endwhile
+endprogram

Added: trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc	2005-09-04 16:15:18 UTC (rev 53)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc	2005-09-04 16:17:40 UTC (rev 54)
@@ -0,0 +1,41 @@
+/*===============================================================
+* Current Version
+* ERROR.INC - v1.0
+* Updated 8/31/2005 5:08AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+/*
+ * FatalError(errmsg)
+ *
+ * Purpose
+ * Logs an error message and then kills the npc.
+ *
+ * Parameters
+ * errmsg:	Error message - reason for removing the npc.
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function FatalError(errmsg)
+	set_critical(1);
+	
+	PrintTextAbove(npc, errmsg, _DEFAULT_TEXT_FONT, 32);
+	
+	NPC_ErrorSysLog(npc, errmsg);
+	
+	npc.cmdlevel := 1;
+	npc.concealed := 1;
+	
+	npc.disable("invul");
+	SetObjProperty(npc, "GuardKill", 1);
+	ApplyRawDamage(npc, GetVitalMaximumValue(npc, "Hits"));
+	
+	set_critical(0);
+	
+	return 1;
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-04 16:15:18 UTC (rev 53)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-04 16:17:40 UTC (rev 54)
@@ -0,0 +1,299 @@
+/*===============================================================
+* Current Version
+* EVENTPROCESSOR.INC - v1.0
+* Updated 9/1/2005 6:20AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+function ProcessEvent(byref event)
+	var old_priority := set_priority(25);
+	
+	case( event.type )
+		//
+		// *Check movement first, since its the event that seems to be sent most often.
+		//
+		
+		// Move NPC
+		// .source	: From/To whom/what?
+		// .speed	: Walk/Run
+		// .direction	: Away/Towards
+		// .loop	: Number of times to attempt to loop the movement.
+		NPCEVENT_MOVE:
+			Movement(event);
+			break;
+			
+		// Instructs the npc to walk toward an XY coordinate.
+		// .x and .y	: From/To  coordinates
+		// .speed	: Walk/Run
+		// .direction	: Away/Towards
+		// .loop	: Number of times to attempt to loop the movement.
+		NPCEVENT_MOVE_XY:
+			MovementXY(event);
+			break;
+			
+		// Wander somewhere
+		// .loop	: Number of times to attept to wander.
+		NPCEVENT_WANDER:
+	   		MovementWander(event);
+	   		break;
+		
+		//
+		// * Check System Events that the core sends.
+		//
+			
+		// Triggered when a mobile enter's the npcs 'area size'.
+		// .source	: What entered the area
+		SYSEVENT_ENTEREDAREA:
+			if ( g_scripts.Exists("EnterArea") )
+				var process := GetNerveProcess(npc, "EnterArea", g_nerves);
+				if ( !process )
+					StartNerve(npc, "EnterArea", g_scripts["EnterArea"].script, {event, g_settings, g_scripts}, g_scripts["EnterArea"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+			
+		// Triggered when a mobile leaves the npc's 'area size'.
+		// .source	: What left the area
+		SYSEVENT_LEFTAREA:
+			if ( g_scripts.Exists("LeftArea") )
+				var process := GetNerveProcess(npc, "LeftArea", g_nerves);
+				if ( !process )
+					StartNerve(npc, "LeftArea", g_scripts["LeftArea"].script, {event, g_settings, g_scripts}, g_scripts["LeftArea"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+			
+		// Someone has changed from blue to gray/red and was already within the ENTERED_AREA range
+		// .source	: What changed criminal status.
+		SYSEVENT_GONE_CRIMINAL:
+			if ( g_scripts.Exists("ItemGiven") )
+				var process := GetNerveProcess(npc, "ItemGiven", g_nerves);
+				if ( !process )
+					StartNerve(npc, "ItemGiven", g_scripts["ItemGiven"].script, {event, g_settings, g_scripts}, g_scripts["ItemGiven"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+			
+		// Sent when something targets the npc to begin combat or
+		// when something has damaged the npc.
+		// .source	: What caused the damage or engaged the npc
+		// For SYSEVENT_DAMAGED
+		// .damaged	: Integer amount of damage.
+		SYSEVENT_ENGAGED:
+		SYSEVENT_DAMAGED:
+			if ( g_scripts.Exists("Combat") )
+				if ( (event.source).ISA(POLCLASS_MOBILE) )
+					var process := GetNerveProcess(npc, "Combat", g_nerves);
+					if ( !process )
+						StartNerve(npc, "Combat", g_scripts["Combat"].script, {event, g_settings, g_scripts}, g_scripts["Combat"].flags, g_nerves);
+					else
+						process.SendEvent(event);
+					endif
+				endif
+			endif
+			break;
+			
+		// Instructs the npc to run its disengage nerve.
+		// When something attacking it goes out of warmode, this is run.
+		// .source	: What was targetting this npc but has now left combat mode.
+		SYSEVENT_DISENGAGED:
+			if ( g_scripts.Exists("Disengaged") )
+				var process := GetNerveProcess(npc, "Disengaged", g_nerves);
+				if ( !process )
+					StartNerve(npc, "Disengaged", g_scripts["Disengaged"].script, {event, g_settings, g_scripts}, g_scripts["Disengaged"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+			
+		// When speech is made by a player, this nerve is used.
+		// Note: The NPC function Say() doesnt yet pass around the speech event.
+		// .source	: Where the speech originated.
+		// .text	: The actual speech
+		// .uc_text	: a "Unicode array" of 2-byte "Big Endian" integers.
+		// .langcode	: a 3-character, uppercase language code.
+		// .texttype	: "yell", "whisper", "emote", "default".
+		SYSEVENT_SPEECH:
+		SYSEVENT_GHOST_SPEECH:
+			if( g_scripts.Exists("Listen") )
+				var process := GetNerveProcess(npc, "Listen", g_nerves);
+				if ( !process )
+					StartNerve(npc, "Listen", g_scripts["Listen"].script, {event, g_settings, g_scripts}, g_scripts["Listen"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+			
+		// Instructs the npc to run its double click script.
+		// Run when the npc is double clicked by a player.
+		// .source	: What sent the double click
+		SYSEVENT_DOUBLECLICKED:
+			if ( g_scripts.Exists("DblClick") )
+				if ( Distance(event.source, npc) <= g_settings["dbl_click_range"] )
+					var process := GetNerveProcess(npc, "DblClick", g_nerves);
+					if ( !process )
+						StartNerve(npc, "DblClick", g_scripts["DblClick"].script, {event, g_settings, g_scripts}, g_scripts["DblClick"].flags, g_nerves);
+					else
+						process.SendEvent(event);
+					endif
+				endif
+			endif
+			break;
+			
+		// The NPC is a merchant, and has sold or purchased something.
+		// Both sold and bought events are sent to this same nerve.
+		// The best thing to do is fork it into two functions inside the
+		// nerve script to handle each event type.
+		// MERCHANT_SOLD means the merchant sold an item to the player.
+		// MERCHANT_BOUGHT means the merchatn bought something from the player.
+		//
+		// .source	: Who the merchant is selling to/buying from.
+		// .amount	: Gold amount for the sale/purchase.
+		SYSEVENT_MERCHANT_SOLD:
+		SYSEVENT_MERCHANT_BOUGHT:
+			if ( g_scripts.Exists("Merchant") )
+				var process := GetNerveProcess(npc, "Merchant", g_nerves);
+				if ( !process )
+					StartNerve(npc, "Merchant", g_scripts["Merchant"].script, {event, g_settings, g_scripts}, g_scripts["Merchant"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+			
+		// Someone has dragged an item onto the npc.
+		// .source	: What dragged the item over the npc.
+		// .item	: The item being given to the npc.
+		SYSEVENT_ITEM_GIVEN:
+			if ( g_scripts.Exists("ItemGiven") )
+				var process := GetNerveProcess(npc, "ItemGiven", g_nerves);
+				if ( !process )
+					StartNerve(npc, "ItemGiven", g_scripts["ItemGiven"].script, {event, g_settings, g_scripts}, g_scripts["ItemGiven"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+			
+		//
+		// * Check custom events
+		//
+		//A nerve has instructed the brain to kill another nerve or its self.
+		// .name	: Nerve name
+		NPCEVENT_ENDNERVE:
+			StopNerve(npc, event.name, g_nerves);
+			break;
+			
+		//A nerve has instructed the brain to start another nerve.
+		// .name	: Nerve name
+		// .script	: Nerve script
+		// .data	: array of goodies
+		NPCEVENT_STARTNERVE:
+			StartNerve(npc, event.name, event.script, event.data, event.flags, g_nerves);
+			break;
+			
+		// Set a new opponent!
+		// NOTE: Auto-sets Warmode=1!
+		// .source	: Opponent (mobile)
+		NPCEVENT_OPPONENT:
+			SetOpponent(event.source);
+			break;
+			
+		// Say something
+		// .text	: Speech content
+		// .texttype	: Speech type ("default", "whisper", yell")
+		// .doevent	: Sends SYSEVENT_SPEECH to surrounding npcs
+		NPCEVENT_SPEAK:
+			Say(event.text, event.texttype, event.doevent);
+			break;
+			
+		// Turn toward something
+		// .source	: Target (anything)
+		// .direction	: NETURN_TOWARD or NETURN_AWAY
+		NPCEVENT_TURN:
+			case (event.direction)
+				NETURN_TOWARD:
+					TurnToward(event.source);
+				NETURN_AWAY:
+					TurnAwayFrom(event.source);
+			endcase
+			break;
+			
+		// Face towards or away from XY coordinates.
+		// .x and .y replace .source for TURN_XY
+		// .direction	: NETURN_TOWARD or NETURN_AWAY
+		NPCEVENT_TURN_XY:
+			case (event.direction)
+				NETURN_TOWARD:
+					TurnTowardLocation(event.x, event.y);
+				NETURN_AWAY:
+					TurnAwayFromLocation(event.x, event.y);
+			endcase
+			break;
+			
+		// Set WarMode state
+		// NOTE: Auto-clears Opponent if turned off!
+		// .value : 0=Off. 1=On.
+		NPCEVENT_WARMODE:
+			SetWarmode( event.value );
+			break;
+	   		
+	   	// Force the npc to go into its sleep mode.
+	   	// If the next event in the queue tells it to wake up,
+	   	// this command will be useless.
+	   	NPCEVENT_SLEEP:
+	   		//idle_ticks := g_settings["idle_ticks"]+1;
+	   		break;
+	   		
+	   	// Force the npc out of sleep mode.
+	   	NPCEVENT_WAKEUP:
+	   		//sleep_mode := 0;
+	   		//idle_ticks := 0;
+	   		break;
+	   		
+	   	// Forward an event from one nerve to another.
+	   	// .NerveName	: The name of the nerve to forward the event to.
+	   	// .mask	: Type of event for the nerve to receive.
+	   	// .data	: Data to forward to the nerve.
+	   	NPCEVENT_FWDNERVE:
+	   	var process := GetNerveProcess(npc, event.NerveName, g_nerves);
+			if ( process )
+				process.SendEvent(event);
+			endif
+			break;
+			
+		// If the event .type is unknown, send it to the
+		// npc's "virtual" nerve if it has one.
+	   	default:
+	   		if ( g_scripts.Exists("Virtual") )
+	   			var process := GetNerveProcess(npc, "Virtual", g_nerves);
+				if ( !process )
+					StartNerve(npc, "Virtual", g_scripts["Virtual"].script, {event, g_settings, g_scripts}, g_scripts["Virtual"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+	   endcase
+
+	   // If the event has a .process member, reply to it by sending
+	   // an event with .type being the NPCEVENT_DONE constant
+	   // and telling it what event it sent that has finished
+	   // being processed.
+	   if ( event.process )
+	   	(event.process).SendEvent(struct{"type":=NPCEVENT_DONE, "source":=event.type});
+	   endif
+	   
+	   set_priority(old_priority);
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc	2005-09-04 16:15:18 UTC (rev 53)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc	2005-09-04 16:17:40 UTC (rev 54)
@@ -0,0 +1,168 @@
+/*===============================================================
+* Current Version
+* MOVEMENT.INC - v1.0
+* Updated 9/1/2005 6:42AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+/*
+ * Movement(ev)
+ *
+ * Purpose
+ * Handles NPC movenpcnt to/from an object for the brain.
+ *
+ * Parameters
+ * ev:	Strucuture containing event information.
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function Movement(ev)
+	var old_pri := set_priority(50);
+	
+	case ( ev.speed )
+		NEMOVE_WALK:
+			case ( ev.direction )
+				NEMOVE_AWAY:
+					repeat
+						WalkAwayFrom(ev.source);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+				NEMOVE_TOWARD:
+					repeat
+						WalkToward(ev.source);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+			endcase	
+		NEMOVE_RUN:
+			case( ev.direction )
+				NEMOVE_AWAY:
+					repeat
+						RunAWayFrom(ev.source);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );	
+				NEMOVE_TOWARD:
+					repeat
+						RunToward(ev.source);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+			endcase
+	endcase
+	
+	set_priority(old_pri);
+	
+	return 1;
+endfunction
+
+/*
+ * MovementXY(ev)
+ *
+ * Purpose
+ * Handles NPC movement to/from a coordinate for the brain.
+ *
+ * Parameters
+ * ev:	Strucuture containing event information.
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function MovementXY(ev)
+	var old_pri := set_priority(50);
+	
+	case ( ev.speed )
+		NEMOVE_WALK:
+			case ( ev.direction )
+				NEMOVE_AWAY:
+					repeat
+						WalkAwayFromLocation(ev.x, ev.y);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+				NEMOVE_TOWARD:
+					repeat
+						WalkTowardLocation(ev.x, ev.y);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+			endcase	
+		NEMOVE_RUN:
+			case( ev.direction )
+				NEMOVE_AWAY:
+					repeat
+						RunAwayFromLocation(ev.x, ev.y);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );	
+				NEMOVE_TOWARD:
+					repeat
+						RunTowardLocation(ev.x, ev.y);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+			endcase
+	endcase
+	
+	set_priority(old_pri);
+	
+	return 1;
+endfunction
+
+/*
+ * MovementWander(ev)
+ *
+ * Purpose
+ * Handles NPC wander movement for the brain.
+ *
+ * Parameters
+ * ev:	Strucuture containing event information.
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function MovementWander(ev)
+	repeat
+		Wander();
+		sleepms(3);
+	until ( !MoveLoopCheck(ev) );
+endfunction
+
+/*
+ * MoveLoop(ev)
+ *
+ * Purpose
+ * Determines if the npc should continue trying to move
+ * or if something else needs the brain's attention.
+ *
+ * Parameters
+ * ev:	Strucuture containing event information.
+ *
+ * Return value
+ * Returns 1 if the npc may continue moving.
+ *
+ */
+function MoveLoopCheck(byref ev)
+	if ( Events_Waiting() )
+		return 0;
+	elseif ( ev.loop < 1 )
+		return 0;
+	elseif ( npc.frozen )
+		return 0;
+	elseif ( npc.paralyzed )
+		return 0;
+	endif
+	if ( ev.source )
+		// Dont need to worry about distance in an XY movement check. 
+		// It wont run in circles around XY coordinates like it does an object.
+		if ( ev.direction == NEMOVE_TOWARD )
+			if ( Distance(npc, ev.source) <= 1 )
+				return 0;
+			endif
+		endif
+	endif
+	
+	ev.loop := ev.loop-1;
+	
+	return 1;
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-04 16:15:18 UTC (rev 53)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-04 16:17:40 UTC (rev 54)
@@ -0,0 +1,133 @@
+/*===============================================================
+* Current Version
+* SETUP.INC - v1.0
+* Updated 8/31/2005 4:54AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+/*
+ * InitializeSettings()
+ * 
+ * Purpose
+ * Initializes g_settings in the brain.
+ *
+ * Parameters
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function InitializeSettings()
+	
+	g_settings := NPC_LoadTemplateSettings(npc);
+	g_settings := NPC_GetDefaultSettings(g_settings);
+	g_settings := NPC_LoadScriptSettings(npc);
+		
+	return 1;
+endfunction
+
+/*
+ * InitializeEvents()
+ *
+ * Purpose
+ * Enables system events the core sends based on g_settings
+ *
+ * Parameters
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function InitializeEvents()
+	//
+	// * Events that use the core 'speech' range.
+	//
+	if ( g_scripts.Exists("Listen") )
+		if ( g_settings["HearSpeech"] )
+			EnableEvents(SYSEVENT_SPEECH, g_settings["ListenRange"]);
+		endif
+		if ( g_settings["HearGhosts"] )
+			EnableEvents(SYSEVENT_GHOST_SPEECH, g_settings["ListenRange"]);
+		endif
+	endif
+		
+	//
+	// * Events that use the core 'area size' range.
+	//
+	if ( g_scripts.Exists("EnterArea") )
+		EnableEvents(SYSEVENT_ENTEREDAREA, g_settings["AreaSize"]);
+	endif
+	if ( g_scripts.Exists("LeftArea") )
+		EnableEvents(SYSEVENT_LEFTAREA, g_settings["AreaSize"]);
+	endif
+	if ( g_scripts.Exists("GoneCriminal") )
+		EnableEvents(SYSEVENT_GONE_CRIMINAL, g_settings["AreaSize"]);
+	endif
+	
+	//
+	// * Events that do not have a core range check.
+	//
+	if ( g_scripts.Exists("DblClick") )
+		EnableEvents(SYSEVENT_DOUBLECLICKED);
+	endif
+	if ( g_scripts.Exists("ItemGiven") )
+		EnableEvents(SYSEVENT_ITEM_GIVEN);
+	endif
+	if ( g_scripts.Exists("Disengaged") )
+		EnableEvents(SYSEVENT_DISENGAGED);
+	endif
+	if ( g_scripts.Exists("Merchant") )
+		EnableEvents(SYSEVENT_MERCHANT_BOUGHT);
+		EnableEvents(SYSEVENT_MERCHANT_SOLD);
+	endif
+	if ( g_scripts.Exists("Combat") )
+		EnableEvents(SYSEVENT_ENGAGED+SYSEVENT_DAMAGED);
+	endif
+	
+	return 1;
+endfunction
+
+/*
+ * StartupScripts()
+ *
+ * Purpose
+ * Runs the restart_script or init_script. Sets up the npc_info cprop.
+ *
+ * Parameters
+ *
+ * Return value
+ * Returns 1 on success
+ *
+ */
+function StartupScripts()
+	if ( GetObjProperty(npc, "npc_info") )
+		//This can only happen if restart() was done on the npc or when POL starts up.
+		
+		SetWarmode(0);
+		//StopNerves();
+		
+		if ( g_scripts.Exists("restart_script") )
+			var restart_script := Run_Script_To_Completion(g_scripts["restart_script"], {npc, g_settings});
+			if ( restart_script.errortext )
+				FatalError("Restart script failed:"+restart_script.errortext);
+				return 0;
+			endif
+		endif
+	else
+		var npc_info := struct{"npctemplate":=npc.npctemplate, "serial":=npc.serial};
+		SetObjProperty(npc, "npc_info", npc_info);
+		
+		if ( g_scripts.Exists("init_script") )
+			var init_script := Run_Script_To_Completion(g_scripts["init_script"], {npc, g_settings});
+			if ( init_script.errortext )
+				FatalError("Init script failed:"+init_script.errortext);
+				return 0;
+			endif
+		endif
+	endif
+	
+	return 1;
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/include/eventid.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/eventid.inc	2005-09-04 16:15:18 UTC (rev 53)
+++ trunk/096/pkg/mobiles/ai_brain/include/eventid.inc	2005-09-04 16:17:40 UTC (rev 54)
@@ -0,0 +1,70 @@
+/*===============================================================
+* Current Version
+* EVENTID.INC - v1.0
+* Updated 8/31/2005 5:50AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+//
+// * Custom brain AI event IDs
+//
+const NPCEVENT_MOVE				:= 0xA00003;	// Has NEMOVE_* helper constants
+const NPCEVENT_OPPONENT				:= 0xA00004;	// Set New Opponent (.source)
+const NPCEVENT_SPEAK				:= 0xA00005;	// Speak (.text)
+const NPCEVENT_TURN				:= 0xA00006;	// Turn towards or away from an object
+const NPCEVENT_WARMODE				:= 0xA00007;	// Set WarMode state (.value=0|1)
+const NPCEVENT_ATTACK				:= 0xA0000A;	// Tell the npc to attack something
+const NPCEVENT_MOVE_XY				:= 0xA0000B;	// Tell the NPC to move to coordinates
+const NPCEVENT_TURN_XY				:= 0xA0000C;	// Tell the NPC to turn towards coordinates
+const NPCEVENT_WANDER				:= 0xA0000D;	// Tell the npc to wander
+
+const NPCEVENT_ENDNERVE				:= 0xA0000F;	// Tell the brain to stop a nerve.
+const NPCEVENT_STARTNERVE			:= 0xA00010;	// Tell the brain to start a nerve.
+const NPCEVENT_DONE				:= 0xA00011;	// Brain tells a nerve that its instruction is done.
+
+const NPCEVENT_SLEEP				:= 0xA00012;	// Tell the brain to go to sleep.
+const NPCEVENT_WAKEUP				:= 0xA00013;	// Tell the brain to wake up.
+
+const NPCEVENT_FWDNERVE				:= 0xA00014;	// Tell the brain to forward an event to a nerve.
+
+//
+// * NPCEVENT_MOVE helper constants (.source = object)
+//
+const NEMOVE_WALK				:= 1;	// .speed (default)
+const NEMOVE_RUN				:= 2;	// .speed
+const NEMOVE_TOWARD 				:= 1;	// .direction (default)
+const NEMOVE_AWAY				:= 2;	// .direction
+
+//
+// * NE_TURN helper constants
+//
+const NETURN_TOWARD				:= 1;
+const NETURN_AWAY				:= 2;
+
+//
+// * AWAKEN CONSTANTS
+// 
+const WAKEUP					:= 0;
+const NOWAKE					:= 1;
+
+//
+// * CLEAR THOUGHT CONSTANTS
+//
+const CLR_BRAIN					:= 1;
+const CLR_NERVE					:= 2;
+const CLR_BOTH					:= 3;
+
+//
+//* NPC.EM constants (only brain can access npc.em)
+//
+// Constants for texttype flags in the AI_Speak() function
+const SPEAK_TEXTTYPE_DEFAULT			:= "default";
+const SPEAK_TEXTTYPE_WHISPER			:= "whisper";
+const SPEAK_TEXTTYPE_YELL			:= "yell";
+
+// Constants for doevent flag in AI_Speak() function
+const SPEAK_DOEVENT_DISABLE			:= 0x0;
+const SPEAK_DOEVENT_ENABLE			:= 0x1;

Added: trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc	2005-09-04 16:15:18 UTC (rev 53)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc	2005-09-04 16:17:40 UTC (rev 54)
@@ -0,0 +1,520 @@
+/*===============================================================
+* Current Version
+* NPC_COMMANDS.INC - v1.0
+* Updated 8/31/2005 6:38AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+
+include "include/sysEvent";
+include ":ai_brain:include/eventid";
+
+/////////////////////////////////////////////////////////////////
+// * Function List *
+//
+// AI_Attack(mobile, opponent, no_wake:=WAKEUP)
+// AI_ClearThoughts(mobile, flags)
+// AI_EndNerve(mobile, nerve_name, no_wake:=WAKEUP)
+// AI_Flee(mobile, opponent, no_wake:=WAKEUP)
+// AI_FowardEvent(mobile, nerve_name, mask, data, no_wake:=WAKEUP)
+// AI_Move(mobile, object, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
+// AI_MoveXY(mobile, x, y, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
+// AI_SetOpponent(mobile, opponent, no_wake:=WAKEUP)
+// AI_Sleep(mobile)
+// AI_Speak(mobile, text, text_type:=SPEAK_TEXTTYPE_DEFAULT, do_event:=SPEAK_DOEVENT_DISABLE, no_wake:=WAKEUP)
+// AI_StartNerve(mobile, nerve_name, script_name, data, no_wake:=WAKEUP)
+// AI_Turn(mobile, turn_to, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
+// AI_TurnXY(mobile, x, y, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
+// AI_WakeUp(mobile)
+// AI_Wander(mobile, no_wake:=WAKEUP, loop:=0)
+// AI_WarMode(mobile, mode:=0, no_wake:=WAKEUP)
+// 
+/////////////////////////////////////////////////////////////////
+
+/*
+ * AI_Attack(mobile, opponent, no_wake)
+ *
+ * Purpose
+ * Triggers the npc's combat script on opponent.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * opponent:	What the npc's combat nerve will attack.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Attack(mobile, opponent, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= SYSEVENT_ENGAGED;
+	ev.+source	:= opponent;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_ClearThoughts(mobile, flags)
+ *
+ * Purpose
+ * Clears the event queue for the script calling it and or the brain.
+ *
+ * Parameters
+ * mobile:	A reference to the npc.
+ * flags:	CLR_* flag for what scripts should have their event queues cleared.
+ *		CLR_BRAIN - Clears the brain's queue.
+ *		CLR_NERVE - Clears the nerve's queue.
+ *		CLR_BOTH  - Clears the queue for both.
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function AI_ClearThoughts(mobile, flags)
+	var brain	:= flags & CLR_BRAIN;
+	var nerve	:= flags & CLR_NERVE;
+	var both	:= flags & CLR_BOTH;
+
+	if ( both || brain )
+		brain := mobile.process;
+		brain.clear_event_queue();
+	endif
+
+	if ( both || nerve )
+		nerve := GetProcess(GetPid());
+		nerve.clear_event_queue();
+	endif
+
+	return 1;
+endfunction
+
+/*
+ * AI_EndNerve(mobile, nerve_name, no_wake)
+ *
+ * Purpose
+ * Used to tell the brain to stop a nerve script.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * nerve_name:	String containing the name of the nerve (dictionary key).
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_EndNerve(mobile, nerve_name, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_ENDNERVE;
+	ev.+name	:= nerve_name;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_Flee(mobile, opponent, no_wake)
+ *
+ * Purpose
+ * Used to tell the brain to stop a nerve script.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * opponent:	Opponent to flee from.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Flee(mobile, opponent, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_FLEE;
+	ev.+source	:= opponent;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_ForwardEvent(mobile, nerve_name, mask, data, no_wake)
+ *
+ * Purpose
+ * Used to send an event from one nerve to another.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * nerve_name:	String containing the name of the nerve to forward the event to (dictionary key).
+ * mask:	The type of event the nerve should handle the forward as. (example: SYSEVENT_LEFTAREA)
+ * data:	Data that the nerve will receive.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_FowardEvent(mobile, nerve_name, mask, data, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_FWDNERVE;
+	ev.+NerveName	:= nerve_name;
+	ev.+mask	:= mask;
+	ev.+data	:= data;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_Move(mobile, opponent, to_from, speed, no_wake, loop)
+ *
+ * Purpose
+ * Commands an npc to move toward / away from an item or mobile.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * object:	Item or mobile the npc will move away from/toward.
+ * to_from:	Direction the npc will go:
+ *		NEMOVE_TOWARD - Will make the npc move toward the object - Default
+ *		NEMOVE_AWAY   - Will make the npc move away from the object.
+ * speed:	Speed the npc will move at:
+ *		NEMOVE_RUN  - NPC will run
+ *		NEMOVE_WALK - NPC will walk
+ * no_wake:	Optional wakeup flag::
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ * loop:	Number of steps for the npc to take toward/away from the object.
+ *		Note: Loop can be interrupted and end prematurely!
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Move(mobile, object, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_MOVE;
+	ev.+source	:= object;
+	ev.+direction	:= to_from;
+	ev.+speed	:= speed;
+	ev.+WakeUp	:= no_wake;
+	ev.+loop	:= loop;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_MoveXY(mobile, x, y, to_from, speed, no_wake, loop)
+ *
+ * Purpose
+ * Commands an npc to move toward or away from an XY coordinate.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * x:		X coordinate to move away from/toward
+ * y:		Y coordinate to move away from/toward
+ * to_from:	Direction the npc will go:
+ *		NEMOVE_TOWARD - Will make the npc move toward the object - Default
+ *		NEMOVE_AWAY   - Will make the npc move away from the object.
+ * speed:	Speed the npc will move at:
+ *		NEMOVE_RUN  - NPC will run
+ *		NEMOVE_WALK - NPC will walk
+ * no_wake:	Optional wakeup flag::
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ * loop:	Number of steps for the npc to take toward/away from the object.
+ *		Note: Loop can be interrupted and end prematurely!
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_MoveXY(mobile, x, y, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_MOVE_XY;
+	ev.+x		:= x;
+	ev.+y		:= y;
+	ev.+direction	:= to_from;
+	ev.+speed	:= speed;
+	ev.+WakeUp	:= no_wake;
+	ev.+loop	:= loop;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_SetOpponent(mobile, opponent, no_wake)
+ *
+ * Purpose
+ * Places the npc into war mode and sets an opponent.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * opponent:	Mobile reference that will be considered an opponent.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_SetOpponent(mobile, opponent, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_OPPONENT;
+	ev.+source	:= opponent;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_Sleep(mobile)
+ *
+ * Purpose
+ * Instructs the npc to go into sleep mode - shuts down all nerves.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Sleep(mobile)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_SLEEP;
+	ev.+WakeUp	:= NOWAKE;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_Speak(mobile, text, text_type, do_event, no_wake)
+ *
+ * Purpose
+ * Commands the NPC to speak.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * text:	The text the npc will speak.
+ * text_type:	text_type for npc.em :
+ *		SPEAK_TEXTTYPE_DEFAULT - Default
+ *		SPEAK_TEXTTYPE_WHISPER
+ *		SPEAK_TEXTTYPE_YELL
+ * do_event:	Flags for sending a system event for speech to surrounding npcs.
+ *		SPEAK_DOEVENT_DISABLE - Default
+ *		SPEAK_DOEVENT_ENABLE
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Speak(mobile, text, text_type:=SPEAK_TEXTTYPE_DEFAULT, do_event:=SPEAK_DOEVENT_DISABLE, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_SPEAK;
+	ev.+text	:= text;
+	ev.+texttype	:= text_type;
+	ev.+doevent	:= do_event;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_StartNerve(mobile, nerve_name, script_name, data, no_wake)
+ *
+ * Purpose
+ * Used to start a custom nerve up from within a nerve.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * nerve_name:	String containing the name of the nerve (dictionary key).
+ * script_name:	Path of the script to start.
+ * data:	Data to be sent to the nerve once it starts.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_StartNerve(mobile, nerve_name, script_name, data, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_STARTNERVE;
+	ev.+name	:= nerve_name;
+	ev.+script	:= script_name;
+	ev.+data	:= data;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_Turn(mobile, turn_to, direction, no_wake)
+ *
+ * Purpose
+ * Commands the NPC to face away from / toward an object.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * turn_to:	item or moble reference to turn away from / toward.
+ * direction:	Direction the npc will face:
+ *		NETURN_TOWARD - Will make the npc turn toward the object - Default.
+ 		NETURN_AWAY   - Will make the npc turn away from the object.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Turn(mobile, turn_to, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_TURN;
+	ev.+source	:= turn_to;
+	ev.+direction	:= direction;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_TurnXY(mobile, x, y, direction, no_wake)
+ *
+ * Purpose
+ * Commands the NPC to face away from / toward a coordinate.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * x:		X coordinate to turn away from / toward.
+ * y:		Y coordinate to turn away from / toward.
+ * direction:	Direction the npc will face:
+ *		NETURN_TOWARD - Will make the npc turn toward the object - Default.
+ 		NETURN_AWAY   - Will make the npc turn away from the object.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_TurnXY(mobile, x, y, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_TURN_XY;
+	ev.+x		:= x;
+	ev.+y		:= y;
+	ev.+direction	:= direction;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_WakeUp(mobile)
+ *
+ * Purpose
+ * Sends an event to the npc causing its sleep script to end.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_WakeUp(mobile)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_WAKEUP;
+	ev.+WakeUp	:= WAKEUP;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_Wander(mobile, opponent, no_wake)
+ *
+ * Purpose
+ * Commands the NPC to wander one step in a random direction.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ * loop:	Number of times to attempt to wander.
+ *		Note: Loop can be interrupted and end prematurely!
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Wander(mobile, no_wake:=WAKEUP, loop:=0)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_WANDER;
+	ev.+WakeUp	:= no_wake;
+	ev.+loop	:= CInt(loop);
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_WarMode(mobile, mode, no_wake)
+ *
+ * Purpose
+ * Toggles warmode on the npc. Setting to 0 also clears the opponent.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * mode:	0 - Takes the NPC out of warmode and clears the opponent - Default.
+ *		1 - Places the npc into warmode.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_WarMode(mobile, mode:=0, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_WARMODE;
+	ev.+value	:= mode;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/include/npcError.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcError.inc	2005-09-04 16:15:18 UTC (rev 53)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcError.inc	2005-09-04 16:17:40 UTC (rev 54)
@@ -0,0 +1,36 @@
+/*===============================================================
+* Current Version
+* NPC_ERRORS.INC - v1.0
+* Updated 8/31/2005 5:08AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+
+/*
+ * NPC_ErrorSysLog(errmsg)
+ *
+ * Purpose
+ * Logs an error message.
+ *
+ * Parameters
+ * errmsg:	Error message
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function NPC_ErrorSysLog(mobile, errmsg)
+	Set_Critical(1);
+	SysLog("NPC Template: " + mobile.npctemplate);
+	SysLog("NPC Name    : " + mobile.name);
+	SysLog(errmsg );
+	SysLog("------------");
+	Set_Critical(0);
+	
+	return 1;
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc	2005-09-04 16:15:18 UTC (rev 53)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc	2005-09-04 16:17:40 UTC (rev 54)
@@ -0,0 +1,213 @@
+/*===============================================================
+* Current Version
+* NERVES.INC - v1.0
+* Updated 9/1/2005 6:15PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+
+include ":ai_brain:include/npcError";
+
+/////////////////////////////////////////////////////////////////
+// * Function List *
+//
+// GetNerveFlags(mobile, nerve_name, byref nerve_dict:=0)
+// GetNerveProcess(mobile, nerve_name, byref nerve_dict:=0)
+// LoadNerves(mobile)
+// SaveNerves(mobile, nerve_dict)
+// StartNerve(mobile, nerve_name, nerve_script, data:=array, flags:=NF_NO_FLAGS, byref nerve_dict:=0)
+// StopNerve(mobile, nerve_name, byref nerve_dict:=0)
+//
+/////////////////////////////////////////////////////////////////
+// * Global Varibles *
+//
+// Nerve flags
+const NF_NO_FLAGS		:= 0x0;
+const NF_CONTINUE_ON_SLEEP	:= 0x1;
+//
+/////////////////////////////////////////////////////////////////
+
+/*
+ * LoadNerves()
+ *
+ * Purpose
+ * Loads nerve information for an npc.
+ *
+ * Parameters
+ * mobile:	NPC to get the nerve settings from.
+ *
+ * Return value
+ * Returns a dictionary
+ *
+ */
+function LoadNerves(mobile)
+	var nerve_dict := GetObjProperty(mobile, "#NerveInfo");
+	if ( Lower(TypeOf(nerve_dict)) != "dictionary" )
+		nerve_dict := dictionary;
+	endif
+
+	return nerve_dict;
+endfunction
+
+/*
+ * SaveNerves(mobile, nerve_dict)
+ *
+ * Purpose
+ * Saves nerve information for an npc.
+ *
+ * Parameters
+ * mobile:	NPC to save the nerve settings on.
+ * nerve_dict:	Dictionary containing nerve information.
+ *
+ * Return value
+ * Returns 1 on success
+ *
+ */
+function SaveNerves(mobile, byref nerve_dict)
+	return SetObjProperty(mobile, "#NerveInfo", nerve_dict);
+endfunction
+
+/*
+ * GetNerveProcess(mobile, nerve_name, byref nerve_dict)
+ *
+ * Purpose
+ * Retrieves a reference to a running nerve script.
+ *
+ * Parameters
+ * mobile:	NPC to get the nerve information from.
+ * nerve_name:	Name of the nerve to get the information for.
+ * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
+ *
+ * Return value
+ * Returns a script reference.
+ *
+ */
+function GetNerveProcess(mobile, nerve_name, byref nerve_dict:=0)
+	if ( !nerve_dict )
+		nerve_dict := LoadNerves(mobile);
+	endif
+
+	if ( nerve_dict.exists(nerve_name) )
+		return GetProcess(CInt(nerve_dict[nerve_name].pid));
+	else
+		return error{"errortext" := "GetNerveProcess() - Invalid nerve name  ["+nerve_name+"]"};
+	endif
+endfunction
+
+/*
+ * GetNerveFlags(mobile, nerve_name, byref nerve_dict)
+ *
+ * Purpose
+ * Retrieves the flag setting set on a nerve.
+ *
+ * Parameters
+ * mobile:	NPC to get the nerve information from.
+ * nerve_name:	Name of the nerve to get the information for.
+ * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
+ *
+ * Return value
+ * Returns a script reference.
+ *
+ */
+function GetNerveFlags(mobile, nerve_name, byref nerve_dict:=0)
+	if ( !nerve_dict )
+		nerve_dict := LoadNerves(mobile);
+	endif
+
+	if ( nerve_dict.exists(nerve_name) )
+		return GetProcess(CInt(nerve_dict[nerve_name].flags));
+	else
+		return error{"errortext" := "GetNerveProcess() - Invalid nerve name  ["+nerve_name+"]"};
+	endif
+endfunction
+
+/*
+ * StartNerve(mobile, nerve_name, nerve_script, data, flags, byref nerve_dict)
+ *
+ * Purpose
+ * Starts up a nerve script.
+ *
+ * Parameters
+ * mobile:	NPC the nerve will be running for.
+ * nerve_name:	The name the nerve script will be run under. (Example: "CombatScript" or "EnterReact")
+ * data:	Array of data to send to the nerve script when it starts.
+ * flags:	Can contain anything - but should use NF_* flags for bitwise checks.
+ * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
+ *
+ * Notes:
+ * data[1] - Will contain the mobile argument.
+ * data[2] - Will contain the nerve name argument.
+ * If data is not an array, it will be placed at index[3].
+ * If data is sent as an array, it will begin at the index of [3].
+ *
+ * Return value
+ * Returns a script reference to the nerve script.
+ *
+ */
+function StartNerve(mobile, nerve_name, nerve_script, data:=array, flags:=NF_NO_FLAGS, byref nerve_dict:=0)
+	if ( Lower(TypeOf(data)) != "array")
+		data := array{data};
+	endif
+	//Mobile is always the begining of the data array.
+	data.Insert(1, mobile);
+	//Nerve name is always the second part of the data array.
+	data.Insert(2, nerve_name);
+
+	var process := start_script(nerve_script, data);
+
+	if ( process.errortext )
+		var errmsg := "StartNerve() ["+nerve_name+"] ["+nerve_script+"] failed to start! ->"+process.errortext;
+		NPC_ErrorSysLog(mobile, errmsg);
+		return error{"errortext":=errmsg};
+	else
+		//Before setting the new nerve, check if one is already running.
+		if ( nerve_dict.exists(nerve_name) )
+			//Stop the old nerve, before storing the new one.
+			StopNerve(mobile, nerve_name, nerve_dict);
+		endif
+		var nerve_info := struct;
+		nerve_info.+pid := process.pid;
+		nerve_info.+flags := flags;
+		nerve_dict[nerve_name] := nerve_info;
+
+		SaveNerves(mobile, nerve_dict);
+
+		return process;
+	endif
+endfunction
+
+/*
+ * StopNerve(mobile, nerve_name, byref nerve_dict)
+ *
+ * Purpose
+ * Starts up a nerve script.
+ *
+ * Parameters
+ * mobile:	NPC the nerve will be stopped on.
+ * nerve_name:	The name of the nerve script to stop.
+ * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
+ *
+ * Return value
+ * Returns 1 on success.
+ *
+ */
+function StopNerve(mobile, nerve_name, byref nerve_dict:=0)
+	if ( !nerve_dict )
+		nerve_dict := LoadNerves(mobile);
+	endif
+
+	if ( nerve_dict.Exists(nerve_name) )
+		GetNerveProcess(mobile, nerve_name, nerve_dict).kill();
+		nerve_dict.Erase(nerve_name);
+
+		return SaveNerves(mobile, nerve_dict);
+	else
+		return error{"errortext" := "StopNerve() - Invalid nerve name  ["+nerve_name+"]"};
+	endif
+endfunction
+

Added: trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-04 16:15:18 UTC (rev 53)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-04 16:17:40 UTC (rev 54)
@@ -0,0 +1,165 @@
+/*===============================================================
+* Current Version
+* NPC_SETTINGS.INC - v1.0
+* Updated 8/30/2005 7:28AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+use cfgfile;
+
+include ":ai_brain:include/npcUtil";
+
+/*
+ * NPC_DefaultSettings(settings:=0)
+ *
+ * Purpose
+ * Checks the settings dictionary to make sure required values are set.
+ * If a dictionary is passed, it will check it for required parameters.
+ * If they are not present, they will be set.
+ * Nothing will be overwritten in this function.
+ *
+ * Parameters
+ * settings:	Optional parameter
+ *		Dictionary read in from NPC_GetDefaultSettings()
+ *
+ * Return value
+ * Returns a dictionary
+ *
+ */
+function NPC_GetDefaultSettings(settings:=0)
+	if ( Lower(TypeOf(settings)) != "dictionary" )
+		settings := dictionary;
+	endif
+
+	if ( CInt(settings.exists("cycle_wait")) <= 0 )
+		settings["cycle_wait"] := 10;
+	endif
+	if ( CInt(settings.exists("sleep_time")) <= 0 )
+		settings["sleep_time"] := 1024;
+	endif
+	if ( CInt(settings.exists("idle_ticks")) <= 0 )
+		settings["idle_ticks"] := 5;
+	endif
+
+	return settings;
+endfunction
+
+/*
+ * NPC_LoadTemplateSettings(source)
+ *
+ * Purpose
+ * Loads settings for a template from npcdesc.cfg
+ *
+ * Parameters
+ * source:	Name of the npc template to load settings for.
+ *		Can also be an npc reference - if custom settings should be loaded off it.
+ *
+ * Return value
+ * Returns a dictionary
+ *
+ */
+function NPC_LoadTemplateSettings(source)
+	var template:=source;
+	if ( source.IsA(POLCLASS_NPC) )
+		template := NPC_ParseTemplateName(source.npctemplate);
+	elseif ( !template.package )
+		template := NPC_ParseTemplateName(template);
+	endif
+
+	//
+	// * Load config defaults first
+	//
+	var npc_cfg := ReadConfigFile(template.package+"npcdesc");
+	var npc_elem := npc_cfg[template.template];
+
+	var setting_list := GetConfigStringDictionary(npc_elem, "AISetting");
+	
+	var settings := dictionary;
+	foreach setting_name in (setting_list.keys())
+		settings[setting_name] := UnPack(setting_list[setting_name]);
+		sleepms(2);
+	endforeach
+
+	//
+	// * If the source is an npc, check it for custom settings.
+	//
+	if ( source.IsA(POLCLASS_NPC) )
+		var cstm_settings := GetObjProperty(source, "AISettings");
+		foreach key in (cstm_settings.keys())
+			if ( cstm_settings[key] == error )
+				settings.Erase(key);
+			else
+				settings[key] := cstm_settings[key];
+			endif
+				
+			sleepms(2);
+		endforeach
+	endif
+	
+	return settings;
+endfunction
+
+/*
+ * NPC_LoadScriptSettings(source)
+ *
+ * Purpose
+ * Loads brain AI script settings for an NPC. Gives .script and .flag values for them.
+ *
+ * Parameters
+ * source:	Name of the npc template to load settings for.
+ *		Can also be an npc reference - if custom settings should be loaded off it.
+ *
+ * Return value
+ * Returns a dictionary
+ *
+ */
+function NPC_LoadScriptSettings(source)
+	var template:=source;
+	if ( source.IsA(POLCLASS_NPC) )
+		template := NPC_ParseTemplateName(source.npctemplate);
+	elseif ( !template.package )
+		template := NPC_ParseTemplateName(template);
+	endif
+
+	//
+	// * Load config defaults first
+	//
+	var npc_cfg := ReadConfigFile(template.package+"npcdesc");
+	var npc_elem := npc_cfg[template.template];
+
+	var script_list := GetConfigStringDictionary(npc_elem, "AIScript");
+	var flag_list := GetConfigStringDictionary(npc_elem, "AIScriptFlag");
+
+	var script_settings := dictionary;
+	foreach script_type in (script_list.keys())
+		var temp := struct;
+		temp.+script := script_list[script_type];
+		temp.+flags := 0x0;
+		if ( flag_list[script_type] )
+			temp.flags := UnPack(flag_list[script_type]);
+		endif
+
+		script_settings[script_type] := temp;
+		sleepms(2);
+	endforeach
+
+	//
+	// * If the source is an npc, check it for custom script settings.
+	//   Assumes each key in the dictionary property has a .script and .flags pair already.
+	//
+	if ( source.IsA(POLCLASS_NPC) )
+		var cstm_scripts := GetObjProperty(source, "AIScripts");
+		foreach key in (cstm_scripts.keys())
+			script_settings[key] := cstm_scripts[key];
+			sleepms(2);
+		endforeach
+	endif
+	
+	return script_settings;
+endfunction
+

Added: trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-04 16:15:18 UTC (rev 53)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-04 16:17:40 UTC (rev 54)
@@ -0,0 +1,45 @@
+/*===============================================================
+* Current Version
+* NPC_UTIL.INC - v1.0
+* Updated 8/31/2005 4:23AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+/*
+ * NPC_ParseTemplateName(template_name)
+ *
+ * Purpose
+ * Finds the appropriate npcdesc.cfg to load.
+ * This enables npcs to be placed in packages and not just the ::npcdesc file.
+ * ReadConfigFile(":*:npcdesc") does not work in this case because packaged npcs
+ * have the package name at the begining of their .npctemplate member. Reading the
+ * specific config file - helps to avoid possible elem name collisions.
+ *
+ * Parameters
+ * template_name:	Name of the npc template to parse
+ *
+ * Return value
+ * Returns struct .package .template
+ *
+ */
+function NPC_ParseTemplateName(template_name)
+	//Find positions of ":" characters
+	var colon_a := Find(template_name, ":", 1);
+	var colon_b := Find(template_name, ":", 2);
+
+	var parsed := struct{"package", "template"};
+
+	if ( !colon_a || !colon_b )
+		//Not a complete package name - use default npcdesc.cfg
+		parsed.package := "::";
+		parsed.template := template_name;
+	else
+		parsed.package := template_name[colon_a, colon_b];
+		parsed.template := template_name[colon_b+1, Len(template_name)];
+	endif
+
+	return parsed;
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/pkg.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/pkg.cfg	2005-09-04 16:15:18 UTC (rev 53)
+++ trunk/096/pkg/mobiles/ai_brain/pkg.cfg	2005-09-04 16:17:40 UTC (rev 54)
@@ -0,0 +1,14 @@
+Enabled		1
+Name		ai_brain
+
+Version		5.0
+
+CoreRequired	96
+Requires	gumps 1.5
+
+Creator		Austin Heilman
+Email		Austin at tsse.net
+Maintainer	Austin Heilman
+Email		Austin at tsse.net
+
+#Conflicts none



From austin at berlios.de  Sun Sep  4 18:30:59 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 4 Sep 2005 18:30:59 +0200
Subject: [Poldistro-svn] r56 - in trunk/096/pkg/mobiles: . ai_brain ai_brain/commands ai_brain/commands/gm ai_brain/commands/test ai_brain/config ai_brain/include ai_brain/include/braincore
Message-ID: <200509041630.j84GUxv8004058@sheep.berlios.de>

Author: austin
Date: 2005-09-04 18:30:56 +0200 (Sun, 04 Sep 2005)
New Revision: 56

Added:
   trunk/096/pkg/mobiles/ai_brain/
   trunk/096/pkg/mobiles/ai_brain/brain.src
   trunk/096/pkg/mobiles/ai_brain/commands/
   trunk/096/pkg/mobiles/ai_brain/commands/gm/
   trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/cmassacre.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/makeswarm.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/massacre.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/npcsleep.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/removenpc.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/restartnpc.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/sendevent.src
   trunk/096/pkg/mobiles/ai_brain/commands/test/
   trunk/096/pkg/mobiles/ai_brain/commands/test/cfgtest.src
   trunk/096/pkg/mobiles/ai_brain/config/
   trunk/096/pkg/mobiles/ai_brain/config/hatelist.cfg
   trunk/096/pkg/mobiles/ai_brain/config/icp.cfg
   trunk/096/pkg/mobiles/ai_brain/docs/
   trunk/096/pkg/mobiles/ai_brain/include/
   trunk/096/pkg/mobiles/ai_brain/include/braincore/
   trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
   trunk/096/pkg/mobiles/ai_brain/include/eventid.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcError.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
   trunk/096/pkg/mobiles/ai_brain/pkg.cfg
Log:


Added: trunk/096/pkg/mobiles/ai_brain/brain.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,53 @@
+/*===============================================================
+* Current Version
+* BRAIN.SRC - v5.0
+* Updated 9/1/2005 6:20AM
+*
+* NPC AI-Script to control all non-setup actions. Acts as the "brain"
+* and fires off external scripts that act as the "nerves" of the NPC.
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+use npc;
+use cfgfile;
+use polsys;
+
+include "include/sysEvent";
+include ":ai_brain:include/braincore/error";
+include ":ai_brain:include/braincore/eventProcessor";
+include ":ai_brain:include/braincore/movement";
+include ":ai_brain:include/braincore/setup";
+include ":ai_brain:include/eventid";
+include ":ai_brain:include/npcCommands";
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcSettings";
+include ":ai_brain:include/npcUtil";
+
+//
+// * Global variables
+//
+var npc := Self();
+var idle_ticks := 0;
+var sleep_mode := 0;
+var g_settings := dictionary; //"setting name"->value
+var g_scripts := dictionary; // "script type"->value{.flags, .script}
+var g_nerves := dictionary; // "nerve name"->value{.flags, .pid}
+
+program BrainAI()
+	//Run setup steps for the npc.
+	set_critical(1);
+	InitializeSettings();
+	InitializeEvents();
+	set_critical(1);
+	StartupScripts();
+	
+	while ( npc )
+		var ev := Wait_For_Event(g_settings["cycle_wait"]);
+		ProcessEvent(ev);
+	endwhile
+endprogram

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,23 @@
+//Example: .attack -> Makes an npc attack another mobile.
+use uo;
+use os;
+
+include ":ai_brain:include/NPC_Commands";
+
+program MakeAttack(who)
+	SendSysMessage(who, "Select an npc (attacker).");
+	var targ := target(who);
+	if ( !targ.npctemplate ) 
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	endif
+	
+	SendSysMessage(who, "Select a mobile (defender).");
+	var targ2 := target(who);
+	if ( !targ2.IsA(POLCLASS_MOBILE) )
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	endif
+	
+	AI_Attack(targ, targ2);
+endprogram

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/cmassacre.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/cmassacre.src	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/cmassacre.src	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,19 @@
+//Example: .massacre [radius] - Kills npcs within the radius and leaves the corpses.
+use uo;
+
+include ":gumps:include/requestgump";
+
+program Massacre(who, range)
+	
+	range := CInt(range);
+	if ( !range )
+		range := CInt(RequestGump(who, "Enter the radius to kill npcs.", "", 0));
+	endif
+	
+	foreach mobile in ListMobilesNearLocationEX(who.x, who.y, who.z, CInt(range), LISTEX_FLAG_NORMAL+LISTEX_FLAG_HIDDEN, who.realm)
+		if ( mobile.npctemplate )
+			ApplyRawDamage(mobile, 6000);
+		endif
+		sleepms(2);
+	endforeach
+endprogram
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,257 @@
+use uo;
+use os;
+
+include ":datafile:include/datafile";
+include ":gumps:include/gumps";
+include ":gumps:include/gumps_ex";
+
+const UNCACHE_BTN	:= 0xF000000;
+const DEFAULT_CATEGORY	:= "None";
+
+var data_file := DFOpenDataFile(":ai_brain:createnpc", DF_CREATE);
+
+program MakeNPC(who, template)
+	if ( !template )
+		template := SelectTemplateFromGump(who);
+		if ( !template )
+			return 0;
+		endif
+	endif
+	
+	var targ := TargetCoordinates(who);
+	if ( !targ )
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	endif
+
+	var npc := CreateNPCFromTemplate(template, targ.x, targ.y, targ.z, 0, who.realm);
+	npc.facing := who.facing;
+	if ( npc.errortext )
+		SendSysMessage(who, "Error creating NPC ["+template+"] -> "+npc.errortext);
+		return 0;
+	endif
+endprogram
+
+function SelectTemplateFromGump(who)
+	var input := GFSendGump(who, RetrieveGump("Index"));
+	if ( !input )
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	elseif ( input[UNCACHE_BTN] )
+		foreach elem_name in DFGetElemNames(data_file)
+			data_file.DeleteElement(elem_name);
+			sleepms(2);
+		endforeach
+		
+		SendSysMessage(who, "All createnpc data uncached.");
+		return 0;
+	endif
+		
+	var category_names := GetCategoryNames();
+	input := GFSendGump(who, BuildNPCGump(category_names[input[0]]));
+	if ( !input )
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	endif
+	
+	var elem_names := GetConfigStringKeys(ReadConfigFile("::npcdesc"));
+	return elem_names[input[0]];
+endfunction
+
+function RetrieveGump(category_name)
+	if ( category_name == "Index" )
+		var data_elem := DFFindElement(data_file, "Index");
+		var gump := data_elem.GetProp("Gump");
+		if ( !gump )
+			gump := BuildIndexGump();
+		endif
+		
+		return gump;
+	else
+		var data_elem := DFFindElement(data_file, category_name);
+		var gump := data_elem.GetProp("Gump");
+		if ( !gump )
+			gump := BuildNPCGump(category_name);
+		endif
+		
+		return gump;
+	endif
+endfunction
+
+function GetCategoryNames()
+	var data_elem := DFFindElement(data_file, "Index");
+	var category_names := data_elem.GetProp("CategoryNames");
+	if ( !category_names )
+		category_names := SetupCategoryNames();
+	endif
+	
+	return category_names;
+endfunction
+
+function SetupCategoryNames()
+	var category_names := (SortNPCs().keys());
+	var data_elem := DFFindElement(data_file, "Index", DF_CREATE);
+	data_elem.SetProp("CategoryNames", category_names);
+	
+	return category_names;
+endfunction
+
+function BuildIndexGump()
+	Set_Priority(100);
+	var category_names := GetCategoryNames();
+	
+	var data_elem := DFFindElement(data_file, "Index", DF_CREATE);
+	data_elem.SetProp("CategoryNames", category_names);
+	
+	var bkgnd_silvertrim := GFCfgConst("BackGrounds", "SILVERTRIM");
+	var bkgnd_dark_stone := GFCfgConst("BackGrounds", "DARK_STONE");
+	
+	var gump := GFCreateGump();
+	GFPage(gump, 0);
+	GFResizePic(gump, 0, 0, bkgnd_silvertrim, 300, 480);
+	GFResizePic(gump, 10, 10, bkgnd_dark_stone, 280, 460);
+	var y_pos := 40;
+	var counter := 1;
+	var page_num := 1;
+	GFTextMid(gump, 10, 15, 280, 2100, "NPC Categories");
+	
+	/////
+	GFAddButton(gump, 158, 445, 4002, 4003, GF_CLOSE_BTN, UNCACHE_BTN);
+	GFTextLine(gump, 193, 445, 2100, "Uncache data");
+	/////
+	
+	GFPage(gump, page_num);
+	foreach category_name in (category_names)
+		GFAddButton(gump, 20, y_pos+3, 2117, 2118, GF_CLOSE_BTN, (_category_name_iter));
+		GFTextLine(gump, 40, y_pos, 2100, category_name);
+		y_pos := y_pos+20;
+		counter := counter+1;
+		
+		if ( counter > 20 )
+			counter := 1;
+			y_pos := 40;
+			GFAddButton(gump, 265, 445, 2648, 2649, GF_PAGE_BTN, page_num+1);
+			page_num := page_num+1;
+			GFPage(gump, page_num);
+			GFAddButton(gump, 265, 15, 2650, 2651, GF_PAGE_BTN, page_num-1);
+		endif
+		sleepms(2);
+	endforeach
+	data_elem.SetProp("Gump", gump);
+	
+	return gump;
+endfunction
+
+function BuildNPCGump(category_name)
+	Set_Priority(100);
+	
+	var npc_list := SortNPCs();
+	if ( !npc_list.Exists(category_name) )
+		//Nifty new trick below.
+		return error{"errortext":="Category name does not exist."};
+	endif
+	
+	var data_elem := DFFindElement(data_file, Lower(category_name), DF_CREATE);	
+	npc_list := npc_list[category_name];
+
+	var bkgnd_silvertrim := GFCfgConst("BackGrounds", "SILVERTRIM");
+	var bkgnd_dark_stone := GFCfgConst("BackGrounds", "DARK_STONE");
+	
+	var gump := GFCreateGump();
+	GFPage(gump, 0);
+	GFResizePic(gump, 0, 0, bkgnd_silvertrim, 300, 480);
+	GFResizePic(gump, 10, 10, bkgnd_dark_stone, 280, 460);
+	var y_pos := 40;
+	var counter := 1;
+	var page_num := 1;
+	GFTextMid(gump, 10, 15, 280, 2100, "NPC List - "+category_name);
+	GFPage(gump, page_num);
+	foreach template in (npc_list[category_name])
+		GFAddButton(gump, 20, y_pos+3, 2117, 2118, GF_CLOSE_BTN, template.pos);
+		GFTextLine(gump, 40, y_pos, template.color, template.name);
+		y_pos := y_pos+20;
+		counter := counter+1;
+
+		if ( counter > 21 )
+			counter := 1;
+			y_pos := 40;
+			GFAddButton(gump, 265, 445, 2648, 2649, GF_PAGE_BTN, page_num+1);
+			page_num := page_num+1;
+			GFPage(gump, page_num);
+			GFAddButton(gump, 265, 15, 2650, 2651, GF_PAGE_BTN, page_num-1);
+		endif
+		sleepms(2);
+	endforeach
+	data_elem.SetProp("Gump", gump);
+	
+	return gump;
+endfunction
+
+function SortNPCs()
+	var data_elem := DFFindElement(data_file, "Index", DF_CREATE);
+	var categories :=  data_elem.GetProp("NPCListSorted");
+	if ( categories )
+		return categories;
+	endif
+		
+	var npc_config := ReadConfigFile("::npcdesc");
+	var cfg_keys := GetConfigStringKeys(npc_config);
+
+	categories := dictionary;
+	categories[DEFAULT_CATEGORY] := array{};
+
+	foreach template_name in (cfg_keys)
+		var cfg_elem := npc_config[template_name];
+		var template := struct;
+		template.+name :=template_name;
+		template.+pos :=_template_name_iter;
+		template.+color :=GetNameColor(npc_config[template_name].alignment);
+
+		if ( !cfg_elem.category )
+			categories[DEFAULT_CATEGORY].append(template);
+		else
+			if ( Lower(TypeOf(categories[cfg_elem.category])) != "array" )
+				categories[cfg_elem.category] := array{};
+			endif
+
+			categories[cfg_elem.category].append(template);
+		endif
+		sleepms(2);
+	endforeach
+	
+	// This function is time consuming.. so its results get saved.	
+	data_elem.SetProp("NPCListSorted", categories);
+
+	return categories;
+endfunction
+
+function GetNameColor(reputation)
+	var reputation_cfg := ReadConfigFile("::repsys");
+	//We know the config is there - core won't start without it.
+	var reputation_elem := reputation_cfg["NameColoring"];
+	if ( !reputation_elem )
+		/*
+		 * In most shards the config is setup as
+		 * NameColoring
+		 * {
+		 * // Information here
+		 * }
+		 * **---=[! Needs to be changed to !]=---**
+		 * NameColoring NameColoring
+		 * {
+		 * //Information here
+		 * }
+		 */
+		SysLog("Unable to read in repsys.cfg elem [NameColoring] ->"+reputation_elem.errortext);
+		SysLog("You probably don't have an elem name set for it. Thats naughty!");
+		return 0;
+	endif
+	
+	case ( reputation )
+		"good":		return (GetConfigInt(reputation_elem, "innocent")-1);
+		"neutral":	return (GetConfigInt(reputation_elem, "attackable")-1);
+		"evil":		return (GetConfigInt(reputation_elem, "murderer")-1);
+		 // No alignment for an npc is considered neutral
+		default: 	return (GetConfigInt(reputation_elem, "attackable")-1);
+	endcase
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/makeswarm.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/makeswarm.src	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/makeswarm.src	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,60 @@
+//Example: .makeswarm [templateate] [radius] - Makes npcs on every tile in the radius around you.
+
+use uo;
+use util;
+use os;
+use util;
+
+include ":gumps:include/requestgump";
+
+program MakeSwarm(who, text)
+
+	var template:=0, radius:=0;
+	if ( text ) 
+		text := SplitWords(text);
+		template := text[1];
+		radius := CInt(text[2]);
+	endif
+		
+	if ( !template )
+		template := RequestGump(who, "Enter the npc template name to use.", "");
+		if ( !template )
+			SendSysMessage(who, "Cancelled.");
+			return 0;
+		endif
+	endif
+	if ( !radius )
+		if ( !radius )
+			radius := CInt(RequestGump(who, "Enter the radius to create npcs.", "", 1));
+		endif
+		if ( !radius )
+			SendSysMessage(who, "Radius is less than 1. Setting to 1.");
+			radius := 1;
+		endif
+	endif
+	if ( radius > 10 ) // 100 npcs
+		SendSysMessage(who, "Radius exceeds 10 spaces. Setting to 10.");
+		radius := 10;
+	endif
+	
+	var start_x := who.x - CInt(radius);
+	var start_y := who.y - CInt(radius);
+	var end_x := who.x + CInt(radius);
+	var end_y := who.y + CInt(radius);
+
+	var x, y;
+	var created := 0;
+	
+	for ( x:=start_x; x<=end_x; x:=x+1 )
+		for ( y:=start_y; y<=end_y; y:=y+1 )
+			var npc := CreateNPCFromTemplate(template, x, y, who.z, who.realm);
+			if ( npc )
+				created := created+1;
+			endif
+			
+			sleepms(3);
+		endfor
+	endfor
+	
+	SendSysMessage(who, "Done making npc swarm. Created ["+created+"] npcs.");
+endprogram        

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/massacre.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/massacre.src	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/massacre.src	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,22 @@
+//Example: .massacre [radius] - Kills npcs within the radius.
+use uo;
+use os;
+
+include ":gumps:include/requestgump";
+
+program Massacre(who, range)
+	range := CInt(range);
+	if ( !range )
+		range := CInt(RequestGump(who, "Enter the radius to kill npcs.", "", 0));
+	endif
+	
+	var mobile_list := ListMobilesNearLocationEX(who.x, who.y, who.z, CInt(range), LISTEX_FLAG_NORMAL+LISTEX_FLAG_HIDDEN, who.realm);
+	
+	foreach mobile in (mobile_list)
+		if ( mobile.npctemplate )
+			SetObjProperty(mobile, "GuardKill", 1);
+			ApplyRawDamage(mobile, 6000);
+		endif
+		sleepms(2);
+	endforeach
+endprogram

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/npcsleep.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/npcsleep.src	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/npcsleep.src	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,33 @@
+//Example: .npcsleep -> Forces all npcs to go to sleep.
+use uo;
+use os;
+use polsys;
+
+include ":gumps:include/requestgump";
+include ":ai_brain:include/NPC_Commands";
+
+program PutEveryNPCToSleep(who)
+	var realm_name := RequestGump(who, "Enter the realm name to put npcs to sleep on.", "", who.realm);
+	var realm_info := Realms()[realm_name];
+	if ( !realm_info )
+		SendSysMessage(who, "Invalid realm name.");
+		return 0;
+	endif
+	
+	//To do: Set X2 and Y2 to the realm's maximum values
+	var x1 := 1, y1 := 1, x2 := realm_info.width, y2 := realm_info.height;
+	var z1 := -120, z2 := 120;
+	
+	foreach mobile in ListObjectsInBox(x1, y1, z1, x2, y2, z2, realm_name)
+		if ( mobile.npctemplate )
+			AI_Sleep(mobile);
+		endif
+		
+		sleepms(5);
+		
+		//Clear out event responses the brain sends back to this command.
+		clear_event_queue();
+	endforeach
+	
+	SendSysMessage(who, "Done telling all npcs to sleep.");
+endprogram
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,45 @@
+//Example: .npcwipe (x1) (y1) (x2) (y2) -> Removes all npcs.
+use uo;
+use os;
+use polsys;
+
+include ":gumps:include/requestgump";
+
+program npcwipe(who, text)
+	Set_Priority(100);
+	
+	var realm_name := RequestGump(who, "Enter the realm name to perform the wipe on.", "", who.realm);
+	var realm_info := Realms()[realm_name];
+	if ( !realm_info )
+		SendSysMessage(who, "Invalid realm name.");
+		return 0;
+	endif
+	
+	var x1 := 1, y1 := 1, x2 := realm_info.width, y2 := realm_info.height;
+	var z1 := -120, z2 := 120;
+			
+	if ( x2 > realm_info.width )
+		SendSysMessage(who, "Error - X coordinate exceeds ["+realm_info.width+"] for realm ["+realm_name+"]");
+		return 0;
+	elseif ( y2 > realm_info.height )
+		SendSysMessage(who, "Error - Y coordinate exceeds ["+realm_info.height+"] for realm ["+realm_name+"]");
+		return 0;
+	endif
+					
+	SendSysMessage(who, "Starting npc wiper [" + x1 + " " + y1 + " " + x2 + " " + y2 + "] on realm ["+realm_name+"]");
+	SysLog("Starting npc wiper [" + x1 + " " + y1 + " " + x2 + " " + y2 + "] on realm ["+realm_name+"]");
+	
+	var count := 0;
+	foreach thing in ListObjectsInBox(x1, y1, z1, x2, y2, z2, realm_name)
+		if ( thing.npctemplate )
+			SetObjProperty(thing, "GuardKill", 1);
+			ApplyRawDamage(thing, 6000);
+			count := count + 1;
+			sleepms(4);
+		endif
+		sleepms(5);
+	endforeach
+	
+	SendSysMessage(who, "Killed " + count + " NPCs");
+	SysLog("Killed " + count + " NPCs");
+endprogram

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,26 @@
+//Example: .puttosleep -> Puts targetted NPC to sleep.
+use uo;
+use os;
+
+include ":ai_brain:NPC_Commands";
+include "include/messages";
+include "include/localization";
+
+
+program command_puttosleep(who)
+	var mobile; := target(who);
+
+	SendMessage(who, MSG_TARGET_MOB, {}, MSG_COMMAND);
+
+	if ((mobile := Target(who, TGTOPT_NOCHECK_LOS)) == 0)
+		SendMessage(who, MSG_CANCELLED, {}, MSG_COMMAND);
+	endif
+
+	if (!mobile.IsA(POLCLASS_NPC))
+		SendMessage(who, MSG_NO_MOB, {}, MSG_COMMAND);
+		return 0;
+	else
+		AI_Sleep(mobile);
+		SendMessage(who, MSG_DONE, {}, MSG_COMMAND);
+	endif
+endprogram
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/removenpc.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/removenpc.src	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/removenpc.src	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,38 @@
+//Example: .removenpc [npc template] -> Removes every npc of that type.
+use uo;
+use os;
+use polsys;
+
+include ":gumps:include/requestgump";
+
+program NPCWipe(who, template)
+	if ( !template )
+		template := RequestGump(who, "Enter the npc template name to remove.");
+		if ( !template )
+			SendSysMessage(who, "Cancelled.");
+			return 0;
+		endif
+	endif
+	template := Lower(template);
+		
+	var realm_name := RequestGump(who, "Enter the realm name to perform the wipe on.", "", who.realm);
+	var realm_info := Realms()[realm_name];
+	if ( !realm_info )
+		SendSysMessage(who, "Invalid realm name.");
+		return 0;
+	endif
+	
+	var x1 := 1, y1 := 1, x2 := realm_info.width, y2 := realm_info.height;
+	var z1 := -120, z2 := 120;
+	
+	var count := 0;
+	foreach thing in ListObjectsInBox(x1, y1, z1, x2, y2, z2, realm_name)
+		if ( Lower(thing.npctemplate) == template )
+			SetObjProperty(thing, "GuardKill", 1);
+			ApplyRawDamage(thing, 8000);
+			count := count + 1;
+		endif
+		sleepms(2);
+	endforeach
+	SendSysMessage(who, "Killed " + count + " NPCs");
+endprogram

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,35 @@
+//Example: .resetnpcs -> Restarts the AI script of every npc on the shard.
+use uo;
+use os;
+use polsys;
+
+include ":ai_brain:include/NPC_Commands";
+include ":gumps:include/requestgump";
+
+program ResetAllNPCs(who)
+	var realm_name := RequestGump(who, "Enter the realm name to perform the wipe on.", "", who.realm);
+	var realm_info := Realms()[realm_name];
+	if ( !realm_info )
+		SendSysMessage(who, "Invalid realm name.");
+		return 0;
+	endif
+	
+	SysLog("Starting NPC AI reset.");
+	SendSysMessage(who, "Starting NPC AI reset.");
+	
+	var x1 := 1, y1 := 1, x2 := realm_info.width, y2 := realm_info.height;
+	var z1 := -120, z2 := 120;
+	
+	foreach mobile in ListObjectsInBox( x1, y1, z1, x2, y2, z2)
+		if (mobile.npctemplate)
+			RestartScript(mobile);
+			sleepms(5);
+			
+			//Clear out event responses the brain sends back to this command.
+			clear_event_queue();
+		endif
+	endforeach
+	
+	SendSysMessage(who, "Done restarting all npcs.");
+	SysLog("Finished restarting all npcs.");
+endprogram
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/restartnpc.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/restartnpc.src	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/restartnpc.src	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,8 @@
+use uo;
+
+program FixAI(who)
+	var targ := target(who);
+	var result := RestartScript(targ);
+	
+	SendSysMessage(who, "Result of RestartScript("+targ.name+") ->"+result);
+endprogram
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/commands/gm/sendevent.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/sendevent.src	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/sendevent.src	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,27 @@
+//Example: .sendevent [event] -> Sends an event to the targetted npc.
+use uo;
+use os;
+
+include ":gumps:include/requestgump";
+
+program ControlNPC(who, event)
+	if ( !event )
+		event := CInt(RequestGump(who, "Enter event value", "Place a + or - at the begining if it is a number."));
+	endif
+	
+	if ( event[1] in {"+", "-"})
+		event := CInt(event);
+	endif
+
+	var ev := struct;
+	ev.+source := who;
+	ev.+type := event;
+	
+	var targ := target(who);
+	if ( targ )
+		SendEvent(targ, ev);
+		SendSysMessage(who, "Event sent as "+TypeOf(event)+")");
+	else
+		SendSysMessage(who, "Cancelled");
+	endif
+endprogram
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/commands/test/cfgtest.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/test/cfgtest.src	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/commands/test/cfgtest.src	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,44 @@
+use uo;
+use os;
+use cfgfile;
+
+include ":ai_brain:include/npcSettings";
+include ":ai_brain:include/npcUtil";
+
+unload_scripts("");
+
+program CfgTest(who, template)
+	if  ( !template )
+		SendSysMessage(who, "Error - no NPC template name was entered.");
+		return 0;
+	endif
+			
+	ShowInfo(who, "###############");
+	
+	var settings := NPC_LoadTemplateSettings(template);
+	settings := NPC_GetDefaultSettings(settings);
+	foreach key in ( settings.keys() )
+		ShowInfo(who, "settings["+key+"] == "+settings[key]);
+		sleepms(10);
+	endforeach
+	
+	ShowInfo(who, "----");
+	
+	var scripts := NPC_LoadScriptSettings(template);
+	foreach key in ( scripts.keys() )
+		ShowInfo(who, "scripts ["+key+"] == "+scripts[key]);
+		sleepms(10);
+	endforeach
+	
+	ShowInfo(who, "###############");
+	
+	UnloadConfigFile("::npcdesc");
+	
+endprogram
+
+function ShowInfo(who, line)
+	Print(""+line);
+	SendSysMessage(who, ""+line, 3, 2101);
+	
+	return 1;
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/config/hatelist.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/config/hatelist.cfg	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/config/hatelist.cfg	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,10 @@
+HateList Dog
+{
+	Hates	cat
+	Hates	bird
+	Hates	chicken
+}
+
+HateList Wolf
+{
+	Hates	C
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/config/icp.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/config/icp.cfg	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/config/icp.cfg	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,30 @@
+ICP Register
+{
+	Name		Brain AI - Krane Edition
+	Version		5.0
+	Description	Advanced artificial intelligence system that allows NPCs to perform multiple actions at the same time. [P]
+	Description	The name gives credit to the Ninja Turtle's villian [P] 
+	Description	sometimes the bad guys deserve respect because of all the crap they put up with.
+	
+	Creator		Austin
+	C_Email		Austin at tsse.net
+	
+	Maintainer	Austin
+	M_Email		Austin at tsse.net
+	
+	//Script	cmdlevel path
+			
+	//TextCmd	cmdlevel path
+	TextCmd		3 :control:textcmd/gm/attack
+	TextCmd		3 :control:textcmd/gm/cmassacre
+	TextCmd		3 :control:textcmd/gm/createnpc
+	TextCmd		3 :control:textcmd/gm/makeswarm
+	TextCmd		3 :control:textcmd/gm/massacre
+	TextCmd		3 :control:textcmd/gm/npcsleep
+	TextCmd		3 :control:textcmd/gm/npcwipe
+	TextCmd		3 :control:textcmd/gm/puttosleep
+	TextCmd		3 :control:textcmd/gm/removenpc
+	TextCmd		3 :control:textcmd/gm/resetnpcs
+	TextCmd		3 :control:textcmd/gm/restartnpc
+	TextCmd		3 :control:textcmd/gm/sendevent
+}

Added: trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,41 @@
+/*===============================================================
+* Current Version
+* ERROR.INC - v1.0
+* Updated 8/31/2005 5:08AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+/*
+ * FatalError(errmsg)
+ *
+ * Purpose
+ * Logs an error message and then kills the npc.
+ *
+ * Parameters
+ * errmsg:	Error message - reason for removing the npc.
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function FatalError(errmsg)
+	set_critical(1);
+	
+	PrintTextAbove(npc, errmsg, _DEFAULT_TEXT_FONT, 32);
+	
+	NPC_ErrorSysLog(npc, errmsg);
+	
+	npc.cmdlevel := 1;
+	npc.concealed := 1;
+	
+	npc.disable("invul");
+	SetObjProperty(npc, "GuardKill", 1);
+	ApplyRawDamage(npc, GetVitalMaximumValue(npc, "Hits"));
+	
+	set_critical(0);
+	
+	return 1;
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,299 @@
+/*===============================================================
+* Current Version
+* EVENTPROCESSOR.INC - v1.0
+* Updated 9/1/2005 6:20AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+function ProcessEvent(byref event)
+	var old_priority := set_priority(25);
+	
+	case( event.type )
+		//
+		// *Check movement first, since its the event that seems to be sent most often.
+		//
+		
+		// Move NPC
+		// .source	: From/To whom/what?
+		// .speed	: Walk/Run
+		// .direction	: Away/Towards
+		// .loop	: Number of times to attempt to loop the movement.
+		NPCEVENT_MOVE:
+			Movement(event);
+			break;
+			
+		// Instructs the npc to walk toward an XY coordinate.
+		// .x and .y	: From/To  coordinates
+		// .speed	: Walk/Run
+		// .direction	: Away/Towards
+		// .loop	: Number of times to attempt to loop the movement.
+		NPCEVENT_MOVE_XY:
+			MovementXY(event);
+			break;
+			
+		// Wander somewhere
+		// .loop	: Number of times to attept to wander.
+		NPCEVENT_WANDER:
+	   		MovementWander(event);
+	   		break;
+		
+		//
+		// * Check System Events that the core sends.
+		//
+			
+		// Triggered when a mobile enter's the npcs 'area size'.
+		// .source	: What entered the area
+		SYSEVENT_ENTEREDAREA:
+			if ( g_scripts.Exists("EnterArea") )
+				var process := GetNerveProcess(npc, "EnterArea", g_nerves);
+				if ( !process )
+					StartNerve(npc, "EnterArea", g_scripts["EnterArea"].script, {event, g_settings, g_scripts}, g_scripts["EnterArea"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+			
+		// Triggered when a mobile leaves the npc's 'area size'.
+		// .source	: What left the area
+		SYSEVENT_LEFTAREA:
+			if ( g_scripts.Exists("LeftArea") )
+				var process := GetNerveProcess(npc, "LeftArea", g_nerves);
+				if ( !process )
+					StartNerve(npc, "LeftArea", g_scripts["LeftArea"].script, {event, g_settings, g_scripts}, g_scripts["LeftArea"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+			
+		// Someone has changed from blue to gray/red and was already within the ENTERED_AREA range
+		// .source	: What changed criminal status.
+		SYSEVENT_GONE_CRIMINAL:
+			if ( g_scripts.Exists("ItemGiven") )
+				var process := GetNerveProcess(npc, "ItemGiven", g_nerves);
+				if ( !process )
+					StartNerve(npc, "ItemGiven", g_scripts["ItemGiven"].script, {event, g_settings, g_scripts}, g_scripts["ItemGiven"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+			
+		// Sent when something targets the npc to begin combat or
+		// when something has damaged the npc.
+		// .source	: What caused the damage or engaged the npc
+		// For SYSEVENT_DAMAGED
+		// .damaged	: Integer amount of damage.
+		SYSEVENT_ENGAGED:
+		SYSEVENT_DAMAGED:
+			if ( g_scripts.Exists("Combat") )
+				if ( (event.source).ISA(POLCLASS_MOBILE) )
+					var process := GetNerveProcess(npc, "Combat", g_nerves);
+					if ( !process )
+						StartNerve(npc, "Combat", g_scripts["Combat"].script, {event, g_settings, g_scripts}, g_scripts["Combat"].flags, g_nerves);
+					else
+						process.SendEvent(event);
+					endif
+				endif
+			endif
+			break;
+			
+		// Instructs the npc to run its disengage nerve.
+		// When something attacking it goes out of warmode, this is run.
+		// .source	: What was targetting this npc but has now left combat mode.
+		SYSEVENT_DISENGAGED:
+			if ( g_scripts.Exists("Disengaged") )
+				var process := GetNerveProcess(npc, "Disengaged", g_nerves);
+				if ( !process )
+					StartNerve(npc, "Disengaged", g_scripts["Disengaged"].script, {event, g_settings, g_scripts}, g_scripts["Disengaged"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+			
+		// When speech is made by a player, this nerve is used.
+		// Note: The NPC function Say() doesnt yet pass around the speech event.
+		// .source	: Where the speech originated.
+		// .text	: The actual speech
+		// .uc_text	: a "Unicode array" of 2-byte "Big Endian" integers.
+		// .langcode	: a 3-character, uppercase language code.
+		// .texttype	: "yell", "whisper", "emote", "default".
+		SYSEVENT_SPEECH:
+		SYSEVENT_GHOST_SPEECH:
+			if( g_scripts.Exists("Listen") )
+				var process := GetNerveProcess(npc, "Listen", g_nerves);
+				if ( !process )
+					StartNerve(npc, "Listen", g_scripts["Listen"].script, {event, g_settings, g_scripts}, g_scripts["Listen"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+			
+		// Instructs the npc to run its double click script.
+		// Run when the npc is double clicked by a player.
+		// .source	: What sent the double click
+		SYSEVENT_DOUBLECLICKED:
+			if ( g_scripts.Exists("DblClick") )
+				if ( Distance(event.source, npc) <= g_settings["dbl_click_range"] )
+					var process := GetNerveProcess(npc, "DblClick", g_nerves);
+					if ( !process )
+						StartNerve(npc, "DblClick", g_scripts["DblClick"].script, {event, g_settings, g_scripts}, g_scripts["DblClick"].flags, g_nerves);
+					else
+						process.SendEvent(event);
+					endif
+				endif
+			endif
+			break;
+			
+		// The NPC is a merchant, and has sold or purchased something.
+		// Both sold and bought events are sent to this same nerve.
+		// The best thing to do is fork it into two functions inside the
+		// nerve script to handle each event type.
+		// MERCHANT_SOLD means the merchant sold an item to the player.
+		// MERCHANT_BOUGHT means the merchatn bought something from the player.
+		//
+		// .source	: Who the merchant is selling to/buying from.
+		// .amount	: Gold amount for the sale/purchase.
+		SYSEVENT_MERCHANT_SOLD:
+		SYSEVENT_MERCHANT_BOUGHT:
+			if ( g_scripts.Exists("Merchant") )
+				var process := GetNerveProcess(npc, "Merchant", g_nerves);
+				if ( !process )
+					StartNerve(npc, "Merchant", g_scripts["Merchant"].script, {event, g_settings, g_scripts}, g_scripts["Merchant"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+			
+		// Someone has dragged an item onto the npc.
+		// .source	: What dragged the item over the npc.
+		// .item	: The item being given to the npc.
+		SYSEVENT_ITEM_GIVEN:
+			if ( g_scripts.Exists("ItemGiven") )
+				var process := GetNerveProcess(npc, "ItemGiven", g_nerves);
+				if ( !process )
+					StartNerve(npc, "ItemGiven", g_scripts["ItemGiven"].script, {event, g_settings, g_scripts}, g_scripts["ItemGiven"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+			
+		//
+		// * Check custom events
+		//
+		//A nerve has instructed the brain to kill another nerve or its self.
+		// .name	: Nerve name
+		NPCEVENT_ENDNERVE:
+			StopNerve(npc, event.name, g_nerves);
+			break;
+			
+		//A nerve has instructed the brain to start another nerve.
+		// .name	: Nerve name
+		// .script	: Nerve script
+		// .data	: array of goodies
+		NPCEVENT_STARTNERVE:
+			StartNerve(npc, event.name, event.script, event.data, event.flags, g_nerves);
+			break;
+			
+		// Set a new opponent!
+		// NOTE: Auto-sets Warmode=1!
+		// .source	: Opponent (mobile)
+		NPCEVENT_OPPONENT:
+			SetOpponent(event.source);
+			break;
+			
+		// Say something
+		// .text	: Speech content
+		// .texttype	: Speech type ("default", "whisper", yell")
+		// .doevent	: Sends SYSEVENT_SPEECH to surrounding npcs
+		NPCEVENT_SPEAK:
+			Say(event.text, event.texttype, event.doevent);
+			break;
+			
+		// Turn toward something
+		// .source	: Target (anything)
+		// .direction	: NETURN_TOWARD or NETURN_AWAY
+		NPCEVENT_TURN:
+			case (event.direction)
+				NETURN_TOWARD:
+					TurnToward(event.source);
+				NETURN_AWAY:
+					TurnAwayFrom(event.source);
+			endcase
+			break;
+			
+		// Face towards or away from XY coordinates.
+		// .x and .y replace .source for TURN_XY
+		// .direction	: NETURN_TOWARD or NETURN_AWAY
+		NPCEVENT_TURN_XY:
+			case (event.direction)
+				NETURN_TOWARD:
+					TurnTowardLocation(event.x, event.y);
+				NETURN_AWAY:
+					TurnAwayFromLocation(event.x, event.y);
+			endcase
+			break;
+			
+		// Set WarMode state
+		// NOTE: Auto-clears Opponent if turned off!
+		// .value : 0=Off. 1=On.
+		NPCEVENT_WARMODE:
+			SetWarmode( event.value );
+			break;
+	   		
+	   	// Force the npc to go into its sleep mode.
+	   	// If the next event in the queue tells it to wake up,
+	   	// this command will be useless.
+	   	NPCEVENT_SLEEP:
+	   		//idle_ticks := g_settings["idle_ticks"]+1;
+	   		break;
+	   		
+	   	// Force the npc out of sleep mode.
+	   	NPCEVENT_WAKEUP:
+	   		//sleep_mode := 0;
+	   		//idle_ticks := 0;
+	   		break;
+	   		
+	   	// Forward an event from one nerve to another.
+	   	// .NerveName	: The name of the nerve to forward the event to.
+	   	// .mask	: Type of event for the nerve to receive.
+	   	// .data	: Data to forward to the nerve.
+	   	NPCEVENT_FWDNERVE:
+	   	var process := GetNerveProcess(npc, event.NerveName, g_nerves);
+			if ( process )
+				process.SendEvent(event);
+			endif
+			break;
+			
+		// If the event .type is unknown, send it to the
+		// npc's "virtual" nerve if it has one.
+	   	default:
+	   		if ( g_scripts.Exists("Virtual") )
+	   			var process := GetNerveProcess(npc, "Virtual", g_nerves);
+				if ( !process )
+					StartNerve(npc, "Virtual", g_scripts["Virtual"].script, {event, g_settings, g_scripts}, g_scripts["Virtual"].flags, g_nerves);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
+	   endcase
+
+	   // If the event has a .process member, reply to it by sending
+	   // an event with .type being the NPCEVENT_DONE constant
+	   // and telling it what event it sent that has finished
+	   // being processed.
+	   if ( event.process )
+	   	(event.process).SendEvent(struct{"type":=NPCEVENT_DONE, "source":=event.type});
+	   endif
+	   
+	   set_priority(old_priority);
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,168 @@
+/*===============================================================
+* Current Version
+* MOVEMENT.INC - v1.0
+* Updated 9/1/2005 6:42AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+/*
+ * Movement(ev)
+ *
+ * Purpose
+ * Handles NPC movenpcnt to/from an object for the brain.
+ *
+ * Parameters
+ * ev:	Strucuture containing event information.
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function Movement(ev)
+	var old_pri := set_priority(50);
+	
+	case ( ev.speed )
+		NEMOVE_WALK:
+			case ( ev.direction )
+				NEMOVE_AWAY:
+					repeat
+						WalkAwayFrom(ev.source);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+				NEMOVE_TOWARD:
+					repeat
+						WalkToward(ev.source);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+			endcase	
+		NEMOVE_RUN:
+			case( ev.direction )
+				NEMOVE_AWAY:
+					repeat
+						RunAWayFrom(ev.source);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );	
+				NEMOVE_TOWARD:
+					repeat
+						RunToward(ev.source);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+			endcase
+	endcase
+	
+	set_priority(old_pri);
+	
+	return 1;
+endfunction
+
+/*
+ * MovementXY(ev)
+ *
+ * Purpose
+ * Handles NPC movement to/from a coordinate for the brain.
+ *
+ * Parameters
+ * ev:	Strucuture containing event information.
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function MovementXY(ev)
+	var old_pri := set_priority(50);
+	
+	case ( ev.speed )
+		NEMOVE_WALK:
+			case ( ev.direction )
+				NEMOVE_AWAY:
+					repeat
+						WalkAwayFromLocation(ev.x, ev.y);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+				NEMOVE_TOWARD:
+					repeat
+						WalkTowardLocation(ev.x, ev.y);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+			endcase	
+		NEMOVE_RUN:
+			case( ev.direction )
+				NEMOVE_AWAY:
+					repeat
+						RunAwayFromLocation(ev.x, ev.y);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );	
+				NEMOVE_TOWARD:
+					repeat
+						RunTowardLocation(ev.x, ev.y);
+						sleepms(3);
+					until ( !MoveLoopCheck(ev) );
+			endcase
+	endcase
+	
+	set_priority(old_pri);
+	
+	return 1;
+endfunction
+
+/*
+ * MovementWander(ev)
+ *
+ * Purpose
+ * Handles NPC wander movement for the brain.
+ *
+ * Parameters
+ * ev:	Strucuture containing event information.
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function MovementWander(ev)
+	repeat
+		Wander();
+		sleepms(3);
+	until ( !MoveLoopCheck(ev) );
+endfunction
+
+/*
+ * MoveLoop(ev)
+ *
+ * Purpose
+ * Determines if the npc should continue trying to move
+ * or if something else needs the brain's attention.
+ *
+ * Parameters
+ * ev:	Strucuture containing event information.
+ *
+ * Return value
+ * Returns 1 if the npc may continue moving.
+ *
+ */
+function MoveLoopCheck(byref ev)
+	if ( Events_Waiting() )
+		return 0;
+	elseif ( ev.loop < 1 )
+		return 0;
+	elseif ( npc.frozen )
+		return 0;
+	elseif ( npc.paralyzed )
+		return 0;
+	endif
+	if ( ev.source )
+		// Dont need to worry about distance in an XY movement check. 
+		// It wont run in circles around XY coordinates like it does an object.
+		if ( ev.direction == NEMOVE_TOWARD )
+			if ( Distance(npc, ev.source) <= 1 )
+				return 0;
+			endif
+		endif
+	endif
+	
+	ev.loop := ev.loop-1;
+	
+	return 1;
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,133 @@
+/*===============================================================
+* Current Version
+* SETUP.INC - v1.0
+* Updated 8/31/2005 4:54AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+/*
+ * InitializeSettings()
+ * 
+ * Purpose
+ * Initializes g_settings in the brain.
+ *
+ * Parameters
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function InitializeSettings()
+	
+	g_settings := NPC_LoadTemplateSettings(npc);
+	g_settings := NPC_GetDefaultSettings(g_settings);
+	g_settings := NPC_LoadScriptSettings(npc);
+		
+	return 1;
+endfunction
+
+/*
+ * InitializeEvents()
+ *
+ * Purpose
+ * Enables system events the core sends based on g_settings
+ *
+ * Parameters
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function InitializeEvents()
+	//
+	// * Events that use the core 'speech' range.
+	//
+	if ( g_scripts.Exists("Listen") )
+		if ( g_settings["HearSpeech"] )
+			EnableEvents(SYSEVENT_SPEECH, g_settings["ListenRange"]);
+		endif
+		if ( g_settings["HearGhosts"] )
+			EnableEvents(SYSEVENT_GHOST_SPEECH, g_settings["ListenRange"]);
+		endif
+	endif
+		
+	//
+	// * Events that use the core 'area size' range.
+	//
+	if ( g_scripts.Exists("EnterArea") )
+		EnableEvents(SYSEVENT_ENTEREDAREA, g_settings["AreaSize"]);
+	endif
+	if ( g_scripts.Exists("LeftArea") )
+		EnableEvents(SYSEVENT_LEFTAREA, g_settings["AreaSize"]);
+	endif
+	if ( g_scripts.Exists("GoneCriminal") )
+		EnableEvents(SYSEVENT_GONE_CRIMINAL, g_settings["AreaSize"]);
+	endif
+	
+	//
+	// * Events that do not have a core range check.
+	//
+	if ( g_scripts.Exists("DblClick") )
+		EnableEvents(SYSEVENT_DOUBLECLICKED);
+	endif
+	if ( g_scripts.Exists("ItemGiven") )
+		EnableEvents(SYSEVENT_ITEM_GIVEN);
+	endif
+	if ( g_scripts.Exists("Disengaged") )
+		EnableEvents(SYSEVENT_DISENGAGED);
+	endif
+	if ( g_scripts.Exists("Merchant") )
+		EnableEvents(SYSEVENT_MERCHANT_BOUGHT);
+		EnableEvents(SYSEVENT_MERCHANT_SOLD);
+	endif
+	if ( g_scripts.Exists("Combat") )
+		EnableEvents(SYSEVENT_ENGAGED+SYSEVENT_DAMAGED);
+	endif
+	
+	return 1;
+endfunction
+
+/*
+ * StartupScripts()
+ *
+ * Purpose
+ * Runs the restart_script or init_script. Sets up the npc_info cprop.
+ *
+ * Parameters
+ *
+ * Return value
+ * Returns 1 on success
+ *
+ */
+function StartupScripts()
+	if ( GetObjProperty(npc, "npc_info") )
+		//This can only happen if restart() was done on the npc or when POL starts up.
+		
+		SetWarmode(0);
+		//StopNerves();
+		
+		if ( g_scripts.Exists("restart_script") )
+			var restart_script := Run_Script_To_Completion(g_scripts["restart_script"], {npc, g_settings});
+			if ( restart_script.errortext )
+				FatalError("Restart script failed:"+restart_script.errortext);
+				return 0;
+			endif
+		endif
+	else
+		var npc_info := struct{"npctemplate":=npc.npctemplate, "serial":=npc.serial};
+		SetObjProperty(npc, "npc_info", npc_info);
+		
+		if ( g_scripts.Exists("init_script") )
+			var init_script := Run_Script_To_Completion(g_scripts["init_script"], {npc, g_settings});
+			if ( init_script.errortext )
+				FatalError("Init script failed:"+init_script.errortext);
+				return 0;
+			endif
+		endif
+	endif
+	
+	return 1;
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/include/eventid.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/eventid.inc	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/include/eventid.inc	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,70 @@
+/*===============================================================
+* Current Version
+* EVENTID.INC - v1.0
+* Updated 8/31/2005 5:50AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+//
+// * Custom brain AI event IDs
+//
+const NPCEVENT_MOVE				:= 0xA00003;	// Has NEMOVE_* helper constants
+const NPCEVENT_OPPONENT				:= 0xA00004;	// Set New Opponent (.source)
+const NPCEVENT_SPEAK				:= 0xA00005;	// Speak (.text)
+const NPCEVENT_TURN				:= 0xA00006;	// Turn towards or away from an object
+const NPCEVENT_WARMODE				:= 0xA00007;	// Set WarMode state (.value=0|1)
+const NPCEVENT_ATTACK				:= 0xA0000A;	// Tell the npc to attack something
+const NPCEVENT_MOVE_XY				:= 0xA0000B;	// Tell the NPC to move to coordinates
+const NPCEVENT_TURN_XY				:= 0xA0000C;	// Tell the NPC to turn towards coordinates
+const NPCEVENT_WANDER				:= 0xA0000D;	// Tell the npc to wander
+
+const NPCEVENT_ENDNERVE				:= 0xA0000F;	// Tell the brain to stop a nerve.
+const NPCEVENT_STARTNERVE			:= 0xA00010;	// Tell the brain to start a nerve.
+const NPCEVENT_DONE				:= 0xA00011;	// Brain tells a nerve that its instruction is done.
+
+const NPCEVENT_SLEEP				:= 0xA00012;	// Tell the brain to go to sleep.
+const NPCEVENT_WAKEUP				:= 0xA00013;	// Tell the brain to wake up.
+
+const NPCEVENT_FWDNERVE				:= 0xA00014;	// Tell the brain to forward an event to a nerve.
+
+//
+// * NPCEVENT_MOVE helper constants (.source = object)
+//
+const NEMOVE_WALK				:= 1;	// .speed (default)
+const NEMOVE_RUN				:= 2;	// .speed
+const NEMOVE_TOWARD 				:= 1;	// .direction (default)
+const NEMOVE_AWAY				:= 2;	// .direction
+
+//
+// * NE_TURN helper constants
+//
+const NETURN_TOWARD				:= 1;
+const NETURN_AWAY				:= 2;
+
+//
+// * AWAKEN CONSTANTS
+// 
+const WAKEUP					:= 0;
+const NOWAKE					:= 1;
+
+//
+// * CLEAR THOUGHT CONSTANTS
+//
+const CLR_BRAIN					:= 1;
+const CLR_NERVE					:= 2;
+const CLR_BOTH					:= 3;
+
+//
+//* NPC.EM constants (only brain can access npc.em)
+//
+// Constants for texttype flags in the AI_Speak() function
+const SPEAK_TEXTTYPE_DEFAULT			:= "default";
+const SPEAK_TEXTTYPE_WHISPER			:= "whisper";
+const SPEAK_TEXTTYPE_YELL			:= "yell";
+
+// Constants for doevent flag in AI_Speak() function
+const SPEAK_DOEVENT_DISABLE			:= 0x0;
+const SPEAK_DOEVENT_ENABLE			:= 0x1;

Added: trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,520 @@
+/*===============================================================
+* Current Version
+* NPC_COMMANDS.INC - v1.0
+* Updated 8/31/2005 6:38AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+
+include "include/sysEvent";
+include ":ai_brain:include/eventid";
+
+/////////////////////////////////////////////////////////////////
+// * Function List *
+//
+// AI_Attack(mobile, opponent, no_wake:=WAKEUP)
+// AI_ClearThoughts(mobile, flags)
+// AI_EndNerve(mobile, nerve_name, no_wake:=WAKEUP)
+// AI_Flee(mobile, opponent, no_wake:=WAKEUP)
+// AI_FowardEvent(mobile, nerve_name, mask, data, no_wake:=WAKEUP)
+// AI_Move(mobile, object, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
+// AI_MoveXY(mobile, x, y, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
+// AI_SetOpponent(mobile, opponent, no_wake:=WAKEUP)
+// AI_Sleep(mobile)
+// AI_Speak(mobile, text, text_type:=SPEAK_TEXTTYPE_DEFAULT, do_event:=SPEAK_DOEVENT_DISABLE, no_wake:=WAKEUP)
+// AI_StartNerve(mobile, nerve_name, script_name, data, no_wake:=WAKEUP)
+// AI_Turn(mobile, turn_to, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
+// AI_TurnXY(mobile, x, y, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
+// AI_WakeUp(mobile)
+// AI_Wander(mobile, no_wake:=WAKEUP, loop:=0)
+// AI_WarMode(mobile, mode:=0, no_wake:=WAKEUP)
+// 
+/////////////////////////////////////////////////////////////////
+
+/*
+ * AI_Attack(mobile, opponent, no_wake)
+ *
+ * Purpose
+ * Triggers the npc's combat script on opponent.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * opponent:	What the npc's combat nerve will attack.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Attack(mobile, opponent, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= SYSEVENT_ENGAGED;
+	ev.+source	:= opponent;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_ClearThoughts(mobile, flags)
+ *
+ * Purpose
+ * Clears the event queue for the script calling it and or the brain.
+ *
+ * Parameters
+ * mobile:	A reference to the npc.
+ * flags:	CLR_* flag for what scripts should have their event queues cleared.
+ *		CLR_BRAIN - Clears the brain's queue.
+ *		CLR_NERVE - Clears the nerve's queue.
+ *		CLR_BOTH  - Clears the queue for both.
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function AI_ClearThoughts(mobile, flags)
+	var brain	:= flags & CLR_BRAIN;
+	var nerve	:= flags & CLR_NERVE;
+	var both	:= flags & CLR_BOTH;
+
+	if ( both || brain )
+		brain := mobile.process;
+		brain.clear_event_queue();
+	endif
+
+	if ( both || nerve )
+		nerve := GetProcess(GetPid());
+		nerve.clear_event_queue();
+	endif
+
+	return 1;
+endfunction
+
+/*
+ * AI_EndNerve(mobile, nerve_name, no_wake)
+ *
+ * Purpose
+ * Used to tell the brain to stop a nerve script.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * nerve_name:	String containing the name of the nerve (dictionary key).
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_EndNerve(mobile, nerve_name, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_ENDNERVE;
+	ev.+name	:= nerve_name;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_Flee(mobile, opponent, no_wake)
+ *
+ * Purpose
+ * Used to tell the brain to stop a nerve script.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * opponent:	Opponent to flee from.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Flee(mobile, opponent, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_FLEE;
+	ev.+source	:= opponent;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_ForwardEvent(mobile, nerve_name, mask, data, no_wake)
+ *
+ * Purpose
+ * Used to send an event from one nerve to another.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * nerve_name:	String containing the name of the nerve to forward the event to (dictionary key).
+ * mask:	The type of event the nerve should handle the forward as. (example: SYSEVENT_LEFTAREA)
+ * data:	Data that the nerve will receive.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_FowardEvent(mobile, nerve_name, mask, data, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_FWDNERVE;
+	ev.+NerveName	:= nerve_name;
+	ev.+mask	:= mask;
+	ev.+data	:= data;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_Move(mobile, opponent, to_from, speed, no_wake, loop)
+ *
+ * Purpose
+ * Commands an npc to move toward / away from an item or mobile.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * object:	Item or mobile the npc will move away from/toward.
+ * to_from:	Direction the npc will go:
+ *		NEMOVE_TOWARD - Will make the npc move toward the object - Default
+ *		NEMOVE_AWAY   - Will make the npc move away from the object.
+ * speed:	Speed the npc will move at:
+ *		NEMOVE_RUN  - NPC will run
+ *		NEMOVE_WALK - NPC will walk
+ * no_wake:	Optional wakeup flag::
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ * loop:	Number of steps for the npc to take toward/away from the object.
+ *		Note: Loop can be interrupted and end prematurely!
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Move(mobile, object, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_MOVE;
+	ev.+source	:= object;
+	ev.+direction	:= to_from;
+	ev.+speed	:= speed;
+	ev.+WakeUp	:= no_wake;
+	ev.+loop	:= loop;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_MoveXY(mobile, x, y, to_from, speed, no_wake, loop)
+ *
+ * Purpose
+ * Commands an npc to move toward or away from an XY coordinate.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * x:		X coordinate to move away from/toward
+ * y:		Y coordinate to move away from/toward
+ * to_from:	Direction the npc will go:
+ *		NEMOVE_TOWARD - Will make the npc move toward the object - Default
+ *		NEMOVE_AWAY   - Will make the npc move away from the object.
+ * speed:	Speed the npc will move at:
+ *		NEMOVE_RUN  - NPC will run
+ *		NEMOVE_WALK - NPC will walk
+ * no_wake:	Optional wakeup flag::
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ * loop:	Number of steps for the npc to take toward/away from the object.
+ *		Note: Loop can be interrupted and end prematurely!
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_MoveXY(mobile, x, y, to_from:=NEMOVE_TOWARD, speed:=NEMOVE_RUN, no_wake:=WAKEUP, loop:=0)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_MOVE_XY;
+	ev.+x		:= x;
+	ev.+y		:= y;
+	ev.+direction	:= to_from;
+	ev.+speed	:= speed;
+	ev.+WakeUp	:= no_wake;
+	ev.+loop	:= loop;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_SetOpponent(mobile, opponent, no_wake)
+ *
+ * Purpose
+ * Places the npc into war mode and sets an opponent.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * opponent:	Mobile reference that will be considered an opponent.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_SetOpponent(mobile, opponent, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_OPPONENT;
+	ev.+source	:= opponent;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_Sleep(mobile)
+ *
+ * Purpose
+ * Instructs the npc to go into sleep mode - shuts down all nerves.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Sleep(mobile)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_SLEEP;
+	ev.+WakeUp	:= NOWAKE;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_Speak(mobile, text, text_type, do_event, no_wake)
+ *
+ * Purpose
+ * Commands the NPC to speak.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * text:	The text the npc will speak.
+ * text_type:	text_type for npc.em :
+ *		SPEAK_TEXTTYPE_DEFAULT - Default
+ *		SPEAK_TEXTTYPE_WHISPER
+ *		SPEAK_TEXTTYPE_YELL
+ * do_event:	Flags for sending a system event for speech to surrounding npcs.
+ *		SPEAK_DOEVENT_DISABLE - Default
+ *		SPEAK_DOEVENT_ENABLE
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Speak(mobile, text, text_type:=SPEAK_TEXTTYPE_DEFAULT, do_event:=SPEAK_DOEVENT_DISABLE, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_SPEAK;
+	ev.+text	:= text;
+	ev.+texttype	:= text_type;
+	ev.+doevent	:= do_event;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_StartNerve(mobile, nerve_name, script_name, data, no_wake)
+ *
+ * Purpose
+ * Used to start a custom nerve up from within a nerve.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * nerve_name:	String containing the name of the nerve (dictionary key).
+ * script_name:	Path of the script to start.
+ * data:	Data to be sent to the nerve once it starts.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_StartNerve(mobile, nerve_name, script_name, data, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_STARTNERVE;
+	ev.+name	:= nerve_name;
+	ev.+script	:= script_name;
+	ev.+data	:= data;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_Turn(mobile, turn_to, direction, no_wake)
+ *
+ * Purpose
+ * Commands the NPC to face away from / toward an object.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * turn_to:	item or moble reference to turn away from / toward.
+ * direction:	Direction the npc will face:
+ *		NETURN_TOWARD - Will make the npc turn toward the object - Default.
+ 		NETURN_AWAY   - Will make the npc turn away from the object.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Turn(mobile, turn_to, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_TURN;
+	ev.+source	:= turn_to;
+	ev.+direction	:= direction;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_TurnXY(mobile, x, y, direction, no_wake)
+ *
+ * Purpose
+ * Commands the NPC to face away from / toward a coordinate.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * x:		X coordinate to turn away from / toward.
+ * y:		Y coordinate to turn away from / toward.
+ * direction:	Direction the npc will face:
+ *		NETURN_TOWARD - Will make the npc turn toward the object - Default.
+ 		NETURN_AWAY   - Will make the npc turn away from the object.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_TurnXY(mobile, x, y, direction:=NETURN_TOWARD, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_TURN_XY;
+	ev.+x		:= x;
+	ev.+y		:= y;
+	ev.+direction	:= direction;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_WakeUp(mobile)
+ *
+ * Purpose
+ * Sends an event to the npc causing its sleep script to end.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_WakeUp(mobile)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_WAKEUP;
+	ev.+WakeUp	:= WAKEUP;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_Wander(mobile, opponent, no_wake)
+ *
+ * Purpose
+ * Commands the NPC to wander one step in a random direction.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ * loop:	Number of times to attempt to wander.
+ *		Note: Loop can be interrupted and end prematurely!
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_Wander(mobile, no_wake:=WAKEUP, loop:=0)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_WANDER;
+	ev.+WakeUp	:= no_wake;
+	ev.+loop	:= CInt(loop);
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction
+
+/*
+ * AI_WarMode(mobile, mode, no_wake)
+ *
+ * Purpose
+ * Toggles warmode on the npc. Setting to 0 also clears the opponent.
+ *
+ * Parameters
+ * mobile:	The npc that will receive the command.
+ * mode:	0 - Takes the NPC out of warmode and clears the opponent - Default.
+ *		1 - Places the npc into warmode.
+ * no_wake:	Optional wakeup flag:
+ *		WAKEUP - Will stop the sleep script if it is running - Default.
+ *		NOWAKE - Will not stop the sleep script if it is running.
+ *
+ * Return value
+ * Result of SendEvent()
+ *
+ */
+function AI_WarMode(mobile, mode:=0, no_wake:=WAKEUP)
+	var ev		:= struct;
+	ev.+type	:= NPCEVENT_WARMODE;
+	ev.+value	:= mode;
+	ev.+WakeUp	:= no_wake;
+	ev.+process	:= GetProcess(GetPid());
+
+	return SendEvent(mobile, ev);
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/include/npcError.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcError.inc	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcError.inc	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,36 @@
+/*===============================================================
+* Current Version
+* NPC_ERRORS.INC - v1.0
+* Updated 8/31/2005 5:08AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+
+/*
+ * NPC_ErrorSysLog(errmsg)
+ *
+ * Purpose
+ * Logs an error message.
+ *
+ * Parameters
+ * errmsg:	Error message
+ *
+ * Return value
+ * Always returns 1
+ *
+ */
+function NPC_ErrorSysLog(mobile, errmsg)
+	Set_Critical(1);
+	SysLog("NPC Template: " + mobile.npctemplate);
+	SysLog("NPC Name    : " + mobile.name);
+	SysLog(errmsg );
+	SysLog("------------");
+	Set_Critical(0);
+	
+	return 1;
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,213 @@
+/*===============================================================
+* Current Version
+* NERVES.INC - v1.0
+* Updated 9/1/2005 6:15PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+
+include ":ai_brain:include/npcError";
+
+/////////////////////////////////////////////////////////////////
+// * Function List *
+//
+// GetNerveFlags(mobile, nerve_name, byref nerve_dict:=0)
+// GetNerveProcess(mobile, nerve_name, byref nerve_dict:=0)
+// LoadNerves(mobile)
+// SaveNerves(mobile, nerve_dict)
+// StartNerve(mobile, nerve_name, nerve_script, data:=array, flags:=NF_NO_FLAGS, byref nerve_dict:=0)
+// StopNerve(mobile, nerve_name, byref nerve_dict:=0)
+//
+/////////////////////////////////////////////////////////////////
+// * Global Varibles *
+//
+// Nerve flags
+const NF_NO_FLAGS		:= 0x0;
+const NF_CONTINUE_ON_SLEEP	:= 0x1;
+//
+/////////////////////////////////////////////////////////////////
+
+/*
+ * LoadNerves()
+ *
+ * Purpose
+ * Loads nerve information for an npc.
+ *
+ * Parameters
+ * mobile:	NPC to get the nerve settings from.
+ *
+ * Return value
+ * Returns a dictionary
+ *
+ */
+function LoadNerves(mobile)
+	var nerve_dict := GetObjProperty(mobile, "#NerveInfo");
+	if ( Lower(TypeOf(nerve_dict)) != "dictionary" )
+		nerve_dict := dictionary;
+	endif
+
+	return nerve_dict;
+endfunction
+
+/*
+ * SaveNerves(mobile, nerve_dict)
+ *
+ * Purpose
+ * Saves nerve information for an npc.
+ *
+ * Parameters
+ * mobile:	NPC to save the nerve settings on.
+ * nerve_dict:	Dictionary containing nerve information.
+ *
+ * Return value
+ * Returns 1 on success
+ *
+ */
+function SaveNerves(mobile, byref nerve_dict)
+	return SetObjProperty(mobile, "#NerveInfo", nerve_dict);
+endfunction
+
+/*
+ * GetNerveProcess(mobile, nerve_name, byref nerve_dict)
+ *
+ * Purpose
+ * Retrieves a reference to a running nerve script.
+ *
+ * Parameters
+ * mobile:	NPC to get the nerve information from.
+ * nerve_name:	Name of the nerve to get the information for.
+ * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
+ *
+ * Return value
+ * Returns a script reference.
+ *
+ */
+function GetNerveProcess(mobile, nerve_name, byref nerve_dict:=0)
+	if ( !nerve_dict )
+		nerve_dict := LoadNerves(mobile);
+	endif
+
+	if ( nerve_dict.exists(nerve_name) )
+		return GetProcess(CInt(nerve_dict[nerve_name].pid));
+	else
+		return error{"errortext" := "GetNerveProcess() - Invalid nerve name  ["+nerve_name+"]"};
+	endif
+endfunction
+
+/*
+ * GetNerveFlags(mobile, nerve_name, byref nerve_dict)
+ *
+ * Purpose
+ * Retrieves the flag setting set on a nerve.
+ *
+ * Parameters
+ * mobile:	NPC to get the nerve information from.
+ * nerve_name:	Name of the nerve to get the information for.
+ * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
+ *
+ * Return value
+ * Returns a script reference.
+ *
+ */
+function GetNerveFlags(mobile, nerve_name, byref nerve_dict:=0)
+	if ( !nerve_dict )
+		nerve_dict := LoadNerves(mobile);
+	endif
+
+	if ( nerve_dict.exists(nerve_name) )
+		return GetProcess(CInt(nerve_dict[nerve_name].flags));
+	else
+		return error{"errortext" := "GetNerveProcess() - Invalid nerve name  ["+nerve_name+"]"};
+	endif
+endfunction
+
+/*
+ * StartNerve(mobile, nerve_name, nerve_script, data, flags, byref nerve_dict)
+ *
+ * Purpose
+ * Starts up a nerve script.
+ *
+ * Parameters
+ * mobile:	NPC the nerve will be running for.
+ * nerve_name:	The name the nerve script will be run under. (Example: "CombatScript" or "EnterReact")
+ * data:	Array of data to send to the nerve script when it starts.
+ * flags:	Can contain anything - but should use NF_* flags for bitwise checks.
+ * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
+ *
+ * Notes:
+ * data[1] - Will contain the mobile argument.
+ * data[2] - Will contain the nerve name argument.
+ * If data is not an array, it will be placed at index[3].
+ * If data is sent as an array, it will begin at the index of [3].
+ *
+ * Return value
+ * Returns a script reference to the nerve script.
+ *
+ */
+function StartNerve(mobile, nerve_name, nerve_script, data:=array, flags:=NF_NO_FLAGS, byref nerve_dict:=0)
+	if ( Lower(TypeOf(data)) != "array")
+		data := array{data};
+	endif
+	//Mobile is always the begining of the data array.
+	data.Insert(1, mobile);
+	//Nerve name is always the second part of the data array.
+	data.Insert(2, nerve_name);
+
+	var process := start_script(nerve_script, data);
+
+	if ( process.errortext )
+		var errmsg := "StartNerve() ["+nerve_name+"] ["+nerve_script+"] failed to start! ->"+process.errortext;
+		NPC_ErrorSysLog(mobile, errmsg);
+		return error{"errortext":=errmsg};
+	else
+		//Before setting the new nerve, check if one is already running.
+		if ( nerve_dict.exists(nerve_name) )
+			//Stop the old nerve, before storing the new one.
+			StopNerve(mobile, nerve_name, nerve_dict);
+		endif
+		var nerve_info := struct;
+		nerve_info.+pid := process.pid;
+		nerve_info.+flags := flags;
+		nerve_dict[nerve_name] := nerve_info;
+
+		SaveNerves(mobile, nerve_dict);
+
+		return process;
+	endif
+endfunction
+
+/*
+ * StopNerve(mobile, nerve_name, byref nerve_dict)
+ *
+ * Purpose
+ * Starts up a nerve script.
+ *
+ * Parameters
+ * mobile:	NPC the nerve will be stopped on.
+ * nerve_name:	The name of the nerve script to stop.
+ * nerve_dict:	Optional parameter. Use if the settings were already loaded for faster access.
+ *
+ * Return value
+ * Returns 1 on success.
+ *
+ */
+function StopNerve(mobile, nerve_name, byref nerve_dict:=0)
+	if ( !nerve_dict )
+		nerve_dict := LoadNerves(mobile);
+	endif
+
+	if ( nerve_dict.Exists(nerve_name) )
+		GetNerveProcess(mobile, nerve_name, nerve_dict).kill();
+		nerve_dict.Erase(nerve_name);
+
+		return SaveNerves(mobile, nerve_dict);
+	else
+		return error{"errortext" := "StopNerve() - Invalid nerve name  ["+nerve_name+"]"};
+	endif
+endfunction
+

Added: trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,165 @@
+/*===============================================================
+* Current Version
+* NPC_SETTINGS.INC - v1.0
+* Updated 8/30/2005 7:28AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+use cfgfile;
+
+include ":ai_brain:include/npcUtil";
+
+/*
+ * NPC_DefaultSettings(settings:=0)
+ *
+ * Purpose
+ * Checks the settings dictionary to make sure required values are set.
+ * If a dictionary is passed, it will check it for required parameters.
+ * If they are not present, they will be set.
+ * Nothing will be overwritten in this function.
+ *
+ * Parameters
+ * settings:	Optional parameter
+ *		Dictionary read in from NPC_GetDefaultSettings()
+ *
+ * Return value
+ * Returns a dictionary
+ *
+ */
+function NPC_GetDefaultSettings(settings:=0)
+	if ( Lower(TypeOf(settings)) != "dictionary" )
+		settings := dictionary;
+	endif
+
+	if ( CInt(settings.exists("cycle_wait")) <= 0 )
+		settings["cycle_wait"] := 10;
+	endif
+	if ( CInt(settings.exists("sleep_time")) <= 0 )
+		settings["sleep_time"] := 1024;
+	endif
+	if ( CInt(settings.exists("idle_ticks")) <= 0 )
+		settings["idle_ticks"] := 5;
+	endif
+
+	return settings;
+endfunction
+
+/*
+ * NPC_LoadTemplateSettings(source)
+ *
+ * Purpose
+ * Loads settings for a template from npcdesc.cfg
+ *
+ * Parameters
+ * source:	Name of the npc template to load settings for.
+ *		Can also be an npc reference - if custom settings should be loaded off it.
+ *
+ * Return value
+ * Returns a dictionary
+ *
+ */
+function NPC_LoadTemplateSettings(source)
+	var template:=source;
+	if ( source.IsA(POLCLASS_NPC) )
+		template := NPC_ParseTemplateName(source.npctemplate);
+	elseif ( !template.package )
+		template := NPC_ParseTemplateName(template);
+	endif
+
+	//
+	// * Load config defaults first
+	//
+	var npc_cfg := ReadConfigFile(template.package+"npcdesc");
+	var npc_elem := npc_cfg[template.template];
+
+	var setting_list := GetConfigStringDictionary(npc_elem, "AISetting");
+	
+	var settings := dictionary;
+	foreach setting_name in (setting_list.keys())
+		settings[setting_name] := UnPack(setting_list[setting_name]);
+		sleepms(2);
+	endforeach
+
+	//
+	// * If the source is an npc, check it for custom settings.
+	//
+	if ( source.IsA(POLCLASS_NPC) )
+		var cstm_settings := GetObjProperty(source, "AISettings");
+		foreach key in (cstm_settings.keys())
+			if ( cstm_settings[key] == error )
+				settings.Erase(key);
+			else
+				settings[key] := cstm_settings[key];
+			endif
+				
+			sleepms(2);
+		endforeach
+	endif
+	
+	return settings;
+endfunction
+
+/*
+ * NPC_LoadScriptSettings(source)
+ *
+ * Purpose
+ * Loads brain AI script settings for an NPC. Gives .script and .flag values for them.
+ *
+ * Parameters
+ * source:	Name of the npc template to load settings for.
+ *		Can also be an npc reference - if custom settings should be loaded off it.
+ *
+ * Return value
+ * Returns a dictionary
+ *
+ */
+function NPC_LoadScriptSettings(source)
+	var template:=source;
+	if ( source.IsA(POLCLASS_NPC) )
+		template := NPC_ParseTemplateName(source.npctemplate);
+	elseif ( !template.package )
+		template := NPC_ParseTemplateName(template);
+	endif
+
+	//
+	// * Load config defaults first
+	//
+	var npc_cfg := ReadConfigFile(template.package+"npcdesc");
+	var npc_elem := npc_cfg[template.template];
+
+	var script_list := GetConfigStringDictionary(npc_elem, "AIScript");
+	var flag_list := GetConfigStringDictionary(npc_elem, "AIScriptFlag");
+
+	var script_settings := dictionary;
+	foreach script_type in (script_list.keys())
+		var temp := struct;
+		temp.+script := script_list[script_type];
+		temp.+flags := 0x0;
+		if ( flag_list[script_type] )
+			temp.flags := UnPack(flag_list[script_type]);
+		endif
+
+		script_settings[script_type] := temp;
+		sleepms(2);
+	endforeach
+
+	//
+	// * If the source is an npc, check it for custom script settings.
+	//   Assumes each key in the dictionary property has a .script and .flags pair already.
+	//
+	if ( source.IsA(POLCLASS_NPC) )
+		var cstm_scripts := GetObjProperty(source, "AIScripts");
+		foreach key in (cstm_scripts.keys())
+			script_settings[key] := cstm_scripts[key];
+			sleepms(2);
+		endforeach
+	endif
+	
+	return script_settings;
+endfunction
+

Added: trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,45 @@
+/*===============================================================
+* Current Version
+* NPC_UTIL.INC - v1.0
+* Updated 8/31/2005 4:23AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+/*
+ * NPC_ParseTemplateName(template_name)
+ *
+ * Purpose
+ * Finds the appropriate npcdesc.cfg to load.
+ * This enables npcs to be placed in packages and not just the ::npcdesc file.
+ * ReadConfigFile(":*:npcdesc") does not work in this case because packaged npcs
+ * have the package name at the begining of their .npctemplate member. Reading the
+ * specific config file - helps to avoid possible elem name collisions.
+ *
+ * Parameters
+ * template_name:	Name of the npc template to parse
+ *
+ * Return value
+ * Returns struct .package .template
+ *
+ */
+function NPC_ParseTemplateName(template_name)
+	//Find positions of ":" characters
+	var colon_a := Find(template_name, ":", 1);
+	var colon_b := Find(template_name, ":", 2);
+
+	var parsed := struct{"package", "template"};
+
+	if ( !colon_a || !colon_b )
+		//Not a complete package name - use default npcdesc.cfg
+		parsed.package := "::";
+		parsed.template := template_name;
+	else
+		parsed.package := template_name[colon_a, colon_b];
+		parsed.template := template_name[colon_b+1, Len(template_name)];
+	endif
+
+	return parsed;
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/pkg.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/pkg.cfg	2005-09-04 16:28:05 UTC (rev 55)
+++ trunk/096/pkg/mobiles/ai_brain/pkg.cfg	2005-09-04 16:30:56 UTC (rev 56)
@@ -0,0 +1,14 @@
+Enabled		1
+Name		ai_brain
+
+Version		5.0
+
+CoreRequired	96
+Requires	gumps 1.5
+
+Creator		Austin Heilman
+Email		Austin at tsse.net
+Maintainer	Austin Heilman
+Email		Austin at tsse.net
+
+#Conflicts none



From austin at berlios.de  Mon Sep  5 20:14:20 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Mon, 5 Sep 2005 20:14:20 +0200
Subject: [Poldistro-svn] r59 - trunk/096/pkg/mobiles/ai_brain/include
Message-ID: <200509051814.j85IEKZF028771@sheep.berlios.de>

Author: austin
Date: 2005-09-05 20:14:19 +0200 (Mon, 05 Sep 2005)
New Revision: 59

Added:
   trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc
Modified:
   trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
Log:


Added: trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc	2005-09-04 16:39:27 UTC (rev 58)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc	2005-09-05 18:14:19 UTC (rev 59)
@@ -0,0 +1,184 @@
+/*===============================================================
+* Current Version
+* NPC_UTIL.INC - v1.0
+* Updated 9/4/2005 3:43PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+use uo;
+use os;
+use util;
+use cfgfile;
+
+include ":ai_brain:include/npcUtil";
+include ":ai_brain:include/npcError";
+
+/*
+ * NPC_GiveBackPack(mobile)
+ *
+ * Purpose
+ * Creates a backpack and places it on an npc. If it can't equip it, it removes it.
+ *
+ * Parameters
+ * mobile:	Mobile to equip the backpack onto.
+ *
+ * Return value
+ * Returns an item reference on success or if there already is one.
+ *
+ */
+function NPC_GiveBackPack(mobile)
+	if ( !mobile.backpack )
+		var backpack := CreateItemAtLocation(mobile.x, mobile.y, mobile.z, "BackPack", 1);
+		var result := EquipItem(mobile, backpack);
+		if ( !result )
+			DestroyItem(backpack);
+			return result;
+		else
+			return backpack;
+		endif
+	endif
+	
+	return mobile.backpack;
+endfunction
+
+/*
+ * NPC_SetupAmmunition(mobile)
+ *
+ * Purpose
+ * Creates ammunition in the npc's pack based on its 'AmmoType' and 'AmmoAmount' 
+ * settings in its npcdesc.cfg template.
+ *
+ * mobile:	The npc that will be given the ammunition.
+ *
+ * Return value
+ * Returns 1 or error
+ *
+ */
+function NPC_SetupAmmo(mobile)
+	var npc_elem := NPC_GetNPCConfig(mobile);
+	
+	if ( npc_elem.MissileWeapon )
+		var weapon := CreateItemAtLocation(mobile.x, mobile.y, mobile.z, npc_elem.MissileWeapon, 1, mobile.realm);
+		weapon.newbie := 1;
+		if ( !EquipItem(mobile, weapon) )
+			DestroyItem(weapon);
+		endif
+	endif
+		
+	if ( npc_elem.AmmoType )
+		if ( CInt(npc_elem.AmmoAmount) > 0 )
+			var ammo := CreateItemInBackpack(mobile, npc_elem.AmmoType, npc_elem.AmmoAmount);
+			if ( !ammo )
+				return ammo; // Will return an error with .errortext
+			endif
+			
+			ammo.newbie := 1;
+			return 1;
+		endif
+	else
+		var temp := error{"errortext":="Error - NPC_SetupAmmo() :: No 'AmmoType' was specified."};
+		
+		NPC_ErrorSysLog(mobile, temp.errortext);
+		PrintTextAbove(mobile, temp.errortext);
+		return temp;
+	endif
+endfunction
+
+/* 
+ * NPC_SetupEquipment(mobile, elem_name)
+ *
+ * Purpose
+ * Equips an NPC with EquipFromTemplate() and ::equip.cfg
+ *
+ * Parameters
+ * mobile:	The mobile to place equipment onto
+ * elem_name:	Name of the equipment template to use.
+ *		If no name is set, it will use the EquipTemplate line in the npc's template.
+ *
+ * Return value
+ * Returns 1 or error
+ *
+ */
+function NPC_SetupEquipment(mobile, elem_name:=0)
+	var equip_cfg := ReadConfigFile("::equip");
+	
+	if ( !elem_name )
+		var npc_elem := NPC_GetNPCConfig(mobile);
+		elem_name := npc_elem.EquipTemplate;
+	endif
+	
+	if ( !elem_name )
+		return NPC_GiveBackPack(mobile);
+	elseif ( !equip_cfg[elem_name] )
+		var errmsg := error{"errortext":="Error - NPC_SetupEquipment() :: There is no elem ["+elem_name+"] in '::equip.cfg'"};
+		PrintTextAbove(mobile, errmsg);
+		return errmsg;
+	else
+		return EquipFromTemplate(mobile, elem_name);
+	endif
+	
+	return 0;
+endfunction
+	
+	
+/*
+ * NPC_SetupName(mobile, name_elem)
+ * 
+ * Purpose
+ * Replaces every instance of <random> in an npc's name with a valid name using ::names.cfg
+ *
+ * Parameters
+ * mobile:	The mobile to do a name check on.
+ * name_elem:	Name elem in names.cfg to use
+ *		If no name is set, it will use the NameList line in the npc's template.
+ *
+ * Return value
+ * Returns 1 or error
+ *
+ */
+ 
+function NPC_SetupName(mobile, name_elem:=0)
+	if ( !mobile.name["<random>"] )
+		return 1;
+	elseif ( !name_elem )
+		var npc_elem := NPC_GetNPCConfig(mobile);
+		name_elem := npc_elem.NameTemplate;
+		if ( name_elem.errortext )
+			return name_elem;
+		endif
+	endif
+	
+	var npc_names := ReadConfigFile("::names");
+	if ( !npc_names[name_elem] )
+		var temp := error;
+		temp.+errortext := "There is no elem ["+name_elem+"] in NAMES.CFG";
+		
+		NPC_ErrorSysLog(moble, "Error - NPC_SetupName() :: "+temp.errortext);
+		PrintTextAbove(mobile, temp.errortext);
+		return temp;
+	endif
+	
+	var name_list := GetConfigStringArray(npc_names[name_elem], "Name");
+	if ( name_list.size() < 1 )
+		var temp := error{"errortext":="No names were found in the ["+name_elem+"] elem for names.cfg"};
+	
+		SysLog("Error - NPC_SetupName() :: "+temp.errortext);
+		PrintTextAbove(mobile, temp.errortext);
+	
+		return temp;
+	endif
+	
+	var my_name := mobile.name;
+	while ( my_name["<random>"] )
+		var replacement := name_list[RandomInt(name_list.size())+1];
+		my_name["<random>"] := replacement;
+		sleepms(2);
+	endwhile
+	
+	SetName(mobile, my_name);
+	
+	return 1;
+endfunction
+

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-04 16:39:27 UTC (rev 58)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-05 18:14:19 UTC (rev 59)
@@ -64,18 +64,10 @@
  *
  */
 function NPC_LoadTemplateSettings(source)
-	var template:=source;
-	if ( source.IsA(POLCLASS_NPC) )
-		template := NPC_ParseTemplateName(source.npctemplate);
-	elseif ( !template.package )
-		template := NPC_ParseTemplateName(template);
-	endif
-
 	//
 	// * Load config defaults first
 	//
-	var npc_cfg := ReadConfigFile(template.package+"npcdesc");
-	var npc_elem := npc_cfg[template.template];
+	var npc_elem := NPC_GetNPCConfig(source);
 
 	var setting_list := GetConfigStringDictionary(npc_elem, "AISetting");
 	
@@ -119,18 +111,10 @@
  *
  */
 function NPC_LoadScriptSettings(source)
-	var template:=source;
-	if ( source.IsA(POLCLASS_NPC) )
-		template := NPC_ParseTemplateName(source.npctemplate);
-	elseif ( !template.package )
-		template := NPC_ParseTemplateName(template);
-	endif
-
 	//
 	// * Load config defaults first
 	//
-	var npc_cfg := ReadConfigFile(template.package+"npcdesc");
-	var npc_elem := npc_cfg[template.template];
+	var npc_elem := NPC_GetNPCConfig(source);
 
 	var script_list := GetConfigStringDictionary(npc_elem, "AIScript");
 	var flag_list := GetConfigStringDictionary(npc_elem, "AIScriptFlag");

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-04 16:39:27 UTC (rev 58)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-05 18:14:19 UTC (rev 59)
@@ -8,6 +8,9 @@
 *  Created include file
 ===============================================================*/
 
+use uo;
+use cfgfile;
+
 /*
  * NPC_ParseTemplateName(template_name)
  *
@@ -26,6 +29,10 @@
  *
  */
 function NPC_ParseTemplateName(template_name)
+	if ( template_name.IsA(POLCLASS_NPC) )
+		template_name := template_name.npctemplate;
+	endif
+	
 	//Find positions of ":" characters
 	var colon_a := Find(template_name, ":", 1);
 	var colon_b := Find(template_name, ":", 2);
@@ -34,7 +41,7 @@
 
 	if ( !colon_a || !colon_b )
 		//Not a complete package name - use default npcdesc.cfg
-		parsed.package := "::";
+		parsed.package := "";
 		parsed.template := template_name;
 	else
 		parsed.package := template_name[colon_a, colon_b];
@@ -43,3 +50,27 @@
 
 	return parsed;
 endfunction
+
+/* 
+ * NPC_GetNPCConfig(template)
+ *
+ * Purpose
+ * Retrieves a config elem for an npc template.
+ *
+ * Parameters
+ * info:	Template info from NPC_ParseTemplateName()
+ *
+ * Return value
+ * Config elem reference
+ *
+ */
+function NPC_GetNPCConfig(template)
+	if ( !template.package )
+		template := NPC_ParseTemplateName(template);
+	endif
+	
+	var npc_cfg := ReadConfigFile(":"+template.package+":npcdesc");
+	var cfg_elem := npc_cfg[template.template];
+	
+	return cfg_elem;
+endfunction



From austin at berlios.de  Mon Sep  5 20:17:17 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Mon, 5 Sep 2005 20:17:17 +0200
Subject: [Poldistro-svn] r60 - trunk/096/scripts/include
Message-ID: <200509051817.j85IHHfG028897@sheep.berlios.de>

Author: austin
Date: 2005-09-05 20:17:16 +0200 (Mon, 05 Sep 2005)
New Revision: 60

Removed:
   trunk/096/scripts/include/cfgFile_ex.inc
Log:
GetConfigStringDictionary() will appear in the  core.

Deleted: trunk/096/scripts/include/cfgFile_ex.inc
===================================================================
--- trunk/096/scripts/include/cfgFile_ex.inc	2005-09-05 18:14:19 UTC (rev 59)
+++ trunk/096/scripts/include/cfgFile_ex.inc	2005-09-05 18:17:16 UTC (rev 60)
@@ -1,51 +0,0 @@
-/*===============================================================
-* Current Version
-* CFGFILE_EX.INC - v1.0
-* Updated 8/30/2005 7:28AM
-*
-* -- Revision v1.0 --
-* Austin:
-*  Created include file
-===============================================================*/
-
-use uo;
-use os;
-use cfgfile;
-
-
-/////////////////////////////////////////////////////////////////
-// * Function List *
-// 
-// GetConfigStringDict(cfg_elem, property_name)
-//
-/////////////////////////////////////////////////////////////////
-
-/*
- * GetConfigStringDictionary(cfg_elem, property_name)
- *
- * Purpose
- * Works similarly as GetConfigStringArray() but sets up the data in a dictionary.
- *
- * Parameters
- * cfg_elem:		Config file element to pull the data from.
- * property_name:	Property name to use with GetConfigStringArray()
- *
- * Return value
- * Returns a dictionary
- *
- */
-function GetConfigStringDictionary(cfg_elem, property_name)
-	var array_data := GetConfigStringArray(cfg_elem, property_name);
-	var dict := dictionary;
-	
-	foreach line in (array_data)
-		var temp := SplitWords(line);
-		var key := temp[1];
-		var data := line[Len(temp)+1, Len(line)];
-		
-		dict[key] := data;
-		sleepms(2);
-	endforeach
-	
-	return dict;
-endfunction



From panosl at berlios.de  Mon Sep  5 21:08:01 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Mon, 5 Sep 2005 21:08:01 +0200
Subject: [Poldistro-svn] r61 - trunk/096/scripts
Message-ID: <200509051908.j85J81GK000163@sheep.berlios.de>

Author: panosl
Date: 2005-09-05 21:08:01 +0200 (Mon, 05 Sep 2005)
New Revision: 61

Added:
   trunk/096/scripts/testFile.esc
Log:


Added: trunk/096/scripts/testFile.esc
===================================================================
--- trunk/096/scripts/testFile.esc	2005-09-05 18:17:16 UTC (rev 60)
+++ trunk/096/scripts/testFile.esc	2005-09-05 19:08:01 UTC (rev 61)
@@ -0,0 +1 @@
+/* I am an escript in disguise! */
\ No newline at end of file



From austin at berlios.de  Mon Sep  5 22:25:33 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Mon, 5 Sep 2005 22:25:33 +0200
Subject: [Poldistro-svn] r62 - trunk/096/pkg/mobiles/ai_brain/commands/gm
Message-ID: <200509052025.j85KPXns004966@sheep.berlios.de>

Author: austin
Date: 2005-09-05 22:25:33 +0200 (Mon, 05 Sep 2005)
New Revision: 62

Modified:
   trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/npcsleep.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src	2005-09-05 19:08:01 UTC (rev 61)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src	2005-09-05 20:25:33 UTC (rev 62)
@@ -2,7 +2,7 @@
 use uo;
 use os;
 
-include ":ai_brain:include/NPC_Commands";
+include ":ai_brain:include/npcCommands";
 
 program MakeAttack(who)
 	SendSysMessage(who, "Select an npc (attacker).");

Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/npcsleep.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/npcsleep.src	2005-09-05 19:08:01 UTC (rev 61)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/npcsleep.src	2005-09-05 20:25:33 UTC (rev 62)
@@ -4,7 +4,7 @@
 use polsys;
 
 include ":gumps:include/requestgump";
-include ":ai_brain:include/NPC_Commands";
+include ":ai_brain:include/npcCommands";
 
 program PutEveryNPCToSleep(who)
 	var realm_name := RequestGump(who, "Enter the realm name to put npcs to sleep on.", "", who.realm);

Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src	2005-09-05 19:08:01 UTC (rev 61)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src	2005-09-05 20:25:33 UTC (rev 62)
@@ -2,7 +2,7 @@
 use uo;
 use os;
 
-include ":ai_brain:NPC_Commands";
+include ":ai_brain:npcCommands";
 include "include/messages";
 include "include/localization";
 

Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src	2005-09-05 19:08:01 UTC (rev 61)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src	2005-09-05 20:25:33 UTC (rev 62)
@@ -3,7 +3,7 @@
 use os;
 use polsys;
 
-include ":ai_brain:include/NPC_Commands";
+include ":ai_brain:include/npcCommands";
 include ":gumps:include/requestgump";
 
 program ResetAllNPCs(who)



From austin at berlios.de  Mon Sep  5 22:37:11 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Mon, 5 Sep 2005 22:37:11 +0200
Subject: [Poldistro-svn] r63 - trunk/096
Message-ID: <200509052037.j85KbBrM005544@sheep.berlios.de>

Author: austin
Date: 2005-09-05 22:37:11 +0200 (Mon, 05 Sep 2005)
New Revision: 63

Added:
   trunk/096/compile_all.bat
Removed:
   trunk/096/recompile.bat
Log:


Added: trunk/096/compile_all.bat
===================================================================
--- trunk/096/compile_all.bat	2005-09-05 20:25:33 UTC (rev 62)
+++ trunk/096/compile_all.bat	2005-09-05 20:37:11 UTC (rev 63)
@@ -0,0 +1,11 @@
+ at echo off
+
+ at echo compile_all.bat by Austin
+ at echo -------------------------
+ at echo Compiling all scripts and writing results to ecompile.txt
+scripts\ecompile.exe -b -r >ecompile.txt
+ at echo Compilation of all scripts finished 
+ at echo Check ecompile.txt for errors and output
+ at echo -------------------------
+
+pause
\ No newline at end of file

Deleted: trunk/096/recompile.bat
===================================================================
--- trunk/096/recompile.bat	2005-09-05 20:25:33 UTC (rev 62)
+++ trunk/096/recompile.bat	2005-09-05 20:37:11 UTC (rev 63)
@@ -1,3 +0,0 @@
- at echo off
-scripts\ecompile
-pause
\ No newline at end of file



From austin at berlios.de  Mon Sep  5 22:54:45 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Mon, 5 Sep 2005 22:54:45 +0200
Subject: [Poldistro-svn] r64 - trunk/096
Message-ID: <200509052054.j85KsjOv010079@sheep.berlios.de>

Author: austin
Date: 2005-09-05 22:54:45 +0200 (Mon, 05 Sep 2005)
New Revision: 64

Added:
   trunk/096/start_pol.bat
Log:


Added: trunk/096/start_pol.bat
===================================================================
--- trunk/096/start_pol.bat	2005-09-05 20:37:11 UTC (rev 63)
+++ trunk/096/start_pol.bat	2005-09-05 20:54:45 UTC (rev 64)
@@ -0,0 +1,35 @@
+ at echo OFF
+
+set ENABLE_PAUSE=1
+set RESULT=0
+
+goto :start
+
+:start
+CLS
+ at ECHO ==========
+ at ECHO Starting pol.exe
+ at ECHO ==========
+
+rem - To Do: Capture POL output to RESULT
+rem - Do an IF NOT "%RESULT%"=="1" GOTO :end
+
+pol.exe
+
+ at ECHO.
+ at ECHO.
+ at ECHO ==========
+ at ECHO POL has stopped!
+ at ECHO Removing log\script.log
+ at ECHO ==========
+ at ECHO.
+ at ECHO.
+
+del log\script.log
+
+IF "%ENABLE_PAUSE%"=="1" pause
+
+goto :start
+
+:end
+pause



From austin at berlios.de  Mon Sep  5 22:58:19 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Mon, 5 Sep 2005 22:58:19 +0200
Subject: [Poldistro-svn] r65 - trunk/096
Message-ID: <200509052058.j85KwJbm012707@sheep.berlios.de>

Author: austin
Date: 2005-09-05 22:58:19 +0200 (Mon, 05 Sep 2005)
New Revision: 65

Added:
   trunk/096/recompile.bat
Log:


Copied: trunk/096/recompile.bat (from rev 63, trunk/096/compile_all.bat)



From austin at berlios.de  Mon Sep  5 23:03:07 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Mon, 5 Sep 2005 23:03:07 +0200
Subject: [Poldistro-svn] r66 - trunk/096
Message-ID: <200509052103.j85L37UJ017983@sheep.berlios.de>

Author: austin
Date: 2005-09-05 23:03:07 +0200 (Mon, 05 Sep 2005)
New Revision: 66

Removed:
   trunk/096/compile_all.bat
   trunk/096/recompile.bat
Log:
okay we agreed on a new name :p

Deleted: trunk/096/compile_all.bat
===================================================================
--- trunk/096/compile_all.bat	2005-09-05 20:58:19 UTC (rev 65)
+++ trunk/096/compile_all.bat	2005-09-05 21:03:07 UTC (rev 66)
@@ -1,11 +0,0 @@
- at echo off
-
- at echo compile_all.bat by Austin
- at echo -------------------------
- at echo Compiling all scripts and writing results to ecompile.txt
-scripts\ecompile.exe -b -r >ecompile.txt
- at echo Compilation of all scripts finished 
- at echo Check ecompile.txt for errors and output
- at echo -------------------------
-
-pause
\ No newline at end of file

Deleted: trunk/096/recompile.bat
===================================================================
--- trunk/096/recompile.bat	2005-09-05 20:58:19 UTC (rev 65)
+++ trunk/096/recompile.bat	2005-09-05 21:03:07 UTC (rev 66)
@@ -1,11 +0,0 @@
- at echo off
-
- at echo compile_all.bat by Austin
- at echo -------------------------
- at echo Compiling all scripts and writing results to ecompile.txt
-scripts\ecompile.exe -b -r >ecompile.txt
- at echo Compilation of all scripts finished 
- at echo Check ecompile.txt for errors and output
- at echo -------------------------
-
-pause
\ No newline at end of file



From austin at berlios.de  Mon Sep  5 23:06:01 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Mon, 5 Sep 2005 23:06:01 +0200
Subject: [Poldistro-svn] r67 - trunk/096
Message-ID: <200509052106.j85L61hT018206@sheep.berlios.de>

Author: austin
Date: 2005-09-05 23:06:01 +0200 (Mon, 05 Sep 2005)
New Revision: 67

Added:
   trunk/096/compileScripts.bat
   trunk/096/startPOL.bat
Removed:
   trunk/096/start_pol.bat
Log:
evil naming conventions!
camelCasing = terroristCasing :-D

Added: trunk/096/compileScripts.bat
===================================================================
--- trunk/096/compileScripts.bat	2005-09-05 21:03:07 UTC (rev 66)
+++ trunk/096/compileScripts.bat	2005-09-05 21:06:01 UTC (rev 67)
@@ -0,0 +1,11 @@
+ at echo off
+
+ at echo compile_all.bat by Austin
+ at echo -------------------------
+ at echo Compiling all scripts and writing results to ecompile.txt
+scripts\ecompile.exe -b -r >ecompile.txt
+ at echo Compilation of all scripts finished 
+ at echo Check ecompile.txt for errors and output
+ at echo -------------------------
+
+pause
\ No newline at end of file

Added: trunk/096/startPOL.bat
===================================================================
--- trunk/096/startPOL.bat	2005-09-05 21:03:07 UTC (rev 66)
+++ trunk/096/startPOL.bat	2005-09-05 21:06:01 UTC (rev 67)
@@ -0,0 +1,35 @@
+ at echo OFF
+
+set ENABLE_PAUSE=1
+set RESULT=0
+
+goto :start
+
+:start
+CLS
+ at ECHO ==========
+ at ECHO Starting pol.exe
+ at ECHO ==========
+
+rem - To Do: Capture POL output to RESULT
+rem - Do an IF NOT "%RESULT%"=="1" GOTO :end
+
+pol.exe
+
+ at ECHO.
+ at ECHO.
+ at ECHO ==========
+ at ECHO POL has stopped!
+ at ECHO Removing log\script.log
+ at ECHO ==========
+ at ECHO.
+ at ECHO.
+
+del log\script.log
+
+IF "%ENABLE_PAUSE%"=="1" pause
+
+goto :start
+
+:end
+pause

Deleted: trunk/096/start_pol.bat
===================================================================
--- trunk/096/start_pol.bat	2005-09-05 21:03:07 UTC (rev 66)
+++ trunk/096/start_pol.bat	2005-09-05 21:06:01 UTC (rev 67)
@@ -1,35 +0,0 @@
- at echo OFF
-
-set ENABLE_PAUSE=1
-set RESULT=0
-
-goto :start
-
-:start
-CLS
- at ECHO ==========
- at ECHO Starting pol.exe
- at ECHO ==========
-
-rem - To Do: Capture POL output to RESULT
-rem - Do an IF NOT "%RESULT%"=="1" GOTO :end
-
-pol.exe
-
- at ECHO.
- at ECHO.
- at ECHO ==========
- at ECHO POL has stopped!
- at ECHO Removing log\script.log
- at ECHO ==========
- at ECHO.
- at ECHO.
-
-del log\script.log
-
-IF "%ENABLE_PAUSE%"=="1" pause
-
-goto :start
-
-:end
-pause



From austin at berlios.de  Mon Sep  5 23:10:09 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Mon, 5 Sep 2005 23:10:09 +0200
Subject: [Poldistro-svn] r68 - trunk/096
Message-ID: <200509052110.j85LA94c018616@sheep.berlios.de>

Author: austin
Date: 2005-09-05 23:10:05 +0200 (Mon, 05 Sep 2005)
New Revision: 68

Modified:
   trunk/096/startPOL.bat
Log:


Modified: trunk/096/startPOL.bat
===================================================================
--- trunk/096/startPOL.bat	2005-09-05 21:06:01 UTC (rev 67)
+++ trunk/096/startPOL.bat	2005-09-05 21:10:05 UTC (rev 68)
@@ -1,5 +1,12 @@
 @echo OFF
 
+rem - ======================================================
+rem - startPOL by Austin
+rem -
+rem - To set POL to immediately start back up after stopping
+rem - set ENABLE_PAUSE to 0
+rem - ======================================================
+
 set ENABLE_PAUSE=1
 set RESULT=0
 



From austin at berlios.de  Tue Sep  6 01:34:31 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 01:34:31 +0200
Subject: [Poldistro-svn] r69 - trunk/096
Message-ID: <200509052334.j85NYVpM014662@sheep.berlios.de>

Author: austin
Date: 2005-09-06 01:34:29 +0200 (Tue, 06 Sep 2005)
New Revision: 69

Modified:
   trunk/096/compileScripts.bat
Log:


Modified: trunk/096/compileScripts.bat
===================================================================
--- trunk/096/compileScripts.bat	2005-09-05 21:10:05 UTC (rev 68)
+++ trunk/096/compileScripts.bat	2005-09-05 23:34:29 UTC (rev 69)
@@ -1,11 +1,15 @@
- at echo off
+ at ECHO OFF
 
- at echo compile_all.bat by Austin
- at echo -------------------------
- at echo Compiling all scripts and writing results to ecompile.txt
+ at ECHO compile_all.bat by Austin
+ at ECHO -------------------------
+ at ECHO Compiling all scripts and writing results to ecompile.txt
+ at ECHO.
+
 scripts\ecompile.exe -b -r >ecompile.txt
- at echo Compilation of all scripts finished 
- at echo Check ecompile.txt for errors and output
- at echo -------------------------
 
-pause
\ No newline at end of file
+ at ECHO.
+ at ECHO Compilation of all scripts finished 
+ at ECHO Check ecompile.txt for errors and output
+ at ECHO -------------------------
+
+PAUSE
\ No newline at end of file



From austin at berlios.de  Tue Sep  6 02:19:45 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 02:19:45 +0200
Subject: [Poldistro-svn] r70 - trunk/096
Message-ID: <200509060019.j860JjTi003778@sheep.berlios.de>

Author: austin
Date: 2005-09-06 02:19:41 +0200 (Tue, 06 Sep 2005)
New Revision: 70

Modified:
   trunk/096/realmgen.bat
Log:
Menu driven interface to control uoconvert.exe

Modified: trunk/096/realmgen.bat
===================================================================
--- trunk/096/realmgen.bat	2005-09-05 23:34:29 UTC (rev 69)
+++ trunk/096/realmgen.bat	2005-09-06 00:19:41 UTC (rev 70)
@@ -1,17 +1,114 @@
- at echo off
-REM $Id: realmgen.bat,v 1.1 2004/03/16 14:05:46 folko Exp $
+ at ECHO OFF
 
-uoconvert multis
-move multis.cfg config
+REM -- If a special path is needed to uoconvert.exe set it here
+SET UOCNVRT_PATH=uoconvert.exe
+REM ----------
 
-uoconvert tiles
-move tiles.cfg config
+GOTO :MENU()
 
-uoconvert landtiles
-move landtiles.cfg config
+REM -- MENU FUNCTION
+:MENU()
+CLS
+ECHO RealmGen.bat by Austin
+ECHO ========================
+ECHO Command        Purpose
+ECHO  [ a ] - Build multis.cfg
+ECHO  [ b ] - Build tiles.cfg
+ECHO  [ c ] - Build landtiles.cfg
+ECHO  [ d ] - Build all config files
+ECHO.
+ECHO  [ e ] - Build 'Britannia' realm     (mapid=0)
+ECHO  [ f ] - Build 'Britannia Alt' realm (mapid=1)
+ECHO  [ g ] - Build 'Ilshenar' realm      (mapid=2)
+ECHO  [ h ] - Build 'Malas' realm         (mapid=3)
+ECHO  [ i ] - Build 'Tokuno' realm        (mapid=4)
+ECHO.
+ECHO  [ x ] - Quit
 
-uoconvert map     realm=britannia mapid=0 usedif=1 width=6144 height=4096
-uoconvert statics realm=britannia
-uoconvert maptile realm=britannia
+SET /p CMD=Command:
 
+IF "%CMD%" == "a" GOTO :MULTIS.CFG()
+IF "%cMD%" == "b" GOTO :TILES.CFG()
+IF "%cMD%" == "c" GOTO :LANDTILES.CFG()
+IF "%cMD%" == "d" GOTO :ALLCONFIGS()
+IF "%CMD%" == "e" GOTO :REALM_BRITTANIA()
+IF "%CMD%" == "f" GOTO :REALM_BRITTANIA_ALT()
+IF "%CMD%" == "g" GOTO :REALM_ILSHENAR()
+IF "%CMD%" == "h" GOTO :REALM_MALAS()
+IF "%CMD%" == "i" GOTO :REALM_TOKUNO()
+IF "%CMD%" == "x" GOTO :QUIT()
 
+ECHO.
+ECHO Invalid command.
+GOTO :RETURN_TO_MENU()
+
+REM -- RETURN_TO_MENU() FUNCTION
+:RETURN_TO_MENU()
+PAUSE
+GOTO :MENU()
+
+REM -- MULTIS.CFG FUNCTION
+:MULTIS.CFG()
+%UOCNVRT_PATH% multis
+MOVE multis.cfg config
+GOTO :RETURN_TO_MENU()
+
+REM -- TILES.CFG FUNCTION
+:TILES.CFG()
+%UOCNVRT_PATH% tiles
+MOVE tiles.cfg config
+GOTO :RETURN_TO_MENU()
+
+REM -- LANDTILES.CFG FUNCTION
+:LANDTILES.CFG()
+%UOCNVRT_PATH% landtiles
+MOVE landtiles.cfg config
+GOTO :RETURN_TO_MENU()
+
+REM -- ALLCONFIGS FUNCTION
+:ALLCONFIGS()
+%UOCNVRT_PATH% multis
+MOVE multis.cfg config
+%UOCNVRT_PATH% tiles
+MOVE tiles.cfg config
+%UOCNVRT_PATH% landtiles
+MOVE landtiles.cfg config
+GOTO :RETURN_TO_MENU()
+
+REM -- REALM_BRITTANIA()
+:REALM_BRITTANIA()
+%UOCNVRT_PATH% map     realm=britannia mapid=0 usedif=1 width=6144 height=4096
+%UOCNVRT_PATH% statics realm=britannia
+%UOCNVRT_PATH% maptile realm=britannia
+GOTO :RETURN_TO_MENU()
+
+REM -- REALM_BRITTANIA_ALT() FUNCTION
+:REALM_BRITTANIA_ALT()
+%UOCNVRT_PATH% map     realm=britannia_alt mapid=1 usedif=1 width=6144 height=4096
+%UOCNVRT_PATH% statics realm=britannia_alt
+%UOCNVRT_PATH% maptile realm=britannia_alt
+GOTO :RETURN_TO_MENU()
+
+REM -- REALM_ILSHENAR FUNCTION
+:REALM_ILSHENAR()
+%UOCNVRT_PATH% map     realm=ilshenar mapid=2 usedif=1 width=2304 height=1600
+%UOCNVRT_PATH% statics realm=ilshenar
+%UOCNVRT_PATH% maptile realm=ilshenar
+GOTO :RETURN_TO_MENU()
+
+REM -- REALM_MALAS FUNCTION
+:REALM_MALAS()
+%UOCNVRT_PATH% map     realm=malas mapid=3 usedif=1 width=2560 height=2048
+%UOCNVRT_PATH% statics realm=malas
+%UOCNVRT_PATH% maptile realm=malas
+GOTO :RETURN_TO_MENU()
+
+REM -- REALM_TOKUNO FUNCTION
+:REALM_TOKUNO()
+%UOCNVRT_PATH% map     realm=tokuno mapid=4 usedif=1 width=1448 height=1448
+%UOCNVRT_PATH% statics realm=tokuno
+%UOCNVRT_PATH% maptile realm=tokuno
+GOTO :RETURN_TO_MENU()
+
+REM -- QUIT FUNCTION
+:QUIT()
\ No newline at end of file



From austin at berlios.de  Tue Sep  6 03:22:19 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 03:22:19 +0200
Subject: [Poldistro-svn] r71 - trunk/096
Message-ID: <200509060122.j861MJtM003095@sheep.berlios.de>

Author: austin
Date: 2005-09-06 03:22:13 +0200 (Tue, 06 Sep 2005)
New Revision: 71

Added:
   trunk/096/starthere.bat
Removed:
   trunk/096/clean.bat
   trunk/096/compileScripts.bat
   trunk/096/realmgen.bat
   trunk/096/startPOL.bat
Log:
Making a POL batch based interface for building realms, compiling, cleaning up and running POL.

Deleted: trunk/096/clean.bat
===================================================================
--- trunk/096/clean.bat	2005-09-06 00:19:41 UTC (rev 70)
+++ trunk/096/clean.bat	2005-09-06 01:22:13 UTC (rev 71)
@@ -1,10 +0,0 @@
- at echo off
-del /s *.bak
-del /s *.ecl
-del /s *.dep
-del /s *.log
-del /s *.lst
-del /s *.dbg
-del /s *.dbg.txt
-del objtypes.txt
-del orphans.txt
\ No newline at end of file

Deleted: trunk/096/compileScripts.bat
===================================================================
--- trunk/096/compileScripts.bat	2005-09-06 00:19:41 UTC (rev 70)
+++ trunk/096/compileScripts.bat	2005-09-06 01:22:13 UTC (rev 71)
@@ -1,15 +0,0 @@
- at ECHO OFF
-
- at ECHO compile_all.bat by Austin
- at ECHO -------------------------
- at ECHO Compiling all scripts and writing results to ecompile.txt
- at ECHO.
-
-scripts\ecompile.exe -b -r >ecompile.txt
-
- at ECHO.
- at ECHO Compilation of all scripts finished 
- at ECHO Check ecompile.txt for errors and output
- at ECHO -------------------------
-
-PAUSE
\ No newline at end of file

Deleted: trunk/096/realmgen.bat
===================================================================
--- trunk/096/realmgen.bat	2005-09-06 00:19:41 UTC (rev 70)
+++ trunk/096/realmgen.bat	2005-09-06 01:22:13 UTC (rev 71)
@@ -1,114 +0,0 @@
- at ECHO OFF
-
-REM -- If a special path is needed to uoconvert.exe set it here
-SET UOCNVRT_PATH=uoconvert.exe
-REM ----------
-
-GOTO :MENU()
-
-REM -- MENU FUNCTION
-:MENU()
-CLS
-ECHO RealmGen.bat by Austin
-ECHO ========================
-ECHO Command        Purpose
-ECHO  [ a ] - Build multis.cfg
-ECHO  [ b ] - Build tiles.cfg
-ECHO  [ c ] - Build landtiles.cfg
-ECHO  [ d ] - Build all config files
-ECHO.
-ECHO  [ e ] - Build 'Britannia' realm     (mapid=0)
-ECHO  [ f ] - Build 'Britannia Alt' realm (mapid=1)
-ECHO  [ g ] - Build 'Ilshenar' realm      (mapid=2)
-ECHO  [ h ] - Build 'Malas' realm         (mapid=3)
-ECHO  [ i ] - Build 'Tokuno' realm        (mapid=4)
-ECHO.
-ECHO  [ x ] - Quit
-
-SET /p CMD=Command:
-
-IF "%CMD%" == "a" GOTO :MULTIS.CFG()
-IF "%cMD%" == "b" GOTO :TILES.CFG()
-IF "%cMD%" == "c" GOTO :LANDTILES.CFG()
-IF "%cMD%" == "d" GOTO :ALLCONFIGS()
-IF "%CMD%" == "e" GOTO :REALM_BRITTANIA()
-IF "%CMD%" == "f" GOTO :REALM_BRITTANIA_ALT()
-IF "%CMD%" == "g" GOTO :REALM_ILSHENAR()
-IF "%CMD%" == "h" GOTO :REALM_MALAS()
-IF "%CMD%" == "i" GOTO :REALM_TOKUNO()
-IF "%CMD%" == "x" GOTO :QUIT()
-
-ECHO.
-ECHO Invalid command.
-GOTO :RETURN_TO_MENU()
-
-REM -- RETURN_TO_MENU() FUNCTION
-:RETURN_TO_MENU()
-PAUSE
-GOTO :MENU()
-
-REM -- MULTIS.CFG FUNCTION
-:MULTIS.CFG()
-%UOCNVRT_PATH% multis
-MOVE multis.cfg config
-GOTO :RETURN_TO_MENU()
-
-REM -- TILES.CFG FUNCTION
-:TILES.CFG()
-%UOCNVRT_PATH% tiles
-MOVE tiles.cfg config
-GOTO :RETURN_TO_MENU()
-
-REM -- LANDTILES.CFG FUNCTION
-:LANDTILES.CFG()
-%UOCNVRT_PATH% landtiles
-MOVE landtiles.cfg config
-GOTO :RETURN_TO_MENU()
-
-REM -- ALLCONFIGS FUNCTION
-:ALLCONFIGS()
-%UOCNVRT_PATH% multis
-MOVE multis.cfg config
-%UOCNVRT_PATH% tiles
-MOVE tiles.cfg config
-%UOCNVRT_PATH% landtiles
-MOVE landtiles.cfg config
-GOTO :RETURN_TO_MENU()
-
-REM -- REALM_BRITTANIA()
-:REALM_BRITTANIA()
-%UOCNVRT_PATH% map     realm=britannia mapid=0 usedif=1 width=6144 height=4096
-%UOCNVRT_PATH% statics realm=britannia
-%UOCNVRT_PATH% maptile realm=britannia
-GOTO :RETURN_TO_MENU()
-
-REM -- REALM_BRITTANIA_ALT() FUNCTION
-:REALM_BRITTANIA_ALT()
-%UOCNVRT_PATH% map     realm=britannia_alt mapid=1 usedif=1 width=6144 height=4096
-%UOCNVRT_PATH% statics realm=britannia_alt
-%UOCNVRT_PATH% maptile realm=britannia_alt
-GOTO :RETURN_TO_MENU()
-
-REM -- REALM_ILSHENAR FUNCTION
-:REALM_ILSHENAR()
-%UOCNVRT_PATH% map     realm=ilshenar mapid=2 usedif=1 width=2304 height=1600
-%UOCNVRT_PATH% statics realm=ilshenar
-%UOCNVRT_PATH% maptile realm=ilshenar
-GOTO :RETURN_TO_MENU()
-
-REM -- REALM_MALAS FUNCTION
-:REALM_MALAS()
-%UOCNVRT_PATH% map     realm=malas mapid=3 usedif=1 width=2560 height=2048
-%UOCNVRT_PATH% statics realm=malas
-%UOCNVRT_PATH% maptile realm=malas
-GOTO :RETURN_TO_MENU()
-
-REM -- REALM_TOKUNO FUNCTION
-:REALM_TOKUNO()
-%UOCNVRT_PATH% map     realm=tokuno mapid=4 usedif=1 width=1448 height=1448
-%UOCNVRT_PATH% statics realm=tokuno
-%UOCNVRT_PATH% maptile realm=tokuno
-GOTO :RETURN_TO_MENU()
-
-REM -- QUIT FUNCTION
-:QUIT()
\ No newline at end of file

Deleted: trunk/096/startPOL.bat
===================================================================
--- trunk/096/startPOL.bat	2005-09-06 00:19:41 UTC (rev 70)
+++ trunk/096/startPOL.bat	2005-09-06 01:22:13 UTC (rev 71)
@@ -1,42 +0,0 @@
- at echo OFF
-
-rem - ======================================================
-rem - startPOL by Austin
-rem -
-rem - To set POL to immediately start back up after stopping
-rem - set ENABLE_PAUSE to 0
-rem - ======================================================
-
-set ENABLE_PAUSE=1
-set RESULT=0
-
-goto :start
-
-:start
-CLS
- at ECHO ==========
- at ECHO Starting pol.exe
- at ECHO ==========
-
-rem - To Do: Capture POL output to RESULT
-rem - Do an IF NOT "%RESULT%"=="1" GOTO :end
-
-pol.exe
-
- at ECHO.
- at ECHO.
- at ECHO ==========
- at ECHO POL has stopped!
- at ECHO Removing log\script.log
- at ECHO ==========
- at ECHO.
- at ECHO.
-
-del log\script.log
-
-IF "%ENABLE_PAUSE%"=="1" pause
-
-goto :start
-
-:end
-pause

Added: trunk/096/starthere.bat
===================================================================
--- trunk/096/starthere.bat	2005-09-06 00:19:41 UTC (rev 70)
+++ trunk/096/starthere.bat	2005-09-06 01:22:13 UTC (rev 71)
@@ -0,0 +1,60 @@
+ at ECHO OFF
+
+REM -- If a special path is needed to the batch files set it here
+SET BATCH_PATH=batchfiles\
+REM ----------
+
+GOTO :MENU()
+
+REM -- MENU FUNCTION
+:MENU()
+CLS
+ECHO StartHere.bat by Austin
+ECHO ========================
+ECHO Command        Purpose
+ECHO  [ a ] - RealmGen menu        (Realm building tools)
+ECHO  [ b ] - Ecompiler menu       (Ecompile tools)
+ECHO.
+ECHO  [ c ] - Start POL.exe        (Returns to menu on exit)
+ECHO  [ d ] - Keep POL.exe running (Restarts when it exits)
+ECHO.
+ECHO  [ x ] - Quit
+
+SET /p CMD=Command:
+
+IF "%CMD%" == "a" GOTO :REALM_GEN()
+IF "%CMD%" == "b" GOTO :ECOMPILE()
+IF "%CMD%" == "c" GOTO :POL()
+IF "%CMD%" == "d" GOTO :POL_LOOP()
+IF "%CMD%" == "x" GOTO :QUIT()
+
+ECHO.
+ECHO Invalid command.
+GOTO :RETURN_TO_MENU()
+
+REM -- RETURN_TO_MENU() FUNCTION
+:RETURN_TO_MENU()
+GOTO :MENU()
+
+REM -- REALM_GEN() FUNCTION
+:REALM_GEN()
+CALL %BATCH_PATH%realmgen.bat
+GOTO RETURN_TO_MENU()
+
+REM -- ECOMPILE() FUNCTION
+:ECOMPILE()
+CALL %BATCH_PATH%ecompile.bat
+GOTO :RETURN_TO_MENU()
+
+REM -- POL() FUNCTION
+:POL()
+CALL %BATCH_PATH%pol.bat
+GOTO :RETURN_TO_MENU()
+
+REM -- ECOMPILE() FUNCTION
+:POL_LOOP()
+CALL %BATCH_PATH%loopPOL.bat
+GOTO :RETURN_TO_MENU()
+
+REM -- QUIT FUNCTION
+:QUIT()
\ No newline at end of file



From austin at berlios.de  Tue Sep  6 03:46:21 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 03:46:21 +0200
Subject: [Poldistro-svn] r72 - in trunk/096: . batchfiles
Message-ID: <200509060146.j861kLHS008328@sheep.berlios.de>

Author: austin
Date: 2005-09-06 03:46:19 +0200 (Tue, 06 Sep 2005)
New Revision: 72

Added:
   trunk/096/batchfiles/
   trunk/096/batchfiles/cleanup.bat
   trunk/096/batchfiles/ecompile.bat
   trunk/096/batchfiles/loopPOL.bat
   trunk/096/batchfiles/pol.bat
   trunk/096/batchfiles/realmgen.bat
Modified:
   trunk/096/starthere.bat
Log:
Okay here is the batch menu system for Windows 2000, 2003, XP, etc. users (NT)

Added: trunk/096/batchfiles/cleanup.bat
===================================================================
--- trunk/096/batchfiles/cleanup.bat	2005-09-06 01:22:13 UTC (rev 71)
+++ trunk/096/batchfiles/cleanup.bat	2005-09-06 01:46:19 UTC (rev 72)
@@ -0,0 +1,51 @@
+ at ECHO OFF
+
+GOTO :MENU()
+
+REM -- MENU FUNCTION
+:MENU()
+CLS
+ECHO CleanUp.bat by Austin
+ECHO ========================
+ECHO Command        Purpose
+ECHO  [ a ] - Remove *.ecl files. (Will need to recompile scripts)
+ECHO  [ b ] - Remove *.bak files
+ECHO  [ c ] - Remove *.dep files
+ECHO  [ d ] - Remove *.log files
+ECHO  [ e ] - Remove *.lst files
+ECHO  [ f ] - Remove *.dbg files
+ECHO  [ g ] - Remove *.dbg.txt
+ECHO  [ h ] - Remove other (disabled)
+ECHO.
+ECHO  [ x ] - Quit
+
+SET /p CMD=Command:
+
+SET REMOVE_TYPE=
+IF "%CMD%" == "a" SET REMOVE_TYPE=*.ecl
+IF "%CMD%" == "b" SET REMOVE_TYPE=*.bak
+IF "%CMD%" == "c" SET REMOVE_TYPE=*.dep
+IF "%CMD%" == "d" SET REMOVE_TYPE=*.log
+IF "%CMD%" == "e" SET REMOVE_TYPE=*.lst
+IF "%CMD%" == "f" SET REMOVE_TYPE=*.dbg
+IF "%CMD%" == "g" SET REMOVE_TYPE=*.dbg.txt
+IF "%CMD%" == "x" GOTO :QUIT()
+
+IF NOT "%REMOVE_TYPE%"=="" GOTO REMOVE()
+
+ECHO.
+ECHO Invalid command.
+GOTO :RETURN_TO_MENU()
+
+REM -- RETURN_TO_MENU() FUNCTION
+:RETURN_TO_MENU()
+PAUSE
+GOTO :MENU()
+
+REM -- REMOVE FUNCTION()
+:REMOVE()
+DEL /S %REMOVE_TYPE%
+GOTO RETURN_TO_MENU()
+
+REM -- QUIT() FUNCTION
+:QUIT()
\ No newline at end of file

Added: trunk/096/batchfiles/ecompile.bat
===================================================================
--- trunk/096/batchfiles/ecompile.bat	2005-09-06 01:22:13 UTC (rev 71)
+++ trunk/096/batchfiles/ecompile.bat	2005-09-06 01:46:19 UTC (rev 72)
@@ -0,0 +1,55 @@
+ at ECHO OFF
+
+REM -- If a special path is needed to ecompile.exe set it here
+REM -- Path is considered to be run from the root if started by starthere.bat
+SET ECOMPILE_PATH=scripts\ecompile.exe
+REM ----------
+
+GOTO :MENU()
+
+REM -- MENU FUNCTION
+:MENU()
+CLS
+ECHO Ecompile.bat by Austin
+ECHO ========================
+ECHO Command        Purpose
+ECHO  [ a ] - Compile a specific script.
+ECHO  [ b ] - Compile all .src scripts.
+ECHO  [ c ] - Compile all scripts and output to POL\ecompile.txt
+ECHO.
+ECHO  [ x ] - Quit
+
+SET /p CMD=Command:
+
+IF "%CMD%" == "a" GOTO :COMPILE_SCRIPT()
+IF "%CMD%" == "b" GOTO :COMPILE_ALL_SCRIPTS()
+IF "%CMD%" == "c" GOTO :COMPILE_ALL_SCRIPTS_OPTXT()
+IF "%CMD%" == "x" GOTO :QUIT()
+
+ECHO.
+ECHO Invalid command.
+GOTO :RETURN_TO_MENU()
+
+REM -- RETURN_TO_MENU() FUNCTION
+:RETURN_TO_MENU()
+PAUSE
+GOTO :MENU()
+
+REM -- COMPILE_SCRIPT() FUNCTION
+:COMPILE_SCRIPT()
+SET /p CMD="Path to script to compile:"
+%ECOMPILE_PATH% %CMD%
+GOTO RETURN_TO_MENU()
+
+REM -- COMPILE_ALL_SCRIPTS() FUNCTION
+:COMPILE_ALL_SCRIPTS()
+%ECOMPILE_PATH% -b -r
+GOTO RETURN_TO_MENU()
+
+REM -- COMPILE_ALL_SCRIPTS_OPTXT() FUNCTION
+:COMPILE_ALL_SCRIPTS_OPTXT()
+%ECOMPILE_PATH% -b -r >ecompile.txt
+GOTO RETURN_TO_MENU()
+
+REM -- QUIT FUNCTION
+:QUIT()

Added: trunk/096/batchfiles/loopPOL.bat
===================================================================
--- trunk/096/batchfiles/loopPOL.bat	2005-09-06 01:22:13 UTC (rev 71)
+++ trunk/096/batchfiles/loopPOL.bat	2005-09-06 01:46:19 UTC (rev 72)
@@ -0,0 +1,26 @@
+ at ECHO OFF
+
+REM -- If a special path is needed to pol.exe set it here
+SET POL_PATH=pol.exe
+REM ----------
+
+GOTO :START()
+
+REM -- START() FUNCTION
+:START()
+CLS
+ECHO loopPOL.bat by Austin
+ECHO ========================
+ECHO Starting %POL_PATH%
+eCHO ========================
+
+%POL_PATH%
+
+ECHO.
+ECHO.
+ECHO ========================
+ECHO POL has finished running
+eCHO ========================
+ECHO.
+
+GOTO :START()

Added: trunk/096/batchfiles/pol.bat
===================================================================
--- trunk/096/batchfiles/pol.bat	2005-09-06 01:22:13 UTC (rev 71)
+++ trunk/096/batchfiles/pol.bat	2005-09-06 01:46:19 UTC (rev 72)
@@ -0,0 +1,21 @@
+ at ECHO OFF
+
+REM -- If a special path is needed to pol.exe set it here
+SET POL_PATH=pol.exe
+REM ----------
+
+CLS
+ECHO POL.bat by Austin
+ECHO ========================
+ECHO Starting %POL_PATH%
+eCHO ========================
+
+%POL_PATH%
+
+ECHO.
+ECHO.
+ECHO ========================
+ECHO POL has finished running
+eCHO ========================
+ECHO.
+PAUSE
\ No newline at end of file

Added: trunk/096/batchfiles/realmgen.bat
===================================================================
--- trunk/096/batchfiles/realmgen.bat	2005-09-06 01:22:13 UTC (rev 71)
+++ trunk/096/batchfiles/realmgen.bat	2005-09-06 01:46:19 UTC (rev 72)
@@ -0,0 +1,114 @@
+ at ECHO OFF
+
+REM -- If a special path is needed to uoconvert.exe set it here
+SET UOCNVRT_PATH=uoconvert.exe
+REM ----------
+
+GOTO :MENU()
+
+REM -- MENU FUNCTION
+:MENU()
+CLS
+ECHO RealmGen.bat by Austin
+ECHO ========================
+ECHO Command        Purpose
+ECHO  [ a ] - Build multis.cfg
+ECHO  [ b ] - Build tiles.cfg
+ECHO  [ c ] - Build landtiles.cfg
+ECHO  [ d ] - Build all config files
+ECHO.
+ECHO  [ e ] - Build 'Britannia' realm     (mapid=0)
+ECHO  [ f ] - Build 'Britannia Alt' realm (mapid=1)
+ECHO  [ g ] - Build 'Ilshenar' realm      (mapid=2)
+ECHO  [ h ] - Build 'Malas' realm         (mapid=3)
+ECHO  [ i ] - Build 'Tokuno' realm        (mapid=4)
+ECHO.
+ECHO  [ x ] - Quit
+
+SET /p CMD=Command:
+
+IF "%CMD%" == "a" GOTO :MULTIS.CFG()
+IF "%cMD%" == "b" GOTO :TILES.CFG()
+IF "%cMD%" == "c" GOTO :LANDTILES.CFG()
+IF "%cMD%" == "d" GOTO :ALLCONFIGS()
+IF "%CMD%" == "e" GOTO :REALM_BRITTANIA()
+IF "%CMD%" == "f" GOTO :REALM_BRITTANIA_ALT()
+IF "%CMD%" == "g" GOTO :REALM_ILSHENAR()
+IF "%CMD%" == "h" GOTO :REALM_MALAS()
+IF "%CMD%" == "i" GOTO :REALM_TOKUNO()
+IF "%CMD%" == "x" GOTO :QUIT()
+
+ECHO.
+ECHO Invalid command.
+GOTO :RETURN_TO_MENU()
+
+REM -- RETURN_TO_MENU() FUNCTION
+:RETURN_TO_MENU()
+PAUSE
+GOTO :MENU()
+
+REM -- MULTIS.CFG FUNCTION
+:MULTIS.CFG()
+%UOCNVRT_PATH% multis
+MOVE multis.cfg config
+GOTO :RETURN_TO_MENU()
+
+REM -- TILES.CFG FUNCTION
+:TILES.CFG()
+%UOCNVRT_PATH% tiles
+MOVE tiles.cfg config
+GOTO :RETURN_TO_MENU()
+
+REM -- LANDTILES.CFG FUNCTION
+:LANDTILES.CFG()
+%UOCNVRT_PATH% landtiles
+MOVE landtiles.cfg config
+GOTO :RETURN_TO_MENU()
+
+REM -- ALLCONFIGS FUNCTION
+:ALLCONFIGS()
+%UOCNVRT_PATH% multis
+MOVE multis.cfg config
+%UOCNVRT_PATH% tiles
+MOVE tiles.cfg config
+%UOCNVRT_PATH% landtiles
+MOVE landtiles.cfg config
+GOTO :RETURN_TO_MENU()
+
+REM -- REALM_BRITTANIA()
+:REALM_BRITTANIA()
+%UOCNVRT_PATH% map     realm=britannia mapid=0 usedif=1 width=6144 height=4096
+%UOCNVRT_PATH% statics realm=britannia
+%UOCNVRT_PATH% maptile realm=britannia
+GOTO :RETURN_TO_MENU()
+
+REM -- REALM_BRITTANIA_ALT() FUNCTION
+:REALM_BRITTANIA_ALT()
+%UOCNVRT_PATH% map     realm=britannia_alt mapid=1 usedif=1 width=6144 height=4096
+%UOCNVRT_PATH% statics realm=britannia_alt
+%UOCNVRT_PATH% maptile realm=britannia_alt
+GOTO :RETURN_TO_MENU()
+
+REM -- REALM_ILSHENAR FUNCTION
+:REALM_ILSHENAR()
+%UOCNVRT_PATH% map     realm=ilshenar mapid=2 usedif=1 width=2304 height=1600
+%UOCNVRT_PATH% statics realm=ilshenar
+%UOCNVRT_PATH% maptile realm=ilshenar
+GOTO :RETURN_TO_MENU()
+
+REM -- REALM_MALAS FUNCTION
+:REALM_MALAS()
+%UOCNVRT_PATH% map     realm=malas mapid=3 usedif=1 width=2560 height=2048
+%UOCNVRT_PATH% statics realm=malas
+%UOCNVRT_PATH% maptile realm=malas
+GOTO :RETURN_TO_MENU()
+
+REM -- REALM_TOKUNO FUNCTION
+:REALM_TOKUNO()
+%UOCNVRT_PATH% map     realm=tokuno mapid=4 usedif=1 width=1448 height=1448
+%UOCNVRT_PATH% statics realm=tokuno
+%UOCNVRT_PATH% maptile realm=tokuno
+GOTO :RETURN_TO_MENU()
+
+REM -- QUIT FUNCTION
+:QUIT()
\ No newline at end of file

Modified: trunk/096/starthere.bat
===================================================================
--- trunk/096/starthere.bat	2005-09-06 01:22:13 UTC (rev 71)
+++ trunk/096/starthere.bat	2005-09-06 01:46:19 UTC (rev 72)
@@ -14,9 +14,10 @@
 ECHO Command        Purpose
 ECHO  [ a ] - RealmGen menu        (Realm building tools)
 ECHO  [ b ] - Ecompiler menu       (Ecompile tools)
+ECHO  [ c ] - Cleanup menu         (File removal tools)
 ECHO.
 ECHO  [ c ] - Start POL.exe        (Returns to menu on exit)
-ECHO  [ d ] - Keep POL.exe running (Restarts when it exits)
+ECHO  [ d ] - Keep POL.exe running (Restarts when it exits use CTRL+C to stop)
 ECHO.
 ECHO  [ x ] - Quit
 
@@ -24,8 +25,9 @@
 
 IF "%CMD%" == "a" GOTO :REALM_GEN()
 IF "%CMD%" == "b" GOTO :ECOMPILE()
-IF "%CMD%" == "c" GOTO :POL()
-IF "%CMD%" == "d" GOTO :POL_LOOP()
+IF "%CMD%" == "c" GOTO :CLEANUP()
+IF "%CMD%" == "d" GOTO :POL()
+IF "%CMD%" == "e" GOTO :POL_LOOP()
 IF "%CMD%" == "x" GOTO :QUIT()
 
 ECHO.
@@ -46,6 +48,11 @@
 CALL %BATCH_PATH%ecompile.bat
 GOTO :RETURN_TO_MENU()
 
+REM -- CLEANUP() FUNCTION
+:CLEANUP()
+CALL %BATCH_PATH%cleanup.bat
+GOTO :RETURN_TO_MENU()
+
 REM -- POL() FUNCTION
 :POL()
 CALL %BATCH_PATH%pol.bat



From austin at berlios.de  Tue Sep  6 05:21:34 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 05:21:34 +0200
Subject: [Poldistro-svn] r73 - trunk/096/batchfiles
Message-ID: <200509060321.j863LYxa000334@sheep.berlios.de>

Author: austin
Date: 2005-09-06 05:21:31 +0200 (Tue, 06 Sep 2005)
New Revision: 73

Modified:
   trunk/096/batchfiles/realmgen.bat
Log:


Modified: trunk/096/batchfiles/realmgen.bat
===================================================================
--- trunk/096/batchfiles/realmgen.bat	2005-09-06 01:46:19 UTC (rev 72)
+++ trunk/096/batchfiles/realmgen.bat	2005-09-06 03:21:31 UTC (rev 73)
@@ -22,6 +22,7 @@
 ECHO  [ g ] - Build 'Ilshenar' realm      (mapid=2)
 ECHO  [ h ] - Build 'Malas' realm         (mapid=3)
 ECHO  [ i ] - Build 'Tokuno' realm        (mapid=4)
+ECHO  [ j ] - Build all reamlms - Takes a very long time!
 ECHO.
 ECHO  [ x ] - Quit
 
@@ -36,6 +37,8 @@
 IF "%CMD%" == "g" GOTO :REALM_ILSHENAR()
 IF "%CMD%" == "h" GOTO :REALM_MALAS()
 IF "%CMD%" == "i" GOTO :REALM_TOKUNO()
+IF "%CMD%" == "j" GOTO :BUILD_ALL_REALMS()
+
 IF "%CMD%" == "x" GOTO :QUIT()
 
 ECHO.
@@ -110,5 +113,28 @@
 %UOCNVRT_PATH% maptile realm=tokuno
 GOTO :RETURN_TO_MENU()
 
+REM -- BUILD_ALL_REALMS() FUNCTION
+:BUILD_ALL_REALMS()
+%UOCNVRT_PATH% map     realm=britannia mapid=0 usedif=1 width=6144 height=4096
+%UOCNVRT_PATH% statics realm=britannia
+%UOCNVRT_PATH% maptile realm=britannia
+
+%UOCNVRT_PATH% map     realm=britannia_alt mapid=1 usedif=1 width=6144 height=4096
+%UOCNVRT_PATH% statics realm=britannia_alt
+%UOCNVRT_PATH% maptile realm=britannia_alt
+
+%UOCNVRT_PATH% map     realm=ilshenar mapid=2 usedif=1 width=2304 height=1600
+%UOCNVRT_PATH% statics realm=ilshenar
+%UOCNVRT_PATH% maptile realm=ilshenar
+
+%UOCNVRT_PATH% map     realm=malas mapid=3 usedif=1 width=2560 height=2048
+%UOCNVRT_PATH% statics realm=malas
+%UOCNVRT_PATH% maptile realm=malas
+
+%UOCNVRT_PATH% map     realm=tokuno mapid=4 usedif=1 width=1448 height=1448
+%UOCNVRT_PATH% statics realm=tokuno
+%UOCNVRT_PATH% maptile realm=tokuno
+GOTO :RETURN_TO_MENU()
+
 REM -- QUIT FUNCTION
 :QUIT()
\ No newline at end of file



From austin at berlios.de  Tue Sep  6 05:55:49 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 05:55:49 +0200
Subject: [Poldistro-svn] r74 - trunk/096/batchfiles
Message-ID: <200509060355.j863tn3f006892@sheep.berlios.de>

Author: austin
Date: 2005-09-06 05:55:47 +0200 (Tue, 06 Sep 2005)
New Revision: 74

Modified:
   trunk/096/batchfiles/realmgen.bat
Log:


Modified: trunk/096/batchfiles/realmgen.bat
===================================================================
--- trunk/096/batchfiles/realmgen.bat	2005-09-06 03:21:31 UTC (rev 73)
+++ trunk/096/batchfiles/realmgen.bat	2005-09-06 03:55:47 UTC (rev 74)
@@ -118,19 +118,19 @@
 %UOCNVRT_PATH% map     realm=britannia mapid=0 usedif=1 width=6144 height=4096
 %UOCNVRT_PATH% statics realm=britannia
 %UOCNVRT_PATH% maptile realm=britannia
-
+ at ECHO ----
 %UOCNVRT_PATH% map     realm=britannia_alt mapid=1 usedif=1 width=6144 height=4096
 %UOCNVRT_PATH% statics realm=britannia_alt
 %UOCNVRT_PATH% maptile realm=britannia_alt
-
+ at ECHO ----
 %UOCNVRT_PATH% map     realm=ilshenar mapid=2 usedif=1 width=2304 height=1600
 %UOCNVRT_PATH% statics realm=ilshenar
 %UOCNVRT_PATH% maptile realm=ilshenar
-
+ at ECHO ----
 %UOCNVRT_PATH% map     realm=malas mapid=3 usedif=1 width=2560 height=2048
 %UOCNVRT_PATH% statics realm=malas
 %UOCNVRT_PATH% maptile realm=malas
-
+ at ECHO ----
 %UOCNVRT_PATH% map     realm=tokuno mapid=4 usedif=1 width=1448 height=1448
 %UOCNVRT_PATH% statics realm=tokuno
 %UOCNVRT_PATH% maptile realm=tokuno



From austin at berlios.de  Tue Sep  6 06:43:32 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 06:43:32 +0200
Subject: [Poldistro-svn] r75 - trunk/096
Message-ID: <200509060443.j864hW2O000575@sheep.berlios.de>

Author: austin
Date: 2005-09-06 06:43:29 +0200 (Tue, 06 Sep 2005)
New Revision: 75

Modified:
   trunk/096/starthere.bat
Log:


Modified: trunk/096/starthere.bat
===================================================================
--- trunk/096/starthere.bat	2005-09-06 03:55:47 UTC (rev 74)
+++ trunk/096/starthere.bat	2005-09-06 04:43:29 UTC (rev 75)
@@ -16,8 +16,8 @@
 ECHO  [ b ] - Ecompiler menu       (Ecompile tools)
 ECHO  [ c ] - Cleanup menu         (File removal tools)
 ECHO.
-ECHO  [ c ] - Start POL.exe        (Returns to menu on exit)
-ECHO  [ d ] - Keep POL.exe running (Restarts when it exits use CTRL+C to stop)
+ECHO  [ d ] - Start POL.exe        (Returns to menu on exit)
+ECHO  [ e ] - Keep POL.exe running (Restarts when it exits use CTRL+C to stop)
 ECHO.
 ECHO  [ x ] - Quit
 



From austin at berlios.de  Tue Sep  6 07:08:03 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 07:08:03 +0200
Subject: [Poldistro-svn] r76 - trunk/096
Message-ID: <200509060508.j865832P017501@sheep.berlios.de>

Author: austin
Date: 2005-09-06 07:07:57 +0200 (Tue, 06 Sep 2005)
New Revision: 76

Modified:
   trunk/096/pol.cfg
Log:
More generic data root for mul files - Looks for a "MUL" folder in the UO directory. 

Modified: trunk/096/pol.cfg
===================================================================
--- trunk/096/pol.cfg	2005-09-06 04:43:29 UTC (rev 75)
+++ trunk/096/pol.cfg	2005-09-06 05:07:57 UTC (rev 76)
@@ -5,7 +5,7 @@
 #
 # UoDataFileRoot: where the UO client files are located
 #
-UoDataFileRoot=D:\Games\Ultima Online Samurai Empire
+UoDataFileRoot=MUL
 
 #
 # ListenPort: TCP/IP port to listen



From austin at berlios.de  Tue Sep  6 07:15:29 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 07:15:29 +0200
Subject: [Poldistro-svn] r77 - in trunk/096/pkg/utils/gumps: docs include
Message-ID: <200509060515.j865FTmp021769@sheep.berlios.de>

Author: austin
Date: 2005-09-06 07:15:24 +0200 (Tue, 06 Sep 2005)
New Revision: 77

Modified:
   trunk/096/pkg/utils/gumps/docs/changes.txt
   trunk/096/pkg/utils/gumps/include/gumps.inc
Log:


Modified: trunk/096/pkg/utils/gumps/docs/changes.txt
===================================================================
--- trunk/096/pkg/utils/gumps/docs/changes.txt	2005-09-06 05:07:57 UTC (rev 76)
+++ trunk/096/pkg/utils/gumps/docs/changes.txt	2005-09-06 05:15:24 UTC (rev 77)
@@ -1,50 +1,3 @@
-/*===============================================================
-* Current Version
-* GUMPS.INC - v0.3
-* include ":gumps:includes/gumps";
-*
-* -- Revision v0.3 --
-* Austin
-*  Added:
-*      Support for setting arbitrary data locations for GFTextEntry()
-*
-* -- Revision v0.2 --
-* Austin
-*  Added:
-*	Support for setting arbitrary button ID's and automatic assignments.
-*	Ability to change a gumps 'NoMove' 'NoClose' 'NoDispose' settings multiple times.
-*	XGFError()
-*  Changed:
-*	Function names and prototypes to better match the old gumps.inc for faster migration time.
-*	Rewrote various functions for improved error checking and utility. Will document better later
-	on as a lot of code was changed (Sorry, Melanius!)
-*
-* -- Revision v0.1 --
-* Melanius
-*  First version created to handle gumps as an object rather than as a global variable.
-*  This new include now allows multiple gumps to be handled in a single script as well
-*  as allowing easier saving of them.
-*  Added:
-*	AddCheckBox()
-*	AddGumpButton()
-*	AddGumpPic()
-*	AddHTML()
-*	AddHTMLLocalized()
-*	AddLabel()
-*	AddLabelCropped()
-*	AddPage()
-*	AddRadioButton()
-*	AddRadioGroup()
-*	AddTextInput()
-*	AddTilePic()
-*	CreateGump()
-*	Disposable()
-*	Movable()
-*	ResizePic()
-*	SendGump()
-*
-===============================================================*/
-
 -=[ 4:55PM Jul. 07, 2005 (Austin)]=---------
 Changed:
 	* Renamed "configs" to "config"

Modified: trunk/096/pkg/utils/gumps/include/gumps.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/gumps.inc	2005-09-06 05:07:57 UTC (rev 76)
+++ trunk/096/pkg/utils/gumps/include/gumps.inc	2005-09-06 05:15:24 UTC (rev 77)
@@ -1,43 +1,90 @@
-/* gumps v0.3
- *
- * Purpose
- * Provide various functions for creating and managing gumps as an object.
- * Allow multiple gumps to handled in a single script.
- *
- * Function List
- * GFAddButton(byref gump, x, y, off_id, on_id, btn_type:=GF_PAGE_BTN, btn_value:=0)
- * GFAddHTMLLocalized(byref gump, x, y, width, height, cliloc, background, scrollbar, hue := 0)
- * GFCheckBox(byref gump, x, y, unc_id, che_id, status:=0, btn_value:=0)
- * GFCreateGump(x:=0, y:=0, width:=0, height:=0)
- * GFDisposable(byref gump, bool)
- * GFExtractData(input, data_id)
- * GFGumpPic(byref gump, x, y, gump_id, hue := 0)
- * GFHTMLArea(byref gump, x, y, width, height, text, background:=0, scrollbar:=0)
- * GFMovable(byref gump, bool)
- * GFPage(byref gump, page)
- * GFRadioButton(byref gump, x, y, unp_id, pres_id, status:=0, btn_value:=0)
- * GFResizePic(byref gump, x, y, gump_id, width:=0, height:=0)
- * GFSendGump(who, byref gump)
- * GFSetRadioGroup(byref gump, group_id)
- * GFTextCrop(byref gump, x, y, width, height, hue:=0, text:="")
- * GFTextEntry(byref gump, x, y, width, height, txt_color, ini_text:="")
- * GFTextLine(byref gump, x, y, hue:=0, text:="")
- * GFTilePic(byref gump, x, y, tile_id, hue := 0)
- *
- * Internal/Private Function List
- * XGFError(text)
- */
-
 use uo;
 use os;
 use basic;
 
-//Constants for the GFAddButton() function
+/*===============================================================
+* Current Version
+* GUMPS.INC - v0.3
+* include ":gumps:includes/gumps";
+*
+* -- Revision v0.3 --
+* Austin
+*  Added:
+*      Support for setting arbitrary data locations for GFTextEntry()
+*
+* -- Revision v0.2 --
+* Austin
+*  Added:
+*	Support for setting arbitrary button ID's and automatic assignments.
+*	Ability to change a gumps 'NoMove' 'NoClose' 'NoDispose' settings multiple times.
+*	XGFError()
+*  Changed:
+*	Function names and prototypes to better match the old gumps.inc for faster migration time.
+*	Rewrote various functions for improved error checking and utility. Will document better later
+	on as a lot of code was changed (Sorry, Melanius!)
+*
+* -- Revision v0.1 --
+* Melanius
+*  First version created to handle gumps as an object rather than as a global variable.
+*  This new include now allows multiple gumps to be handled in a single script as well
+*  as allowing easier saving of them.
+*  Added:
+*	AddCheckBox()
+*	AddGumpButton()
+*	AddGumpPic()
+*	AddHTML()
+*	AddHTMLLocalized()
+*	AddLabel()
+*	AddLabelCropped()
+*	AddPage()
+*	AddRadioButton()
+*	AddRadioGroup()
+*	AddTextInput()
+*	AddTilePic()
+*	CreateGump()
+*	Disposable()
+*	Movable()
+*	ResizePic()
+*	SendGump()
+*
+===============================================================*/
+
+/////////////////////////////////////////////////////////////////
+// * Function List *
+//
+// GFAddButton(byref gump, x, y, off_id, on_id, btn_type:=GF_PAGE_BTN, btn_value:=0)
+// GFAddHTMLLocalized(byref gump, x, y, width, height, cliloc, background, scrollbar, hue := 0)
+// GFCheckBox(byref gump, x, y, unc_id, che_id, status:=0, btn_value:=0)
+// GFCreateGump(x:=0, y:=0, width:=0, height:=0)
+// GFDisposable(byref gump, bool)
+// GFExtractData(input, data_id)
+// GFGumpPic(byref gump, x, y, gump_id, hue := 0)
+// GFHTMLArea(byref gump, x, y, width, height, text, background:=0, scrollbar:=0)
+// GFMovable(byref gump, bool)
+// GFPage(byref gump, page)
+// GFRadioButton(byref gump, x, y, unp_id, pres_id, status:=0, btn_value:=0)
+// GFResizePic(byref gump, x, y, gump_id, width:=0, height:=0)
+// GFSendGump(who, byref gump)
+// GFSetRadioGroup(byref gump, group_id)
+// GFTextCrop(byref gump, x, y, width, height, hue:=0, text:="")
+// GFTextEntry(byref gump, x, y, width, height, txt_color, ini_text:="")
+// GFTextLine(byref gump, x, y, hue:=0, text:="")
+// GFTilePic(byref gump, x, y, tile_id, hue := 0)
+//
+/////////////////////////////////////////////////////////////////
+// * Internal/Private Function List *
+//
+// XGFError(text)
+/////////////////////////////////////////////////////////////////
+// * Global Variables *
+//
+// Constants for the GFAddButton() function
 const GF_PAGE_BTN	:= 0x0;
 const GF_CLOSE_BTN	:= 0x1;
 const GF_DUMMY_BTN	:= 0x2;
+//
+/////////////////////////////////////////////////////////////////
 
-
 /*
  * GFCreateGump(x, y, width, height)
  *
@@ -83,7 +130,6 @@
 	return(gump);
 endfunction
 
-
 /*
  * GFClosable(byref gump, bool)
  *
@@ -99,7 +145,7 @@
  * Returns 1 on success, error on failure.
  *
  */
-function GFClosable(byref gump, bool)
+ function GFClosable(byref gump, bool)
 	case(bool)
 		0:
 			if ( gump.base.CloseLoc )
@@ -121,9 +167,8 @@
 			return XGFError("gumps::Closable: Invalid bool value '"+bool+"'");
 	endcase
 	return 1;
-endfunction
+ endfunction
 
-
 /*
  * GFDisposable(byref gump, bool)
  *
@@ -167,7 +212,6 @@
 	return 1;
  endfunction
 
-
 /*
  * GFMovable(byref gump, bool)
  *
@@ -207,7 +251,6 @@
 	return 1;
  endfunction
 
-
 /*
  * GFPage(byref gump, page)
  *
@@ -229,7 +272,6 @@
 	return 1;
 endfunction
 
-
 /*
  * GFResizePic(byref gump, x, y, gump_id, width, height)
  *
@@ -263,7 +305,6 @@
 	return 1;
 endfunction
 
-
 /*
  * GFAddAlphaRegion(byref gump, x, y, width, height)
  *
@@ -287,7 +328,6 @@
 	return 1;
  endfunction
 
-
 /*
  * GFAddButton(byref gump, x, y, off_id, on_id, btn_type, btn_value)
  *
@@ -312,6 +352,7 @@
  * Return value is the button value.
  *
  */
+
 function GFAddButton(byref gump, x, y, off_id, on_id, btn_type:=GF_PAGE_BTN, btn_value:=0)
 	var line := "Button " + CStr(gump.base.x + x) + " " + CStr(gump.base.y + y) + " " + CStr(off_id) + " " + CStr(on_id);
 
@@ -334,7 +375,6 @@
 	return (btn_value);
 endfunction
 
-
 /*
  * GFCheckBox(byref gump, x, y, unc_id, che_id, status, btn_value)
  *
@@ -382,7 +422,6 @@
 	return (btn_value);
 endfunction
 
-
 /*
  * GFSetRadioGroup(byref gump, group_id)
  *
@@ -405,7 +444,6 @@
 	return 1;
 endfunction
 
-
 /*
  * GFHTMLArea(byref gump, x, y, width, height, text, background, scrollbar)
  *
@@ -438,7 +476,6 @@
 	return (index);
 endfunction
 
-
 /*
  * GFAddHTMLLocalized(byref gump, x, y, width, height, cliloc, background, scrollbar, hue)
  *
@@ -474,7 +511,6 @@
 	return 1;
 endfunction
 
-
 /*
  * GFGumpPic(byref gump, x, y, gump_id, hue)
  *
@@ -507,7 +543,6 @@
 	return 1;
 endfunction
 
-
 /*
  * GFTilePic(byref gump, x, y, tile_id, hue)
  *
@@ -540,7 +575,6 @@
 	return 1;
 endfunction
 
-
 /*
  * GFTextLine(byref gump, x, y, hue, text)
  *
@@ -567,7 +601,6 @@
 	return (index);
 endfunction
 
-
 /*
  * GFTextCrop(byref gump, x, y, width, height, hue, text)
  *
@@ -598,7 +631,6 @@
 	return (index);
 endfunction
 
-
 /*
  * GFRadioButton(byref gump, x, y, unp_id, pres_id, status, btn_value)
  *
@@ -644,7 +676,6 @@
 	return (btn_value);
 endfunction
 
-
 /*
  * GFTextEntry(byref gump, x, y, width, height, txt_color, ini_text)
  *
@@ -686,7 +717,6 @@
 	return (txt_id);
 endfunction
 
-
 /*
  * GFSendGump(who, gump)
  *
@@ -712,7 +742,6 @@
 	return ret_val;
 endfunction
 
-
 /*
  * XGFErrorSetup(who, gump)
  *



From austin at berlios.de  Tue Sep  6 07:23:18 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 07:23:18 +0200
Subject: [Poldistro-svn] r78 - in trunk/096/pkg/mobiles/ai_brain/include: . braincore
Message-ID: <200509060523.j865NIDv026510@sheep.berlios.de>

Author: austin
Date: 2005-09-06 07:22:46 +0200 (Tue, 06 Sep 2005)
New Revision: 78

Modified:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-06 05:15:24 UTC (rev 77)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-06 05:22:46 UTC (rev 78)
@@ -112,7 +112,7 @@
 		if ( g_scripts.Exists("restart_script") )
 			var restart_script := Run_Script_To_Completion(g_scripts["restart_script"], {npc, g_settings});
 			if ( restart_script.errortext )
-				FatalError("Restart script failed:"+restart_script.errortext);
+				FatalError("Error - StartupScripts() :: Restart script failed: "+restart_script.errortext);
 				return 0;
 			endif
 		endif
@@ -123,7 +123,7 @@
 		if ( g_scripts.Exists("init_script") )
 			var init_script := Run_Script_To_Completion(g_scripts["init_script"], {npc, g_settings});
 			if ( init_script.errortext )
-				FatalError("Init script failed:"+init_script.errortext);
+				FatalError("Error - StartupScripts() :: Init script failed:"+init_script.errortext);
 				return 0;
 			endif
 		endif

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc	2005-09-06 05:15:24 UTC (rev 77)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc	2005-09-06 05:22:46 UTC (rev 78)
@@ -69,7 +69,7 @@
 		
 	if ( npc_elem.AmmoType )
 		if ( CInt(npc_elem.AmmoAmount) > 0 )
-			var ammo := CreateItemInBackpack(mobile, npc_elem.AmmoType, npc_elem.AmmoAmount);
+			var ammo := CreateItemInBackpack(mobile, npc_elem.AmmoType, CInt(npc_elem.AmmoAmount));
 			if ( !ammo )
 				return ammo; // Will return an error with .errortext
 			endif

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc	2005-09-06 05:15:24 UTC (rev 77)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc	2005-09-06 05:22:46 UTC (rev 78)
@@ -95,7 +95,7 @@
 	if ( nerve_dict.exists(nerve_name) )
 		return GetProcess(CInt(nerve_dict[nerve_name].pid));
 	else
-		return error{"errortext" := "GetNerveProcess() - Invalid nerve name  ["+nerve_name+"]"};
+		return error{"errortext" := "Error - GetNerveProcess() :: Invalid nerve name  ["+nerve_name+"]"};
 	endif
 endfunction
 
@@ -122,7 +122,7 @@
 	if ( nerve_dict.exists(nerve_name) )
 		return GetProcess(CInt(nerve_dict[nerve_name].flags));
 	else
-		return error{"errortext" := "GetNerveProcess() - Invalid nerve name  ["+nerve_name+"]"};
+		return error{"errortext" := "Error - GetNerveFlags() :: Invalid nerve name  ["+nerve_name+"]"};
 	endif
 endfunction
 
@@ -161,7 +161,7 @@
 	var process := start_script(nerve_script, data);
 
 	if ( process.errortext )
-		var errmsg := "StartNerve() ["+nerve_name+"] ["+nerve_script+"] failed to start! ->"+process.errortext;
+		var errmsg := "Error - StartNerve() :: ["+nerve_name+"] ["+nerve_script+"] failed to start! ->"+process.errortext;
 		NPC_ErrorSysLog(mobile, errmsg);
 		return error{"errortext":=errmsg};
 	else
@@ -207,7 +207,7 @@
 
 		return SaveNerves(mobile, nerve_dict);
 	else
-		return error{"errortext" := "StopNerve() - Invalid nerve name  ["+nerve_name+"]"};
+		return error{"errortext" := "Error - StopNerve() :: Invalid nerve name  ["+nerve_name+"]"};
 	endif
 endfunction
 

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-06 05:15:24 UTC (rev 77)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-06 05:22:46 UTC (rev 78)
@@ -44,7 +44,7 @@
 		parsed.package := "";
 		parsed.template := template_name;
 	else
-		parsed.package := template_name[colon_a, colon_b];
+		parsed.package := template_name[colon_a+1, colon_b-1];
 		parsed.template := template_name[colon_b+1, Len(template_name)];
 	endif
 



From panosl at berlios.de  Tue Sep  6 11:13:44 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Tue, 6 Sep 2005 11:13:44 +0200
Subject: [Poldistro-svn] r79 - trunk/096/batchfiles
Message-ID: <200509060913.j869DiiT003283@sheep.berlios.de>

Author: panosl
Date: 2005-09-06 11:13:44 +0200 (Tue, 06 Sep 2005)
New Revision: 79

Modified:
   trunk/096/batchfiles/realmgen.bat
Log:


Modified: trunk/096/batchfiles/realmgen.bat
===================================================================
--- trunk/096/batchfiles/realmgen.bat	2005-09-06 05:22:46 UTC (rev 78)
+++ trunk/096/batchfiles/realmgen.bat	2005-09-06 09:13:44 UTC (rev 79)
@@ -22,7 +22,7 @@
 ECHO  [ g ] - Build 'Ilshenar' realm      (mapid=2)
 ECHO  [ h ] - Build 'Malas' realm         (mapid=3)
 ECHO  [ i ] - Build 'Tokuno' realm        (mapid=4)
-ECHO  [ j ] - Build all reamlms - Takes a very long time!
+ECHO  [ j ] - Build all realms - Takes a very long time!
 ECHO.
 ECHO  [ x ] - Quit
 



From austin at berlios.de  Tue Sep  6 12:32:22 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 12:32:22 +0200
Subject: [Poldistro-svn] r80 - trunk/096/pkg/mobiles/ai_brain/include/braincore
Message-ID: <200509061032.j86AWMoQ015147@sheep.berlios.de>

Author: austin
Date: 2005-09-06 12:32:19 +0200 (Tue, 06 Sep 2005)
New Revision: 80

Modified:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-06 09:13:44 UTC (rev 79)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-06 10:32:19 UTC (rev 80)
@@ -24,7 +24,7 @@
 	
 	g_settings := NPC_LoadTemplateSettings(npc);
 	g_settings := NPC_GetDefaultSettings(g_settings);
-	g_settings := NPC_LoadScriptSettings(npc);
+	g_scripts := NPC_LoadScriptSettings(npc);
 		
 	return 1;
 endfunction



From austin at berlios.de  Tue Sep  6 12:54:12 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 12:54:12 +0200
Subject: [Poldistro-svn] r81 - trunk/096
Message-ID: <200509061054.j86AsC3Y003441@sheep.berlios.de>

Author: austin
Date: 2005-09-06 12:54:07 +0200 (Tue, 06 Sep 2005)
New Revision: 81

Modified:
   trunk/096/pol.cfg
Log:
Removed entries for port and encryption - They belong in uoclient.cfg
Removed the line for the .pol files as realms are now used instead.

Modified: trunk/096/pol.cfg
===================================================================
--- trunk/096/pol.cfg	2005-09-06 10:32:19 UTC (rev 80)
+++ trunk/096/pol.cfg	2005-09-06 10:54:07 UTC (rev 81)
@@ -3,23 +3,15 @@
 #############################################################################
 
 #
-# UoDataFileRoot: where the UO client files are located
+# Port and encryption settings now handled in UOCLIENT.CFG
 #
-UoDataFileRoot=MUL
 
 #
-# ListenPort: TCP/IP port to listen
-#  NOTE, if you change this, you probably need to edit
-#  servers.cfg
+# UoDataFileRoot: where the UO client files are located
 #
-ListenPort=5003
+UoDataFileRoot=MUL
 
 #
-# ClientEncryptionVersion: The client encryption version
-#                          Supported values: 1.26.4  2.0.0  ignition  uorice  none
-ClientEncryptionVersion=none
-
-#
 # RetainCleartextPasswords: If you select this, the server will save plain passwords
 # in the accounts.txt file. If you set it to 0, all will be erased. You can get them back
 # by changing this back to 1 and successfully logging into the account (for each account)
@@ -98,21 +90,11 @@
 #
 ReportCriticalScripts=0
 
-# UseNewStaticsFile: Large shards will want to set UseNewStaticsFile=1 in pol.cfg.
-#                    This will create files 'statics0.pol' and 'staidx0.pol',
-#                    which are smaller versions of statics0.mul and staidx0.mul.
-#                    These files are then loaded wholly into memory for very fast
-#                    access for walking height and LOS checks. If this option is
-#                    enabled, POL uses an additional 11 MB memory
-UseNewStaticsFile=1
-
 #
 # MaxCallDepth: Maximum function call depth for scripts
 #
 MaxCallDepth=100
 
-
-
 #############################################################################
 ## Debugging
 #############################################################################
@@ -136,12 +118,12 @@
 #
 # DebugPort: TCP/IP port to listen for debugger connections
 #
-DebugPort=5004
+DebugPort=5001
 
 #
 # DebugPassword: Password for debugging
 #   If none is specified, no password is required.
-DebugPassword= debugme
+DebugPassword=debugme
 
 #
 # DebugLocalOnly: Only allow access from localhost
@@ -156,6 +138,39 @@
 MiniDumpType=small
 
 #############################################################################
+## Integrated Web Server
+#############################################################################
+
+#
+# WebServer: in multithread mode only, run the internal web server
+#            This may be a security risk.  It's susceptible to DoS attacks.
+#            If someone knows a little about TCP/IP, they could cause you
+#            trouble if it's enabled.
+#
+WebServer=1
+
+#
+# WebServerPort: What TCP/IP port to listen for web requests
+#
+WebServerPort=5000
+
+#
+# WebServerLocalOnly: Only allow access from localhost
+#
+WebServerLocalOnly=0
+
+#
+# WebServerDebug: Print trace information about http requests
+#
+WebServerDebug=0
+
+#
+# WebServerPassword: username/password required for access to the web server.
+#                    if not specified, no password is required.
+#
+WebServerPassword=
+
+#############################################################################
 ## System Load and Save
 #############################################################################
 
@@ -192,44 +207,7 @@
 #
 EnableSecureTrading=1
 
-
-
 #############################################################################
-## Integrated Web Server
-#############################################################################
-
-#
-# WebServer: in multithread mode only, run the internal web server
-#            This may be a security risk.  It's susceptible to DoS attacks.
-#            If someone knows a little about TCP/IP, they could cause you
-#            trouble if it's enabled.
-#
-WebServer=1
-
-#
-# WebServerPort: What TCP/IP port to listen for web requests
-#
-WebServerPort=5002
-
-#
-# WebServerLocalOnly: Only allow access from localhost
-#
-WebServerLocalOnly=0
-
-#
-# WebServerDebug: Print trace information about http requests
-#
-WebServerDebug=0
-
-#
-# WebServerPassword: username/password required for access to the web server.
-#                    if not specified, no password is required.
-#
-WebServerPassword=
-
-
-
-#############################################################################
 ## Experimental Options - Modify at your own risk
 #############################################################################
 
@@ -240,11 +218,9 @@
 ExpLosChecksMap=1
 
 
-
 #############################################################################
 ## Obsolete options - do not modify these
 #############################################################################
-
 #
 # Keyfile - contains crypto constants for a given client version
 #
@@ -263,4 +239,3 @@
 #   Has no effect in multithread mode
 #
 SelectTimeout=0
-



From austin at berlios.de  Tue Sep  6 13:01:02 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 13:01:02 +0200
Subject: [Poldistro-svn] r82 - trunk/096/pkg/other/hooks
Message-ID: <200509061101.j86B12d5008491@sheep.berlios.de>

Author: austin
Date: 2005-09-06 13:00:27 +0200 (Tue, 06 Sep 2005)
New Revision: 82

Modified:
   trunk/096/pkg/other/hooks/uoclient.cfg
Log:
Support for 2.0.0b on port 5002 and no encryption on 5003.

Modified: trunk/096/pkg/other/hooks/uoclient.cfg
===================================================================
--- trunk/096/pkg/other/hooks/uoclient.cfg	2005-09-06 10:54:07 UTC (rev 81)
+++ trunk/096/pkg/other/hooks/uoclient.cfg	2005-09-06 11:00:27 UTC (rev 82)
@@ -1,9 +1,27 @@
+////////////////////////////////
+// General controls which attributes/vitals are mapped to the client's status window.
+// 
+// Layout:
+//	<onstatus> <attrib/vital>
+//
+// Valid <onstatus> constants are...
+//
+//     Strength, Intelligence, Dexterity
+//     Hits, Stamina, Mana
+//
+// Valid <attrib> constants are any valid attribute name from attributes.cfg
+// Valid <vital> constants are specified in vitals.cfg
+////////////////////////////////
 General
 {
+	// Left side of Status Window (Attributes)
+	//
 	Strength	Strength
 	Intelligence	Intelligence
 	Dexterity	Dexterity
 
+	// Right side of Status Window (Vitals)
+	//
 	Hits		Life
 	Mana		Mana
 	Stamina		Stamina
@@ -23,3 +41,25 @@
     EnableFlowControlPackets    0
 }
 
+
+////////////////////////////////
+// Listener elems control which ports control which encryption protocols.
+// 
+// Listener
+// {
+//	Port            xxxx
+//	Encryption      1.26.4 / 2.0.0 / none
+// }
+////////////////////////////////
+Listener
+{
+	// Enabled mostly for development purposes
+	// Will be removed when distro goes final
+	Port		5002
+	Encryption	2.0.0
+}
+Listener
+{
+	Port		5003
+	Encryption	none
+}



From panosl at berlios.de  Tue Sep  6 13:09:09 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Tue, 6 Sep 2005 13:09:09 +0200
Subject: [Poldistro-svn] r83 - trunk/096/pkg/systems/attributes/config
Message-ID: <200509061109.j86B99IY014079@sheep.berlios.de>

Author: panosl
Date: 2005-09-06 13:09:07 +0200 (Tue, 06 Sep 2005)
New Revision: 83

Modified:
   trunk/096/pkg/systems/attributes/config/uoclient.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/config/uoclient.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/uoclient.cfg	2005-09-06 11:00:27 UTC (rev 82)
+++ trunk/096/pkg/systems/attributes/config/uoclient.cfg	2005-09-06 11:09:07 UTC (rev 83)
@@ -1,4 +1,4 @@
-# $Id: uoclient.cfg,v 1.1 2004/03/16 14:05:46 folko Exp $
+# $$
 #
 # Purpose:
 # Maps vital and attribute names onto UO Client idioms for character status.



From panosl at berlios.de  Tue Sep  6 13:13:17 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Tue, 6 Sep 2005 13:13:17 +0200
Subject: [Poldistro-svn] r84 - trunk/096/batchfiles
Message-ID: <200509061113.j86BDH6W017065@sheep.berlios.de>

Author: panosl
Date: 2005-09-06 13:13:15 +0200 (Tue, 06 Sep 2005)
New Revision: 84

Modified:
   trunk/096/batchfiles/ecompile.bat
Log:


Modified: trunk/096/batchfiles/ecompile.bat
===================================================================
--- trunk/096/batchfiles/ecompile.bat	2005-09-06 11:09:07 UTC (rev 83)
+++ trunk/096/batchfiles/ecompile.bat	2005-09-06 11:13:15 UTC (rev 84)
@@ -15,7 +15,7 @@
 ECHO Command        Purpose
 ECHO  [ a ] - Compile a specific script.
 ECHO  [ b ] - Compile all .src scripts.
-ECHO  [ c ] - Compile all scripts and output to POL\ecompile.txt
+ECHO  [ c ] - Compile all scripts and output to POL\ecompile.log
 ECHO.
 ECHO  [ x ] - Quit
 
@@ -48,7 +48,7 @@
 
 REM -- COMPILE_ALL_SCRIPTS_OPTXT() FUNCTION
 :COMPILE_ALL_SCRIPTS_OPTXT()
-%ECOMPILE_PATH% -b -r >ecompile.txt
+%ECOMPILE_PATH% -b -r >ecompile.log
 GOTO RETURN_TO_MENU()
 
 REM -- QUIT FUNCTION



From austin at berlios.de  Tue Sep  6 13:34:13 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 13:34:13 +0200
Subject: [Poldistro-svn] r85 - trunk/096
Message-ID: <200509061134.j86BYDOC027023@sheep.berlios.de>

Author: austin
Date: 2005-09-06 13:34:10 +0200 (Tue, 06 Sep 2005)
New Revision: 85

Modified:
   trunk/096/starthere.bat
Log:


Modified: trunk/096/starthere.bat
===================================================================
--- trunk/096/starthere.bat	2005-09-06 11:13:15 UTC (rev 84)
+++ trunk/096/starthere.bat	2005-09-06 11:34:10 UTC (rev 85)
@@ -17,7 +17,7 @@
 ECHO  [ c ] - Cleanup menu         (File removal tools)
 ECHO.
 ECHO  [ d ] - Start POL.exe        (Returns to menu on exit)
-ECHO  [ e ] - Keep POL.exe running (Restarts when it exits use CTRL+C to stop)
+ECHO  [ e ] - Keep POL.exe running (Restarts when it exits. Use CTRL+C to stop)
 ECHO.
 ECHO  [ x ] - Quit
 



From austin at berlios.de  Tue Sep  6 15:28:59 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 15:28:59 +0200
Subject: [Poldistro-svn] r86 - trunk/096/pkg/mobiles/ai_brain/commands/gm
Message-ID: <200509061328.j86DSxOI006831@sheep.berlios.de>

Author: austin
Date: 2005-09-06 15:28:59 +0200 (Tue, 06 Sep 2005)
New Revision: 86

Modified:
   trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src
Log:
Compiles now. Changed the highly ambiguous "{}" to "array{}" so it wont break with future builds of POL.

Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src	2005-09-06 11:34:10 UTC (rev 85)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src	2005-09-06 13:28:59 UTC (rev 86)
@@ -6,21 +6,20 @@
 include "include/messages";
 include "include/localization";
 
-
 program command_puttosleep(who)
-	var mobile; := target(who);
+	var mobile := target(who);
 
 	SendMessage(who, MSG_TARGET_MOB, {}, MSG_COMMAND);
 
 	if ((mobile := Target(who, TGTOPT_NOCHECK_LOS)) == 0)
-		SendMessage(who, MSG_CANCELLED, {}, MSG_COMMAND);
+		SendMessage(who, MSG_CANCELLED, array{}, MSG_COMMAND);
 	endif
 
 	if (!mobile.IsA(POLCLASS_NPC))
-		SendMessage(who, MSG_NO_MOB, {}, MSG_COMMAND);
+		SendMessage(who, MSG_NO_MOB, array{}, MSG_COMMAND);
 		return 0;
 	else
 		AI_Sleep(mobile);
-		SendMessage(who, MSG_DONE, {}, MSG_COMMAND);
+		SendMessage(who, MSG_DONE, array{}, MSG_COMMAND);
 	endif
 endprogram
\ No newline at end of file



From austin at berlios.de  Tue Sep  6 16:41:24 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 16:41:24 +0200
Subject: [Poldistro-svn] r87 - trunk/096/pkg/mobiles/ai_brain
Message-ID: <200509061441.j86EfOBG015415@sheep.berlios.de>

Author: austin
Date: 2005-09-06 16:41:23 +0200 (Tue, 06 Sep 2005)
New Revision: 87

Modified:
   trunk/096/pkg/mobiles/ai_brain/brain.src
Log:
Sleepmode support - Still needs to be tested.

Modified: trunk/096/pkg/mobiles/ai_brain/brain.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-06 13:28:59 UTC (rev 86)
+++ trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-06 14:41:23 UTC (rev 87)
@@ -19,9 +19,11 @@
 
 include "include/sysEvent";
 include ":ai_brain:include/braincore/error";
+include ":ai_brain:include/braincore/cycleScript";
 include ":ai_brain:include/braincore/eventProcessor";
 include ":ai_brain:include/braincore/movement";
 include ":ai_brain:include/braincore/setup";
+include ":ai_brain:include/braincore/sleepMode";
 include ":ai_brain:include/eventid";
 include ":ai_brain:include/npcCommands";
 include ":ai_brain:include/npcNerves";
@@ -34,6 +36,7 @@
 var npc := Self();
 var idle_ticks := 0;
 var sleep_mode := 0;
+
 var g_settings := dictionary; //"setting name"->value
 var g_scripts := dictionary; // "script type"->value{.flags, .script}
 var g_nerves := dictionary; // "nerve name"->value{.flags, .pid}
@@ -47,7 +50,27 @@
 	StartupScripts();
 	
 	while ( npc )
-		var ev := Wait_For_Event(g_settings["cycle_wait"]);
-		ProcessEvent(ev);
+		var ev;
+		if ( !sleep_mode )
+			RunCycleScript();			
+			ev := Wait_For_Event(g_settings["cycle_wait"]);
+		else
+			ev := Wait_For_Event(g_settings["sleep_wait"]);
+		endif
+		
+		if ( !ev )
+			if ( !sleep_mode )
+				idle_ticks:=idle_ticks+1;
+			endif
+			if ( ShouldSleep() )
+				EnterSleepMode();
+			endif
+		else
+			if ( ev.WakeUp != NOWAKE )
+				LeaveSleepMode();
+			endif
+			
+			ProcessEvent(ev);
+		endif
 	endwhile
 endprogram



From austin at berlios.de  Tue Sep  6 16:42:37 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 6 Sep 2005 16:42:37 +0200
Subject: [Poldistro-svn] r88 - in trunk/096/pkg/mobiles/ai_brain/include: . braincore
Message-ID: <200509061442.j86EgbHs015479@sheep.berlios.de>

Author: austin
Date: 2005-09-06 16:42:34 +0200 (Tue, 06 Sep 2005)
New Revision: 88

Added:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/sleepMode.inc
Modified:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
Log:
Cyclescript support, sleep mode support. Array{} properly formatted in StartNerve() calls.

Added: trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc	2005-09-06 14:41:23 UTC (rev 87)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc	2005-09-06 14:42:34 UTC (rev 88)
@@ -0,0 +1,33 @@
+/*===============================================================
+* Current Version
+* CYCLESCRIPT.INC - v1.0
+* Updated 9/6/2005 7:13AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+/*
+ * RunCycleScript()
+ *
+ * Purpose
+ * Runs the cycle script if one is present.
+ *
+ * Parameters
+  *
+ * Return value
+ * Always returns 1
+ *
+ */
+function RunCycleScript()
+	if ( g_scripts["Cycle"] )
+		var script := Run_Script_To_Completion(g_scripts["Cycle"], array{npc, g_settings, g_scripts, g_nerves});
+		
+		if ( script.errortext )
+			NPC_ErrorSysLog(npc, "Error - RunCycleScript() :: "+script.errortext);
+		endif
+	endif
+	
+	return 1;
+endfunction

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-06 14:41:23 UTC (rev 87)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-06 14:42:34 UTC (rev 88)
@@ -50,7 +50,7 @@
 			if ( g_scripts.Exists("EnterArea") )
 				var process := GetNerveProcess(npc, "EnterArea", g_nerves);
 				if ( !process )
-					StartNerve(npc, "EnterArea", g_scripts["EnterArea"].script, {event, g_settings, g_scripts}, g_scripts["EnterArea"].flags, g_nerves);
+					StartNerve(npc, "EnterArea", g_scripts["EnterArea"].script, array{event, g_settings, g_scripts}, g_scripts["EnterArea"].flags, g_nerves);
 				else
 					process.SendEvent(event);
 				endif
@@ -63,7 +63,7 @@
 			if ( g_scripts.Exists("LeftArea") )
 				var process := GetNerveProcess(npc, "LeftArea", g_nerves);
 				if ( !process )
-					StartNerve(npc, "LeftArea", g_scripts["LeftArea"].script, {event, g_settings, g_scripts}, g_scripts["LeftArea"].flags, g_nerves);
+					StartNerve(npc, "LeftArea", g_scripts["LeftArea"].script, array{event, g_settings, g_scripts}, g_scripts["LeftArea"].flags, g_nerves);
 				else
 					process.SendEvent(event);
 				endif
@@ -76,7 +76,7 @@
 			if ( g_scripts.Exists("ItemGiven") )
 				var process := GetNerveProcess(npc, "ItemGiven", g_nerves);
 				if ( !process )
-					StartNerve(npc, "ItemGiven", g_scripts["ItemGiven"].script, {event, g_settings, g_scripts}, g_scripts["ItemGiven"].flags, g_nerves);
+					StartNerve(npc, "ItemGiven", g_scripts["ItemGiven"].script, array{event, g_settings, g_scripts}, g_scripts["ItemGiven"].flags, g_nerves);
 				else
 					process.SendEvent(event);
 				endif
@@ -94,7 +94,7 @@
 				if ( (event.source).ISA(POLCLASS_MOBILE) )
 					var process := GetNerveProcess(npc, "Combat", g_nerves);
 					if ( !process )
-						StartNerve(npc, "Combat", g_scripts["Combat"].script, {event, g_settings, g_scripts}, g_scripts["Combat"].flags, g_nerves);
+						StartNerve(npc, "Combat", g_scripts["Combat"].script, array{event, g_settings, g_scripts}, g_scripts["Combat"].flags, g_nerves);
 					else
 						process.SendEvent(event);
 					endif
@@ -109,7 +109,7 @@
 			if ( g_scripts.Exists("Disengaged") )
 				var process := GetNerveProcess(npc, "Disengaged", g_nerves);
 				if ( !process )
-					StartNerve(npc, "Disengaged", g_scripts["Disengaged"].script, {event, g_settings, g_scripts}, g_scripts["Disengaged"].flags, g_nerves);
+					StartNerve(npc, "Disengaged", g_scripts["Disengaged"].script, array{event, g_settings, g_scripts}, g_scripts["Disengaged"].flags, g_nerves);
 				else
 					process.SendEvent(event);
 				endif
@@ -127,7 +127,7 @@
 			if( g_scripts.Exists("Listen") )
 				var process := GetNerveProcess(npc, "Listen", g_nerves);
 				if ( !process )
-					StartNerve(npc, "Listen", g_scripts["Listen"].script, {event, g_settings, g_scripts}, g_scripts["Listen"].flags, g_nerves);
+					StartNerve(npc, "Listen", g_scripts["Listen"].script, array{event, g_settings, g_scripts}, g_scripts["Listen"].flags, g_nerves);
 				else
 					process.SendEvent(event);
 				endif
@@ -142,7 +142,7 @@
 				if ( Distance(event.source, npc) <= g_settings["dbl_click_range"] )
 					var process := GetNerveProcess(npc, "DblClick", g_nerves);
 					if ( !process )
-						StartNerve(npc, "DblClick", g_scripts["DblClick"].script, {event, g_settings, g_scripts}, g_scripts["DblClick"].flags, g_nerves);
+						StartNerve(npc, "DblClick", g_scripts["DblClick"].script, array{event, g_settings, g_scripts}, g_scripts["DblClick"].flags, g_nerves);
 					else
 						process.SendEvent(event);
 					endif
@@ -164,7 +164,7 @@
 			if ( g_scripts.Exists("Merchant") )
 				var process := GetNerveProcess(npc, "Merchant", g_nerves);
 				if ( !process )
-					StartNerve(npc, "Merchant", g_scripts["Merchant"].script, {event, g_settings, g_scripts}, g_scripts["Merchant"].flags, g_nerves);
+					StartNerve(npc, "Merchant", g_scripts["Merchant"].script, array{event, g_settings, g_scripts}, g_scripts["Merchant"].flags, g_nerves);
 				else
 					process.SendEvent(event);
 				endif
@@ -178,7 +178,7 @@
 			if ( g_scripts.Exists("ItemGiven") )
 				var process := GetNerveProcess(npc, "ItemGiven", g_nerves);
 				if ( !process )
-					StartNerve(npc, "ItemGiven", g_scripts["ItemGiven"].script, {event, g_settings, g_scripts}, g_scripts["ItemGiven"].flags, g_nerves);
+					StartNerve(npc, "ItemGiven", g_scripts["ItemGiven"].script, array{event, g_settings, g_scripts}, g_scripts["ItemGiven"].flags, g_nerves);
 				else
 					process.SendEvent(event);
 				endif
@@ -279,7 +279,7 @@
 			if ( g_scripts.Exists("Virtual") )
 				var process := GetNerveProcess(npc, "Virtual", g_nerves);
 				if ( !process )
-					StartNerve(npc, "Virtual", g_scripts["Virtual"].script, {event, g_settings, g_scripts}, g_scripts["Virtual"].flags, g_nerves);
+					StartNerve(npc, "Virtual", g_scripts["Virtual"].script, array{event, g_settings, g_scripts}, g_scripts["Virtual"].flags, g_nerves);
 				else
 					process.SendEvent(event);
 				endif

Added: trunk/096/pkg/mobiles/ai_brain/include/braincore/sleepMode.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/sleepMode.inc	2005-09-06 14:41:23 UTC (rev 87)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/sleepMode.inc	2005-09-06 14:42:34 UTC (rev 88)
@@ -0,0 +1,82 @@
+/*===============================================================
+* Current Version
+* SLEEPMODE.INC - v1.0
+* Updated 9/6/2005 6:35AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+/*
+ * EnterSleepMode()
+ *
+ * Purpose
+ * Starts the sleep script if the npc has one.
+ *
+ * Parameters
+  *
+ * Return value
+ * Always returns 1
+ *
+ */
+function EnterSleepMode()
+	if ( !sleep_mode )
+		if ( g_scripts["Sleep"] )
+			var process := GetNerveProcess(npc, "Sleep", g_nerves);
+			if ( !process )
+				StartNerve(npc, "Sleep", g_scripts["Sleep"].script, array{g_settings, g_scripts, g_nerves}, g_scripts["Sleep"].flags, g_nerves);
+			endif
+		endif
+					
+		//The brain is now in sleep mode, isnt it cute?
+		sleep_mode := 1;
+	endif
+	
+	return 1;
+endfunction
+
+/*
+ * LeaveSleepMode()
+ *
+ * Purpose
+ * Brings the npc out of sleep mode.
+ *
+ * Parameters
+  *
+ * Return value
+ * Always returns 1
+ *
+ */
+function LeaveSleepMode()
+	StopNerve(npc, "Sleep", g_nerves);
+	idle_ticks := 0;
+	sleep_mode := 1;
+endfunction
+
+/*
+ * ShouldSleep()
+ *
+ * Purpose
+ * Determines if it is time to sleep
+ *
+ * Parameters
+ *
+ * Return Value
+ * Returns 0 or 1
+ *
+ */
+function ShouldSleep()
+	if ( sleep_mode )
+		//Already asleep
+		return 0;
+	elseif ( Events_Waiting() )
+		//Events are waiting to process.
+		return 0;
+	elseif ( idle_ticks < g_settings["idle_ticks"] )
+		//Not enough idle ticks have gone by yet.
+		return 0;
+	endif
+	
+	return 1;
+endfunction

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-06 14:41:23 UTC (rev 87)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-06 14:42:34 UTC (rev 88)
@@ -39,8 +39,8 @@
 	if ( CInt(settings.exists("cycle_wait")) <= 0 )
 		settings["cycle_wait"] := 10;
 	endif
-	if ( CInt(settings.exists("sleep_time")) <= 0 )
-		settings["sleep_time"] := 1024;
+	if ( CInt(settings.exists("sleep_wait")) <= 0 )
+		settings["sleep_wait"] := 1024;
 	endif
 	if ( CInt(settings.exists("idle_ticks")) <= 0 )
 		settings["idle_ticks"] := 5;



From austin at berlios.de  Wed Sep  7 07:50:05 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 7 Sep 2005 07:50:05 +0200
Subject: [Poldistro-svn] r89 - in trunk/096: . batchfiles
Message-ID: <200509070550.j875o5AW005193@sheep.berlios.de>

Author: austin
Date: 2005-09-07 07:49:48 +0200 (Wed, 07 Sep 2005)
New Revision: 89

Modified:
   trunk/096/batchfiles/cleanup.bat
   trunk/096/batchfiles/ecompile.bat
   trunk/096/batchfiles/realmgen.bat
   trunk/096/starthere.bat
Log:
Added case ignoring

Modified: trunk/096/batchfiles/cleanup.bat
===================================================================
--- trunk/096/batchfiles/cleanup.bat	2005-09-06 14:42:34 UTC (rev 88)
+++ trunk/096/batchfiles/cleanup.bat	2005-09-07 05:49:48 UTC (rev 89)
@@ -22,14 +22,14 @@
 SET /p CMD=Command:
 
 SET REMOVE_TYPE=
-IF "%CMD%" == "a" SET REMOVE_TYPE=*.ecl
-IF "%CMD%" == "b" SET REMOVE_TYPE=*.bak
-IF "%CMD%" == "c" SET REMOVE_TYPE=*.dep
-IF "%CMD%" == "d" SET REMOVE_TYPE=*.log
-IF "%CMD%" == "e" SET REMOVE_TYPE=*.lst
-IF "%CMD%" == "f" SET REMOVE_TYPE=*.dbg
-IF "%CMD%" == "g" SET REMOVE_TYPE=*.dbg.txt
-IF "%CMD%" == "x" GOTO :QUIT()
+IF /i "%CMD%" == "a" SET REMOVE_TYPE=*.ecl
+IF /i "%CMD%" == "b" SET REMOVE_TYPE=*.bak
+IF /i "%CMD%" == "c" SET REMOVE_TYPE=*.dep
+IF /i "%CMD%" == "d" SET REMOVE_TYPE=*.log
+IF /i "%CMD%" == "e" SET REMOVE_TYPE=*.lst
+IF /i "%CMD%" == "f" SET REMOVE_TYPE=*.dbg
+IF /i "%CMD%" == "g" SET REMOVE_TYPE=*.dbg.txt
+IF /i "%CMD%" == "x" GOTO :QUIT()
 
 IF NOT "%REMOVE_TYPE%"=="" GOTO REMOVE()
 

Modified: trunk/096/batchfiles/ecompile.bat
===================================================================
--- trunk/096/batchfiles/ecompile.bat	2005-09-06 14:42:34 UTC (rev 88)
+++ trunk/096/batchfiles/ecompile.bat	2005-09-07 05:49:48 UTC (rev 89)
@@ -21,10 +21,10 @@
 
 SET /p CMD=Command:
 
-IF "%CMD%" == "a" GOTO :COMPILE_SCRIPT()
-IF "%CMD%" == "b" GOTO :COMPILE_ALL_SCRIPTS()
-IF "%CMD%" == "c" GOTO :COMPILE_ALL_SCRIPTS_OPTXT()
-IF "%CMD%" == "x" GOTO :QUIT()
+IF /i "%CMD%" == "a" GOTO :COMPILE_SCRIPT()
+IF /i "%CMD%" == "b" GOTO :COMPILE_ALL_SCRIPTS()
+IF /i "%CMD%" == "c" GOTO :COMPILE_ALL_SCRIPTS_OPTXT()
+IF /i "%CMD%" == "x" GOTO :QUIT()
 
 ECHO.
 ECHO Invalid command.

Modified: trunk/096/batchfiles/realmgen.bat
===================================================================
--- trunk/096/batchfiles/realmgen.bat	2005-09-06 14:42:34 UTC (rev 88)
+++ trunk/096/batchfiles/realmgen.bat	2005-09-07 05:49:48 UTC (rev 89)
@@ -28,16 +28,16 @@
 
 SET /p CMD=Command:
 
-IF "%CMD%" == "a" GOTO :MULTIS.CFG()
-IF "%cMD%" == "b" GOTO :TILES.CFG()
-IF "%cMD%" == "c" GOTO :LANDTILES.CFG()
-IF "%cMD%" == "d" GOTO :ALLCONFIGS()
-IF "%CMD%" == "e" GOTO :REALM_BRITTANIA()
-IF "%CMD%" == "f" GOTO :REALM_BRITTANIA_ALT()
-IF "%CMD%" == "g" GOTO :REALM_ILSHENAR()
-IF "%CMD%" == "h" GOTO :REALM_MALAS()
-IF "%CMD%" == "i" GOTO :REALM_TOKUNO()
-IF "%CMD%" == "j" GOTO :BUILD_ALL_REALMS()
+IF /i "%CMD%" == "a" GOTO :MULTIS.CFG()
+IF /i "%cMD%" == "b" GOTO :TILES.CFG()
+IF /i "%cMD%" == "c" GOTO :LANDTILES.CFG()
+IF /i "%cMD%" == "d" GOTO :ALLCONFIGS()
+IF /i "%CMD%" == "e" GOTO :REALM_BRITTANIA()
+IF /i "%CMD%" == "f" GOTO :REALM_BRITTANIA_ALT()
+IF /i "%CMD%" == "g" GOTO :REALM_ILSHENAR()
+IF /i "%CMD%" == "h" GOTO :REALM_MALAS()
+IF /i "%CMD%" == "i" GOTO :REALM_TOKUNO()
+IF /i "%CMD%" == "j" GOTO :BUILD_ALL_REALMS()
 
 IF "%CMD%" == "x" GOTO :QUIT()
 

Modified: trunk/096/starthere.bat
===================================================================
--- trunk/096/starthere.bat	2005-09-06 14:42:34 UTC (rev 88)
+++ trunk/096/starthere.bat	2005-09-07 05:49:48 UTC (rev 89)
@@ -23,12 +23,12 @@
 
 SET /p CMD=Command:
 
-IF "%CMD%" == "a" GOTO :REALM_GEN()
-IF "%CMD%" == "b" GOTO :ECOMPILE()
-IF "%CMD%" == "c" GOTO :CLEANUP()
-IF "%CMD%" == "d" GOTO :POL()
-IF "%CMD%" == "e" GOTO :POL_LOOP()
-IF "%CMD%" == "x" GOTO :QUIT()
+IF /i "%CMD%" == "a" GOTO :REALM_GEN()
+IF /i "%CMD%" == "b" GOTO :ECOMPILE()
+IF /i "%CMD%" == "c" GOTO :CLEANUP()
+IF /i "%CMD%" == "d" GOTO :POL()
+IF /i "%CMD%" == "e" GOTO :POL_LOOP()
+IF /i "%CMD%" == "x" GOTO :QUIT()
 
 ECHO.
 ECHO Invalid command.



From panosl at berlios.de  Wed Sep  7 15:34:47 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Wed, 7 Sep 2005 15:34:47 +0200
Subject: [Poldistro-svn] r90 - trunk/096/pkg/other/hooks
Message-ID: <200509071334.j87DYlcJ004599@sheep.berlios.de>

Author: panosl
Date: 2005-09-07 15:34:47 +0200 (Wed, 07 Sep 2005)
New Revision: 90

Modified:
   trunk/096/pkg/other/hooks/uoclient.cfg
Log:


Modified: trunk/096/pkg/other/hooks/uoclient.cfg
===================================================================
--- trunk/096/pkg/other/hooks/uoclient.cfg	2005-09-07 05:49:48 UTC (rev 89)
+++ trunk/096/pkg/other/hooks/uoclient.cfg	2005-09-07 13:34:47 UTC (rev 90)
@@ -1,60 +1,74 @@
-////////////////////////////////
-// General controls which attributes/vitals are mapped to the client's status window.
-// 
-// Layout:
-//	<onstatus> <attrib/vital>
-//
-// Valid <onstatus> constants are...
-//
-//     Strength, Intelligence, Dexterity
-//     Hits, Stamina, Mana
-//
-// Valid <attrib> constants are any valid attribute name from attributes.cfg
-// Valid <vital> constants are specified in vitals.cfg
-////////////////////////////////
+# $$
+#
+# Purpose:
+# Maps vital and attribute names onto UO Client idioms for character status.
+#
+# Structure:
+# General
+# {
+#   Strength        (string Strength)
+#   Intelligence    (string Intelligence)
+#   Dexterity       (string Dexterity)
+#
+#   Hits            (string Life)
+#   Mana            (string Mana)
+#   Stamina         (string Stamina)
+#   MaxSkillID      (integer maximum UO client skill ID)
+# }
+#
+# Protocol
+# {
+#   # EnableFlowControlPackets: use the 0x33 (0x00 / 0x01) pause/restart packets.
+#   # Though OSI seems to no longer send these packets, they seem to help with smoothness,
+#   # particularly with boat movement.
+#   # NOTE: causes clients 4.0.0e and newer to fail login
+#   EnableFlowControlPackets    1
+# }
+#
+# Listener
+# {
+#   Port (int port number 1024..65535)
+#   Encryption (string encryption type)
+# }
+#
+# Explanation:
+# The left-hand-side "Strength", "Intelligence", and "Dexterity" are Attribute names that
+# MUST be defined in attributes.cfg.
+# The right-hand-side "Life", "Mana", and "Stamina" are Vital names that
+# MUST be defined in vitals.cfg.
+# MaxSkillID allows you to use new client skills, but setting it too high can crash older clients.
+# You must define skills.cfg entries for each skillID up to MaxSkillID (default 51).
+# The Protocol and Listener sections are optional.
+# Each Listener section allows you to listen for different client encryption types on different ports.
+# This means you can listen for "1.26.4" clients on port 5003 and "ignition" clients on port 5555.
+# Valid encryption types are found in the pol.cfg section. If you use Listeners set ListenPort
+# in pol.cfg to 0.
+
 General
 {
-	// Left side of Status Window (Attributes)
-	//
-	Strength	Strength
-	Intelligence	Intelligence
-	Dexterity	Dexterity
+	Strength       Strength
+	Intelligence   Intelligence
+	Dexterity      Dexterity
 
-	// Right side of Status Window (Vitals)
-	//
-	Hits		Life
-	Mana		Mana
-	Stamina		Stamina
+	Hits           Hits
+	Mana           Mana
+	Stamina        Stamina
 
-	MaxSkillID	51
+	MaxSkillID     51
 }
 
+
 Protocol
 {
-    #
-    # EnableFlowControlPackets: use the 0x33 (0x00 / 0x01) pause/restart packets.
-    # Though OSI seems to no longer send these packets, they seem to help with smoothness,
-    # particularly with boat movement.
-    # Note: clients 4.0.0e and newer do not like the uoclient.cfg setting 
-    #  EnableControlFlowPackets enabled, and causes login to fail. No way around this it
-    #  seems.
-    EnableFlowControlPackets    0
+	EnableFlowControlPackets 0
 }
 
 
-////////////////////////////////
-// Listener elems control which ports control which encryption protocols.
-// 
-// Listener
-// {
-//	Port            xxxx
-//	Encryption      1.26.4 / 2.0.0 / none
-// }
-////////////////////////////////
 Listener
 {
-	// Enabled mostly for development purposes
-	// Will be removed when distro goes final
+	#
+	# Enabled mostly for development purposes
+	# Will be removed when distro goes final
 	Port		5002
 	Encryption	2.0.0
 }



From austin at berlios.de  Wed Sep  7 16:14:25 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 7 Sep 2005 16:14:25 +0200
Subject: [Poldistro-svn] r91 - trunk/096/pkg/mobiles/ai_brain/include/braincore
Message-ID: <200509071414.j87EEPY6017801@sheep.berlios.de>

Author: austin
Date: 2005-09-07 16:14:25 +0200 (Wed, 07 Sep 2005)
New Revision: 91

Added:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc
Removed:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/sleepMode.inc
Log:


Copied: trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc (from rev 89, trunk/096/pkg/mobiles/ai_brain/include/braincore/sleepMode.inc)

Deleted: trunk/096/pkg/mobiles/ai_brain/include/braincore/sleepMode.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/sleepMode.inc	2005-09-07 13:34:47 UTC (rev 90)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/sleepMode.inc	2005-09-07 14:14:25 UTC (rev 91)
@@ -1,82 +0,0 @@
-/*===============================================================
-* Current Version
-* SLEEPMODE.INC - v1.0
-* Updated 9/6/2005 6:35AM
-*
-* -- Revision v1.0 --
-* Austin:
-*  Created include file
-===============================================================*/
-
-/*
- * EnterSleepMode()
- *
- * Purpose
- * Starts the sleep script if the npc has one.
- *
- * Parameters
-  *
- * Return value
- * Always returns 1
- *
- */
-function EnterSleepMode()
-	if ( !sleep_mode )
-		if ( g_scripts["Sleep"] )
-			var process := GetNerveProcess(npc, "Sleep", g_nerves);
-			if ( !process )
-				StartNerve(npc, "Sleep", g_scripts["Sleep"].script, array{g_settings, g_scripts, g_nerves}, g_scripts["Sleep"].flags, g_nerves);
-			endif
-		endif
-					
-		//The brain is now in sleep mode, isnt it cute?
-		sleep_mode := 1;
-	endif
-	
-	return 1;
-endfunction
-
-/*
- * LeaveSleepMode()
- *
- * Purpose
- * Brings the npc out of sleep mode.
- *
- * Parameters
-  *
- * Return value
- * Always returns 1
- *
- */
-function LeaveSleepMode()
-	StopNerve(npc, "Sleep", g_nerves);
-	idle_ticks := 0;
-	sleep_mode := 1;
-endfunction
-
-/*
- * ShouldSleep()
- *
- * Purpose
- * Determines if it is time to sleep
- *
- * Parameters
- *
- * Return Value
- * Returns 0 or 1
- *
- */
-function ShouldSleep()
-	if ( sleep_mode )
-		//Already asleep
-		return 0;
-	elseif ( Events_Waiting() )
-		//Events are waiting to process.
-		return 0;
-	elseif ( idle_ticks < g_settings["idle_ticks"] )
-		//Not enough idle ticks have gone by yet.
-		return 0;
-	endif
-	
-	return 1;
-endfunction



From austin at berlios.de  Thu Sep  8 13:48:51 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 8 Sep 2005 13:48:51 +0200
Subject: [Poldistro-svn] r92 - trunk/096/pkg/commands/admin
Message-ID: <200509081148.j88BmpqV013691@sheep.berlios.de>

Author: austin
Date: 2005-09-08 13:48:51 +0200 (Thu, 08 Sep 2005)
New Revision: 92

Removed:
   trunk/096/pkg/commands/admin/npcwipe.src
Log:
npcwipe in commands package is getting replaced by the one in the ai_brain package.

Deleted: trunk/096/pkg/commands/admin/npcwipe.src
===================================================================
--- trunk/096/pkg/commands/admin/npcwipe.src	2005-09-07 14:14:25 UTC (rev 91)
+++ trunk/096/pkg/commands/admin/npcwipe.src	2005-09-08 11:48:51 UTC (rev 92)
@@ -1,19 +0,0 @@
-use uo;
-use os;
-include "include/attributes";
-
-program npcwipe(character)
-  set_critical(0);
-  var x, y, z;
-  for(x:=6144; x>16; x:=x -32) //FIXME realm
-    for(y:=16; y<4096; y:=y+32)
-      for(z:=-60; z<=60; z:=z+30)
-        foreach npc in ListMobilesNearLocation(x, y, z, 32, character.realm)
-          SetObjProperty(npc, "guardkill", 1);
-          ApplyRawDamage(npc, GetHp(npc) + 100);
-        endforeach
-      endfor
-    endfor
-  endfor
-  SendSysMessage(character, "Finished wiping npcs.");
-endprogram
\ No newline at end of file



From austin at berlios.de  Thu Sep  8 14:10:14 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 8 Sep 2005 14:10:14 +0200
Subject: [Poldistro-svn] r93 - in trunk/096/pkg/mobiles/ai_brain: . commands/gm include/braincore
Message-ID: <200509081210.j88CAEpi015866@sheep.berlios.de>

Author: austin
Date: 2005-09-08 14:10:13 +0200 (Thu, 08 Sep 2005)
New Revision: 93

Modified:
   trunk/096/pkg/mobiles/ai_brain/brain.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/sendevent.src
   trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc
Log:
Sleeping works yaaaaaay

Modified: trunk/096/pkg/mobiles/ai_brain/brain.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-08 11:48:51 UTC (rev 92)
+++ trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-08 12:10:13 UTC (rev 93)
@@ -23,7 +23,7 @@
 include ":ai_brain:include/braincore/eventProcessor";
 include ":ai_brain:include/braincore/movement";
 include ":ai_brain:include/braincore/setup";
-include ":ai_brain:include/braincore/sleepMode";
+include ":ai_brain:include/braincore/sleep";
 include ":ai_brain:include/eventid";
 include ":ai_brain:include/npcCommands";
 include ":ai_brain:include/npcNerves";
@@ -37,6 +37,8 @@
 var idle_ticks := 0;
 var sleep_mode := 0;
 
+//Would be nice in future pol releases if these could be handled
+//as references rather than copies within the brain and nerves.
 var g_settings := dictionary; //"setting name"->value
 var g_scripts := dictionary; // "script type"->value{.flags, .script}
 var g_nerves := dictionary; // "nerve name"->value{.flags, .pid}

Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src	2005-09-08 11:48:51 UTC (rev 92)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src	2005-09-08 12:10:13 UTC (rev 93)
@@ -5,7 +5,7 @@
 
 include ":gumps:include/requestgump";
 
-program npcwipe(who, text)
+program cmd_npcwipe(who, text)
 	Set_Priority(100);
 	
 	var realm_name := RequestGump(who, "Enter the realm name to perform the wipe on.", "", who.realm);

Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src	2005-09-08 11:48:51 UTC (rev 92)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src	2005-09-08 12:10:13 UTC (rev 93)
@@ -7,7 +7,7 @@
 include ":gumps:include/requestgump";
 
 program ResetAllNPCs(who)
-	var realm_name := RequestGump(who, "Enter the realm name to perform the wipe on.", "", who.realm);
+	var realm_name := RequestGump(who, "Enter the realm name to perform the AI restarts on.", "", who.realm);
 	var realm_info := Realms()[realm_name];
 	if ( !realm_info )
 		SendSysMessage(who, "Invalid realm name.");

Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/sendevent.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/sendevent.src	2005-09-08 11:48:51 UTC (rev 92)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/sendevent.src	2005-09-08 12:10:13 UTC (rev 93)
@@ -20,7 +20,7 @@
 	var targ := target(who);
 	if ( targ )
 		SendEvent(targ, ev);
-		SendSysMessage(who, "Event sent as "+TypeOf(event)+")");
+		SendSysMessage(who, "Event sent as ("+TypeOf(event)+")");
 	else
 		SendSysMessage(who, "Cancelled");
 	endif

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc	2005-09-08 11:48:51 UTC (rev 92)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc	2005-09-08 12:10:13 UTC (rev 93)
@@ -15,7 +15,7 @@
  * Runs the cycle script if one is present.
  *
  * Parameters
-  *
+ *
  * Return value
  * Always returns 1
  *

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc	2005-09-08 11:48:51 UTC (rev 92)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc	2005-09-08 12:10:13 UTC (rev 93)
@@ -1,6 +1,6 @@
 /*===============================================================
 * Current Version
-* SLEEPMODE.INC - v1.0
+* SLEEP.INC - v1.0
 * Updated 9/6/2005 6:35AM
 *
 * -- Revision v1.0 --
@@ -15,7 +15,7 @@
  * Starts the sleep script if the npc has one.
  *
  * Parameters
-  *
+ *
  * Return value
  * Always returns 1
  *
@@ -29,7 +29,7 @@
 			endif
 		endif
 					
-		//The brain is now in sleep mode, isnt it cute?
+		//The brain is now in sleep mode, isn't it cute?
 		sleep_mode := 1;
 	endif
 	
@@ -43,7 +43,7 @@
  * Brings the npc out of sleep mode.
  *
  * Parameters
-  *
+ *
  * Return value
  * Always returns 1
  *
@@ -51,7 +51,7 @@
 function LeaveSleepMode()
 	StopNerve(npc, "Sleep", g_nerves);
 	idle_ticks := 0;
-	sleep_mode := 1;
+	sleep_mode := 0;
 endfunction
 
 /*



From austin at berlios.de  Thu Sep  8 14:16:52 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 8 Sep 2005 14:16:52 +0200
Subject: [Poldistro-svn] r94 - in trunk/096/pkg/mobiles/ai_brain: . assembed assembed/testnpc include/braincore
Message-ID: <200509081216.j88CGqYU016111@sheep.berlios.de>

Author: austin
Date: 2005-09-08 14:16:52 +0200 (Thu, 08 Sep 2005)
New Revision: 94

Added:
   trunk/096/pkg/mobiles/ai_brain/assembed/
   trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/
   trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/combat.src
   trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/cycle.src
   trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/disengaged.src
   trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/doubleClick.src
   trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/enteredArea.src
   trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/goneCriminal.src
   trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/itemGiven.src
   trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/leftArea.src
   trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/listen.src
   trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/sleep.src
   trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/virtual.src
   trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
Modified:
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
Log:
Making an npc work now!

Added: trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/combat.src
===================================================================

Added: trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/cycle.src
===================================================================

Added: trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/disengaged.src
===================================================================

Added: trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/doubleClick.src
===================================================================

Added: trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/enteredArea.src
===================================================================

Added: trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/goneCriminal.src
===================================================================

Added: trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/itemGiven.src
===================================================================

Added: trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/leftArea.src
===================================================================

Added: trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/listen.src
===================================================================

Added: trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/sleep.src
===================================================================

Added: trunk/096/pkg/mobiles/ai_brain/assembed/testnpc/virtual.src
===================================================================

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-08 12:10:13 UTC (rev 93)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-08 12:16:52 UTC (rev 94)
@@ -73,10 +73,10 @@
 		// Someone has changed from blue to gray/red and was already within the ENTERED_AREA range
 		// .source	: What changed criminal status.
 		SYSEVENT_GONE_CRIMINAL:
-			if ( g_scripts.Exists("ItemGiven") )
-				var process := GetNerveProcess(npc, "ItemGiven", g_nerves);
+			if ( g_scripts.Exists("GoneCriminal") )
+				var process := GetNerveProcess(npc, "GoneCriminal", g_nerves);
 				if ( !process )
-					StartNerve(npc, "ItemGiven", g_scripts["ItemGiven"].script, array{event, g_settings, g_scripts}, g_scripts["ItemGiven"].flags, g_nerves);
+					StartNerve(npc, "GoneCriminal", g_scripts["GoneCriminal"].script, array{event, g_settings, g_scripts}, g_scripts["GoneCriminal"].flags, g_nerves);
 				else
 					process.SendEvent(event);
 				endif

Added: trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-08 12:10:13 UTC (rev 93)
+++ trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-08 12:16:52 UTC (rev 94)
@@ -0,0 +1,25 @@
+NPCTemplate TestNPC
+{
+	Name		<random>
+	Script		:ai_brain:brain
+	ObjType		0x190
+	Color		0
+	TrueColor	0
+	Gender		0
+
+	STR		1
+	INT		1
+	DEX		1
+	HITS		1
+	MANA		1
+	STAM		1
+	AR		1
+	RunSpeed	255
+	
+	AISetting	cycle_wait	10
+	AISetting	idle_ticks	5
+	AISetting	sleep_wait	1000	
+	
+	TameDifficulty		1
+	GuardIgnore		1
+}



From austin at berlios.de  Thu Sep  8 14:24:22 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 8 Sep 2005 14:24:22 +0200
Subject: [Poldistro-svn] r95 - in trunk/096/pkg/mobiles/ai_brain: . include
Message-ID: <200509081224.j88COMvn016558@sheep.berlios.de>

Author: austin
Date: 2005-09-08 14:24:22 +0200 (Thu, 08 Sep 2005)
New Revision: 95

Added:
   trunk/096/pkg/mobiles/ai_brain/complete/
Removed:
   trunk/096/pkg/mobiles/ai_brain/assembed/
Modified:
   trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
   trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
Log:


Copied: trunk/096/pkg/mobiles/ai_brain/complete (from rev 94, trunk/096/pkg/mobiles/ai_brain/assembed)

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-08 12:16:52 UTC (rev 94)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-08 12:24:22 UTC (rev 95)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * NPC_SETTINGS.INC - v1.0
-* Updated 8/30/2005 7:28AM
+* Updated 9/8/2005 5:21AM
 *
 * -- Revision v1.0 --
 * Austin:
@@ -37,13 +37,13 @@
 	endif
 
 	if ( CInt(settings.exists("cycle_wait")) <= 0 )
-		settings["cycle_wait"] := 10;
+		settings["CycleWait"] := 10;
 	endif
 	if ( CInt(settings.exists("sleep_wait")) <= 0 )
-		settings["sleep_wait"] := 1024;
+		settings["SleepWait"] := 1024;
 	endif
 	if ( CInt(settings.exists("idle_ticks")) <= 0 )
-		settings["idle_ticks"] := 5;
+		settings["IdleTicks"] := 5;
 	endif
 
 	return settings;

Modified: trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-08 12:16:52 UTC (rev 94)
+++ trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-08 12:24:22 UTC (rev 95)
@@ -16,10 +16,24 @@
 	AR		1
 	RunSpeed	255
 	
-	AISetting	cycle_wait	10
-	AISetting	idle_ticks	5
-	AISetting	sleep_wait	1000	
+	AISetting	CycleWait	i10
+	AISetting	IdleTicks	i5
+	AISetting	SleepWait	i1000
+	AISetting	ListenRange	i10
+	AISetting	AreaSize	i5
+	AISetting	HearSpeech	i1
+	AISetting	HearGhosts	i1
 	
+	AIScript	Listen		:ai_brain:complete/testNPC/listen
+	AIScript	EnterArea	:ai_brain:complete/testNPC/enterArea
+	AIScript	LeftArea	:ai_brain:complete/testNPC/leftArea
+	AIScript	GoneCriminal	:ai_brain:complete/testNPC/goneCriminal
+	AIScript	DblClick	:ai_brain:complete/testNPC/doubleClick
+	AIScript	ItemGiven	:ai_brain:complete/testNPC/itemGiven
+	AIScript	Disengaged	:ai_brain:complete/testNPC/disengaged
+	AIScript	Combat		:ai_brain:complete/testNPC/combat
+		
+	
 	TameDifficulty		1
 	GuardIgnore		1
 }



From austin at berlios.de  Thu Sep  8 15:05:52 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 8 Sep 2005 15:05:52 +0200
Subject: [Poldistro-svn] r96 - in trunk/096/pkg/mobiles/ai_brain: . complete/testnpc
Message-ID: <200509081305.j88D5qpn019623@sheep.berlios.de>

Author: austin
Date: 2005-09-08 15:05:52 +0200 (Thu, 08 Sep 2005)
New Revision: 96

Modified:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/cycle.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/goneCriminal.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src
   trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src	2005-09-08 12:24:22 UTC (rev 95)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src	2005-09-08 13:05:52 UTC (rev 96)
@@ -0,0 +1,18 @@
+use uo;
+use os;
+
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcCommands";
+
+program BrainNerve(params)
+	var npc		:= params[1];
+	var nerve_name	:= params[2];
+	var event	:= params[3];
+	var settings	:= params[4];
+	var scripts	:= params[5];
+	params := array{}; // Not needed anymore.
+	
+	while ( npc )
+		// Do stuff here
+	endwhile
+endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/cycle.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/cycle.src	2005-09-08 12:24:22 UTC (rev 95)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/cycle.src	2005-09-08 13:05:52 UTC (rev 96)
@@ -0,0 +1,18 @@
+use uo;
+use os;
+
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcCommands";
+
+program BrainNerve(params)
+	var npc		:= params[1];
+	var nerve_name	:= params[2];
+	var event	:= params[3];
+	var settings	:= params[4];
+	var scripts	:= params[5];
+	params := array{}; // Not needed anymore.
+	
+	while ( npc )
+		// Do stuff here
+	endwhile
+endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src	2005-09-08 12:24:22 UTC (rev 95)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src	2005-09-08 13:05:52 UTC (rev 96)
@@ -0,0 +1,18 @@
+use uo;
+use os;
+
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcCommands";
+
+program BrainNerve(params)
+	var npc		:= params[1];
+	var nerve_name	:= params[2];
+	var event	:= params[3];
+	var settings	:= params[4];
+	var scripts	:= params[5];
+	params := array{}; // Not needed anymore.
+	
+	while ( npc )
+		// Do stuff here
+	endwhile
+endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src	2005-09-08 12:24:22 UTC (rev 95)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src	2005-09-08 13:05:52 UTC (rev 96)
@@ -0,0 +1,37 @@
+use uo;
+use os;
+
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcCommands";
+
+program BrainNerve(params)
+	var npc		:= params[1];
+	//var nerve_name:= params[2];
+	var event	:= params[3];
+	//var settings	:= params[4];
+	//var scripts	:= params[5];
+	params := array{}; // Not needed anymore.
+	
+	var source := event.source;
+	while ( npc )
+		if ( source )
+			AI_Speak(npc, "Hey that tickles!", SPEAK_TEXTTYPE_YELL, SPEAK_DOEVENT_ENABLE, WAKEUP);
+			AI_Speak(npc, "*moves away from "+source.name+"*");
+			AI_Move(npc, source, NEMOVE_AWAY, NEMOVE_WALK, WAKEUP, 1);
+		endif
+		
+		event := wait_for_event(900000);
+		if ( event )
+			case ( event.type )
+				SYSEVENT_DOUBLECLICKED:
+					source := event.source;
+					break;
+				NPCEVENT_DONE:
+					source := 0;
+					break;
+			endcase
+		else
+			source := 0;
+		endif
+	endwhile
+endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src	2005-09-08 12:24:22 UTC (rev 95)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src	2005-09-08 13:05:52 UTC (rev 96)
@@ -0,0 +1,18 @@
+use uo;
+use os;
+
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcCommands";
+
+program BrainNerve(params)
+	var npc		:= params[1];
+	var nerve_name	:= params[2];
+	var event	:= params[3];
+	var settings	:= params[4];
+	var scripts	:= params[5];
+	params := array{}; // Not needed anymore.
+	
+	while ( npc )
+		// Do stuff here
+	endwhile
+endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/goneCriminal.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/goneCriminal.src	2005-09-08 12:24:22 UTC (rev 95)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/goneCriminal.src	2005-09-08 13:05:52 UTC (rev 96)
@@ -0,0 +1,18 @@
+use uo;
+use os;
+
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcCommands";
+
+program BrainNerve(params)
+	var npc		:= params[1];
+	var nerve_name	:= params[2];
+	var event	:= params[3];
+	var settings	:= params[4];
+	var scripts	:= params[5];
+	params := array{}; // Not needed anymore.
+	
+	while ( npc )
+		// Do stuff here
+	endwhile
+endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src	2005-09-08 12:24:22 UTC (rev 95)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src	2005-09-08 13:05:52 UTC (rev 96)
@@ -0,0 +1,18 @@
+use uo;
+use os;
+
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcCommands";
+
+program BrainNerve(params)
+	var npc		:= params[1];
+	var nerve_name	:= params[2];
+	var event	:= params[3];
+	var settings	:= params[4];
+	var scripts	:= params[5];
+	params := array{}; // Not needed anymore.
+	
+	while ( npc )
+		//Do stuff here.
+	endwhile
+endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src	2005-09-08 12:24:22 UTC (rev 95)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src	2005-09-08 13:05:52 UTC (rev 96)
@@ -0,0 +1,18 @@
+use uo;
+use os;
+
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcCommands";
+
+program BrainNerve(params)
+	var npc		:= params[1];
+	var nerve_name	:= params[2];
+	var event	:= params[3];
+	var settings	:= params[4];
+	var scripts	:= params[5];
+	params := array{}; // Not needed anymore.
+	
+	while ( npc )
+		// Do stuff here
+	endwhile
+endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src	2005-09-08 12:24:22 UTC (rev 95)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src	2005-09-08 13:05:52 UTC (rev 96)
@@ -0,0 +1,22 @@
+use uo;
+use os;
+
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcCommands";
+
+program BrainNerve(params)
+	var npc		:= params[1];
+	//var nerve_name:= params[2];
+	var event	:= params[3];
+	//var settings	:= params[4];
+	//var scripts	:= params[5];
+	params := array{}; // Not needed anymore.
+	
+	while ( npc )
+		if ( event.source )
+			AI_Speak(npc, "I just heard "+(event.source).name+" say "+event.text, SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+		endif
+		
+		event := wait_for_event(900000);
+	endwhile
+endprogram
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src	2005-09-08 12:24:22 UTC (rev 95)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src	2005-09-08 13:05:52 UTC (rev 96)
@@ -0,0 +1,30 @@
+use uo;
+use os;
+
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcCommands";
+
+program BrainNerve(params)
+	var npc		:= params[1];
+	var nerve_name	:= params[2];
+	var settings	:= params[3];
+	var scripts	:= params[4];
+	var nerves	:= params[5];
+	params := array{}; // Not needed anymore.
+	
+	foreach nerve_name in (nerves.keys())
+		if ( nerve_name.flags & NF_CONTINUE_ON_SLEEP )
+			continue;
+		else
+			StopNerve(npc, nerve_name, nerves);
+		endif
+		sleepms(2);
+	endforeach
+	
+	while ( npc )
+		AI_Speak(npc, "ZzzzzZzz", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, NOWAKE);
+		
+		sleep(5);
+	endwhile
+endprogram		
+	
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src	2005-09-08 12:24:22 UTC (rev 95)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src	2005-09-08 13:05:52 UTC (rev 96)
@@ -0,0 +1,18 @@
+use uo;
+use os;
+
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcCommands";
+
+program BrainNerve(params)
+	var npc		:= params[1];
+	var nerve_name	:= params[2];
+	var event	:= params[3];
+	var settings	:= params[4];
+	var scripts	:= params[5];
+	params := array{}; // Not needed anymore.
+	
+	while ( npc )
+		// Do stuff here
+	endwhile
+endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-08 12:24:22 UTC (rev 95)
+++ trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-08 13:05:52 UTC (rev 96)
@@ -24,16 +24,12 @@
 	AISetting	HearSpeech	i1
 	AISetting	HearGhosts	i1
 	
-	AIScript	Listen		:ai_brain:complete/testNPC/listen
+	AIScript	Combat		:ai_brain:complete/testNPC/combat
+	AIScript	DblClick	:ai_brain:complete/testNPC/doubleClick
+	AIScript	Disengaged	:ai_brain:complete/testNPC/disengaged
 	AIScript	EnterArea	:ai_brain:complete/testNPC/enterArea
-	AIScript	LeftArea	:ai_brain:complete/testNPC/leftArea
 	AIScript	GoneCriminal	:ai_brain:complete/testNPC/goneCriminal
-	AIScript	DblClick	:ai_brain:complete/testNPC/doubleClick
 	AIScript	ItemGiven	:ai_brain:complete/testNPC/itemGiven
-	AIScript	Disengaged	:ai_brain:complete/testNPC/disengaged
-	AIScript	Combat		:ai_brain:complete/testNPC/combat
-		
-	
-	TameDifficulty		1
-	GuardIgnore		1
+	AIScript	LeftArea	:ai_brain:complete/testNPC/leftArea
+	AIScript	Listen		:ai_brain:complete/testNPC/listen
 }



From austin at berlios.de  Thu Sep  8 15:57:40 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 8 Sep 2005 15:57:40 +0200
Subject: [Poldistro-svn] r97 - in trunk/096/pkg/mobiles/ai_brain: . include include/braincore
Message-ID: <200509081357.j88DveUv023032@sheep.berlios.de>

Author: austin
Date: 2005-09-08 15:57:40 +0200 (Thu, 08 Sep 2005)
New Revision: 97

Modified:
   trunk/096/pkg/mobiles/ai_brain/brain.src
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
   trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/brain.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-08 13:05:52 UTC (rev 96)
+++ trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-08 13:57:40 UTC (rev 97)
@@ -51,13 +51,15 @@
 	set_critical(1);
 	StartupScripts();
 	
+	sleep(1);
+	
 	while ( npc )
 		var ev;
 		if ( !sleep_mode )
 			RunCycleScript();			
-			ev := Wait_For_Event(g_settings["cycle_wait"]);
+			ev := Wait_For_Event(g_settings["CycleWait"]);
 		else
-			ev := Wait_For_Event(g_settings["sleep_wait"]);
+			ev := Wait_For_Event(g_settings["SleepWait"]);
 		endif
 		
 		if ( !ev )

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-08 13:05:52 UTC (rev 96)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-08 13:57:40 UTC (rev 97)
@@ -139,7 +139,7 @@
 		// .source	: What sent the double click
 		SYSEVENT_DOUBLECLICKED:
 			if ( g_scripts.Exists("DblClick") )
-				if ( Distance(event.source, npc) <= g_settings["dbl_click_range"] )
+				if ( Distance(event.source, npc) <= g_settings["DblClickRange"] )
 					var process := GetNerveProcess(npc, "DblClick", g_nerves);
 					if ( !process )
 						StartNerve(npc, "DblClick", g_scripts["DblClick"].script, array{event, g_settings, g_scripts}, g_scripts["DblClick"].flags, g_nerves);
@@ -292,7 +292,7 @@
 	   // and telling it what event it sent that has finished
 	   // being processed.
 	   if ( event.process )
-		(event.process).SendEvent(struct{"type":=NPCEVENT_DONE, "source":=event.type});
+		(event.process).SendEvent(struct{"type":=NPCEVENT_DONE, "evsource":=event.type});
 	   endif
 
 	   set_priority(old_priority);

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-08 13:05:52 UTC (rev 96)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-08 13:57:40 UTC (rev 97)
@@ -71,7 +71,7 @@
 	// * Events that do not have a core range check.
 	//
 	if ( g_scripts.Exists("DblClick") )
-		EnableEvents(SYSEVENT_DOUBLECLICKED);
+		EnableEvents(SYSEVENT_DOUBLECLICKED, 20);
 	endif
 	if ( g_scripts.Exists("ItemGiven") )
 		EnableEvents(SYSEVENT_ITEM_GIVEN);

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-08 13:05:52 UTC (rev 96)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-08 13:57:40 UTC (rev 97)
@@ -74,6 +74,7 @@
 	var settings := dictionary;
 	foreach setting_name in (setting_list.keys())
 		settings[setting_name] := UnPack(setting_list[setting_name]);
+		
 		sleepms(2);
 	endforeach
 
@@ -115,7 +116,7 @@
 	// * Load config defaults first
 	//
 	var npc_elem := NPC_GetNPCConfig(source);
-
+	
 	var script_list := GetConfigStringDictionary(npc_elem, "AIScript");
 	var flag_list := GetConfigStringDictionary(npc_elem, "AIScriptFlag");
 
@@ -123,6 +124,7 @@
 	foreach script_type in (script_list.keys())
 		var temp := struct;
 		temp.+script := script_list[script_type];
+		
 		temp.+flags := 0x0;
 		if ( flag_list[script_type] )
 			temp.flags := UnPack(flag_list[script_type]);

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-08 13:05:52 UTC (rev 96)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-08 13:57:40 UTC (rev 97)
@@ -44,7 +44,7 @@
 		parsed.package := "";
 		parsed.template := template_name;
 	else
-		parsed.package := template_name[colon_a+1, colon_b-1];
+		parsed.package := template_name[colon_a+1, colon_b-2];
 		parsed.template := template_name[colon_b+1, Len(template_name)];
 	endif
 
@@ -70,7 +70,14 @@
 	endif
 	
 	var npc_cfg := ReadConfigFile(":"+template.package+":npcdesc");
+	if ( npc_cfg.errortext )
+		return error{"errortext":="Error - NPC_GetNPCConfig():: Could not open :"+template.package+":npcdesc ->"+npc_cfg.errortext};
+	endif
+	
 	var cfg_elem := npc_cfg[template.template];
+	if ( cfg_elem.errortext )
+		return error{"errortext":="Error - NPC_GetNPCConfig():: Could not find elem ["+template.template+"] ->"+cfg_elem.errortext};
+	endif
 	
 	return cfg_elem;
 endfunction

Modified: trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-08 13:05:52 UTC (rev 96)
+++ trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-08 13:57:40 UTC (rev 97)
@@ -1,6 +1,6 @@
 NPCTemplate TestNPC
 {
-	Name		<random>
+	Name		Test Bitch NPC
 	Script		:ai_brain:brain
 	ObjType		0x190
 	Color		0
@@ -21,6 +21,7 @@
 	AISetting	SleepWait	i1000
 	AISetting	ListenRange	i10
 	AISetting	AreaSize	i5
+	AISetting	DblClickRange	i10
 	AISetting	HearSpeech	i1
 	AISetting	HearGhosts	i1
 	



From austin at berlios.de  Thu Sep  8 16:33:06 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 8 Sep 2005 16:33:06 +0200
Subject: [Poldistro-svn] r98 - in trunk/096/pkg/mobiles/ai_brain: . complete/testnpc include include/braincore
Message-ID: <200509081433.j88EX6lK025920@sheep.berlios.de>

Author: austin
Date: 2005-09-08 16:33:06 +0200 (Thu, 08 Sep 2005)
New Revision: 98

Modified:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src
   trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
   trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src	2005-09-08 13:57:40 UTC (rev 97)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src	2005-09-08 14:33:06 UTC (rev 98)
@@ -12,26 +12,13 @@
 	//var scripts	:= params[5];
 	params := array{}; // Not needed anymore.
 	
-	var source := event.source;
 	while ( npc )
-		if ( source )
-			AI_Speak(npc, "Hey that tickles!", SPEAK_TEXTTYPE_YELL, SPEAK_DOEVENT_ENABLE, WAKEUP);
-			AI_Speak(npc, "*moves away from "+source.name+"*");
-			AI_Move(npc, source, NEMOVE_AWAY, NEMOVE_WALK, WAKEUP, 1);
+		if ( event.source )
+			AI_Speak(npc, "Eeeheee... that tickles!", SPEAK_TEXTTYPE_YELL, SPEAK_DOEVENT_ENABLE, WAKEUP);
+			AI_Speak(npc, "*moves away from "+(event.source).name+"*");
+			AI_Move(npc, event.source, NEMOVE_AWAY, NEMOVE_WALK, WAKEUP, 1);
 		endif
 		
 		event := wait_for_event(900000);
-		if ( event )
-			case ( event.type )
-				SYSEVENT_DOUBLECLICKED:
-					source := event.source;
-					break;
-				NPCEVENT_DONE:
-					source := 0;
-					break;
-			endcase
-		else
-			source := 0;
-		endif
 	endwhile
 endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src	2005-09-08 13:57:40 UTC (rev 97)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src	2005-09-08 14:33:06 UTC (rev 98)
@@ -1,6 +1,7 @@
 use uo;
 use os;
 
+include ":ai_brain:include/eventid";
 include ":ai_brain:include/npcNerves";
 include ":ai_brain:include/npcCommands";
 
@@ -14,7 +15,18 @@
 	
 	while ( npc )
 		if ( event.source )
-			AI_Speak(npc, "I just heard "+(event.source).name+" say "+event.text, SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+			AI_Speak(npc, "I just heard "+(event.source).name+" say \""+event.text+"\"", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+			case ( event.texttype )
+				SPEAK_TEXTTYPE_YELL:
+					AI_Speak(npc, "*yells* No need to yell!", event.texttype, SPEAK_DOEVENT_DISABLE, WAKEUP);
+					break;
+				SPEAK_TEXTTYPE_WHISPER:
+					AI_Speak(npc, "*whispers* Speak up next time. I could barely hear you.", event.texttype, SPEAK_DOEVENT_DISABLE, WAKEUP);
+					break;
+				default:
+					AI_Speak(npc, "You're fun to talk to, you know that?", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+					break;
+			endcase
 		endif
 		
 		event := wait_for_event(900000);

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src	2005-09-08 13:57:40 UTC (rev 97)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src	2005-09-08 14:33:06 UTC (rev 98)
@@ -6,9 +6,9 @@
 
 program BrainNerve(params)
 	var npc		:= params[1];
-	var nerve_name	:= params[2];
-	var settings	:= params[3];
-	var scripts	:= params[4];
+	//var nerve_name	:= params[2];
+	//var settings	:= params[3];
+	//var scripts	:= params[4];
 	var nerves	:= params[5];
 	params := array{}; // Not needed anymore.
 	
@@ -23,8 +23,8 @@
 	
 	while ( npc )
 		AI_Speak(npc, "ZzzzzZzz", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, NOWAKE);
-		
-		sleep(5);
+		AI_ClearThoughts(npc, CLR_NERVE);
+		sleep(20);
 	endwhile
 endprogram		
 	
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src	2005-09-08 13:57:40 UTC (rev 97)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src	2005-09-08 14:33:06 UTC (rev 98)
@@ -6,13 +6,18 @@
 
 program BrainNerve(params)
 	var npc		:= params[1];
-	var nerve_name	:= params[2];
+	//var nerve_name:= params[2];
 	var event	:= params[3];
-	var settings	:= params[4];
-	var scripts	:= params[5];
+	//var settings	:= params[4];
+	//var scripts	:= params[5];
 	params := array{}; // Not needed anymore.
 	
 	while ( npc )
-		// Do stuff here
+		if ( event )
+			AI_Speak(npc, "So yeah.. I just got this event and I don't know what to do with it... its virtual time, baby.", SPEAK_TEXTTYPE_YELL, SPEAK_DOEVENT_ENABLE, WAKEUP);
+			AI_Speak(npc, "The event structure is... "+event, SPEAK_TEXTTYPE_YELL, SPEAK_DOEVENT_ENABLE, WAKEUP);
+		endif
+		
+		event := wait_for_event(900000);
 	endwhile
 endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-08 13:57:40 UTC (rev 97)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-08 14:33:06 UTC (rev 98)
@@ -25,6 +25,7 @@
 	g_settings := NPC_LoadTemplateSettings(npc);
 	g_settings := NPC_GetDefaultSettings(g_settings);
 	g_scripts := NPC_LoadScriptSettings(npc);
+	g_nerves := LoadNerves(npc);
 		
 	return 1;
 endfunction
@@ -109,8 +110,8 @@
 		SetWarmode(0);
 		//StopNerves();
 		
-		if ( g_scripts.Exists("restart_script") )
-			var restart_script := Run_Script_To_Completion(g_scripts["restart_script"], {npc, g_settings});
+		if ( g_scripts.Exists("Restart") )
+			var restart_script := Run_Script_To_Completion(g_scripts["Restart"], {npc, g_settings});
 			if ( restart_script.errortext )
 				FatalError("Error - StartupScripts() :: Restart script failed: "+restart_script.errortext);
 				return 0;
@@ -120,8 +121,8 @@
 		var npc_info := struct{"npctemplate":=npc.npctemplate, "serial":=npc.serial};
 		SetObjProperty(npc, "npc_info", npc_info);
 		
-		if ( g_scripts.Exists("init_script") )
-			var init_script := Run_Script_To_Completion(g_scripts["init_script"], {npc, g_settings});
+		if ( g_scripts.Exists("Init") )
+			var init_script := Run_Script_To_Completion(g_scripts["Init"], {npc, g_settings});
 			if ( init_script.errortext )
 				FatalError("Error - StartupScripts() :: Init script failed:"+init_script.errortext);
 				return 0;

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc	2005-09-08 13:57:40 UTC (rev 97)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc	2005-09-08 14:33:06 UTC (rev 98)
@@ -18,6 +18,7 @@
 //
 // GetNerveFlags(mobile, nerve_name, byref nerve_dict:=0)
 // GetNerveProcess(mobile, nerve_name, byref nerve_dict:=0)
+// KillNerves(mobile)
 // LoadNerves(mobile)
 // SaveNerves(mobile, nerve_dict)
 // StartNerve(mobile, nerve_name, nerve_script, data:=array, flags:=NF_NO_FLAGS, byref nerve_dict:=0)
@@ -211,3 +212,28 @@
 	endif
 endfunction
 
+/*
+ * KillNerves(mobile)
+ *
+ * Purpose
+ * Forces all nerve scripts that are running on an npc to stop.
+ *
+ * Parameters
+ * mobile:	NPC the nerves will be stopped on.
+ *
+ * Return value
+ * Returns 1
+ *
+ */
+function KillNerves(mobile)
+	Set_Critical(1);
+	
+	var nerve_dict := LoadNerves(mobile);
+	
+	foreach nerve_name in (nerve_dict.keys())
+		StopNerve(mobile, nerve_name);
+	endforeach
+	Set_Critical(0);
+
+	return 1;
+endfunction
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-08 13:57:40 UTC (rev 97)
+++ trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-08 14:33:06 UTC (rev 98)
@@ -1,6 +1,6 @@
 NPCTemplate TestNPC
 {
-	Name		Test Bitch NPC
+	Name		Tester NPC
 	Script		:ai_brain:brain
 	ObjType		0x190
 	Color		0
@@ -33,4 +33,6 @@
 	AIScript	ItemGiven	:ai_brain:complete/testNPC/itemGiven
 	AIScript	LeftArea	:ai_brain:complete/testNPC/leftArea
 	AIScript	Listen		:ai_brain:complete/testNPC/listen
+	AIScript	Restart		:ai_brain:complete/testNPC/restart
+	AIScript	Sleep		:ai_brain:complete/testNPC/sleep
 }



From austin at berlios.de  Sat Sep 10 15:56:46 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 10 Sep 2005 15:56:46 +0200
Subject: [Poldistro-svn] r99 - trunk/096/config
Message-ID: <200509101356.j8ADukFJ020862@sheep.berlios.de>

Author: austin
Date: 2005-09-10 15:56:44 +0200 (Sat, 10 Sep 2005)
New Revision: 99

Modified:
   trunk/096/config/repsys.cfg
Log:
NameColoring elem gets named so it can be used by the textcommand .CreateNPC in the brain package.

Modified: trunk/096/config/repsys.cfg
===================================================================
--- trunk/096/config/repsys.cfg	2005-09-08 14:33:06 UTC (rev 98)
+++ trunk/096/config/repsys.cfg	2005-09-10 13:56:44 UTC (rev 99)
@@ -1,15 +1,23 @@
-NameColoring
+/////////////////////////////////////////////////////////////////////////////
+// REPSYS.CFG - Reputation System Configuration
+//
+// Used by Core
+//
+/////////////////////////////////////////////////////////////////////////////
+
+General
 {
-	Murderer        38
-	Criminal        905
-	Attackable      905
-	Innocent        90
-	GuildAlly       68
-	GuildEnemy      44
+	CriminalFlagInterval	120		// Time, in seconds, for which you will be marked criminal
+	AggressorFlagTimeout	120		// Time, in seconds, for which you will be marked an aggressor
 }
 
-General
+NameColoring NameColoring
 {
-	CriminalFlagInterval 120
-	AggressorFlagTimeout 120
-}
+	Murderer		38
+	Criminal		905
+	Attackable		905
+	Innocent		90
+
+	GuildAlly		68
+	GuildEnemy		44
+}
\ No newline at end of file



From austin at berlios.de  Sun Sep 11 12:54:42 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 11 Sep 2005 12:54:42 +0200
Subject: [Poldistro-svn] r100 - in trunk/096/pkg/mobiles/ai_brain: . commands/test complete/testnpc config include include/braincore
Message-ID: <200509111054.j8BAsg0o004373@sheep.berlios.de>

Author: austin
Date: 2005-09-11 12:54:33 +0200 (Sun, 11 Sep 2005)
New Revision: 100

Added:
   trunk/096/pkg/mobiles/ai_brain/commands/test/unloadNPCDescs.src
   trunk/096/pkg/mobiles/ai_brain/config/npcdesc.cfg
Removed:
   trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
Modified:
   trunk/096/pkg/mobiles/ai_brain/brain.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src
   trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcError.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
Log:
Nightly updates

Modified: trunk/096/pkg/mobiles/ai_brain/brain.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-10 13:56:44 UTC (rev 99)
+++ trunk/096/pkg/mobiles/ai_brain/brain.src	2005-09-11 10:54:33 UTC (rev 100)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * BRAIN.SRC - v5.0
-* Updated 9/1/2005 6:20AM
+* Updated 9/11/2005 2:06AM
 *
 * NPC AI-Script to control all non-setup actions. Acts as the "brain"
 * and fires off external scripts that act as the "nerves" of the NPC.
@@ -41,7 +41,6 @@
 //as references rather than copies within the brain and nerves.
 var g_settings := dictionary; //"setting name"->value
 var g_scripts := dictionary; // "script type"->value{.flags, .script}
-var g_nerves := dictionary; // "nerve name"->value{.flags, .pid}
 
 program BrainAI()
 	//Run setup steps for the npc.

Added: trunk/096/pkg/mobiles/ai_brain/commands/test/unloadNPCDescs.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/test/unloadNPCDescs.src	2005-09-10 13:56:44 UTC (rev 99)
+++ trunk/096/pkg/mobiles/ai_brain/commands/test/unloadNPCDescs.src	2005-09-11 10:54:33 UTC (rev 100)
@@ -0,0 +1,23 @@
+use uo;
+use os;
+use polsys;
+use cfgfile;
+
+program cmd_unloadNPCDescs(who)
+	SendSysMessage(who, "Begining to unload npcdesc.cfg files...");
+	
+	UnloadConfigFile(":*:npcdesc");
+	UnloadConfigFile("::npcdesc");
+	
+	foreach package in (Packages())
+		if ( package.npcdesc )
+			UnloadConfigFile(":"+(package.name)+":npcdesc");
+			SendSysMessage(who, "Unloading :"+(package.name)+":npcdesc");
+		endif	
+		sleepms(2);
+	endforeach
+	
+	ReloadConfiguration();
+	
+	SendSysMessage(who, "All npcdesc.cfg files unloaded.");
+endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src	2005-09-10 13:56:44 UTC (rev 99)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src	2005-09-11 10:54:33 UTC (rev 100)
@@ -9,14 +9,13 @@
 	//var nerve_name	:= params[2];
 	//var settings	:= params[3];
 	//var scripts	:= params[4];
-	var nerves	:= params[5];
 	params := array{}; // Not needed anymore.
 	
-	foreach nerve_name in (nerves.keys())
+	foreach nerve_name in (LoadNerves(npc).keys())
 		if ( nerve_name.flags & NF_CONTINUE_ON_SLEEP )
 			continue;
 		else
-			StopNerve(npc, nerve_name, nerves);
+			StopNerve(npc, nerve_name);
 		endif
 		sleepms(2);
 	endforeach

Added: trunk/096/pkg/mobiles/ai_brain/config/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/config/npcdesc.cfg	2005-09-10 13:56:44 UTC (rev 99)
+++ trunk/096/pkg/mobiles/ai_brain/config/npcdesc.cfg	2005-09-11 10:54:33 UTC (rev 100)
@@ -0,0 +1,38 @@
+NPCTemplate TestNPC
+{
+	Name		<Test NPC>
+	Script		:ai_brain:brain
+	ObjType		0x190
+	Color		0
+	TrueColor	0
+	Gender		0
+
+	STR		1
+	INT		1
+	DEX		1
+	HITS		1
+	MANA		1
+	STAM		1
+	AR		1
+	RunSpeed	255
+	
+	AISetting	CycleWait	i10
+	AISetting	IdleTicks	i5
+	AISetting	SleepWait	i1000
+	AISetting	ListenRange	i10
+	AISetting	AreaSize	i5
+	AISetting	DblClickRange	i10
+	AISetting	HearSpeech	i1
+	AISetting	HearGhosts	i1
+	
+	AIScript	Combat		:ai_brain:complete/testNPC/combat
+	AIScript	DblClick	:ai_brain:complete/testNPC/doubleClick
+	AIScript	Disengaged	:ai_brain:complete/testNPC/disengaged
+	AIScript	EnterArea	:ai_brain:complete/testNPC/enterArea
+	AIScript	GoneCriminal	:ai_brain:complete/testNPC/goneCriminal
+	AIScript	ItemGiven	:ai_brain:complete/testNPC/itemGiven
+	AIScript	LeftArea	:ai_brain:complete/testNPC/leftArea
+	AIScript	Listen		:ai_brain:complete/testNPC/listen
+	AIScript	Restart		:ai_brain:complete/testNPC/restart
+	AIScript	Sleep		:ai_brain:complete/testNPC/sleep
+}

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc	2005-09-10 13:56:44 UTC (rev 99)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc	2005-09-11 10:54:33 UTC (rev 100)
@@ -22,10 +22,10 @@
  */
 function RunCycleScript()
 	if ( g_scripts["Cycle"] )
-		var script := Run_Script_To_Completion(g_scripts["Cycle"], array{npc, g_settings, g_scripts, g_nerves});
+		var script := Run_Script_To_Completion(g_scripts["Cycle"], array{npc, g_settings, g_scripts});
 		
 		if ( script.errortext )
-			NPC_ErrorSysLog(npc, "Error - RunCycleScript() :: "+script.errortext);
+			NPC_ErrorSysLog(npc, "Error::RunCycleScript() - "+script.errortext);
 		endif
 	endif
 	

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-10 13:56:44 UTC (rev 99)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-11 10:54:33 UTC (rev 100)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * EVENTPROCESSOR.INC - v1.0
-* Updated 9/4/2005 9:30AM
+* Updated 9/11/2005 2:06AM
 *
 * -- Revision v1.0 --
 * Austin:
@@ -48,9 +48,9 @@
 		// .source	: What entered the area
 		SYSEVENT_ENTEREDAREA:
 			if ( g_scripts.Exists("EnterArea") )
-				var process := GetNerveProcess(npc, "EnterArea", g_nerves);
+				var process := GetNerveProcess(npc, "EnterArea");
 				if ( !process )
-					StartNerve(npc, "EnterArea", g_scripts["EnterArea"].script, array{event, g_settings, g_scripts}, g_scripts["EnterArea"].flags, g_nerves);
+					StartNerve(npc, "EnterArea", g_scripts["EnterArea"].script, array{event, g_settings, g_scripts}, g_scripts["EnterArea"].flags);
 				else
 					process.SendEvent(event);
 				endif
@@ -61,9 +61,9 @@
 		// .source	: What left the area
 		SYSEVENT_LEFTAREA:
 			if ( g_scripts.Exists("LeftArea") )
-				var process := GetNerveProcess(npc, "LeftArea", g_nerves);
+				var process := GetNerveProcess(npc, "LeftArea");
 				if ( !process )
-					StartNerve(npc, "LeftArea", g_scripts["LeftArea"].script, array{event, g_settings, g_scripts}, g_scripts["LeftArea"].flags, g_nerves);
+					StartNerve(npc, "LeftArea", g_scripts["LeftArea"].script, array{event, g_settings, g_scripts}, g_scripts["LeftArea"].flags);
 				else
 					process.SendEvent(event);
 				endif
@@ -74,9 +74,9 @@
 		// .source	: What changed criminal status.
 		SYSEVENT_GONE_CRIMINAL:
 			if ( g_scripts.Exists("GoneCriminal") )
-				var process := GetNerveProcess(npc, "GoneCriminal", g_nerves);
+				var process := GetNerveProcess(npc, "GoneCriminal");
 				if ( !process )
-					StartNerve(npc, "GoneCriminal", g_scripts["GoneCriminal"].script, array{event, g_settings, g_scripts}, g_scripts["GoneCriminal"].flags, g_nerves);
+					StartNerve(npc, "GoneCriminal", g_scripts["GoneCriminal"].script, array{event, g_settings, g_scripts}, g_scripts["GoneCriminal"].flags);
 				else
 					process.SendEvent(event);
 				endif
@@ -92,9 +92,9 @@
 		SYSEVENT_DAMAGED:
 			if ( g_scripts.Exists("Combat") )
 				if ( (event.source).ISA(POLCLASS_MOBILE) )
-					var process := GetNerveProcess(npc, "Combat", g_nerves);
+					var process := GetNerveProcess(npc, "Combat");
 					if ( !process )
-						StartNerve(npc, "Combat", g_scripts["Combat"].script, array{event, g_settings, g_scripts}, g_scripts["Combat"].flags, g_nerves);
+						StartNerve(npc, "Combat", g_scripts["Combat"].script, array{event, g_settings, g_scripts}, g_scripts["Combat"].flags);
 					else
 						process.SendEvent(event);
 					endif
@@ -107,9 +107,9 @@
 		// .source	: What was targetting this npc but has now left combat mode.
 		SYSEVENT_DISENGAGED:
 			if ( g_scripts.Exists("Disengaged") )
-				var process := GetNerveProcess(npc, "Disengaged", g_nerves);
+				var process := GetNerveProcess(npc, "Disengaged");
 				if ( !process )
-					StartNerve(npc, "Disengaged", g_scripts["Disengaged"].script, array{event, g_settings, g_scripts}, g_scripts["Disengaged"].flags, g_nerves);
+					StartNerve(npc, "Disengaged", g_scripts["Disengaged"].script, array{event, g_settings, g_scripts}, g_scripts["Disengaged"].flags);
 				else
 					process.SendEvent(event);
 				endif
@@ -125,9 +125,9 @@
 		SYSEVENT_SPEECH:
 		SYSEVENT_GHOST_SPEECH:
 			if( g_scripts.Exists("Listen") )
-				var process := GetNerveProcess(npc, "Listen", g_nerves);
+				var process := GetNerveProcess(npc, "Listen");
 				if ( !process )
-					StartNerve(npc, "Listen", g_scripts["Listen"].script, array{event, g_settings, g_scripts}, g_scripts["Listen"].flags, g_nerves);
+					StartNerve(npc, "Listen", g_scripts["Listen"].script, array{event, g_settings, g_scripts}, g_scripts["Listen"].flags);
 				else
 					process.SendEvent(event);
 				endif
@@ -140,9 +140,9 @@
 		SYSEVENT_DOUBLECLICKED:
 			if ( g_scripts.Exists("DblClick") )
 				if ( Distance(event.source, npc) <= g_settings["DblClickRange"] )
-					var process := GetNerveProcess(npc, "DblClick", g_nerves);
+					var process := GetNerveProcess(npc, "DblClick");
 					if ( !process )
-						StartNerve(npc, "DblClick", g_scripts["DblClick"].script, array{event, g_settings, g_scripts}, g_scripts["DblClick"].flags, g_nerves);
+						StartNerve(npc, "DblClick", g_scripts["DblClick"].script, array{event, g_settings, g_scripts}, g_scripts["DblClick"].flags);
 					else
 						process.SendEvent(event);
 					endif
@@ -162,9 +162,9 @@
 		SYSEVENT_MERCHANT_SOLD:
 		SYSEVENT_MERCHANT_BOUGHT:
 			if ( g_scripts.Exists("Merchant") )
-				var process := GetNerveProcess(npc, "Merchant", g_nerves);
+				var process := GetNerveProcess(npc, "Merchant");
 				if ( !process )
-					StartNerve(npc, "Merchant", g_scripts["Merchant"].script, array{event, g_settings, g_scripts}, g_scripts["Merchant"].flags, g_nerves);
+					StartNerve(npc, "Merchant", g_scripts["Merchant"].script, array{event, g_settings, g_scripts}, g_scripts["Merchant"].flags);
 				else
 					process.SendEvent(event);
 				endif
@@ -176,9 +176,9 @@
 		// .item	: The item being given to the npc.
 		SYSEVENT_ITEM_GIVEN:
 			if ( g_scripts.Exists("ItemGiven") )
-				var process := GetNerveProcess(npc, "ItemGiven", g_nerves);
+				var process := GetNerveProcess(npc, "ItemGiven");
 				if ( !process )
-					StartNerve(npc, "ItemGiven", g_scripts["ItemGiven"].script, array{event, g_settings, g_scripts}, g_scripts["ItemGiven"].flags, g_nerves);
+					StartNerve(npc, "ItemGiven", g_scripts["ItemGiven"].script, array{event, g_settings, g_scripts}, g_scripts["ItemGiven"].flags);
 				else
 					process.SendEvent(event);
 				endif
@@ -192,7 +192,7 @@
 		//A nerve has instructed the brain to kill another nerve or its self.
 		// .name	: Nerve name
 		NPCEVENT_ENDNERVE:
-			StopNerve(npc, event.name, g_nerves);
+			StopNerve(npc, event.name);
 			break;
 
 		//A nerve has instructed the brain to start another nerve.
@@ -200,7 +200,7 @@
 		// .script	: Nerve script
 		// .data	: array of goodies
 		NPCEVENT_STARTNERVE:
-			StartNerve(npc, event.name, event.script, event.data, event.flags, g_nerves);
+			StartNerve(npc, event.name, event.script, event.data, event.flags);
 			break;
 
 		// Set a new opponent!
@@ -267,7 +267,7 @@
 		// .mask	: Type of event for the nerve to receive.
 		// .data	: Data to forward to the nerve.
 		NPCEVENT_FWDNERVE:
-		var process := GetNerveProcess(npc, event.NerveName, g_nerves);
+		var process := GetNerveProcess(npc, event.NerveName);
 			if ( process )
 				process.SendEvent(event);
 			endif
@@ -277,9 +277,9 @@
 		// npc's "virtual" nerve if it has one.
 		default:
 			if ( g_scripts.Exists("Virtual") )
-				var process := GetNerveProcess(npc, "Virtual", g_nerves);
+				var process := GetNerveProcess(npc, "Virtual");
 				if ( !process )
-					StartNerve(npc, "Virtual", g_scripts["Virtual"].script, array{event, g_settings, g_scripts}, g_scripts["Virtual"].flags, g_nerves);
+					StartNerve(npc, "Virtual", g_scripts["Virtual"].script, array{event, g_settings, g_scripts}, g_scripts["Virtual"].flags);
 				else
 					process.SendEvent(event);
 				endif

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-10 13:56:44 UTC (rev 99)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-11 10:54:33 UTC (rev 100)
@@ -25,7 +25,6 @@
 	g_settings := NPC_LoadTemplateSettings(npc);
 	g_settings := NPC_GetDefaultSettings(g_settings);
 	g_scripts := NPC_LoadScriptSettings(npc);
-	g_nerves := LoadNerves(npc);
 		
 	return 1;
 endfunction
@@ -111,9 +110,9 @@
 		//StopNerves();
 		
 		if ( g_scripts.Exists("Restart") )
-			var restart_script := Run_Script_To_Completion(g_scripts["Restart"], {npc, g_settings});
+			var restart_script := Run_Script_To_Completion(g_scripts["Restart"], {npc, g_settings, g_scripts});
 			if ( restart_script.errortext )
-				FatalError("Error - StartupScripts() :: Restart script failed: "+restart_script.errortext);
+				FatalError("Error::StartupScripts() - Restart script failed: "+restart_script.errortext);
 				return 0;
 			endif
 		endif
@@ -122,9 +121,9 @@
 		SetObjProperty(npc, "npc_info", npc_info);
 		
 		if ( g_scripts.Exists("Init") )
-			var init_script := Run_Script_To_Completion(g_scripts["Init"], {npc, g_settings});
+			var init_script := Run_Script_To_Completion(g_scripts["Init"], {npc, g_settings, g_scripts});
 			if ( init_script.errortext )
-				FatalError("Error - StartupScripts() :: Init script failed:"+init_script.errortext);
+				FatalError("Error::StartupScripts() - Init script failed:"+init_script.errortext);
 				return 0;
 			endif
 		endif

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc	2005-09-10 13:56:44 UTC (rev 99)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc	2005-09-11 10:54:33 UTC (rev 100)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * SLEEP.INC - v1.0
-* Updated 9/6/2005 6:35AM
+* Updated 9/11/2005 2:06AM
 *
 * -- Revision v1.0 --
 * Austin:
@@ -23,9 +23,9 @@
 function EnterSleepMode()
 	if ( !sleep_mode )
 		if ( g_scripts["Sleep"] )
-			var process := GetNerveProcess(npc, "Sleep", g_nerves);
+			var process := GetNerveProcess(npc, "Sleep");
 			if ( !process )
-				StartNerve(npc, "Sleep", g_scripts["Sleep"].script, array{g_settings, g_scripts, g_nerves}, g_scripts["Sleep"].flags, g_nerves);
+				StartNerve(npc, "Sleep", g_scripts["Sleep"].script, array{g_settings, g_scripts}, g_scripts["Sleep"].flags);
 			endif
 		endif
 					
@@ -49,7 +49,7 @@
  *
  */
 function LeaveSleepMode()
-	StopNerve(npc, "Sleep", g_nerves);
+	StopNerve(npc, "Sleep");
 	idle_ticks := 0;
 	sleep_mode := 0;
 endfunction

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcError.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcError.inc	2005-09-10 13:56:44 UTC (rev 99)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcError.inc	2005-09-11 10:54:33 UTC (rev 100)
@@ -28,7 +28,7 @@
 	Set_Critical(1);
 	SysLog("NPC Template: " + mobile.npctemplate);
 	SysLog("NPC Name    : " + mobile.name);
-	SysLog(errmsg );
+	SysLog(errmsg);
 	SysLog("------------");
 	Set_Critical(0);
 	

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc	2005-09-10 13:56:44 UTC (rev 99)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc	2005-09-11 10:54:33 UTC (rev 100)
@@ -78,7 +78,7 @@
 			return 1;
 		endif
 	else
-		var temp := error{"errortext":="Error - NPC_SetupAmmo() :: No 'AmmoType' was specified."};
+		var temp := error{"errortext":="Error::NPC_SetupAmmo() - No 'AmmoType' was specified."};
 		
 		NPC_ErrorSysLog(mobile, temp.errortext);
 		PrintTextAbove(mobile, temp.errortext);
@@ -112,7 +112,7 @@
 	if ( !elem_name )
 		return NPC_GiveBackPack(mobile);
 	elseif ( !equip_cfg[elem_name] )
-		var errmsg := error{"errortext":="Error - NPC_SetupEquipment() :: There is no elem ["+elem_name+"] in '::equip.cfg'"};
+		var errmsg := error{"errortext":="Error::NPC_SetupEquipment() - There is no elem ["+elem_name+"] in '::equip.cfg'"};
 		PrintTextAbove(mobile, errmsg);
 		return errmsg;
 	else
@@ -155,7 +155,7 @@
 		var temp := error;
 		temp.+errortext := "There is no elem ["+name_elem+"] in NAMES.CFG";
 		
-		NPC_ErrorSysLog(moble, "Error - NPC_SetupName() :: "+temp.errortext);
+		NPC_ErrorSysLog(moble, "Error::NPC_SetupName() - "+temp.errortext);
 		PrintTextAbove(mobile, temp.errortext);
 		return temp;
 	endif
@@ -164,7 +164,7 @@
 	if ( name_list.size() < 1 )
 		var temp := error{"errortext":="No names were found in the ["+name_elem+"] elem for names.cfg"};
 	
-		SysLog("Error - NPC_SetupName() :: "+temp.errortext);
+		SysLog("Error::NPC_SetupName() - "+temp.errortext);
 		PrintTextAbove(mobile, temp.errortext);
 	
 		return temp;

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc	2005-09-10 13:56:44 UTC (rev 99)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc	2005-09-11 10:54:33 UTC (rev 100)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * NERVES.INC - v1.0
-* Updated 9/1/2005 6:15PM
+* Updated 9/11/2005 2:06AM
 *
 * -- Revision v1.0 --
 * Austin:
@@ -16,13 +16,13 @@
 /////////////////////////////////////////////////////////////////
 // * Function List *
 //
-// GetNerveFlags(mobile, nerve_name, byref nerve_dict:=0)
-// GetNerveProcess(mobile, nerve_name, byref nerve_dict:=0)
+// GetNerveFlags(mobile, nerve_name)
+// GetNerveProcess(mobile, nerve_name)
 // KillNerves(mobile)
 // LoadNerves(mobile)
 // SaveNerves(mobile, nerve_dict)
-// StartNerve(mobile, nerve_name, nerve_script, data:=array, flags:=NF_NO_FLAGS, byref nerve_dict:=0)
-// StopNerve(mobile, nerve_name, byref nerve_dict:=0)
+// StartNerve(mobile, nerve_name, nerve_script, data:=array, flags:=NF_NO_FLAGS)
+// StopNerve(mobile, nerve_name)
 //
 /////////////////////////////////////////////////////////////////
 // * Global Varibles *
@@ -69,12 +69,12 @@
  * Returns 1 on success
  *
  */
-function SaveNerves(mobile, byref nerve_dict)
+function SaveNerves(mobile, nerve_dict)
 	return SetObjProperty(mobile, "#NerveInfo", nerve_dict);
 endfunction
 
 /*
- * GetNerveProcess(mobile, nerve_name, byref nerve_dict)
+ * GetNerveProcess(mobile, nerve_name)
  *
  * Purpose
  * Retrieves a reference to a running nerve script.
@@ -88,21 +88,44 @@
  * Returns a script reference.
  *
  */
-function GetNerveProcess(mobile, nerve_name, byref nerve_dict:=0)
-	if ( !nerve_dict )
-		nerve_dict := LoadNerves(mobile);
-	endif
-
+function GetNerveProcess(mobile, nerve_name)
+	var nerve_dict := LoadNerves(mobile);
+	
 	if ( nerve_dict.exists(nerve_name) )
 		return GetProcess(CInt(nerve_dict[nerve_name].pid));
 	else
-		return error{"errortext" := "Error - GetNerveProcess() :: Invalid nerve name  ["+nerve_name+"]"};
+		return error{"errortext" := "Error::GetNerveProcess() - Invalid nerve name  ["+nerve_name+"]"};
 	endif
 endfunction
 
 /*
- * GetNerveFlags(mobile, nerve_name, byref nerve_dict)
+ * GetNerveNameByPid(mobile, pid)
+ * 
+ * Purpose
+ * Finds the name of a nerve by its pid.
  *
+ * Parameters
+ * mobile:	NPC to get the nerve information from.
+ * pid:		Process ID to search for.
+ *
+ * Return value
+ * Returns a string
+ *
+ */
+function GetNerveNameByPid(mobile, pid)
+	var nerve_dict := LoadNerves(mobile);
+	
+	foreach nerve in (nerve_dict)
+		if ( nerve.pid == pid )
+			return _nerve_iter;
+		endif
+		sleepms(2);
+	endforeach
+endfunction
+
+/*
+ * GetNerveFlags(mobile, nerve_name)
+ *
  * Purpose
  * Retrieves the flag setting set on a nerve.
  *
@@ -115,20 +138,18 @@
  * Returns a script reference.
  *
  */
-function GetNerveFlags(mobile, nerve_name, byref nerve_dict:=0)
-	if ( !nerve_dict )
-		nerve_dict := LoadNerves(mobile);
-	endif
-
+function GetNerveFlags(mobile, nerve_name)
+	var nerve_dict := LoadNerves(mobile);
+	
 	if ( nerve_dict.exists(nerve_name) )
 		return GetProcess(CInt(nerve_dict[nerve_name].flags));
 	else
-		return error{"errortext" := "Error - GetNerveFlags() :: Invalid nerve name  ["+nerve_name+"]"};
+		return error{"errortext" := "Error::GetNerveFlags() - Invalid nerve name  ["+nerve_name+"]"};
 	endif
 endfunction
 
 /*
- * StartNerve(mobile, nerve_name, nerve_script, data, flags, byref nerve_dict)
+ * StartNerve(mobile, nerve_name, nerve_script, data, flags)
  *
  * Purpose
  * Starts up a nerve script.
@@ -150,7 +171,7 @@
  * Returns a script reference to the nerve script.
  *
  */
-function StartNerve(mobile, nerve_name, nerve_script, data:=array, flags:=NF_NO_FLAGS, byref nerve_dict:=0)
+function StartNerve(mobile, nerve_name, nerve_script, data:=array, flags:=NF_NO_FLAGS)
 	if ( Lower(TypeOf(data)) != "array")
 		data := array{data};
 	endif
@@ -162,15 +183,18 @@
 	var process := start_script(nerve_script, data);
 
 	if ( process.errortext )
-		var errmsg := "Error - StartNerve() :: ["+nerve_name+"] ["+nerve_script+"] failed to start! ->"+process.errortext;
+		var errmsg := "Error::StartNerve() - ["+nerve_name+"] ["+nerve_script+"] failed to start! ->"+process.errortext;
 		NPC_ErrorSysLog(mobile, errmsg);
 		return error{"errortext":=errmsg};
 	else
+		var nerve_dict := LoadNerves(mobile);
+		
 		//Before setting the new nerve, check if one is already running.
 		if ( nerve_dict.exists(nerve_name) )
 			//Stop the old nerve, before storing the new one.
-			StopNerve(mobile, nerve_name, nerve_dict);
+			StopNerve(mobile, nerve_name);
 		endif
+		
 		var nerve_info := struct;
 		nerve_info.+pid := process.pid;
 		nerve_info.+flags := flags;
@@ -183,7 +207,7 @@
 endfunction
 
 /*
- * StopNerve(mobile, nerve_name, byref nerve_dict)
+ * StopNerve(mobile, nerve_name)
  *
  * Purpose
  * Starts up a nerve script.
@@ -197,18 +221,16 @@
  * Returns 1 on success.
  *
  */
-function StopNerve(mobile, nerve_name, byref nerve_dict:=0)
-	if ( !nerve_dict )
-		nerve_dict := LoadNerves(mobile);
-	endif
-
+function StopNerve(mobile, nerve_name)
+	var nerve_dict := LoadNerves(mobile);
+	
 	if ( nerve_dict.Exists(nerve_name) )
-		GetNerveProcess(mobile, nerve_name, nerve_dict).kill();
+		GetNerveProcess(mobile, nerve_name).kill();
 		nerve_dict.Erase(nerve_name);
 
 		return SaveNerves(mobile, nerve_dict);
 	else
-		return error{"errortext" := "Error - StopNerve() :: Invalid nerve name  ["+nerve_name+"]"};
+		return error{"errortext" := "Error::StopNerve() - Invalid nerve name  ["+nerve_name+"]"};
 	endif
 endfunction
 

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-10 13:56:44 UTC (rev 99)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-11 10:54:33 UTC (rev 100)
@@ -71,12 +71,12 @@
 	
 	var npc_cfg := ReadConfigFile(":"+template.package+":npcdesc");
 	if ( npc_cfg.errortext )
-		return error{"errortext":="Error - NPC_GetNPCConfig():: Could not open :"+template.package+":npcdesc ->"+npc_cfg.errortext};
+		return error{"errortext":="Error::NPC_GetNPCConfig() - Could not open :"+template.package+":npcdesc ->"+npc_cfg.errortext};
 	endif
 	
 	var cfg_elem := npc_cfg[template.template];
 	if ( cfg_elem.errortext )
-		return error{"errortext":="Error - NPC_GetNPCConfig():: Could not find elem ["+template.template+"] ->"+cfg_elem.errortext};
+		return error{"errortext":="Error::NPC_GetNPCConfig() - Could not find elem ["+template.template+"] ->"+cfg_elem.errortext};
 	endif
 	
 	return cfg_elem;

Deleted: trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-10 13:56:44 UTC (rev 99)
+++ trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-11 10:54:33 UTC (rev 100)
@@ -1,38 +0,0 @@
-NPCTemplate TestNPC
-{
-	Name		Tester NPC
-	Script		:ai_brain:brain
-	ObjType		0x190
-	Color		0
-	TrueColor	0
-	Gender		0
-
-	STR		1
-	INT		1
-	DEX		1
-	HITS		1
-	MANA		1
-	STAM		1
-	AR		1
-	RunSpeed	255
-	
-	AISetting	CycleWait	i10
-	AISetting	IdleTicks	i5
-	AISetting	SleepWait	i1000
-	AISetting	ListenRange	i10
-	AISetting	AreaSize	i5
-	AISetting	DblClickRange	i10
-	AISetting	HearSpeech	i1
-	AISetting	HearGhosts	i1
-	
-	AIScript	Combat		:ai_brain:complete/testNPC/combat
-	AIScript	DblClick	:ai_brain:complete/testNPC/doubleClick
-	AIScript	Disengaged	:ai_brain:complete/testNPC/disengaged
-	AIScript	EnterArea	:ai_brain:complete/testNPC/enterArea
-	AIScript	GoneCriminal	:ai_brain:complete/testNPC/goneCriminal
-	AIScript	ItemGiven	:ai_brain:complete/testNPC/itemGiven
-	AIScript	LeftArea	:ai_brain:complete/testNPC/leftArea
-	AIScript	Listen		:ai_brain:complete/testNPC/listen
-	AIScript	Restart		:ai_brain:complete/testNPC/restart
-	AIScript	Sleep		:ai_brain:complete/testNPC/sleep
-}



From austin at berlios.de  Sun Sep 11 12:55:27 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 11 Sep 2005 12:55:27 +0200
Subject: [Poldistro-svn] r101 - in trunk/096/pkg/mobiles/ai_brain: . config
Message-ID: <200509111055.j8BAtRJr004764@sheep.berlios.de>

Author: austin
Date: 2005-09-11 12:55:15 +0200 (Sun, 11 Sep 2005)
New Revision: 101

Added:
   trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
Removed:
   trunk/096/pkg/mobiles/ai_brain/config/npcdesc.cfg
Log:


Deleted: trunk/096/pkg/mobiles/ai_brain/config/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/config/npcdesc.cfg	2005-09-11 10:54:33 UTC (rev 100)
+++ trunk/096/pkg/mobiles/ai_brain/config/npcdesc.cfg	2005-09-11 10:55:15 UTC (rev 101)
@@ -1,38 +0,0 @@
-NPCTemplate TestNPC
-{
-	Name		<Test NPC>
-	Script		:ai_brain:brain
-	ObjType		0x190
-	Color		0
-	TrueColor	0
-	Gender		0
-
-	STR		1
-	INT		1
-	DEX		1
-	HITS		1
-	MANA		1
-	STAM		1
-	AR		1
-	RunSpeed	255
-	
-	AISetting	CycleWait	i10
-	AISetting	IdleTicks	i5
-	AISetting	SleepWait	i1000
-	AISetting	ListenRange	i10
-	AISetting	AreaSize	i5
-	AISetting	DblClickRange	i10
-	AISetting	HearSpeech	i1
-	AISetting	HearGhosts	i1
-	
-	AIScript	Combat		:ai_brain:complete/testNPC/combat
-	AIScript	DblClick	:ai_brain:complete/testNPC/doubleClick
-	AIScript	Disengaged	:ai_brain:complete/testNPC/disengaged
-	AIScript	EnterArea	:ai_brain:complete/testNPC/enterArea
-	AIScript	GoneCriminal	:ai_brain:complete/testNPC/goneCriminal
-	AIScript	ItemGiven	:ai_brain:complete/testNPC/itemGiven
-	AIScript	LeftArea	:ai_brain:complete/testNPC/leftArea
-	AIScript	Listen		:ai_brain:complete/testNPC/listen
-	AIScript	Restart		:ai_brain:complete/testNPC/restart
-	AIScript	Sleep		:ai_brain:complete/testNPC/sleep
-}

Added: trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-11 10:54:33 UTC (rev 100)
+++ trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-11 10:55:15 UTC (rev 101)
@@ -0,0 +1,38 @@
+NPCTemplate TestNPC
+{
+	Name		<Test NPC>
+	Script		:ai_brain:brain
+	ObjType		0x190
+	Color		0
+	TrueColor	0
+	Gender		0
+
+	STR		1
+	INT		1
+	DEX		1
+	HITS		1
+	MANA		1
+	STAM		1
+	AR		1
+	RunSpeed	255
+	
+	AISetting	CycleWait	i10
+	AISetting	IdleTicks	i5
+	AISetting	SleepWait	i1000
+	AISetting	ListenRange	i10
+	AISetting	AreaSize	i5
+	AISetting	DblClickRange	i10
+	AISetting	HearSpeech	i1
+	AISetting	HearGhosts	i1
+	
+	AIScript	Combat		:ai_brain:complete/testNPC/combat
+	AIScript	DblClick	:ai_brain:complete/testNPC/doubleClick
+	AIScript	Disengaged	:ai_brain:complete/testNPC/disengaged
+	AIScript	EnterArea	:ai_brain:complete/testNPC/enterArea
+	AIScript	GoneCriminal	:ai_brain:complete/testNPC/goneCriminal
+	AIScript	ItemGiven	:ai_brain:complete/testNPC/itemGiven
+	AIScript	LeftArea	:ai_brain:complete/testNPC/leftArea
+	AIScript	Listen		:ai_brain:complete/testNPC/listen
+	AIScript	Restart		:ai_brain:complete/testNPC/restart
+	AIScript	Sleep		:ai_brain:complete/testNPC/sleep
+}



From austin at berlios.de  Sun Sep 11 13:40:26 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 11 Sep 2005 13:40:26 +0200
Subject: [Poldistro-svn] r102 - trunk/096/pkg/commands/gm
Message-ID: <200509111140.j8BBeQOa012570@sheep.berlios.de>

Author: austin
Date: 2005-09-11 13:40:25 +0200 (Sun, 11 Sep 2005)
New Revision: 102

Added:
   trunk/096/pkg/commands/gm/getprop.src
Log:
It wasnt there.. so I copied the one I made on TSSE

Added: trunk/096/pkg/commands/gm/getprop.src
===================================================================
--- trunk/096/pkg/commands/gm/getprop.src	2005-09-11 10:55:15 UTC (rev 101)
+++ trunk/096/pkg/commands/gm/getprop.src	2005-09-11 11:40:25 UTC (rev 102)
@@ -0,0 +1,20 @@
+//
+// getprop.src
+//
+// Show information on a mob/items members
+//
+// Austin
+// Created: 9/24/2001 11:25AM
+// Updated: 9/24/2001 11:25AM
+//
+
+use uo;
+
+program propertyinfo(who, property)
+	var targ := target(who);
+	if ( !targ )
+		SendSysMessage(who, "Cancelled");
+		return;
+	endif
+	SendSysMessage(who, "Property "+property+": "+targ.get_member(property));
+endprogram



From austin at berlios.de  Sun Sep 11 15:41:59 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 11 Sep 2005 15:41:59 +0200
Subject: [Poldistro-svn] r103 - trunk/096/batchfiles
Message-ID: <200509111341.j8BDfxjV003587@sheep.berlios.de>

Author: austin
Date: 2005-09-11 15:41:58 +0200 (Sun, 11 Sep 2005)
New Revision: 103

Modified:
   trunk/096/batchfiles/cleanup.bat
   trunk/096/batchfiles/ecompile.bat
   trunk/096/batchfiles/realmgen.bat
Log:
Changed 'quit' to 'back'

Modified: trunk/096/batchfiles/cleanup.bat
===================================================================
--- trunk/096/batchfiles/cleanup.bat	2005-09-11 11:40:25 UTC (rev 102)
+++ trunk/096/batchfiles/cleanup.bat	2005-09-11 13:41:58 UTC (rev 103)
@@ -17,7 +17,7 @@
 ECHO  [ g ] - Remove *.dbg.txt
 ECHO  [ h ] - Remove other (disabled)
 ECHO.
-ECHO  [ x ] - Quit
+ECHO  [ x ] - Back
 
 SET /p CMD=Command:
 

Modified: trunk/096/batchfiles/ecompile.bat
===================================================================
--- trunk/096/batchfiles/ecompile.bat	2005-09-11 11:40:25 UTC (rev 102)
+++ trunk/096/batchfiles/ecompile.bat	2005-09-11 13:41:58 UTC (rev 103)
@@ -17,7 +17,7 @@
 ECHO  [ b ] - Compile all .src scripts.
 ECHO  [ c ] - Compile all scripts and output to POL\ecompile.log
 ECHO.
-ECHO  [ x ] - Quit
+ECHO  [ x ] - Back
 
 SET /p CMD=Command:
 

Modified: trunk/096/batchfiles/realmgen.bat
===================================================================
--- trunk/096/batchfiles/realmgen.bat	2005-09-11 11:40:25 UTC (rev 102)
+++ trunk/096/batchfiles/realmgen.bat	2005-09-11 13:41:58 UTC (rev 103)
@@ -24,7 +24,7 @@
 ECHO  [ i ] - Build 'Tokuno' realm        (mapid=4)
 ECHO  [ j ] - Build all realms - Takes a very long time!
 ECHO.
-ECHO  [ x ] - Quit
+ECHO  [ x ] - Back
 
 SET /p CMD=Command:
 



From austin at berlios.de  Sun Sep 11 15:46:59 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 11 Sep 2005 15:46:59 +0200
Subject: [Poldistro-svn] r104 - in trunk/096/pkg/mobiles/ai_brain: commands/gm complete/testnpc
Message-ID: <200509111346.j8BDkx6W003865@sheep.berlios.de>

Author: austin
Date: 2005-09-11 15:46:58 +0200 (Sun, 11 Sep 2005)
New Revision: 104

Added:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/restart.src
Modified:
   trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/cycle.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/goneCriminal.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src	2005-09-11 13:41:58 UTC (rev 103)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src	2005-09-11 13:46:58 UTC (rev 104)
@@ -2,7 +2,7 @@
 use uo;
 use os;
 
-include ":ai_brain:include/npcCommands";
+include "include/sysEvent";
 
 program MakeAttack(who)
 	SendSysMessage(who, "Select an npc (attacker).");
@@ -19,5 +19,6 @@
 		return 0;
 	endif
 	
-	AI_Attack(targ, targ2);
+	var event := struct{"type":=SYSEVENT_ENGAGED, "source":=targ2};
+	SendEvent(targ, event);
 endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src	2005-09-11 13:41:58 UTC (rev 103)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src	2005-09-11 13:46:58 UTC (rev 104)
@@ -9,10 +9,43 @@
 	var nerve_name	:= params[2];
 	var event	:= params[3];
 	var settings	:= params[4];
-	var scripts	:= params[5];
-	params := array{}; // Not needed anymore.
+	//var scripts	:= params[5];
+	params := 0; // Not needed anymore.
 	
+	//Store it here so it does not have to do the math over and over.
+	var flee_level := GetVitalMaximumValue(npc, "Life") * (CInt(settings["FleeLevel"])/100);
+	
+	var opponent := event.source;
+	AI_SetOpponent(npc, opponent);
+	
 	while ( npc )
-		// Do stuff here
+		var dist := Distance(npc, opponent);
+		if ( GetHitPoints(npc) < flee_level )
+			AI_Disengage(npc);
+			AI_Flee(npc, opponent);
+			AI_EndNerve(npc, nerve_name);
+		// Is the opponent dead, yet?
+		elseif ( opponent.dead || !opponent )
+			AI_SetWarMode(npc, 0);
+			AI_EndNerve(npc, nerve_name);
+		// Did they hide??
+		elseif ( opponent.hidden || opponent.concealed )
+			AI_SetWarMode(npc, 0);
+			AI_EndNerve(npc, nerve_name);
+		elseif ( dist > 20 )
+			AI_SetWarMode(npc, 0);
+			AI_EndNerve(npc, nerve_name);
+		elseif ( (dist > 10) && ( !CheckLineOfSight(npc, opponent)) )
+			AI_Disengage(npc);
+			AI_EndNerve(npc, nerve_name);
+		elseif( dist > 1 )
+			AI_Move(npc, opponent, NEMOVE_TOWARD, NEMOVE_RUN, WAKEUP, 100);
+		endif
+
+		sleepms(600);
+		AI_ClearThoughts(npc, CLR_NERVE);
 	endwhile
 endprogram
+
+function FleeOpponent(npc, opponent)
+	
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/cycle.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/cycle.src	2005-09-11 13:41:58 UTC (rev 103)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/cycle.src	2005-09-11 13:46:58 UTC (rev 104)
@@ -10,7 +10,7 @@
 	var event	:= params[3];
 	var settings	:= params[4];
 	var scripts	:= params[5];
-	params := array{}; // Not needed anymore.
+	params := 0; // Not needed anymore.
 	
 	while ( npc )
 		// Do stuff here

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src	2005-09-11 13:41:58 UTC (rev 103)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src	2005-09-11 13:46:58 UTC (rev 104)
@@ -10,7 +10,7 @@
 	var event	:= params[3];
 	var settings	:= params[4];
 	var scripts	:= params[5];
-	params := array{}; // Not needed anymore.
+	params := 0; // Not needed anymore.
 	
 	while ( npc )
 		// Do stuff here

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src	2005-09-11 13:41:58 UTC (rev 103)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src	2005-09-11 13:46:58 UTC (rev 104)
@@ -10,7 +10,7 @@
 	var event	:= params[3];
 	//var settings	:= params[4];
 	//var scripts	:= params[5];
-	params := array{}; // Not needed anymore.
+	params := 0; // Not needed anymore.
 	
 	while ( npc )
 		if ( event.source )

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src	2005-09-11 13:41:58 UTC (rev 103)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src	2005-09-11 13:46:58 UTC (rev 104)
@@ -10,7 +10,7 @@
 	var event	:= params[3];
 	var settings	:= params[4];
 	var scripts	:= params[5];
-	params := array{}; // Not needed anymore.
+	params := 0; // Not needed anymore.
 	
 	while ( npc )
 		// Do stuff here

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/goneCriminal.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/goneCriminal.src	2005-09-11 13:41:58 UTC (rev 103)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/goneCriminal.src	2005-09-11 13:46:58 UTC (rev 104)
@@ -10,7 +10,7 @@
 	var event	:= params[3];
 	var settings	:= params[4];
 	var scripts	:= params[5];
-	params := array{}; // Not needed anymore.
+	params := 0; // Not needed anymore.
 	
 	while ( npc )
 		// Do stuff here

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src	2005-09-11 13:41:58 UTC (rev 103)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src	2005-09-11 13:46:58 UTC (rev 104)
@@ -10,7 +10,7 @@
 	var event	:= params[3];
 	var settings	:= params[4];
 	var scripts	:= params[5];
-	params := array{}; // Not needed anymore.
+	params := 0; // Not needed anymore.
 	
 	while ( npc )
 		//Do stuff here.

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src	2005-09-11 13:41:58 UTC (rev 103)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src	2005-09-11 13:46:58 UTC (rev 104)
@@ -10,7 +10,7 @@
 	var event	:= params[3];
 	var settings	:= params[4];
 	var scripts	:= params[5];
-	params := array{}; // Not needed anymore.
+	params := 0; // Not needed anymore.
 	
 	while ( npc )
 		// Do stuff here

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src	2005-09-11 13:41:58 UTC (rev 103)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src	2005-09-11 13:46:58 UTC (rev 104)
@@ -11,7 +11,7 @@
 	var event	:= params[3];
 	//var settings	:= params[4];
 	//var scripts	:= params[5];
-	params := array{}; // Not needed anymore.
+	params := 0; // Not needed anymore.
 	
 	while ( npc )
 		if ( event.source )

Added: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/restart.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/restart.src	2005-09-11 13:41:58 UTC (rev 103)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/restart.src	2005-09-11 13:46:58 UTC (rev 104)
@@ -0,0 +1,17 @@
+use uo;
+use os;
+
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcCommands";
+
+program BrainNerve(params)
+	var npc		:= params[1];
+	//var settings	:= params[2];
+	//var scripts	:= params[3];
+	params := 0; // Not needed anymore.
+	
+	foreach nerve_name in (LoadNerves(npc))
+		StopNerve(npc, nerve_name);
+	endforeach
+endprogram		
+	
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src	2005-09-11 13:41:58 UTC (rev 103)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src	2005-09-11 13:46:58 UTC (rev 104)
@@ -6,10 +6,10 @@
 
 program BrainNerve(params)
 	var npc		:= params[1];
-	//var nerve_name	:= params[2];
+	//var nerve_name:= params[2];
 	//var settings	:= params[3];
 	//var scripts	:= params[4];
-	params := array{}; // Not needed anymore.
+	params := 0; // Not needed anymore.
 	
 	foreach nerve_name in (LoadNerves(npc).keys())
 		if ( nerve_name.flags & NF_CONTINUE_ON_SLEEP )

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src	2005-09-11 13:41:58 UTC (rev 103)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src	2005-09-11 13:46:58 UTC (rev 104)
@@ -10,7 +10,7 @@
 	var event	:= params[3];
 	//var settings	:= params[4];
 	//var scripts	:= params[5];
-	params := array{}; // Not needed anymore.
+	params := 0; // Not needed anymore.
 	
 	while ( npc )
 		if ( event )



From austin at berlios.de  Tue Sep 13 09:30:31 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 13 Sep 2005 09:30:31 +0200
Subject: [Poldistro-svn] r105 - trunk/096/batchfiles
Message-ID: <200509130730.j8D7UVWF016920@sheep.berlios.de>

Author: austin
Date: 2005-09-13 09:30:30 +0200 (Tue, 13 Sep 2005)
New Revision: 105

Modified:
   trunk/096/batchfiles/cleanup.bat
Log:
remove custom file type works now

Modified: trunk/096/batchfiles/cleanup.bat
===================================================================
--- trunk/096/batchfiles/cleanup.bat	2005-09-11 13:46:58 UTC (rev 104)
+++ trunk/096/batchfiles/cleanup.bat	2005-09-13 07:30:30 UTC (rev 105)
@@ -15,7 +15,7 @@
 ECHO  [ e ] - Remove *.lst files
 ECHO  [ f ] - Remove *.dbg files
 ECHO  [ g ] - Remove *.dbg.txt
-ECHO  [ h ] - Remove other (disabled)
+ECHO  [ h ] - Remove other
 ECHO.
 ECHO  [ x ] - Back
 
@@ -29,6 +29,7 @@
 IF /i "%CMD%" == "e" SET REMOVE_TYPE=*.lst
 IF /i "%CMD%" == "f" SET REMOVE_TYPE=*.dbg
 IF /i "%CMD%" == "g" SET REMOVE_TYPE=*.dbg.txt
+IF /i "%CMD%" == "h" GOTO DELETE_CUSTOM()
 IF /i "%CMD%" == "x" GOTO :QUIT()
 
 IF NOT "%REMOVE_TYPE%"=="" GOTO REMOVE()
@@ -44,8 +45,13 @@
 
 REM -- REMOVE FUNCTION()
 :REMOVE()
-DEL /S %REMOVE_TYPE%
+IF NOT "%REMOVE_TYPE%"=="" DEL /S %REMOVE_TYPE%
 GOTO RETURN_TO_MENU()
 
+REM -- DELETE_CUSTOM FUNCTION()
+:DELETE_CUSTOM()
+SET /p REMOVE_TYPE=File type to remove (e.g. *.bak or orphans.txt):
+GOTO REMOVE()
+
 REM -- QUIT() FUNCTION
 :QUIT()
\ No newline at end of file



From austin at berlios.de  Tue Sep 13 10:32:51 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 13 Sep 2005 10:32:51 +0200
Subject: [Poldistro-svn] r106 - trunk/096/pkg/systems/merchantnodes
Message-ID: <200509130832.j8D8WpSc031974@sheep.berlios.de>

Author: austin
Date: 2005-09-13 10:32:51 +0200 (Tue, 13 Sep 2005)
New Revision: 106

Modified:
   trunk/096/pkg/systems/merchantnodes/merchantNodeControl.src
Log:
Renamed 'root' to 'root_canal' (which it often feels like im getting when I see this old distro code!) so it does not conflict with the math.em Root() function.

Modified: trunk/096/pkg/systems/merchantnodes/merchantNodeControl.src
===================================================================
--- trunk/096/pkg/systems/merchantnodes/merchantNodeControl.src	2005-09-13 07:30:30 UTC (rev 105)
+++ trunk/096/pkg/systems/merchantnodes/merchantNodeControl.src	2005-09-13 08:32:51 UTC (rev 106)
@@ -233,22 +233,26 @@
 
 function SpawnAll()
 	foreach thing in spawn
-		var type	 := thing[1];
-		var root	 := thing[2];
-		var status := thing[3];
+		var type	:= thing[1];
+		// 9-13-2005 Austin
+		// New function in math.em makes 'root' here not compile.
+		// I renamed the var to 'root_canal' which it often feels 
+		// like I am getting when i work on old distro code.
+		var root_canal	:= thing[2];
+		var status 	:= thing[3];
 		var chest	:= thing[4];
 		var chk := 0;
 		foreach npc in npclist
-			if(root == GetObjProperty(npc, "Anchor"))
+			if(root_canal == GetObjProperty(npc, "Anchor"))
 				chk := 1;
 			endif
 		endforeach
 		if((chk == 0) and (status == 1))
 			var new := 0;
 			while((!new) and item)
-				new := CreateNpcFromTemplate(type, root[1], root[2], root[3], 0, item.realm);
+				new := CreateNpcFromTemplate(type, root_canal[1], root_canal[2], root_canal[3], 0, item.realm);
 				if(new)
-					SetObjProperty(new, "Anchor", array(root[1], root[2], root[3]));
+					SetObjProperty(new, "Anchor", array(root_canal[1], root_canal[2], root_canal[3]));
 					SetObjProperty(new, "restockserial", chest);
 					npclist.append(new);
 				endif



From austin at berlios.de  Tue Sep 13 11:28:58 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 13 Sep 2005 11:28:58 +0200
Subject: [Poldistro-svn] r107 - trunk/096/pkg/commands/coun
Message-ID: <200509130928.j8D9Sw7P023819@sheep.berlios.de>

Author: austin
Date: 2005-09-13 11:28:57 +0200 (Tue, 13 Sep 2005)
New Revision: 107

Modified:
   trunk/096/pkg/commands/coun/nsight.src
Log:
Lasts longer, supports varying light levels, has -1 to restore real light level.

Modified: trunk/096/pkg/commands/coun/nsight.src
===================================================================
--- trunk/096/pkg/commands/coun/nsight.src	2005-09-13 08:32:51 UTC (rev 106)
+++ trunk/096/pkg/commands/coun/nsight.src	2005-09-13 09:28:57 UTC (rev 107)
@@ -2,8 +2,15 @@
 use util;
 
 
-program command_nsight(caster)
-	caster.setlightlevel(0, 600);
-
-	return;
+program command_nsight(who, level)
+	level := CInt(level);
+	if ( level >= 0 )
+		who.SetLightLevel(level, 9000);
+	else
+		// -1 restores the real light level
+		SendSysMessage(who, "Restoring normal vision.");
+		who.SetLightLevel(1, 0);
+	endif
+	
+	return 1;
 endprogram



From austin at berlios.de  Tue Sep 13 12:14:12 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 13 Sep 2005 12:14:12 +0200
Subject: [Poldistro-svn] r108 - trunk/096/pkg/commands/test
Message-ID: <200509131014.j8DAECP8004387@sheep.berlios.de>

Author: austin
Date: 2005-09-13 12:14:12 +0200 (Tue, 13 Sep 2005)
New Revision: 108

Modified:
   trunk/096/pkg/commands/test/startscript.src
Log:
Actually informs you if the script started or not!

Modified: trunk/096/pkg/commands/test/startscript.src
===================================================================
--- trunk/096/pkg/commands/test/startscript.src	2005-09-13 09:28:57 UTC (rev 107)
+++ trunk/096/pkg/commands/test/startscript.src	2005-09-13 10:14:12 UTC (rev 108)
@@ -1,8 +1,12 @@
 use os;
+use uo;
 
-program textcmd_start( who, scriptname )
-
-  who := who;
-  start_script( scriptname );
-
-endprogram
+program textcmd_start(who, script_name)
+	var script := start_script(script_name);
+	
+	if ( script.errortext )
+		SendSysMessage(who, "Error -"+script.errortext);
+	else
+		SendSysMessage(who, "Started " + script_name);
+	endif
+endprogram
\ No newline at end of file



From austin at berlios.de  Tue Sep 13 12:29:43 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 13 Sep 2005 12:29:43 +0200
Subject: [Poldistro-svn] r109 - in trunk/096/pkg/mobiles/ai_brain: complete/testnpc include include/braincore
Message-ID: <200509131029.j8DAThuO005823@sheep.berlios.de>

Author: austin
Date: 2005-09-13 12:29:42 +0200 (Tue, 13 Sep 2005)
New Revision: 109

Added:
   trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc
Modified:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/restart.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src
   trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcError.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
Log:
Updates so far tonight...

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src	2005-09-13 10:14:12 UTC (rev 108)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src	2005-09-13 10:29:42 UTC (rev 109)
@@ -13,6 +13,6 @@
 	params := 0; // Not needed anymore.
 	
 	while ( npc )
-		// Do stuff here
+		//
 	endwhile
 endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/restart.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/restart.src	2005-09-13 10:14:12 UTC (rev 108)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/restart.src	2005-09-13 10:29:42 UTC (rev 109)
@@ -10,8 +10,7 @@
 	//var scripts	:= params[3];
 	params := 0; // Not needed anymore.
 	
-	foreach nerve_name in (LoadNerves(npc))
-		StopNerve(npc, nerve_name);
-	endforeach
-endprogram		
-	
\ No newline at end of file
+	KillNerves(npc);
+	
+	return 1;
+endprogram
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src	2005-09-13 10:14:12 UTC (rev 108)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src	2005-09-13 10:29:42 UTC (rev 109)
@@ -6,16 +6,17 @@
 
 program BrainNerve(params)
 	var npc		:= params[1];
-	//var nerve_name:= params[2];
+	var nerve_name	:= params[2];
 	//var settings	:= params[3];
 	//var scripts	:= params[4];
 	params := 0; // Not needed anymore.
 	
-	foreach nerve_name in (LoadNerves(npc).keys())
-		if ( nerve_name.flags & NF_CONTINUE_ON_SLEEP )
+	// Shut down appropriate nerves.
+	foreach nerve in (LoadNerves(npc))
+		if ( nerve.flags & NF_CONTINUE_ON_SLEEP )
 			continue;
-		else
-			StopNerve(npc, nerve_name);
+		elseif ( _nerve_iter != nerve_name )
+			StopNerve(npc, _nerve_iter);
 		endif
 		sleepms(2);
 	endforeach
@@ -23,7 +24,6 @@
 	while ( npc )
 		AI_Speak(npc, "ZzzzzZzz", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, NOWAKE);
 		AI_ClearThoughts(npc, CLR_NERVE);
-		sleep(20);
+		sleep(40);
 	endwhile
-endprogram		
-	
\ No newline at end of file
+endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-13 10:14:12 UTC (rev 108)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-13 10:29:42 UTC (rev 109)
@@ -106,11 +106,8 @@
 	if ( GetObjProperty(npc, "npc_info") )
 		//This can only happen if restart() was done on the npc or when POL starts up.
 		
-		SetWarmode(0);
-		//StopNerves();
-		
 		if ( g_scripts.Exists("Restart") )
-			var restart_script := Run_Script_To_Completion(g_scripts["Restart"], {npc, g_settings, g_scripts});
+			var restart_script := Run_Script_To_Completion(g_scripts["Restart"].script, {npc, g_settings, g_scripts});
 			if ( restart_script.errortext )
 				FatalError("Error::StartupScripts() - Restart script failed: "+restart_script.errortext);
 				return 0;
@@ -121,7 +118,7 @@
 		SetObjProperty(npc, "npc_info", npc_info);
 		
 		if ( g_scripts.Exists("Init") )
-			var init_script := Run_Script_To_Completion(g_scripts["Init"], {npc, g_settings, g_scripts});
+			var init_script := Run_Script_To_Completion(g_scripts["Init"].script, {npc, g_settings, g_scripts});
 			if ( init_script.errortext )
 				FatalError("Error::StartupScripts() - Init script failed:"+init_script.errortext);
 				return 0;

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc	2005-09-13 10:14:12 UTC (rev 108)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc	2005-09-13 10:29:42 UTC (rev 109)
@@ -1,6 +1,6 @@
 /*===============================================================
 * Current Version
-* NPC_COMMANDS.INC - v1.0
+* NPCCOMMANDS.INC - v1.0
 * Updated 8/31/2005 6:38AM
 *
 * -- Revision v1.0 --

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcError.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcError.inc	2005-09-13 10:14:12 UTC (rev 108)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcError.inc	2005-09-13 10:29:42 UTC (rev 109)
@@ -1,6 +1,6 @@
 /*===============================================================
 * Current Version
-* NPC_ERRORS.INC - v1.0
+* NPCERRORS.INC - v1.0
 * Updated 8/31/2005 5:08AM
 *
 * -- Revision v1.0 --

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc	2005-09-13 10:14:12 UTC (rev 108)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc	2005-09-13 10:29:42 UTC (rev 109)
@@ -1,6 +1,6 @@
 /*===============================================================
 * Current Version
-* NPC_UTIL.INC - v1.0
+* NPCUTIL.INC - v1.0
 * Updated 9/4/2005 3:43PM
 *
 * -- Revision v1.0 --

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc	2005-09-13 10:14:12 UTC (rev 108)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc	2005-09-13 10:29:42 UTC (rev 109)
@@ -1,6 +1,6 @@
 /*===============================================================
 * Current Version
-* NERVES.INC - v1.0
+* NPCNERVES.INC - v1.0
 * Updated 9/11/2005 2:06AM
 *
 * -- Revision v1.0 --

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-13 10:14:12 UTC (rev 108)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc	2005-09-13 10:29:42 UTC (rev 109)
@@ -1,6 +1,6 @@
 /*===============================================================
 * Current Version
-* NPC_SETTINGS.INC - v1.0
+* NPCSETTINGS.INC - v1.0
 * Updated 9/8/2005 5:21AM
 *
 * -- Revision v1.0 --

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-13 10:14:12 UTC (rev 108)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-13 10:29:42 UTC (rev 109)
@@ -1,6 +1,6 @@
 /*===============================================================
 * Current Version
-* NPC_UTIL.INC - v1.0
+* NPCUTIL.INC - v1.0
 * Updated 8/31/2005 4:23AM
 *
 * -- Revision v1.0 --

Added: trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc	2005-09-13 10:14:12 UTC (rev 108)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc	2005-09-13 10:29:42 UTC (rev 109)
@@ -0,0 +1,112 @@
+/*===============================================================
+* Current Version
+* NPCWATCHLIST.INC - v1.0
+* Updated 9/13/2005 3:21AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+
+/////////////////////////////////////////////////////////////////
+// * Function List *
+//
+//
+/////////////////////////////////////////////////////////////////
+
+/*
+ * NPC_GetWatchList(npc)
+ *
+ * Purpose
+ * 
+ *
+ * Parameters
+ * npc:	
+ *
+ * Return value
+ * 
+ *
+ */
+function NPC_LoadWatchList(npc)
+	var watch_dict := GetObjProperty(npc, "#WatchList");
+	if ( Lower(TypeOf(watch_dict)) != "dictionary" )
+		watch_dict := dictionary;
+	endif
+	
+	return watch_dict;
+endfunction
+
+/*
+ * NPC_SaveWatchList(npc)
+ *
+ * Purpose
+ * 
+ *
+ * Parameters
+ * npc:	
+ *
+ * Return value
+ * 
+ *
+ */
+function NPC_SaveWatchList(npc, dict_list)
+	SetObjProprty(npc, "#WatchList", dict_list);
+endfunction
+
+/*
+ * NPC_AddToWatchList(npc, mobile)
+ *
+ * Purpose
+ * 
+ *
+ * Parameters
+ * npc:	
+ *
+ * Return value
+ * 
+ *
+ */
+function NPC_AddToWatchList(npc, mobile)
+	var watch_dict := NPC_GetWatchList(npc);
+	if ( !watch_dict.Exists(mobile.serial) )
+		watch_dict.Insert(mobile.serial, 1);
+		NPC_SaveWatchList(npc, watch_dict);
+	endif
+endfunction
+
+/*
+ * NPC_RemoveFromWatchList(npc)
+ *
+ * Purpose
+ * 
+ *
+ * Parameters
+ * npc:	
+ *
+ * Return value
+ * 
+ *
+ */
+function NPC_RemoveFromWatchList(npc, mobile)
+	
+endfunction
+
+/*
+ * NPC_IsInWatchList(npc, mobile)
+ *
+ * Purpose
+ * 
+ *
+ * Parameters
+ * npc:	
+ *
+ * Return value
+ * 
+ *
+ */
+function NPC_IsInWatchList(npc, mobile)
+
+endfunction



From austin at berlios.de  Tue Sep 13 13:02:54 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 13 Sep 2005 13:02:54 +0200
Subject: [Poldistro-svn] r110 - trunk/096/pkg/mobiles/ai_brain/include
Message-ID: <200509131102.j8DB2sol009000@sheep.berlios.de>

Author: austin
Date: 2005-09-13 13:02:52 +0200 (Tue, 13 Sep 2005)
New Revision: 110

Modified:
   trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc
Log:
Watch lists!

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc	2005-09-13 10:29:42 UTC (rev 109)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc	2005-09-13 11:02:52 UTC (rev 110)
@@ -14,20 +14,25 @@
 /////////////////////////////////////////////////////////////////
 // * Function List *
 //
+// NPC_AddToWatchList(npc, mobile)
+// NPC_IsInWatchList(npc, mobile)
+// NPC_LoadWatchList(npc)
+// NPC_RemoveFromWatchList(npc, mobile)
+// NPC_SaveWatchList(npc, dict_list)
 //
 /////////////////////////////////////////////////////////////////
 
 /*
- * NPC_GetWatchList(npc)
+ * NPC_LoadWatchList(npc)
  *
  * Purpose
- * 
+ * Loads the watch list on an npc.
  *
  * Parameters
- * npc:	
+ * npc:	NPC to load the watch list from.
  *
  * Return value
- * 
+ * Returns a dictionary
  *
  */
 function NPC_LoadWatchList(npc)
@@ -43,37 +48,47 @@
  * NPC_SaveWatchList(npc)
  *
  * Purpose
- * 
+ * Saves the NPC's watch list.
  *
  * Parameters
- * npc:	
+ * npc:		NPC to save the watch list on.
+ * dict_list:	Dictionary containing serials the npc is watching.
  *
  * Return value
- * 
+ * Returns the result of SetObjProperty()
  *
  */
 function NPC_SaveWatchList(npc, dict_list)
-	SetObjProprty(npc, "#WatchList", dict_list);
+	SetObjProperty(npc, "#WatchList", dict_list);
 endfunction
 
 /*
  * NPC_AddToWatchList(npc, mobile)
  *
  * Purpose
- * 
+ * Adds a mobile to the npc's watch list.
  *
  * Parameters
- * npc:	
+ * npc:		NPC that will have its list added to.
+ * mobile:	Mobile to add to the watch list.
  *
  * Return value
- * 
+ * Returns 1 if the mobile was added.
  *
  */
 function NPC_AddToWatchList(npc, mobile)
-	var watch_dict := NPC_GetWatchList(npc);
-	if ( !watch_dict.Exists(mobile.serial) )
-		watch_dict.Insert(mobile.serial, 1);
+	if ( mobile.IsA(POLCLASS_MOBILE) )
+		mobile := mobile.serial;
+	endif
+	
+	var watch_dict := NPC_LoadWatchList(npc);
+	if ( !watch_dict.Exists(mobile) )
+		watch_dict.Insert(mobile, 1);
 		NPC_SaveWatchList(npc, watch_dict);
+		
+		return 1;
+	else
+		return 0;
 	endif
 endfunction
 
@@ -81,32 +96,49 @@
  * NPC_RemoveFromWatchList(npc)
  *
  * Purpose
- * 
+ * Removes a mobile from the npc's watch list.
  *
  * Parameters
- * npc:	
+ * npc:		NPC that will have its list modified.
+ * mobile:	Mobile to remove from the watch list.
  *
  * Return value
- * 
+ * Returns 1 if the mobile was removed.
  *
  */
 function NPC_RemoveFromWatchList(npc, mobile)
+	if ( mobile.IsA(POLCLASS_MOBILE) )
+		mobile := mobile.serial;
+	endif
 	
+	var watch_dict := NPC_LoadWatchList(npc);
+	if ( watch_dict.Exists(mobile) )
+		watch_dict.Erase(mobile);
+		NPC_SaveWatchList(npc, watch_dict);
+	else
+		return 0;
+	endif
 endfunction
 
 /*
  * NPC_IsInWatchList(npc, mobile)
  *
  * Purpose
- * 
+ * Checks if a mobile is in an npc's watch list.
  *
  * Parameters
- * npc:	
+ * npc:		NPC with the list to check
+ * mobile:	Mobile that will be checked for in the list.
  *
  * Return value
- * 
+ * Returns 1 if the mobile is in the list.
  *
  */
 function NPC_IsInWatchList(npc, mobile)
-
+	if ( mobile.IsA(POLCLASS_MOBILE) )
+		mobile := mobile.serial;
+	endif
+	
+	var watch_dict := NPC_LoadWatchList(npc);
+	return watch_dict.Exists(mobile);
 endfunction



From austin at berlios.de  Tue Sep 13 13:21:59 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 13 Sep 2005 13:21:59 +0200
Subject: [Poldistro-svn] r111 - in trunk/096/pkg/mobiles/ai_brain: . complete/testnpc include
Message-ID: <200509131121.j8DBLxnw022985@sheep.berlios.de>

Author: austin
Date: 2005-09-13 13:21:58 +0200 (Tue, 13 Sep 2005)
New Revision: 111

Modified:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src
   trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc
   trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src	2005-09-13 11:02:52 UTC (rev 110)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src	2005-09-13 11:21:58 UTC (rev 111)
@@ -3,16 +3,37 @@
 
 include ":ai_brain:include/npcNerves";
 include ":ai_brain:include/npcCommands";
+include ":ai_brain:include/npcWatchList";
 
 program BrainNerve(params)
 	var npc		:= params[1];
-	var nerve_name	:= params[2];
+	//var nerve_name	:= params[2];
 	var event	:= params[3];
-	var settings	:= params[4];
-	var scripts	:= params[5];
+	//var settings	:= params[4];
+	//var scripts	:= params[5];
 	params := 0; // Not needed anymore.
 	
 	while ( npc )
-		//
+		if ( event )
+			case ( event.type )
+				SYSEVENT_ENTEREDAREA:
+					var source := event.source;
+					if ( source.npctemplate )
+						continue;
+						//Run_Script_To_Completion(settings["cycle_script"], {npc, settings});
+					elseif ( source.concealed )
+						continue;
+						//Do nothing
+					elseif ( source.acctname )
+						if ( NPC_AddToWatchList(npc, source) )
+							AI_WakeUp(npc);
+							AI_Speak(npc, "Ive added you to my watch list "+source.name);
+						endif
+					endif
+			endcase
+		endif
+		
+		sleepms(5);
+		event := wait_for_event(600);
 	endwhile
 endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src	2005-09-13 11:02:52 UTC (rev 110)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src	2005-09-13 11:21:58 UTC (rev 111)
@@ -3,16 +3,31 @@
 
 include ":ai_brain:include/npcNerves";
 include ":ai_brain:include/npcCommands";
+include ":ai_brain:include/npcWatchList";
 
 program BrainNerve(params)
 	var npc		:= params[1];
-	var nerve_name	:= params[2];
+	//var nerve_name	:= params[2];
 	var event	:= params[3];
-	var settings	:= params[4];
-	var scripts	:= params[5];
+	//var settings	:= params[4];
+	//var scripts	:= params[5];
 	params := 0; // Not needed anymore.
 	
 	while ( npc )
-		// Do stuff here
+		if ( event )
+			case ( event.type )
+				SYSEVENT_LEFTAREA:
+					var source := event.source;
+					if ( source.npctemplate )
+						continue;
+					else
+						NPC_RemoveFromWatchList(npc, source);
+						AI_Speak(npc, "I am no longer watching "+source.name);
+					endif
+			endcase
+		endif
+		
+		sleepms(5);
+		event := wait_for_event(600);
 	endwhile
 endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc	2005-09-13 11:02:52 UTC (rev 110)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc	2005-09-13 11:21:58 UTC (rev 111)
@@ -83,7 +83,7 @@
 	
 	var watch_dict := NPC_LoadWatchList(npc);
 	if ( !watch_dict.Exists(mobile) )
-		watch_dict.Insert(mobile, 1);
+		watch_dict.Insert(mobile, polcore().systime);
 		NPC_SaveWatchList(npc, watch_dict);
 		
 		return 1;

Modified: trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-13 11:02:52 UTC (rev 110)
+++ trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-13 11:21:58 UTC (rev 111)
@@ -28,7 +28,7 @@
 	AIScript	Combat		:ai_brain:complete/testNPC/combat
 	AIScript	DblClick	:ai_brain:complete/testNPC/doubleClick
 	AIScript	Disengaged	:ai_brain:complete/testNPC/disengaged
-	AIScript	EnterArea	:ai_brain:complete/testNPC/enterArea
+	AIScript	EnterArea	:ai_brain:complete/testNPC/enteredArea
 	AIScript	GoneCriminal	:ai_brain:complete/testNPC/goneCriminal
 	AIScript	ItemGiven	:ai_brain:complete/testNPC/itemGiven
 	AIScript	LeftArea	:ai_brain:complete/testNPC/leftArea



From austin at berlios.de  Tue Sep 13 13:48:47 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 13 Sep 2005 13:48:47 +0200
Subject: [Poldistro-svn] r112 - in trunk/096/pkg/mobiles/ai_brain: commands/gm include
Message-ID: <200509131148.j8DBmlF8029463@sheep.berlios.de>

Author: austin
Date: 2005-09-13 13:48:47 +0200 (Tue, 13 Sep 2005)
New Revision: 112

Modified:
   trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
   trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
Log:
.createnpc now supports packages!

Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src	2005-09-13 11:21:58 UTC (rev 111)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src	2005-09-13 11:48:47 UTC (rev 112)
@@ -1,6 +1,8 @@
 use uo;
 use os;
+use polsys;
 
+include ":ai_brain:include/npcUtil";
 include ":datafile:include/datafile";
 include ":gumps:include/gumps";
 include ":gumps:include/gumps_ex";
@@ -8,7 +10,7 @@
 const UNCACHE_BTN	:= 0xF000000;
 const DEFAULT_CATEGORY	:= "None";
 
-var data_file := DFOpenDataFile(":ai_brain:createnpc", DF_CREATE);
+var g_datafile := DFOpenDataFile(":ai_brain:createnpc", DF_CREATE);
 
 program MakeNPC(who, template)
 	if ( !template )
@@ -38,8 +40,8 @@
 		SendSysMessage(who, "Cancelled");
 		return 0;
 	elseif ( input[UNCACHE_BTN] )
-		foreach elem_name in DFGetElemNames(data_file)
-			data_file.DeleteElement(elem_name);
+		foreach elem_name in DFGetElemNames(g_datafile)
+			g_datafile.DeleteElement(elem_name);
 			sleepms(2);
 		endforeach
 		
@@ -54,13 +56,15 @@
 		return 0;
 	endif
 	
-	var elem_names := GetConfigStringKeys(ReadConfigFile("::npcdesc"));
+	var elem_names := GetTemplateList();
+	elem_names.Sort();
+	
 	return elem_names[input[0]];
 endfunction
 
 function RetrieveGump(category_name)
 	if ( category_name == "Index" )
-		var data_elem := DFFindElement(data_file, "Index");
+		var data_elem := DFFindElement(g_datafile, "Index");
 		var gump := data_elem.GetProp("Gump");
 		if ( !gump )
 			gump := BuildIndexGump();
@@ -68,7 +72,7 @@
 		
 		return gump;
 	else
-		var data_elem := DFFindElement(data_file, category_name);
+		var data_elem := DFFindElement(g_datafile, category_name);
 		var gump := data_elem.GetProp("Gump");
 		if ( !gump )
 			gump := BuildNPCGump(category_name);
@@ -79,7 +83,7 @@
 endfunction
 
 function GetCategoryNames()
-	var data_elem := DFFindElement(data_file, "Index");
+	var data_elem := DFFindElement(g_datafile, "Index");
 	var category_names := data_elem.GetProp("CategoryNames");
 	if ( !category_names )
 		category_names := SetupCategoryNames();
@@ -90,17 +94,29 @@
 
 function SetupCategoryNames()
 	var category_names := (SortNPCs().keys());
-	var data_elem := DFFindElement(data_file, "Index", DF_CREATE);
+	var data_elem := DFFindElement(g_datafile, "Index", DF_CREATE);
 	data_elem.SetProp("CategoryNames", category_names);
 	
 	return category_names;
 endfunction
 
+function GetTemplateList()
+	var data_elem := DFFindElement(g_datafile, "Index");
+	var template_names := data_elem.GetProp("TemplateNames");
+	if ( !template_names )
+		template_names := NPC_GetAllTemplateNames();
+		template_names.Sort();
+		data_elem.SetProp("TemplateNames", template_names);
+	endif
+	
+	return template_names;
+endfunction
+
 function BuildIndexGump()
 	Set_Priority(100);
 	var category_names := GetCategoryNames();
 	
-	var data_elem := DFFindElement(data_file, "Index", DF_CREATE);
+	var data_elem := DFFindElement(g_datafile, "Index", DF_CREATE);
 	data_elem.SetProp("CategoryNames", category_names);
 	
 	var bkgnd_silvertrim := GFCfgConst("BackGrounds", "SILVERTRIM");
@@ -151,7 +167,7 @@
 		return error{"errortext":="Category name does not exist."};
 	endif
 	
-	var data_elem := DFFindElement(data_file, Lower(category_name), DF_CREATE);	
+	var data_elem := DFFindElement(g_datafile, Lower(category_name), DF_CREATE);	
 	npc_list := npc_list[category_name];
 
 	var bkgnd_silvertrim := GFCfgConst("BackGrounds", "SILVERTRIM");
@@ -188,24 +204,24 @@
 endfunction
 
 function SortNPCs()
-	var data_elem := DFFindElement(data_file, "Index", DF_CREATE);
+	var data_elem := DFFindElement(g_datafile, "Index", DF_CREATE);
 	var categories :=  data_elem.GetProp("NPCListSorted");
 	if ( categories )
 		return categories;
 	endif
 		
-	var npc_config := ReadConfigFile("::npcdesc");
-	var cfg_keys := GetConfigStringKeys(npc_config);
+	var elem_names := GetTemplateList();
+	elem_names.Sort();
 
 	categories := dictionary;
 	categories[DEFAULT_CATEGORY] := array{};
 
-	foreach template_name in (cfg_keys)
-		var cfg_elem := npc_config[template_name];
+	foreach template_name in (elem_names)
+		var cfg_elem := NPC_GetNPCConfig(template_name);
 		var template := struct;
 		template.+name :=template_name;
 		template.+pos :=_template_name_iter;
-		template.+color :=GetNameColor(npc_config[template_name].alignment);
+		template.+color :=GetNameColor(cfg_elem.alignment);
 
 		if ( !cfg_elem.category )
 			categories[DEFAULT_CATEGORY].append(template);

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-13 11:21:58 UTC (rev 111)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc	2005-09-13 11:48:47 UTC (rev 112)
@@ -9,6 +9,7 @@
 ===============================================================*/
 
 use uo;
+use polsys;
 use cfgfile;
 
 /*
@@ -81,3 +82,32 @@
 	
 	return cfg_elem;
 endfunction
+
+/*
+ * NPC_GetAllTemplateNames()
+ *
+ * Purpose
+ * Retrieves a list of all npc templates in the shard's npcdesc.cfg files
+ * 
+ * Parameters
+ *
+ * Return value
+ * Returns an array
+ *
+ */
+function NPC_GetAllTemplateNames()
+	var elem_names := array{};
+	elem_names := elem_names + GetConfigStringKeys(ReadConfigFile("::npcdesc"));
+	foreach package in (Packages())
+		if ( package.npcdesc )
+			var pkg_name := ":"+package.name+":";
+			foreach template_name in (GetConfigStringKeys(ReadConfigFile(pkg_name+"npcdesc")))
+				elem_names.Append(pkg_name+template_name);
+				sleepms(2);
+			endforeach
+		endif
+		sleepms(2);
+	endforeach
+
+	return elem_names;
+endfunction



From austin at berlios.de  Tue Sep 13 13:56:47 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 13 Sep 2005 13:56:47 +0200
Subject: [Poldistro-svn] r113 - trunk/096/pkg/mobiles/ai_brain/commands/gm
Message-ID: <200509131156.j8DBulkm030250@sheep.berlios.de>

Author: austin
Date: 2005-09-13 13:56:46 +0200 (Tue, 13 Sep 2005)
New Revision: 113

Modified:
   trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
Log:
optimized the code quite a bit too

Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src	2005-09-13 11:48:47 UTC (rev 112)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src	2005-09-13 11:56:46 UTC (rev 113)
@@ -57,7 +57,6 @@
 	endif
 	
 	var elem_names := GetTemplateList();
-	elem_names.Sort();
 	
 	return elem_names[input[0]];
 endfunction
@@ -86,20 +85,14 @@
 	var data_elem := DFFindElement(g_datafile, "Index");
 	var category_names := data_elem.GetProp("CategoryNames");
 	if ( !category_names )
-		category_names := SetupCategoryNames();
+		category_names := (SortNPCs().keys());
+		data_elem := DFFindElement(g_datafile, "Index", DF_CREATE);
+		data_elem.SetProp("CategoryNames", category_names);
 	endif
 	
 	return category_names;
 endfunction
 
-function SetupCategoryNames()
-	var category_names := (SortNPCs().keys());
-	var data_elem := DFFindElement(g_datafile, "Index", DF_CREATE);
-	data_elem.SetProp("CategoryNames", category_names);
-	
-	return category_names;
-endfunction
-
 function GetTemplateList()
 	var data_elem := DFFindElement(g_datafile, "Index");
 	var template_names := data_elem.GetProp("TemplateNames");
@@ -114,18 +107,11 @@
 
 function BuildIndexGump()
 	Set_Priority(100);
-	var category_names := GetCategoryNames();
-	
-	var data_elem := DFFindElement(g_datafile, "Index", DF_CREATE);
-	data_elem.SetProp("CategoryNames", category_names);
-	
-	var bkgnd_silvertrim := GFCfgConst("BackGrounds", "SILVERTRIM");
-	var bkgnd_dark_stone := GFCfgConst("BackGrounds", "DARK_STONE");
-	
+			
 	var gump := GFCreateGump();
 	GFPage(gump, 0);
-	GFResizePic(gump, 0, 0, bkgnd_silvertrim, 300, 480);
-	GFResizePic(gump, 10, 10, bkgnd_dark_stone, 280, 460);
+	GFResizePic(gump, 0, 0, GFCfgConst("BackGrounds", "SILVERTRIM"), 300, 480);
+	GFResizePic(gump, 10, 10, GFCfgConst("BackGrounds", "DARK_STONE"), 280, 460);
 	var y_pos := 40;
 	var counter := 1;
 	var page_num := 1;
@@ -137,7 +123,7 @@
 	/////
 	
 	GFPage(gump, page_num);
-	foreach category_name in (category_names)
+	foreach category_name in (GetCategoryNames())
 		GFAddButton(gump, 20, y_pos+3, 2117, 2118, GF_CLOSE_BTN, (_category_name_iter));
 		GFTextLine(gump, 40, y_pos, 2100, category_name);
 		y_pos := y_pos+20;
@@ -153,6 +139,7 @@
 		endif
 		sleepms(2);
 	endforeach
+	var data_elem := DFFindElement(g_datafile, "Index", DF_CREATE);	
 	data_elem.SetProp("Gump", gump);
 	
 	return gump;
@@ -163,20 +150,14 @@
 	
 	var npc_list := SortNPCs();
 	if ( !npc_list.Exists(category_name) )
-		//Nifty new trick below.
 		return error{"errortext":="Category name does not exist."};
 	endif
-	
-	var data_elem := DFFindElement(g_datafile, Lower(category_name), DF_CREATE);	
 	npc_list := npc_list[category_name];
 
-	var bkgnd_silvertrim := GFCfgConst("BackGrounds", "SILVERTRIM");
-	var bkgnd_dark_stone := GFCfgConst("BackGrounds", "DARK_STONE");
-	
 	var gump := GFCreateGump();
 	GFPage(gump, 0);
-	GFResizePic(gump, 0, 0, bkgnd_silvertrim, 300, 480);
-	GFResizePic(gump, 10, 10, bkgnd_dark_stone, 280, 460);
+	GFResizePic(gump, 0, 0, GFCfgConst("BackGrounds", "SILVERTRIM"), 300, 480);
+	GFResizePic(gump, 10, 10, GFCfgConst("BackGrounds", "DARK_STONE"), 280, 460);
 	var y_pos := 40;
 	var counter := 1;
 	var page_num := 1;
@@ -198,6 +179,8 @@
 		endif
 		sleepms(2);
 	endforeach
+	
+	var data_elem := DFFindElement(g_datafile, Lower(category_name), DF_CREATE);	
 	data_elem.SetProp("Gump", gump);
 	
 	return gump;
@@ -211,8 +194,7 @@
 	endif
 		
 	var elem_names := GetTemplateList();
-	elem_names.Sort();
-
+	
 	categories := dictionary;
 	categories[DEFAULT_CATEGORY] := array{};
 



From austin at berlios.de  Tue Sep 13 14:00:49 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 13 Sep 2005 14:00:49 +0200
Subject: [Poldistro-svn] r114 - in trunk/096/pkg/mobiles/ai_brain: . commands/gm config
Message-ID: <200509131200.j8DC0nV5030548@sheep.berlios.de>

Author: austin
Date: 2005-09-13 14:00:46 +0200 (Tue, 13 Sep 2005)
New Revision: 114

Modified:
   trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
   trunk/096/pkg/mobiles/ai_brain/config/icp.cfg
   trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src	2005-09-13 11:56:46 UTC (rev 113)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src	2005-09-13 12:00:46 UTC (rev 114)
@@ -12,7 +12,7 @@
 
 var g_datafile := DFOpenDataFile(":ai_brain:createnpc", DF_CREATE);
 
-program MakeNPC(who, template)
+program command_CreateNPC(who, template)
 	if ( !template )
 		template := SelectTemplateFromGump(who);
 		if ( !template )

Modified: trunk/096/pkg/mobiles/ai_brain/config/icp.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/config/icp.cfg	2005-09-13 11:56:46 UTC (rev 113)
+++ trunk/096/pkg/mobiles/ai_brain/config/icp.cfg	2005-09-13 12:00:46 UTC (rev 114)
@@ -15,16 +15,16 @@
 	//Script	cmdlevel path
 			
 	//TextCmd	cmdlevel path
-	TextCmd		3 :control:textcmd/gm/attack
-	TextCmd		3 :control:textcmd/gm/cmassacre
-	TextCmd		3 :control:textcmd/gm/createnpc
-	TextCmd		3 :control:textcmd/gm/makeswarm
-	TextCmd		3 :control:textcmd/gm/massacre
-	TextCmd		3 :control:textcmd/gm/npcsleep
-	TextCmd		3 :control:textcmd/gm/npcwipe
-	TextCmd		3 :control:textcmd/gm/puttosleep
-	TextCmd		3 :control:textcmd/gm/removenpc
-	TextCmd		3 :control:textcmd/gm/resetnpcs
-	TextCmd		3 :control:textcmd/gm/restartnpc
-	TextCmd		3 :control:textcmd/gm/sendevent
+	TextCmd		3 :a_brain:commands/gm/attack
+	TextCmd		3 :ai_brain:commands/gm/cmassacre
+	TextCmd		3 :ai_brain:commands/gm/createnpc
+	TextCmd		3 :ai_brain:commands/gm/makeswarm
+	TextCmd		3 :ai_brain:commands/gm/massacre
+	TextCmd		3 :ai_brain:commands/gm/npcsleep
+	TextCmd		3 :ai_brain:commands/gm/npcwipe
+	TextCmd		3 :ai_brain:commands/gm/puttosleep
+	TextCmd		3 :ai_brain:commands/gm/removenpc
+	TextCmd		3 :ai_brain:commands/gm/resetnpcs
+	TextCmd		3 :ai_brain:commands/gm/restartnpc
+	TextCmd		3 :ai_brain:commands/gm/sendevent
 }

Modified: trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-13 11:56:46 UTC (rev 113)
+++ trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-13 12:00:46 UTC (rev 114)
@@ -6,6 +6,7 @@
 	Color		0
 	TrueColor	0
 	Gender		0
+	Category	Testing
 
 	STR		1
 	INT		1



From panosl at berlios.de  Tue Sep 13 14:50:05 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Tue, 13 Sep 2005 14:50:05 +0200
Subject: [Poldistro-svn] r115 - trunk/096/scripts/include
Message-ID: <200509131250.j8DCo5A0002244@sheep.berlios.de>

Author: panosl
Date: 2005-09-13 14:50:05 +0200 (Tue, 13 Sep 2005)
New Revision: 115

Modified:
   trunk/096/scripts/include/math.inc
Log:


Modified: trunk/096/scripts/include/math.inc
===================================================================
--- trunk/096/scripts/include/math.inc	2005-09-13 12:00:46 UTC (rev 114)
+++ trunk/096/scripts/include/math.inc	2005-09-13 12:50:05 UTC (rev 115)
@@ -223,13 +223,6 @@
 endfunction
 
 
-function Sqr(x)
-// Obsolete: math.em has Sqrt(x)
-	return Sqrt(x);
-
-endfunction
-
-
 function Mean(ArrayX)
 
 // Returns the arithmatic mean (average) of an array of numbers.



From austin at berlios.de  Tue Sep 13 16:05:15 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 13 Sep 2005 16:05:15 +0200
Subject: [Poldistro-svn] r116 - in trunk/096/pkg/mobiles/ai_brain: . complete/testnpc
Message-ID: <200509131405.j8DE5FFo017625@sheep.berlios.de>

Author: austin
Date: 2005-09-13 16:05:03 +0200 (Tue, 13 Sep 2005)
New Revision: 116

Modified:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/goneCriminal.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src
   trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src	2005-09-13 12:50:05 UTC (rev 115)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src	2005-09-13 14:05:03 UTC (rev 116)
@@ -3,6 +3,7 @@
 
 include ":ai_brain:include/npcNerves";
 include ":ai_brain:include/npcCommands";
+include "include/attributes";
 
 program BrainNerve(params)
 	var npc		:= params[1];
@@ -11,41 +12,75 @@
 	var settings	:= params[4];
 	//var scripts	:= params[5];
 	params := 0; // Not needed anymore.
-	
+
 	//Store it here so it does not have to do the math over and over.
 	var flee_level := GetVitalMaximumValue(npc, "Life") * (CInt(settings["FleeLevel"])/100);
-	
+
 	var opponent := event.source;
 	AI_SetOpponent(npc, opponent);
-	
+
 	while ( npc )
 		var dist := Distance(npc, opponent);
-		if ( GetHitPoints(npc) < flee_level )
-			AI_Disengage(npc);
-			AI_Flee(npc, opponent);
+		if ( ShouldFlee(npc, flee_level) )
+			AI_Move(npc, opponent, NEMOVE_TOWARD, NEMOVE_RUN, WAKEUP, 100);
+		elseif ( DoneFighting(npc, opponent, dist) )
+			AI_WarMode(npc, 0);
 			AI_EndNerve(npc, nerve_name);
-		// Is the opponent dead, yet?
-		elseif ( opponent.dead || !opponent )
-			AI_SetWarMode(npc, 0);
-			AI_EndNerve(npc, nerve_name);
-		// Did they hide??
-		elseif ( opponent.hidden || opponent.concealed )
-			AI_SetWarMode(npc, 0);
-			AI_EndNerve(npc, nerve_name);
-		elseif ( dist > 20 )
-			AI_SetWarMode(npc, 0);
-			AI_EndNerve(npc, nerve_name);
-		elseif ( (dist > 10) && ( !CheckLineOfSight(npc, opponent)) )
-			AI_Disengage(npc);
-			AI_EndNerve(npc, nerve_name);
 		elseif( dist > 1 )
-			AI_Move(npc, opponent, NEMOVE_TOWARD, NEMOVE_RUN, WAKEUP, 100);
+			AI_Move(npc, opponent, NEMOVE_TOWARD, NEMOVE_RUN, WAKEUP, dist+1);
 		endif
 
 		sleepms(600);
-		AI_ClearThoughts(npc, CLR_NERVE);
+		While ( Events_Waiting() )
+			CheckForEvent(npc, event);
+		endwhile
 	endwhile
 endprogram
 
-function FleeOpponent(npc, opponent)
-	
\ No newline at end of file
+function DoneFighting(npc, opponent, byref dist)
+	if ( opponent.dead )
+		return 1;
+	elseif ( !opponent )
+		return 1;
+	elseif ( opponent.hidden )
+		return 1;
+	elseif ( opponent.concealed > npc.cmdlevel )
+		return 1;
+	elseif ( dist > 20 )
+		return 1;
+	elseif ( dist > 10 && !CheckLineOfSight(npc, opponent) )
+		return 1;
+	endif
+
+	return 0;
+endfunction
+
+function ShouldFlee(npc, byref flee_level)
+	if ( GetHP(npc) < flee_level )
+		return 1;
+	endif
+
+	return 0;
+endfunction
+
+function CheckForEvent(npc, byref event)
+	event := wait_for_event(0);
+	if ( event )
+		var source := event.source;
+		case ( event.type )
+			SYSEVENT_ENGAGED:
+				if ( source != npc.opponent )
+					AI_Speak(npc, "Hey "+source.name+"! No fair ganging up on me! *pouts*");
+				endif
+				break;
+			SYSEVENT_DAMAGED:
+				AI_Speak(npc, "OWCH "+source.name+" that hurts.");
+				break;
+			default:
+				break;
+		endcase
+		event := 0;
+	endif
+
+	return 1;
+endfunction
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src	2005-09-13 12:50:05 UTC (rev 115)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src	2005-09-13 14:05:03 UTC (rev 116)
@@ -6,13 +6,37 @@
 
 program BrainNerve(params)
 	var npc		:= params[1];
-	var nerve_name	:= params[2];
+	//var nerve_name	:= params[2];
 	var event	:= params[3];
-	var settings	:= params[4];
-	var scripts	:= params[5];
+	//var settings	:= params[4];
+	//var scripts	:= params[5];
 	params := 0; // Not needed anymore.
 	
 	while ( npc )
-		// Do stuff here
+		if ( event )
+			var source := event.source;
+			case ( event.type )
+				SYSEVENT_DISENGAGED:
+					Disengaged(npc, source);
+					break;
+				default:
+					break;
+			endcase
+			
+			event := 0;
+		endif
+		
+		sleepms(5);
+		event := wait_for_event(600);
 	endwhile
 endprogram
+
+function Disengaged(npc, source)
+	if ( npc.opponent == source )
+		if ( source.dead )
+			AI_Speak(npc, "Killed ya! Neener!");
+		else
+			AI_Speak(npc, "Wuss! Get back here and finish fighting me!");
+		endif
+	endif
+endfunction
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src	2005-09-13 12:50:05 UTC (rev 115)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src	2005-09-13 14:05:03 UTC (rev 116)
@@ -15,25 +15,36 @@
 	
 	while ( npc )
 		if ( event )
+			var source := event.source;
 			case ( event.type )
 				SYSEVENT_ENTEREDAREA:
-					var source := event.source;
-					if ( source.npctemplate )
-						continue;
-						//Run_Script_To_Completion(settings["cycle_script"], {npc, settings});
-					elseif ( source.concealed )
-						continue;
-						//Do nothing
-					elseif ( source.acctname )
-						if ( NPC_AddToWatchList(npc, source) )
-							AI_WakeUp(npc);
-							AI_Speak(npc, "Ive added you to my watch list "+source.name);
-						endif
-					endif
+					EnteredArea(npc, source);
+					break;
+				default:
+					break;
 			endcase
+			
+			event := 0;
 		endif
 		
 		sleepms(5);
 		event := wait_for_event(600);
 	endwhile
 endprogram
+
+function EnteredArea(npc, source)
+	if ( source.npctemplate )
+		return 0;
+	elseif ( source.concealed )
+		return 0;
+	elseif ( source.acctname )
+		if ( NPC_AddToWatchList(npc, source) )
+			AI_WakeUp(npc);
+			AI_Speak(npc, "Ive added you to my watch list "+source.name);
+		endif
+		
+		return 1;
+	endif
+	
+	return 0;
+endfunction

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/goneCriminal.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/goneCriminal.src	2005-09-13 12:50:05 UTC (rev 115)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/goneCriminal.src	2005-09-13 14:05:03 UTC (rev 116)
@@ -6,13 +6,43 @@
 
 program BrainNerve(params)
 	var npc		:= params[1];
-	var nerve_name	:= params[2];
+	//var nerve_name	:= params[2];
 	var event	:= params[3];
-	var settings	:= params[4];
-	var scripts	:= params[5];
+	//var settings	:= params[4];
+	//var scripts	:= params[5];
 	params := 0; // Not needed anymore.
 	
 	while ( npc )
-		// Do stuff here
+		if ( event )
+			var source := event.source;
+			case ( event.type )
+				SYSEVENT_GONE_CRIMINAL:
+					GoneCriminal(npc, source);
+					break;
+				default:
+					break;
+			endcase
+			
+			event := 0;
+		endif
+		
+		sleepms(5);
+		event := wait_for_event(600);
 	endwhile
 endprogram
+
+function GoneCriminal(npc, source)
+	if ( source.npctemplate )
+		return 0;
+	elseif ( source.concealed )
+		return 0;
+	elseif ( source.acctname )
+		AI_WakeUp(npc);
+		AI_Speak(npc, "Oh no! "+source.name+" has become a criminal!");
+		
+		return 1;
+	endif
+	
+	return 0;
+endfunction
+

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src	2005-09-13 12:50:05 UTC (rev 115)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src	2005-09-13 14:05:03 UTC (rev 116)
@@ -15,19 +15,32 @@
 	
 	while ( npc )
 		if ( event )
+			var source := event.source;
 			case ( event.type )
 				SYSEVENT_LEFTAREA:
-					var source := event.source;
-					if ( source.npctemplate )
-						continue;
-					else
-						NPC_RemoveFromWatchList(npc, source);
-						AI_Speak(npc, "I am no longer watching "+source.name);
-					endif
+					LeftArea(npc, source);
+					break;
+				default:
+					break;
 			endcase
+			
+			event := 0;
 		endif
 		
 		sleepms(5);
 		event := wait_for_event(600);
 	endwhile
 endprogram
+
+function LeftArea(npc, source)
+	if ( source.npctemplate )
+		return 0;
+	else
+		NPC_RemoveFromWatchList(npc, source);
+		AI_Speak(npc, "I am no longer watching "+source.name);
+		
+		return 1;
+	endif
+	
+	return 0;
+endfunction
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src	2005-09-13 12:50:05 UTC (rev 115)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src	2005-09-13 14:05:03 UTC (rev 116)
@@ -14,21 +14,36 @@
 	params := 0; // Not needed anymore.
 	
 	while ( npc )
-		if ( event.source )
-			AI_Speak(npc, "I just heard "+(event.source).name+" say \""+event.text+"\"", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
-			case ( event.texttype )
-				SPEAK_TEXTTYPE_YELL:
-					AI_Speak(npc, "*yells* No need to yell!", event.texttype, SPEAK_DOEVENT_DISABLE, WAKEUP);
+		if ( event )
+			case ( event.type )
+				SYSEVENT_SPEECH:
+					SpeechEvent(npc, event);
 					break;
-				SPEAK_TEXTTYPE_WHISPER:
-					AI_Speak(npc, "*whispers* Speak up next time. I could barely hear you.", event.texttype, SPEAK_DOEVENT_DISABLE, WAKEUP);
-					break;
 				default:
-					AI_Speak(npc, "You're fun to talk to, you know that?", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
 					break;
 			endcase
+			
+			event := 0;
 		endif
 		
+		sleepms(5);
 		event := wait_for_event(900000);
 	endwhile
-endprogram
\ No newline at end of file
+endprogram
+
+function SpeechEvent(npc, event)
+	AI_Speak(npc, "I just heard "+(event.source).name+" say \""+event.text+"\"", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+	case ( event.texttype )
+		SPEAK_TEXTTYPE_YELL:
+			AI_Speak(npc, "*yells* No need to yell!", event.texttype, SPEAK_DOEVENT_DISABLE, WAKEUP);
+			break;
+		SPEAK_TEXTTYPE_WHISPER:
+			AI_Speak(npc, "*whispers* Speak up next time. I could barely hear you.", event.texttype, SPEAK_DOEVENT_DISABLE, WAKEUP);
+			break;
+		default:
+			AI_Speak(npc, "You're fun to talk to, you know that?", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+			break;
+	endcase
+	
+	return 1;
+endfunction
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src	2005-09-13 12:50:05 UTC (rev 115)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src	2005-09-13 14:05:03 UTC (rev 116)
@@ -24,6 +24,6 @@
 	while ( npc )
 		AI_Speak(npc, "ZzzzzZzz", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, NOWAKE);
 		AI_ClearThoughts(npc, CLR_NERVE);
-		sleep(40);
+		sleep(90);
 	endwhile
 endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src	2005-09-13 12:50:05 UTC (rev 115)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src	2005-09-13 14:05:03 UTC (rev 116)
@@ -14,10 +14,24 @@
 	
 	while ( npc )
 		if ( event )
-			AI_Speak(npc, "So yeah.. I just got this event and I don't know what to do with it... its virtual time, baby.", SPEAK_TEXTTYPE_YELL, SPEAK_DOEVENT_ENABLE, WAKEUP);
-			AI_Speak(npc, "The event structure is... "+event, SPEAK_TEXTTYPE_YELL, SPEAK_DOEVENT_ENABLE, WAKEUP);
+			case ( event.type )
+				NPCEVENT_DONE:
+					break;
+				default:
+					VirtualEvent(npc, event);
+					break;
+			endcase
+						
+			event := 0;
 		endif
 		
 		event := wait_for_event(900000);
 	endwhile
 endprogram
+
+function VirtualEvent(npc, event)
+	AI_Speak(npc, "So yeah.. I just got this event and I don't know what to do with it... its virtual time, baby.", SPEAK_TEXTTYPE_YELL, SPEAK_DOEVENT_ENABLE, WAKEUP);
+	AI_Speak(npc, "The event structure is... "+event, SPEAK_TEXTTYPE_YELL, SPEAK_DOEVENT_ENABLE, WAKEUP);
+	
+	return 1;
+endfunction
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-13 12:50:05 UTC (rev 115)
+++ trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-13 14:05:03 UTC (rev 116)
@@ -8,14 +8,14 @@
 	Gender		0
 	Category	Testing
 
-	STR		1
+	STR		100
 	INT		1
-	DEX		1
-	HITS		1
+	DEX		20
+	HITS		100
 	MANA		1
 	STAM		1
 	AR		1
-	RunSpeed	255
+	RunSpeed	200
 	
 	AISetting	CycleWait	i10
 	AISetting	IdleTicks	i5
@@ -36,4 +36,5 @@
 	AIScript	Listen		:ai_brain:complete/testNPC/listen
 	AIScript	Restart		:ai_brain:complete/testNPC/restart
 	AIScript	Sleep		:ai_brain:complete/testNPC/sleep
+	AIScript	Virtual		:ai_brain:complete/testNPC/virtual
 }



From austin at berlios.de  Tue Sep 13 16:26:44 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 13 Sep 2005 16:26:44 +0200
Subject: [Poldistro-svn] r117 - trunk/096/pkg/commands/gm
Message-ID: <200509131426.j8DEQiel020180@sheep.berlios.de>

Author: austin
Date: 2005-09-13 16:26:42 +0200 (Tue, 13 Sep 2005)
New Revision: 117

Modified:
   trunk/096/pkg/commands/gm/setprop.src
Log:
This is um.. smaller and better than the old version BY FAR.

Modified: trunk/096/pkg/commands/gm/setprop.src
===================================================================
--- trunk/096/pkg/commands/gm/setprop.src	2005-09-13 14:05:03 UTC (rev 116)
+++ trunk/096/pkg/commands/gm/setprop.src	2005-09-13 14:26:42 UTC (rev 117)
@@ -1,334 +1,113 @@
-/////////////////////////////////////////////////////////////
-// SETPROP.SRC
-//
-// Author: DC
-// Date: 2/14/99
-//
-// Description: An GM text command that changes the value
-//	  of the given inherent property. Note that
-//	  mobiles have more props than items &&
-//	  some properties are read-only.
-//
-// Syntax: .setprop <propname> <value>
-// program textcmd_setprop: params: character using
-//				  text
-//			  Splits the param text into 2
-//			  strings (propname && value)
-//					  passes the given prop &&
-//			  value to SetObjctProp &&
-//			  prints the old && new values
-//			  if the write was successful.
-//
-// function SetObjctProp: Matches the given text to one of
-//			the known properties of the
-//			targetted object. If the prop
-//			name could not be matched, it
-//			throws an uninitialized error
-//			which the main program catches.
-//			only writable props are listed.
-//
-// TODO: Give access to props setable only with
-//   "SetObjectProperty" function.
-//
-//   ********
-//   **NOTE**: to change an object's name, use "rename" cmd
-//   ********
-// updated by zulu (zulu at cadvision.com)
-// updated by Shilohen (shilohen at sympatico.ca)
-// n.b. Some properties for items weren't tested as the 
-// walkonscript but those will be there in case of future
-// core changes.
-/////////////////////////////////////////////////////////////
+/*===============================================================
+* Current Version
+* SETPROP.SRC - v5.0
+* Updated 9/13/2005 7:15AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
 
 use uo;
-use basic;
-use os;
 
-include "include/attributes";
+program SetProperties(who, text)
+	var param := SplitWords(text);
+	if ( param.size() < 2 )
+		SendSysMessage(who, "SYNTAX: .setprop <property name> <value>");
+		return;
+	endif
 
-program textcmd_setprop( who, text )
-
-	var props := SplitWords( text );
-	if( !props[1] )
-		SendSysmessage( who , "Syntax: .setprop [propname] [amount]" );
-	elseif( !props[2] )
-		SendSysmessage( who , "Syntax: .setprop [propname] [amount]" );
+	var targ := target(who);
+	if ( !targ )
+		SendSysMessage(who, "Cancelled");
+		return;
 	endif
 
-	var propname	:= props[1];
-	var amount	:= Cint( props[2] );
-	var amount_str	:= Cstr( text - (propname + " ") );
+	var property := Lower(param[1]);
+	var pos := Find(text, param[2], Len(param[1])+1);
+	var value := text[pos, Len(text)];
 
-	if( amount == 9999 )
-		amount := 0;
-		amount_str := "";
+	// Useful for clearing something like 'mobile.guild_title'.
+	if ( value == "NULL" )
+		value := "";
 	endif
-	
-	if (propname == "concealed")
-	  if (amount > who.cmdlevel)
-	    amount := who.cmdlevel;
-	  endif
-	endif
-	  
-	SendSysMessage( who, "Select an object." );
-	var obj := Target(who);
-	if( !obj )
-		return 0;
-	endif
-	
-	SetScriptController(who);
-	
-	if( obj.IsA(POLCLASS_MOBILE) )
-		ProcessMobileSetProp( who, obj, propname, amount, amount_str );
-	else
-		ProcessItemSetProp( who, obj, propname, amount, amount_str );
-	endif
 
+	ProcessInput(who, targ, property, value);
 endprogram
 
+function ProcessInput(who, targ, property, value)
+	var old_val := targ.get_member(property);
+	var old_type := Lower(TypeOf(old_val));
+	case ( old_type )
+		"integer"	: value := CInt(value);
+		"string"	: value := CStr(value);
+		"double"	: value := CDbl(value);
+	endcase
 
-function ProcessMobileSetProp( who, mobile, propname, amount, amount_str )
+	SendSysMessage(who, "Old Value->"+old_val);
 
-	var old_value := GetMobileProp( mobile, propname );
-	if( !old_value )
-		SendSysMessage( who, "This property don't exist for mobiles." );
-		return 0;
-	endif
+	// Handles situations where methods or functions must be used.
+	case ( property )
+		"x": "y": "z": "realm": 
+			DoMovement(targ, property, value);
+			break;
+		"concealed":
+			DoConceal(who, targ, value);
+			break;
+		"cmdlevel":
+			DoCmdLevel(who, targ, value);
+			break;
+		"criminal":
+			targ.SetCriminal(value);
+			break;
+		"murderer":
+			targ.SetMurderer(value);
+			break;
+		default:
+			targ.set_member(property, value);
+			break;
+	endcase
 	
-	SendSysmessage( who, propname + " was: " + old_value );
-		
-	if( SetMobileProp( mobile, propname, amount, amount_str ) )
-		var new_value := GetMobileProp( mobile, propname );
-		if( new_value == old_value )
-			if( propname != "lightlevel" )
-				SendSysMessage( who, "Property unchanged." );
-			else
-				SendSysMessage( who, new_value );
-			endif
-		else
-			SendSysmessage( who, propname + " is now: " + new_value );
-		endif
-	else
-		SendSysmessage( who, "Could not write to " + propname + "." );
-	endif
-	
-	return 1;
-	
+	SendSysMessage(who, "New Value->"+targ.get_member(property));
 endfunction
 
+function DoMovement(targ, property, value)
+	var x := targ.x;
+	var y := targ.y;
+	var z := targ.z;
+	var realm := targ.realm;
 
-function ProcessItemSetProp( who, item, propname, amount, amount_str )
+	if ( property == realm )
+		MoveObjectToRealm(targ, property, x, y, z);
+	else
+		case ( property )
+			"x": x := value;
+			"y": y := value;
+			"z": z := value;
+		endcase
 
-	var old_value := GetItemProp( item, propname );
-	if( !old_value )
-		SendSysMessage( who, "This property don't exist for items." );
-		return 0;
-	endif
-	
-	SendSysmessage( who, propname + " was: " + old_value );
-		
-	if( SetItemProp( item, propname, amount, amount_str ) )
-		var new_value := GetItemProp( item, propname );
-		if( new_value == old_value )
-			if( propname != "lightlevel" )
-				SendSysMessage( who, "Property unchanged." );
-			else
-				SendSysMessage( who, new_value );
-			endif
-		else
-			SendSysmessage( who, propname + " is now: " + new_value );
+		if ( targ.IsA(POLCLASS_ITEM) )
+			MoveItemToLocation(targ, x, y, z, MOVEITEM_FORCELOCATION);
+		elseif ( targ.IsA(POLCLASS_MOBILE) )
+			MoveCharacterToLocation(targ, x, y, z, MOVECHAR_FORCELOCATION);
 		endif
-	else
-		SendSysmessage( who, "Could not write to " + propname + "." );
 	endif
-	
-	return 1;
-	
 endfunction
 
-
-function GetMobileProp( mobile, propname )
-
-	var retstr;
-	case( propname )
-		"x": 		retstr := mobile.x;				break;
-		"y": 		retstr := mobile.y;				break;
-		"z": 		retstr := mobile.z;				break;
-		"trueobjtype":	retstr := Hex(mobile.trueobjtype);		break;
-		"color": 	retstr := mobile.color;				break;
-		"truecolor":	retstr := mobile.truecolor;			break;
-		"facing": 	retstr := mobile.facing;			break;
-		"name":		retstr := mobile.name;				break;
-		"warmode":	retstr := mobile.warmode;			break;
-		"gender":	retstr := mobile.gender;			break;
-		"hp":		retstr := GetHp(mobile);			break;
-		"mana":		retstr := GetMana(mobile);			break;
-		"stamina":	retstr := GetStamina(mobile);			break;
-		"strength":	retstr := GetStrength(mobile);			break;
-		"dexterity":	retstr := GetDexterity(mobile);			break;
-		"intelligence":	retstr := GetIntelligence(mobile);		break;
-		"strmod":	retstr := GetStrengthMod(mobile);		break;
-		"intmod":	retstr := GetIntelligenceMod(mobile);		break;
-		"dexmod":	retstr := GetDexterityMod(mobile);		break;
-		"armod":	retstr := mobile.ar_mod;			break;
-		"graphic":	retstr := mobile.graphic;			break;
-		"poisoned":	retstr := mobile.poisoned;			break;
-		"paralyzed":	retstr := mobile.paralyzed;			break;
-		"hidden":	retstr := mobile.hidden;			break;
-		"concealed":	retstr := mobile.concealed;			break;
-		"frozen":	retstr := mobile.frozen;			break;
-		"stealthsteps":	retstr := mobile.stealthsteps;			break;
-		"squelched":	retstr := mobile.squelched;			break;
-		"lightlevel":	retstr := "Can't read personnal light level";	break;
-		"title_guild":	retstr := mobile.title_guild;			break;
-		"title_prefix":	retstr := mobile.title_prefix;			break;
-		"title_suffix":	retstr := mobile.title_suffix;			break;
-		"title_race":	retstr := mobile.title_race;			break;
-		"criminal":	retstr := mobile.criminal;			break;
-		"murderer":	retstr := mobile.murderer;			break;
-		default:	retstr := error;
-	endcase
-
-	if( retstr != error )
-		return Cstr(retstr);
-	else
-		return retstr;
+function DoCmdLevel(who, targ, value)
+	if ( value > who.cmdlevel )
+		value := who.cmdlevel;
+		SendSysMessage(who, "You can not set a command level higher than your own.");
 	endif
-	
-endfunction
 
-
-function SetMobileProp( mobile, propname, amount, amount_str )
-
-	var ret := 1;
-	case( propname )
-		"x": 		ret := MoveCharacterToLocation( mobile, amount, mobile.y, mobile.z, MOVECHAR_FORCELOCATION );	break;
-		"y": 		ret := MoveCharacterToLocation( mobile, mobile.x, amount, mobile.z, MOVECHAR_FORCELOCATION );	break;
-		"z": 		ret := MoveCharacterToLocation( mobile, mobile.x, mobile.y, amount, MOVECHAR_FORCELOCATION );	break;
-		"trueobjtype":	mobile.trueobjtype	:= amount;		break;
-		"color": 	mobile.color		:= amount;		break;
-		"truecolor":	mobile.truecolor	:= amount;		break;
-		"facing": 	mobile.facing		:= amount;		break;
-		"name":		mobile.name		:= amount_str;		break;
-		"warmode":	mobile.warmode		:= amount;		break;
-		"gender":	mobile.gender		:= amount;		break;
-		"hp":		ret := SetHp(mobile,amount);			break;
-		"mana":		ret := SetMana(mobile,amount);			break;
-		"stamina":	ret := SetStamina(mobile,amount);		break;
-		"strength":	ret := SetBaseStrength(mobile,amount);		break;
-		"dexterity":	ret := SetBaseDexterity(mobile,amount);		break;
-		"intelligence":	ret := SetBaseIntelligence(mobile,amount);	break;
-		"strmod":	ret := SetStrengthMod(mobile,amount);		break;
-		"intmod":	ret := SetIntelligenceMod(mobile,amount);	break;
-		"dexmod":	ret := SetDexterityMod(mobile,amount);		break;
-		"armod":	mobile.ar_mod		:= amount;		break;
-		"graphic":	mobile.graphic		:= amount;		break;
-		"hidden":	mobile.hidden		:= amount;		break;
-		"concealed":	mobile.concealed	:= amount;		break;
-		"frozen":	mobile.frozen		:= amount;		break;
-		"stealthsteps":	mobile.stealthsteps	:= amount;		break;
-//		"poisoned":	mobile.SetPoisoned(amount);			break;
-		"paralyzed":	mobile.SetParalyzed(amount);			break;
-		"squelched":	mobile.Squelch(amount);				break;
-		"criminal":	mobile.SetCriminal(amount);			break;
-		"murderer":	mobile.SetMurderer(amount);			break;
-		"title_guild":	mobile.title_guild	:= amount_str;		break;
-		"title_prefix":	mobile.title_prefix	:= amount_str;		break;
-		"title_suffix":	mobile.title_suffix	:= amount_str;		break;
-		"title_race":	mobile.title_race	:= amount_str;		break;
-		"lightlevel":	amount_str := SplitWords(amount_str);
-				mobile.SetLightLevel( Cint(amount_str[1]), Cint(amount_str[2]) );
-				break;
-		default:	ret := error;
-	endcase
-
-	return ret;
-
+	targ.cmdlevel := value;
 endfunction
 
-
-function GetItemProp( item, propname )
-
-	var retstr;
-	case( propname )
-		"x": 		retstr := item.x;		break;
-		"y": 		retstr := item.y;		break;
-		"z": 		retstr := item.z;		break;
-		"color": 	retstr := item.color;		break;
-		"facing": 	retstr := item.facing;		break;
-		"name":		retstr := item.name;		break;
-		"desc":		retstr := item.desc;		break;
-		"hp":		retstr := item.hp;		break;
-		"ar_mod":	retstr := item.ar_mod;		break;
-		"graphic":	retstr := item.graphic;		break;
-		"usescript":	retstr := item.usescript;	break;
-		"equipscript":	retstr := item.equipscript;	break;
-		"unequipscript": retstr := item.unequipscript;	break;
-		"newbie":	retstr := item.newbie;		break;
-		"movable":	retstr := item.movable;		break;
-		"decayat":	retstr := item.decayat;		break;
-		"maxhp_mod":	retstr := item.maxhp_mod;	break;
-		"quality":	retstr := item.quality;		break;
-		"ar_base":	retstr := item.ar_base;		break;
-		"hitscript":	retstr := item.hitscript;	break;
-		"dmg_mod":	retstr := item.dmg_mod;		break;
-		"controlscript": retstr := item.controlscript;	break;
-		"walkonscript":	retstr := item.walkonscript;	break;
-		"invisible":	retstr := item.invisible;	break;
-		"buyprice":	retstr := item.buyprice;	break;
-		default:	retstr := error;
-	endcase
-
-	if( retstr != error )
-		return Cstr(retstr);
-	else
-		return retstr;
+function DoConceal(who, targ, value)
+	if ( value > who.cmdlevel )
+		value := who.cmdlevel;
+		SendSysMessage(who, "You can not conceal something higher than your cmdlevel.");
 	endif
 
+	targ.concealed := value;
 endfunction
-
-
-function SetItemProp( item, propname, amount, amount_str )
-
-	var ret := 1;
-	case( propname )
-		"x": 		ret := MoveItemToLocation( item, amount, item.y, item.z, MOVEITEM_FORCELOCATION );	break;
-		"y": 		ret := MoveItemToLocation( item, item.x, amount, item.z, MOVEITEM_FORCELOCATION );	break;
-		"z": 		ret := MoveItemToLocation( item, item.x, item.y, amount, MOVEITEM_FORCELOCATION );	break;
-		"color": 	item.color		:= amount;		break;
-		"facing": 	item.facing		:= amount;		break;
-		"name":		item.name		:= amount;		break;
-		"desc":		item.desc		:= amount;		break;
-		"hp":		item.hp			:= amount;		break;
-		"ar_mod":	item.ar_mod		:= amount;		break;
-		"graphic":	item.graphic		:= amount;		break;
-		"newbie":	item.newbie		:= amount;		break;
-		"movable":	item.movable		:= amount;		break;
-		"decayat":	item.decayat		:= amount;		break;
-		"maxhp_mod":	item.maxhp_mod		:= amount;		break;
-		"ar_base":	item.ar_base		:= amount;		break;
-		"dmg_mod":	item.dmg_mod		:= amount;		break;
-		"invisible":	item.invisible		:= amount;		break;
-		"buyprice":	item.buyprice		:= amount;		break;
-		"hitscript":	item.hitscript		:= amount_str;		break;
-		"usescript":	item.usescript		:= amount_str;		break;
-		"equipscript":	item.equipscript	:= amount_str;		break;
-		"walkonscript":	item.walkonscript	:= amount_str;		break;
-		"unequipscript": item.unequipscript	:= amount_str;		break;
-		"controlscript": item.controlscript	:= amount_str;		break;
-		"quality":	amount_str := SplitWords(amount_str);
-				amount	   := Cdbl(amount_str[1]);
-				if( amount > 0.0 )
-					item.quality	:= amount;
-				endif
-				break;
-		default:	ret := error;
-	endcase
-
-	if( ret != error )
-		return Cstr(ret);
-	else
-		return ret;
-	endif
-
-endfunction
\ No newline at end of file



From austin at berlios.de  Wed Sep 14 02:20:36 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 14 Sep 2005 02:20:36 +0200
Subject: [Poldistro-svn] r118 - trunk/096/pkg/commands/gm
Message-ID: <200509140020.j8E0KalM020586@sheep.berlios.de>

Author: austin
Date: 2005-09-14 02:20:33 +0200 (Wed, 14 Sep 2005)
New Revision: 118

Modified:
   trunk/096/pkg/commands/gm/setprop.src
Log:
Making it easy to expand into methods/functions.

Modified: trunk/096/pkg/commands/gm/setprop.src
===================================================================
--- trunk/096/pkg/commands/gm/setprop.src	2005-09-13 14:26:42 UTC (rev 117)
+++ trunk/096/pkg/commands/gm/setprop.src	2005-09-14 00:20:33 UTC (rev 118)
@@ -1,6 +1,6 @@
 /*===============================================================
 * Current Version
-* SETPROP.SRC - v5.0
+* SETPROP.SRC - v1.0
 * Updated 9/13/2005 7:15AM
 *
 * -- Revision v1.0 --
@@ -32,10 +32,6 @@
 		value := "";
 	endif
 
-	ProcessInput(who, targ, property, value);
-endprogram
-
-function ProcessInput(who, targ, property, value)
 	var old_val := targ.get_member(property);
 	var old_type := Lower(TypeOf(old_val));
 	case ( old_type )
@@ -43,14 +39,24 @@
 		"string"	: value := CStr(value);
 		"double"	: value := CDbl(value);
 	endcase
-
 	SendSysMessage(who, "Old Value->"+old_val);
+	
+	ProcessInput(who, targ, property, value);
+	
+	SendSysMessage(who, "New Value->"+targ.get_member(property));
+endprogram
 
-	// Handles situations where methods or functions must be used.
-	case ( property )
-		"x": "y": "z": "realm": 
-			DoMovement(targ, property, value);
-			break;
+function ProcessInput(who, targ, property, value)
+	
+	//Works on items and mobiles, so do this first.
+	if ( property in array{"x", "y", "z", "realm"} ) 
+		DoMovement(targ, property, value);
+		return 1;
+	elseif ( targ.IsA(POLCLASS_MOBILE) )
+		return MobileStuff(who, targ, property, value);
+	elseif ( targ.IsA(POLCLASS_ITEM) )
+		return ItemStuff(who, targ, property, value);
+	if ( 
 		"concealed":
 			DoConceal(who, targ, value);
 			break;
@@ -66,9 +72,7 @@
 		default:
 			targ.set_member(property, value);
 			break;
-	endcase
-	
-	SendSysMessage(who, "New Value->"+targ.get_member(property));
+	endcase	
 endfunction
 
 function DoMovement(targ, property, value)



From austin at berlios.de  Wed Sep 14 02:46:29 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 14 Sep 2005 02:46:29 +0200
Subject: [Poldistro-svn] r119 - trunk/096/pkg/commands/gm
Message-ID: <200509140046.j8E0kT7M016053@sheep.berlios.de>

Author: austin
Date: 2005-09-14 02:46:28 +0200 (Wed, 14 Sep 2005)
New Revision: 119

Modified:
   trunk/096/pkg/commands/gm/setprop.src
Log:
One of the most uber setprops.

Modified: trunk/096/pkg/commands/gm/setprop.src
===================================================================
--- trunk/096/pkg/commands/gm/setprop.src	2005-09-14 00:20:33 UTC (rev 118)
+++ trunk/096/pkg/commands/gm/setprop.src	2005-09-14 00:46:28 UTC (rev 119)
@@ -31,51 +31,76 @@
 	if ( value == "NULL" )
 		value := "";
 	endif
-
 	var old_val := targ.get_member(property);
 	var old_type := Lower(TypeOf(old_val));
 	case ( old_type )
-		"integer"	: value := CInt(value);
-		"string"	: value := CStr(value);
-		"double"	: value := CDbl(value);
+		"integer"	: value := CInt(value); break;
+		"string"	: value := CStr(value); break;
+		"double"	: value := CDbl(value); break;
+		default:
+			SendSysMessage(who, "Original data-type '"+old_type+"' not supported. No changes can be made.");
+			return 0;
 	endcase
 	SendSysMessage(who, "Old Value->"+old_val);
-	
-	ProcessInput(who, targ, property, value);
-	
+
+	ProcessInput(who, targ,property, value);
+
 	SendSysMessage(who, "New Value->"+targ.get_member(property));
 endprogram
 
-function ProcessInput(who, targ, property, value)
-	
+function ProcessInput(who, targ, byref property, byref value)
 	//Works on items and mobiles, so do this first.
-	if ( property in array{"x", "y", "z", "realm"} ) 
-		DoMovement(targ, property, value);
+	if ( property in array{"x", "y", "z", "realm"} )
+		DoMovement(targ,property, value);
 		return 1;
-	elseif ( targ.IsA(POLCLASS_MOBILE) )
-		return MobileStuff(who, targ, property, value);
-	elseif ( targ.IsA(POLCLASS_ITEM) )
-		return ItemStuff(who, targ, property, value);
-	if ( 
+	elseif ( MobileProperties(who, targ,property, value) == 1 )
+		// Special mobile methods/functions were used.
+		// 1 is checked implicitly - could be 0, 1 or error
+		return 1;
+	else
+		// Nothing special was needed to be done, just an ordinary member to change.
+		targ.set_member(property, value);
+		return 1;
+	endif
+endfunction
+
+function MobileProperties(who, targ, byref property, byref value)
+	if ( !targ.IsA(POLCLASS_MOBILE) )
+		return error;
+	endif
+	
+	case ( property )
 		"concealed":
-			DoConceal(who, targ, value);
-			break;
+			if ( value > who.cmdlevel )
+				SendSysMessage(who, "You can not conceal something higher than your cmdlevel.");
+				return error;
+			else
+				targ.concealed := value; return 1;
+			endif
 		"cmdlevel":
-			DoCmdLevel(who, targ, value);
-			break;
+			if ( value > who.cmdlevel )
+				SendSysMessage(who, "You can not set a command level higher than your own.");
+				return error;
+			else
+				targ.cmdlevel := value; return 1;
+			endif
 		"criminal":
-			targ.SetCriminal(value);
-			break;
+			targ.SetCriminal(value); return 1;
 		"murderer":
-			targ.SetMurderer(value);
-			break;
-		default:
-			targ.set_member(property, value);
-			break;
-	endcase	
+			targ.SetMurderer(value); return 1;
+		"poisoned":
+			targ.SetPoisoned(value); return 1;
+		"squelch":
+			targ.Squelch(value); return 1;
+		"warmode":
+			targ.SetWarMode(value); return 1;
+	endcase
+	
+	// Nothing was done here.
+	return 0;
 endfunction
 
-function DoMovement(targ, property, value)
+function DoMovement(targ, byref property, byref value)
 	var x := targ.x;
 	var y := targ.y;
 	var z := targ.z;
@@ -97,21 +122,3 @@
 		endif
 	endif
 endfunction
-
-function DoCmdLevel(who, targ, value)
-	if ( value > who.cmdlevel )
-		value := who.cmdlevel;
-		SendSysMessage(who, "You can not set a command level higher than your own.");
-	endif
-
-	targ.cmdlevel := value;
-endfunction
-
-function DoConceal(who, targ, value)
-	if ( value > who.cmdlevel )
-		value := who.cmdlevel;
-		SendSysMessage(who, "You can not conceal something higher than your cmdlevel.");
-	endif
-
-	targ.concealed := value;
-endfunction



From austin at berlios.de  Wed Sep 14 02:51:44 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 14 Sep 2005 02:51:44 +0200
Subject: [Poldistro-svn] r120 - trunk/096/pkg/commands/gm
Message-ID: <200509140051.j8E0piNO017943@sheep.berlios.de>

Author: austin
Date: 2005-09-14 02:51:43 +0200 (Wed, 14 Sep 2005)
New Revision: 120

Modified:
   trunk/096/pkg/commands/gm/setprop.src
Log:


Modified: trunk/096/pkg/commands/gm/setprop.src
===================================================================
--- trunk/096/pkg/commands/gm/setprop.src	2005-09-14 00:46:28 UTC (rev 119)
+++ trunk/096/pkg/commands/gm/setprop.src	2005-09-14 00:51:43 UTC (rev 120)
@@ -53,9 +53,8 @@
 	if ( property in array{"x", "y", "z", "realm"} )
 		DoMovement(targ,property, value);
 		return 1;
-	elseif ( MobileProperties(who, targ,property, value) == 1 )
+	elseif ( MobileProperties(who, targ,property, value) )
 		// Special mobile methods/functions were used.
-		// 1 is checked implicitly - could be 0, 1 or error
 		return 1;
 	else
 		// Nothing special was needed to be done, just an ordinary member to change.
@@ -73,14 +72,14 @@
 		"concealed":
 			if ( value > who.cmdlevel )
 				SendSysMessage(who, "You can not conceal something higher than your cmdlevel.");
-				return error;
+				return 1;
 			else
 				targ.concealed := value; return 1;
 			endif
 		"cmdlevel":
 			if ( value > who.cmdlevel )
 				SendSysMessage(who, "You can not set a command level higher than your own.");
-				return error;
+				return 1;
 			else
 				targ.cmdlevel := value; return 1;
 			endif



From austin at berlios.de  Wed Sep 14 03:04:35 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 14 Sep 2005 03:04:35 +0200
Subject: [Poldistro-svn] r121 - trunk/096/pkg/mobiles/ai_brain/complete/testnpc
Message-ID: <200509140104.j8E14ZLp019107@sheep.berlios.de>

Author: austin
Date: 2005-09-14 03:04:26 +0200 (Wed, 14 Sep 2005)
New Revision: 121

Modified:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src
Log:
More nerve goodness.

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src	2005-09-14 00:51:43 UTC (rev 120)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src	2005-09-14 01:04:26 UTC (rev 121)
@@ -11,14 +11,29 @@
 	//var settings	:= params[4];
 	//var scripts	:= params[5];
 	params := 0; // Not needed anymore.
-	
+
 	while ( npc )
-		if ( event.source )
-			AI_Speak(npc, "Eeeheee... that tickles!", SPEAK_TEXTTYPE_YELL, SPEAK_DOEVENT_ENABLE, WAKEUP);
-			AI_Speak(npc, "*moves away from "+(event.source).name+"*");
-			AI_Move(npc, event.source, NEMOVE_AWAY, NEMOVE_WALK, WAKEUP, 1);
+		if ( event )
+			case ( event.type )
+				SYSEVENT_DOUBLECLICKED:
+					DoubleClickEvent(npc, event);
+					break;
+				default:
+					break;
+			endcase
+
+			event := 0;
 		endif
-		
+
+		sleepms(5);
 		event := wait_for_event(900000);
 	endwhile
 endprogram
+
+function DoubleClickEvent(npc, event)
+	AI_Speak(npc, "Eeeheee... that tickles!", SPEAK_TEXTTYPE_YELL, SPEAK_DOEVENT_ENABLE, WAKEUP);
+	AI_Speak(npc, "*moves away from "+(event.source).name+"*");
+	AI_Move(npc, event.source, NEMOVE_AWAY, NEMOVE_WALK, WAKEUP, 1);
+
+	return 1;
+endfunction

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src	2005-09-14 00:51:43 UTC (rev 120)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src	2005-09-14 01:04:26 UTC (rev 121)
@@ -6,13 +6,39 @@
 
 program BrainNerve(params)
 	var npc		:= params[1];
-	var nerve_name	:= params[2];
+	//var nerve_name	:= params[2];
 	var event	:= params[3];
-	var settings	:= params[4];
-	var scripts	:= params[5];
+	//var settings	:= params[4];
+	//var scripts	:= params[5];
 	params := 0; // Not needed anymore.
 	
 	while ( npc )
-		//Do stuff here.
+		if ( event )
+			case ( event.type )
+				SYSEVENT_ITEM_GIVEN:
+					ItemGivenEvent(npc, event);
+					break;
+				default:
+					break;
+			endcase
+
+			event := 0;
+		endif
+
+		sleepms(5);
+		event := wait_for_event(900000);
 	endwhile
+	
 endprogram
+
+function ItemGivenEvent(npc, event)
+	var item := event.item;
+	var source := event.source;
+	
+	if ( npc.backpack )
+		AI_Speak(npc, "Awww my very own "+item.desc+". Thank you so much "+source.name+"!", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+	else
+		AI_Speak(npc, "I have nowhere to put "+item.desc+", but thank you anyway.", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+	endif
+		
+endfunction
\ No newline at end of file



From austin at berlios.de  Wed Sep 14 03:55:58 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 14 Sep 2005 03:55:58 +0200
Subject: [Poldistro-svn] r122 - trunk/096/pkg/mobiles/ai_brain/complete/testnpc
Message-ID: <200509140155.j8E1two8027793@sheep.berlios.de>

Author: austin
Date: 2005-09-14 03:55:56 +0200 (Wed, 14 Sep 2005)
New Revision: 122

Modified:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src	2005-09-14 01:04:26 UTC (rev 121)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src	2005-09-14 01:55:56 UTC (rev 122)
@@ -11,7 +11,7 @@
 	//var settings	:= params[4];
 	//var scripts	:= params[5];
 	params := 0; // Not needed anymore.
-	
+
 	while ( npc )
 		if ( event )
 			case ( event.type )
@@ -28,17 +28,22 @@
 		sleepms(5);
 		event := wait_for_event(900000);
 	endwhile
-	
+
 endprogram
 
 function ItemGivenEvent(npc, event)
 	var item := event.item;
 	var source := event.source;
 	
-	if ( npc.backpack )
-		AI_Speak(npc, "Awww my very own "+item.desc+". Thank you so much "+source.name+"!", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+	var result := MoveItemToContainer(item, npc.backpack);
+	if ( result )
+		AI_Speak(npc, "Awww my very own '"+item.desc+"'. Thank you so much "+source.name+"!", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
 	else
-		AI_Speak(npc, "I have nowhere to put "+item.desc+", but thank you anyway.", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+		if ( !npc.backpack )
+			AI_Speak(npc, "I have nowhere to put '"+item.desc+"', but thank you anyway.", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+		else
+			AI_Speak(npc, "I was unable to put '"+item.desc+"' in my backpack. ["+result.errortext+"]", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+		endif
+		MoveItemToLocation(item, npc.x, npc.y, npc.z);
 	endif
-		
 endfunction
\ No newline at end of file



From austin at berlios.de  Wed Sep 14 03:57:54 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 14 Sep 2005 03:57:54 +0200
Subject: [Poldistro-svn] r123 - trunk/096/pkg/mobiles/ai_brain/complete/testnpc
Message-ID: <200509140157.j8E1vsGr028452@sheep.berlios.de>

Author: austin
Date: 2005-09-14 03:57:45 +0200 (Wed, 14 Sep 2005)
New Revision: 123

Modified:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src
Log:
More nerve updates

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src	2005-09-14 01:55:56 UTC (rev 122)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src	2005-09-14 01:57:45 UTC (rev 123)
@@ -37,12 +37,12 @@
 	
 	var result := MoveItemToContainer(item, npc.backpack);
 	if ( result )
-		AI_Speak(npc, "Awww my very own '"+item.desc+"'. Thank you so much "+source.name+"!", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+		AI_Speak(npc, "Awww my very own '"+item.desc+"'. Thank you so much "+source.name+"!", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_ENABLE, WAKEUP);
 	else
 		if ( !npc.backpack )
-			AI_Speak(npc, "I have nowhere to put '"+item.desc+"', but thank you anyway.", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+			AI_Speak(npc, "I have nowhere to put '"+item.desc+"', but thank you anyway.", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_ENABLE, WAKEUP);
 		else
-			AI_Speak(npc, "I was unable to put '"+item.desc+"' in my backpack. ["+result.errortext+"]", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+			AI_Speak(npc, "I was unable to put '"+item.desc+"' in my backpack. ["+result.errortext+"]", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_ENABLE, WAKEUP);
 		endif
 		MoveItemToLocation(item, npc.x, npc.y, npc.z);
 	endif

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src	2005-09-14 01:55:56 UTC (rev 122)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src	2005-09-14 01:57:45 UTC (rev 123)
@@ -33,6 +33,8 @@
 
 function SpeechEvent(npc, event)
 	AI_Speak(npc, "I just heard "+(event.source).name+" say \""+event.text+"\"", SPEAK_TEXTTYPE_DEFAULT, SPEAK_DOEVENT_DISABLE, WAKEUP);
+	
+	// Doing 'SPEAK_DOEVENT_ENABLE' here with multiple npcs around, could cause an infinite loop - they would keep talking to each other!
 	case ( event.texttype )
 		SPEAK_TEXTTYPE_YELL:
 			AI_Speak(npc, "*yells* No need to yell!", event.texttype, SPEAK_DOEVENT_DISABLE, WAKEUP);



From austin at berlios.de  Wed Sep 14 07:05:32 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 14 Sep 2005 07:05:32 +0200
Subject: [Poldistro-svn] r124 - in trunk/096/pkg/mobiles/ai_brain: complete/testnpc include/braincore
Message-ID: <200509140505.j8E55WMO007916@sheep.berlios.de>

Author: austin
Date: 2005-09-14 07:05:00 +0200 (Wed, 14 Sep 2005)
New Revision: 124

Modified:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src	2005-09-14 01:57:45 UTC (rev 123)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src	2005-09-14 05:05:00 UTC (rev 124)
@@ -24,7 +24,6 @@
 		if ( ShouldFlee(npc, flee_level) )
 			AI_Move(npc, opponent, NEMOVE_TOWARD, NEMOVE_RUN, WAKEUP, 100);
 		elseif ( DoneFighting(npc, opponent, dist) )
-			AI_WarMode(npc, 0);
 			AI_EndNerve(npc, nerve_name);
 		elseif( dist > 1 )
 			AI_Move(npc, opponent, NEMOVE_TOWARD, NEMOVE_RUN, WAKEUP, dist+1);
@@ -74,7 +73,7 @@
 				endif
 				break;
 			SYSEVENT_DAMAGED:
-				AI_Speak(npc, "OWCH "+source.name+" that hurts.");
+				//AI_Speak(npc, "OWCH "+source.name+" that hurts.");
 				break;
 			default:
 				break;

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src	2005-09-14 01:57:45 UTC (rev 123)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src	2005-09-14 05:05:00 UTC (rev 124)
@@ -32,9 +32,12 @@
 endprogram
 
 function Disengaged(npc, source)
+	PrintTextAbove(npc, "Disengaged ->"+source.name+" Source.dead == "+source.dead);
+	PrintTextAbove(npc, "Opponent == "+(npc.opponent).name);
 	if ( npc.opponent == source )
 		if ( source.dead )
 			AI_Speak(npc, "Killed ya! Neener!");
+			AI_WarMode(npc, 0);
 		else
 			AI_Speak(npc, "Wuss! Get back here and finish fighting me!");
 		endif

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-14 01:57:45 UTC (rev 123)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-14 05:05:00 UTC (rev 124)
@@ -188,6 +188,20 @@
 		//
 		// * Check custom events
 		//
+		
+		// Combat completed with the npc being victorious
+		// .source	: What dragged the item over the npc.
+		// .item	: The item being given to the npc.
+		SYSEVENT_ITEM_GIVEN:
+			if ( g_scripts.Exists("ItemGiven") )
+				var process := GetNerveProcess(npc, "ItemGiven");
+				if ( !process )
+					StartNerve(npc, "ItemGiven", g_scripts["ItemGiven"].script, array{event, g_settings, g_scripts}, g_scripts["ItemGiven"].flags);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
 
 		//A nerve has instructed the brain to kill another nerve or its self.
 		// .name	: Nerve name
@@ -203,13 +217,6 @@
 			StartNerve(npc, event.name, event.script, event.data, event.flags);
 			break;
 
-		// Set a new opponent!
-		// NOTE: Auto-sets Warmode=1!
-		// .source	: Opponent (mobile)
-		NPCEVENT_OPPONENT:
-			SetOpponent(event.source);
-			break;
-
 		// Say something
 		// .text	: Speech content
 		// .texttype	: Speech type ("default", "whisper", yell")
@@ -241,11 +248,20 @@
 					TurnAwayFromLocation(event.x, event.y);
 			endcase
 			break;
+			
+		// Set a new opponent!
+		// NOTE: Auto-sets Warmode=1!
+		// .source	: Opponent (mobile)
+		NPCEVENT_OPPONENT:
+			Say("Changing my warmode status to "+event.source);
+			SetOpponent(event.source);
+			break;
 
 		// Set WarMode state
 		// NOTE: Auto-clears Opponent if turned off!
 		// .value : 0=Off. 1=On.
 		NPCEVENT_WARMODE:
+			Say("Changing my warmode status to "+event.value);
 			SetWarmode( event.value );
 			break;
 



From austin at berlios.de  Wed Sep 14 14:02:08 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 14 Sep 2005 14:02:08 +0200
Subject: [Poldistro-svn] r125 - in trunk/096/pkg/mobiles/ai_brain: . complete/testnpc include include/braincore
Message-ID: <200509141202.j8EC28PB024246@sheep.berlios.de>

Author: austin
Date: 2005-09-14 14:02:00 +0200 (Wed, 14 Sep 2005)
New Revision: 125

Added:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src
Modified:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/cycle.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc
   trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
Log:
Beginning to implement targeting scripts.

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/cycle.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/cycle.src	2005-09-14 05:05:00 UTC (rev 124)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/cycle.src	2005-09-14 12:02:00 UTC (rev 125)
@@ -4,15 +4,13 @@
 include ":ai_brain:include/npcNerves";
 include ":ai_brain:include/npcCommands";
 
-program BrainNerve(params)
-	var npc		:= params[1];
-	var nerve_name	:= params[2];
-	var event	:= params[3];
-	var settings	:= params[4];
-	var scripts	:= params[5];
+program BrainCriticalScript(params)
+	//var npc		:= params[1];
+	//var nerve_name	:= params[2];
+	//var event	:= params[3];
+	//var settings	:= params[4];
+	//var scripts	:= params[5];
 	params := 0; // Not needed anymore.
 	
-	while ( npc )
-		// Do stuff here
-	endwhile
+	return 1;
 endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src	2005-09-14 05:05:00 UTC (rev 124)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src	2005-09-14 12:02:00 UTC (rev 125)
@@ -32,14 +32,7 @@
 endprogram
 
 function Disengaged(npc, source)
-	PrintTextAbove(npc, "Disengaged ->"+source.name+" Source.dead == "+source.dead);
-	PrintTextAbove(npc, "Opponent == "+(npc.opponent).name);
 	if ( npc.opponent == source )
-		if ( source.dead )
-			AI_Speak(npc, "Killed ya! Neener!");
-			AI_WarMode(npc, 0);
-		else
-			AI_Speak(npc, "Wuss! Get back here and finish fighting me!");
-		endif
+		AI_Speak(npc, "Wuss! Get back here and finish fighting me!");
 	endif
-endfunction
\ No newline at end of file
+endfunction

Added: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src	2005-09-14 05:05:00 UTC (rev 124)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src	2005-09-14 12:02:00 UTC (rev 125)
@@ -0,0 +1,42 @@
+use uo;
+use os;
+use util;
+
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcCommands";
+include ":ai_brain:include/npcWatchList";
+
+program BrainNerve(params)
+	var npc		:= params[1];
+	//var nerve_name	:= params[2];
+	//var event	:= params[3];
+	var settings	:= params[4];
+	//var scripts	:= params[5];
+	params := 0; // Not needed anymore.
+	
+	while ( npc )
+		if ( !npc.opponent )
+			FindOpponent(npc, settings);
+		endif
+				
+		Sleep(3);
+	endwhile
+endprogram
+
+function FindOpponent(npc, byref settings)
+	var attack_list := array;
+	foreach mobile in ListMobilesInLineOfSight(npc, CInt(settings["AreaSize"]))
+		if ( (mobile.ip) && (!mobile.cmdlevel) )
+			attack_list.Append(mobile);
+		endif
+		sleepms(2);
+	endforeach
+	
+	if ( attack_list.size() > 0 )
+		var victim := attack_list[RandomInt(attack_list.Size())+1];
+		AI_Attack(npc, victim);
+		return victim;
+	endif
+	
+	return 0;
+endfunction
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-14 05:05:00 UTC (rev 124)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-14 12:02:00 UTC (rev 125)
@@ -82,6 +82,20 @@
 				endif
 			endif
 			break;
+		
+		// Instructs the npc to run its disengage nerve.
+		// When something attacking it goes out of warmode, this is run.
+		// .source	: What was targetting this npc but has now left combat mode.
+		SYSEVENT_DISENGAGED:
+			if ( g_scripts.Exists("Disengaged") )
+				var process := GetNerveProcess(npc, "Disengaged");
+				if ( !process )
+					StartNerve(npc, "Disengaged", g_scripts["Disengaged"].script, array{event, g_settings, g_scripts}, g_scripts["Disengaged"].flags);
+				else
+					process.SendEvent(event);
+				endif
+			endif
+			break;
 
 		// Sent when something targets the npc to begin combat or
 		// when something has damaged the npc.
@@ -102,20 +116,6 @@
 			endif
 			break;
 
-		// Instructs the npc to run its disengage nerve.
-		// When something attacking it goes out of warmode, this is run.
-		// .source	: What was targetting this npc but has now left combat mode.
-		SYSEVENT_DISENGAGED:
-			if ( g_scripts.Exists("Disengaged") )
-				var process := GetNerveProcess(npc, "Disengaged");
-				if ( !process )
-					StartNerve(npc, "Disengaged", g_scripts["Disengaged"].script, array{event, g_settings, g_scripts}, g_scripts["Disengaged"].flags);
-				else
-					process.SendEvent(event);
-				endif
-			endif
-			break;
-
 		// When speech is made by a mobile, this nerve is used.
 		// .source	: Where the speech originated.
 		// .text	: The actual speech

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-14 05:05:00 UTC (rev 124)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-14 12:02:00 UTC (rev 125)
@@ -126,5 +126,9 @@
 		endif
 	endif
 	
+	if ( g_scripts.Exists("LookAround") )
+		StartNerve(npc, "LookAround", g_scripts["LookAround"].script, array{event, g_settings, g_scripts}, g_scripts["LookAround"].flags);
+		
+	
 	return 1;
 endfunction
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc	2005-09-14 05:05:00 UTC (rev 124)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc	2005-09-14 12:02:00 UTC (rev 125)
@@ -142,3 +142,30 @@
 	var watch_dict := NPC_LoadWatchList(npc);
 	return watch_dict.Exists(mobile);
 endfunction
+
+/*
+ * NPC_ShouldWatch(npc, mobile, script_path)
+ *
+ * Purpose
+ * Checks if a mobile is in an npc's watch list.
+ *
+ * Parameters
+ * npc:		NPC that will do the checking
+ * mobile:	Mobile to check to be added to the watch list.
+ * settings:	Dictionary of the NPC's settings.
+ * scripts:	Dictionary of the npcs script settings.
+ *
+ * Return value
+ * Returns 1 if the mobile is a potential target.
+ *
+ */
+function NPC_ShouldWatch(npc, mobile, byref settings, byref scripts)
+	if ( !scripts["ShouldWatch"] )
+		// Assume it wants to watch everything if it has no script.
+		return 1;
+	endif
+	
+	var result := Run_Script_To_Completion(scripts["ShouldWatch"], {npc, mobile, settings});
+	
+	return result;
+endfunction

Modified: trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-14 05:05:00 UTC (rev 124)
+++ trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-14 12:02:00 UTC (rev 125)
@@ -33,8 +33,10 @@
 	AIScript	GoneCriminal	:ai_brain:complete/testNPC/goneCriminal
 	AIScript	ItemGiven	:ai_brain:complete/testNPC/itemGiven
 	AIScript	LeftArea	:ai_brain:complete/testNPC/leftArea
+	AIScript	LookAround	:ai_brain:complete/testNPC/lookAround
 	AIScript	Listen		:ai_brain:complete/testNPC/listen
 	AIScript	Restart		:ai_brain:complete/testNPC/restart
 	AIScript	Sleep		:ai_brain:complete/testNPC/sleep
+	AIScript	ShouldWatch	:ai_brain:complete/testNPC/shouldWatch
 	AIScript	Virtual		:ai_brain:complete/testNPC/virtual
 }



From austin at berlios.de  Wed Sep 14 14:31:31 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 14 Sep 2005 14:31:31 +0200
Subject: [Poldistro-svn] r126 - in trunk/096/pkg/mobiles/ai_brain: . complete/testnpc include/braincore
Message-ID: <200509141231.j8ECVVIs026113@sheep.berlios.de>

Author: austin
Date: 2005-09-14 14:31:31 +0200 (Wed, 14 Sep 2005)
New Revision: 126

Added:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/shouldWatch.src
Modified:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc
   trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src	2005-09-14 12:02:00 UTC (rev 125)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src	2005-09-14 12:31:31 UTC (rev 126)
@@ -9,16 +9,15 @@
 	var npc		:= params[1];
 	//var nerve_name	:= params[2];
 	var event	:= params[3];
-	//var settings	:= params[4];
-	//var scripts	:= params[5];
+	var settings	:= params[4];
+	var scripts	:= params[5];
 	params := 0; // Not needed anymore.
 	
 	while ( npc )
 		if ( event )
-			var source := event.source;
 			case ( event.type )
 				SYSEVENT_ENTEREDAREA:
-					EnteredArea(npc, source);
+					EnteredArea(npc, event, settings, scripts);
 					break;
 				default:
 					break;
@@ -32,18 +31,16 @@
 	endwhile
 endprogram
 
-function EnteredArea(npc, source)
-	if ( source.npctemplate )
-		return 0;
-	elseif ( source.concealed )
-		return 0;
-	elseif ( source.acctname )
+function EnteredArea(npc, byref event, byref settings, byref scripts)
+	var source := event.source;
+	
+	if ( NPC_ShouldWatch(npc, source, settings, scripts) )
 		if ( NPC_AddToWatchList(npc, source) )
 			AI_WakeUp(npc);
 			AI_Speak(npc, "Ive added you to my watch list "+source.name);
+			
+			return 1;
 		endif
-		
-		return 1;
 	endif
 	
 	return 0;

Added: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/shouldWatch.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/shouldWatch.src	2005-09-14 12:02:00 UTC (rev 125)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/shouldWatch.src	2005-09-14 12:31:31 UTC (rev 126)
@@ -0,0 +1,16 @@
+use uo;
+use os;
+use util;
+
+include ":ai_brain:include/npcNerves";
+include ":ai_brain:include/npcCommands";
+include ":ai_brain:include/npcWatchList";
+
+program BrainCriticalScript(params)
+	var npc := params[1];
+	var mobile := params[2];
+	var settings := params[3];
+	params := 0; // Not needed anymore
+	
+	return 1;
+endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-14 12:02:00 UTC (rev 125)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-14 12:31:31 UTC (rev 126)
@@ -189,20 +189,6 @@
 		// * Check custom events
 		//
 		
-		// Combat completed with the npc being victorious
-		// .source	: What dragged the item over the npc.
-		// .item	: The item being given to the npc.
-		SYSEVENT_ITEM_GIVEN:
-			if ( g_scripts.Exists("ItemGiven") )
-				var process := GetNerveProcess(npc, "ItemGiven");
-				if ( !process )
-					StartNerve(npc, "ItemGiven", g_scripts["ItemGiven"].script, array{event, g_settings, g_scripts}, g_scripts["ItemGiven"].flags);
-				else
-					process.SendEvent(event);
-				endif
-			endif
-			break;
-
 		//A nerve has instructed the brain to kill another nerve or its self.
 		// .name	: Nerve name
 		NPCEVENT_ENDNERVE:

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-14 12:02:00 UTC (rev 125)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc	2005-09-14 12:31:31 UTC (rev 126)
@@ -127,8 +127,8 @@
 	endif
 	
 	if ( g_scripts.Exists("LookAround") )
-		StartNerve(npc, "LookAround", g_scripts["LookAround"].script, array{event, g_settings, g_scripts}, g_scripts["LookAround"].flags);
-		
+		StartNerve(npc, "LookAround", g_scripts["LookAround"].script, array{g_settings, g_scripts}, g_scripts["LookAround"].flags);
+	endif		
 	
 	return 1;
 endfunction
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc	2005-09-14 12:02:00 UTC (rev 125)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc	2005-09-14 12:31:31 UTC (rev 126)
@@ -50,6 +50,11 @@
  */
 function LeaveSleepMode()
 	StopNerve(npc, "Sleep");
+	
+	if ( g_scripts.Exists("LookAround") )
+		StartNerve(npc, "LookAround", g_scripts["LookAround"].script, array{g_settings, g_scripts}, g_scripts["LookAround"].flags);
+	endif
+	
 	idle_ticks := 0;
 	sleep_mode := 0;
 endfunction

Modified: trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-14 12:02:00 UTC (rev 125)
+++ trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-14 12:31:31 UTC (rev 126)
@@ -27,6 +27,7 @@
 	AISetting	HearGhosts	i1
 	
 	AIScript	Combat		:ai_brain:complete/testNPC/combat
+	AIScript	Cycle		:ai_brain:complete/testNPC/cycle
 	AIScript	DblClick	:ai_brain:complete/testNPC/doubleClick
 	AIScript	Disengaged	:ai_brain:complete/testNPC/disengaged
 	AIScript	EnterArea	:ai_brain:complete/testNPC/enteredArea
@@ -35,8 +36,10 @@
 	AIScript	LeftArea	:ai_brain:complete/testNPC/leftArea
 	AIScript	LookAround	:ai_brain:complete/testNPC/lookAround
 	AIScript	Listen		:ai_brain:complete/testNPC/listen
+	AISCript	Merchant	:ai_brain:complete/testNPC/merchant
 	AIScript	Restart		:ai_brain:complete/testNPC/restart
 	AIScript	Sleep		:ai_brain:complete/testNPC/sleep
 	AIScript	ShouldWatch	:ai_brain:complete/testNPC/shouldWatch
 	AIScript	Virtual		:ai_brain:complete/testNPC/virtual
+	AIScript	WonFight	:ai_brain:complete/testNPC/wonFight
 }



From austin at berlios.de  Wed Sep 14 14:57:23 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 14 Sep 2005 14:57:23 +0200
Subject: [Poldistro-svn] r127 - trunk/096/pkg/mobiles/ai_brain/complete/testnpc
Message-ID: <200509141257.j8ECvNsV028462@sheep.berlios.de>

Author: austin
Date: 2005-09-14 14:57:23 +0200 (Wed, 14 Sep 2005)
New Revision: 127

Modified:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src
Log:
The ShouldWatch() check in this script may be a little too heavy... but im tired!

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src	2005-09-14 12:31:31 UTC (rev 126)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src	2005-09-14 12:57:23 UTC (rev 127)
@@ -11,22 +11,27 @@
 	//var nerve_name	:= params[2];
 	//var event	:= params[3];
 	var settings	:= params[4];
-	//var scripts	:= params[5];
+	var scripts	:= params[5];
 	params := 0; // Not needed anymore.
 	
 	while ( npc )
 		if ( !npc.opponent )
-			FindOpponent(npc, settings);
+			if ( NPC_LoadWatchList(npc).size() < 1 )
+				AI_Sleep(npc);
+			else
+				AI_WakeUp(npc);
+				FindOpponent(npc, settings, scripts);
+			endif
 		endif
-				
-		Sleep(3);
+		
+		Sleep(1);
 	endwhile
 endprogram
 
-function FindOpponent(npc, byref settings)
+function FindOpponent(npc, byref settings, byref scripts)
 	var attack_list := array;
 	foreach mobile in ListMobilesInLineOfSight(npc, CInt(settings["AreaSize"]))
-		if ( (mobile.ip) && (!mobile.cmdlevel) )
+		if ( NPC_ShouldWatch(npc, mobile, settings, scripts) )
 			attack_list.Append(mobile);
 		endif
 		sleepms(2);



From austin at berlios.de  Wed Sep 14 15:16:13 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 14 Sep 2005 15:16:13 +0200
Subject: [Poldistro-svn] r128 - in trunk/096/pkg/mobiles/ai_brain: complete/testnpc include include/braincore
Message-ID: <200509141316.j8EDGDFj029875@sheep.berlios.de>

Author: austin
Date: 2005-09-14 15:16:11 +0200 (Wed, 14 Sep 2005)
New Revision: 128

Modified:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/shouldWatch.src
   trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc
Log:
Okay this is getting close to finished, people. :-)

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src	2005-09-14 12:57:23 UTC (rev 127)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src	2005-09-14 13:16:11 UTC (rev 128)
@@ -15,10 +15,9 @@
 	
 	while ( npc )
 		if ( event )
-			var source := event.source;
 			case ( event.type )
 				SYSEVENT_LEFTAREA:
-					LeftArea(npc, source);
+					LeftArea(npc, event);
 					break;
 				default:
 					break;
@@ -32,13 +31,13 @@
 	endwhile
 endprogram
 
-function LeftArea(npc, source)
+function LeftArea(npc, byref event)
+	var source := event.source;
+
 	if ( source.npctemplate )
 		return 0;
-	else
-		NPC_RemoveFromWatchList(npc, source);
+	elseif ( NPC_RemoveFromWatchList(npc, source) )
 		AI_Speak(npc, "I am no longer watching "+source.name);
-		
 		return 1;
 	endif
 	

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src	2005-09-14 12:57:23 UTC (rev 127)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src	2005-09-14 13:16:11 UTC (rev 128)
@@ -24,6 +24,7 @@
 			endif
 		endif
 		
+		AI_ClearThoughts(npc, CLR_NERVE);
 		Sleep(1);
 	endwhile
 endprogram

Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/shouldWatch.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/shouldWatch.src	2005-09-14 12:57:23 UTC (rev 127)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/shouldWatch.src	2005-09-14 13:16:11 UTC (rev 128)
@@ -7,9 +7,9 @@
 include ":ai_brain:include/npcWatchList";
 
 program BrainCriticalScript(params)
-	var npc := params[1];
-	var mobile := params[2];
-	var settings := params[3];
+	//var npc := params[1];
+	//var mobile := params[2];
+	//var settings := params[3];
 	params := 0; // Not needed anymore
 	
 	return 1;

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc	2005-09-14 12:57:23 UTC (rev 127)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc	2005-09-14 13:16:11 UTC (rev 128)
@@ -22,7 +22,7 @@
  */
 function RunCycleScript()
 	if ( g_scripts["Cycle"] )
-		var script := Run_Script_To_Completion(g_scripts["Cycle"], array{npc, g_settings, g_scripts});
+		var script := Run_Script_To_Completion(g_scripts["Cycle"].script, array{npc, g_settings, g_scripts});
 		
 		if ( script.errortext )
 			NPC_ErrorSysLog(npc, "Error::RunCycleScript() - "+script.errortext);

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-14 12:57:23 UTC (rev 127)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-14 13:16:11 UTC (rev 128)
@@ -255,13 +255,13 @@
 		// If the next event in the queue tells it to wake up,
 		// this command will be useless.
 		NPCEVENT_SLEEP:
-			//idle_ticks := g_settings["idle_ticks"]+1;
+			idle_ticks := g_settings["IdleTicks"]+1;
+			EnterSleepMode();
 			break;
 
 		// Force the npc out of sleep mode.
 		NPCEVENT_WAKEUP:
-			//sleep_mode := 0;
-			//idle_ticks := 0;
+			LeaveSleepMode();
 			break;
 
 		// Forward an event from one nerve to another.

Modified: trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc	2005-09-14 12:57:23 UTC (rev 127)
+++ trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc	2005-09-14 13:16:11 UTC (rev 128)
@@ -11,6 +11,8 @@
 use uo;
 use os;
 
+include ":ai_brain:include/npcError";
+
 /////////////////////////////////////////////////////////////////
 // * Function List *
 //
@@ -115,6 +117,8 @@
 	if ( watch_dict.Exists(mobile) )
 		watch_dict.Erase(mobile);
 		NPC_SaveWatchList(npc, watch_dict);
+		
+		return 1;
 	else
 		return 0;
 	endif
@@ -165,7 +169,10 @@
 		return 1;
 	endif
 	
-	var result := Run_Script_To_Completion(scripts["ShouldWatch"], {npc, mobile, settings});
+	var result := Run_Script_To_Completion(scripts["ShouldWatch"].script, {npc, mobile, settings});
+	if ( result.errortext )
+		NPC_ErrorSysLog(npc, "Error::NPC_ShouldWatch() - "+result.errortext);
+	endif
 	
 	return result;
 endfunction



From austin at berlios.de  Thu Sep 15 03:59:42 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 15 Sep 2005 03:59:42 +0200
Subject: [Poldistro-svn] r129 - in trunk/096/pkg/utils: . servperf servperf/www
Message-ID: <200509150159.j8F1xgXq009168@sheep.berlios.de>

Author: austin
Date: 2005-09-15 03:59:37 +0200 (Thu, 15 Sep 2005)
New Revision: 129

Added:
   trunk/096/pkg/utils/servperf/
   trunk/096/pkg/utils/servperf/pkg.cfg
   trunk/096/pkg/utils/servperf/recbandwidth.src
   trunk/096/pkg/utils/servperf/start.src
   trunk/096/pkg/utils/servperf/www/
   trunk/096/pkg/utils/servperf/www/all_scripts.asp
   trunk/096/pkg/utils/servperf/www/bandwidth.asp
   trunk/096/pkg/utils/servperf/www/header.inc
   trunk/096/pkg/utils/servperf/www/index.asp
   trunk/096/pkg/utils/servperf/www/iostats.asp
   trunk/096/pkg/utils/servperf/www/long_running_scripts.asp
   trunk/096/pkg/utils/servperf/www/npcgroup.asp
   trunk/096/pkg/utils/servperf/www/running_scripts.asp
   trunk/096/pkg/utils/servperf/www/script_profiles.asp
   trunk/096/pkg/utils/servperf/www/scriptex.asp
   trunk/096/pkg/utils/servperf/www/storage.asp
   trunk/096/pkg/utils/servperf/www/storagearea.asp
Log:
Sygygy's server performance package - its like a web debugger. Amazed it wasn't already in the distro.

Added: trunk/096/pkg/utils/servperf/pkg.cfg
===================================================================
--- trunk/096/pkg/utils/servperf/pkg.cfg	2005-09-14 13:16:11 UTC (rev 128)
+++ trunk/096/pkg/utils/servperf/pkg.cfg	2005-09-15 01:59:37 UTC (rev 129)
@@ -0,0 +1,6 @@
+Enabled 1
+CoreRequired 84
+Name servperf
+Maintainer Syzygy
+Email syzygy at pobox.com
+Version 1.1
\ No newline at end of file

Added: trunk/096/pkg/utils/servperf/recbandwidth.src
===================================================================
--- trunk/096/pkg/utils/servperf/recbandwidth.src	2005-09-14 13:16:11 UTC (rev 128)
+++ trunk/096/pkg/utils/servperf/recbandwidth.src	2005-09-15 01:59:37 UTC (rev 129)
@@ -0,0 +1,29 @@
+use os;
+use uo;
+
+// This program records the bandwidth used per minute
+// Samples are stored for the last HISTORY_MINUTES minutes 
+// each element contains { bytes_received, bytes_sent } for that minute
+
+const HISTORY_MINUTES := 10;
+
+program record_bandwidth_used()
+    var results := { {0,0} };
+    var system := polcore();
+    var last_received := system.bytes_received;
+    var last_sent := system.bytes_sent;
+    var this_received, this_sent;
+
+    set_critical(1);
+    while (1)
+        sleep( 60 );
+        this_received := system.bytes_received;
+        this_sent := system.bytes_sent;    
+        results.insert( 1, { this_received-last_received,this_sent-last_sent } );
+        // print( "results: " + results );
+        results.erase( HISTORY_MINUTES+1 );
+        last_received := this_received;
+        last_sent := this_sent;
+        SetGlobalProperty( "#:servperf:bandwidth", results );
+    endwhile     
+endprogram
\ No newline at end of file

Added: trunk/096/pkg/utils/servperf/start.src
===================================================================
--- trunk/096/pkg/utils/servperf/start.src	2005-09-14 13:16:11 UTC (rev 128)
+++ trunk/096/pkg/utils/servperf/start.src	2005-09-15 01:59:37 UTC (rev 129)
@@ -0,0 +1,3 @@
+use os;
+
+start_script( "recbandwidth" );

Added: trunk/096/pkg/utils/servperf/www/all_scripts.asp
===================================================================
--- trunk/096/pkg/utils/servperf/www/all_scripts.asp	2005-09-14 13:16:11 UTC (rev 128)
+++ trunk/096/pkg/utils/servperf/www/all_scripts.asp	2005-09-15 01:59:37 UTC (rev 129)
@@ -0,0 +1,56 @@
+<%
+use uo;
+use os;
+%>
+
+<html>
+<head>
+<title>All Scripts</title>
+</head>
+
+<body>
+<% 
+  include header; 
+  PrintHeader( "All Scripts" );
+%>
+
+<div align=center>
+<table border=1 cellspacing=0 cellpadding=5>
+  <tr bgcolor=#99CCFF>
+	<td>PID</td>
+    <td>Script Name</td>
+    <td>Cycles</td>
+	<!--<td>Sleep Cycles</td>-->
+    <td>Cycles since Sleep</td>
+    <td>Prog Counter</td>
+	<td>Call Depth</td>
+	<td>Globals</td>
+	<td>Var Size</td>
+	<td>State</td>
+  </tr>
+
+<%
+  foreach script in (polcore().all_scripts)
+%>
+  <tr>
+    <td><a href="scriptex.ecl?pid=<%=script.pid%>"><%=script.pid%></a></td>
+    <td><%=script.name%></td>
+	<td><%=script.instr_cycles%></td>
+	<!--<td><%=script.sleep_cycles%></td>-->
+    <td><%=script.consec_cycles%></td>
+	<td><%=script.PC%></td>
+	<td><%=script.call_depth%></td>
+	<td><%=script.num_globals%></td>
+	<td><%=script.var_size%></td>
+	<td><%=script.state%></td>
+  </tr>
+<%
+    sleepms(1);
+  endforeach
+%>
+
+</table>
+</div>
+
+</BODY>
+</HTML>

Added: trunk/096/pkg/utils/servperf/www/bandwidth.asp
===================================================================
--- trunk/096/pkg/utils/servperf/www/bandwidth.asp	2005-09-14 13:16:11 UTC (rev 128)
+++ trunk/096/pkg/utils/servperf/www/bandwidth.asp	2005-09-15 01:59:37 UTC (rev 129)
@@ -0,0 +1,32 @@
+<%
+use os;
+use uo;
+%>
+
+<HTML>
+<BODY>
+<% 
+  include header; 
+  PrintHeader( "Bandwidth Usage" );
+%>
+
+<table border=1 cellspacing=0 cellpadding=5>
+  <tr bgcolor=#99CCFF>
+    <td>Bytes Sent</td>
+    <td>bps out</td>
+    <td>Received</td>
+    <td>bps in</td>
+  </tr>
+
+<% foreach elem in (GetGlobalProperty( "#:servperf:bandwidth" )) %>
+  <tr>
+    <td><%=elem[2]%></td>
+    <td><%=elem[2]/6%></td>
+    <td><%=elem[1]%></td>
+    <td><%=elem[1]/6%></td>
+  </tr>
+<% endforeach %>
+</table>
+
+</body>
+</html>

Added: trunk/096/pkg/utils/servperf/www/header.inc
===================================================================
--- trunk/096/pkg/utils/servperf/www/header.inc	2005-09-14 13:16:11 UTC (rev 128)
+++ trunk/096/pkg/utils/servperf/www/header.inc	2005-09-15 01:59:37 UTC (rev 129)
@@ -0,0 +1,9 @@
+function PrintHeader( name )
+  WriteHtmlRaw( "<table border=0 width=\"100%\"" 
+      +"<tr>"
+      +"<td valign=\"top\" width=\"100%\"><strong><big>" + name + "</big></strong></td>"
+      +"<td width=\"50%\" valign=\"top\" align=\"right\" nowrap><a href=\"index.ecl\"><small>Performance<br>"
+      +"Home</small></a></td>"
+      +"</tr>"
+      +"</table>" );
+endfunction

Added: trunk/096/pkg/utils/servperf/www/index.asp
===================================================================
--- trunk/096/pkg/utils/servperf/www/index.asp	2005-09-14 13:16:11 UTC (rev 128)
+++ trunk/096/pkg/utils/servperf/www/index.asp	2005-09-15 01:59:37 UTC (rev 129)
@@ -0,0 +1,103 @@
+<%
+use uo;
+use polsys;
+%>
+<html>
+
+<head>
+<title>POL Server Performance Center</title>
+</head>
+
+<%
+if (QueryParam( "PriDiv" ))
+    polcore().set_priority_divide( CInt(QueryParam("PriDiv")) );
+endif
+%>
+
+<body>
+
+<p>POL Server Performance Center</p>
+<p>Server Vitals:</p>
+
+<table border="1" width="100%">
+  <tr>
+    <td width="50%">System Load:</td>
+    <td width="50%"><%=polcore().sysload%>&nbsp;(<%=polcore().sysload_severity%>)</td>
+  </tr>
+  <tr>
+    <td width="50%">Mobiles:</td>
+    <td width="50%"><%=polcore().mobilecount%></td>
+  </tr>
+  <tr>
+    <td width="50%">Toplevel Items:</td>
+    <td width="50%"><%=polcore().itemcount%></td>
+  </tr>
+  <tr>
+    <td width="50%">Online Players:</td>
+    <td width="50%"><%=EnumerateOnlineCharacters().size()%></td>
+  </tr>
+  <tr>
+    <td>Storage Areas:</td>
+	<td><a href="storage.ecl"><%=StorageAreas().count%></a></td>
+  </tr>
+  <tr>
+    <td width="50%">Events per Minute:</td>
+    <td width="50%"><%=polcore().events_per_min%></td>
+  </tr>
+  <tr>
+    <td width="50%">Error creations per Minute:</td>
+    <td width="50%"><%=polcore().error_creations_per_min%></td>
+  </tr>
+  <tr>
+    <td width="50%">Skill Checks per Minute:</td>
+    <td width="50%"><%=polcore().skill_checks_per_min%></td>
+  </tr>
+  <tr>
+    <td width="50%">Combat Operations per Minute:</td>
+    <td width="50%"><%=polcore().combat_operations_per_min%></td>
+  </tr>
+  <tr>
+    <td width="50%">Task scheduler deadlines met:</td>
+<% 
+   var tasks_ontime := polcore().tasks_ontime_per_min;
+   var tasks_late := polcore().tasks_late_per_min;
+   var tasks_late_ticks := polcore().tasks_late_ticks_per_min;
+%>
+    <td width="50%"><%=tasks_ontime%>/<%=tasks_ontime+tasks_late%> (<%=tasks_late_ticks%> ticks)</td>
+  </tr>
+  <tr>
+    <td width="50%">Script scheduler deadlines met:</td>
+<%
+   var scripts_ontime := polcore().scripts_ontime_per_min;
+   var scripts_late := polcore().scripts_late_per_min;
+%>
+    <td width="50%"><%=scripts_ontime%>/<%=scripts_ontime+scripts_late%></td>
+  </tr>
+  <tr>
+    <td width="50%">Script Instructions per Minute:</td>
+    <td width="50%"><%=polcore().instr_per_min%></td>
+  </tr>
+  <tr>
+    <td width="50%">Bytes Sent:</td>
+    <td width="50%"><%=polcore().bytes_sent%></td>
+  </tr>
+  <tr>
+    <td width="50%">Bytes Received:</td>
+    <td width="50%"><%=polcore().bytes_received%></td>
+  </tr>
+  <tr>
+    <td width="50%">Priority Divider:</td>
+    <td width="50%"><form><input type=text name=PriDiv value="<%=polcore().priority_divide%>"></form></td>
+  </tr>
+</table>
+
+<ul>
+<li><a href="npcgroup.ecl">NPC Grouping</a>
+<li><a href="script_profiles.ecl">Script Profiles</a>
+<li><a href="running_scripts.ecl">Running Scripts</a>
+<li><a href="long_running_scripts.ecl">Long Running Scripts</a>
+<li><a href="all_scripts.ecl">All Scripts</a>
+<li><a href="bandwidth.ecl">Bandwidth Usage</a>
+</ul>
+</body>
+</html>

Added: trunk/096/pkg/utils/servperf/www/iostats.asp
===================================================================
--- trunk/096/pkg/utils/servperf/www/iostats.asp	2005-09-14 13:16:11 UTC (rev 128)
+++ trunk/096/pkg/utils/servperf/www/iostats.asp	2005-09-15 01:59:37 UTC (rev 129)
@@ -0,0 +1,49 @@
+<%
+use uo;
+use os;
+%>
+
+<html>
+<head>
+<title>Script Profiles</title>
+</head>
+
+<body>
+
+<% 
+  include header; 
+  PrintHeader( "Script Profiles" );
+%>
+
+<div align=center>
+<table border=1 cellspacing=0 cellpadding=5>
+  <tr bgcolor=#99CCFF>
+    <td colspan=3>Packets Sent</td>
+  </tr>
+  <tr bgcolor=#99CCFF>
+    <td>Message Type</td>
+    <td>Count</td>
+    <td>Bytes</td>
+  </tr>
+<%
+  var iostats;
+
+  iostats := polcore().iostats;
+  for msgtype := 0 to 255
+    if (iostats.sent[msgtype+1].count)
+%>
+  <tr>
+	<td><%=msgtype%></td>
+    <td><%=iostats.sent[msgtype+1].count%></td>
+    <td><%=iostats.sent[msgtype+1].bytes%></td>
+  </tr>
+<%
+    endif
+  endfor
+%>
+
+</table>
+</div>
+
+</BODY>
+</HTML>

Added: trunk/096/pkg/utils/servperf/www/long_running_scripts.asp
===================================================================
--- trunk/096/pkg/utils/servperf/www/long_running_scripts.asp	2005-09-14 13:16:11 UTC (rev 128)
+++ trunk/096/pkg/utils/servperf/www/long_running_scripts.asp	2005-09-15 01:59:37 UTC (rev 129)
@@ -0,0 +1,54 @@
+<%
+use uo;
+use os;
+%>
+
+<html>
+<head>
+<title>Long Running Scripts</title>
+</head>
+
+<body>
+<% 
+  include header; 
+  PrintHeader( "Long-running Scripts" );
+%>
+
+<div align=center>
+<table border=1 cellspacing=0 cellpadding=5>
+  <tr bgcolor=#99CCFF>
+    <td>Script Name</td>
+    <td>Cycles</td>
+	<!--<td>Sleep Cycles</td>-->
+    <td>Cycles since Sleep</td>
+    <td>Prog Counter</td>
+	<td>Call Depth</td>
+	<td>Globals</td>
+	<td>Var Size</td>
+  </tr>
+
+<%
+  foreach script in (polcore().running_scripts)
+    if (script.consec_cycles >= 50)
+%>
+  <tr>
+    <td><%=script.name%></td>
+	<td><%=script.instr_cycles%></td>
+	<!--<td><%=script.sleep_cycles%></td>-->
+    <td><%=script.consec_cycles%></td>
+	<td><%=script.PC%></td>
+	<td><%=script.call_depth%></td>
+	<td><%=script.num_globals%></td>
+	<td><%=script.var_size%></td>
+  </tr>
+<%
+    endif
+    sleepms(1);
+  endforeach
+%>
+
+</table>
+</div>
+
+</BODY>
+</HTML>

Added: trunk/096/pkg/utils/servperf/www/npcgroup.asp
===================================================================
--- trunk/096/pkg/utils/servperf/www/npcgroup.asp	2005-09-14 13:16:11 UTC (rev 128)
+++ trunk/096/pkg/utils/servperf/www/npcgroup.asp	2005-09-15 01:59:37 UTC (rev 129)
@@ -0,0 +1,88 @@
+<% 
+   use uo;
+   use os; 
+   set_priority(200);
+%>
+<html>
+
+<head>
+<title>POL Server Performance Center - NPC Grouping</title>
+<meta name="GENERATOR" content="Microsoft FrontPage 3.0">
+</head>
+
+<body>
+
+<% 
+  include header; 
+  PrintHeader( "NPC Grouping" );
+%>
+
+<table border="1" width="100%">
+  <tr>
+    <td width="50%">(x,y) center</td>
+    <td width="50%">NPC Count</td>
+  </tr>
+<% foreach zone in (top_ten_npc_zones()) %>
+  <tr>
+    <td><%=zone.xmid%>,<%=zone.ymid%></td>
+	<td><%=zone.npc_count%></td>
+  </tr>
+<% endforeach %>
+</table>
+</body>
+</html>
+
+<%
+use os;
+
+function top_ten_npc_zones()
+    var zones := {};
+	var zone := {};
+	zone.+xmid := 0;
+	zone.+ymid := 0;
+	zone.+npc_count := 0;
+	zones[11] := zone;
+	foreach z in zones
+	    z := zone;
+	endforeach;
+
+	var xmid, ymid, lowest;
+	lowest := 0;
+	for( xmid := 31; xmid < 6144; xmid := xmid + 64 )
+	    // print( CStr(xmid) );
+	    for( ymid := 31; ymid < 4096; ymid := ymid + 64 )
+			var npc_count := GetNpcCount( xmid, ymid, 32 );
+			if (npc_count > lowest)
+			    var i;
+				for( i := 1; i <= 10; i := i + 1)
+				    if (npc_count > zones[i].npc_count)
+				        // print( "npc count for zone index " + i + " is " + npc_count );
+						zone.xmid := xmid;
+						zone.ymid := ymid;
+						zone.npc_count := npc_count;
+						zones.insert( i, zone );
+						zones.erase( 11 );
+						// print( zones );
+						break;
+					endif
+				endfor
+				lowest := zones[10].npc_count;
+			endif
+         	sleepms(1);
+		endfor
+	endfor
+	zones.erase( 11 );
+	return zones;
+endfunction
+
+function GetNpcCount( xmid, ymid, range )
+    var count := 0;
+	foreach obj in ListObjectsInBox( xmid-range, ymid-range, -128,
+	                                 xmid+range, ymid+range, +127 )
+	    if (obj.npctemplate)
+		    count := count + 1;
+		endif
+	endforeach
+	return count;
+endfunction
+%>

Added: trunk/096/pkg/utils/servperf/www/running_scripts.asp
===================================================================
--- trunk/096/pkg/utils/servperf/www/running_scripts.asp	2005-09-14 13:16:11 UTC (rev 128)
+++ trunk/096/pkg/utils/servperf/www/running_scripts.asp	2005-09-15 01:59:37 UTC (rev 129)
@@ -0,0 +1,52 @@
+<%
+use uo;
+use os;
+%>
+
+<html>
+<head>
+<title>Running Scripts</title>
+</head>
+
+<body>
+<% 
+  include header; 
+  PrintHeader( "Running Scripts" );
+%>
+
+<div align=center>
+<table border=1 cellspacing=0 cellpadding=5>
+  <tr bgcolor=#99CCFF>
+    <td>Script Name</td>
+    <td>Cycles</td>
+	<!--<td>Sleep Cycles</td>-->
+    <td>Cycles since Sleep</td>
+    <td>Prog Counter</td>
+	<td>Call Depth</td>
+	<td>Globals</td>
+	<td>Var Size</td>
+  </tr>
+
+<%
+  foreach script in (polcore().running_scripts)
+%>
+  <tr>
+    <td><%=script.name%></td>
+	<td><%=script.instr_cycles%></td>
+	<!--<td><%=script.sleep_cycles%></td>-->
+    <td><%=script.consec_cycles%></td>
+	<td><%=script.PC%></td>
+	<td><%=script.call_depth%></td>
+	<td><%=script.num_globals%></td>
+	<td><%=script.var_size%></td>
+  </tr>
+<%
+    sleepms(1);
+  endforeach
+%>
+
+</table>
+</div>
+
+</BODY>
+</HTML>

Added: trunk/096/pkg/utils/servperf/www/script_profiles.asp
===================================================================
--- trunk/096/pkg/utils/servperf/www/script_profiles.asp	2005-09-14 13:16:11 UTC (rev 128)
+++ trunk/096/pkg/utils/servperf/www/script_profiles.asp	2005-09-15 01:59:37 UTC (rev 129)
@@ -0,0 +1,58 @@
+<%
+use uo;
+use os;
+%>
+
+<html>
+<head>
+<title>Script Profiles</title>
+</head>
+
+<body>
+
+<% 
+  include header; 
+  PrintHeader( "Script Profiles" );
+%>
+
+<% 
+  
+  if (QueryParam( "Action" ) = "Clear Counters") 
+      polcore().clear_script_profile_counters();
+	    // even better would be to redirect, but we can't.
+%>
+<p><center><strong><a href="script_profiles.ecl">Reload this page without clearing</a></strong></center></p>
+<%
+  endif 
+%>
+<div align=center>
+<table border=1 cellspacing=0 cellpadding=5>
+  <tr bgcolor=#99CCFF>
+    <td>Script Name</td>
+    <td>Cycles</td>
+    <td>Invocations</td>
+    <td>Instr/Invoc</td>
+	<td>%</td>
+  </tr>
+
+<%
+  foreach script in (polcore().script_profiles)
+%>
+  <tr>
+    <td><%=script.name%></td>
+	<td><%=script.instr%></td>
+    <td><%=script.invocations%></td>
+	<td><%=script.instr_per_invoc%></td>
+	<td><%=script.instr_percent%></td>
+  </tr>
+<%
+    sleepms(1);
+  endforeach
+%>
+
+</table>
+</div>
+
+<center><form><input type=submit name=Action Value="Clear Counters"></form></center>
+</BODY>
+</HTML>

Added: trunk/096/pkg/utils/servperf/www/scriptex.asp
===================================================================
--- trunk/096/pkg/utils/servperf/www/scriptex.asp	2005-09-14 13:16:11 UTC (rev 128)
+++ trunk/096/pkg/utils/servperf/www/scriptex.asp	2005-09-15 01:59:37 UTC (rev 129)
@@ -0,0 +1,65 @@
+<%
+use uo;
+use os;
+%>
+
+<html>
+<head>
+<title>Executing Script</title>
+</head>
+
+<body>
+<% 
+  include header; 
+  PrintHeader( "Executing Script" );
+
+  var pid := CInt(QueryParam( "pid" ));
+  var script := getprocess( pid );
+%>
+
+<div align=center>
+<table border=1 cellspacing=0 cellpadding=5>
+  <tr bgcolor=#99CCFF>
+	<td colspan=2>Script Status</td>
+  </tr>
+  <tr>  <td>Script Name:</td>		<td><%=script.name%></td>			</tr>
+  <tr>	<td>PID:</td>				<td><%=script.pid%></td>			</tr>
+  <tr>	<td>Cycles:</td>			<td><%=script.instr_cycles%></td>	</tr>
+  <tr>	<td>State</td>				<td><%=script.state%></td>			</tr>
+  <tr>	<td>Cycles since Sleep</td>	<td><%=script.consec_cycles%></td>	</tr>
+  <tr>	<td>Prog Counter</td>		<td><%=script.PC%></td>				</tr>
+  <tr>	<td>Call Depth</td>			<td><%=script.call_depth%></td>		</tr>
+  <tr>	<td>Variable Size:</td>		<td><%=script.var_size%></td>		</tr>
+  <tr>  <td>Actions:</td>           <td><form action="/pkg/wwwdebug/debug.ecl">
+                                        <input type=hidden name=pid value=<%=script.pid%>>
+			                            <input type=submit value="Debug">
+			                            </form>  </td>                  </tr>
+</table>
+
+<table border=1 cellspacing=0 cellpadding=5>
+  <tr bgcolor=#99CCFF>
+    <td colspan=4>Global Variables</td>
+  </tr>
+  <tr bgcolor=#99CCFF>
+    <td>Name</td> <td>Type</td> <td>Size</td> <td>Value</td>
+  </tr>
+
+<% 
+  var globals := script.globals;
+  foreach key in (globals.keys())
+%>
+  <tr>
+    <td><%=key%></td>
+	<td><%=TypeOf(globals[key])%></td>
+	<td><%=SizeOf(globals[key])%></td>
+    <td><%=globals[key]%></td>
+  </tr>
+<% 
+  endforeach 
+%> 	  
+
+</table>
+</div>
+
+</BODY>
+</HTML>

Added: trunk/096/pkg/utils/servperf/www/storage.asp
===================================================================
--- trunk/096/pkg/utils/servperf/www/storage.asp	2005-09-14 13:16:11 UTC (rev 128)
+++ trunk/096/pkg/utils/servperf/www/storage.asp	2005-09-15 01:59:37 UTC (rev 129)
@@ -0,0 +1,36 @@
+<%
+use uo;
+use polsys;
+%>
+<html>
+
+<head>
+<title>POL Server Performance Center</title>
+</head>
+
+<body>
+
+<p>POL Server Performance Center</p>
+<p>Storage Areas:</p>
+
+<table>
+<tr>
+  <td>Storage Area</td>
+  <td>Root Items</td>
+  <td>Total Items</td>
+</tr>
+<%
+foreach sa in StorageAreas()
+%>
+<tr>
+  <td><a href="storagearea.ecl?Area=<%=sa%>"><%=sa%></a></td>
+  <td><%=sa.count%></a></td>
+  <td><%=sa.totalcount%></td>
+</tr>
+<%
+endforeach
+%>
+</table>
+
+</body>
+</html>

Added: trunk/096/pkg/utils/servperf/www/storagearea.asp
===================================================================
--- trunk/096/pkg/utils/servperf/www/storagearea.asp	2005-09-14 13:16:11 UTC (rev 128)
+++ trunk/096/pkg/utils/servperf/www/storagearea.asp	2005-09-15 01:59:37 UTC (rev 129)
@@ -0,0 +1,42 @@
+<%
+use uo;
+use polsys;
+%>
+<html>
+
+<head>
+<title>POL Server Performance Center</title>
+</head>
+
+<body>
+
+<%
+    var areaname := QueryParam( "Area" );
+	var areas := StorageAreas();
+	var area := areas[ areaname ];
+
+%>
+<p>POL Server Performance Center</p>
+<p>Storage Area: <%=area%></p>
+<p>Root Items: <%=area.count%></p>
+<p>Total Items: <%=area.totalcount%></p>
+
+<table>
+<tr>
+  <td>Item Name</td>
+  <td>Total Items</td>
+</tr>
+<%
+foreach item in area
+%>
+<tr>
+  <td><%=item.name%></td>
+  <td><%=item.item_count%></td>
+</tr>
+<%
+endforeach
+%>
+</table>
+
+</body>
+</html>



From austin at berlios.de  Thu Sep 15 04:01:38 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 15 Sep 2005 04:01:38 +0200
Subject: [Poldistro-svn] r130 - trunk/096/pkg/utils/servperf/www
Message-ID: <200509150201.j8F21cR7009743@sheep.berlios.de>

Author: austin
Date: 2005-09-15 04:01:32 +0200 (Thu, 15 Sep 2005)
New Revision: 130

Modified:
   trunk/096/pkg/utils/servperf/www/script_profiles.asp
Log:
He was naughty and had an = instead of ==

Modified: trunk/096/pkg/utils/servperf/www/script_profiles.asp
===================================================================
--- trunk/096/pkg/utils/servperf/www/script_profiles.asp	2005-09-15 01:59:37 UTC (rev 129)
+++ trunk/096/pkg/utils/servperf/www/script_profiles.asp	2005-09-15 02:01:32 UTC (rev 130)
@@ -17,7 +17,7 @@
 
 <% 
   
-  if (QueryParam( "Action" ) = "Clear Counters") 
+  if (QueryParam( "Action" ) == "Clear Counters") 
       polcore().clear_script_profile_counters();
 	    // even better would be to redirect, but we can't.
 %>



From austin at berlios.de  Thu Sep 15 05:51:20 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 15 Sep 2005 05:51:20 +0200
Subject: [Poldistro-svn] r131 - in trunk/096/pkg/mobiles/ai_brain: . complete/testnpc include/braincore
Message-ID: <200509150351.j8F3pKmR004784@sheep.berlios.de>

Author: austin
Date: 2005-09-15 05:51:17 +0200 (Thu, 15 Sep 2005)
New Revision: 131

Modified:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc
   trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src	2005-09-15 02:01:32 UTC (rev 130)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src	2005-09-15 03:51:17 UTC (rev 131)
@@ -9,7 +9,6 @@
 program BrainNerve(params)
 	var npc		:= params[1];
 	//var nerve_name	:= params[2];
-	//var event	:= params[3];
 	var settings	:= params[4];
 	var scripts	:= params[5];
 	params := 0; // Not needed anymore.
@@ -25,7 +24,7 @@
 		endif
 		
 		AI_ClearThoughts(npc, CLR_NERVE);
-		Sleep(1);
+		Sleep(5);
 	endwhile
 endprogram
 
@@ -33,6 +32,7 @@
 	var attack_list := array;
 	foreach mobile in ListMobilesInLineOfSight(npc, CInt(settings["AreaSize"]))
 		if ( NPC_ShouldWatch(npc, mobile, settings, scripts) )
+			PrintTextAbove(mobile, "Its possible I will attack "+mobile.name);
 			attack_list.Append(mobile);
 		endif
 		sleepms(2);

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-15 02:01:32 UTC (rev 130)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc	2005-09-15 03:51:17 UTC (rev 131)
@@ -287,15 +287,15 @@
 				endif
 			endif
 			break;
-	   endcase
+	endcase
 
-	   // If the event has a .process member, reply to it by sending
-	   // an event with .type being the NPCEVENT_DONE constant
-	   // and telling it what event it sent that has finished
-	   // being processed.
-	   if ( event.process )
-		(event.process).SendEvent(struct{"type":=NPCEVENT_DONE, "evsource":=event.type});
-	   endif
-
-	   set_priority(old_priority);
+	// If the event has a .process member, reply to it by sending
+	// an event with .type being the NPCEVENT_DONE constant
+	// and telling it what event it sent that has finished
+	// being processed.
+	//if ( event.process )
+	//	(event.process).SendEvent(struct{"type":=NPCEVENT_DONE, "evsource":=event.type});
+	//endif
+	
+	set_priority(old_priority);
 endfunction

Modified: trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc	2005-09-15 02:01:32 UTC (rev 130)
+++ trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc	2005-09-15 03:51:17 UTC (rev 131)
@@ -41,6 +41,7 @@
  *
  * Purpose
  * Brings the npc out of sleep mode.
+ * Also used to reset idle_ticks.
  *
  * Parameters
  *
@@ -49,10 +50,12 @@
  *
  */
 function LeaveSleepMode()
-	StopNerve(npc, "Sleep");
+	if ( sleep_mode )
+		StopNerve(npc, "Sleep");
 	
-	if ( g_scripts.Exists("LookAround") )
-		StartNerve(npc, "LookAround", g_scripts["LookAround"].script, array{g_settings, g_scripts}, g_scripts["LookAround"].flags);
+		if ( g_scripts.Exists("LookAround") )
+			StartNerve(npc, "LookAround", g_scripts["LookAround"].script, array{g_settings, g_scripts}, g_scripts["LookAround"].flags);
+		endif
 	endif
 	
 	idle_ticks := 0;
@@ -78,7 +81,7 @@
 	elseif ( Events_Waiting() )
 		//Events are waiting to process.
 		return 0;
-	elseif ( idle_ticks < g_settings["idle_ticks"] )
+	elseif ( idle_ticks < g_settings["IdleTicks"] )
 		//Not enough idle ticks have gone by yet.
 		return 0;
 	endif

Modified: trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-15 02:01:32 UTC (rev 130)
+++ trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg	2005-09-15 03:51:17 UTC (rev 131)
@@ -27,7 +27,7 @@
 	AISetting	HearGhosts	i1
 	
 	AIScript	Combat		:ai_brain:complete/testNPC/combat
-	AIScript	Cycle		:ai_brain:complete/testNPC/cycle
+	//AIScript	Cycle		:ai_brain:complete/testNPC/cycle
 	AIScript	DblClick	:ai_brain:complete/testNPC/doubleClick
 	AIScript	Disengaged	:ai_brain:complete/testNPC/disengaged
 	AIScript	EnterArea	:ai_brain:complete/testNPC/enteredArea



From austin at berlios.de  Thu Sep 15 06:17:22 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 15 Sep 2005 06:17:22 +0200
Subject: [Poldistro-svn] r132 - trunk/096/pkg/mobiles/ai_brain/commands/gm
Message-ID: <200509150417.j8F4HMn4010479@sheep.berlios.de>

Author: austin
Date: 2005-09-15 06:17:17 +0200 (Thu, 15 Sep 2005)
New Revision: 132

Modified:
   trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
Log:
Changed to use the defaults elem in gumpinfo.cfg

Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src	2005-09-15 03:51:17 UTC (rev 131)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src	2005-09-15 04:17:17 UTC (rev 132)
@@ -110,8 +110,8 @@
 			
 	var gump := GFCreateGump();
 	GFPage(gump, 0);
-	GFResizePic(gump, 0, 0, GFCfgConst("BackGrounds", "SILVERTRIM"), 300, 480);
-	GFResizePic(gump, 10, 10, GFCfgConst("BackGrounds", "DARK_STONE"), 280, 460);
+	GFResizePic(gump, 0, 0, GFCfgConst("Defaults", "BackGround"), 300, 480);
+	GFResizePic(gump, 10, 10, GFCfgConst("Defaults", "ForeGround"), 280, 460);
 	var y_pos := 40;
 	var counter := 1;
 	var page_num := 1;
@@ -156,8 +156,8 @@
 
 	var gump := GFCreateGump();
 	GFPage(gump, 0);
-	GFResizePic(gump, 0, 0, GFCfgConst("BackGrounds", "SILVERTRIM"), 300, 480);
-	GFResizePic(gump, 10, 10, GFCfgConst("BackGrounds", "DARK_STONE"), 280, 460);
+	GFResizePic(gump, 0, 0, GFCfgConst("Defaults", "BackGround"), 300, 480);
+	GFResizePic(gump, 10, 10, GFCfgConst("Defaults", "ForeGround"), 280, 460);
 	var y_pos := 40;
 	var counter := 1;
 	var page_num := 1;



From austin at berlios.de  Thu Sep 15 06:19:16 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 15 Sep 2005 06:19:16 +0200
Subject: [Poldistro-svn] r133 - trunk/096/pkg/systems/spawnsystem/textcmd/gm
Message-ID: <200509150419.j8F4JGlc010659@sheep.berlios.de>

Author: austin
Date: 2005-09-15 06:19:14 +0200 (Thu, 15 Sep 2005)
New Revision: 133

Modified:
   trunk/096/pkg/systems/spawnsystem/textcmd/gm/spawner.src
Log:
Uses defaults elem in gumpinfo.cfg

Modified: trunk/096/pkg/systems/spawnsystem/textcmd/gm/spawner.src
===================================================================
--- trunk/096/pkg/systems/spawnsystem/textcmd/gm/spawner.src	2005-09-15 04:17:17 UTC (rev 132)
+++ trunk/096/pkg/systems/spawnsystem/textcmd/gm/spawner.src	2005-09-15 04:19:14 UTC (rev 133)
@@ -46,8 +46,8 @@
 endprogram
 
 function BuildGumpTemplate(realm_name:="")
-	var bkgnd_silvertrim := GFCfgConst("BackGrounds", "SILVERTRIM");
-	var bkgnd_dark_stone := GFCfgConst("BackGrounds", "DARK_STONE");
+	var bkgnd_silvertrim := GFCfgConst("Defaults", "BackGround");
+	var bkgnd_dark_stone := GFCfgConst("Defaults", "ForeGround");
 	
 	var gump := GFCreateGump();
 	GFResizePic(gump, 0, 0, bkgnd_silvertrim, 640, 480);



From austin at berlios.de  Thu Sep 15 06:21:23 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 15 Sep 2005 06:21:23 +0200
Subject: [Poldistro-svn] r134 - trunk/096/pkg/utils/control/include
Message-ID: <200509150421.j8F4LNOu011503@sheep.berlios.de>

Author: austin
Date: 2005-09-15 06:21:16 +0200 (Thu, 15 Sep 2005)
New Revision: 134

Modified:
   trunk/096/pkg/utils/control/include/icp-gumps.inc
Log:
Uses defaults elem in gumpinfo.cfg

Modified: trunk/096/pkg/utils/control/include/icp-gumps.inc
===================================================================
--- trunk/096/pkg/utils/control/include/icp-gumps.inc	2005-09-15 04:19:14 UTC (rev 133)
+++ trunk/096/pkg/utils/control/include/icp-gumps.inc	2005-09-15 04:21:16 UTC (rev 134)
@@ -1,6 +1,6 @@
 // Gump backgrounds - Used in various functions - easier to use globally.
-var BKGND_SILVERTRIM := GFCfgConst("BackGrounds", "SILVERTRIM");
-var BKGND_DARK_STONE := GFCfgConst("BackGrounds", "DARK_STONE");
+var BKGND_SILVERTRIM := GFCfgConst("Defaults", "BackGround");
+var BKGND_DARK_STONE := GFCfgConst("Defaults", "ForeGround");
 
 function ICP_RetrieveGump(elem_name, prop_name:="main")
 	var elem := DFFindElement(pkg_gumps, elem_name);



From austin at berlios.de  Thu Sep 15 06:22:54 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 15 Sep 2005 06:22:54 +0200
Subject: [Poldistro-svn] r135 - trunk/096/pkg/utils/gumps/include
Message-ID: <200509150422.j8F4MspB011858@sheep.berlios.de>

Author: austin
Date: 2005-09-15 06:22:51 +0200 (Thu, 15 Sep 2005)
New Revision: 135

Modified:
   trunk/096/pkg/utils/gumps/include/gumpprompt.inc
   trunk/096/pkg/utils/gumps/include/requestgump.inc
   trunk/096/pkg/utils/gumps/include/yesno.inc
Log:
Use defaults elem from gumpinfo.cfg

Modified: trunk/096/pkg/utils/gumps/include/gumpprompt.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/gumpprompt.inc	2005-09-15 04:21:16 UTC (rev 134)
+++ trunk/096/pkg/utils/gumps/include/gumpprompt.inc	2005-09-15 04:22:51 UTC (rev 135)
@@ -26,8 +26,8 @@
 	if ( !movable )
 		GFClosable(gump_prompt, 0);
 	endif
-	GFResizePic(gump_prompt, 180, 100, GFCfgConst("BackGrounds", "SILVERTRIM"), 300, 160);
-	GFResizePic(gump_prompt, 195, 115, GFCfgConst("BackGrounds", "DARK_STONE"), 270, 130);
+	GFResizePic(gump_prompt, 180, 100, GFCfgConst("Defaults", "BackGround"), 300, 160);
+	GFResizePic(gump_prompt, 195, 115, GFCfgConst("Defaults", "ForeGround"), 270, 130);
 	GFAddButton(gump_prompt, 300, 220, 2128, 2129, GF_CLOSE_BTN, 1);
 	
 	var y_pos := 125;

Modified: trunk/096/pkg/utils/gumps/include/requestgump.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/requestgump.inc	2005-09-15 04:21:16 UTC (rev 134)
+++ trunk/096/pkg/utils/gumps/include/requestgump.inc	2005-09-15 04:22:51 UTC (rev 135)
@@ -36,8 +36,8 @@
 	
 	var r_gump := GFCreateGump();
 	GFClosable(r_gump, 0);
-	GFResizePic(r_gump, 0, 0, GFCfgConst("BackGrounds", "SILVERTRIM"), 400, 205);
-	GFResizePic(r_gump, 15, 15, GFCfgConst("BackGrounds", "DARK_STONE"), 370, 175);
+	GFResizePic(r_gump, 0, 0, GFCfgConst("Defaults", "BackGround"), 400, 205);
+	GFResizePic(r_gump, 15, 15, GFCfgConst("Defaults", "ForeGround"), 370, 175);
 	
 	var y_pos := 20;
 	foreach line in (GFWordWrap(question, 370))

Modified: trunk/096/pkg/utils/gumps/include/yesno.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/yesno.inc	2005-09-15 04:21:16 UTC (rev 134)
+++ trunk/096/pkg/utils/gumps/include/yesno.inc	2005-09-15 04:22:51 UTC (rev 135)
@@ -25,8 +25,8 @@
 function YesNo(mobile, prompt:="", yes_text:="Yes", no_text:="No")
 	var yn_gump := GFCreateGump();
 	GFClosable(yn_gump, 0);
-	GFResizePic(yn_gump, 0, 0, GFCfgConst("BackGrounds", "SILVERTRIM"), 400, 205);
-	GFResizePic(yn_gump, 15, 15, GFCfgConst("BackGrounds", "DARK_STONE"), 370, 175);
+	GFResizePic(yn_gump, 0, 0, GFCfgConst("Defaults", "BackGround"), 400, 205);
+	GFResizePic(yn_gump, 15, 15, GFCfgConst("Defaults", "ForeGround"), 370, 175);
 	
 	var y_pos := 20;
 	foreach line in (GFWordWrap(prompt, 360))



From austin at berlios.de  Thu Sep 15 06:26:39 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 15 Sep 2005 06:26:39 +0200
Subject: [Poldistro-svn] r136 - trunk/096/pkg/utils/gumps/include
Message-ID: <200509150426.j8F4Qd3b012847@sheep.berlios.de>

Author: austin
Date: 2005-09-15 06:26:37 +0200 (Thu, 15 Sep 2005)
New Revision: 136

Modified:
   trunk/096/pkg/utils/gumps/include/gumpprompt.inc
   trunk/096/pkg/utils/gumps/include/gumps.inc
   trunk/096/pkg/utils/gumps/include/gumps_ex.inc
   trunk/096/pkg/utils/gumps/include/requestgump.inc
   trunk/096/pkg/utils/gumps/include/yesno.inc
Log:


Modified: trunk/096/pkg/utils/gumps/include/gumpprompt.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/gumpprompt.inc	2005-09-15 04:22:51 UTC (rev 135)
+++ trunk/096/pkg/utils/gumps/include/gumpprompt.inc	2005-09-15 04:26:37 UTC (rev 136)
@@ -1,3 +1,13 @@
+/*===============================================================
+* Current Version
+* GUMPPROMPT.INC - v1.0
+* Updated 9/14/2005 9:24PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
 use uo;
 use os;
 
@@ -4,8 +14,7 @@
 include ":gumps:include/gumps";
 include ":gumps:include/gumps_ex";
 
-/* Version 1.0 - Austin
- *
+/* 
  * GumpPrompt(mobile, text)
  *
  * Purpose
@@ -28,8 +37,7 @@
 	endif
 	GFResizePic(gump_prompt, 180, 100, GFCfgConst("Defaults", "BackGround"), 300, 160);
 	GFResizePic(gump_prompt, 195, 115, GFCfgConst("Defaults", "ForeGround"), 270, 130);
-	GFAddButton(gump_prompt, 300, 220, 2128, 2129, GF_CLOSE_BTN, 1);
-	
+		
 	var y_pos := 125;
 	foreach line in (GFWordWrap(text, 260))
 		GFTextLine(gump_prompt, 200, y_pos, 1153, line);
@@ -37,6 +45,8 @@
 		sleepms(2);
 	endforeach
 	
+	GFAddButton(gump_prompt, 300, 220, 2128, 2129, GF_CLOSE_BTN, 1);
+	
 	var prompt_input := GFSendGump(mobile, gump_prompt);
 	return prompt_input[0];
 endfunction

Modified: trunk/096/pkg/utils/gumps/include/gumps.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/gumps.inc	2005-09-15 04:22:51 UTC (rev 135)
+++ trunk/096/pkg/utils/gumps/include/gumps.inc	2005-09-15 04:26:37 UTC (rev 136)
@@ -1,7 +1,3 @@
-use uo;
-use os;
-use basic;
-
 /*===============================================================
 * Current Version
 * GUMPS.INC - v0.3
@@ -49,6 +45,10 @@
 *
 ===============================================================*/
 
+use uo;
+use os;
+use basic;
+
 /////////////////////////////////////////////////////////////////
 // * Function List *
 //

Modified: trunk/096/pkg/utils/gumps/include/gumps_ex.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/gumps_ex.inc	2005-09-15 04:22:51 UTC (rev 135)
+++ trunk/096/pkg/utils/gumps/include/gumps_ex.inc	2005-09-15 04:26:37 UTC (rev 136)
@@ -1,10 +1,3 @@
-use uo;
-use os;
-use basic;
-use cfgfile;
-
-include ":gumps:include/gumps";
-
 /*===============================================================
 * Current Version
 * GUMPS_EX.INC - v0.2
@@ -28,6 +21,13 @@
 *
 ===============================================================*/
 
+use uo;
+use os;
+use basic;
+use cfgfile;
+
+include ":gumps:include/gumps";
+
 /////////////////////////////////////////////////////////////////
 // * Function List *
 //

Modified: trunk/096/pkg/utils/gumps/include/requestgump.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/requestgump.inc	2005-09-15 04:22:51 UTC (rev 135)
+++ trunk/096/pkg/utils/gumps/include/requestgump.inc	2005-09-15 04:26:37 UTC (rev 136)
@@ -1,3 +1,13 @@
+/*===============================================================
+* Current Version
+* REQUESTGUMP.INC - v1.0
+* Updated 9/14/2005 9:24PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
 use uo;
 use os;
 
@@ -4,8 +14,7 @@
 include ":gumps:include/gumps";
 include ":gumps:include/gumps_ex";
 
-/* Version 1.0 - Austin
- *
+/* 
  * RequestGump(mobile, question, option, pre_val, cancel_btn)
  *
  * Purpose
@@ -25,10 +34,6 @@
  *
  */
 function RequestGump(mobile, question, option := "", pre_val := "", cancel_btn:=0)
-	//Mobile = Character input gump is sent to.
-	//Question = Question to ask.
-	//Option = Optional text to put under the question.
-	//Preval = What you want them to see in the text area when it comes up.
 	
 	if ( !pre_val || pre_val == error )
 		pre_val := "";
@@ -73,4 +78,4 @@
 	else
 		return text_area;
 	endif
-endfunction
\ No newline at end of file
+endfunction

Modified: trunk/096/pkg/utils/gumps/include/yesno.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/yesno.inc	2005-09-15 04:22:51 UTC (rev 135)
+++ trunk/096/pkg/utils/gumps/include/yesno.inc	2005-09-15 04:26:37 UTC (rev 136)
@@ -1,3 +1,13 @@
+/*===============================================================
+* Current Version
+* YESNO.INC - v1.0
+* Updated 9/14/2005 9:23PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
 use uo;
 use os;
 
@@ -4,8 +14,7 @@
 include ":gumps:include/gumps";
 include ":gumps:include/gumps_ex";
 
-/* Version 1.0 - Austin
- *
+/* 
  * YesNo(mobile, prompt, yes_text, no_text)
  *
  * Purpose



From austin at berlios.de  Fri Sep 16 03:57:30 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 16 Sep 2005 03:57:30 +0200
Subject: [Poldistro-svn] r137 - trunk/096/batchfiles
Message-ID: <200509160157.j8G1vUVr027206@sheep.berlios.de>

Author: austin
Date: 2005-09-16 03:57:27 +0200 (Fri, 16 Sep 2005)
New Revision: 137

Modified:
   trunk/096/batchfiles/realmgen.bat
Log:
Has a function for copying client files to pol\mul\

Modified: trunk/096/batchfiles/realmgen.bat
===================================================================
--- trunk/096/batchfiles/realmgen.bat	2005-09-15 04:26:37 UTC (rev 136)
+++ trunk/096/batchfiles/realmgen.bat	2005-09-16 01:57:27 UTC (rev 137)
@@ -24,6 +24,8 @@
 ECHO  [ i ] - Build 'Tokuno' realm        (mapid=4)
 ECHO  [ j ] - Build all realms - Takes a very long time!
 ECHO.
+ECHO  [ o ] - Copy needed client files to pol\MUL\
+ECHO.
 ECHO  [ x ] - Back
 
 SET /p CMD=Command:
@@ -38,6 +40,7 @@
 IF /i "%CMD%" == "h" GOTO :REALM_MALAS()
 IF /i "%CMD%" == "i" GOTO :REALM_TOKUNO()
 IF /i "%CMD%" == "j" GOTO :BUILD_ALL_REALMS()
+IF /i "%CMD%" == "o" GOTO :COPY_CLIENT_FILES()
 
 IF "%CMD%" == "x" GOTO :QUIT()
 
@@ -136,5 +139,19 @@
 %UOCNVRT_PATH% maptile realm=tokuno
 GOTO :RETURN_TO_MENU()
 
+REM -- COPY_CLIENT_FILES() FUNCTION
+:COPY_CLIENT_FILES()
+SET /p UOPATH=Full path to UO directory:
+IF "%UOPATH%" == "" GOTO :RETURN_TO_MENU()
+IF NOT EXIST MUL\ MKDIR MUL
+ at ECHO ON
+COPY %UOPATH%\multi.* MUL\
+COPY %UOPATH%\map* MUL\
+COPY %UOPATH%\staidx* MUL\
+COPY %UOPATH%\statics* MUL\
+COPY %UOPATH%\tiledata.mul MUL\
+ at ECHO OFF
+GOTO :RETURN_TO_MENU()
+
 REM -- QUIT FUNCTION
 :QUIT()
\ No newline at end of file



From austin at berlios.de  Fri Sep 16 04:43:53 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 16 Sep 2005 04:43:53 +0200
Subject: [Poldistro-svn] r138 - trunk/096
Message-ID: <200509160243.j8G2hr6T007118@sheep.berlios.de>

Author: austin
Date: 2005-09-16 04:43:49 +0200 (Fri, 16 Sep 2005)
New Revision: 138

Added:
   trunk/096/TODO.txt
Log:
Windows likes file extensions ;-)

Copied: trunk/096/TODO.txt (from rev 136, trunk/096/TODO)



From austin at berlios.de  Fri Sep 16 05:02:17 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 16 Sep 2005 05:02:17 +0200
Subject: [Poldistro-svn] r139 - trunk/096/pkg/utils/gumps/include
Message-ID: <200509160302.j8G32HiW011047@sheep.berlios.de>

Author: austin
Date: 2005-09-16 05:02:14 +0200 (Fri, 16 Sep 2005)
New Revision: 139

Modified:
   trunk/096/pkg/utils/gumps/include/gumps_ex.inc
Log:
Commented out num_words in GFWordWrap() since it wasnt used.

Modified: trunk/096/pkg/utils/gumps/include/gumps_ex.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/gumps_ex.inc	2005-09-16 02:43:49 UTC (rev 138)
+++ trunk/096/pkg/utils/gumps/include/gumps_ex.inc	2005-09-16 03:02:14 UTC (rev 139)
@@ -254,7 +254,7 @@
 function GFWordWrap(text, pixels)
 	var wrap_lines := array{};
 	var word_list := SplitWords(text);
-	var num_words := word_list.size();
+	//var num_words := word_list.size();
 	
 	var space_size := GFTextWidth(" ");
 	



From austin at berlios.de  Fri Sep 16 05:10:24 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 16 Sep 2005 05:10:24 +0200
Subject: [Poldistro-svn] r140 - trunk/096/pkg/mobiles/ai_brain/commands/gm
Message-ID: <200509160310.j8G3AOvP013519@sheep.berlios.de>

Author: austin
Date: 2005-09-16 05:10:22 +0200 (Fri, 16 Sep 2005)
New Revision: 140

Modified:
   trunk/096/pkg/mobiles/ai_brain/commands/gm/makeswarm.src
Log:
Fixed a small bug with making npcs.

Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/makeswarm.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/makeswarm.src	2005-09-16 03:02:14 UTC (rev 139)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/makeswarm.src	2005-09-16 03:10:22 UTC (rev 140)
@@ -1,7 +1,6 @@
 //Example: .makeswarm [templateate] [radius] - Makes npcs on every tile in the radius around you.
 
 use uo;
-use util;
 use os;
 use util;
 
@@ -42,19 +41,21 @@
 	var end_x := who.x + CInt(radius);
 	var end_y := who.y + CInt(radius);
 
-	var x, y;
+	var x := start_x, y := start_y;
 	var created := 0;
 	
 	for ( x:=start_x; x<=end_x; x:=x+1 )
 		for ( y:=start_y; y<=end_y; y:=y+1 )
-			var npc := CreateNPCFromTemplate(template, x, y, who.z, who.realm);
+			var npc := CreateNPCFromTemplate(template, x, y, who.z, 0, who.realm);
 			if ( npc )
 				created := created+1;
+			elseif ( npc.errortext )
+				Print(npc.errortext);
 			endif
 			
 			sleepms(3);
 		endfor
 	endfor
 	
-	SendSysMessage(who, "Done making npc swarm. Created ["+created+"] npcs.");
+	SendSysMessage(who, "Done making npc swarm. Created ["+created+"] ["+template+"] npcs.");
 endprogram        



From austin at berlios.de  Fri Sep 16 11:37:15 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 16 Sep 2005 11:37:15 +0200
Subject: [Poldistro-svn] r143 - trunk/096
Message-ID: <200509160937.j8G9bFkp019350@sheep.berlios.de>

Author: austin
Date: 2005-09-16 11:37:14 +0200 (Fri, 16 Sep 2005)
New Revision: 143

Added:
   trunk/096/CoreChanges-096.txt
Log:
Just the 096 changes this time for size reasons.
Will keep up to date to help distro developers plan ahead for changes/additions. 

Added: trunk/096/CoreChanges-096.txt
===================================================================
--- trunk/096/CoreChanges-096.txt	2005-09-16 09:34:45 UTC (rev 142)
+++ trunk/096/CoreChanges-096.txt	2005-09-16 09:37:14 UTC (rev 143)
@@ -0,0 +1,994 @@
+-- POL096 --
+09-15 Austin
+        Added : mobile.connected - To determine if the character is actively connected to the game.
+                Is set to 1 before logon/reconnect scripts are run and 0 right before logofftest is run.
+
+09-14 Shinigami
+        Added : vitals.cfg element option "RegenWhileDead" added (0/1 - defaults to 0)
+
+09-13 Austin
+        Fixed : When a player dies, it will send SYSEVENT_DISENGAGED to the opponent-npc, if one is set.
+
+09-12 Shinigami
+        Added : some Packet functions, same as original one, but with flipping Byte Order
+                Packet.GetInt16Flipped(offset, value)
+                Packet.GetInt32Flipped(offset, value)
+                Packet.SetInt16Flipped(offset, value)
+                Packet.SetInt32Flipped(offset, value)
+
+09-11 Austin
+	Added : Member for mobiles ".opponent". Returns a mobile reference if a combat opponent is selected.
+
+09-10 Shinigami
+        Added : math::Root - returns y Root of x (same as Pow(x,1.0/y))
+
+09-08 Shinigami
+        Changed : eCompile - BASIC style for loops (for i:= start to end) will warn again on -v5 (and above)
+                  about the iteration variable being unused
+
+09-08 Austin
+	Added : polsys::Packages() now has a .npcdesc member. Will be 1 if the package has an npcdesc.cfg file.
+
+09-07 Folko
+        Changed: eCompile - BASIC style for loops (for i:= start to end) will no longer complain about the iteration variable being unused
+        Changed: Fixed some endianess issues and improved the conversion performance
+
+09-03 Shinigami
+        Changed : uo::FindPath will redefine Param mobilesblock as flags (FP_IGNORE_*)
+        Added   : uo::FindPath can ignore Doors (FP_IGNORE_DOORS)
+
+09-03 Austin
+        Fixed : cfgfile::GetConfigStringArray() lines that contain a property name but no value will not be placed in the array.
+        Added : cfgfile::GetConfigStringDictionary( element, property_name ). Works similarly to
+                GetConfigStringArray() but will take the first word on the line and use it for the key.
+                Elem ElemName
+                {
+                       PropLine keyname this will be the text placed in it
+                }
+
+09-02 Shinigami
+        Fixed : uo::Attach allowed you to attach more than one Script to a Character
+
+08-29 Shinigami
+        Changed : UseAAnTileFlags in SERVSPECOPT(.LOCAL).CFG renamed to UseTileFlagPrefix (check 03-05)
+                  (compatibility with const TILEDATA_FLAG_* inside uo.em)
+        Changed : player.spyonclient2 renamed to player.clientinfo (check 01-24)
+
+08-29 Folko
+        Added   : Support for custom MIME types in config/www.cfg. This allows you to
+                  add new file types that the web server can handle, for example PNG images,
+                  PDF files or favicon.ico. If you don't supply a www.cfg, old defaults are used.
+        Hint    : Here's an example www.cfg:
+
+                MIME gif
+                {
+                    Extension gif
+                    MIME image/gif
+                }
+
+                MIME jpg
+                {
+                    Extension jpg
+                    MIME image/jpeg
+                }
+
+                MIME jpeg
+                {
+                    Extension jpeg
+                    MIME image/jpeg
+                }
+
+08-28 Austin
+	Added : Ability to initialize error as you would a struct.
+		Example return error{"errortext" := "This is the error message"};
+	Added : Extended NPC.EM Say() function to allow for two additional parameters.
+		Say( text, text_type:=SAY_TEXTTYPE_DEFAULT, do_event:=SAY_DOEVENT_DISABLE );
+                Text type is a string "default", "yell", "whisper", constants are:
+		SAY_TEXTTYPE_DEFAULT, SAY_TEXTTYPE_YELL, SAY_TEXTTYPE_WHISPER (added to npc.em)
+		If do_event is enabled with SAY_DOEVENT_ENABLE, it will send a speech event to nearby npcs.
+
+08-26 Austin
+	Fixed : LEFTAREA event was not being sent to npcs in the old realm when a mobile was moved to a new realm.
+	
+08-25 Austin
+	Fixed : LEFTAREA event was not being sent if a mobile was teleported 33 tiles or more away.
+
+08-23 Austin
+        Added : Logging out will now send a LEFTAREA event (after logout.ecl has finished).
+        Added : New flag for servspecopt.cfg called "EventVisibilityCoreChecks" set to 0 (disabled) by default.
+                Enabled - the core does visibility checks before sending events as it did before.
+                Disabled - requires your scripts do visibility checking. 
+
+08-22 Shinigami
+        Fixed : sometimes the Core crashed while destroying Items (e.g. via Control Scripts) on Boats
+
+07-28 Shinigami
+        Changed : eCompile - Assignment inside Condition Check will produce Warning on -v5 (and above) only
+
+07-26 Shinigami
+        Changed : TextCMDs can be specified in Packages; just make a commands/gm (new style) or
+                  textcmd/gm (old style) etc directory. These are only scanned at startup,
+                  so if the directory doesn't exist then, it won't be searched until restart.
+        Changed : Support for packaged Includes - if you use 'Include ":blah:blubb";'
+                  eCompile will search for ":blah:blubb.inc" and ":blah:include/blubb.inc".
+                  It will use first file found. If both files exist eCompile will print a Warning.
+
+07-25 Shinigami
+        Added : MinDamage and MaxDamage in weapon.GetItemDescriptor() calculated from Damage-Dice
+        Changed : usable Msg size of SendDialogGump doubled - now you can use larger Gumps
+
+07-16 Shinigami
+        Fixed : uoconvert will ignore illegal statics with graphic >= 0x4000
+        Added : uoconvert.cfg element option extended by ShowIllegalGraphicWarning
+                StaticOptions
+                {
+                    MaxStaticsPerBlock        1000
+                    WarningStaticsPerBlock    1000
+                    ShowIllegalGraphicWarning 1
+                }
+                it's a flag and defaults to 1 (for the other entries go to 07-05)
+
+07-07 Shinigami
+        Hint : uo::ListItems*Location, uo::ListMobile*Location and uo::ListStatics*Location
+               will check for out-of-range coords now
+               uo::ListObjectsInBox, uo::ListMultisInBox and uo::ListStaticsInBox
+               will NOT check for out-of-range coords - a lot of scripter "love" this bug :o/
+
+07-06 Shinigami
+        Fixed : u'll get the correct string representation even if a numeric Config File
+                Value will cause an overflow
+
+07-05 Shinigami
+        Added : Warning if no tiles or landtiles are loaded (maybe files missing...)
+        Added : uoconvert.cfg element option added, StaticOptions, in the following form:
+                StaticOptions
+                {
+                    MaxStaticsPerBlock     1000
+                    WarningStaticsPerBlock 1000
+                }
+                max. Amount of Static Items per Block of 8x8x256 (or Warning Level)
+                it is hard limited to 10000. default is 1000.
+
+07-04 Shinigami
+        Changed : uo::ListStaticItemsAtLocation to uo::ListStaticsAtLocation( x, y, z, flags, realm )
+                  uo::ListStaticItemsNearLocation to uo::ListStaticsNearLocation( x, y, z, range, flags, realm )
+                  IGNORE_* constants to ITEMS_IGNORE_* constants
+        Added : Parameter Z in uo::ListStatics*Location
+        Added : LIST_IGNORE_Z constant u can use for Z Parameter to list all Items ignoring Z-Value
+                in uo::ListStatics*Location, uo::ListItems*Location and uo::ListMobilesNearLocation*
+        Added : uo::ListStaticsInBox( x1,y1,z1, x2,y2,z2, flags, realm );
+                creates an array of structures with Static and Multi Items in box.
+                you can specify via flags which Items you want to get. check ITEMS_IGNORE_* constants.
+        Added : realm-based coord check inside List*InBox and uo::ListMobilesNearLocation*
+
+07-01 Shinigami
+        Fixed : low-fragmentation Heap is linked dynamically, so Core will work on Win9x/NT again
+        ReAdded: uo::GetAttributeIntrinsicMod( character, attrname )
+                 You set intrinsic Mod via exported GetIntrinsicModFunction in attributes.cfg
+        Fixed : Memory leak inside cfgfile::Read-/UnloadConfigFile(...)
+                cfgfile::AppendConfigFile(...) will call cfgfile::UnloadConfigFile(...) immediately
+
+06-15 Shinigami
+        Added : npc::CanMove( direction ) - checks if an NPC can move in given direction
+                (IsLegalMove works in a different way and is used for bounding boxes only)
+        Added : UseWinLFH=0|1 in SERVSPECOPT(.LOCAL).CFG (default = 0)
+                Use Windows XP/2003 low-fragmentation Heap?
+
+06-06 Shinigami
+        Fixed : FindPath will work again @ Linux-Core without crashing server in some cases.
+
+06-01 Shinigami
+        Fixed : Cancel of TradeWin will put items in correct Realm on ground if backpack full
+        Added : movecost.cfg can have 'Walking_Mounted' and 'Running_Mounted' sections too.
+                You've to declare one global 'MovementCost' section or 2 sections 'Walking' and
+                'Running'. If you don't declare Mounted sections, Core will use unmounted values.
+        Added : uo::Attach( character ) - attach a Script to a Character
+        Fixed : moving intrinsic Weapon via MoveItemToLocation crashed Server
+                WARNING: You should never touch intrinsic Weapons!
+        Added : uo::ListStaticItemsAtLocation( x, y, flags, realm )
+        Added : uo::ListStaticItemsNearLocation( x, y, range, flags, realm )
+                creates an array of structures with Static and Multi Items at or around location.
+                you can specify via flags which Items you want to get. check IGNORE_* constants.
+                [Edit: changed... please check 07-04 above]
+        Added : uo::GetStandingLayers( x, y, flags, realm )
+                get an array of standing layers and blocking solids. check MAPDATA_FLAG_* constants.
+
+05-31 Shinigami
+        Added : flag LOG_DATETIME in file::LogToFile( filename, line, flags := 0 )
+                to log Core-Style DateTimeStr in front of log entry
+                
+05-28 Shinigami
+        Added : flag ENUMERATE_IGNORE_LOCKED in uo::EnumerateItemsInContainer( container, flags := 0 )
+                to list content of locked container too
+        Added : uo::SecureTradeWin( character, character2 ) - to init secure trade via script over long distances
+        Added : uo::MoveItemToSecureTradeWin( item, character ) - to move item to secure trade window via script
+
+05-25 Shinigami
+        Added : Account.delete() - delete this empty account
+        Added : Account.split( newacctname : string, index : 1..5 )
+                create a new account and move character to it
+        Added : Account.move_char( destacctname : string, index : 1..5 )
+                move character from this account to destination account.
+                you can use it to flip chars on same account too - it's not a bug, it's a feature ;oP
+
+04-04 Shinigami
+        Added : player.createdat - returns the PolClock when the character was created
+        Added : Before character deletion, scripts/misc/candelete.ecl will be called.
+                  program definition is:
+                    - program can_delete( who, deleteby ); // return nonzero to allow deletion
+                  new constants in UO.EM:
+                    - DELETE_BY_PLAYER : Delete-Request by Player
+                    - DELETE_BY_SCRIPT : Delete-Request by account.DeleteCharacter( index )
+                Before character deletion, scripts/misc/ondelete.ecl and anypkg/ondelete.ecl will be called.
+                  Their return values are ignored.
+        Fixed : Call OnDelete script in account.DeleteCharacter( index ) too.
+        Updated : Account.set_uo_expansion(string): recognized values: SE, AOS, LBR, T2A (default), "".
+                    This determines what flag is sent with packet 0xB9 during login
+                      (Nothing -> 0x0000 / T2A -> 0x0001 / LBR -> 0x0002 / AOS -> 0x801b / SE -> 0x805b).
+                    It's possible to hook 0xB9 but don't forget to set_uo_expansion anyway because core
+                    uses this for internal flags (e.g. AoS Tooltips). Packet 0xB9 will be sent earlier
+                    (before you choose a character) and after you've used set_uo_expansion.
+        Updated : servspecopt.cfg property: UOFeatureEnable, used in the last dword of the 0xA9 login packet,
+                  will block Bit 6 (support up to 6 Chars).
+                  To enable AoS stuff set Bit 5 (use 0x20), to enable SE stuff set Bit 7 & 5 (use 0xa0). 
+
+04-02 Shinigami
+        Added : Additional realm-support
+                  CreateItemCopyAtLocation(x, y, z, item, realm := _DEFAULT_REALM);
+                  boat.move_offline_mobiles(int x, int y, int z[, string realm]);
+                    (If realm is not set, Boat-realm is used.)
+        Added : Some realm-constants to uo.em
+
+03-05 Shinigami
+        Added : UseTileFlagPrefix=0|1 in SERVSPECOPT(.LOCAL).CFG (default = 1)
+                Should Core prepend "a"/"an" according to tiles.cfg flags to formatted item names?
+                (p.s.: in 08-29 renamed from UseAAnTileFlags to UseTileFlagPrefix)
+        Fixed : Last but not least, remove Spell Delay usage from core.
+
+03-03 Madman
+        Fixed : My previous attempt to remove spellcasting from the core was incomplete. It should no
+                  longer run a skillcheck before starting the spell script.
+
+03-02 Shinigami
+        Fixed : MoveObjectToRealm will handle any type of items (equipment etc.) and container with content too.
+        Fixed : You can move item from container to different realm without crash.
+
+03-01 Shinigami
+        Fixed : Pol will support up to 5 Maps now (Britannia, Britannia_alt, Ilshenar, Malas, Tokuno)
+
+02-23 Shinigami
+        Added : DecayItems=0|1 in SERVSPECOPT(.LOCAL).CFG (default = 1)
+                Disable (e.g. World Design Server) or enable (Live Shard Server) item decay.
+
+02-14 Shinigami
+        Fixed : AOS Spellbook entries in itemdesc.cfg will not crash linux build anymore.
+        Fixed : Wrong handling of double clicking AoS style Spellbooks.
+
+01-27 Shinigami
+        Fixed : UOConvert will convert Samurai Empire Map Tokuno.
+                Don't forget to use tiledata.mul shipped with SE.
+                Don't forget to build new tiles.cfg and landtiles.cfg too.
+                If not, your Tokuno Realm works and maybe looks funny ;o)
+        Fixed : Small bug within UOConvert and Tiledata names with full length.
+
+01-24 Shinigami
+        Added : player.clientinfo -- returns a struct with a lot of usefull infomation about client PC
+                Example :
+
+                Function TestClientInfo(who)
+                  Var info:=who.clientinfo;
+
+                  If (info.unknown1) // in most/all cases 0x02
+                    SysLog("ClientInfo '"+who.name+"' ["+who.acctname+"]");
+                    SysLog("  Unknown1                 = "+Lower(Hex(info.unknown1)));
+                    SysLog("  Unique Instance ID of UO = "+Lower(Hex(info.instance)));
+                    SysLog("  OS Version               = "+info.os_major+"."+info.os_minor+"."+info.os_revision);
+                    SysLog("  CPU Manufacturer         = "+info.cpu_manufacturer);
+                    SysLog("  CPU Family               = "+info.cpu_family);
+                    SysLog("  CPU Model                = "+info.cpu_model);
+                    SysLog("  CPU Clock Speed          = "+info.cpu_clockspeed+" MHz");
+                    SysLog("  CPU Quantity             = "+info.cpu_quantity);
+                    SysLog("  Memory                   = "+info.memory+" MB");
+                    SysLog("  Screen Resolution        = "+info.screen_width+" x "+info.screen_height+" x "+info.screen_depth+" Bit");
+                    SysLog("  Direct X Version         = "+info.directx_major+"."+info.directx_minor);
+                    SysLog("  Video Card Description   = "+CChrZ(info.video_description));
+                    SysLog("  Video Card Vendor ID     = "+info.video_vendor);
+                    SysLog("  Video Card Device ID     = "+info.video_device);
+                    SysLog("  Video Card Memory        = "+info.video_memory+" MB");
+                    SysLog("  Distribution             = "+info.distribution);
+                    SysLog("  Clients Running          = "+info.clients_running);
+                    SysLog("  Clients Installed        = "+info.clients_installed);
+                    SysLog("  Partial Insstalled       = "+info.partial_installed);
+                    SysLog("  Language Code            = "+CChrZ(info.langcode));
+                    SysLog("  Unknown2                 = "+info.unknown2);
+                  Else
+                    SysLog("No ClientInfo '"+who.name+"' ["+who.acctname+"]");
+                  EndIf
+                EndFunction
+
+                Limitations :
+                  The client doesn't send this Packet every time,
+                    if available you can use it first time in your misc/logon.src.
+                  If your login server differs from play/shard server it doesn't work
+                    (Packet will be send before you choose the server only).
+                  This will work for Win release only, until now. Win and Linux core
+                    handle server-choose- and play-connection in a different way.
+                    Not sure why, must be something with OS-Socks implementation :o(
+
+                Comment :
+                  Seems to be very usefull to detect shadow accounts...
+                  You love 1984? OSI too ;oP
+
+                (p.s.: in 08-29 renamed from player.spyonclient2 to player.clientinfo)
+
+01-24 Shinigami
+        Linux : If you'll get something like this using Gentoo Release:
+
+                  pol: ../sysdeps/generic/dl-tls.c:72: _dl_next_tls_modid:
+                    Assertion `result <= _dl_tls_max_dtv_idx' failed.
+
+                try following to run your Pol:
+
+                  #!/bin/sh
+                  export LD_ASSUME_KERNEL=2.4
+                  ./pol
+
+09-18 Birdy
+        Fixed : Moved login complete packet send higher in login process to try to fix
+                problems with logging into a weather region with weather where it would
+                start to rain spell icons instead of rain or snow.
+
+08-03 Birdy
+        Added : AcctMatch lines in server entries in servers.cfg.  Example of format
+                is below.  AcctMatch lines have one account name per line, and are
+                those accounts to show the given server to on login to the
+                'login server'(the server that is in the client's login.cfg).
+                Example :
+
+                GameServer
+                {
+                    Name      Test
+                    IP        192.168.0.1
+                    Port      5003
+                    AcctMatch admin
+                    AcctMatch staff
+                }
+
+                The above would only display that particular server(Test, located at
+                192.168.0.1:5003) to someone logging into the login server with
+                accounts admin or staff.
+
+                IPMatch still works as well, and for an account to see the server it
+                must fulfill both IPMatch and AcctMatch entries, if those exist to
+                match up against.
+
+08-03 Birdy
+        Fixed : Good Aligned NPCs that attack innocents and go criminal will
+                highlight grey now.
+                Attacking criminal flagged Good NPCs will no longer flag others as
+                criminal.
+
+08-01 Birdy
+        Fixed : Crash bug related to realm not being set in createitemincontainer soon
+                enough for references to it in create scripts.
+
+07-27 Birdy
+        Added : New system event : SYSEVENT_GONE_CRIMINAL := 0x2000;
+                You should add this to your sysevent.inc file or wherever you keep your
+                system event constants.  This event is closely associated with the
+                SYSEVENT_ENTERED_AREA event.  It uses the current range setting for
+                the ENTERED_AREA event as it's own range, and this is for good reason.
+                The GONE_CRIMINAL event lets the system tell the NPC when a mobile has
+                become a criminal(from a previously non-criminal state) by firing this
+                event and placing a character reference to the new criminal in the
+                source field of the event. If used in conjunction with the ENTERED_AREA
+                system event, then guards should be able to do their guarding work
+                without needing to do polling scans of the area around them periodically.
+                On ENTERED_AREA events, you check to see if the person entering the area
+                is a criminal or not.  On GONE_CRIMINAL events, you know that the person
+                who was already in the area has become a criminal from previously being
+                innocent.
+
+                This event will only fire if the criminal is visible to the NPC.  Though
+                again, if you are using it in conjunction with the ENTERED_AREA event, then
+                when the criminal comes out of hiding, an ENTERED_AREA event will be fired
+                and you can handle the criminal there.
+
+                This event will also only fire on transitions from innocent status to
+                criminal status.  No events will fire on transition to innocent status
+                again, and if the subject was already a criminal to begin with, then
+                doing a criminal act again will not fire the event.  This is to keep the
+                system from being overloaded with events since every hit on an innocent
+                is a new criminal act.
+
+                I will stress one last time, use this WITH the SYSEVENT_ENTERED_AREA
+                system event, NOT on it's own!  Or you will be confused and bewildered.
+                You have been warned!
+
+07-18 Madman Across the Water
+        Changed: Casting from the default spellbook:
+               * It no longer checks if you are dead, says the words of power,
+                 performs the animations, checks for free hands, performs a
+                 skill check, or checks for or consumes mana or reagents. All
+                 these things must now be handled in scripts. This, combined
+                 with Myrathi's changes on 5-12, wherein spellid is now passed
+                 to the cast spell, should allow greater flexibility and also
+                 simplicity in spell systems and scripts.
+
+06-17 Birdy
+        Changed: Uncommented RandomFloat(...) in util.em to allow it to be used.
+
+06-13 Birdy
+        Fixed: Items dragged across realms and dropped will update properly.  This
+               is necessary to allow storage containers to be able to have their items
+               dragged out of them and dropped on the ground directly, even if the
+               ground is not the default realm that storage containers are all in.
+        Fixed: All worn items will now have their realm updated on character realm
+               transfer instead of just the backpack.
+
+06-09 Myrathi
+        Removed: Deprecated UO.EM functions:
+               * Damage()
+               * GameStat()
+
+06-08 Myrathi
+        Fixed: CASE statements given a significant overhaul:
+               * Error messages now correctly refer to them as a "CASE statement",
+                 not a "SWITCH statement".
+               * They now *require* their test-expression to be within parenthesis.
+               * Empty CASE statements with no option clauses are now caught as
+                 invalid.
+               * A warning message will be displayed if the only thing defined is
+                 a "default:" clause (i.e. no option clauses)
+               * Missing option values are now caught and less cryptic error messages
+                 shown (e.g. when using undefined constants)
+
+06-06 Myrathi
+        Added: New 'dowhile' keyword (to solve the "do/while()/endwhile/while()"
+               bug). "do..dowhile()" now follows the more usual block syntax
+               style (if..endif, while..endwhile, etc.).
+               Syntax is as follows:
+
+                   do
+                     <statements>
+                   dowhile ( <expression-is-true> );
+
+06-05 Birdy
+        Added: ItemColorMask ServerSpecOpt option.  This option defaults to the
+               typical POL mask of 0xFFF.  It is a bitmask of what colors should
+               be considered valid.  For example, with an ItemColorMask of
+               0xFFF, any color from 0 to 4095 is considered a valid color.
+               With an ItemColorMask of 0xFF, this would be reduced to a range
+               from 0 to 255.  It was left a mask instead of given as a range
+               in order to allow specifying certain bits to be on.  So, for
+               instance, with the newer clients, a mask of 0x4FFF will allow
+               the third bit (value 4) of the most significant nibble to
+               be turned on, but no others in that nibble.  This allows for
+               newer clients to use the "transparent animation" feature, which
+               allows equipped mounts to be transparent(ie, ethereals).  Bear
+               in mind, older clients may well crash if you set colors to be
+               outside of the non-default mask of 0xFFF, so this is strictly at
+               your own risk to use it.  But for those of you wishing ethereal
+               beetles and other mount animations to be ethereal, you will have
+               to set the mount piece to be color 0x4001 and then equip it.
+               And in order to do that, you will need an ItemColorMask of
+               0x4FFF.
+
+06-03 Birdy
+        Removed: GetAttributeIntrinsicMod(...) function interface in uo.em was
+                 removed, since no Set for the function has existed since way
+                 back in POL094 test cores and no plans to impliment a set
+                 exist.  This will require a search of your scripts for this
+                 function and removal of it(some distro code has it) and
+                 a recompile of those scripts.
+
+05-24 Birdy
+        Fixed: FindSubstance should now (hopefully) auto-release items reserved by
+               it on script termination.
+        Fixed: Packet.SendAreaPacket(x,y,range,realm) now looks for 4 parameters
+               as it should instead of 3.
+
+05-17 Birdy
+        Changed: concealed property is no longer compared to cmdlevel by core.  Any
+                 scripts changing concealed should do validation against cmdlevel
+                 itself.  Doing this now allows NPCs and others to be able to be
+                 concealed at higher levels than their cmdlevel.  For this added
+                 flexibility, all validation must now be done within scripts!
+
+05-16 Myrathi
+    Removed deprecated operators and tokens (as promised! :P'):
+        - '=' has been removed; use '==' to test for equality.
+          (appropriate suggestions will be made for '==' or ':=')
+        - 'local', 'global' and 'dim' have been removed; use 'var' to declare variables.
+        - 'begin' and 'end' have been removed:
+			do..while() loops now work without them.
+			repeat..until() loops never actually needed them: so no loss. :)
+
+        ** Scripts containing any of the removed operators or tokens **
+        **     WILL NOT COMPILE ANY MORE!! Update your scripts!!     **
+
+05-12 Myrathi
+	Fixed: Mobile 'mob.frozen' flag is now saved properly (NOTE: this includes PCs and
+		will most likely require any existing scripted workarounds to be rewritten!)
+
+	Added: Extra 'spell_id' parameter is now passed to spell scripts which relates to
+		'SPELLID' in the spell's entry in '::spells.cfg'.
+
+		Example:
+			use uo;
+			program spellscript( who, spell_id )
+				SendSysMessage(who, "Casting SPELLID# " + CStr(spell_id));
+				// "Clumsy" has spell_id = 1, "Create Food" = 2, etc..
+			endprogram
+
+05-01 Birdy
+	Fixed: Number of Map/Static patches was reversed in the enable difs packet.
+
+05-01 Racalac
+    Fixed CProps "GivenBy", "GivenTo", and "GivenTime" set on items dropped on NPCs.
+
+04-26 Birdy
+    Added: New uo.em function created :
+        FindSubstance( container, objtype, amount, makeinuse := 0 )
+        This function will search the given container for items of objtype in an
+        amount equal or greater than the amount given(stackables can return greater
+        than #), if makeinuse is set to 1, then the items will be reserved.  If
+        sufficient # of items have been found, those found(and possibly reserved)
+        will be returned in an array as the return value.  If not enough of the
+        given item were found, then an error with errortext = "Not enough of that
+        substance in container" will be returned.
+
+04-25 Racalac
+    Added new house methods that allow write access to the house.components array.
+        house.add_component(item ref)
+        house.erase_component(item ref)
+    Added multi member:
+        multi.footprint
+            returns a struct with "xmin", "xmax", "ymin", "ymax" of the world coordinates
+            the house or boat occupies.
+    Added GetMultiDimensions(graphic), returns struct with "xmin", "xmax", "ymin", "ymax"
+        of _relative_ distances from center. xmin and ymin are _negative_.
+    Changed TargetMultiPlacement. new optional parameters:
+        TargetMultiPlacement( character, objtype, flags := 0, xoffset := 0, yoffset := 0 );
+        xoffset and yoffset change the "ghost" target house. NOTE: the coordinates returned
+        by this are the coordinates of the "target" cursor, not the center of the house!
+        So if you want to have the front steps be under the cursor, you must transform the
+        parameters to CreateMultiAtLocation to include your xoffset and yoffset. ANOTHER
+        NOTE: positive offsets move the cursor left/down in relation to the ghost house.
+        When transforming the coordinates for CreateMultiAtLocation, use the negative (i.e
+        if yoffset is 4, subtract 4 from the y coordinate result of TargetMultiPlacement
+        when passing the location to CreateMultiAtLocation.
+        Example, using the front steps to target:
+            var dims := GetMultiDimensions( 0x6071 );
+            if(!dims) return; endif
+            var loc := TargetMultiPlacement( who, 0x6071, 0, 0, dims.ymax );
+            if(!loc) return; endif
+            var house := CreateMultiAtLocation( loc.x, loc.y - dims.ymax, loc.z, 0x6071, 0, who.realm );
+
+
+04-24 Racalac
+    Armor Zone 0 errors hae a better message now.
+    Half-created PCs shouldn't get into the world file now.
+    Added house.custom() returns 1/0 (for upcoming custom house support)
+    NPC move functions check the current realm's bounds
+    CreateItemAtLocation correctly checks passed coordinates for validity for the realm
+    Map methods (insertpin, etc) check the current realm's bounds. Not like there's art for
+        the other realms anyway.
+    Packet 0x1B changed to include correct map/server bounds
+
+04-23 Birdy
+	Changed: Mounts listed in uoconvert.cfg that are not found to have tiledata.mul
+		entries will now be created regardless.  Should fix problems related to
+		0x3ea2 mount(perhaps others too), which has no tiledata.mul entry, yet
+		is a valid mount graphic.
+
+04-20 Birdy
+	Fixed: FindPath(...) should work again now.
+
+04-17 Birdy
+	Changed: Speech.mul -- Added in support for UTF-8 -> Unicode decoding in speech.mul
+		packets.  Should work now (hopefully) for all languages.
+	Fixed: Minor tweaks to movement.  Should fix some bounceback problems.
+
+04-17 Racalac
+	Multimap/Realm Support
+	----------------------
+	POL now supports seperate maps, or "Realms", such as britannia, ilshenar,
+	and malas. The uoconvert tool is the starting point for using realms on
+	your shard. Run the updated instructions in the included uoconvert.txt
+	help file. The names of the directories created in pol/realms by uoconvert
+	are the realm names that are used by the core and your scripts. I
+	recommend you keep them the same as what is in the uoconvert.txt file.
+	Realm names are the key to using realms on your shard.
+
+	The client's *.dif files should be used in the uoconvert process, as the
+	client needs to know how many patches exist. Any time the .dif files
+	change on the client side, re-run uoconvert with the new .dif files to
+	stay in sync.
+
+
+	Object Changes:
+	UObject.realm: Read-only string. (This inherits to Item, Character, Multi, etc)
+
+	Account.uo_expansion: Read-only string
+	Account.set_uo_expansion(string): recognized values: AOS, LBR, T2A (default)
+	  This determines what flag is sent with packet 0xB9 during login. The
+	  servspecopt.cfg UOFeatureEnable is used with packet 0xA9 and is currently
+	  global to all clients.
+
+	Packet.SendAreaPacket(x,y,range,realm), realm name string parameter added.
+
+	Escript Module Changes:
+	polsys.em:
+		Added "Realms()": returns a dictionary of structs. example:
+			"realm_name" -> "width"
+						    "height"
+						    "mapid"
+						    "toplevel_item_count"
+						    "mobile_count"
+
+	uo.em (included with zip):
+	The following functions were enhanced with a realm parameter (all realm
+	parameters are a case-sensative string name of the realm). All other
+	functions use some object's context for determining the realm.
+
+	Tip for upgrading: all your scripts should works normall _in Britannia_.
+	In any other realm they will fail. You must find all occurances of these
+	functions on your shard and fill in the realm parameter with an appropriate
+	value. For example, in the createnpc textcommand, the call to
+	CreateNPCAtLocation should be made with 'who.realm' as the last parameter.
+	Many script changes are easy like this, others are harder, like
+	spawnregion and recall/gate spells. If something doesn't work, you can be
+	fairly sure it's due to an incorrect realm parameter. The pol-distro
+	sourceforge project has been updated with many of these changes if you
+	wish to look.
+
+	const _DEFAULT_REALM := "britannia";
+	CreateItemAtLocation( x, y, z, objtype, amount := 1, realm := _DEFAULT_REALM );
+	CreateMultiAtLocation( x, y, z, objtype, flags := 0, realm := _DEFAULT_REALM );
+	CreateNpcFromTemplate( template, x, y, z, override_properties := 0, realm := _DEFAULT_REALM);
+	FindPath( x1, y1, z1, x2, y2, z2, realm := _DEFAULT_REALM, mobilesblock := 0, searchskirt := 5 );
+	GetHarvestDifficulty( resource, x, y, tiletype, realm := _DEFAULT_REALM );
+	GetMapInfo( x, y, realm := _DEFAULT_REALM );
+	GetRegionString( resource, x, y, propertyname, realm := _DEFAULT_REALM );
+	GetStandingHeight( x, y, startz, realm := _DEFAULT_REALM );
+	GetWorldHeight( x, y, realm := _DEFAULT_REALM );
+	HarvestResource( resource, x, y, b, n, realm := _DEFAULT_REALM ); // returns b*a where 0 <= a <= n
+	ListGhostsNearLocation( x, y, z, range, realm := _DEFAULT_REALM );
+	ListItemsAtLocation( x, y, z, realm := _DEFAULT_REALM );
+	ListItemsNearLocation( x, y, z, range, realm := _DEFAULT_REALM );
+	ListItemsNearLocationOfType( x,y,z, range, objtype, realm := _DEFAULT_REALM );
+	ListItemsNearLocationWithFlag( x,y,z, range, flags, realm := _DEFAULT_REALM );
+	ListMobilesNearLocation( x, y, z, range, realm := _DEFAULT_REALM );
+	ListMobilesNearLocationEx( x,y,z, range, flags, realm := _DEFAULT_REALM );
+	ListObjectsInBox( x1,y1,z1, x2,y2,z2, realm := _DEFAULT_REALM );
+	ListMultisInBox( x1,y1,z1, x2,y2,z2, realm := _DEFAULT_REALM );
+	PlayMovingEffectXYZ( srcx, srcy, srcz, dstx, dsty, dstz, effect, speed, loop := 0, explode := 0, realm := _DEFAULT_REALM );
+	PlayStationaryEffect( x, y, z, effect, speed, loop := 0, explode := 0, realm := _DEFAULT_REALM );
+
+	Functions added:
+	MoveObjectToRealm( object, realm, x, y, z, flags := 0 );
+		--This is the only write interface to an object's realm. If you wish
+		an object to reside on another realm, this is the only function
+		available. Check obj.realm != destination_realm to avoid unnecessary
+		same-realm transfers. flags is the normal MoveItem|CharacterToLocation
+		flags. The passed x,y,z must be a standable location in the specified
+		realm.
+
+	Most of these functions will return the errors "Realm not found" and
+	    "Invalid Coordinates for realm".
+
+
+	Regions:
+	Added "Realm realmname" property
+
+	poltool:
+	added a 5th parameter for the 'mapdump' command, a realm name string as above
+
+	uoconvert:
+	number of map and static patches (from mapdif and stadif files) saved to
+	   /realm/[name]/realm.cfg
+	Recommend to turn on mapdifs for all realms.
+
+
+	Other Changes:
+	AOS Spellbook packets are supported. For this, change you spellbook's
+	itemdesc.cfg type from Container to Spellbook. Paladin and Necromancer
+	spellbooks are supported by the new Spellbook itemdesc type property
+	"SpellType" which is one of these strings: "Magic", "Paladin", "Necro".
+
+	Recognized scroll objects are: Magic: 0x1F2D - 0x1F6C, Necro 0x2260 - 0x226F,
+	    Paladin: 0x2270 - 0x227C. Sorry this is hardcoded :P
+
+	Simple support for AOS tooltips - old single click functionality is supported.
+
+	Custom Houses - not yet sorry, that's next!
+
+
+04-01 Birdy
+	Added: 	MaxPathFindRange servspecopt[.local].cfg option added.  This will define the
+			maximum distance between the start and destination points which pathfinding
+			will be performed on.  If PathFind is called on points greater than this
+			value, an error result will be returned with "Beyond Max Range." as the
+			errortext.  Default value for this is 50.
+	Added:	HiddenTurnsCount servspecopt[.local].cfg option added.  This will define
+			whether or not turns made while hidden will count as a "move".  It defaults
+			to 1, which is the way POL has always operated.  If set to zero, then if
+			you are hidden and make a turn, it will not count against your stealth steps,
+			nor will it unhide you if you are not stealthing.  If set to one, turns while
+			hidden do count against stealthsteps, and will unhide you if you are not
+			stealthing.
+	Added:  New uo.em function added, UseItem(item, character);  This will allow the
+			item specified's use script to be run by the character specified.  No checks
+			are done for distance, or check for being a ghost, or anything else.
+			Essentially, the script is just fired off on the character without checks, so
+			the script calling this function should do those checks if desired.  This
+			function can also be called with NPC's as the character, but any use script
+			that requires interactivity with it's user that is called on an NPC may have
+			unpredictable results(dependant on the script).
+	Added:  UOConvert now will report the (x,y,z) of invalid tiles that cause it to
+			abort map conversion instead of just aborting.
+
+03-29 Birdy
+	Fixed: Caves should now be able to be walked into.  Some problems along shores fixed too.
+			Run UOconvert on your files for this fix to work.
+
+03-24 Birdy
+	Changed: Character height in all other aspects changed to 15 from 9 to better reflect height in
+			 game relative to items.
+	Changed: Walking related to ladders modified to try to help in their traversal.
+	Changed: The map now should block LOS.  Run UOconvert on all your files again! (see uoconvert.txt
+			 for instructions)
+	Fixed: Speech.mul should now display speech with keywords even when on a non-ENU region computer.
+	Changed: Boats now check height of blockables in relation to the boat before being
+			 blocked by them.  This should allow boats to travel under sufficiently high
+			 bridges and over statics that may be under the map.
+	Added: Pathfinding function FindPath.  This is a very experimental function and has a minute
+			chance of returning a "Path Corrupted" error.  If you use it and can find a distinct
+			path from point A to point B which generates a "Path Corrupted" error, please send
+			details to the dev team.
+
+			Function prototype is found in uo.em and takes the form :
+
+			FindPath( x1, y1, z1, x2, y2, z2, realm := _DEFAULT_REALM, mobilesblock := 0, searchskirt := 5 );
+
+			(x1,y1,z1) = start of the path
+			(x2,y2,z2) = destination
+			mobilesblock = Whether or not to consider mobiles in the way as 'blocking' the path.
+			searchskirt = The skirt around the square that is formed around the start of the path
+						  to the destination which represents the searchable area.
+
+			If it finds a path it will return an array of coordinates, representing each step
+			along the path from the next step to take from the start of the path to the actual
+			destination.  The coordinates are found in .x, .y, and .z.  Ex :
+
+			myPath := FindPath(startx, starty, startz, endx, endy, endz);
+
+			The first step to take from a standing position at (startx,starty,startz) would be
+			at (myPath[1].x, myPath[1].y, myPath[1].z), the next at (myPath[2].x, myPath[2].y,
+			myPath[2].z), etc.
+
+			Keep in mind that if you want you can give as large a search area as you want, and
+			it will try to find the area.  But the larger the search area(ie, the larger the
+			distance from start to destination), the more memory and more time it will take to
+			find a path.  Trying to search, for instance, for a path from Yew to Britain will
+			almost certainly freeze your shard and gobble up all it's memory.  No restrictions
+			were placed in core in order to allow for use of the function with future computers
+			which may indeed one day be able to search for such a path in a split second.  But
+			that leaves the responsibility on the scripter using the function to be certain to
+			not try to search for outrageously large paths.  My experience is that paths of
+			20 or less tiles are fairly quick and low impact on the server.
+
+			Several errors can be returned instead, with the following errortext messages :
+
+			"Failed to find a path."  --  The typical error returned when a path hasn't been found.
+			"Out of memory."          --  This will only happen if there isn't sufficient memory to perform the search.
+			"Solution Corrupted!"     --  This is an error that rarely seems to happen, but if you can get it to
+										  happen repeatedly along a static(non-changing) specific path, please
+										  report it to birdy at polserver.com
+			"Pathfind Error."         --  A catch-all error for various other circumstances, assume no path could be found.
+
+>>>>>>> 1.192.4.30
+03-04 Birdy
+	Changed: Character look height changed to 15 from 9 to better reflect height in game relative
+			to items.
+	Added: uoconvert.cfg element option added, LOSOptions, in the following form:
+				LOSOptions
+				{
+					UseNoShoot        1
+					LOSThroughWindows 1
+				}
+			UseNoShoot means uoconvert will determine whether or not something blocks LOS by use of
+			the NoShoot tiledata flag instead of the Blocking tiledata flag.  A couple of special
+			cases exist for secret door items and blocking items that are walls(in both cases, LOS
+			will be hindered), but otherwise the NoShoot tiledata flag will be used.  This should
+			make many blocking, yet not really LOS blocking items no longer block sight, such as
+			candelabras, lamp posts, and such.
+			LOSThroughWindows only matters if UseNoShoot is 1.  If LOSThroughWindows is 1, then
+			items marked as windows in tiledata will not impede LOS.
+			Both of these options default to false.  When UseNoShoot is false, the old method of
+			determining sight blocking as being equivalent to ability to pass will be used for LOS.
+	Added: uoconvert.cfg element option added, Mounts, in the following form:
+				Mounts
+				{
+					Tiles  0x3ea0 0x3ea1 0x3ea2 0x3ea3 0x3ea4 0x3ea5 0x3ea6 0x3ea8 0x3ea9 0x3eb0 0x3eb2 0x3eb3 0x3e9f
+				}
+			If this element exists, and if Tiles exist within it, then those tiles with the graphic IDs
+			listed will be considered to be mounts by uoconvert and will set the layer to be the
+			mount layer and it will set the tile to be equippable.
+
+	Added: New System Hook : SpeechMul -- This hook will be activated when someone using a client with speech.mul
+			in it says a speech.mul keyword(one or more).  The person who spoke is passed as the first parameter
+			and an array containing each of the speech tokens they spoke is passed as the second parameter.
+			This is a very experimental hook, so use at your own risk!  Though I would like to know if it works,
+			particularly on non-english systems.  For ENU players/admins, whether you have a hook or not, these
+			changes should make it such that you no longer "lose text" that has speech.mul tokens in it.
+
+			If you wish to write a syshook script for speech.mul tokens, you will need a syshook.cfg file with
+			the following in it.  This should be in a package of some sort too of course.
+
+				SystemHookScript speechmulhook.ecl
+				{
+					SpeechMul SpeechMul
+				}
+
+			The following is an example of a very simple hook called speechmulhook.src.  It is, of course, up to
+			you to make something actually useful. :
+
+				use uo;
+
+				program SpeechMulHook()
+				    return 1; //change to 1 to enable the hook
+				endprogram
+
+				exported function SpeechMul(who, speechtokens) //note passed ARRAY of speech.mul tokens
+
+				    Print("Tokens : ");
+				    foreach token in speechtokens
+						Print(CStr(token));
+					endforeach
+
+				endfunction
+
+12-27 Racalac
+    Fixed invisible corpse clothing
+    Fixed boat member access
+    Fixed (maybe) first non-nodraw tile in multi definition flagged as static by uoconvert
+    Changed core visibility function - characters now can always see themselves. Fix for
+        equipping items while hidden not showing until unhiding.
+
+12-06 Racalac
+    Fixed: Invisible items in containers caused random items to become temporarily invisible
+    Fixed: default doubleclick range for items without an itemdesc entry wasn't reading from servspecopt.cfg
+
+11-16 Racalac
+    Fixed: member access to account and script objects (and any dicts/structs with the same key names)
+        Recompile your scripts! Keep testing, find my errors! :)
+    Changed: logged-off players are now considered not visible for any/all systems that check visibility.
+
+11-15 Racalac
+    poltool: prints flag descriptions
+    Fixed: height 1 "half-height" tiles no longer considered height 0.
+    Fixed: crash by passing 0 to SystemFindBoatBySerial
+    Fixed: account object method fall-through. d'oh!
+
+11-10 Racalac
+    Fixed member access to datastore, script, and guild objects. Keep testing!
+    Changed: equipment.container returns an "offline" character reference when equipped.
+
+11-09 Racalac
+    Changed: invisible items in containers can't be seen by those without the seeinvisitems priv
+    Major Changes: New ecompile version! Changed the way object methods and members are set and get.
+        This should give a moderate to major speed enhancement to script execution. Please report
+        any weirdness you encounter with respect to setting and getting object (and struct/dict)
+        members, calling object methods, and methodscripts (that may or may not override core-defined
+        methods).
+        Temporary new ecompile/ecompile.cfg option: specifiy the -m command-line paramter to compile
+            using the old way, or set "OptimizeObjectMembers" in ecompile.cfg to 0 (1 by default).
+            This option will go away when I'm satisfied this new code works.
+
+11-01 Racalac (not in 11-01 test core)
+    Fixed: water statics above walkable map no longer blocks movement below
+    Fixed: second equipped item in a layer no longer stored as "gotten" (fixes crash on save?)
+
+10-31 Racalac
+    Items with no defined itemdesc.cfg entry (walls, floors, etc) will use the
+        servspecopt.cfg values for decay time and dblclickrange.
+    Added character.cleargottenitem(). Returns "dragged" item to original
+        location. There's an graphical glitch with the client that makes it
+        look like the item is duplicated. The item that appears to remain on
+        the cursor is not really there.
+    uoconvert: changed map structure to allow building dynamic items and walking
+        around on them. RECONVERT YOUR MAP!
+    Allowed movement in places like T2A with dramatic Z changes in the map.
+    Fixed: certain script parameters were being flagged wrongly as out-of-range
+    Fixed: (maybe) If a layer is already equipped, trying to equip another item
+        on that layer will return the item to its original location (3D client thing).
+    Added Npcdesc.cfg property: AttackAnimation (default 0 (wrestling)), use this
+         change the template's intrinsic weapon animation (i.e. for LBR npcs)
+
+10-25 Racalac
+	Added uoconvert.cfg for defining what multi IDs are what type (Boat, House, Stairs (AOS)). See included file for 'normal' values.
+	Added for Packet Hooks: SubCommandLength property for 'parent' packets: 1, 2, or 4 byte lengths for subcommand fields.
+		Example:
+		Packet 0x12 //Macro/Spell/Action
+		{
+			Length variable
+			SubCommandOffset 3
+			SubCommandLength 1 //unlike cmd BF, the subcommand is 1 byte, not 2
+		}
+		SubPacket 0x12
+		{
+			SubCommandID 0xC7 //bow or salute
+			ReceiveFunction command_12:HandleC7Action
+		}
+
+09-27 Racalac
+    Fixed improper cleanup of accounts and player characters on exit, leftovers.txt should be reduced in size now.
+    Maybe fixed a memory leak in the packet hook system.
+
+09-08 Racalac
+    Fixed a crash condition concerning multis and movement.
+    Added error messages if missing realm files.
+
+    uoconvert: handles a specific poorly formed staidx block
+
+09-06 Racalac
+    uotool reads pol.cfg from the same dir to find the MUL files.
+    uotool & poltool usage statements updated
+    Example to fix mounts, add en entry like this in tiles.cfg for each of your mount types (i.e. listed in tamed.src)
+    Remember running "uoconvert tiles" will not save your manual changes.
+    tile 0x3ea2
+    {
+        Desc mount
+        UoFlags 0x04404000
+        Layer 25
+        Height 3
+        Weight 0
+        Equippable 1
+        Movable 1
+    }
+    Changed UOConvert handling of blocking flags, probably fixing NPCs walking through fences, etc. Please re-run UOconvert.
+    Syz changed uoconvert to be more friendly to tool-created map and statics MULs.
+
+08-21 Racalac
+    Turned off core sends of Packet oxB9 (UO expansion enable) for now, it will return!
+    Fixed bug with CreatePacket with specified cmdtype with fixed-length.
+
+08-20 Racalac
+    Fixed a bug in multis walking code introduced in the 08-19 testcore.
+
+08-16 Syzygy
+    The 'Summon Water Elemental' spell must now be in the spellbook to be cast.
+
+08-14 Syzygy
+    Fixed a LOS issue when doubleclicking an item stored in an NPC's backpack
+
+08-13 Syzygy
+    corrected an error where a client could be redirected to the wrong server if servers.cfg specified 'IPMatch' directives.
+    corrected an error which would not allow a mob to drop an item to a lower Z.
+    at death, those added to your "reportable" list will no longer be marked aggressor to you.
+    at death, those added to your "reportable" list will no longer be marked as having lawfully damaged you.
+      (this is imperfect - all your aggressors, and lawful damagers, should be cleared at your death)
+
+08-09 Syzygy
+    pol.exe no longer uses .mul files.  See uoconvert.txt for notes (you will use uoconvert to generate pol data files)
+      notable changes:
+         a door will only be ignored if its itemdesc entry says it's a door
+           (previously, used the tiledata.mul "door" flag to tell)
+      I do not recommend editing multis.cfg, tiles.cfg, or landtiles.cfg by hand - as uoconvert is young, it's likely
+      that you'll have to regenerate these files from the .mul files soon.
+
+08-05 Syzygy
+    Removed 'UseDynamicMapCache' pol.cfg option and related code
+
+07-27 Syzygy
+    CreateNpcFromTemplate will now accept a struct, or an array (with element names), specifying custom properties
+
+07-26 Racalac
+    Fixed creating armor items with GetItemDescriptor
+    Added: Packet Hook Scripts. See packethooks.txt. Don't try to hook AOS packets or I'll cry.
+
+06-20 Syzygy
+    account.GetCharacter(index) will notice if you pass 0, which is bad.
+        account.DeleteCharacter(index) - same



From austin at berlios.de  Fri Sep 16 11:48:02 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 16 Sep 2005 11:48:02 +0200
Subject: [Poldistro-svn] r144 - trunk/096
Message-ID: <200509160948.j8G9m2Ho020084@sheep.berlios.de>

Author: austin
Date: 2005-09-16 11:48:01 +0200 (Fri, 16 Sep 2005)
New Revision: 144

Removed:
   trunk/096/TODO
Log:


Deleted: trunk/096/TODO
===================================================================
--- trunk/096/TODO	2005-09-16 09:37:14 UTC (rev 143)
+++ trunk/096/TODO	2005-09-16 09:48:01 UTC (rev 144)
@@ -1,9 +0,0 @@
-01. MERGE 'include/insertSound.inc' and 'config/insertsound.cfg' into 'include/sound.inc'.
-02. COMMANDS: bank, squelch
-03. APPLY scheduler packager for all start.src calling packages.
-04. REMOVE old bank package and install/finish new storage package.
-05. Lots of other stuff!
-06. Finish the commands rewrite.
-07. Replace the include/attributes.inc with the installed /systems/attributes pkg
-	and script anything it might be missing.
-



From austin at berlios.de  Sat Sep 17 08:05:44 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 17 Sep 2005 08:05:44 +0200
Subject: [Poldistro-svn] r145 - trunk/096/pkg/utils/gumps/include
Message-ID: <200509170605.j8H65icf016539@sheep.berlios.de>

Author: austin
Date: 2005-09-17 08:05:39 +0200 (Sat, 17 Sep 2005)
New Revision: 145

Modified:
   trunk/096/pkg/utils/gumps/include/gumps.inc
Log:
working a little bit on the optimizer

Modified: trunk/096/pkg/utils/gumps/include/gumps.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/gumps.inc	2005-09-16 09:48:01 UTC (rev 144)
+++ trunk/096/pkg/utils/gumps/include/gumps.inc	2005-09-17 06:05:39 UTC (rev 145)
@@ -61,7 +61,7 @@
 // GFGumpPic(byref gump, x, y, gump_id, hue := 0)
 // GFHTMLArea(byref gump, x, y, width, height, text, background:=0, scrollbar:=0)
 // GFMovable(byref gump, bool)
-// GFPage(byref gump, page)
+// GFPage(byref gump, page_num)
 // GFRadioButton(byref gump, x, y, unp_id, pres_id, status:=0, btn_value:=0)
 // GFResizePic(byref gump, x, y, gump_id, width:=0, height:=0)
 // GFSendGump(who, byref gump)
@@ -75,6 +75,8 @@
 // * Internal/Private Function List *
 //
 // XGFError(text)
+// XGFAddToLayout(byref gump, string)
+//
 /////////////////////////////////////////////////////////////////
 // * Global Variables *
 //
@@ -102,7 +104,7 @@
  * The gump object.
  *
  */
-function GFCreateGump(x:=0, y:=0, width:=0, height:=0)
+function GFCreateGump(x:=0, y:=0, width:=0, height:=0, optimize:=0)
 	var gump := struct;
 
 	gump.+base := struct;
@@ -119,11 +121,17 @@
 	gump.base.+CloseLoc := 0;	// NoClose flag location
 	gump.base.+DisposeLoc := 0;	// NoDispose flag location
 
+	// Used to store the positions of where data will go for GFPage() entries.
+	// Ensures each page # only appears once.
+	gump.+optimize := CInt(optimize);
+	gump.+pagelocs := array;
+	gump.+cur_page := 0;
+
 	gump.+layout	:= array;	// Main layout array for entire gump
 	gump.+data	:= array;	// Storage array for static-text and
 					// text-entry initialisation strings
 					// Indexes/KeyIDs for...
-
+	
 	// Starting points for data values
 	gump.+data_id	:= 1;
 
@@ -152,15 +160,15 @@
 				return XGFError("Gump already contains the 'NoClose' flag.");
 			endif
 
-			gump.layout.append("NoClose");
-			gump.base.CloseLoc := gump.layout.size();
+			(gump.layout).append("NoClose");
+			gump.base.CloseLoc := (gump.layout).size();
 			break;
 		1:
 			if ( !gump.base.CloseLoc )
 				return XGFError("Gump is already closable.");
 			endif
 
-			gump.layout.erase(gump.base.CloseLoc);
+			(gump.layout).erase(gump.base.CloseLoc);
 			gump.base.CloseLoc := 0;
 			break;
 		default:
@@ -195,15 +203,15 @@
 				return XGFError("Gump already contains the 'NoDispose' flag.");
 			endif
 
-			gump.layout.append("NoDispose");
-			gump.base.DisposeLoc := gump.layout.size();
+			(gump.layout).append("NoDispose");
+			gump.base.DisposeLoc := (gump.layout).size();
 			break;
 		1:
 			if ( !gump.base.CloseLoc )
 				return XGFError("Gump is already disposable.");
 			endif
 
-			gump.layout.erase(gump.base.DisposeLoc);
+			(gump.layout).erase(gump.base.DisposeLoc);
 			gump.base.DisposeLoc := 0;
 			break;
 		default:
@@ -234,15 +242,15 @@
 				return XGFError("Gump already contains the 'NoMove' flag.");
 			endif
 
-			gump.layout.append("NoMove");
-			gump.base.MoveLoc := gump.layout.size();
+			(gump.layout).append("NoMove");
+			gump.base.MoveLoc := (gump.layout).size();
 			break;
 		1:
 			if ( !gump.base.MoveLoc )
 				return XGFError("Gump is already movable.");
 			endif
 
-			gump.layout.erase(gump.base.MoveLoc);
+			(gump.layout).erase(gump.base.MoveLoc);
 			gump.base.MoveLoc := 0;
 			break;
 		default:
@@ -252,23 +260,30 @@
  endfunction
 
 /*
- * GFPage(byref gump, page)
+ * GFPage(byref gump, page_num)
  *
  * Purpose
  * Adds a page to the gump.
  *
  * Parameters
  * gump:	Reference to the gump
- * page:	The integer representing the page's number
+ * page_num:	The integer representing the page's number
  *		  (0 is the background, always visible)
  *
  * Return value
  * No return value.
  *
  */
-function GFPage(byref gump, page)
-	gump.layout.append("Page " + CStr(CInt(page)));
-
+function GFPage(byref gump, page_num)
+	(gump.layout).append("Page " + CStr(CInt(page_num)));
+	
+	if ( gump.optimize )
+		gump.cur_page := page_num;
+		if ( !gump.pagelocs[page_num] )
+			gump.pagelocs[page_num] := (gump.layout).size();
+		endif
+	endif
+	
 	return 1;
 endfunction
 
@@ -300,7 +315,7 @@
 		height := gump.base.width;
 	endif
 
-	gump.layout.append("ResizePic " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
+	(gump.layout).append("ResizePic " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
 				+ CStr(CInt(gump_id)) + " " + CStr(width) + " " + CStr(height));
 	return 1;
 endfunction
@@ -323,7 +338,7 @@
  *
  */
  function GFAddAlphaRegion(byref gump, x, y, width, height)
-	gump.layout.append("CheckerTrans " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
+	(gump.layout).append("CheckerTrans " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
 				+ CStr(CInt(width)) + " " + CStr(CInt(height)));
 	return 1;
  endfunction
@@ -370,7 +385,7 @@
 		line := line + " 0 " + CStr(btn_value);
 	endif
 
-	gump.layout.append(line);
+	(gump.layout).append(line);
 
 	return (btn_value);
 endfunction
@@ -415,7 +430,7 @@
 		btn_value := gump.data_id;
 	endif
 
-	gump.layout.append("CheckBox " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
+	(gump.layout).append("CheckBox " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
 				+ CStr(CInt(unc_id)) + " " + CStr(CInt(che_id)) + " "
 				+ CStr(CInt(status)) + " " + CStr(btn_value));
 
@@ -440,7 +455,7 @@
  *
  */
 function GFSetRadioGroup(byref gump, group_id)
-	gump.layout.append("Group " + CStr(CInt(group_id)));
+	(gump.layout).append("Group " + CStr(CInt(group_id)));
 	return 1;
 endfunction
 
@@ -470,7 +485,7 @@
 	gump.data.append(""+CStr(text));
 	var index := gump.data.size()-1;
 
-	gump.layout.append("HTMLGump " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
+	(gump.layout).append("HTMLGump " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
 				+ CStr(CInt(width)) + " " + CStr(CInt(height)) + " " + CStr(index) + " "
 				+ CStr(CInt(background)) + " " + CStr(CInt(scrollbar)));
 	return (index);
@@ -500,11 +515,11 @@
  */
 function GFAddHTMLLocalized(byref gump, x, y, width, height, cliloc, background, scrollbar, hue:=0)
 	if(hue == 0)
-		gump.layout.append("XMFHTMLGump " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
+		(gump.layout).append("XMFHTMLGump " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
 					+ CStr(CInt(width)) + " " + CStr(CInt(height)) + " " + CStr(cliloc) + " "
 					+ CStr(CInt(background)) + " " + CStr(CInt(scrollbar)));
 	else
-		gump.layout.append("XMFHTMLGumpColor " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
+		(gump.layout).append("XMFHTMLGumpColor " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
 					+ CStr(CInt(width)) + " " + CStr(CInt(height)) + " " + CStr(CInt(cliloc)) + " "
 					+ CStr(CInt(background)) + " " + CStr(CInt(scrollbar)) + " " + CStr(CInt(hue)));
 	endif
@@ -538,7 +553,7 @@
 	if ( hue )
 		text := " hue="+CStr(hue);
 	endif
-	gump.layout.append(text);
+	(gump.layout).append(text);
 
 	return 1;
 endfunction
@@ -571,7 +586,7 @@
 		text := text+" hue="+CStr(hue);
 	endif
 
-	gump.layout.append(text);
+	(gump.layout).append(text);
 	return 1;
 endfunction
 
@@ -595,7 +610,7 @@
 function GFTextLine(byref gump, x, y, hue:=0, text:="")
 	gump.data.append(""+CStr(text));
 	var index := gump.data.size()-1;
-	gump.layout.append("Text " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
+	(gump.layout).append("Text " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
 				+ CStr(CInt(hue)) + " " + CStr(index));
 
 	return (index);
@@ -625,7 +640,7 @@
 	gump.data.append(""+CStr(text));
 	var index := gump.data.size()-1;
 
-	gump.layout.append("CroppedText " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
+	(gump.layout).append("CroppedText " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
 				+ CStr(CInt(width)) + " " + CStr(CInt(height)) + " " + CStr(CInt(hue)) + " " + CStr(index));
 
 	return (index);
@@ -670,7 +685,7 @@
 		btn_value := gump.data_id;
 	endif
 
-	gump.layout.append("Radio " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
+	(gump.layout).append("Radio " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
 				+ CStr(CInt(unp_id)) + " " + CStr(CInt(pres_id)) + " "
 				+ CStr(CInt(status)) + " " + CStr(btn_value));
 	return (btn_value);
@@ -710,7 +725,7 @@
 		txt_id := gump.data_id;
 	endif
 
-	gump.layout.append("TextEntry " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
+	(gump.layout).append("TextEntry " + CStr(gump.base.x + CInt(x)) + " " + CStr(gump.base.y + CInt(y)) + " "
 				+ CStr(CInt(width)) + " " + CStr(CInt(height)) + " "
 				+ Cstr(CInt(txt_color)) + " " + CStr(txt_id) + " " + CStr(index));
 
@@ -756,10 +771,32 @@
  *
  */
 function XGFError(text)
-	var temp := error;
-	temp.+errortext := text;
-
+	var temp := error{"errortext":=text};
+	
 	SysLog("Gump Error:: "+text);
 
 	return temp;
 endfunction
+
+/*
+ * XGAddToLayout(gump, text)
+ *
+ * Purpose
+ * Internal function for adding to the layout array
+ * and checking for optimizations.
+ *
+ * Parameters
+ * gump:	Gump to add content to
+ * text:	String to place in the layout array.
+ *
+ * Return value
+ * Returns 1
+ *
+ */
+function XGFAddToLayout(byref gump, text)
+	if ( !gump.optimize )
+		(gump.layout).Append(text);
+	else
+		(gump.layout).Insert(gump.pagelocs[gump.curpage]+1, text);
+	endif
+endfunction



From austin at berlios.de  Sat Sep 17 11:35:40 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 17 Sep 2005 11:35:40 +0200
Subject: [Poldistro-svn] r146 - trunk/096/pkg/utils/gumps/include
Message-ID: <200509170935.j8H9ZeQK019687@sheep.berlios.de>

Author: austin
Date: 2005-09-17 11:35:39 +0200 (Sat, 17 Sep 2005)
New Revision: 146

Modified:
   trunk/096/pkg/utils/gumps/include/gumps.inc
   trunk/096/pkg/utils/gumps/include/gumps_ex.inc
Log:
Gump optimize function.

Modified: trunk/096/pkg/utils/gumps/include/gumps.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/gumps.inc	2005-09-17 06:05:39 UTC (rev 145)
+++ trunk/096/pkg/utils/gumps/include/gumps.inc	2005-09-17 09:35:39 UTC (rev 146)
@@ -104,7 +104,7 @@
  * The gump object.
  *
  */
-function GFCreateGump(x:=0, y:=0, width:=0, height:=0, optimize:=0)
+function GFCreateGump(x:=0, y:=0, width:=0, height:=0)
 	var gump := struct;
 
 	gump.+base := struct;
@@ -121,12 +121,6 @@
 	gump.base.+CloseLoc := 0;	// NoClose flag location
 	gump.base.+DisposeLoc := 0;	// NoDispose flag location
 
-	// Used to store the positions of where data will go for GFPage() entries.
-	// Ensures each page # only appears once.
-	gump.+optimize := CInt(optimize);
-	gump.+pagelocs := array;
-	gump.+cur_page := 0;
-
 	gump.+layout	:= array;	// Main layout array for entire gump
 	gump.+data	:= array;	// Storage array for static-text and
 					// text-entry initialisation strings
@@ -777,26 +771,3 @@
 
 	return temp;
 endfunction
-
-/*
- * XGAddToLayout(gump, text)
- *
- * Purpose
- * Internal function for adding to the layout array
- * and checking for optimizations.
- *
- * Parameters
- * gump:	Gump to add content to
- * text:	String to place in the layout array.
- *
- * Return value
- * Returns 1
- *
- */
-function XGFAddToLayout(byref gump, text)
-	if ( !gump.optimize )
-		(gump.layout).Append(text);
-	else
-		(gump.layout).Insert(gump.pagelocs[gump.curpage]+1, text);
-	endif
-endfunction

Modified: trunk/096/pkg/utils/gumps/include/gumps_ex.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/gumps_ex.inc	2005-09-17 06:05:39 UTC (rev 145)
+++ trunk/096/pkg/utils/gumps/include/gumps_ex.inc	2005-09-17 09:35:39 UTC (rev 146)
@@ -110,6 +110,55 @@
 	return ret_val;
 endfunction
 
+/* 
+ * GFOptimizeGump(gump)
+ *
+ * Purpose
+ * Finds duplicate page number entries and combines their information.
+ *
+ * Parameters
+ * gump:	The gump to optimize
+ *
+ * Return value
+ * Returns 1
+ *
+ */
+function GFOptimizeGump_A(byref gump)
+	//Arrays cant do [0] for page 0
+	var cur_page := 0;
+	var gump_pages := dictionary;
+	gump_pages[0] := array;
+	
+	//Break the pages apart.
+	foreach entry in (gump.layout)
+		var l_entry := Lower(entry);
+		if ( l_entry[1, 5] == "page " )
+			var page_num := l_entry[6, Len(l_entry)];
+			if ( !gump_pages.Exists(page_num) )
+				gump_pages[page_num] := array;
+				cur_page := page_num;
+			else
+				cur_page := page_num;
+			endif
+		else
+			gump_pages[cur_page].Append(entry);
+		endif
+		sleepms(2);
+	endforeach
+	
+	//Put the gump back together again.
+	gump.layout := array; // Wipe it out
+	foreach page_array in (gump_pages)
+		foreach entry in (page_array)
+			(gump.layout).Append(entry);
+			sleepms(2);
+		endforeach
+		sleepms(2);
+	endforeach
+	
+	return 1;
+endfunction
+
 /*
  * GFTextCoords(type, gump_text, x_pos, width)
  *



From austin at berlios.de  Sat Sep 17 11:37:02 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 17 Sep 2005 11:37:02 +0200
Subject: [Poldistro-svn] r147 - trunk/096/pkg/utils/gumps/include
Message-ID: <200509170937.j8H9b2r3019834@sheep.berlios.de>

Author: austin
Date: 2005-09-17 11:37:02 +0200 (Sat, 17 Sep 2005)
New Revision: 147

Modified:
   trunk/096/pkg/utils/gumps/include/gumps_ex.inc
Log:


Modified: trunk/096/pkg/utils/gumps/include/gumps_ex.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/gumps_ex.inc	2005-09-17 09:35:39 UTC (rev 146)
+++ trunk/096/pkg/utils/gumps/include/gumps_ex.inc	2005-09-17 09:37:02 UTC (rev 147)
@@ -3,6 +3,11 @@
 * GUMPS_EX.INC - v0.2
 * include ":gumps:includes/gumps_ex";
 *
+* -- Revision v0.3 --
+* Austin
+* Added:
+*	GFOptimizeGump()
+*
 * -- Revision v0.2 --
 * Austin
 * Added:
@@ -32,6 +37,7 @@
 // * Function List *
 //
 // GFExtractData()
+// GFOptimizeGump()
 // GFTextCoords()
 // GFTextMid()
 // GFTextRight()



From austin at berlios.de  Sat Sep 17 11:38:30 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 17 Sep 2005 11:38:30 +0200
Subject: [Poldistro-svn] r148 - trunk/096/pkg/utils/gumps/include
Message-ID: <200509170938.j8H9cUlS019947@sheep.berlios.de>

Author: austin
Date: 2005-09-17 11:38:30 +0200 (Sat, 17 Sep 2005)
New Revision: 148

Modified:
   trunk/096/pkg/utils/gumps/include/gumps_ex.inc
Log:
Updated the header date and version... oh and I still havnt tested the optimize function! :-P

Modified: trunk/096/pkg/utils/gumps/include/gumps_ex.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/gumps_ex.inc	2005-09-17 09:37:02 UTC (rev 147)
+++ trunk/096/pkg/utils/gumps/include/gumps_ex.inc	2005-09-17 09:38:30 UTC (rev 148)
@@ -1,6 +1,7 @@
 /*===============================================================
 * Current Version
-* GUMPS_EX.INC - v0.2
+* GUMPS_EX.INC - v0.3
+* Updated 9/17/2005 2:38AM
 * include ":gumps:includes/gumps_ex";
 *
 * -- Revision v0.3 --



From austin at berlios.de  Sat Sep 17 11:39:56 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 17 Sep 2005 11:39:56 +0200
Subject: [Poldistro-svn] r149 - trunk/096/pkg/utils/gumps/include
Message-ID: <200509170939.j8H9dutj020177@sheep.berlios.de>

Author: austin
Date: 2005-09-17 11:39:56 +0200 (Sat, 17 Sep 2005)
New Revision: 149

Modified:
   trunk/096/pkg/utils/gumps/include/gumps_ex.inc
Log:


Modified: trunk/096/pkg/utils/gumps/include/gumps_ex.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/gumps_ex.inc	2005-09-17 09:38:30 UTC (rev 148)
+++ trunk/096/pkg/utils/gumps/include/gumps_ex.inc	2005-09-17 09:39:56 UTC (rev 149)
@@ -130,7 +130,7 @@
  * Returns 1
  *
  */
-function GFOptimizeGump_A(byref gump)
+function GFOptimizeGump(byref gump)
 	//Arrays cant do [0] for page 0
 	var cur_page := 0;
 	var gump_pages := dictionary;
@@ -247,6 +247,8 @@
  * Parameters
  * gump_text:	The text to get the pixel width of.
  *
+ * NOTE: This needs to be expanded to support fonts - and possibly be config driven?
+ *
  * Return value
  * The width, in pixels, of the text's width on a gump.
  *



From austin at berlios.de  Sat Sep 17 12:15:06 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 17 Sep 2005 12:15:06 +0200
Subject: [Poldistro-svn] r150 - trunk/096/pkg/utils/gumps/include
Message-ID: <200509171015.j8HAF6xQ021950@sheep.berlios.de>

Author: austin
Date: 2005-09-17 12:15:05 +0200 (Sat, 17 Sep 2005)
New Revision: 150

Modified:
   trunk/096/pkg/utils/gumps/include/gumps_ex.inc
Log:
Optimize funtion works.

Modified: trunk/096/pkg/utils/gumps/include/gumps_ex.inc
===================================================================
--- trunk/096/pkg/utils/gumps/include/gumps_ex.inc	2005-09-17 09:39:56 UTC (rev 149)
+++ trunk/096/pkg/utils/gumps/include/gumps_ex.inc	2005-09-17 10:15:05 UTC (rev 150)
@@ -146,10 +146,10 @@
 				cur_page := page_num;
 			else
 				cur_page := page_num;
+				continue;
 			endif
-		else
-			gump_pages[cur_page].Append(entry);
 		endif
+		gump_pages[cur_page].Append(entry);
 		sleepms(2);
 	endforeach
 	



From austin at berlios.de  Sat Sep 17 12:16:36 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 17 Sep 2005 12:16:36 +0200
Subject: [Poldistro-svn] r151 - trunk/096/pkg/mobiles/ai_brain/commands/gm
Message-ID: <200509171016.j8HAGZvX021999@sheep.berlios.de>

Author: austin
Date: 2005-09-17 12:16:35 +0200 (Sat, 17 Sep 2005)
New Revision: 151

Modified:
   trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src	2005-09-17 10:15:05 UTC (rev 150)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src	2005-09-17 10:16:35 UTC (rev 151)
@@ -50,7 +50,7 @@
 	endif
 		
 	var category_names := GetCategoryNames();
-	input := GFSendGump(who, BuildNPCGump(category_names[input[0]]));
+	input := GFSendGump(who, RetrieveGump(category_names[input[0]]));
 	if ( !input )
 		SendSysMessage(who, "Cancelled");
 		return 0;
@@ -68,7 +68,6 @@
 		if ( !gump )
 			gump := BuildIndexGump();
 		endif
-		
 		return gump;
 	else
 		var data_elem := DFFindElement(g_datafile, category_name);
@@ -76,7 +75,6 @@
 		if ( !gump )
 			gump := BuildNPCGump(category_name);
 		endif
-		
 		return gump;
 	endif
 endfunction



From austin at berlios.de  Sat Sep 17 12:19:33 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 17 Sep 2005 12:19:33 +0200
Subject: [Poldistro-svn] r152 - trunk/096/pkg/commands/coun
Message-ID: <200509171019.j8HAJXiS022231@sheep.berlios.de>

Author: austin
Date: 2005-09-17 12:19:33 +0200 (Sat, 17 Sep 2005)
New Revision: 152

Removed:
   trunk/096/pkg/commands/coun/msg.src
Log:
Rewriting and moving to player level.

Deleted: trunk/096/pkg/commands/coun/msg.src
===================================================================
--- trunk/096/pkg/commands/coun/msg.src	2005-09-17 10:16:35 UTC (rev 151)
+++ trunk/096/pkg/commands/coun/msg.src	2005-09-17 10:19:33 UTC (rev 152)
@@ -1,119 +0,0 @@
-//////////////////////////////////////
-// goto.src -- go to an online player
-//
-// Usage: .goto [playername]
-//        if playername is not given,
-//        a menu will open and prompt
-//        you to choose one.
-//
-// Author: Racalac
-//////////////////////////////////////
-
-use uo;
-
-var playercount := 0;
-var pagecount := 1;
-
-var layout := array(
-
-"page 0",
-"gumppic 0 50 2620",
-"gumppic 20 50 2621",
-"gumppic 290 50 2622",
-"gumppic 0 68 2623",
-"gumppic 22 68 2624",
-"gumppic 288 68 2625",
-"gumppic 0 272 2623",
-"gumppic 22 272 2624",
-"gumppic 288 272 2625",
-"gumppic 0 476 2626",
-"gumppic 20 476 2627",
-"gumppic 290 476 2628",
-"gumppic 20 80 2621",
-
-"text 20 59 40 0",
-"text 260 59 40 1"
-);
-
-var data := array(
-       "Player Name",         //0
-       "Message"
-);
-
-program textcmd_goto( character, whom )
-  if(!whom)
-    FillInArrays();
-    var result := SendDialogGump( character, layout, data );
-    var name := data[result[0]+2];
-    foreach onlinechr in EnumerateOnlineCharacters()
-        if (onlinechr.name == name)
-            SendTheMessage(character, onlinechr);
-            break;
-        endif
-    endforeach
-  else
-    whom := upper(whom);
-    foreach onlinechr in EnumerateOnlineCharacters()
-        if (upper(onlinechr.name) == whom)
-             SendTheMessage(character, onlinechr);
-            break;
-        endif
-    endforeach
-  endif
-endprogram
-
-function FillInArrays()
-    var players := EnumerateOnlineCharacters();
-    var datalen;
-    var layoutlen;
-    var prev_y := CInt(80);
-    var datindx;
-    var buttonret := 1;
-    layout[GetLayoutLength()+1] := "page " + pagecount;
-    if( len(EnumerateOnlineCharacters()) > 19)
-        layout[GetLayoutLength()+1] := "button 285 465 2648 2647 0 " + (pagecount + 1);
-    endif
-    foreach player in players
-        if (!player.concealed)
-        playercount := playercount + 1;
-        datalen := GetDataLength();
-        layoutlen := GetLayoutLength();
-        datindx := datalen+1;
-        data[datindx] := player.name;
-        if( playercount == 20 || playercount == 39 || playercount == 58 || playercount == 77 || playercount == 96)
-            pagecount := pagecount + 1;
-            layout[GetLayoutLength()+1] := "page " + pagecount;
-            prev_y := 80;
-            layout[GetLayoutLength()+1] := "button 285 85 2650 2651 0 " + (pagecount - 1);
-            if( len(EnumerateOnlineCharacters()) > playercount + 19)
-                layout[GetLayoutLength()+1] := "button 285 465 2648 2647 0 " + (pagecount + 1);
-            endif
-        endif
-        layout[GetLayoutLength()+1] := ("text 20 " + CStr(prev_y + 20) + " 40 " + datalen);
-        layout[GetLayoutLength()+1] := ("button 260 " + CStr(prev_y + 20) + " 2640 2641 1 0 " + buttonret);
-        prev_y := prev_y + 20;
-        buttonret := buttonret + 1;
-        endif
-    endforeach
-endfunction
-
-function GetLayoutLength();
-    return (len(layout));
-endfunction
-
-function GetDataLength();
-    return (len(data));
-endfunction
-
-function SendTheMessage(who, whom)
-var themessage := RequestInput(who, who.backpack, "What message would you like to send to " + whom.name + "?");
-if (!themessage)
-        return;
-endif
-SendSysMessage(whom, who.name + " : " + themessage);
-	foreach char in EnumerateOnlineCharacters()
-		if ( (char.cmdlevel == 5) && (GetObjProperty(char, "HearMsgs") ) )
-			SendSysMessage( char, "Msg from " + who.name + " to " + whom.name + ": " + themessage);
-		endif
-	endforeach
-endfunction



From austin at berlios.de  Sat Sep 17 13:51:54 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 17 Sep 2005 13:51:54 +0200
Subject: [Poldistro-svn] r153 - trunk/096/pkg/commands/player
Message-ID: <200509171151.j8HBpsWB011568@sheep.berlios.de>

Author: austin
Date: 2005-09-17 13:51:54 +0200 (Sat, 17 Sep 2005)
New Revision: 153

Added:
   trunk/096/pkg/commands/player/msg.src
Log:


Added: trunk/096/pkg/commands/player/msg.src
===================================================================
--- trunk/096/pkg/commands/player/msg.src	2005-09-17 10:19:33 UTC (rev 152)
+++ trunk/096/pkg/commands/player/msg.src	2005-09-17 11:51:54 UTC (rev 153)
@@ -0,0 +1,212 @@
+/*===============================================================
+* Current Version
+* MSG.SRC - v0.1
+* Updated 9/17/2005 3:20AM
+*
+* -- Revision v0.1 --
+* Austin
+*  Created command
+*
+===============================================================*/
+
+use uo;
+use os;
+use util;
+
+include ":gumps:include/gumps";
+include ":gumps:include/gumps_ex";
+include ":datafile:datafile";
+
+unload_scripts("");
+
+program command_Message(who, text)
+	if ( CommandIssued(who, text) )
+		return 1;
+	else
+		MessageGump(who);
+	endif
+endprogram
+
+function MessageGump(who)
+	var gump := GFCreateGump();
+	
+	GFResizePic(gump, 0, 0, GFCfgConst("Defaults", "BackGround"), 310, 420);
+	GFResizePic(gump, 10, 10, GFCfgConst("Defaults", "ForeGround"), 290, 400);
+	
+	GFTextLine(gump, 25, 15, 2100, "Player Name");
+	GFTextLine(gump, 255, 15, 2100, "Send");
+	
+	var names_list := GetNamesList(who);
+	var num_players := names_list.size();
+	var counter := 0;
+	var page_num := 1;
+	var y_pos := 40;
+	
+	GFPage(gump, 1);
+	foreach name in (names_list.keys())
+		GFTextLine(gump, 25, y_pos, 2100, name);
+		GFAddButton(gump, 261, y_pos+3, 2117, 2118, GF_CLOSE_BTN, _name_iter);
+
+		y_pos := y_pos+20;
+		counter := counter+1;
+
+		if ( counter >= 18 && _name_iter < num_players )
+			GFAddButton(gump, 283, 385, 0xA92, 0xA93, GF_PAGE_BTN, page_num+1);
+			page_num := page_num+1;
+			GFPage(gump, page_num);
+			GFAddButton(gump, 283, 40, 0xA90, 0xA91, GF_PAGE_BTN, page_num-1);
+			counter := 0;
+			y_pos := 40;
+		endif
+		sleepms(2);
+	endforeach
+	
+	var input := GFSendGump(who, gump);
+	input := input[0];
+	
+	if ( !input )
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	else
+		names_list := names_list.keys();
+		SendMessage(who, names_list[input]);
+	endif
+endfunction
+
+function GetNamesList(who)
+	var the_list := dictionary; // Used to store names in ABC order
+	foreach person in EnumerateOnlineCharacters();
+		var msg_settings := GetMessageSettings(person);
+
+		if ( (msg_settings.disable) && (!who.cmdlevel) )
+			//If messages are off, and 'who' is a player, dont add the name.
+			//If 'who' has a command level, then he/she can see any name.
+			continue;
+		elseif ( (!msg_settings.visible) && (person.concealed > who.cmdlevel) );
+			//If the person is not in visible mode, and concealed is
+			//higher than who's command level, don't add that person.
+			continue;
+		else
+			the_list.Insert(person.name, 0);
+		endif
+		
+		sleepms(2);
+	endforeach
+	
+	var i:=0;
+	for ( i:=0; i<=100; i:=i+1 )
+		var filler := "Z"+RandomFloat(50000);
+		the_list.Insert(filler, 0);
+		sleepms(2);
+	endfor
+
+	return the_list;
+endfunction
+
+function SendMessage(who, name_text, is_reply:=0)
+	var can_msg := 0;
+	if ( is_reply )
+		can_msg := 1;
+	elseif ( name_text in (GetNamesList(who).keys()) )
+		can_msg := 1;
+	endif
+	
+	if ( !can_msg )
+		SendSysMessage(who, name_text+" is not online.");
+		return 0;
+	endif
+	
+	var message_txt := RequestInput(who, who.backpack, "What message would you like to send to "+name_text+"? (hit escape to cancel)");
+	if ( !message_txt )
+		SendSysMessage(who, "Cancelled.");
+		return 0;
+	endif
+	
+	var sndr_settings := GetMessageSettings(who);
+	sndr_settings["last"] := name_text;
+	SetObjProperty(who, ".msg", sndr_settings);
+	
+	foreach player in EnumerateOnlineCharacters()
+		if ( player.name == name_text )
+			SendSysMessage(player, "Message from "+who.name+" : "+message_txt);
+			SendSysMessage(who, "You sent a message to ["+who.name+"]: "+message_txt);
+
+			var rcvr_settings := GetMessageSettings(player);
+			rcvr_settings["reply"] := who.name;
+			SetObjProperty(player, ".msg", rcvr_settings);
+
+			if( sndr_settings.Exists("disabled") )
+				SendSysMessage(who, "Reminder: You have messages off.");
+				SendSysMessage(player, "Note: "+who.name+" has messages off. Use .msg reply.");
+			endif
+		elseif ( player.cmdlevel )
+			var rcvr_settings := GetMessageSettings(player);
+			if ( rcvr_settings.Exists("spy") )
+				SendSysMessage(player, "[MSG SpyMode] From:"+who.name+" To:"+name_text+": "+message_txt);
+			endif
+		endif
+		
+		sleepms(2);
+	endforeach		
+endfunction
+
+function CommandIssued(who, text)
+	var msg_settings := GetMessageSettings(who);
+	
+	if ( text == "off" )
+		msg_settings["disabled"] := 1;
+		SetObjProperty(who, ".msg", msg_settings);
+		SendSysMessage(who, "Your name has been removed from the .msg list.");
+		return 1;
+	elseif ( text == "on" )
+		msg_settings.Erase("disabled");
+		SetObjProperty(who, ".msg", msg_settings);
+		SendSysMessage(who, "Your name has been put back on from the .msg list.");
+		return 1;
+	elseif ( text == "reply" )
+		SendMessage(who, msg_settings["reply"], 1);
+		return 1;
+	elseif ( text == "last" )
+		SendMessage(who, msg_settings["last"], 1);
+		return 1;
+	elseif ( text )
+		SendMessage(who, text);
+		return 1;
+	endif
+	
+	if ( !who.cmdlevel )
+		return 0;
+	elseif ( text == "spy on" )
+		msg_settings["spy"] := 1;
+		SendSysMessage(who, "Private message viewing is enabled.");
+		SetObjProperty(who, ".msg", msg_settings);
+		return 1;
+	elseif ( text == "spy off" )
+		msg_settings.Erase("spy");
+		SendSysMessage(who, "Private message viewing is disabled.");
+		SetObjProperty(who, ".msg", msg_settings);
+		return 1;
+	elseif ( text == "visible on" )
+		msg_settings["visible"] := 1;
+		msg_settings.Erase("visible");
+		SendSysMessage(who, "Players can now message you while concealed.");
+		SetObjProperty(who, ".msg", msg_settings);
+		return 1;
+	elseif ( text == "visible off" )
+		msg_settings.Erase("visible");
+		SendSysMessage(who, "Players can no longer message you while concealed.");
+		SetObjProperty(who, ".msg", msg_settings);
+		return 1;
+	else
+		return 0;
+	endif
+endfunction
+
+function GetMessageSettings(mobile)
+	var msg_settings := GetObjProperty(mobile, ".msg");
+	if ( Lower(TypeOf(msg_settings)) != "dictionary"  )
+		msg_settings := dictionary;
+	endif
+	
+	return msg_settings;
+endfunction
\ No newline at end of file



From austin at berlios.de  Sat Sep 17 13:52:40 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 17 Sep 2005 13:52:40 +0200
Subject: [Poldistro-svn] r154 - trunk/096/pkg/commands/player
Message-ID: <200509171152.j8HBqeak011647@sheep.berlios.de>

Author: austin
Date: 2005-09-17 13:52:40 +0200 (Sat, 17 Sep 2005)
New Revision: 154

Modified:
   trunk/096/pkg/commands/player/msg.src
Log:
New message command. Uses new gump system.
Has some nifty stuff in it, I felt like adding :-P

Modified: trunk/096/pkg/commands/player/msg.src
===================================================================
--- trunk/096/pkg/commands/player/msg.src	2005-09-17 11:51:54 UTC (rev 153)
+++ trunk/096/pkg/commands/player/msg.src	2005-09-17 11:52:40 UTC (rev 154)
@@ -139,7 +139,7 @@
 				SendSysMessage(who, "Reminder: You have messages off.");
 				SendSysMessage(player, "Note: "+who.name+" has messages off. Use .msg reply.");
 			endif
-		elseif ( player.cmdlevel )
+		elseif ( player.cmdlevel < who.cmdlevel )
 			var rcvr_settings := GetMessageSettings(player);
 			if ( rcvr_settings.Exists("spy") )
 				SendSysMessage(player, "[MSG SpyMode] From:"+who.name+" To:"+name_text+": "+message_txt);



From austin at berlios.de  Sat Sep 17 13:53:29 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 17 Sep 2005 13:53:29 +0200
Subject: [Poldistro-svn] r155 - trunk/096/pkg/commands/player
Message-ID: <200509171153.j8HBrTsR011695@sheep.berlios.de>

Author: austin
Date: 2005-09-17 13:53:29 +0200 (Sat, 17 Sep 2005)
New Revision: 155

Modified:
   trunk/096/pkg/commands/player/msg.src
Log:
New message command. Uses the new gumps system. Also has some other nifty stuff I felt like adding :-P

Modified: trunk/096/pkg/commands/player/msg.src
===================================================================
--- trunk/096/pkg/commands/player/msg.src	2005-09-17 11:52:40 UTC (rev 154)
+++ trunk/096/pkg/commands/player/msg.src	2005-09-17 11:53:29 UTC (rev 155)
@@ -93,13 +93,6 @@
 		sleepms(2);
 	endforeach
 	
-	var i:=0;
-	for ( i:=0; i<=100; i:=i+1 )
-		var filler := "Z"+RandomFloat(50000);
-		the_list.Insert(filler, 0);
-		sleepms(2);
-	endfor
-
 	return the_list;
 endfunction
 



From austin at berlios.de  Sat Sep 17 14:05:18 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 17 Sep 2005 14:05:18 +0200
Subject: [Poldistro-svn] r156 - trunk/096/pkg/utils/datafile/include
Message-ID: <200509171205.j8HC5I1P012499@sheep.berlios.de>

Author: austin
Date: 2005-09-17 14:05:18 +0200 (Sat, 17 Sep 2005)
New Revision: 156

Modified:
   trunk/096/pkg/utils/datafile/include/datafile.inc
Log:
Updated error format to error{"errortext":="xxx"} 

Modified: trunk/096/pkg/utils/datafile/include/datafile.inc
===================================================================
--- trunk/096/pkg/utils/datafile/include/datafile.inc	2005-09-17 11:53:29 UTC (rev 155)
+++ trunk/096/pkg/utils/datafile/include/datafile.inc	2005-09-17 12:05:18 UTC (rev 156)
@@ -7,6 +7,8 @@
 /*===============================================================
 * Current Version
 * DATAFILE.INC - v2.0
+* Updated 9/17/2005 5:04AM
+*
 * include ":datafile:include/datafile";
 *
 * -- Revision v2.0 --
@@ -86,7 +88,7 @@
 function DFOpenDataFile(file_name, create:=DF_NO_CREATE, flags:=DF_KEYTYPE_STRING)
 	var data_file := OpenDataFile(file_name);
 	if ( (!data_file) && (create) )
-		DF_OutPut("Creating data file: " + file_name);
+		DF_OutPut("Debug::DFOpenDataFile() - Creating data file: "+file_name);
 		CreateDataFile(file_name, flags);
 		data_file := OpenDataFile(file_name);
 	endif
@@ -94,8 +96,7 @@
 	if ( data_file )
 		return data_file;
 	elseif ( create )
-		var errmsg := error;
-		errmsg.+errortext := "Could not open " + file_name + ":" + data_file.errortext;
+		var errmsg := error{"errortext":="Error::DFOpenDataFile() - Could not open "+file_name+" : "+data_file.errortext};
 		DF_OutPut(errmsg.errortext);
 		return errmsg;
 	endif
@@ -117,8 +118,7 @@
 function DFGetElemNames(byref file_ref)
 	var elem_keys := file_ref.keys();
 	if ( elem_keys == error )
-		var errmsg := error;
-		errmsg.+errortext := "Could not return elem keys :"+elem_keys.errortext;
+		var errmsg := error{"errortext":="Error::DFGetElemNames() - Could not return elem keys :"+elem_keys.errortext};
 		DF_OutPut(errmsg.errortext);
 		return errmsg;
 	else
@@ -144,18 +144,17 @@
  *
  */
 function DFFindElement(byref file_ref, elem_name, create:=DF_NO_CREATE)
-	var temp := file_ref.FindElement( cstr(elem_name) );
-	if (!temp && create)
-		DF_OutPut("Creating elem: " +  cstr(elem_name) );
-		file_ref.CreateElement( cstr(elem_name) );
-		temp := file_ref.FindElement( cstr(elem_name) );
+	var temp := file_ref.FindElement(CStr(elem_name));
+	if ( !temp && create )
+		DF_OutPut("Debug::DFFindElement() - Creating elem: "+CStr(elem_name));
+		file_ref.CreateElement(CStr(elem_name));
+		temp := file_ref.FindElement(CStr(elem_name));
 	endif
 
 	if ( temp )
 		return temp;
 	elseif (create)
-		var errmsg := error;
-		errmsg.+errortext := "Could not open data elem " + elem_name + ":" + temp.errortext;
+		var errmsg := error{"errortext":="Error::DFFindElement() - Could not open data elem ["+elem_name+"] - "+temp.errortext};
 		DF_OutPut(errmsg.errortext);
 		return errmsg;
 	endif
@@ -177,8 +176,7 @@
 function DFGetElemProps(elem_ref)
 	var prop_names := elem_ref.PropNames();
 	if ( prop_names == error )
-		var errmsg := error;
-		errmsg.+errortext := "Could not return prop names :"+prop_names.errortext;
+		var errmsg := error{"errortext":="Error::DFGetElemProps() - Could not return prop names :"+prop_names.errortext};
 		DF_OutPut(errmsg.errortext);
 		return errmsg;
 	else
@@ -217,9 +215,8 @@
 		// what ever you get. Used for cases where the
 		// value is '0' but not an error.
 		return temp;
-	elseif (create)
-		var errmsg := error;
-		errmsg.+errortext := "Could not read data file property " + prop_name + ":" + temp.errortext;
+	elseif ( create )
+		var errmsg := error{"errortext":="Error::DFGetProp() - Could not read data file property "+prop_name+":"+temp.errortext};
 		DF_OutPut(errmsg.errortext);
 		return errmsg;
 	endif
@@ -245,12 +242,11 @@
 //
 */
 function DFToCfg(df_name, cfg_name)
-	if ( lower(TypeOf(df_name))["string"] )
+	if ( Lower(TypeOf(df_name))["string"] )
 		df_name := DFOpenDataFile(df_name, DF_CREATE);
 	endif
-	if ( lower(TypeOf(cfg_name)) != "string" )
-		var errmsg := error;
-		errmsg.+errortext := "DFToCfg() cfg_name parameter passed was not a string.";
+	if ( Lower(TypeOf(cfg_name)) != "string" )
+		var errmsg := error{"errortext":="Error::DFToCfg() - cfg_name parameter passed was not a string."};
 		DF_OutPut(errmsg.errortext);
 		return errmsg;
 	endif
@@ -298,15 +294,14 @@
 */
 function CfgToDF(cfg_name, df_name, propnames)
 	if ( propnames.size() < 1 )
-		var errmsg := error;
-		errmsg.+errortext := "CfgToDF() Size of linenames array is < 0";
+		var errmsg := error{"errortext":="Error::CfgToDF() - Size of propnames array is < 0"};
 		DF_OutPut(errmsg.errortext);
 		return errmsg;
 	endif
-	if ( lower(TypeOf(cfg_name))["string"] )
+	if ( Lower(TypeOf(cfg_name))["string"] )
 		cfg_name := ReadConfigFile(cfg_name);
 	endif
-	if ( lower(TypeOf(df_name))["string"] )
+	if ( Lower(TypeOf(df_name))["string"] )
 		df_name := DFOpenDataFile(df_name, DF_CREATE);
 	endif
 
@@ -322,6 +317,7 @@
 				prop_value := array;
 				foreach line in GetConfigStringArray(elem, prop_name)
 					prop_value.Append(line);
+					sleepms(2);
 				endforeach
 			else
 				prop_value := entries[1];



From austin at berlios.de  Sun Sep 18 02:39:00 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 18 Sep 2005 02:39:00 +0200
Subject: [Poldistro-svn] r157 - trunk/096/pkg/commands/player
Message-ID: <200509180039.j8I0d02w030753@sheep.berlios.de>

Author: austin
Date: 2005-09-18 02:38:55 +0200 (Sun, 18 Sep 2005)
New Revision: 157

Modified:
   trunk/096/pkg/commands/player/msg.src
Log:


Modified: trunk/096/pkg/commands/player/msg.src
===================================================================
--- trunk/096/pkg/commands/player/msg.src	2005-09-17 12:05:18 UTC (rev 156)
+++ trunk/096/pkg/commands/player/msg.src	2005-09-18 00:38:55 UTC (rev 157)
@@ -17,8 +17,6 @@
 include ":gumps:include/gumps_ex";
 include ":datafile:datafile";
 
-unload_scripts("");
-
 program command_Message(who, text)
 	if ( CommandIssued(who, text) )
 		return 1;
@@ -87,7 +85,7 @@
 			//higher than who's command level, don't add that person.
 			continue;
 		else
-			the_list.Insert(person.name, 0);
+			the_list.Insert(person.name, person.serial);
 		endif
 		
 		sleepms(2);



From austin at berlios.de  Sun Sep 18 03:13:59 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 18 Sep 2005 03:13:59 +0200
Subject: [Poldistro-svn] r158 - in trunk/096/pkg/systems/attributes: . config
Message-ID: <200509180113.j8I1Dxcn003590@sheep.berlios.de>

Author: austin
Date: 2005-09-18 03:13:57 +0200 (Sun, 18 Sep 2005)
New Revision: 158

Added:
   trunk/096/pkg/systems/attributes/attributes.cfg
   trunk/096/pkg/systems/attributes/uoclient.cfg
   trunk/096/pkg/systems/attributes/uoskills.cfg
   trunk/096/pkg/systems/attributes/vitals.cfg
Removed:
   trunk/096/pkg/systems/attributes/config/attributes.cfg
   trunk/096/pkg/systems/attributes/config/uoclient.cfg
   trunk/096/pkg/systems/attributes/config/uoskills.cfg
   trunk/096/pkg/systems/attributes/config/vitals.cfg
Log:
Core wont read core-required files from /package/config until 097 so I moved them to the package root. 

Added: trunk/096/pkg/systems/attributes/attributes.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-18 00:38:55 UTC (rev 157)
+++ trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-18 01:13:57 UTC (rev 158)
@@ -0,0 +1,260 @@
+# $Id: attributes.cfg,v 1.1 2004/03/16 14:05:46 folko Exp $
+#
+# Purpose:
+# Defines Attribute names and aliases
+#
+# Structure:
+# Attribute (Attribute_Name)
+# {
+#    [Alias                      (Alias_Name)]...
+#    [GetIntrinsicModFunction    (script_name:exported_func_name)]
+# }
+#
+# Explanation
+# Attribute_Name defines the UNIQUE name for this attribute, like 'Cooking', 'Tactics', 'Strength', etc.
+# Aliases are optional and any number maybe be assigned for each attribute.
+# This way 'STR' may be used in place of 'Strength'.
+# At the LEAST, these attributes must be defined:
+# 'Strength', 'Intelligence', 'Dexterity', 'Parry', and 'Tactics' for use in internal calculations.
+# GetIntrinsicModFunction returns a value between -30000 and +30000 that is added to the
+# Attribute "base" value to obtain the "effective" value for the attribute.
+# The function is called when UO.EM RecalVitals is called.
+
+// Custom Attributes
+
+Attribute HitsRegeneration
+{
+}
+
+Attribute ManaRegeneration
+{
+}
+
+Attribute StaminaRegeneration
+{
+}
+
+// Basic Stats
+
+Attribute Strength
+{
+}
+
+Attribute Intelligence
+{
+}
+
+Attribute Dexterity
+{
+}
+
+// Basic Skills
+
+Attribute Alchemy
+{
+}
+
+Attribute Anatomy
+{
+}
+
+Attribute AnimalLore
+{
+}
+
+Attribute ItemIdentification
+{
+}
+
+Attribute ArmsLore
+{
+}
+
+Attribute Parrying
+{
+    Alias       Parry
+}
+
+Attribute Begging
+{
+}
+
+Attribute Blacksmithy
+{
+}
+
+Attribute BowcraftFletching
+{
+}
+
+Attribute Peacemaking
+{
+}
+
+Attribute Camping
+{
+}
+
+Attribute Carpentry
+{
+}
+
+Attribute Cartography
+{
+}
+
+Attribute Cooking
+{
+}
+
+Attribute DetectingHidden
+{
+}
+
+Attribute Discordance
+{
+}
+
+Attribute EvaluatingIntelligence
+{
+}
+
+Attribute Healing
+{
+}
+
+Attribute Fishing
+{
+}
+
+Attribute ForensicEvaluation
+{
+}
+
+Attribute Herding
+{
+}
+
+Attribute Hiding
+{
+}
+
+Attribute Provocation
+{
+}
+
+Attribute Inscription
+{
+}
+
+Attribute Lockpicking
+{
+}
+
+Attribute Magery
+{
+}
+
+Attribute ResistingSpells
+{
+}
+
+Attribute Tactics
+{
+}
+
+Attribute Snooping
+{
+}
+
+Attribute Musicianship
+{
+}
+
+Attribute Poisoning
+{
+}
+
+Attribute Archery
+{
+}
+
+Attribute SpiritSpeak
+{
+}
+
+Attribute Stealing
+{
+}
+
+Attribute Tailoring
+{
+}
+
+Attribute AnimalTaming
+{
+}
+
+Attribute TasteIdentification
+{
+}
+
+Attribute Tinkering
+{
+}
+
+Attribute Tracking
+{
+}
+
+Attribute Veterinary
+{
+}
+
+Attribute Swordsmanship
+{
+}
+
+Attribute MaceFighting
+{
+}
+
+Attribute Fencing
+{
+}
+
+Attribute Wrestling
+{
+}
+
+Attribute Lumberjacking
+{
+}
+
+Attribute Mining
+{
+}
+
+Attribute Meditation
+{
+}
+
+Attribute Stealth
+{
+}
+
+Attribute RemoveTrap
+{
+}
+
+Attribute Necromancy
+{
+}
+
+Attribute BattleFocus
+{
+}
+
+Attribute Chivalry
+{
+}

Deleted: trunk/096/pkg/systems/attributes/config/attributes.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/attributes.cfg	2005-09-18 00:38:55 UTC (rev 157)
+++ trunk/096/pkg/systems/attributes/config/attributes.cfg	2005-09-18 01:13:57 UTC (rev 158)
@@ -1,260 +0,0 @@
-# $Id: attributes.cfg,v 1.1 2004/03/16 14:05:46 folko Exp $
-#
-# Purpose:
-# Defines Attribute names and aliases
-#
-# Structure:
-# Attribute (Attribute_Name)
-# {
-#    [Alias                      (Alias_Name)]...
-#    [GetIntrinsicModFunction    (script_name:exported_func_name)]
-# }
-#
-# Explanation
-# Attribute_Name defines the UNIQUE name for this attribute, like 'Cooking', 'Tactics', 'Strength', etc.
-# Aliases are optional and any number maybe be assigned for each attribute.
-# This way 'STR' may be used in place of 'Strength'.
-# At the LEAST, these attributes must be defined:
-# 'Strength', 'Intelligence', 'Dexterity', 'Parry', and 'Tactics' for use in internal calculations.
-# GetIntrinsicModFunction returns a value between -30000 and +30000 that is added to the
-# Attribute "base" value to obtain the "effective" value for the attribute.
-# The function is called when UO.EM RecalVitals is called.
-
-// Custom Attributes
-
-Attribute HitsRegeneration
-{
-}
-
-Attribute ManaRegeneration
-{
-}
-
-Attribute StaminaRegeneration
-{
-}
-
-// Basic Stats
-
-Attribute Strength
-{
-}
-
-Attribute Intelligence
-{
-}
-
-Attribute Dexterity
-{
-}
-
-// Basic Skills
-
-Attribute Alchemy
-{
-}
-
-Attribute Anatomy
-{
-}
-
-Attribute AnimalLore
-{
-}
-
-Attribute ItemIdentification
-{
-}
-
-Attribute ArmsLore
-{
-}
-
-Attribute Parrying
-{
-    Alias       Parry
-}
-
-Attribute Begging
-{
-}
-
-Attribute Blacksmithy
-{
-}
-
-Attribute BowcraftFletching
-{
-}
-
-Attribute Peacemaking
-{
-}
-
-Attribute Camping
-{
-}
-
-Attribute Carpentry
-{
-}
-
-Attribute Cartography
-{
-}
-
-Attribute Cooking
-{
-}
-
-Attribute DetectingHidden
-{
-}
-
-Attribute Discordance
-{
-}
-
-Attribute EvaluatingIntelligence
-{
-}
-
-Attribute Healing
-{
-}
-
-Attribute Fishing
-{
-}
-
-Attribute ForensicEvaluation
-{
-}
-
-Attribute Herding
-{
-}
-
-Attribute Hiding
-{
-}
-
-Attribute Provocation
-{
-}
-
-Attribute Inscription
-{
-}
-
-Attribute Lockpicking
-{
-}
-
-Attribute Magery
-{
-}
-
-Attribute ResistingSpells
-{
-}
-
-Attribute Tactics
-{
-}
-
-Attribute Snooping
-{
-}
-
-Attribute Musicianship
-{
-}
-
-Attribute Poisoning
-{
-}
-
-Attribute Archery
-{
-}
-
-Attribute SpiritSpeak
-{
-}
-
-Attribute Stealing
-{
-}
-
-Attribute Tailoring
-{
-}
-
-Attribute AnimalTaming
-{
-}
-
-Attribute TasteIdentification
-{
-}
-
-Attribute Tinkering
-{
-}
-
-Attribute Tracking
-{
-}
-
-Attribute Veterinary
-{
-}
-
-Attribute Swordsmanship
-{
-}
-
-Attribute MaceFighting
-{
-}
-
-Attribute Fencing
-{
-}
-
-Attribute Wrestling
-{
-}
-
-Attribute Lumberjacking
-{
-}
-
-Attribute Mining
-{
-}
-
-Attribute Meditation
-{
-}
-
-Attribute Stealth
-{
-}
-
-Attribute RemoveTrap
-{
-}
-
-Attribute Necromancy
-{
-}
-
-Attribute BattleFocus
-{
-}
-
-Attribute Chivalry
-{
-}

Deleted: trunk/096/pkg/systems/attributes/config/uoclient.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/uoclient.cfg	2005-09-18 00:38:55 UTC (rev 157)
+++ trunk/096/pkg/systems/attributes/config/uoclient.cfg	2005-09-18 01:13:57 UTC (rev 158)
@@ -1,63 +0,0 @@
-# $$
-#
-# Purpose:
-# Maps vital and attribute names onto UO Client idioms for character status.
-#
-# Structure:
-# General
-# {
-#   Strength        (string Strength)
-#   Intelligence    (string Intelligence)
-#   Dexterity       (string Dexterity)
-#
-#   Hits            (string Life)
-#   Mana            (string Mana)
-#   Stamina         (string Stamina)
-#   MaxSkillID      (integer maximum UO client skill ID)
-# }
-#
-# Protocol
-# {
-#   # EnableFlowControlPackets: use the 0x33 (0x00 / 0x01) pause/restart packets.
-#   # Though OSI seems to no longer send these packets, they seem to help with smoothness,
-#   # particularly with boat movement.
-#   # NOTE: causes clients 4.0.0e and newer to fail login
-#   EnableFlowControlPackets    1
-# }
-#
-# Listener
-# {
-#   Port (int port number 1024..65535)
-#   Encryption (string encryption type)
-# }
-#
-# Explanation:
-# The left-hand-side "Strength", "Intelligence", and "Dexterity" are Attribute names that
-# MUST be defined in attributes.cfg.
-# The right-hand-side "Life", "Mana", and "Stamina" are Vital names that
-# MUST be defined in vitals.cfg.
-# MaxSkillID allows you to use new client skills, but setting it too high can crash older clients.
-# You must define skills.cfg entries for each skillID up to MaxSkillID (default 51).
-# The Protocol and Listener sections are optional.
-# Each Listener section allows you to listen for different client encryption types on different ports.
-# This means you can listen for "1.26.4" clients on port 5003 and "ignition" clients on port 5555.
-# Valid encryption types are found in the pol.cfg section. If you use Listeners set ListenPort
-# in pol.cfg to 0.
-
-General
-{
-	Strength       Strength
-	Intelligence   Intelligence
-	Dexterity      Dexterity
-
-	Hits           Hits
-	Mana           Mana
-	Stamina        Stamina
-
-	MaxSkillID     51
-}
-
-Protocol
-{
-	EnableFlowControlPackets 0
-}

Deleted: trunk/096/pkg/systems/attributes/config/uoskills.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/uoskills.cfg	2005-09-18 00:38:55 UTC (rev 157)
+++ trunk/096/pkg/systems/attributes/config/uoskills.cfg	2005-09-18 01:13:57 UTC (rev 158)
@@ -1,277 +0,0 @@
-# $Id: uoskills.cfg,v 1.1 2004/03/16 14:05:46 folko Exp $
-#
-# Purpose:
-# Maps Attribute names onto the UO Skill ID numbers.
-#
-# Structure:
-# Skill (SkillID)
-# {
-#   Attribute   (Attribute_name)
-# }
-# Additional entries required up to maximum UO skill id
-#
-# Explanation:
-# Attribute_name defines the Attribute associated with this UO Skill.
-# Only one attribute may be mapped to a skill id. Attribute_name must be found in attributes.cfg!
-# SkillID must be an integer between 0 and 500, though any entries past the maximum UO skill id
-# will not be sent to the UO client.
-
-Skill 0
-{
-	Attribute Alchemy
-}
-
-Skill 1
-{
-	Attribute Anatomy
-}
-
-Skill 2
-{
-	Attribute AnimalLore
-}
-
-Skill 3
-{
-	Attribute ItemIdentification
-}
-
-Skill 4
-{
-	Attribute ArmsLore
-}
-
-Skill 5
-{
-	Attribute Parrying
-}
-
-Skill 6
-{
-	Attribute Begging
-}
-
-Skill 7
-{
-	Attribute Blacksmithy
-}
-
-Skill 8
-{
-	Attribute BowcraftFletching
-}
-
-Skill 9
-{
-	Attribute Peacemaking
-}
-
-Skill 10
-{
-	Attribute Camping
-}
-
-Skill 11
-{
-	Attribute Carpentry
-}
-
-Skill 12
-{
-	Attribute Cartography
-}
-
-Skill 13
-{
-	Attribute Cooking
-}
-
-Skill 14
-{
-	Attribute DetectingHidden
-}
-
-Skill 15
-{
-	Attribute Discordance
-}
-
-Skill 16
-{
-	Attribute EvaluatingIntelligence
-}
-
-Skill 17
-{
-	Attribute Healing
-}
-
-Skill 18
-{
-	Attribute Fishing
-}
-
-Skill 19
-{
-	Attribute ForensicEvaluation
-}
-
-Skill 20
-{
-	Attribute Herding
-}
-
-Skill 21
-{
-	Attribute Hiding
-}
-
-Skill 22
-{
-	Attribute Provocation
-}
-
-Skill 23
-{
-	Attribute Inscription
-}
-
-Skill 24
-{
-	Attribute Lockpicking
-}
-
-Skill 25
-{
-	Attribute Magery
-}
-
-Skill 26
-{
-	Attribute ResistingSpells
-}
-
-Skill 27
-{
-	Attribute Tactics
-}
-
-Skill 28
-{
-	Attribute Snooping
-}
-
-Skill 29
-{
-	Attribute Musicianship
-}
-
-Skill 30
-{
-	Attribute Poisoning
-}
-
-Skill 31
-{
-	Attribute Archery
-}
-
-Skill 32
-{
-	Attribute SpiritSpeak
-}
-
-Skill 33
-{
-	Attribute Stealing
-}
-
-Skill 34
-{
-	Attribute Tailoring
-}
-
-Skill 35
-{
-	Attribute AnimalTaming
-}
-
-Skill 36
-{
-	Attribute TasteIdentification
-}
-
-Skill 37
-{
-	Attribute Tinkering
-}
-
-Skill 38
-{
-	Attribute Tracking
-}
-
-Skill 39
-{
-	Attribute Veterinary
-}
-
-Skill 40
-{
-	Attribute Swordsmanship
-}
-
-Skill 41
-{
-	Attribute Macefighting
-}
-
-Skill 42
-{
-	Attribute Fencing
-}
-
-Skill 43
-{
-	Attribute Wrestling
-}
-
-Skill 44
-{
-	Attribute Lumberjacking
-}
-
-Skill 45
-{
-	Attribute Mining
-}
-
-Skill 46
-{
-	Attribute Meditation
-}
-
-Skill 47
-{
-	Attribute Stealth
-}
-
-Skill 48
-{
-	Attribute RemoveTrap
-}
-
-Skill 49
-{
-	Attribute Necromancy
-}
-
-Skill 50
-{
-	Attribute BattleFocus
-}
-
-Skill 51
-{
-	Attribute Chivalry
-}

Deleted: trunk/096/pkg/systems/attributes/config/vitals.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/vitals.cfg	2005-09-18 00:38:55 UTC (rev 157)
+++ trunk/096/pkg/systems/attributes/config/vitals.cfg	2005-09-18 01:13:57 UTC (rev 158)
@@ -1,45 +0,0 @@
-# $Id: vitals.cfg,v 1.1 2004/03/16 14:05:46 folko Exp $
-#
-# Purpose:
-# Defines Attribute names and aliases
-#
-# Structure:
-# Vital (Vital_Name)
-# {
-#   RegenRateFunction   (string scriptname:exported_func_name)
-#   MaximumFunction     (string scriptname:exported_func_name)
-#   [Alias              (string Alias_Name)]...
-#   [UnderflowFunction  (string scriptname:exported_func_name)]
-# }
-#
-# Explanation:
-# Vital_Name defines the UNIQUE name for this vital, like 'Mana', 'Stamina', etc.
-# Aliases are optional and any number maybe be assigned for each vital.
-# This way 'Hits' may be used in place of 'Life'
-# At the LEAST, these attributes must be defined: 'Life', 'Stamina', 'Mana' for use
-# in internal calculations.
-# RegenRateFunction should return value from -30000 to 30000.
-# Regen rates are in 'hundredths of points per minute.'
-# A current regen rate of 100 (1 point per 5 seconds) would therefore be 1200 (12 points per minute).
-# MaximumFunction should return the maximum value for this vital, an integer in 'hundreths'
-# between 100 and 10000000 (1-100,000)
-# UnderflowFunction not implimented.
-
-Vital Hits
-{
-    Alias               Life
-    RegenRateFunction   regenRate:GetHitsRegenRate
-    MaximumFunction     regenRate:GetHitsMaximumValue
-}
-
-Vital Mana
-{
-    RegenRateFunction   regenRate:GetManaRegenRate
-    MaximumFunction     regenRate:GetManaMaximumValue
-}
-
-Vital Stamina
-{
-    RegenRateFunction   regenRate:GetStaminaRegenRate
-    MaximumFunction     regenRate:GetStaminaMaximumValue
-}

Added: trunk/096/pkg/systems/attributes/uoclient.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/uoclient.cfg	2005-09-18 00:38:55 UTC (rev 157)
+++ trunk/096/pkg/systems/attributes/uoclient.cfg	2005-09-18 01:13:57 UTC (rev 158)
@@ -0,0 +1,63 @@
+# $$
+#
+# Purpose:
+# Maps vital and attribute names onto UO Client idioms for character status.
+#
+# Structure:
+# General
+# {
+#   Strength        (string Strength)
+#   Intelligence    (string Intelligence)
+#   Dexterity       (string Dexterity)
+#
+#   Hits            (string Life)
+#   Mana            (string Mana)
+#   Stamina         (string Stamina)
+#   MaxSkillID      (integer maximum UO client skill ID)
+# }
+#
+# Protocol
+# {
+#   # EnableFlowControlPackets: use the 0x33 (0x00 / 0x01) pause/restart packets.
+#   # Though OSI seems to no longer send these packets, they seem to help with smoothness,
+#   # particularly with boat movement.
+#   # NOTE: causes clients 4.0.0e and newer to fail login
+#   EnableFlowControlPackets    1
+# }
+#
+# Listener
+# {
+#   Port (int port number 1024..65535)
+#   Encryption (string encryption type)
+# }
+#
+# Explanation:
+# The left-hand-side "Strength", "Intelligence", and "Dexterity" are Attribute names that
+# MUST be defined in attributes.cfg.
+# The right-hand-side "Life", "Mana", and "Stamina" are Vital names that
+# MUST be defined in vitals.cfg.
+# MaxSkillID allows you to use new client skills, but setting it too high can crash older clients.
+# You must define skills.cfg entries for each skillID up to MaxSkillID (default 51).
+# The Protocol and Listener sections are optional.
+# Each Listener section allows you to listen for different client encryption types on different ports.
+# This means you can listen for "1.26.4" clients on port 5003 and "ignition" clients on port 5555.
+# Valid encryption types are found in the pol.cfg section. If you use Listeners set ListenPort
+# in pol.cfg to 0.
+
+General
+{
+	Strength       Strength
+	Intelligence   Intelligence
+	Dexterity      Dexterity
+
+	Hits           Hits
+	Mana           Mana
+	Stamina        Stamina
+
+	MaxSkillID     51
+}
+
+Protocol
+{
+	EnableFlowControlPackets 0
+}

Added: trunk/096/pkg/systems/attributes/uoskills.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/uoskills.cfg	2005-09-18 00:38:55 UTC (rev 157)
+++ trunk/096/pkg/systems/attributes/uoskills.cfg	2005-09-18 01:13:57 UTC (rev 158)
@@ -0,0 +1,277 @@
+# $Id: uoskills.cfg,v 1.1 2004/03/16 14:05:46 folko Exp $
+#
+# Purpose:
+# Maps Attribute names onto the UO Skill ID numbers.
+#
+# Structure:
+# Skill (SkillID)
+# {
+#   Attribute   (Attribute_name)
+# }
+# Additional entries required up to maximum UO skill id
+#
+# Explanation:
+# Attribute_name defines the Attribute associated with this UO Skill.
+# Only one attribute may be mapped to a skill id. Attribute_name must be found in attributes.cfg!
+# SkillID must be an integer between 0 and 500, though any entries past the maximum UO skill id
+# will not be sent to the UO client.
+
+Skill 0
+{
+	Attribute Alchemy
+}
+
+Skill 1
+{
+	Attribute Anatomy
+}
+
+Skill 2
+{
+	Attribute AnimalLore
+}
+
+Skill 3
+{
+	Attribute ItemIdentification
+}
+
+Skill 4
+{
+	Attribute ArmsLore
+}
+
+Skill 5
+{
+	Attribute Parrying
+}
+
+Skill 6
+{
+	Attribute Begging
+}
+
+Skill 7
+{
+	Attribute Blacksmithy
+}
+
+Skill 8
+{
+	Attribute BowcraftFletching
+}
+
+Skill 9
+{
+	Attribute Peacemaking
+}
+
+Skill 10
+{
+	Attribute Camping
+}
+
+Skill 11
+{
+	Attribute Carpentry
+}
+
+Skill 12
+{
+	Attribute Cartography
+}
+
+Skill 13
+{
+	Attribute Cooking
+}
+
+Skill 14
+{
+	Attribute DetectingHidden
+}
+
+Skill 15
+{
+	Attribute Discordance
+}
+
+Skill 16
+{
+	Attribute EvaluatingIntelligence
+}
+
+Skill 17
+{
+	Attribute Healing
+}
+
+Skill 18
+{
+	Attribute Fishing
+}
+
+Skill 19
+{
+	Attribute ForensicEvaluation
+}
+
+Skill 20
+{
+	Attribute Herding
+}
+
+Skill 21
+{
+	Attribute Hiding
+}
+
+Skill 22
+{
+	Attribute Provocation
+}
+
+Skill 23
+{
+	Attribute Inscription
+}
+
+Skill 24
+{
+	Attribute Lockpicking
+}
+
+Skill 25
+{
+	Attribute Magery
+}
+
+Skill 26
+{
+	Attribute ResistingSpells
+}
+
+Skill 27
+{
+	Attribute Tactics
+}
+
+Skill 28
+{
+	Attribute Snooping
+}
+
+Skill 29
+{
+	Attribute Musicianship
+}
+
+Skill 30
+{
+	Attribute Poisoning
+}
+
+Skill 31
+{
+	Attribute Archery
+}
+
+Skill 32
+{
+	Attribute SpiritSpeak
+}
+
+Skill 33
+{
+	Attribute Stealing
+}
+
+Skill 34
+{
+	Attribute Tailoring
+}
+
+Skill 35
+{
+	Attribute AnimalTaming
+}
+
+Skill 36
+{
+	Attribute TasteIdentification
+}
+
+Skill 37
+{
+	Attribute Tinkering
+}
+
+Skill 38
+{
+	Attribute Tracking
+}
+
+Skill 39
+{
+	Attribute Veterinary
+}
+
+Skill 40
+{
+	Attribute Swordsmanship
+}
+
+Skill 41
+{
+	Attribute Macefighting
+}
+
+Skill 42
+{
+	Attribute Fencing
+}
+
+Skill 43
+{
+	Attribute Wrestling
+}
+
+Skill 44
+{
+	Attribute Lumberjacking
+}
+
+Skill 45
+{
+	Attribute Mining
+}
+
+Skill 46
+{
+	Attribute Meditation
+}
+
+Skill 47
+{
+	Attribute Stealth
+}
+
+Skill 48
+{
+	Attribute RemoveTrap
+}
+
+Skill 49
+{
+	Attribute Necromancy
+}
+
+Skill 50
+{
+	Attribute BattleFocus
+}
+
+Skill 51
+{
+	Attribute Chivalry
+}

Added: trunk/096/pkg/systems/attributes/vitals.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/vitals.cfg	2005-09-18 00:38:55 UTC (rev 157)
+++ trunk/096/pkg/systems/attributes/vitals.cfg	2005-09-18 01:13:57 UTC (rev 158)
@@ -0,0 +1,45 @@
+# $Id: vitals.cfg,v 1.1 2004/03/16 14:05:46 folko Exp $
+#
+# Purpose:
+# Defines Attribute names and aliases
+#
+# Structure:
+# Vital (Vital_Name)
+# {
+#   RegenRateFunction   (string scriptname:exported_func_name)
+#   MaximumFunction     (string scriptname:exported_func_name)
+#   [Alias              (string Alias_Name)]...
+#   [UnderflowFunction  (string scriptname:exported_func_name)]
+# }
+#
+# Explanation:
+# Vital_Name defines the UNIQUE name for this vital, like 'Mana', 'Stamina', etc.
+# Aliases are optional and any number maybe be assigned for each vital.
+# This way 'Hits' may be used in place of 'Life'
+# At the LEAST, these attributes must be defined: 'Life', 'Stamina', 'Mana' for use
+# in internal calculations.
+# RegenRateFunction should return value from -30000 to 30000.
+# Regen rates are in 'hundredths of points per minute.'
+# A current regen rate of 100 (1 point per 5 seconds) would therefore be 1200 (12 points per minute).
+# MaximumFunction should return the maximum value for this vital, an integer in 'hundreths'
+# between 100 and 10000000 (1-100,000)
+# UnderflowFunction not implimented.
+
+Vital Hits
+{
+    Alias               Life
+    RegenRateFunction   regenRate:GetHitsRegenRate
+    MaximumFunction     regenRate:GetHitsMaximumValue
+}
+
+Vital Mana
+{
+    RegenRateFunction   regenRate:GetManaRegenRate
+    MaximumFunction     regenRate:GetManaMaximumValue
+}
+
+Vital Stamina
+{
+    RegenRateFunction   regenRate:GetStaminaRegenRate
+    MaximumFunction     regenRate:GetStaminaMaximumValue
+}



From austin at berlios.de  Sun Sep 18 12:39:34 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 18 Sep 2005 12:39:34 +0200
Subject: [Poldistro-svn] r159 - trunk/096/pkg/config
Message-ID: <200509181039.j8IAdYvU016147@sheep.berlios.de>

Author: austin
Date: 2005-09-18 12:39:13 +0200 (Sun, 18 Sep 2005)
New Revision: 159

Added:
   trunk/096/pkg/config/uoclient.cfg
Log:
Protocol / Listener elems moved to config package - since they're not attribute related.

Added: trunk/096/pkg/config/uoclient.cfg
===================================================================
--- trunk/096/pkg/config/uoclient.cfg	2005-09-18 01:13:57 UTC (rev 158)
+++ trunk/096/pkg/config/uoclient.cfg	2005-09-18 10:39:13 UTC (rev 159)
@@ -0,0 +1,48 @@
+# Protocol
+# {
+#   # EnableFlowControlPackets: use the 0x33 (0x00 / 0x01) pause/restart packets.
+#   # Though OSI seems to no longer send these packets, they seem to help with smoothness,
+#   # particularly with boat movement.
+#   # NOTE: causes clients 4.0.0e and newer to fail login
+#   EnableFlowControlPackets    1
+# }
+#
+# Listener
+# {
+#   Port (int port number 1024..65535)
+#   Encryption (string encryption type)
+# }
+#
+# Explanation:
+# The left-hand-side "Strength", "Intelligence", and "Dexterity" are Attribute names that
+# MUST be defined in attributes.cfg.
+# The right-hand-side "Life", "Mana", and "Stamina" are Vital names that
+# MUST be defined in vitals.cfg.
+# MaxSkillID allows you to use new client skills, but setting it too high can crash older clients.
+# You must define skills.cfg entries for each skillID up to MaxSkillID (default 51).
+# The Protocol and Listener sections are optional.
+# Each Listener section allows you to listen for different client encryption types on different ports.
+# This means you can listen for "1.26.4" clients on port 5003 and "ignition" clients on port 5555.
+# Valid encryption types are found in the pol.cfg section. If you use Listeners set ListenPort
+# in pol.cfg to 0.
+
+
+Protocol
+{
+	EnableFlowControlPackets 0
+}
+
+
+Listener
+{
+	#
+	# Enabled mostly for development purposes
+	# Will be removed when distro goes final
+	Port		5002
+	Encryption	2.0.0
+}
+Listener
+{
+	Port		5003
+	Encryption	none
+}



From austin at berlios.de  Sun Sep 18 12:40:40 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 18 Sep 2005 12:40:40 +0200
Subject: [Poldistro-svn] r160 - trunk/096/pkg/other/hooks
Message-ID: <200509181040.j8IAeeEa016863@sheep.berlios.de>

Author: austin
Date: 2005-09-18 12:40:22 +0200 (Sun, 18 Sep 2005)
New Revision: 160

Modified:
   trunk/096/pkg/other/hooks/uoclient.cfg
Log:
Protocol and Listener elems moved to configs file since they are not attribute related.

Modified: trunk/096/pkg/other/hooks/uoclient.cfg
===================================================================
--- trunk/096/pkg/other/hooks/uoclient.cfg	2005-09-18 10:39:13 UTC (rev 159)
+++ trunk/096/pkg/other/hooks/uoclient.cfg	2005-09-18 10:40:22 UTC (rev 160)
@@ -16,33 +16,6 @@
 #   MaxSkillID      (integer maximum UO client skill ID)
 # }
 #
-# Protocol
-# {
-#   # EnableFlowControlPackets: use the 0x33 (0x00 / 0x01) pause/restart packets.
-#   # Though OSI seems to no longer send these packets, they seem to help with smoothness,
-#   # particularly with boat movement.
-#   # NOTE: causes clients 4.0.0e and newer to fail login
-#   EnableFlowControlPackets    1
-# }
-#
-# Listener
-# {
-#   Port (int port number 1024..65535)
-#   Encryption (string encryption type)
-# }
-#
-# Explanation:
-# The left-hand-side "Strength", "Intelligence", and "Dexterity" are Attribute names that
-# MUST be defined in attributes.cfg.
-# The right-hand-side "Life", "Mana", and "Stamina" are Vital names that
-# MUST be defined in vitals.cfg.
-# MaxSkillID allows you to use new client skills, but setting it too high can crash older clients.
-# You must define skills.cfg entries for each skillID up to MaxSkillID (default 51).
-# The Protocol and Listener sections are optional.
-# Each Listener section allows you to listen for different client encryption types on different ports.
-# This means you can listen for "1.26.4" clients on port 5003 and "ignition" clients on port 5555.
-# Valid encryption types are found in the pol.cfg section. If you use Listeners set ListenPort
-# in pol.cfg to 0.
 
 General
 {
@@ -56,24 +29,3 @@
 
 	MaxSkillID     51
 }
-
-
-Protocol
-{
-	EnableFlowControlPackets 0
-}
-
-
-Listener
-{
-	#
-	# Enabled mostly for development purposes
-	# Will be removed when distro goes final
-	Port		5002
-	Encryption	2.0.0
-}
-Listener
-{
-	Port		5003
-	Encryption	none
-}



From austin at berlios.de  Sun Sep 18 12:43:51 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 18 Sep 2005 12:43:51 +0200
Subject: [Poldistro-svn] r161 - trunk/096/pkg/systems/attributes
Message-ID: <200509181043.j8IAhpqe020090@sheep.berlios.de>

Author: austin
Date: 2005-09-18 12:43:50 +0200 (Sun, 18 Sep 2005)
New Revision: 161

Modified:
   trunk/096/pkg/systems/attributes/uoclient.cfg
Log:
Changed General { to General General { so it can be accessed if need-be in scripts.

Modified: trunk/096/pkg/systems/attributes/uoclient.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/uoclient.cfg	2005-09-18 10:40:22 UTC (rev 160)
+++ trunk/096/pkg/systems/attributes/uoclient.cfg	2005-09-18 10:43:50 UTC (rev 161)
@@ -44,7 +44,7 @@
 # Valid encryption types are found in the pol.cfg section. If you use Listeners set ListenPort
 # in pol.cfg to 0.
 
-General
+General General
 {
 	Strength       Strength
 	Intelligence   Intelligence
@@ -56,8 +56,3 @@
 
 	MaxSkillID     51
 }
-
-Protocol
-{
-	EnableFlowControlPackets 0
-}



From austin at berlios.de  Sun Sep 18 12:44:24 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 18 Sep 2005 12:44:24 +0200
Subject: [Poldistro-svn] r162 - trunk/096/pkg/other/hooks
Message-ID: <200509181044.j8IAiO1B020664@sheep.berlios.de>

Author: austin
Date: 2005-09-18 12:44:15 +0200 (Sun, 18 Sep 2005)
New Revision: 162

Modified:
   trunk/096/pkg/other/hooks/uoclient.cfg
Log:
Changed General { to General General { so it can be accessed if need-be in scripts.

Modified: trunk/096/pkg/other/hooks/uoclient.cfg
===================================================================
--- trunk/096/pkg/other/hooks/uoclient.cfg	2005-09-18 10:43:50 UTC (rev 161)
+++ trunk/096/pkg/other/hooks/uoclient.cfg	2005-09-18 10:44:15 UTC (rev 162)
@@ -17,7 +17,7 @@
 # }
 #
 
-General
+General General
 {
 	Strength       Strength
 	Intelligence   Intelligence



From austin at berlios.de  Sun Sep 18 12:45:43 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 18 Sep 2005 12:45:43 +0200
Subject: [Poldistro-svn] r163 - trunk/096/pkg/config
Message-ID: <200509181045.j8IAjhsG023432@sheep.berlios.de>

Author: austin
Date: 2005-09-18 12:45:40 +0200 (Sun, 18 Sep 2005)
New Revision: 163

Modified:
   trunk/096/pkg/config/uoclient.cfg
Log:
Assigned names to elems so they can be accessed in scripts if need be. (Core ignores them)

Modified: trunk/096/pkg/config/uoclient.cfg
===================================================================
--- trunk/096/pkg/config/uoclient.cfg	2005-09-18 10:44:15 UTC (rev 162)
+++ trunk/096/pkg/config/uoclient.cfg	2005-09-18 10:45:40 UTC (rev 163)
@@ -26,14 +26,13 @@
 # Valid encryption types are found in the pol.cfg section. If you use Listeners set ListenPort
 # in pol.cfg to 0.
 
-
-Protocol
+Protocol Protocol
 {
 	EnableFlowControlPackets 0
 }
 
 
-Listener
+Listener 2.0.0
 {
 	#
 	# Enabled mostly for development purposes
@@ -41,7 +40,7 @@
 	Port		5002
 	Encryption	2.0.0
 }
-Listener
+Listener None
 {
 	Port		5003
 	Encryption	none



From muaddiblsd at berlios.de  Mon Sep 19 05:50:32 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Mon, 19 Sep 2005 05:50:32 +0200
Subject: [Poldistro-svn] r164 - trunk/096/pkg/commands/player
Message-ID: <200509190350.j8J3oWKh032223@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-19 05:50:28 +0200 (Mon, 19 Sep 2005)
New Revision: 164

Modified:
   trunk/096/pkg/commands/player/flip.src
Log:
Added a few more items for future updates to crafting.

Modified: trunk/096/pkg/commands/player/flip.src
===================================================================
--- trunk/096/pkg/commands/player/flip.src	2005-09-18 10:45:40 UTC (rev 163)
+++ trunk/096/pkg/commands/player/flip.src	2005-09-19 03:50:28 UTC (rev 164)
@@ -1,9 +1,12 @@
-//////////////////////////////////////////////////////////////////////
+////////////////////////////////////////////////////////////////////////////////////////////////////
 //
-//   .flip        - changes the orientation of a piece of furniture
+//  name:    flip.src - Player Textcommand
+//  version: 1.0a
+//  author:  Distro
 //
-//////////////////////////////////////////////////////////////////////
-
+//  Purpose: Changes the orientation of a piece of furniture
+//
+////////////////////////////////////////////////////////////////////////////////////////////////////
 use uo;
 use basic;
 
@@ -146,9 +149,21 @@
             targetfurniture.graphic := 0xec7;  // Dress form
         0xec7:
             targetfurniture.graphic := 0xec6;
+        0xeb6:
+            targetfurniture.graphic := 0xeb8;  // Short music stand
+        0xeb8:
+            targetfurniture.graphic := 0xeb6;
+        0xebb:
+            targetfurniture.graphic := 0xebc;  // Tall music stand
+        0xebc:
+            targetfurniture.graphic := 0xebb;
+        0xf66:
+            targetfurniture.graphic := 0xf68;  // Easel
+        0xf68:
+            targetfurniture.graphic := 0xf66;
         default:
             SendSysMessage(me, "That item cannot be reoriented.");
     endcase
 
 
-endprogram
\ No newline at end of file
+endprogram



From austin at berlios.de  Fri Sep 16 11:26:36 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 16 Sep 2005 11:26:36 +0200
Subject: [Poldistro-svn] r141 - trunk/096
Message-ID: <200509160926.j8G9QaNX018585@sheep.berlios.de>

Author: austin
Date: 2005-09-16 11:26:32 +0200 (Fri, 16 Sep 2005)
New Revision: 141

Added:
   trunk/096/core-changes.txt
Log:
Keeping core-changes.txt up to date so distro developers can plan ahead on stuff more easily.

Added: trunk/096/core-changes.txt
===================================================================
--- trunk/096/core-changes.txt	2005-09-16 03:10:22 UTC (rev 140)
+++ trunk/096/core-changes.txt	2005-09-16 09:26:32 UTC (rev 141)
@@ -0,0 +1,4028 @@
+-- POL096 --
+09-15 Austin
+        Added : mobile.connected - To determine if the character is actively connected to the game.
+                Is set to 1 before logon/reconnect scripts are run and 0 right before logofftest is run.
+
+09-14 Shinigami
+        Added : vitals.cfg element option "RegenWhileDead" added (0/1 - defaults to 0)
+
+09-13 Austin
+        Fixed : When a player dies, it will send SYSEVENT_DISENGAGED to the opponent-npc, if one is set.
+
+09-12 Shinigami
+        Added : some Packet functions, same as original one, but with flipping Byte Order
+                Packet.GetInt16Flipped(offset, value)
+                Packet.GetInt32Flipped(offset, value)
+                Packet.SetInt16Flipped(offset, value)
+                Packet.SetInt32Flipped(offset, value)
+
+09-11 Austin
+	Added : Member for mobiles ".opponent". Returns a mobile reference if a combat opponent is selected.
+
+09-10 Shinigami
+        Added : math::Root - returns y Root of x (same as Pow(x,1.0/y))
+
+09-08 Shinigami
+        Changed : eCompile - BASIC style for loops (for i:= start to end) will warn again on -v5 (and above)
+                  about the iteration variable being unused
+
+09-08 Austin
+	Added : polsys::Packages() now has a .npcdesc member. Will be 1 if the package has an npcdesc.cfg file.
+
+09-07 Folko
+        Changed: eCompile - BASIC style for loops (for i:= start to end) will no longer complain about the iteration variable being unused
+        Changed: Fixed some endianess issues and improved the conversion performance
+
+09-03 Shinigami
+        Changed : uo::FindPath will redefine Param mobilesblock as flags (FP_IGNORE_*)
+        Added   : uo::FindPath can ignore Doors (FP_IGNORE_DOORS)
+
+09-03 Austin
+        Fixed : cfgfile::GetConfigStringArray() lines that contain a property name but no value will not be placed in the array.
+        Added : cfgfile::GetConfigStringDictionary( element, property_name ). Works similarly to
+                GetConfigStringArray() but will take the first word on the line and use it for the key.
+                Elem ElemName
+                {
+                       PropLine keyname this will be the text placed in it
+                }
+
+09-02 Shinigami
+        Fixed : uo::Attach allowed you to attach more than one Script to a Character
+
+08-29 Shinigami
+        Changed : UseAAnTileFlags in SERVSPECOPT(.LOCAL).CFG renamed to UseTileFlagPrefix (check 03-05)
+                  (compatibility with const TILEDATA_FLAG_* inside uo.em)
+        Changed : player.spyonclient2 renamed to player.clientinfo (check 01-24)
+
+08-29 Folko
+        Added   : Support for custom MIME types in config/www.cfg. This allows you to
+                  add new file types that the web server can handle, for example PNG images,
+                  PDF files or favicon.ico. If you don't supply a www.cfg, old defaults are used.
+        Hint    : Here's an example www.cfg:
+
+                MIME gif
+                {
+                    Extension gif
+                    MIME image/gif
+                }
+
+                MIME jpg
+                {
+                    Extension jpg
+                    MIME image/jpeg
+                }
+
+                MIME jpeg
+                {
+                    Extension jpeg
+                    MIME image/jpeg
+                }
+
+08-28 Austin
+	Added : Ability to initialize error as you would a struct.
+		Example return error{"errortext" := "This is the error message"};
+	Added : Extended NPC.EM Say() function to allow for two additional parameters.
+		Say( text, text_type:=SAY_TEXTTYPE_DEFAULT, do_event:=SAY_DOEVENT_DISABLE );
+                Text type is a string "default", "yell", "whisper", constants are:
+		SAY_TEXTTYPE_DEFAULT, SAY_TEXTTYPE_YELL, SAY_TEXTTYPE_WHISPER (added to npc.em)
+		If do_event is enabled with SAY_DOEVENT_ENABLE, it will send a speech event to nearby npcs.
+
+08-26 Austin
+	Fixed : LEFTAREA event was not being sent to npcs in the old realm when a mobile was moved to a new realm.
+	
+08-25 Austin
+	Fixed : LEFTAREA event was not being sent if a mobile was teleported 33 tiles or more away.
+
+08-23 Austin
+        Added : Logging out will now send a LEFTAREA event (after logout.ecl has finished).
+        Added : New flag for servspecopt.cfg called "EventVisibilityCoreChecks" set to 0 (disabled) by default.
+                Enabled - the core does visibility checks before sending events as it did before.
+                Disabled - requires your scripts do visibility checking. 
+
+08-22 Shinigami
+        Fixed : sometimes the Core crashed while destroying Items (e.g. via Control Scripts) on Boats
+
+07-28 Shinigami
+        Changed : eCompile - Assignment inside Condition Check will produce Warning on -v5 (and above) only
+
+07-26 Shinigami
+        Changed : TextCMDs can be specified in Packages; just make a commands/gm (new style) or
+                  textcmd/gm (old style) etc directory. These are only scanned at startup,
+                  so if the directory doesn't exist then, it won't be searched until restart.
+        Changed : Support for packaged Includes - if you use 'Include ":blah:blubb";'
+                  eCompile will search for ":blah:blubb.inc" and ":blah:include/blubb.inc".
+                  It will use first file found. If both files exist eCompile will print a Warning.
+
+07-25 Shinigami
+        Added : MinDamage and MaxDamage in weapon.GetItemDescriptor() calculated from Damage-Dice
+        Changed : usable Msg size of SendDialogGump doubled - now you can use larger Gumps
+
+07-16 Shinigami
+        Fixed : uoconvert will ignore illegal statics with graphic >= 0x4000
+        Added : uoconvert.cfg element option extended by ShowIllegalGraphicWarning
+                StaticOptions
+                {
+                    MaxStaticsPerBlock        1000
+                    WarningStaticsPerBlock    1000
+                    ShowIllegalGraphicWarning 1
+                }
+                it's a flag and defaults to 1 (for the other entries go to 07-05)
+
+07-07 Shinigami
+        Hint : uo::ListItems*Location, uo::ListMobile*Location and uo::ListStatics*Location
+               will check for out-of-range coords now
+               uo::ListObjectsInBox, uo::ListMultisInBox and uo::ListStaticsInBox
+               will NOT check for out-of-range coords - a lot of scripter "love" this bug :o/
+
+07-06 Shinigami
+        Fixed : u'll get the correct string representation even if a numeric Config File
+                Value will cause an overflow
+
+07-05 Shinigami
+        Added : Warning if no tiles or landtiles are loaded (maybe files missing...)
+        Added : uoconvert.cfg element option added, StaticOptions, in the following form:
+                StaticOptions
+                {
+                    MaxStaticsPerBlock     1000
+                    WarningStaticsPerBlock 1000
+                }
+                max. Amount of Static Items per Block of 8x8x256 (or Warning Level)
+                it is hard limited to 10000. default is 1000.
+
+07-04 Shinigami
+        Changed : uo::ListStaticItemsAtLocation to uo::ListStaticsAtLocation( x, y, z, flags, realm )
+                  uo::ListStaticItemsNearLocation to uo::ListStaticsNearLocation( x, y, z, range, flags, realm )
+                  IGNORE_* constants to ITEMS_IGNORE_* constants
+        Added : Parameter Z in uo::ListStatics*Location
+        Added : LIST_IGNORE_Z constant u can use for Z Parameter to list all Items ignoring Z-Value
+                in uo::ListStatics*Location, uo::ListItems*Location and uo::ListMobilesNearLocation*
+        Added : uo::ListStaticsInBox( x1,y1,z1, x2,y2,z2, flags, realm );
+                creates an array of structures with Static and Multi Items in box.
+                you can specify via flags which Items you want to get. check ITEMS_IGNORE_* constants.
+        Added : realm-based coord check inside List*InBox and uo::ListMobilesNearLocation*
+
+07-01 Shinigami
+        Fixed : low-fragmentation Heap is linked dynamically, so Core will work on Win9x/NT again
+        ReAdded: uo::GetAttributeIntrinsicMod( character, attrname )
+                 You set intrinsic Mod via exported GetIntrinsicModFunction in attributes.cfg
+        Fixed : Memory leak inside cfgfile::Read-/UnloadConfigFile(...)
+                cfgfile::AppendConfigFile(...) will call cfgfile::UnloadConfigFile(...) immediately
+
+06-15 Shinigami
+        Added : npc::CanMove( direction ) - checks if an NPC can move in given direction
+                (IsLegalMove works in a different way and is used for bounding boxes only)
+        Added : UseWinLFH=0|1 in SERVSPECOPT(.LOCAL).CFG (default = 0)
+                Use Windows XP/2003 low-fragmentation Heap?
+
+06-06 Shinigami
+        Fixed : FindPath will work again @ Linux-Core without crashing server in some cases.
+
+06-01 Shinigami
+        Fixed : Cancel of TradeWin will put items in correct Realm on ground if backpack full
+        Added : movecost.cfg can have 'Walking_Mounted' and 'Running_Mounted' sections too.
+                You've to declare one global 'MovementCost' section or 2 sections 'Walking' and
+                'Running'. If you don't declare Mounted sections, Core will use unmounted values.
+        Added : uo::Attach( character ) - attach a Script to a Character
+        Fixed : moving intrinsic Weapon via MoveItemToLocation crashed Server
+                WARNING: You should never touch intrinsic Weapons!
+        Added : uo::ListStaticItemsAtLocation( x, y, flags, realm )
+        Added : uo::ListStaticItemsNearLocation( x, y, range, flags, realm )
+                creates an array of structures with Static and Multi Items at or around location.
+                you can specify via flags which Items you want to get. check IGNORE_* constants.
+                [Edit: changed... please check 07-04 above]
+        Added : uo::GetStandingLayers( x, y, flags, realm )
+                get an array of standing layers and blocking solids. check MAPDATA_FLAG_* constants.
+
+05-31 Shinigami
+        Added : flag LOG_DATETIME in file::LogToFile( filename, line, flags := 0 )
+                to log Core-Style DateTimeStr in front of log entry
+                
+05-28 Shinigami
+        Added : flag ENUMERATE_IGNORE_LOCKED in uo::EnumerateItemsInContainer( container, flags := 0 )
+                to list content of locked container too
+        Added : uo::SecureTradeWin( character, character2 ) - to init secure trade via script over long distances
+        Added : uo::MoveItemToSecureTradeWin( item, character ) - to move item to secure trade window via script
+
+05-25 Shinigami
+        Added : Account.delete() - delete this empty account
+        Added : Account.split( newacctname : string, index : 1..5 )
+                create a new account and move character to it
+        Added : Account.move_char( destacctname : string, index : 1..5 )
+                move character from this account to destination account.
+                you can use it to flip chars on same account too - it's not a bug, it's a feature ;oP
+
+04-04 Shinigami
+        Added : player.createdat - returns the PolClock when the character was created
+        Added : Before character deletion, scripts/misc/candelete.ecl will be called.
+                  program definition is:
+                    - program can_delete( who, deleteby ); // return nonzero to allow deletion
+                  new constants in UO.EM:
+                    - DELETE_BY_PLAYER : Delete-Request by Player
+                    - DELETE_BY_SCRIPT : Delete-Request by account.DeleteCharacter( index )
+                Before character deletion, scripts/misc/ondelete.ecl and anypkg/ondelete.ecl will be called.
+                  Their return values are ignored.
+        Fixed : Call OnDelete script in account.DeleteCharacter( index ) too.
+        Updated : Account.set_uo_expansion(string): recognized values: SE, AOS, LBR, T2A (default), "".
+                    This determines what flag is sent with packet 0xB9 during login
+                      (Nothing -> 0x0000 / T2A -> 0x0001 / LBR -> 0x0002 / AOS -> 0x801b / SE -> 0x805b).
+                    It's possible to hook 0xB9 but don't forget to set_uo_expansion anyway because core
+                    uses this for internal flags (e.g. AoS Tooltips). Packet 0xB9 will be sent earlier
+                    (before you choose a character) and after you've used set_uo_expansion.
+        Updated : servspecopt.cfg property: UOFeatureEnable, used in the last dword of the 0xA9 login packet,
+                  will block Bit 6 (support up to 6 Chars).
+                  To enable AoS stuff set Bit 5 (use 0x20), to enable SE stuff set Bit 7 & 5 (use 0xa0). 
+
+04-02 Shinigami
+        Added : Additional realm-support
+                  CreateItemCopyAtLocation(x, y, z, item, realm := _DEFAULT_REALM);
+                  boat.move_offline_mobiles(int x, int y, int z[, string realm]);
+                    (If realm is not set, Boat-realm is used.)
+        Added : Some realm-constants to uo.em
+
+03-05 Shinigami
+        Added : UseTileFlagPrefix=0|1 in SERVSPECOPT(.LOCAL).CFG (default = 1)
+                Should Core prepend "a"/"an" according to tiles.cfg flags to formatted item names?
+                (p.s.: in 08-29 renamed from UseAAnTileFlags to UseTileFlagPrefix)
+        Fixed : Last but not least, remove Spell Delay usage from core.
+
+03-03 Madman
+        Fixed : My previous attempt to remove spellcasting from the core was incomplete. It should no
+                  longer run a skillcheck before starting the spell script.
+
+03-02 Shinigami
+        Fixed : MoveObjectToRealm will handle any type of items (equipment etc.) and container with content too.
+        Fixed : You can move item from container to different realm without crash.
+
+03-01 Shinigami
+        Fixed : Pol will support up to 5 Maps now (Britannia, Britannia_alt, Ilshenar, Malas, Tokuno)
+
+02-23 Shinigami
+        Added : DecayItems=0|1 in SERVSPECOPT(.LOCAL).CFG (default = 1)
+                Disable (e.g. World Design Server) or enable (Live Shard Server) item decay.
+
+02-14 Shinigami
+        Fixed : AOS Spellbook entries in itemdesc.cfg will not crash linux build anymore.
+        Fixed : Wrong handling of double clicking AoS style Spellbooks.
+
+01-27 Shinigami
+        Fixed : UOConvert will convert Samurai Empire Map Tokuno.
+                Don't forget to use tiledata.mul shipped with SE.
+                Don't forget to build new tiles.cfg and landtiles.cfg too.
+                If not, your Tokuno Realm works and maybe looks funny ;o)
+        Fixed : Small bug within UOConvert and Tiledata names with full length.
+
+01-24 Shinigami
+        Added : player.clientinfo -- returns a struct with a lot of usefull infomation about client PC
+                Example :
+
+                Function TestClientInfo(who)
+                  Var info:=who.clientinfo;
+
+                  If (info.unknown1) // in most/all cases 0x02
+                    SysLog("ClientInfo '"+who.name+"' ["+who.acctname+"]");
+                    SysLog("  Unknown1                 = "+Lower(Hex(info.unknown1)));
+                    SysLog("  Unique Instance ID of UO = "+Lower(Hex(info.instance)));
+                    SysLog("  OS Version               = "+info.os_major+"."+info.os_minor+"."+info.os_revision);
+                    SysLog("  CPU Manufacturer         = "+info.cpu_manufacturer);
+                    SysLog("  CPU Family               = "+info.cpu_family);
+                    SysLog("  CPU Model                = "+info.cpu_model);
+                    SysLog("  CPU Clock Speed          = "+info.cpu_clockspeed+" MHz");
+                    SysLog("  CPU Quantity             = "+info.cpu_quantity);
+                    SysLog("  Memory                   = "+info.memory+" MB");
+                    SysLog("  Screen Resolution        = "+info.screen_width+" x "+info.screen_height+" x "+info.screen_depth+" Bit");
+                    SysLog("  Direct X Version         = "+info.directx_major+"."+info.directx_minor);
+                    SysLog("  Video Card Description   = "+CChrZ(info.video_description));
+                    SysLog("  Video Card Vendor ID     = "+info.video_vendor);
+                    SysLog("  Video Card Device ID     = "+info.video_device);
+                    SysLog("  Video Card Memory        = "+info.video_memory+" MB");
+                    SysLog("  Distribution             = "+info.distribution);
+                    SysLog("  Clients Running          = "+info.clients_running);
+                    SysLog("  Clients Installed        = "+info.clients_installed);
+                    SysLog("  Partial Insstalled       = "+info.partial_installed);
+                    SysLog("  Language Code            = "+CChrZ(info.langcode));
+                    SysLog("  Unknown2                 = "+info.unknown2);
+                  Else
+                    SysLog("No ClientInfo '"+who.name+"' ["+who.acctname+"]");
+                  EndIf
+                EndFunction
+
+                Limitations :
+                  The client doesn't send this Packet every time,
+                    if available you can use it first time in your misc/logon.src.
+                  If your login server differs from play/shard server it doesn't work
+                    (Packet will be send before you choose the server only).
+                  This will work for Win release only, until now. Win and Linux core
+                    handle server-choose- and play-connection in a different way.
+                    Not sure why, must be something with OS-Socks implementation :o(
+
+                Comment :
+                  Seems to be very usefull to detect shadow accounts...
+                  You love 1984? OSI too ;oP
+
+                (p.s.: in 08-29 renamed from player.spyonclient2 to player.clientinfo)
+
+01-24 Shinigami
+        Linux : If you'll get something like this using Gentoo Release:
+
+                  pol: ../sysdeps/generic/dl-tls.c:72: _dl_next_tls_modid:
+                    Assertion `result <= _dl_tls_max_dtv_idx' failed.
+
+                try following to run your Pol:
+
+                  #!/bin/sh
+                  export LD_ASSUME_KERNEL=2.4
+                  ./pol
+
+09-18 Birdy
+        Fixed : Moved login complete packet send higher in login process to try to fix
+                problems with logging into a weather region with weather where it would
+                start to rain spell icons instead of rain or snow.
+
+08-03 Birdy
+        Added : AcctMatch lines in server entries in servers.cfg.  Example of format
+                is below.  AcctMatch lines have one account name per line, and are
+                those accounts to show the given server to on login to the
+                'login server'(the server that is in the client's login.cfg).
+                Example :
+
+                GameServer
+                {
+                    Name      Test
+                    IP        192.168.0.1
+                    Port      5003
+                    AcctMatch admin
+                    AcctMatch staff
+                }
+
+                The above would only display that particular server(Test, located at
+                192.168.0.1:5003) to someone logging into the login server with
+                accounts admin or staff.
+
+                IPMatch still works as well, and for an account to see the server it
+                must fulfill both IPMatch and AcctMatch entries, if those exist to
+                match up against.
+
+08-03 Birdy
+        Fixed : Good Aligned NPCs that attack innocents and go criminal will
+                highlight grey now.
+                Attacking criminal flagged Good NPCs will no longer flag others as
+                criminal.
+
+08-01 Birdy
+        Fixed : Crash bug related to realm not being set in createitemincontainer soon
+                enough for references to it in create scripts.
+
+07-27 Birdy
+        Added : New system event : SYSEVENT_GONE_CRIMINAL := 0x2000;
+                You should add this to your sysevent.inc file or wherever you keep your
+                system event constants.  This event is closely associated with the
+                SYSEVENT_ENTERED_AREA event.  It uses the current range setting for
+                the ENTERED_AREA event as it's own range, and this is for good reason.
+                The GONE_CRIMINAL event lets the system tell the NPC when a mobile has
+                become a criminal(from a previously non-criminal state) by firing this
+                event and placing a character reference to the new criminal in the
+                source field of the event. If used in conjunction with the ENTERED_AREA
+                system event, then guards should be able to do their guarding work
+                without needing to do polling scans of the area around them periodically.
+                On ENTERED_AREA events, you check to see if the person entering the area
+                is a criminal or not.  On GONE_CRIMINAL events, you know that the person
+                who was already in the area has become a criminal from previously being
+                innocent.
+
+                This event will only fire if the criminal is visible to the NPC.  Though
+                again, if you are using it in conjunction with the ENTERED_AREA event, then
+                when the criminal comes out of hiding, an ENTERED_AREA event will be fired
+                and you can handle the criminal there.
+
+                This event will also only fire on transitions from innocent status to
+                criminal status.  No events will fire on transition to innocent status
+                again, and if the subject was already a criminal to begin with, then
+                doing a criminal act again will not fire the event.  This is to keep the
+                system from being overloaded with events since every hit on an innocent
+                is a new criminal act.
+
+                I will stress one last time, use this WITH the SYSEVENT_ENTERED_AREA
+                system event, NOT on it's own!  Or you will be confused and bewildered.
+                You have been warned!
+
+07-18 Madman Across the Water
+        Changed: Casting from the default spellbook:
+               * It no longer checks if you are dead, says the words of power,
+                 performs the animations, checks for free hands, performs a
+                 skill check, or checks for or consumes mana or reagents. All
+                 these things must now be handled in scripts. This, combined
+                 with Myrathi's changes on 5-12, wherein spellid is now passed
+                 to the cast spell, should allow greater flexibility and also
+                 simplicity in spell systems and scripts.
+
+06-17 Birdy
+        Changed: Uncommented RandomFloat(...) in util.em to allow it to be used.
+
+06-13 Birdy
+        Fixed: Items dragged across realms and dropped will update properly.  This
+               is necessary to allow storage containers to be able to have their items
+               dragged out of them and dropped on the ground directly, even if the
+               ground is not the default realm that storage containers are all in.
+        Fixed: All worn items will now have their realm updated on character realm
+               transfer instead of just the backpack.
+
+06-09 Myrathi
+        Removed: Deprecated UO.EM functions:
+               * Damage()
+               * GameStat()
+
+06-08 Myrathi
+        Fixed: CASE statements given a significant overhaul:
+               * Error messages now correctly refer to them as a "CASE statement",
+                 not a "SWITCH statement".
+               * They now *require* their test-expression to be within parenthesis.
+               * Empty CASE statements with no option clauses are now caught as
+                 invalid.
+               * A warning message will be displayed if the only thing defined is
+                 a "default:" clause (i.e. no option clauses)
+               * Missing option values are now caught and less cryptic error messages
+                 shown (e.g. when using undefined constants)
+
+06-06 Myrathi
+        Added: New 'dowhile' keyword (to solve the "do/while()/endwhile/while()"
+               bug). "do..dowhile()" now follows the more usual block syntax
+               style (if..endif, while..endwhile, etc.).
+               Syntax is as follows:
+
+                   do
+                     <statements>
+                   dowhile ( <expression-is-true> );
+
+06-05 Birdy
+        Added: ItemColorMask ServerSpecOpt option.  This option defaults to the
+               typical POL mask of 0xFFF.  It is a bitmask of what colors should
+               be considered valid.  For example, with an ItemColorMask of
+               0xFFF, any color from 0 to 4095 is considered a valid color.
+               With an ItemColorMask of 0xFF, this would be reduced to a range
+               from 0 to 255.  It was left a mask instead of given as a range
+               in order to allow specifying certain bits to be on.  So, for
+               instance, with the newer clients, a mask of 0x4FFF will allow
+               the third bit (value 4) of the most significant nibble to
+               be turned on, but no others in that nibble.  This allows for
+               newer clients to use the "transparent animation" feature, which
+               allows equipped mounts to be transparent(ie, ethereals).  Bear
+               in mind, older clients may well crash if you set colors to be
+               outside of the non-default mask of 0xFFF, so this is strictly at
+               your own risk to use it.  But for those of you wishing ethereal
+               beetles and other mount animations to be ethereal, you will have
+               to set the mount piece to be color 0x4001 and then equip it.
+               And in order to do that, you will need an ItemColorMask of
+               0x4FFF.
+
+06-03 Birdy
+        Removed: GetAttributeIntrinsicMod(...) function interface in uo.em was
+                 removed, since no Set for the function has existed since way
+                 back in POL094 test cores and no plans to impliment a set
+                 exist.  This will require a search of your scripts for this
+                 function and removal of it(some distro code has it) and
+                 a recompile of those scripts.
+
+05-24 Birdy
+        Fixed: FindSubstance should now (hopefully) auto-release items reserved by
+               it on script termination.
+        Fixed: Packet.SendAreaPacket(x,y,range,realm) now looks for 4 parameters
+               as it should instead of 3.
+
+05-17 Birdy
+        Changed: concealed property is no longer compared to cmdlevel by core.  Any
+                 scripts changing concealed should do validation against cmdlevel
+                 itself.  Doing this now allows NPCs and others to be able to be
+                 concealed at higher levels than their cmdlevel.  For this added
+                 flexibility, all validation must now be done within scripts!
+
+05-16 Myrathi
+    Removed deprecated operators and tokens (as promised! :P'):
+        - '=' has been removed; use '==' to test for equality.
+          (appropriate suggestions will be made for '==' or ':=')
+        - 'local', 'global' and 'dim' have been removed; use 'var' to declare variables.
+        - 'begin' and 'end' have been removed:
+			do..while() loops now work without them.
+			repeat..until() loops never actually needed them: so no loss. :)
+
+        ** Scripts containing any of the removed operators or tokens **
+        **     WILL NOT COMPILE ANY MORE!! Update your scripts!!     **
+
+05-12 Myrathi
+	Fixed: Mobile 'mob.frozen' flag is now saved properly (NOTE: this includes PCs and
+		will most likely require any existing scripted workarounds to be rewritten!)
+
+	Added: Extra 'spell_id' parameter is now passed to spell scripts which relates to
+		'SPELLID' in the spell's entry in '::spells.cfg'.
+
+		Example:
+			use uo;
+			program spellscript( who, spell_id )
+				SendSysMessage(who, "Casting SPELLID# " + CStr(spell_id));
+				// "Clumsy" has spell_id = 1, "Create Food" = 2, etc..
+			endprogram
+
+05-01 Birdy
+	Fixed: Number of Map/Static patches was reversed in the enable difs packet.
+
+05-01 Racalac
+    Fixed CProps "GivenBy", "GivenTo", and "GivenTime" set on items dropped on NPCs.
+
+04-26 Birdy
+    Added: New uo.em function created :
+        FindSubstance( container, objtype, amount, makeinuse := 0 )
+        This function will search the given container for items of objtype in an
+        amount equal or greater than the amount given(stackables can return greater
+        than #), if makeinuse is set to 1, then the items will be reserved.  If
+        sufficient # of items have been found, those found(and possibly reserved)
+        will be returned in an array as the return value.  If not enough of the
+        given item were found, then an error with errortext = "Not enough of that
+        substance in container" will be returned.
+
+04-25 Racalac
+    Added new house methods that allow write access to the house.components array.
+        house.add_component(item ref)
+        house.erase_component(item ref)
+    Added multi member:
+        multi.footprint
+            returns a struct with "xmin", "xmax", "ymin", "ymax" of the world coordinates
+            the house or boat occupies.
+    Added GetMultiDimensions(graphic), returns struct with "xmin", "xmax", "ymin", "ymax"
+        of _relative_ distances from center. xmin and ymin are _negative_.
+    Changed TargetMultiPlacement. new optional parameters:
+        TargetMultiPlacement( character, objtype, flags := 0, xoffset := 0, yoffset := 0 );
+        xoffset and yoffset change the "ghost" target house. NOTE: the coordinates returned
+        by this are the coordinates of the "target" cursor, not the center of the house!
+        So if you want to have the front steps be under the cursor, you must transform the
+        parameters to CreateMultiAtLocation to include your xoffset and yoffset. ANOTHER
+        NOTE: positive offsets move the cursor left/down in relation to the ghost house.
+        When transforming the coordinates for CreateMultiAtLocation, use the negative (i.e
+        if yoffset is 4, subtract 4 from the y coordinate result of TargetMultiPlacement
+        when passing the location to CreateMultiAtLocation.
+        Example, using the front steps to target:
+            var dims := GetMultiDimensions( 0x6071 );
+            if(!dims) return; endif
+            var loc := TargetMultiPlacement( who, 0x6071, 0, 0, dims.ymax );
+            if(!loc) return; endif
+            var house := CreateMultiAtLocation( loc.x, loc.y - dims.ymax, loc.z, 0x6071, 0, who.realm );
+
+
+04-24 Racalac
+    Armor Zone 0 errors hae a better message now.
+    Half-created PCs shouldn't get into the world file now.
+    Added house.custom() returns 1/0 (for upcoming custom house support)
+    NPC move functions check the current realm's bounds
+    CreateItemAtLocation correctly checks passed coordinates for validity for the realm
+    Map methods (insertpin, etc) check the current realm's bounds. Not like there's art for
+        the other realms anyway.
+    Packet 0x1B changed to include correct map/server bounds
+
+04-23 Birdy
+	Changed: Mounts listed in uoconvert.cfg that are not found to have tiledata.mul
+		entries will now be created regardless.  Should fix problems related to
+		0x3ea2 mount(perhaps others too), which has no tiledata.mul entry, yet
+		is a valid mount graphic.
+
+04-20 Birdy
+	Fixed: FindPath(...) should work again now.
+
+04-17 Birdy
+	Changed: Speech.mul -- Added in support for UTF-8 -> Unicode decoding in speech.mul
+		packets.  Should work now (hopefully) for all languages.
+	Fixed: Minor tweaks to movement.  Should fix some bounceback problems.
+
+04-17 Racalac
+	Multimap/Realm Support
+	----------------------
+	POL now supports seperate maps, or "Realms", such as britannia, ilshenar,
+	and malas. The uoconvert tool is the starting point for using realms on
+	your shard. Run the updated instructions in the included uoconvert.txt
+	help file. The names of the directories created in pol/realms by uoconvert
+	are the realm names that are used by the core and your scripts. I
+	recommend you keep them the same as what is in the uoconvert.txt file.
+	Realm names are the key to using realms on your shard.
+
+	The client's *.dif files should be used in the uoconvert process, as the
+	client needs to know how many patches exist. Any time the .dif files
+	change on the client side, re-run uoconvert with the new .dif files to
+	stay in sync.
+
+
+	Object Changes:
+	UObject.realm: Read-only string. (This inherits to Item, Character, Multi, etc)
+
+	Account.uo_expansion: Read-only string
+	Account.set_uo_expansion(string): recognized values: AOS, LBR, T2A (default)
+	  This determines what flag is sent with packet 0xB9 during login. The
+	  servspecopt.cfg UOFeatureEnable is used with packet 0xA9 and is currently
+	  global to all clients.
+
+	Packet.SendAreaPacket(x,y,range,realm), realm name string parameter added.
+
+	Escript Module Changes:
+	polsys.em:
+		Added "Realms()": returns a dictionary of structs. example:
+			"realm_name" -> "width"
+						    "height"
+						    "mapid"
+						    "toplevel_item_count"
+						    "mobile_count"
+
+	uo.em (included with zip):
+	The following functions were enhanced with a realm parameter (all realm
+	parameters are a case-sensative string name of the realm). All other
+	functions use some object's context for determining the realm.
+
+	Tip for upgrading: all your scripts should works normall _in Britannia_.
+	In any other realm they will fail. You must find all occurances of these
+	functions on your shard and fill in the realm parameter with an appropriate
+	value. For example, in the createnpc textcommand, the call to
+	CreateNPCAtLocation should be made with 'who.realm' as the last parameter.
+	Many script changes are easy like this, others are harder, like
+	spawnregion and recall/gate spells. If something doesn't work, you can be
+	fairly sure it's due to an incorrect realm parameter. The pol-distro
+	sourceforge project has been updated with many of these changes if you
+	wish to look.
+
+	const _DEFAULT_REALM := "britannia";
+	CreateItemAtLocation( x, y, z, objtype, amount := 1, realm := _DEFAULT_REALM );
+	CreateMultiAtLocation( x, y, z, objtype, flags := 0, realm := _DEFAULT_REALM );
+	CreateNpcFromTemplate( template, x, y, z, override_properties := 0, realm := _DEFAULT_REALM);
+	FindPath( x1, y1, z1, x2, y2, z2, realm := _DEFAULT_REALM, mobilesblock := 0, searchskirt := 5 );
+	GetHarvestDifficulty( resource, x, y, tiletype, realm := _DEFAULT_REALM );
+	GetMapInfo( x, y, realm := _DEFAULT_REALM );
+	GetRegionString( resource, x, y, propertyname, realm := _DEFAULT_REALM );
+	GetStandingHeight( x, y, startz, realm := _DEFAULT_REALM );
+	GetWorldHeight( x, y, realm := _DEFAULT_REALM );
+	HarvestResource( resource, x, y, b, n, realm := _DEFAULT_REALM ); // returns b*a where 0 <= a <= n
+	ListGhostsNearLocation( x, y, z, range, realm := _DEFAULT_REALM );
+	ListItemsAtLocation( x, y, z, realm := _DEFAULT_REALM );
+	ListItemsNearLocation( x, y, z, range, realm := _DEFAULT_REALM );
+	ListItemsNearLocationOfType( x,y,z, range, objtype, realm := _DEFAULT_REALM );
+	ListItemsNearLocationWithFlag( x,y,z, range, flags, realm := _DEFAULT_REALM );
+	ListMobilesNearLocation( x, y, z, range, realm := _DEFAULT_REALM );
+	ListMobilesNearLocationEx( x,y,z, range, flags, realm := _DEFAULT_REALM );
+	ListObjectsInBox( x1,y1,z1, x2,y2,z2, realm := _DEFAULT_REALM );
+	ListMultisInBox( x1,y1,z1, x2,y2,z2, realm := _DEFAULT_REALM );
+	PlayMovingEffectXYZ( srcx, srcy, srcz, dstx, dsty, dstz, effect, speed, loop := 0, explode := 0, realm := _DEFAULT_REALM );
+	PlayStationaryEffect( x, y, z, effect, speed, loop := 0, explode := 0, realm := _DEFAULT_REALM );
+
+	Functions added:
+	MoveObjectToRealm( object, realm, x, y, z, flags := 0 );
+		--This is the only write interface to an object's realm. If you wish
+		an object to reside on another realm, this is the only function
+		available. Check obj.realm != destination_realm to avoid unnecessary
+		same-realm transfers. flags is the normal MoveItem|CharacterToLocation
+		flags. The passed x,y,z must be a standable location in the specified
+		realm.
+
+	Most of these functions will return the errors "Realm not found" and
+	    "Invalid Coordinates for realm".
+
+
+	Regions:
+	Added "Realm realmname" property
+
+	poltool:
+	added a 5th parameter for the 'mapdump' command, a realm name string as above
+
+	uoconvert:
+	number of map and static patches (from mapdif and stadif files) saved to
+	   /realm/[name]/realm.cfg
+	Recommend to turn on mapdifs for all realms.
+
+
+	Other Changes:
+	AOS Spellbook packets are supported. For this, change you spellbook's
+	itemdesc.cfg type from Container to Spellbook. Paladin and Necromancer
+	spellbooks are supported by the new Spellbook itemdesc type property
+	"SpellType" which is one of these strings: "Magic", "Paladin", "Necro".
+
+	Recognized scroll objects are: Magic: 0x1F2D - 0x1F6C, Necro 0x2260 - 0x226F,
+	    Paladin: 0x2270 - 0x227C. Sorry this is hardcoded :P
+
+	Simple support for AOS tooltips - old single click functionality is supported.
+
+	Custom Houses - not yet sorry, that's next!
+
+
+04-01 Birdy
+	Added: 	MaxPathFindRange servspecopt[.local].cfg option added.  This will define the
+			maximum distance between the start and destination points which pathfinding
+			will be performed on.  If PathFind is called on points greater than this
+			value, an error result will be returned with "Beyond Max Range." as the
+			errortext.  Default value for this is 50.
+	Added:	HiddenTurnsCount servspecopt[.local].cfg option added.  This will define
+			whether or not turns made while hidden will count as a "move".  It defaults
+			to 1, which is the way POL has always operated.  If set to zero, then if
+			you are hidden and make a turn, it will not count against your stealth steps,
+			nor will it unhide you if you are not stealthing.  If set to one, turns while
+			hidden do count against stealthsteps, and will unhide you if you are not
+			stealthing.
+	Added:  New uo.em function added, UseItem(item, character);  This will allow the
+			item specified's use script to be run by the character specified.  No checks
+			are done for distance, or check for being a ghost, or anything else.
+			Essentially, the script is just fired off on the character without checks, so
+			the script calling this function should do those checks if desired.  This
+			function can also be called with NPC's as the character, but any use script
+			that requires interactivity with it's user that is called on an NPC may have
+			unpredictable results(dependant on the script).
+	Added:  UOConvert now will report the (x,y,z) of invalid tiles that cause it to
+			abort map conversion instead of just aborting.
+
+03-29 Birdy
+	Fixed: Caves should now be able to be walked into.  Some problems along shores fixed too.
+			Run UOconvert on your files for this fix to work.
+
+03-24 Birdy
+	Changed: Character height in all other aspects changed to 15 from 9 to better reflect height in
+			 game relative to items.
+	Changed: Walking related to ladders modified to try to help in their traversal.
+	Changed: The map now should block LOS.  Run UOconvert on all your files again! (see uoconvert.txt
+			 for instructions)
+	Fixed: Speech.mul should now display speech with keywords even when on a non-ENU region computer.
+	Changed: Boats now check height of blockables in relation to the boat before being
+			 blocked by them.  This should allow boats to travel under sufficiently high
+			 bridges and over statics that may be under the map.
+	Added: Pathfinding function FindPath.  This is a very experimental function and has a minute
+			chance of returning a "Path Corrupted" error.  If you use it and can find a distinct
+			path from point A to point B which generates a "Path Corrupted" error, please send
+			details to the dev team.
+
+			Function prototype is found in uo.em and takes the form :
+
+			FindPath( x1, y1, z1, x2, y2, z2, realm := _DEFAULT_REALM, mobilesblock := 0, searchskirt := 5 );
+
+			(x1,y1,z1) = start of the path
+			(x2,y2,z2) = destination
+			mobilesblock = Whether or not to consider mobiles in the way as 'blocking' the path.
+			searchskirt = The skirt around the square that is formed around the start of the path
+						  to the destination which represents the searchable area.
+
+			If it finds a path it will return an array of coordinates, representing each step
+			along the path from the next step to take from the start of the path to the actual
+			destination.  The coordinates are found in .x, .y, and .z.  Ex :
+
+			myPath := FindPath(startx, starty, startz, endx, endy, endz);
+
+			The first step to take from a standing position at (startx,starty,startz) would be
+			at (myPath[1].x, myPath[1].y, myPath[1].z), the next at (myPath[2].x, myPath[2].y,
+			myPath[2].z), etc.
+
+			Keep in mind that if you want you can give as large a search area as you want, and
+			it will try to find the area.  But the larger the search area(ie, the larger the
+			distance from start to destination), the more memory and more time it will take to
+			find a path.  Trying to search, for instance, for a path from Yew to Britain will
+			almost certainly freeze your shard and gobble up all it's memory.  No restrictions
+			were placed in core in order to allow for use of the function with future computers
+			which may indeed one day be able to search for such a path in a split second.  But
+			that leaves the responsibility on the scripter using the function to be certain to
+			not try to search for outrageously large paths.  My experience is that paths of
+			20 or less tiles are fairly quick and low impact on the server.
+
+			Several errors can be returned instead, with the following errortext messages :
+
+			"Failed to find a path."  --  The typical error returned when a path hasn't been found.
+			"Out of memory."          --  This will only happen if there isn't sufficient memory to perform the search.
+			"Solution Corrupted!"     --  This is an error that rarely seems to happen, but if you can get it to
+										  happen repeatedly along a static(non-changing) specific path, please
+										  report it to birdy at polserver.com
+			"Pathfind Error."         --  A catch-all error for various other circumstances, assume no path could be found.
+
+>>>>>>> 1.192.4.30
+03-04 Birdy
+	Changed: Character look height changed to 15 from 9 to better reflect height in game relative
+			to items.
+	Added: uoconvert.cfg element option added, LOSOptions, in the following form:
+				LOSOptions
+				{
+					UseNoShoot        1
+					LOSThroughWindows 1
+				}
+			UseNoShoot means uoconvert will determine whether or not something blocks LOS by use of
+			the NoShoot tiledata flag instead of the Blocking tiledata flag.  A couple of special
+			cases exist for secret door items and blocking items that are walls(in both cases, LOS
+			will be hindered), but otherwise the NoShoot tiledata flag will be used.  This should
+			make many blocking, yet not really LOS blocking items no longer block sight, such as
+			candelabras, lamp posts, and such.
+			LOSThroughWindows only matters if UseNoShoot is 1.  If LOSThroughWindows is 1, then
+			items marked as windows in tiledata will not impede LOS.
+			Both of these options default to false.  When UseNoShoot is false, the old method of
+			determining sight blocking as being equivalent to ability to pass will be used for LOS.
+	Added: uoconvert.cfg element option added, Mounts, in the following form:
+				Mounts
+				{
+					Tiles  0x3ea0 0x3ea1 0x3ea2 0x3ea3 0x3ea4 0x3ea5 0x3ea6 0x3ea8 0x3ea9 0x3eb0 0x3eb2 0x3eb3 0x3e9f
+				}
+			If this element exists, and if Tiles exist within it, then those tiles with the graphic IDs
+			listed will be considered to be mounts by uoconvert and will set the layer to be the
+			mount layer and it will set the tile to be equippable.
+
+	Added: New System Hook : SpeechMul -- This hook will be activated when someone using a client with speech.mul
+			in it says a speech.mul keyword(one or more).  The person who spoke is passed as the first parameter
+			and an array containing each of the speech tokens they spoke is passed as the second parameter.
+			This is a very experimental hook, so use at your own risk!  Though I would like to know if it works,
+			particularly on non-english systems.  For ENU players/admins, whether you have a hook or not, these
+			changes should make it such that you no longer "lose text" that has speech.mul tokens in it.
+
+			If you wish to write a syshook script for speech.mul tokens, you will need a syshook.cfg file with
+			the following in it.  This should be in a package of some sort too of course.
+
+				SystemHookScript speechmulhook.ecl
+				{
+					SpeechMul SpeechMul
+				}
+
+			The following is an example of a very simple hook called speechmulhook.src.  It is, of course, up to
+			you to make something actually useful. :
+
+				use uo;
+
+				program SpeechMulHook()
+				    return 1; //change to 1 to enable the hook
+				endprogram
+
+				exported function SpeechMul(who, speechtokens) //note passed ARRAY of speech.mul tokens
+
+				    Print("Tokens : ");
+				    foreach token in speechtokens
+						Print(CStr(token));
+					endforeach
+
+				endfunction
+
+12-27 Racalac
+    Fixed invisible corpse clothing
+    Fixed boat member access
+    Fixed (maybe) first non-nodraw tile in multi definition flagged as static by uoconvert
+    Changed core visibility function - characters now can always see themselves. Fix for
+        equipping items while hidden not showing until unhiding.
+
+12-06 Racalac
+    Fixed: Invisible items in containers caused random items to become temporarily invisible
+    Fixed: default doubleclick range for items without an itemdesc entry wasn't reading from servspecopt.cfg
+
+11-16 Racalac
+    Fixed: member access to account and script objects (and any dicts/structs with the same key names)
+        Recompile your scripts! Keep testing, find my errors! :)
+    Changed: logged-off players are now considered not visible for any/all systems that check visibility.
+
+11-15 Racalac
+    poltool: prints flag descriptions
+    Fixed: height 1 "half-height" tiles no longer considered height 0.
+    Fixed: crash by passing 0 to SystemFindBoatBySerial
+    Fixed: account object method fall-through. d'oh!
+
+11-10 Racalac
+    Fixed member access to datastore, script, and guild objects. Keep testing!
+    Changed: equipment.container returns an "offline" character reference when equipped.
+
+11-09 Racalac
+    Changed: invisible items in containers can't be seen by those without the seeinvisitems priv
+    Major Changes: New ecompile version! Changed the way object methods and members are set and get.
+        This should give a moderate to major speed enhancement to script execution. Please report
+        any weirdness you encounter with respect to setting and getting object (and struct/dict)
+        members, calling object methods, and methodscripts (that may or may not override core-defined
+        methods).
+        Temporary new ecompile/ecompile.cfg option: specifiy the -m command-line paramter to compile
+            using the old way, or set "OptimizeObjectMembers" in ecompile.cfg to 0 (1 by default).
+            This option will go away when I'm satisfied this new code works.
+
+11-01 Racalac (not in 11-01 test core)
+    Fixed: water statics above walkable map no longer blocks movement below
+    Fixed: second equipped item in a layer no longer stored as "gotten" (fixes crash on save?)
+
+10-31 Racalac
+    Items with no defined itemdesc.cfg entry (walls, floors, etc) will use the
+        servspecopt.cfg values for decay time and dblclickrange.
+    Added character.cleargottenitem(). Returns "dragged" item to original
+        location. There's an graphical glitch with the client that makes it
+        look like the item is duplicated. The item that appears to remain on
+        the cursor is not really there.
+    uoconvert: changed map structure to allow building dynamic items and walking
+        around on them. RECONVERT YOUR MAP!
+    Allowed movement in places like T2A with dramatic Z changes in the map.
+    Fixed: certain script parameters were being flagged wrongly as out-of-range
+    Fixed: (maybe) If a layer is already equipped, trying to equip another item
+        on that layer will return the item to its original location (3D client thing).
+    Added Npcdesc.cfg property: AttackAnimation (default 0 (wrestling)), use this
+         change the template's intrinsic weapon animation (i.e. for LBR npcs)
+
+10-25 Racalac
+	Added uoconvert.cfg for defining what multi IDs are what type (Boat, House, Stairs (AOS)). See included file for 'normal' values.
+	Added for Packet Hooks: SubCommandLength property for 'parent' packets: 1, 2, or 4 byte lengths for subcommand fields.
+		Example:
+		Packet 0x12 //Macro/Spell/Action
+		{
+			Length variable
+			SubCommandOffset 3
+			SubCommandLength 1 //unlike cmd BF, the subcommand is 1 byte, not 2
+		}
+		SubPacket 0x12
+		{
+			SubCommandID 0xC7 //bow or salute
+			ReceiveFunction command_12:HandleC7Action
+		}
+
+09-27 Racalac
+    Fixed improper cleanup of accounts and player characters on exit, leftovers.txt should be reduced in size now.
+    Maybe fixed a memory leak in the packet hook system.
+
+09-08 Racalac
+    Fixed a crash condition concerning multis and movement.
+    Added error messages if missing realm files.
+
+    uoconvert: handles a specific poorly formed staidx block
+
+09-06 Racalac
+    uotool reads pol.cfg from the same dir to find the MUL files.
+    uotool & poltool usage statements updated
+    Example to fix mounts, add en entry like this in tiles.cfg for each of your mount types (i.e. listed in tamed.src)
+    Remember running "uoconvert tiles" will not save your manual changes.
+    tile 0x3ea2
+    {
+        Desc mount
+        UoFlags 0x04404000
+        Layer 25
+        Height 3
+        Weight 0
+        Equippable 1
+        Movable 1
+    }
+    Changed UOConvert handling of blocking flags, probably fixing NPCs walking through fences, etc. Please re-run UOconvert.
+    Syz changed uoconvert to be more friendly to tool-created map and statics MULs.
+
+08-21 Racalac
+    Turned off core sends of Packet oxB9 (UO expansion enable) for now, it will return!
+    Fixed bug with CreatePacket with specified cmdtype with fixed-length.
+
+08-20 Racalac
+    Fixed a bug in multis walking code introduced in the 08-19 testcore.
+
+08-16 Syzygy
+    The 'Summon Water Elemental' spell must now be in the spellbook to be cast.
+
+08-14 Syzygy
+    Fixed a LOS issue when doubleclicking an item stored in an NPC's backpack
+
+08-13 Syzygy
+    corrected an error where a client could be redirected to the wrong server if servers.cfg specified 'IPMatch' directives.
+    corrected an error which would not allow a mob to drop an item to a lower Z.
+    at death, those added to your "reportable" list will no longer be marked aggressor to you.
+    at death, those added to your "reportable" list will no longer be marked as having lawfully damaged you.
+      (this is imperfect - all your aggressors, and lawful damagers, should be cleared at your death)
+
+08-09 Syzygy
+    pol.exe no longer uses .mul files.  See uoconvert.txt for notes (you will use uoconvert to generate pol data files)
+      notable changes:
+         a door will only be ignored if its itemdesc entry says it's a door
+           (previously, used the tiledata.mul "door" flag to tell)
+      I do not recommend editing multis.cfg, tiles.cfg, or landtiles.cfg by hand - as uoconvert is young, it's likely
+      that you'll have to regenerate these files from the .mul files soon.
+
+08-05 Syzygy
+    Removed 'UseDynamicMapCache' pol.cfg option and related code
+
+07-27 Syzygy
+    CreateNpcFromTemplate will now accept a struct, or an array (with element names), specifying custom properties
+
+07-26 Racalac
+    Fixed creating armor items with GetItemDescriptor
+    Added: Packet Hook Scripts. See packethooks.txt. Don't try to hook AOS packets or I'll cry.
+
+06-20 Syzygy
+    account.GetCharacter(index) will notice if you pass 0, which is bad.
+        account.DeleteCharacter(index) - same
+
+-- POL095 --
+07-03 Syzygy
+    Added length validation for the 0xBD (client version) packet.
+
+07-01 Syzygy
+    ecompile looks for ecompile.cfg in the current directory before looking where the binary is.
+    ecompile now flags the following as errors:
+        var s := "1234" + ;
+        var a := +;
+        var a := { 4, +, 6 };
+
+06-30 Racalac
+    account.SetName() takes an optional second parameter for new account password. If you have RetainCleartextPasswords=0,
+        then you must pass a new account password, or you will get an error.
+    default WeatherType for a region is now 255 (no weather), not 0 (rain).
+
+06-30 Syzygy
+    Corrected a crash exception on character creation if a control character was included in the name.
+    Fixed a crash bug when displaying corpses in some circumstances.
+
+06-25 Syzygy
+    Items which specify "SaveOnExit 0" will have serials allocated from the same range as normal items.
+      This also fixes a bug where duplicate serials could be allocated for nonsaved items.
+
+06-24 Racalac
+    Changed MD5 hashing flags to work on a broader range of windows installations.
+    Instrinsic NPC weapons now are read-only for: hp, maxhp_mod, quality, dmg_mod.
+
+06-20 Syzygy
+    account.GetCharacter and account.DeleteCharacter will no longer accept an index of 0
+    Fixed a problem with character creation that could result in characters being written
+      with 'CharIdx -1' (these were all failed character creations)
+    Character creation will refuse to create a character with control characters in the name (newline, for example)
+
+06-19 Racalac
+    Added a 2 minute timeout for closing sockets POL has not received any data on. The client normally sends keep-alive
+        messages every 60 seconds. This may fix the "number of connections reported much higher than the number of clients"
+        bug.
+
+06-19 Syzygy
+    Fixed an access violation if a negative X or negative Y value was passed to various functions
+
+    canInsert / onInsert script rework, part 3: changing parameter order to make things more consistent:
+        adding an amount to existing stack:
+          canInsert( mob, container, movetype, INSERT_INCREASE_STACK, adding_item, existing_stack, amt_to_add )
+          onInsert( mob, container, movetype, INSERT_INCREASE_STACK, uninit, existing_stack, amt_to_add )
+          (NOTE: for canInsert, adding_item can be an uninit, if one of the CreateItem functions is merely adding to an existing stack.
+           By the time onInsert is called, adding_item is gone.)
+        adding new item:
+          canInsert( mob, container, movetype, INSERT_ADD_ITEM, adding_item )
+          onInsert( mob, container, movetype, INSERT_ADD_ITEM, adding_item )
+
+    Fixed a race condition which could cause socket error 10038
+
+06-18 Syzygy
+    escript: array + array will return a concatenation of the arrays:
+           { 3,2,6 } + {6,4}  returns {3,2,6,6,4}
+    AddMenuItem will once again accept 0 as a valid objtype
+    TargetMultiPlacement will once again accept objtype values between 0x4000 and 0x4fff
+
+    **** A VERY SPECIAL NOTE ****
+       It would be best if you defined all your your objtypes in the range 0x5000 to 0xEFFF.
+       See notes under POL092-2000-12-11 for how to specify OldObjType in itemdesc.cfg to convert objtypes at load time.
+    *** END VERY SPECIAL NOTE ***
+
+06-16 Syzygy
+    Fixed typo in RESURRECT_FORCELOCATION flag
+    The main listen thread will no longer be started if ListenPort=0
+
+    All intrinsic weapons and storage area root items are now always marked inuse
+        - this way, DestroyItem, EquipItem, dragging etc won't work on these types of items
+        (this was a cause of the dreaded 'itr != wc.items.end()' assertion failures)
+
+    Fixed a memory leak in GetItemDescriptor()
+    Added sanity checking in GetItemDescriptor use in case you set descriptor.CProps to other than a dictionary,
+     or StackingIgnoresCProps to other than an array, to detect this rather than crash.
+
+    canInsert / onInsert script rework, part 2:
+      old:
+        can/onInsert( owner, container, item, movetype )
+        can/onInsert( owner, container, item, movetype, amtadded ) (sometimes)
+      new:
+        adding an amount to existing stack:
+          canInsert( mob, container, movetype, INSERT_INCREASE_STACK, existing_item, amt_to_add, adding_item )
+          onInsert( mob, container, movetype, INSERT_INCREASE_STACK, existing_item, amt_to_add )
+          (NOTE: adding_item can be an uninit, if one of the CreateItem functions is merely adding to an existing stack.
+           By the time onInsert is called, adding_item is gone.)
+        adding new item:
+          canInsert( mob, container, movetype, INSERT_ADD_ITEM, new_item )
+          onInsert( mob, container, movetype, INSERT_ADD_ITEM, new_item )
+
+      These are the times when canInsert / onInsert scripts are called:
+        Client drag/drop
+        vendor buy: when moving items to the player's backpack
+        vendor sell: when putting gold in the player's backpack
+        secure trade, when cancelling or confirming a trade
+        MoveItemToContainer
+        CreateItemInContainer
+        CreateItemInInventory
+        CreateItemInBackpack
+
+    Since I didn't actually test the backtrace-on-assertion functionality under Linux, it didn't work.
+      Now it does.
+
+    console.cfg is now reloadable (ReloadConfiguration, or SIGHUP)
+
+    Added file.em module:
+        ReadFile( filename ): read a text file
+            reads a text file
+            returns contents as an array of strings
+            removing newlines
+        WriteFile( filename, contents ): write a text file
+            contents is an array of strings.
+            appends newlines.
+            creates file if it does not exist.
+            renames existing file to filename.bak
+        AppendToFile( filename, morelines ): append to a text file
+            morelines: an array of strings
+            appends newlines.
+            creates file if it does not exist.
+        LogToFile( filename, textline ): append a single line to a text file
+            appends newlines.
+            creates file if it does not exist.
+        By default, no package has any file access rights.
+        config/fileaccess.cfg: reloadable config file, grants access.  Example:
+            FileAccess
+            {
+	            AllowRead 1
+	            AllowRemote 1
+	            Package testfileaccess
+	            Extension .cfg
+	            Extension .src
+            }
+
+            FileAccess
+            {
+	            AllowWrite 1
+	            AllowRemote 0
+	            Package testfileaccess
+	            Extension .txt
+            }
+
+            FileAccess
+            {
+	            AllowAppend 1
+	            Package *
+	            Extension .log
+            }
+
+
+
+06-15 Syzygy
+    new pol.cfg option: AssertionFailureAction = abort/continue/shutdown/shutdown-nosave
+        abort: (like old behavior) aborts immediately, without saving data.
+        continue: allows execution to continue.
+        shutdown: attempts graceful shutdown
+        shutdown-nosave: attempts graceful shutdown, without saving data.
+
+        If the assertion occurred during execution of a script, either 'shutdown', 'shutdown-nosave', or 'continue'
+        will abort that script, displaying the script name and PC.
+
+    Added uo.em function: ListMultisInBox(x1,y1,z1, x2,y2,z2) lists multis that have at least one static within the volume specified.
+    Resurrect takes an optional parameter.  If you pass RESURRECT_FORCELOCATION, will not check for blocking objects.
+        Be sure you know what you're doing if you pass this flag.
+
+    Just a note: if you're using Listener entries in uoclient.cfg, you should set ListenPort=0 in pol.cfg
+
+    ecompile: uses ECOMPILE_CFG_PATH environment variable to find ecompile.cfg, if present.
+      (note that normally it tries to look where the executable is.  Some shells don't always pass this,
+       particularly if you're using batch files or shell scripts - try putting the full path to ecompile in your batch file)
+    Added a bewildering number of options to ecompile.cfg:
+        DisplayWarnings = 0/1               (same as -w flag)
+        CompileAspPages = 0/1               (same as -a flag)
+        OnlyCompileUpdatedScripts = 0/1     (same as -u flag)
+        GenerateDependencyInfo = 0/1        Generate .dep files whether or not updating
+        DisplayUpToDateScripts = 0/1        Display the "xxx/script.ecl is up-to-date" message, or not.
+        AutoCompileByDefault = 0/1          If set, and you don't pass any script names or -r or -A, will perform an auto compile.
+        UpdateOnlyOnAutoCompile = 0/1       If set, autocompile will only update modified scripts.
+        DisplaySummary = 0/1                Displays overall totals after compilation, unless compilation aborted due to a compile error.
+      These are the settings I like:
+        GenerateListing		    1
+        GenerateDebugInfo	    1
+        GenerateDebugTextInfo	1
+        DisplayWarnings         1
+        CompileAspPages         1
+        AutoCompileByDefault    1
+        UpdateOnlyOnAutoCompile 1
+        OnlyCompileUpdatedScripts   1
+        DisplaySummary          1
+        GenerateDependencyInfo  1
+        DisplayUpToDateScripts  0
+        This way, if I'm editing scripts, I just type 'ecompile' and it compiles everything that's
+        changed.  If I want to compile a particular file, I pass its .src name on the command line.
+
+
+06-13 Syzygy
+    mob.backpack.container now returns a mobileref to the owner.
+    bugfix: buyprice was sometimes being incorrectly read as 2147483647, after being
+            gratuitously written as 4294967295.  This value is now detected and ignored.
+    Resurrect() will return an error if the mobile's location would be blocked if the mob were alive (ie by a door)
+    LOS to an object is no longer blocked by the parts of other objects that share the same space with it.
+        For example, this means:
+            If two chests sit at the same place, neither blocks LOS to the other.
+            If one chest is at Z=1, and the other at Z=2, LOS to the first can be blocked by the second, if looking from above.
+            If a ghost is standing in a closed doorway, you can still have LOS to it. (but note the change to Resurrect above)
+    Fixed: When sending mana level, sometimes the "current value" would be sent in place of the "maximum value", making it look like the mob had 100% mana.
+    ondelete scripts are now passed an offline mobileref.
+    Minor overhaul for onInsert scripts:
+        MoveItemToContainer:
+             now calls onInsert script _after_ putting the item in the container.
+        CreateItemInContainer, CreateItemInInventory, CreateItemInBackpack:
+             now call the onInsert script _after_ putting the item in the container.
+             when adding to an existing stack, passes the "amount added" as noted in the POL092 changelog.
+               (it was passing the size of the existing stack)
+         !!
+           I have just noticed that when any of these adds to an existing stack, the canInsert
+           script is called with these parameters: canInsert( mobile, container, existing_stack_already_within_container, MOVETYPE_PLAYER )
+           This is no good.  More thought required.
+        When purchasing from a vendor:
+            onInsert called _after_ putting the item in the PC's backpack.
+
+
+06-12 Syzygy
+    escript changes:
+        Added (yet another) syntax for declaring initialized arrays:
+            var x := array { 4, 3, 2 };
+            this is more consistent with struct { x, y, z } initializer syntax.
+            array(8,3,2) looks too much like it's creating a multi-dimensional array, so I don't like it anymore.
+        Added syntax for declaring initialized dictionaries:
+            var x := dictionary { "abx" -> 72, "xyz" -> 32 }; // direct
+            var key := 5, value := "x";
+            var x := dictionary { key -> value };       // indirect
+            var x := dictionary { "abc", "cyz" }; // values start as uninit
+            var pfx := "X";
+            var v := 7;
+            var x := dictionary { pfx+"abx" -> 72, pfx+"xyz" -> 32+v }; // with expressions
+        These are the preferred forms for declarations (see how they match?)
+            var x := array;
+            var x := dictionary;
+            var x := array { 53, 76, 32 };
+            var x := struct { x, y, z };
+            var x := dictionary { "ABC" -> 62 };
+
+        Expressions like these will now be flagged as errors by the compiler:
+            var x := { 2, 6, };
+            var x := array { 2, 6, };
+            var x := array( 2, 4, };
+            var x := struct { a, y, };
+            var x := 4 array;
+
+        bitwise operations are now optimizable:
+            int & int
+            int | int
+            int ^ int
+            ~ int
+
+    ecompile changes:
+        new ecompile option: -C <config file path>
+        new ecompile option: -A
+            "Auto compile", I guess - compiles scripts in your PolScriptRoot and all enabled packages under your PackageRoot directories.
+              (like -r, but knows where to go, using ecompile.cfg)
+
+        Fixed two memory leaks.  ecompile is now much more svelte when it runs, especially on directory trees.
+
+
+
+06-11 Syzygy
+    structs will again allow the obj[ keyname ] syntax, but only for strings.
+      if you pass a number, your script will abort.  If you pass another kind of object,
+      an error will be returned.  This is meant to help you quickly find cases where a script
+      pretends that a struct is an array, which is not the case.
+    fixed a compiler bug where the following would compile:
+        var a, b, c;
+        a := b { c, b };
+    AppendConfigElem will either accept an array of arrays, as it does now,
+      or an array of struct { name, value }
+
+
+06-10 Syzygy
+    linux: SIGUSR2 will now display a stack backtrace to console, and continue execution.
+    linux: properly set socket nonblocking options after accept()
+      (learned, first from intense googling, then ironically enough from 'man accept', that
+       linux can't be bothered to adhere to BSD norms in the "BSD sockets" interface, and
+       instead discards socket options on accept()'ed connections)
+       Note: there's a hole in the aux client interface obj.transmit() function, where it
+             can still block, but it shouldn't be a problem if you're just using it to feed
+             a local web server.
+
+06-10 Syzygy
+    It is once again possible to use mobrefs / itemrefs etc as keys to dictionaries.
+    structs are now totally different objects than dictionaries.  They can only contain named members,
+     and the [] operator no longer functions on them.
+     Also, struct names are now case-insensitive
+     For structs, you should use operations like this:
+       var a := struct { x, y, z };
+       a.x := 5;
+       var b := struct;
+       b.+g := 6;
+     For dictionaries, you should use operations like this:
+       var a := dictionary;
+       a[57] := 4;
+       a["XY"] := "Z";
+       a.erase( "XY" );
+
+
+06-09 Syzygy
+    removed 'SellPrice 4294967295' and 'BuyPrice 4294967295' spam from items.txt etc.
+    revised signal handling for linux.
+
+06-08 Syzygy
+    Added dirty flag to all mobiles/items.  This should be set when anything on the object changes, and cleared on world save.
+    Fixed a crash bug when a container previously send with SendOpenSpecialContainer was deleted.
+    Fixed a crash bug on shutdown having to do with the thread registry.
+    SaveWorldState() now returns a structure on success:
+        struct { CleanObjects, DirtyObjects, ElapsedMilliseconds };
+    internal change: The following will now return a true 'struct', rather than an array bastardized with element names:
+        (If you access these with obj.elemname you will have no trouble; if you use obj[1] etc you will have to make changes)
+        object methods/properties:
+            mobile.reportables
+            polcore().script_profiles
+            polcore().iostats
+            polcore().queued_iostats
+        uo.em:
+            TargetCoordinates
+            SelectMenuItem
+            GetPosition
+            GetMapInfo
+            GetStandingHeight
+        npc.em:
+            Position()
+        events (all):
+            speech events
+            unicode speech events
+            damaged events
+            engage events
+            disengage events
+            item-given events
+    dictionary object methods now explictly check that key objects are either an integer, a real, or a string.
+
+06-07 Racalac
+    Major Addition: You may now specify properties for an item during creation. Here are the mechanics:
+        polsys.em: GetItemDescriptor(objtype or name) returns a struct of all the itemdesc.cfg properties
+        for the specified objtype. You can use this to print the contents:
+            var ret := GetItemDescriptor(objtype);
+            foreach thing in ret
+                print(_thing_iter + ": " + thing);
+            endforeach
+        There are a couple special members. "CProps" is a dictionary of string->object pairs (object could be any
+          packable type). "StackingIgnoresCProps" is an array of strings. You may edit the values in this dict
+          but not all are assigned per-item (meaning it will do nothing). The item create functions accept this
+          dictionary in place of the objtype / objtypename parameter.
+	For example, to create a new item that will automatically stack with an existing stack with non-standard
+          color and cprops, it would look like:
+                var ret := GetItemDescriptor(objtype);
+                ret.Color := 0x10;
+                ret.CProps.insert("blah","1"); //assuming the existing stack have this color and cprop
+                ret.StackingIgnoresCProps.append("blingbling");
+                var item := CreateItemInBackpack(who,ret,10);
+
+06-07 Syzygy
+    SystemFindObjectBySerial now returns proper multirefs for multis
+    fixed a place that switched cout to hex formatting without switching it back
+
+06-06 Syzygy
+    Added automatic lockup detection: thread status will automatically be displayed after 30 seconds.
+    Fixed a potential corruption error during queued data mode.
+
+06-05 Racalac
+    Changed: pol.cfg EncryptPasswords to RetainCleartextPasswords (default 1). NOTE this is logically opposite
+        to the old EncryptPasswords option. We now ALWAYS MD5 hash passwords and ALWAYS store them. Make this
+        option 1 if you want to also retain normal passwords, 0 if you only want the hashed passwords stored.
+    Added: PasswordOnlyHash is written to accounts.txt. If the cleartext password is missing, it will be
+        empty until the account successfully logs in.
+    Added: account.PasswordHash (password only hashed), and account.UsernamePasswordHash (username + password
+        hashed). account here is an account script object, i.e. character.acct.
+    Added: accounts.txt reading info, X elements in Y ms.
+
+06-05 Syzygy
+    The .NET build now uses STLport 4.5.3 instead of MS's crappy implementation.
+      It seems to be a bit faster now.
+      Some comparison sysload numbers, using Xandros' huge shard data:
+        .NET old: 100(33018), 100(16326), 100(62705), 100(64700), 100(66679), 100(67030), 100(67030), 93(53725), 5(0), idle
+        VC6 05-24: 98(33533), 100(18338), 25(1519), 0(0), idle
+        .NET now: 35(19292), 6(1), idle
+    win32: we now retrieve CPU time used from the OS.  This is reported as cputime, when sysload
+      is reported.  cputime is read once a minute, and the value displayed is the number of microseconds used.
+      So, if cpuload is 10,000,000 then 10 seconds of CPU time were used.
+      It doesn't look possible to get this on linux without considerable teeth-pulling.
+    pol.cfg: ListenPort is now optional.  If you don't set it, or set it to zero, it won't be used.
+    Added to polsys.em: SetSysTrayPopupText( text )
+
+06-04 Syzygy
+    performance improvements:
+        ListMobilesNearLocation
+        ListMobilesNearLocationEx
+        ListGhostsNearLocation
+        Speech (sending events to NPCs)
+
+06-03 Syzygy
+    escript: fixed a bug where the compiler could emit corrupt code if an IF statement was optimized away
+    equipment.quality is now stored as a double-precision float, so equality comparisons should work better now.
+    Added itemdesc.cfg flags.  These apply to everything, even your own backpack.
+        CanUseWhileFrozen = 0/1
+        CanUseWhileParalyzed = 0/1
+    Removed internal command: .t_setusescript
+    Renamed internal ".props" command to ".t_props".  This script should replace it:
+        use uo;
+
+        program dot_props( who )
+            var what := Target( who );
+            if (what)
+                var names := what.propnames();
+                if (names.size() != 0)
+                    foreach propname in names
+                        SendSysMessage( who, propname + ": " + what.getprop( propname ) );
+                    endforeach
+                else
+                    SendSysMessage( who, "No properties." );
+                endif
+            endif
+
+        endprogram
+
+06-02 Syzygy
+    Modified i/o handling to better deal with unexpected signals (EINTR - socket error 4)
+    escript: equality comparisons for floats will allow for small differences (0.00000001)
+    win32 .NET build: changed some compiler settings to improve performance
+
+05-31 Syzygy
+    Backed out the 05/26 SetRegionWeatherLevel change which was causing a stack overflow
+      (which then caused pol to exit without any message)
+    Corrected music, justice, and weather zone switch handling.  They were broken
+      (would do no processing if you moved either into or out of a location entirely outside the regions)
+      Note: set the weather type to 255 to turn weather off.
+
+05-29 Syzygy
+    Target() will return a proper multiref if a multi is targetted (usable with DestroyMulti etc)
+      This does not apply to floors, etc - only ship masts and so forth.
+    Any function taking an objtype as a parameter will return an error if the objtype is not defined.
+      Note that all objtypes in the 0x0000-0x3fff range are implicitly defined.
+      (previous behavior was to throw an exception reporting that the objtype defined no graphic)
+
+05-28 Syzygy
+    New console command [threadstatus] will display thread status and checkpoints
+    Thread status is now available on win32 as well as linux.
+
+05-26 Racalac
+    Fixed: SetRegionWeatherLevel should work now!
+    Changed: Removed client 2.0.* weather packet disable. Let us know if there are still weather problems with
+        2.0.* clients.
+
+05-24 Syzygy
+    Fixed: a crash when an NPC killed itself in its script
+    Masked: crashes at shutdown due to leftover objects.  The objects will be leaked rather than attempt destruction.
+      (if we can find out _why_ we have leftovers, we won't get these crashes at all - this crash in particular is a symptom)
+
+05-23 Syzygy
+    Fixed: NPC weapons will use the hitscript specified, not the wrestling hitscript
+    Fixed: Display issue (1.26.4 clients only) when dragging an item to a mob that is too far away.
+    Linux build: Added segfault handler - will dump a stack backtrace to stderr before aborting.
+      please forward these (they'll just be a set of numbers) to PCT, if you're running the latest linux build.
+    escript: added more convenient syntax for declaring structures:
+      var t := struct { a, b, c };                                  // basic
+      var t := struct { a := 4, b := "hey", m := foo(bar(4)) };     // initialized
+      var t := struct { a := 4, b := struct { g,h,i }, c };         // with nested structures
+
+05-22 Syzygy
+    NPCs will be destroyed immediately when they die, rather than a little later.
+    It should now be impossible to "kill" an NPC twice, ending up with multiple corpses.
+       There may be cases where an NPC will be only partially killed.  We don't know why yet,
+       but there will now be log information to help us find out why.  If you find an NPC that can't be
+       killed, please check your logs for output containing: "Abnormal end after checkpoint" and post to PCT.
+    NPCs will use their intrinsic weapon templates again.  They were using human wrestling.
+    Log additions: character creation, deletion
+
+05-20 Racalac
+    Fixed: boat planks were not cleaned up correctly
+    For debugging: leftovers.txt is written to the pol directory on shutdown, contains serial and name for
+        objects that survived cleanup somehow.
+
+05-17 Syzygy
+    pol.log will now roll over every day.  Old logfiles will have names of the form: pol-YYYY-MM-DD.log
+
+05-17 Racalac
+    Added new pol.cfg option: EncryptPasswords=0/1 (default 0), if =1, the server will encrypt all passwords
+        and all plaintext passwords will be lost! YOU CANNOT GO BACK AT THIS POINT WITHOUT RESETTING ALL THE
+        PASSWORDS ON THE SERVER. So be careful about setting this option to 1! Don't make me have to repeat
+        myself! I mean it!
+
+05-17 Syzygy
+    Fixed a crash caused when a script accessed container.container on something in a mob's backpack.
+
+05-16 Syzygy
+    item.setcolor( color ) will return an error if the specified color is > 0xFFF
+      (it will still mask off the high bits and use what's left, though)
+    Alt-Tab should no longer show a window called "Dialog" while POL is running.
+    Fixed an assertion failure on load if a mobile or container failed to create completely.
+
+05-15 Racalac
+    Added: MD5 hashing of passwords. accounts.txt "Password" property is automatically converted, and saved
+        back to "PasswordHash". No passwords are stored in plaintext on disk or in memory anymore, so full
+        memory dumps should be safe from nosy people. MD5 strings cannot be reversed back to the original
+        plaintext password.
+
+05-15 Syzygy
+    HitScript will be read from itemdesc.cfg entries for weapons, and used.
+    OnHitScript will be read from itemdesc.cfg entries for armor, and used.
+    AttackMinRange and AttackMaxRange will be read from npcdesc.cfg
+    uoclient.cfg can now specify multiple ports to listen for clients on, and the encryption to use with each.
+      Here is an example:
+        Listener
+        {
+            Port 7011
+            Encryption ignition
+        }
+        Listener
+        {
+            Port 7012
+            Encryption 1.26.4
+        }
+      Note that the Port specified overrides the value from servers.cfg.
+
+
+05-13 Syzygy
+    Changing an item's graphic will also set its height accordingly.
+    There's now a little system tray icon that will let you stop POL.  Maybe later it'll let
+      you look at the console output or logs.  We're accepting fan art for the icon :-)
+      You'll need to uninstall and reinstall the service (pol -u, then pol -i) for the tray icon
+      to be able to appear.
+    start.log will now be written properly when POL is run as a service.
+
+05-11 Racalac
+    Changed: With the CreateItemInContainer/Backpack functions, a new stackable item will not be added to
+        an existing stack unless the existing item stack has color equal to its itemdesc.cfg color property
+        AND has equal CProps as its itemdesc.cfg entry (not counting locally and globally ignored cprops)
+
+05-11 Syzygy
+    process.kill() will immediately kill sleeping scripts, as well as scripts being debugged.
+      (previously, script process would not die until the script woke up, if it was sleeping.)
+    Mobiles will now break off an attack when an opponent changes from non-Innocent to Innocent.
+      (previously, this happened for PCs, but not for NPCs, particularly pets)
+
+05-10 Racalac
+    Fixed another 4.0.0e client hang issue.
+
+05-09 Syzygy
+    Undid my brain-dead repsys timer change which was causing lockups.
+
+05-08 Syzygy
+    POL can now run as a service:
+        1. Put the executable in your POL directory (as always...)
+        2. Run 'pol -i' to install.  'pol -u' will uninstall if needed.
+        3. Recommended: Use the service manager to change the login from 'LocalSystem' to some account.
+        4. Start the service
+
+05-07 Racalac
+    Added new pol.cfg option: "MiniDumpType", determines the type of crash dump created. "small" is the
+        normal minidump (default), "large" is the full memory space for POL (creates large files, but much
+        more useful to the developers). Case-sensative.
+
+05-07 Syzygy
+    Corrected possible crash bug in repsys handling
+    Corrected repsys timeout logic (would sometimes timeout early, would sometimes never time out)
+    Corrected possible crash bug related to client reconnections and interactive scripts
+
+04-25 Racalac
+    Fixed: CreateItemCopyAtLocation now copies cprops correctly.
+    Fixed: Dead NPC taking damage somehow is now killed.
+    Added: servspecopt.cfg property: UOFeatureEnable, used in the last dword of the 0xA9 login packet.
+           Probably has no effect (and possibly ill effects) until client messages like 0xBF 0x13 are
+           handled.
+
+04-18 Racalac
+    Fixed: Generic Gump textentry should work again for ANSI characters.
+    Added: Linux console command support
+
+04-13 Racalac
+    Fixed: Input is rejected for SendTextEntryGump if the string contains a control character (newline, etc)
+    Fixed: Generic Gump 'textentry' will strip out any control characters from user input.
+
+04-10 Racalac
+    Fixed: Moving a character during logout no longer throws an exception (introduced 3/27)
+
+04-09 Racalac
+    Fixed: MoveBoatXY did mot move items on deck properly.
+
+04-06 Racalac
+    Change: Call Attribute Intrinsic Modification exported functions before Vital Maximum and Regen.
+    Note: clients 4.0.0e and newer do not like the uoclient.cfg setting EnableControlFlowPackets enabled,
+        and causes login to fail. No way around this it seems.
+
+03-27 Racalac
+    Added: boat.em: MoveBoatXY(boatref,x,y)
+    Fixed: MoveCharacterToLocation with an offline character could cause an exception.
+    Fixed: who.multi was not returning a boat ref, when appropriate.
+
+03-25 Racalac
+    Fixed: 4.0.0e login issue (login tested with 4.0.0e (uorice), 4.0.0c (uorice), 3.0.8q (uorice),
+           2.0.0b, and 1.26.4b. (2.0.0g still doesn't work, oh well..)
+
+03-24 Racalac
+    Fixed: Login (A9) packet was the wrong length (might fix 4.0.0e login issue)
+    Fixed: Maps didn't work with set/get_member()
+    Fixed: Multi.isa wasn't working
+
+03-20 Myrathi
+    Fixed: ECOMPILE will no longer compile files with .src/.hsr/.asp/.inc
+        *anywhere* in the filename. These extensions must now be at the *end*
+        of the filenames for them to be compiled! (fixes 'file.src.bak' bug)
+    Found: Undocumented ECOMPILE option: -ri [dir]
+        Same as '-r' except it recursively compiles .INC files! Useful for
+        testing that your include files compile!
+    Fixed: ECOMPILE options bug: -r [dir] / -ri [dir]
+        These options will no longer 'eat up' options that follow them on the
+        command line ("-r -u" would incorrectly 'eat' the "-u" option!). Such
+        an option would be equivalent to "-r . -u" (recurse current folder).
+
+	NOTE: If you need to compile files AS WELL AS recursing the current folder
+	      you MUST add the '.' (no quotes) so it doesn't treat the files as a
+	      folder (WRONG one would try to recurse the FOLDER 'myscript.src'!)
+
+	      This is WRONG:  ECOMPILE.EXE -u -r myscript.src
+	      This is RIGHT:  ECOMPILE.EXE -u -r . myscript.src   <-- note the '.'
+
+03-19 Racalac
+    Changed the order of calling the Vital Maximum and Regenerate functions via RecalcVitals().
+        Order is: Maximum function, Regenerate function.
+    Important CFG change: Set Weapon 0xF020 to SaveOnExit 0. This will force the intrinsic NPC
+        wrestling weapon to a non-saved serial number.
+    Fixed 03-18 npctemplate oversight.
+
+03-19 Myrathi
+    Added: extra 'movetype' parameter to Can/OnInsert and Can/OnRemove scripts.
+        The values returned in this parameter are as follows (new constants in UO.EM)
+        - MOVETYPE_PLAYER     : physically moved (dragged) by a player
+        - MOVETYPE_COREMOVE   : moved by the core (eg, MoveItemToContainer().)
+        And in the *Insert scripts only...
+        - MOVETYPE_CORECREATE : created by core (eg, CreateItemInBackpack().)
+
+    Example:
+        use uo;
+        program caninsertscript(character, container, item, movetype)
+            if ( movetype != MOVETYPE_PLAYER )
+                // allow any movement/creation by core functions
+                return 1;
+            endif
+            // insertion by a player must be validated
+            // ...extra code here...
+        endprogram
+
+03-18 Racalac
+    Fixed: "npctemplate" was not initialized on start-up when the exported
+        vital functions were called.
+    Added: pol.cfg options:
+        ReportRunToCompletionScripts=0/1 (default=1)
+        ReportCriticalScripts=0/1 (default=1)
+        - Set to 0 to remove the "Script X running..." (RTC) and
+          "Critical Script X has run for X instructions..." console messages.
+
+03-16 Myrathi
+    Fixed RequestInputUC() input-validation issue (control-characters are now
+        correctly identified).
+        Returns:
+        - 0 (zero) if input is cancelled.
+        - a struct: 'uc_text' => Unicode Array, 'lang' => 3-char language code
+        - an error, when appropriate (see .errortext)
+
+03-16 Racalac
+    Added error message for thread exceptions, AUX service.
+    Fixed annoying garbled "Listening for HTTP requests on port" message.
+    Fixed up RequestInputUC().
+
+03-16 Myrathi
+    Added: UNICODE.EM function RequestInputUC(): works the same as UO.EM's
+        RequestInput() function except it takes 'unicode array' and 'language
+        code' parameters in place of the 'prompt' parameter. The 'item'
+        parameter is still simply a placeholder and a client cannot act upon
+        one of these functions if the other has already been called (you'll
+        get the "Another script has an active prompt" error).
+
+03-15 Racalac
+    Added uoclient.cfg property: MaxSkillID ("General" section,default 51 if not found). Use this depending on
+        what client versions connect to your server. Newer clients can handle more skill IDs and older clients
+        (which often crash being sent skillids above 48). You must have skills.cfg entires for each skillid up
+        to MaxSkillID.
+
+03-14 Racalac
+    Added ClientEncryptionVersion "none" and "uorice" to help newbies. These are identical to "ignition".
+    Linux Build:
+        This is Rac's first linux build, and hopefully it's improved. Previously, linux builds were made
+        using STLport and NO compiler optimizations. This build was made with libstdc++ 5.0.2, glibc 2.3.2
+        (with linuxthreads 2.3.2), gcc 3.2.2, and kernel 2.4.20. Consider using the same version libs as these.
+        Also, optimizations are turned on in this build (they were turned off because of inexplicable segfaults.
+        Hopefully, new build lib versions help this).
+
+03-13 Racalac
+    Fixed linux ".unload" crash.
+    Fixed exception with Character serial 0x1.
+
+03-12 Myrathi
+    Fixed: RadToDeg() and DegToRad() in MATH.EM. They now work the right way around. :)
+
+03-10 Racalac
+    Save character and item serial counter to pol.txt.
+    Increased Maximum UO SkillID to 51 (skills.cfg requires an update).
+    Fixed 03-08 bug: new multis not found with SFOBS.
+
+03-08 Racalac
+    Implimented Serial Recycling:
+        When POL reaches the maximum serial for characters (0x3FFFFFFF) and items (0x7FFFFFFF), it will then
+        search from the minimum serial (1 for characters, 0x40000000 for items) for an unused serial to give.
+        Note, nothing is done about CProps which store serials referring to destroyed objects. Hopefully with
+        this system of reusing the "oldest" unused serial will avoid most of these problems.
+    Very Significant speed improvement for all SystemFindObjectBySerial calls (including internal ones)! Your
+        start-up times (with CheckIntegrity enabled) should be vasty improved.
+    Fixed build so minidumps should give more information.
+
+02-18 Racalac
+    Removed unecessary equip layer check (some items in client 4.0.0 were prevented from being equipped due to
+        a client bug).
+
+02-09 Racalac
+    Added: new servspecopt.cfg options: DefaultContainerMaxItems (default 125) and DefaultContainerMaxWeight
+        (default 250). These values will be used for containers that do not define "MaxItems" and "MaxWeight"
+        in their itemdesc.cfg entries.
+    Added: OS.EM function: is_critical(). Returns 1 if the calling script was set critical, else 0.
+    Fixed: client version string was being limited to 10 characters.
+
+02-09 Racalac
+    Changed: CheckIntegrity=1 in pol.cfg now also checks storage areas and offline character for duplicate serial
+	    items (This extends start up times).
+
+02-08 Syzygy
+    Sort-of fix for shards with data files with very high serial numbers:
+        if 0x4effffff <= serial <= 0x40000000, serial will be allocated as a normal serial
+        if 0x7fffffff <= serial <= 0x4f000000, serial will be allocated as a "nonsaved" serial.
+        The upper range for "saved" serials will not be raised at this time.
+
+02-04 Racalac
+    Changed: PushthroughHook array of obstructors now includes hidden mobiles.
+    Changed: renaming a stackable item a specific name will now prepend the amount to the single-click description.
+        i.e. rename 2 items 'sucky item', then stack will produce a desc of '2 sucky items'.
+    Fixed: character.height was being assigned an incorrect value on start, causing LOS problems.
+
+02-03 Racalac
+    Fixed: offline boat travelers were not being processed correctly on startup, leaving them behind on the water.
+    Added: POL now supports Minidumps on Windows. If you are running POL on Windows XP, you do not need to do
+        anything to enable this. Before Windows XP, you need a new "dbghelp.dll" with version 5.1 or greater in your
+        POL directory. I've uploaded a redistributable version on core-test, this will be available and/or included
+	in the final 095 core package.
+
+        What Minidumps do: When(/if!) POL crashes, you will no longer see the cryptic dump of registers and call
+        stack. Instead, POL will log and print on console that it has created a ".dmp" file in your POL directory.
+        This file is much much more useful to us for debugging a crash than the simple text dump as before. This
+        File should be sent to the developers along with the usual "what I did to cause this crash" information.
+
+        If you run Linux, everything should work as before.
+    Added: Newly created NPCs send and receive SYSEVENT_ENTERED_AREA events with the NPCs around them.
+    Fixed by Syz: While on a moving boat, mobile's names no longer flash, and it's much easier to talk on a moving
+        boat. Only annoyance is now mobiles show the walk animation while the boat moves (but don't move anywhere)
+
+02-02 Syzygy
+    Added minidump support
+
+02-01 Syzygy
+    CoreRequired in pkg.cfg can now be a full version string (ie "POL095-2003-02-01" )
+    (pkg)/uoclient.cfg can now contain a 'Protocol' element:
+        Protocol
+        {
+            #
+            # EnableFlowControlPackets: use the 0x33 (0x00 / 0x01) pause/restart packets.
+            # Though OSI seems to no longer send these packets, they seem to help with smoothness,
+            # particularly with boat movement.
+            EnableFlowControlPackets    1
+        }
+
+01-30 Racalac
+    Fixed: "TrueObjtype" was not read correctly on startup.
+    Fixed: coordinate bounds checking for CreateNPCFromTemplate and CreateMultiAtLocation (still be careful with
+        this latter one, if some part of the multi overlaps beyond the map edge, it will cause problems)
+    Fixed: unequiptest and equiptest are now automatically reloaded after an .unload or .unloadall
+
+01-28 Racalac
+    Fixed a crash with destroying items in core-called run-to-completion scripts (like OnInsert) introduced 01-26
+
+01-26 Syzygy
+    foreach will no longer iterate over error objects
+
+01-26 Racalac
+    Added better stacking control over CProps: You can now specify specific CProp names that will be ignored when
+        items are being stacked. There are two ways to do this:
+        -Template level: new Itemdesc.cfg property: StackingIgnoresCProps, a space-delimited list of case-sensative
+         cprop names to ignore only for stacking items of this objtype. i.e.:
+             StackingIgnoresCProps    propname1 propname2 etc.
+        -Global level: A new packagable config file stacking.cfg (can be in /config and/or any package) specifies
+         lists of CProp names that are ignored for all stacking items (duplicate names ignored). Structure:
+             Stacking
+             {
+                 IgnoreCprops  propname1 propname2 etc.
+             }
+    Fixed: movecost.cfg entries were being interpolated in the wrong order.
+    Changed: MoveItemToLocation now calls UnEquipTest and UnEquip Scripts if the item was equipped on a char.
+    Changed: OnRemove and OnInsert are now Run-To-Completion (i.e. CRITICAL) scripts.
+
+01-24 Syzygy
+    The compiler will now put correct function names in listfiles.
+
+01-22 Syzygy
+    Added ReadMillisecondClock() to polsys.em
+
+01-22 Racalac
+    Fixed moved some npc creation code around so now npc.npctemplate is initialized by the time the vital maximum
+        and regen rate exported functions are called. (so grabbing the HITS property from the npcdesc element is
+        successful)
+
+01-20 Racalac
+    Fixed resetting stealthsteps (broken 01-09)
+    Added control character stripping from sysbook text entry.
+
+01-18 Racalac
+    Removed 01-06 LOS combat initiation check.
+    Fixed weirdness with merchant sell window and the .buy/sellprice changes.
+    Removed hardcoded death sounds for human characters.
+
+01-15 Racalac
+    Fixed: Errors on startup from corrupt items shouldn't crash the server. Also, file name & line numbers are
+        printed for ease of debugging.
+    Fixed: Buying stackable items from NPC merchants now call canInsert and onInsert for player's backpack.
+    Fixed: Setting .buyprice and .sellprice to 0 means the item's price is 0, not itemdesc default. (setting the
+        members to -1 will force them to default to itemdesc)
+    Fixed: Entered/Left regions weren't firing since 12-23.
+
+01-12 Syzygy
+    Fixed an assertion failure when assigning to a non-integer element of an array
+      test script: "var a := {}; var b; a[b] := 3;"
+
+01-12 Racalac
+    Fixed: Polsys::ReloadConfiguration() now really reloads npcdesc!
+    Fixed: item.multi should now return the correct MultiRef (items on tables and other 'blocked' locations
+        were not being processed correctly)
+    Removed hack fix for bug noted in 01-08 changes. Caused problem with boats.
+
+01-09 Racalac
+    Fixed: polcore().clear_script_profile_counters() shouldn't complain if you pass 0 parameters (the correct amount)
+    Fixed: PC Unhide generating ENTERED_AREA events shouldn't fire strange combat update functions anymore.
+
+01-08 Racalac
+    Hack fix for gold "dropping through" floors of multis. This would affect ant 0 height graphic.
+        **Please let me know if there are any weird effects with multis, LOS around/in/through multis,
+        **walking on multies, dropping items on multis, and so on!
+
+01-07 Syzygy
+    NPC Templates in packages will once again have ":packagename:" prepended to their template name
+      (npc.npctemplate, as well as what's written to npcs.txt)
+
+01-06 Racalac
+    Fixed: You now need line-of-sight to initiate combat.
+
+01-05 Racalac
+    Fixed: run_speed and use_adjustments weren't written to the save file.
+
+01-04 Racalac
+    Added: obj.set_member(membername, value) and obj.get_member(membername) to replace the removed "." method.
+        This sets/gets a built-in member on the object which is named "membername". Returns an error if the
+        member was not found on that object (i.e. "dmg_mod" on a backpack).
+
+01-03 Myrathi
+    Implimented new encryption routines as the basis for making future encryption updates
+    a LOT easier (and is the start of internal support for encryptions 2.0.3 upwards!)
+    NO NEW ENCRYPTIONS ARE WORKING AT THIS TIME.
+
+01-02 Racalac
+    Added character and account name to "No handler for skill X" message.
+
+(sometime in the past) Syzygy
+    Deleting an element from the datastore will mark the associated file as dirty.
+
+01-01 Syzygy
+    Windows 95 is no longer supported.  Minimum (MS) OS required: Win98/NT4
+    Added to polsys.em: ReloadConfiguration().  Loads npcdesc.cfg and pol.cfg
+    Linux: HUP signal will cause ReloadConfiguration to be called.
+
+01-01 Racalac
+    Fixed: for real: EnumerateItemsInContainer crash (with "worn items container" who.backpack.container)
+
+03-01-01 Myrathi
+    Added: DefaultDecayTime=# in SERVSPECOPT(.LOCAL).CFG (default = 10) - unit: minutes
+        NOTE: Only newly created or "refreshed" items will use any new setting! Existing
+              items and items which remain "untouched" will retain the old value.
+    Fixed: Picking up an item, failing to place it somewhere else and having the
+        action "undone" (by the core) will no longer reset the decay timer if the
+        "time until decay" is greater than the default interval.
+    Fixed: CreateItemCopyAtLocation() now copies itemref.graphic to cloned item.
+
+12-29 Syzygy
+    accounts.txt will no longer be reloaded after a new version is written by pol itself
+    Failure to bind the listening socket will now cause startup to fail on windows.
+    New ecompile.cfg options:
+        GenerateListing [0,1]
+        GenerateDebugInfo [0,1]
+        GenerateDebugTextInfo [0,1]
+    Fix for ecompile under win32: use GetModuleFileName instead of argv[0] to determine
+      path to ecompile.cfg
+
+12-29 Myrathi
+    Fixed: Shutdown no longer crashes when built with .NET (bonus points go to Syz!)
+    Fixed: Deprecation warnings now give filename of the operator/token as well as line number.
+
+12-28 Racalac
+    Added: IP & Account logging information for unexpected and out-of-sequence messages.
+
+12-28 Syzygy
+    Fixed a crash bug on exit in the VS.NET build (having to do with Token destruction)
+       (on the VS.NET build, some globals are destroyed in the opposite order.  We now manually clear
+        one particular container)
+
+12-27 Racalac
+    ReFixed: Players cannot rename a mobile with an invalid string.
+    MaybeFixed: Crash in EnumerateItemsInContainer. A long-shot fix, please test who ever was
+        experiencing this bug!
+
+12-25 Myrathi
+    Added: CFGFILE.EM function ListConfigElemProps(element): returns an array of the
+        element's property-names (as unique strings).
+
+12-24 Racalac
+    Fixed: Now updates the client correctly when another mobile's color changed.
+
+12-24 Myrathi
+    Fixed: unicode support problems under Linux (think I got 'em all)
+    Fixed: various bugs in various unicode routines. :P
+    Fixed: unicode spell invocation using: ~IN<spellid>
+    Added: "INVOKE: <info>" console spam now restricted to [pol.cfg]LogLevel=6 or higher.
+
+12-23 Myrathi
+    Fixed: Stat messages should now normalize properly to 1000 max-hp (0x11 packet)
+
+12-23 Racalac
+    Fixed: Exception if no regions were defined.
+    Fixed: CreateMultiAtLocation now returns a MultiRef, not an ItemRef ;)
+
+12-22 Racalac
+    Fixed: When combining two stacks of the same objtype (either dragging one stack onto the other, or
+        onto the container containing the other stack), the CProp lists of each item must match EXACTLY
+        in order to be stacked. So, if Stack A has cprop myprop i5 and Stack B has cprop myprop i6, they
+        will not be stackable by dragging. Similarly, if either of the stacks are missing a cprop the
+        other possesses, the items will not stack.
+        **Needs testing please**
+
+12-21 Racalac
+    Fixed: when a player buys an item from a merchant NPC, canInsert and OnInsert scripts are called
+        for his/her backpack.
+    CRITICAL: You MUST add this to an itemdesc.cfg entry or you server will fail to start!
+        Container 0xFF02
+        {
+            Name        WornItemsContainer
+            graphic     0x1E5E
+            Gump        0x003C
+            MinX        0
+            MaxX        66
+            MinY        0
+            MaxY        33
+            Weight      0
+            MaxItems    65535
+            Maxweight   65535
+        }
+        Note the objtype is in the core-reserved range of 0xF000 - 0xFFFF. I hope no one has any
+            items defined in that range.. :)
+        Note this change just fixed a bug with backpack weight limits, and won't help "total"
+            character weight (including equipped items).
+    Fixed: using an item's x,y,z members in its own create script would throw an exception.
+    Added: UO.EM function CreateItemCopyAtLocation(x, y, z, itemref): makes a clone of the item
+        referenced with "itemref" at location x,y,z. Copies member variables and CProps. Does
+        not work with Multi objects. Does not copy a container's contents.
+        **Needs testing please**
+    Fixed: Items split from a stack retain the CProps from the original stack.
+    Fixed: character.setwarmode() now works with NPC characters (no longer throws an exception)
+    Fixed: If the items sold TO an NPC merchant cost more than 60k gold, the core now creates seperate
+        stacks of 60k gold instead of one greater than 60k (invalid for the client). So if you have any
+        script code that handles this, you should probably remove it (or face creating twice the amount
+        of gold you should!).
+    Added: Unhiding AND Unconcealing generates a SYSEVENT_ENTEREDAREA event for nearby NPCs.
+
+12-20 Racalac
+    Fixed: A Mobile's lifebar will no longer disappear when you (for example), poison it.
+    Fixed: An exploit that allowed players to drag items onto far away mobiles.
+
+12-19 Racalac
+    Fixed: a bug with system books where bad characters were written to the save files, causing errors
+        like "Item has no SERIAL property".
+    Fixed: If zero items were sold to an NPC, a gold coin was created in the player's pack with
+        amount == 0.
+
+12-17 Racalac
+    Fixed: a nasty bug where items would not decay in certain areas (specifically, in a zone with
+        a multi house). Also fixes the related "items don't decay near multis" bug.
+    Fixed: If an item is defined as no decay on multis (the default), its destroy script was
+        mistakenly called when the item was not decayed. This is fixed.
+
+12-15 Syzygy
+    Correct crash bug in CanRemove and OnRemove script execution when there's no owning mobile
+    The originally defining package will be listed when multiple packages define an objtype
+    "attack timer" spam outputs only when DebugLevel >= 20
+    item.invisible will initialize based on itemdesc.cfg settings
+
+12-10 Myrathi
+    Added array.exists( index ) - returns 1 if index <= array.size(), otherwise 0.
+    Added: sturdier parameter checking for object member-functions (no AV when too few params)
+    Fixed: corrected the size of the 0xBB 'messenger' packet (no longer "eats up" extra bytes)
+    Fixed: rename packet validation. Invalid content is truncated and a log message shown
+        for admin use (including an output dump of the invalid data).
+        Valid characters are spaces and upper- or lower-case letters (A-Z)
+        e.g.
+            Client #1 (account test) attempted an invalid rename (packet 0x75):
+            0000: 48 61 63 6b 54 65 73 74  0d 0a 09 43 6f 6c 6f 72   HackTest ...Color
+            0010: 20 30 78 34 38 30 0d 0a                             0x480.. ........
+
+    Fixed: core now sends correct number-of-chars to client at login (this should fix the UOTD
+        "can't create character" client issues)
+    Fixed: array member-functions (.erase(), .size(), etc) now enforce parameter-passing:
+        if you pass the wrong number of parameters (too few -or- too many) they'll return an
+        appropriate error (until now, passing too few caused an Access Violation! Argh!!!)
+    Fixed: arrays will no longer "resize" when you attempt to *retrieve* a value from an index
+        that doesn't exist. Setting a value in a non-existant index still resizes, as always.
+        Test array.size() or check array.exists(index) as appropriate.
+    - Example:
+          var arr := {1,2};          // create array with arr[1] and arr[2]
+          arr[4] := "test";          // auto-enlarges to 4 indices (arr[3] is uninitialized)
+          var foo := arr[23];        // arr.size() is still 4 and it returns:
+                                     //    error{ errortext = "Array index out of bounds" }
+          var bar := arr.exists(15); // bar holds 0 since arr[15] doesn't exist.
+          var zim := arr.exists(3);  // zim holds 1. arr[3] exists, even though it's uninit!
+
+    Removed: account.SetAcctName() member-function (deprecated since 089!)
+        - use instead: account.SetName(name)
+
+12-09 Myrathi
+    Added new uo.em function: SendQuestArrow(to_whom, x := -1, y := -1)
+    - 'to_whom' is the character the arrow shows to.
+    - Passing 'x' and 'y' within map bounds will set the Quest Arrow to point at that location.
+    - Passing -1 as 'x' and 'y' (ie. by just called SendQuestArrow(to_whom)) will remove it.
+
+12-09 Myrathi
+    Fixed: All UNICODE.EM commands now take arrays with integers the "right way round" (sorry!)
+        Integers must now be "Big Endian" (0x1234) and not "Little Endian" (0x3412).
+    Fixed: Text-commands typed by a unicode-enabled client are now "recognised" properly.
+
+    Added: Text-command scripts now receive 2 extra parameters when activated by
+        Unicode-enabled clients.
+    - Program blocks should now look like this, to take advantage of them:
+
+            program textcmd_mycmd( who, text, uc_text, langcode )
+
+    - 'uc_text' is a "Unicode array" of 2-byte "Big Endian" integers (see above) and
+                can be an empty array (uc_text.size() == 0).
+    - 'langcode' is a 3-character, uppercase language code.
+    - 'uc_text' will be an 'error' type if the Unicode input is "bad".
+    - 'uc_text' and 'langcode' will be uninitialized if no Unicode text is available
+                (ie, when a non-Unicode client types the command)
+
+    -Note- Text-commands should still be in an "English readable" character set!!
+           There is no guarantee that foreign character sets in script-names will work,
+           never mind Unicode character-sets, as the 'filename' is still matched against
+           the ASCII equivalent!
+
+    Added: NPCs now receive 2 *extra* event-parameters when they "hear" Unicode speech:
+    - 'uc_text' is a "Unicode array" of 2-byte "Big Endian" integers (as above)
+    - 'langcode' is a 3-character, uppercase language code.
+    - these 2 parameters do not exist when speech is received from a non-Unicode client.
+    - Example:
+
+        var ev := os::wait_for_event(120);
+        if ( ev )
+          case ( ev.type )
+            SYSEVENT_SPEECH:
+                PrintTextAbovePrivate(Self(), "You said...", ev.source);
+                if ( ev.uc_text )
+                    PrintTextAbovePrivateUC(Self(), ev.uc_text, ev.langcode, ev.source);
+                    PrintTextAbovePrivate(Self(), "...in Unicode", ev.source);
+                else
+                    PrintTextAbovePrivate(Self(), ev.text, ev.source);
+                    PrintTextAbovePrivate(Self(), "...in ASCII", ev.source);
+                endif
+          endcase
+        endif
+
+12-07 Syzygy
+    Fixed: compiler bug w/ switch statement containing variable declarations
+    Fixed: compiler bug allowing this  to compile:
+                Broadcast( "ff";
+    Fixed: itemdesc.cfg setting 'Invisible' not being used on item creation
+
+12-05 Racalac
+    Fixed a crash bug with cheaters sending an invalid packet.
+
+12-04 Racalac
+    Added Character Method: setwarmode( 0/1 ); Sets the internal warmode flag and sends the
+        update to the player. Returns the new warmode value.
+    Added: MoveItemToContainer and MoveItemToLocation both call the item's parent container's
+        canRemove and onRemove scripts.
+    Fixed: Text command scripts now have their controller properly set. (character reference in
+        canInsert scripts where being passed as uninitialzed when the script was started via a
+        textcommand)
+
+12-02 Racalac
+    Fixed: Characters with the "freemove" privilages can now move with 0 stamina, frozen,
+        or paralyzed.
+    Added: "You are too fatigued to move" message when trying to move with 0 stamina, or
+        not enough stamina as defined in movecost.cfg. (Only if MovementUsesStamina=1 is
+        enabled in servspecopt.cfg)
+    Changed: MaximumClients in pol.cfg will be checked only after a character is selected to
+        play. Clients connected are only counted if they have attached characters (so a client
+        waiting to log in is not counted, and neither is a client that recently logged out).
+    Added: MaximumClientsBypassCmdLevel (default 1). This integer value (from 0 (player
+        cmdlevel) to 5 ("test") defines the minimum character command level to bypass the
+        maximum clients check. So if the option =1, counselors and above staff can log in if
+        the MaximumClients value is reached, but additional player cmdlevel characters cannot.
+
+12-01 Racalac
+    Improvements to pol.cfg MaximumClients: cmd_level>0 is checked, and clients without
+        characters attached are not counted against the maximum.
+
+12-01 Myrathi
+    Fixed: Unicode ghost speech (no longer shows in chinese)
+    Fixed: Various buffer overflow exploits in various uo.em functions (eg PrintTextAbove())
+
+    New EModule: UNICODE.EM containing 2 new constants and 4 new functions.
+
+        _DEFAULT_UCFONT, _DEFAULT_UCCOLOR
+        BroadcastUC(), PrintTextAboveUC(), PrintTextAbovePrivateUC(), SendSysMessageUC()
+
+    - These functions act identically to their UO.EM predecessors except for the parameters.
+    - ** please note the "UC" function suffixes **
+    - Unicode "strings" are actually EScript Arrays of 2-byte integers, where each integer
+      is a unicode wide-character. (example uctest.src will be uploaded to CoreTest group)
+      These "integer codes" are always clipped (internally) to 2 bytes (value & 0xFFFF) and
+      a '0x0000' value will stop the end the string, regardless of the size of the array.
+    - Passing a non-array variable or an array with a non-integer value in it, as the
+      'uc_text' parameter, will throw an error. They MUST all be integers.
+    - The 'uc_text' array cannot exceed the current 'maximum speech length' of 200.
+    - LangCode's are 3-character identifiers for the language it's in: ENG, RUS, KOR, etc.
+      Passing a langcode string that's not 3 characters will throw an error.
+
+11-30 Myrathi
+    ECompile now displays "deprecation" warnings for certain operators and tokens and
+        although your scripts will still compile, these are now "last warnings":
+        - '=' is deprecated; use '=='
+        - 'local', 'global' and 'dim' are deprecated; use 'var'
+        - 'begin' and 'end' are deprecated.
+
+        ** Deprecated expressions will be removed from 096 **
+        **     so make sure you update your scripts!!!     **
+
+11-28 Racalac
+    Improved: canInsert script will be called when a stack of item is placed into the
+        backpack through the paperdoll icon
+    Fixed: .hp, .maxhp_mod, for weapon and armor items should be writable again.
+    Fixed: .buyprice and .sellprice were returning 0 if you didn't write to them first.
+        Now if they are not written to first, they will return the itemdesc value for
+        VendorBuysFor and VendorSellsFor.
+
+11-27 Racalac
+    Added for Secure Trade Window: if a trade is cancelled, canInsert and onInsert scripts
+    will be called for the player's backpack. If the items cannot be inserted, they will fall
+    to the player's feet.
+
+11-25 Racalac
+    Fixed a bug with character.concealed being misread on server start as a boolean (0/1), not
+        an integer(0-255)
+    Fixed a bug in SystemFindObjectBySerial where items in the secure trade container were not
+        being found.
+    Fixed a crash introduced in the 11-21 test core concerning core-destroyed stacks of items.
+    Fixed a bug with the conceal system where if a character's concealed level was reduced to
+        a value still greater than 0, other characters of the same new concealed level did not
+        see the character.
+
+11-24 Racalac
+    Added new itemdesc.cfg property: UseRequiresLOS (defaults to 1 if not defined). If true,
+        Line-of-sight is needed to double-click the item. If false, a player can use the item
+        without LOS.
+        * Note DoubleClickRange is still checked.
+    Added new itemdesc.cfg property: GhostsCanUse (defaults to 0 if not defined). If true, dead
+        (ghost) characters may double-click this item.
+    Fixed a bug in SystemFindObjectBySerial where an item held on a character's cursor was not
+        found.
+    Added a new os.em function: set_event_queue_size(newsize) : Changes the maximum number of
+        events the current script will keep in the queue (additional events will be discarded).
+        If not called, the default size is 20 events. The function returns the old queue size.
+
+11-21 Syzygy
+    active trades will be cancelled on death
+    Fixed a problem with listening points that would cause big problems after
+        listener destruction (house doors, tillermen, wink wink, nudge nudge)
+    Containers will default to limits: 150 items, 250 stones
+
+11-20 Racalac
+    Added a new object method: script_process.clear_event_queue(). (script_process comes from
+    NPC.process or uo.em's getprocess(pid))
+
+11-19 Racalac
+    You will no longer be able to initiate a secure trade with a ghost (if either party is dead).
+
+11-17 Racalac
+    These Item creation/movement/deletion functions now properly will update character's weight on
+        the status gump: ConsumeSubstance, DestroyItem, CreateItemInContainer, CreateItemInBackpack,
+        MoveItemToContainer, MoveItemToLocation, SubtractAmount.
+
+    CreateItemInContainer and -Backpack will call the container's canInsert and onInsert scripts.
+        POL will attempt to find a character that owns this container. If one is not found (i.e.
+        container is on the ground, the CharacterRef passed to the passed to the canInsert and
+        onInsert scripts will be an uninitialized object (so, check to make sure it's valid before
+        using it).
+
+    Adding to a stack of items (manually and by a CreateItem script function) in a container will
+        call the container's canInsert and onInsert scripts. Note if a script initiates this action
+        (and the script has no character controller), the CharacterRef passed to the canInsert and
+        onInsert scripts will be an uninitialized object (so, check to make sure it's valid before
+        using it).
+
+    The core will no longer play sounds effects for items being inserted into containers (thus, they
+        aren't heard by everyone.). You can get the desired effects using the container's onInsert
+        script. For example, to get the different gold drop sounds in addition to the default one,
+        you might have in your container's onInsert:
+
+        if(item.objtype == GetObjtypeByName("goldcoin"))
+            if(item.amount >= 100)
+                PlaySoundEffectPrivate( who, 0x38, who ); //lotsa gold
+            elseif(item.amount >= 30)
+                PlaySoundEffectPrivate( who, 0x37, who ); //some gold
+            else
+                PlaySoundEffectPrivate( who, 0x36, who ); //a few coins
+            endif
+        else
+            PlaySoundEffectPrivate( who, 0x49, who ); //default sound
+        endif
+
+11-17 Myrathi
+    Fixed Unicode speech (and a couple of possible buffer overflow bugs)
+        - Text commands are now properly recognised and run
+    TypeOf() (see basic.em) on Dictionary and Struct variables now returns
+        "Dictionary" and "Struct", respectively.
+    Added "unicode.em" with Unicode support functions (refer to file for names)
+        - a Unicode "string" ('uc_text' param) is simply an Array of Integers.
+        - each Integer corresponds to a 2-byte Unicode character.
+        - each of the 4 functions must also be given a 3-character "language code"
+            - examples are "ENU" (US English), "ENG" (UK English), "RUS" (Russian)
+
+11-17 Syzygy
+    Fixed the map Z-height algorithm to match the UO client for negative Z
+        (for an example, see 1906,49)
+    Fixed an assertion failure in SendOpenBook on Linux systems
+    Fixed an ecompile error with substrings/multidimensional subscript access ( ex: tmp := Props[3,1] )
+
+11-16 Racalac
+    New member for the Text Event struct: "texttype". This will be a string with a value of "yell",
+        "whisper", "emote", or "default" depending on the type of speech received.
+
+    NPCs will only receive text events if the source is in range, depending on the texttype (this
+        will be configurable in the future, for now, whisper is 2 tiles, normal is 12, and yell is
+        25 tiles). So an NPC will not get a yell event from a source 30 tiles away, even if its
+        speech event range is 40. Item text listeners will get all text in their range, regardless
+        of texttype. (Need feedback for this)
+
+    New os.em function: clear_event_queue(), empties current script's event queue.
+        (Distro folks! - need to add this prototype to os.em)
+
+    The npc.em movement functions (Wander(), Move(), WalkToward(), WalkAwayFrom(), RunToward(),
+        RunAwayFrom(), TurnToward(), TurnAwayFrom(), WalkTowardLocation(),WalkAwayFromLocation(),
+        RunTowardLocation(), RunAwayFromLocation(), TurnTowardLocation(), TurnAwayFromLocation())
+        now return 1 is the move was successful, and 0 if the move failed. NOTE this will almost
+        ALWAYS return 1, if UseAdjustments is true (see next item), because the "adjusted" move
+        probably succeeded.
+
+    New npcdesc.cfg member: UseAdjustments : If set to 1 all NPCs of this template will behave as
+        normal when blocked by and object (pace back and forth if path is blocked). If set to 0, the
+        NPC will not attempt to find a adjacent tile toward the target that is not blocked (defaults
+        to 1 if not found in the npcdesc.cfg entry). Also, a new NPC member with the name
+        ".use_adjustments" is read/write. These NPC changes are in preperation for a pathfinding
+        system.
+
+    New npcdesc.cfg member: RunSpeed . If present, (default to dexterity value) this value is used
+        for time delay between NPC moves (maximum usable value is 250, which is pretty damn fast!
+        Running NPCs move twice as fast as walking NPCs). Also, a new NPC member with the name
+        ".run_speed" is read/write. Note that this member may become a Vital in the near future
+        (before the 095 final release).
+
+11-14 Racalac
+    Fixed MoveItemToContainer bug (default container coords of -1 was being flagged
+        as out of range). Reminder: any value of x or y outside the gump coordinate
+        range as defined in the container's itemdesc.cfg will be interpreted as "random location"
+    Added new uo.em function: ListItemsNearLocationWithFlag(x,y,z,range,flags). "flags" here are
+        tiledata.mul flags for the item's graphic. A list of known flags is forthcoming
+        (curious people can see Alazane's file format page at
+        http://dkbush.cablenet-va.com/alazane/file_formats.html#3.19 )
+    Fixed an additional MoveItemToContainer bug that was causing random location of items inside
+        the container gump.
+
+11-13 Myrathi
+    Updated ECOMPILE and RUNECL banners to include better version info
+        (number after the decimal point is the supported file version)
+
+11-12 Syzygy
+    Added support for ecompile.cfg and packaged includes
+        see scripts/ecompile.cfg.example
+        usage: include ":pkgname:filebase";
+    npcdesc.cfg can once again hold non-"NpcTemplate" elements.
+    xlate.cfg is no longer loaded and ignored, just ignored.
+
+11-10 Syzygy
+    item.color := (value) will once again set the color properly.
+
+11-10 Myrathi
+    Updated item.facing - valid range is now 0-127
+    Updated TotalStatsAtCreation= option in SERVSPECOPT(.LOCAL).CFG
+        Can now take comma-delimited lists of values and/or ranges (default = "65,80")
+        Example:
+               TotalStatsAtCreation=65,80,90-95,100-110
+    Anti-exploit checks in uo::SelectColor()
+          now validates values as 2 to 1001 to prevent client-side exploits:
+          - returns the chosen color value
+          - or an error ("Client selected an out-of-range color")
+          An error situation will also display information on the console:
+          e.g.
+            Client #1 (account test) selected an out-of-range color 0x1
+
+    Anti-exploit checks & updates in UNICODE-speech code
+          squelch()'d mobiles cannot speak.
+          Text-color is validated between 2 and 1001 to prevent client-side
+            exploits. Invalid color prints a message to console:
+            e.g.
+              Client #1 (account test) speaking with out-of-range color 0x1
+
+11-09 Syzygy
+    Major changes to the script engine:
+
+        ***   ALL SCRIPTS MUST BE RECOMPILED!!   ***
+
+        All scripts should function as they do now, with two exceptions:
+           .smember no longer works
+           the hidden iterator variable in "foreach" is now called
+                _(var)_iter instead of _(var)_counter
+        Fixed two major script object leaks.
+        Internal changes to the way member assignment and access works.
+        Internal changes to the way script substrings are handled.
+        Removed the 'Substring' object type.
+        Fixed: len() on an error would return random values
+           (now returns the number of elements in the error dictionary,
+            which is probably unnecessary)
+
+
+11-04 Syzygy
+    Fixed a nasty compiler error.  Expressions like this:
+        (!ev.source.isA(POLCLASS_NPC))
+        will now work properly.
+         The compiler used to consider that something like
+             (!ev.("source".isA(POLCLASS_NPC) ) )
+
+
+10-23 Syzygy
+    foreach now operates over dictionaries:
+        foreach v in dict
+            print( _v_iter + " -> " + v );
+        endforeach
+
+10-17 Syzygy
+    xlate.cfg is no longer used.
+    spells.cfg no longer depends on xlate.cfg for reagent name lookup - will use itemdesc.cfg names.
+    Preload 'equiptest' and 'unequiptest' scripts, to speed system load time.
+       (however, equiptest/unequiptest scripts created after startup will not be noticed)
+    Changed config file handling to speed load time.
+       (menus.cfg entries might have their elements reordered, though)
+
+    Sped up system load
+
+10-13 Syzygy
+    Sped up storage area lookups
+
+09-14  merged changes from Racalac:
+    -New property for itemdesc.cfg Map{} entries: Editable, which defaults to 0
+        This determines if the user can plot points on the map gump. Note you can still edit the map
+        via the script methods.
+
+    -New script methods for map objects:
+        GetPins(): returns an array of structs with .x and .y members for each pin point.
+        InsertPin( index, x, y ): inserts a pin with the passed x,y before the passed index. Valid range 0 to n-1
+        AppendPin( x, y ): appends a pin to the end of the course with the passed x,y
+        ErasePin( index ): erases the pin at the passed index (valid 0 to n-1), and shifts pins down.
+        isa(): returns true if the object is a map object
+
+    -New pol.cfg option:
+        MaximumClients=X
+        Denies logon to clients if # of clients connected is at defined maximum
+
+    -New syshook for walking through other players, i.e. define a package with syshook.cfg :
+        SystemHookScript pushhook.ecl
+        {
+            Pushthrough Pushthrough
+        }
+        with pushhook.src with something like:
+
+        use uo;
+
+        program PushthroughHook()
+            return 1;
+        endprogram
+
+        exported function Pushthrough(walker, obstructors) //note passed ARRAY of mobiles in destination tile
+
+            foreach mob in obstructors
+                print(mob.name);
+            endforeach
+
+            if(GetVital(walker,"Stamina") < GetVitalMaximumValue(walker,"Stamina"))
+                return 0;
+            else
+                return ConsumeVital(walker,"Stamina",1000);
+            endif
+
+        endfunction
+
+    -New player privilage: 'freemove' - ignore Pushthrough/stamina cost for movement
+    -New character method: character.GetGottenItem() returns itemref to item on player's "cursor"
+
+09-12
+    Linux changes
+
+=============================================================================
+POL095-2002-09-11
+=============================================================================
+    Changes for linux build:
+        Built with gcc 3.0, libstdc++2.10, on 2.4.18 kernel
+        Use sigaction() instead of signal() in hopes of correcting SIGPIPE problems.
+
+    The game clock will initialize before any objects are loaded from data files.
+    RecalcVitals will not operate on offline mobiles
+    Fixed an error related to multis which would cause decay to function sporadically
+      near multis, and to use memory without bound if items existed on multis.
+
+    Incorporated changes from Myrathi:
+        * Fixed IP Banning via /config/bannedips.cfg (no longer stops at first element)
+        * Warmode ghosts are no longer flagged criminal/aggressor for dbl-clicking on mobs/PCs
+
+        * Frozen/Paralyzed ghosts are no longer able to move due to being dead.
+
+        * HP/MaxHP update to nearby clients now uses a standard MaxHP ratio against 1000 hitpoints.
+          This should stop people from being able to snoop a mobile's exact HPs via a packet sniffer.
+
+        * item.facing can now be set from 0-101 (used to be 0-31)
+        * Added: AllowSecureTradingInWarMode=0|1 in SERVSPECOPT(.LOCAL).CFG (default = 0)
+        * Added: TotalStatsAtCreation=65|80 in SERVSPECOPT(.LOCAL).CFG (default = 65)
+
+        * Added: account.CheckPassword( password ) -- for validating an account's password
+          (returns 1 if the password is correct)
+
+        * Added: player.clientversion -- returns the client version string or an empty string
+          if the client has disconnected.
+
+        * BUGFIX!!! --> find_supporting_multi()
+            static MultiList mvec;
+            vec.clear();
+            mvec.clear();
+
+        * Addition of packet structures (to stop incorrectly variant blocks skewing data):
+          - 0x15 0x1E 0x1F 0x23 0x26 0x28-0x2B 0x2D 0x2F-0x32 0x35-0x39 0x3D-0x4D 0x50-0x52
+          - 0x55 0x57-0x5C 0x5E-0x64
+          - 0xC8
+
+        * Update of packet structure information (just cuz):
+          - 0x53
+          - 0x65 (weather enumerates)
+
+        * Version string update
+
+        * Copyright date update (1993-2002)
+
+        + Fixed legacy v1.xx-client 0x33 pause/restart packet padding.
+          Still works for "mass item/multi update" though, to help with blackholing.
+
+        + Fast-walk client-checking (packet 0xBF) -- stack-cycle & add-key
+        + Cursor Hues (packet 0xBF) -- Felucca & Trammel
+
+        + Sound effect support updated: repeat/single-use, volume and 'z' variables noted.
+
+=============================================================================
+POL094-2001-07-25
+=============================================================================
+
+    Fixed an error where some packets would be sent to all connected clients,
+      no matter how far away the item was from the logged-in character
+
+    Element types for maps need to be changed from Item to Map - their objtypes
+      no longer have to fall within the range of 0x14EB toi 0x14EE
+
+    Added ConsumeVital( mobile, vitalname, hundredths ) to uo.em
+
+    Added GetAttributeIntrinsicMod declaration to uo.em
+    Attribute updates will be sent to the client
+    Life updates will be sent to nearby clients
+    Added mobile.attached:
+       returns process reference if a script is attached,
+       or an error ("No script attached.")
+    If the Attack system hook returns false, core will handle combat as normal.
+    Vital regen rates will be limited to the range (-30,000 to +30,000)
+    Vital maximum values (in hunredths) will be limited to the range (100 to 10,000,000)
+       (1.00 to 100,000.00)
+    SetVital will accept any value between 0 and 10,000,000
+    Added SystemHook function Attack(attacker,defender)
+      -- called when the attack timer times out.
+      -- attacker must not be hidden
+      -- defender is chosen by checking attacker's Opponent, then Hostiles, for one
+         that meets the following criteria:
+           1) Defender is alive
+           2) Defender is in range of attacker's weapon
+           3) Defender is not hidden
+           4) Defender is not concealed from Attacker
+           5) Line-of-sight exists between Attacker and Defender
+    LOS will be checked when searching for an attackable mobile
+    Removed SetAttributeIntrinsicMod
+    GetIntrinsicModFunction added to attributes.cfg
+    added AlterAttributeTemporaryMod
+    Updated vitals will be sent to the client
+     - this only works for your own character, you won't see changes to others' vitals
+    Added GetAttributeIntrinsicMod and SetAttributeIntrinsicMod
+    Removed SetVitalRegenRate since regen rates are specified by exported functions
+    Added RecalcVitals(chr) which will recalculate regen rates and maximum values
+      for all vitals on a mobile
+    Corrected an error in the compiler having to do with optimization of if..elseif..endif statements
+    Newly created NPCs will regenerate vitals and start with maximum vitals
+    npcdesc.cfg entries can specify AttackAttribute instead of AttackSkillID
+    removed mobile.hp_regen_rate
+    removed mobile.mana_regen_rate
+    removed mobile.stamina_regen_rate
+    resmoved mobile.strength_mod
+    removed mobile.intelligence_mod
+    removed mobile.dexterity_mod
+    removed mobile.hp, mobile.maxhp
+    removed mobile.mana, mobile.maxmana
+    removed mobile.stamina, mobile.maxstamina
+    removed mobile.strength
+    removed mobile.dexterity
+    removed mobile.intelligence
+    removed uo::GetStatus
+    removed uo::GetStats
+    removed mobile.setstr()
+    removed mobile.setint()
+    removed mobile.setdex()
+    removed uo::GetRawSkill
+    removed uo::SetRawSkill
+    removed uo::GetSkill
+    removed uo::AwardRawPoints
+    removed internal attribute advancement due to combat (including parrying)
+    Added system hook: ParryAdvancement( attacker, weapon, defender, shield )
+    Weapon entries in itemdesc.cfg must have an 'Attribute' instead of a 'SkillID'
+    data/pol.txt needs the following element: (core 93 doesn't create)
+        System
+        {
+            CoreVersion 93
+        }
+
+
+=============================================================================
+POL093-2001-02-10
+=============================================================================
+    SetAttributeBaseValue will only accept base values between 0 and 2200 (0.0 to 220.0)
+    Added GetVitalMaximumValue(character, vitalname);
+
+    Added functions for Vitals:
+        GetVital(character, vitalname)
+        SetVital(character, vitalname, value);
+        GetVitalRegenRate( character, vitalname )
+        SetVitalRegenRate( character, vitalname, rate )
+        Regen rates are in "hundredths of points per minute."
+        A current regen rate of 100 (1 point per 5 seconds) would therefore
+        be 1200 (12 points per minute) under the new system.
+        Valid Vitals are Life, Stamina, and Mana
+
+
+    Added 'CombatAdvancement' system hook
+      function CombatAdvancement( attacker, weapon, defender )
+      The builtin functionality performs the following:
+        For the Attacker:
+           Award 30 raw skill points in the weapon skill
+           Award stat gain as if the weapon skill were used successfully.
+           Award 15 raw skill points in Tactics
+           Award stat gain as if Tactics were used successfully.
+        For the Defender:
+           Award 15 raw skill points in Tactics
+           Award stat gain as if Tactics were used successfully.
+      This is called whether or not the attack was successful
+
+      (I'm sure I'm not the only one that thinks combat needs an overhaul)
+
+
+
+    Started the new Attribute System (Read this!)
+    ---------------------------------------------
+        The short story: these functions presently operate on the current
+          skills and stats that you know and love.  Core 93 will not change
+          the underlying skills and stats - GetSkill, SetRawSkill etc will
+          continue to work.  Core 94 will no longer support these functions,
+          so you have until then to convert your current usage to use these
+          new functions.
+          When this is complete, there'll be no more "Raw" skill/stat values,
+          and all Attribute advancement will be handled by scripts.
+
+        See core-docs.txt for a description of Attributes and how they work.
+        In particular, the "conversion notes" at the end may be useful.
+
+        Added uo.em functions:
+            GetAttribute( character, attrname );
+            GetAttributeBaseValue( character, attrname );
+            GetAttributeTemporaryMod( character, attrname );
+            SetAttributeBaseValue( character, attrname, basevalue );
+            SetAttributeTemporaryMod( character, attrname, tempmod );
+
+    config/pkgroots.cfg specifies additional root directories to search for packages.
+        An example pkgroots.cfg:
+            PackageRoot
+            {
+                dir d:\devpkg\
+            }
+        Do include the trailing slash.
+
+    Assertions:
+        Assertions are now present in the Win32 build as well as the Linux build.
+        EnableAssertions is now 1 by default.
+        DumpStackOnAssertionFailure=1 in pol.cfg will cause a stack backtrace
+        to be generated when any assertion fails.
+        In any case, an exception will be thrown on an assertion failure.
+        I recommend running with EnableAssertions=1.  It is reloaded when pol.cfg is changed.
+
+=============================================================================
+POL092-2000-12-11
+=============================================================================
+    pkg.cfg directive added: "Replaces {pkg}".  Indicates this package should replace
+      any version of {pkg} found under the /pol/pkg/ tree.
+
+
+    objtypes.txt will be created on startup.  It lists all used and unused objtypes in numerical order.
+    Fixed a bug where only the first element in movecost.cfg would be read.
+    Added uo::SelectColor(chr,dyetub)
+    Removed internal dye and dyetub functionality.  (replacement 'dyeitems' package uploaded to pol-core-test)
+      - note this uses Zulu's 'dyecheck' script instead of the old internal functionality
+        to determine if you can dye a particular item.
+    Corrected a bug which caused BaseSkillToRawSkill (and therefore NPC creation) to take a
+      long time to complete (even for base skill values above 160)
+    Added support for the client's book interface:
+      uo::SendOpenBook(chr,book) kicks it off
+      The 'book' passed must have a Method Script, exporting the following functions:
+        exported function IsWritable(book) // returns 0 or 1 for readonly/writable
+        exported function GetNumLines(book) // returns maximum number of lines
+        exported function GetTitle(book)
+        exported function GetAuthor(book)
+        exported function GetLine(book, line) // line is 1-based
+      Writable books must provide the following functions:
+        exported function SetAuthor(book,author)
+        exported function SetTitle(book,title)
+        exported function SetLine(book,line,text)
+        exported function GetContents(book) // returns an array of all lines
+      I've put together a sample 'sysbook' package to demonstrate this.
+
+    Added the Data Store.
+      The Data Store is a collection of files, stored under data/ds/, saved
+        atomically with the rest of the world data.
+      Only those Data Files actually modified are saved at system save time.
+      A Data File is a collection of Data File Elements.  Data File Elements are
+        accessed by key, which can either be a String (case insensitive match)
+        or an Integer.
+      A Data Element is a collection of Properties.  Each Property has a Property
+        Name and a Property Value.  A Property Name is a string, and is, er,
+        case-sensitive (doh), while a Property Value can be any "packable" script
+        object.
+
+      In other words, a Data File is like a Config File that you can modify and
+        is stored under data/.  The Properties in a Data File Element are just 'cprops'
+        except that when saved in the data store I don't prefix them all with 'cprop'
+
+      scripts/datafile.em lists the functions that are complete and the methods provided
+        by a DataFile and by a DataFileElement.
+
+      Packages can have their own Data Files; these will be stored in
+        data/ds/{pkgname}/.  Normal package filename resolution rules apply.
+
+    Normal "Open Spellbook" handling will occur if the OpenSpellbook hook returns false.
+      (The OpenSpellbook hook script should return 1 if it handled the event, 0 if it didnt)
+    Any itemdesc entry can define zero or more 'OldObjtype' entries.  These are for
+      objtype renumbering.
+    Major rework of multi handling.  There must now be itemdesc.cfg entries for boats
+      and houses, and the objtypes aren't tied to the MultiIDs.  Multis.cfg defines what to
+      expect in multi.mul.
+      CreateMultiAtLocation has more flags for boat creation
+        (CRMULTI_FACING_NORTH, CRMULTI_FACING_EAST, etc)
+      An example entry for pkg/std/boat/itemdesc.cfg:
+        Boat 0x6041
+        {
+            Name smalldragonboat
+            Graphic 0x4004      // base graphic
+            MultiID 0x0004
+
+            OldObjtype 0x4004
+            OldObjtype 0x4005
+            OldObjtype 0x4006
+            OldObjtype 0x4007
+        }
+      An example entry for pkg/std/housing/itemdesc.cfg:
+        House 0x6060
+        {
+            Name smallstoneandplasterhouse
+            Graphic 0x4064
+            MultiID 0x64
+
+            OldObjtype 0x4064
+        }
+      See the latest pol-coresupp zip for config/multis.cfg
+
+
+    Fixed an error where the server would fail to start if a container was overfilled
+    RegisterForSpeechEvents takes an optional 'flags' parameter.  If LISTENPT_HEAR_GHOSTS is
+      passed, this listening point will hear unfiltered ghost speech.
+    Added scripts/include/sysevent.inc.  All system EVID_* constants have been copied here
+      and renamed to SYSEVENT_*.
+    Added SYSEVENT_GHOST_SPEECH (0x1000), to allow an NPC to hear unfiltered ghost speech.
+      The NPC must still be able to _see_ the ghost in able to hear it.
+    NPC event masks will now be checked for SYSEVENT_SPEECH being set.
+    Added npc.eventmask, in part to help you find scripts that don't set SYSEVENT_SPEECH.
+    Added npc.speech_color and npc.speech_font.  npc::say() will use these.
+      These will be saved in npcs.txt as SpeechColor and SpeechFont (and can be specified in
+      npcdesc.cfg)
+
+    Added uo::AddAmount(item,amount)
+      - only adds to stackables
+      - only allows stacks up to 60,000
+      - checks for container overfill
+    Added an optional 'flags' parameter to CreateMultiAtLocation
+      - uo.em contains constants to add together (CRMULTI_*)
+      - this parameter only applies to houses, not boats
+    Before character deletion, scripts/misc/ondelete.ecl and anypkg/ondelete.ecl will be called.
+      Their return values are ignored.
+    New system hook: OpenSpellbook( chr ), called when the Open Spellbook packet is received
+     (not when a spellbook is doubleclicked).  This is called even if the character is dead!
+
+    Added 'Method Scripts' for items:
+      An itemdesc.cfg entry can specify a 'MethodScript'
+      This is a script that (presumably) contains exported functions.
+      Method calls on the item are forwarded to the exported functions in this script.
+      Exported functions can have the same name as an existing object method.  In this case,
+        the exported function will override the existing object method.
+      An example that modifies door.open():
+
+      pkg/.../door/itemdesc.cfg:
+        Door 0x0675
+        {
+            xmod -1
+            ymod +1
+            script door
+            doortype metal
+            MethodScript cdoor.ecl
+        }
+
+      pkg/.../door/cdoor.src:
+        exported function open( door )
+            print( "cdoor::open(" + door.serial + ")" );
+            return door._open();
+        endfunction
+
+        program install()
+            print( "installing cdoor" );
+            return 1;
+        endprogram
+
+      Note the mostly empty 'program' section.  It must return 1 in order for the
+        method script to be installed.
+      Script methods don't have to be the same as existing methods, and can take
+        and number of parameters.  Pass-by-reference should be possible, as well.
+      Method scripts can only be specified for items in packages; the server will
+        probably blow chunks if you try it in pol/config/itemdesc.cfg.
+    Preceding a method call with an underscore will directly call the "real" object method.
+
+
+    escript changes:
+        'int' is no longer a reserved word
+        'exported' is now a reserved word
+    logon scripts in packages will now be called on character creation
+    Added the concept of a "System Hook":
+      - Any package can contain a syshook.cfg file
+      - Each entry is a SystemHookScript, which can provide one or more exported functions
+      - the only function that can presently be hooked is 'CheckSkill'
+      - A sample syshook.cfg:
+            SystemHookScript hooktest.ecl
+            {
+                CheckSkill MyCheckSkill
+            }
+      - And hooktest.src to go with it:
+            use uo;
+
+            exported function MyCheckSkill(who,skillid,difficulty,points)
+                print( "MyCheckSkill("+who.serial+","+skillid+","+difficulty+","+points+")" );
+
+                // note you can call the "system" function normally
+                return CheckSkill(who,skillid,difficulty,points);
+            endfunction
+
+            program hooktest()
+                print( "hooktest prog" );
+            endprogram
+      - The 'program' section is executed once, at system startup.
+        Thereafter, the exported function is called as needed.
+      - A hooked 'CheckSkill' will override any script's call to CheckSkill, as
+        well as the internal combat CheckSkill calls.
+      - Each hooked function has a recursion guard, so the system function can
+        be called from within the hook function (as in the example above)
+      - there is currently no way to unload system hook functions
+
+    Containers won't count their own weight against the weight they can hold
+    Multiple scripts can have active gump dialogs on a particular client
+
+    The 'SecureTradeContainer' itemdesc.cfg entry must specify "Weight 0"
+    Here is the entry I use:
+        Container 0xFF01
+        {
+            Name    SecureTradeContainer
+            graphic 0x1E5E
+            Gump    0x003C
+            MinX    0
+            MaxX    66
+            MinY    0
+            MaxY    33
+            Weight  0
+        }
+    If "Weight 0" is not specified, mobiles who participate in secure trading
+      will weight 255 stones more than they should.
+
+
+    Container entries in itemdesc.cfg can specify MaxWeight and MaxItems
+      - if zero (or not specified) there are no limits
+      - if MaxItems is specified, it includes item counts for child containers
+      - if MaxWeight is specified, it includes weights for child containers
+      - there is still a limit of 150 items in the top-level of a container
+          (so as not to flip out the client)
+      - added item.item_count
+      - container count and weight limits will not be enforced during startup
+    Weight of a mobile will now include items being "dragged" as well as
+      items in the secure trade window
+    Added Container scripts (specify in itemdesc.cfg):
+        Entries:
+            CanInsertScript // called to see if an item can be inserted
+            OnInsertScript  // started after an item is inserted
+            CanRemoveScript // called to see if an item can be removed
+            OnRemoveScript  // started after an item is removed
+      - program definitions are:
+      - program can_insert( who, container, item );
+      - program on_insert( who, container, item );
+      - program on_insert( who, container, item, amtadded ); // if an existing stack was added to
+
+      - program can_remove( who, container, item ); // return nonzero to allow removal
+      - program on_remove( who, container, item ); // when the item is dragged
+            - note the item will always be "in use" when this script is called.
+      - only started on "client drag" operations
+    Packed variables containing 'x' characters (an empty array element) should unpack correctly
+      (would have unpacked a huge error object instead of a nothing)
+
+=============================================================================
+POL091-2000-11-01
+=============================================================================
+    Added more guild support:
+      All guild data is stored in data/guilds.txt.  Existing GuildId entries in
+      pcs.txt will be migrated.
+      Ally and Enemy status is always 2-way, and is not transitive, so any hierarchies
+        will have to be implemented in script.
+
+      - new uo.em functions:
+        CreateGuild();          // returns a guildref
+        FindGuild( guildid );   // returns a guildref or error
+        ListGuilds();           // returns an array of guildrefs
+        DestroyGuild( guild );   // destroys a guild with neither members, allies, nor enemies
+      - Guild Object
+        Properties:
+         guild.guildid : integer, unique guild identifier
+         guild.members : array of offline mobilerefs
+         guild.allyguilds  : array of allied guilds
+         guild.enemyguilds : array of enemy guilds
+
+        Methods:
+         guild.ismember( who )
+         guild.isallyguild( otherguild )
+         guild.isenemyguild( otherguild )
+
+         guild.addmember( who )
+         guild.addallyguild( otherguild )
+         guild.addenemyguild( otherguild )
+
+         guild.removemember( who )
+         guild.removeallyguild( otherguild )
+         guild.removeenemyguild( otherguild )
+
+         guild.getprop( propname )
+         guild.setprop( propname, propvalue )
+         guild.eraseprop( propname )
+
+    Added Auxilliary Client Interface
+      - a package can contain 'auxsvc.cfg'
+      - packed values are sent, newline-terminated.  These show up on the aux service
+        script's event queue as an event with ev.type = "recv" and ev.value = the unpacked value
+      - parameter to the aux control script is an AuxConnection
+      - AuxConnection.transmit( val ) sends packed representation of val, newline terminated.
+      - see 'pkgauxsvc.zip' for an example
+
+    "CON", "AUX", "PRN", and "NUL" will be disallowed as text command names.
+    NPC intrinsic weapons will be re-equipped after unequipping another weapon
+      (instead of switching to the human wrestling weapon)
+    Removed "Searching for" messages when looking for textcmds
+    An "Unknown command" message will display if you mistype a textcmd
+    NPCs will walk through mobiles they can't see (whether due to concealment or hiding).
+    NPC AttackHitScript entries cause hit scripts to fire now.
+    Ghosts will no longer impede NPC movement.
+    minrange and maxrange can be specified in Weapon entries in itemdesc.cfg.
+      Default for melee weapons: minrange 0, maxrange 1
+      Default for projectile weapons: minrange 2, maxrange 20
+        (same as previous code)
+    NPCs in packages should retain their intrinsic weapon after a restart.
+    npc.isa(t) and mobile.isa(t) now work
+    mobile.setcriminal(0) now works
+    PID will display for runaway scripts
+    ReadConfigFile( ":*:foo" ) will load a combination of all foo.cfg files found in
+      config/ and all package directories.  These can be unloaded.  This method is preferred
+      over using "::itemdesc", "::spells", and "::skills", since reloading will be handled
+      correctly.
+    Added extra checking on item destruction in case a destroyscript is evil
+    Added uo::SendViewContainer( chr, container ) - just sends the container contents
+      (does not grant access like SendOpenSpecialContainer)
+    mobile.truecolor and mobile.trueobjtype are r/w (though I think trueobjtype has no effect)
+    Fixed a crash bug in some instances of item destruction, decay being one example.
+    "AttackHitScript" can be specified in npcdesc.cfg entries for a per-npctemplate HitScript.
+        For packaged npcdesc.cfg entries, this will need to have the package specified.
+        Also note that AttackSpeed must be specified for any per-npctemplate Attack* properties to be used.
+    added object.isa( polclass_type ) : boolean
+      use constants POLCLASS_OBJECT, POLCLASS_ITEM, etc from uo.em
+        example:
+          door.isa( POLCLASS_DOOR ) will return true
+          door.isa( POLCLASS_ITEM ) will return true
+          door.isa( POLCLASS_MOBILE ) will return false
+    Whisper range is 2, Yell range is 25
+    Items in decaying locked containers will be destroyed with the container.
+    movable=0 items in decaying containers will be destroyed.
+      Note that in both cases, destroy scripts will not execute.
+       (Destroy scripts execute only when DestroyItem is called, or when a toplevel
+        item is checked for decay)
+    '=' is assumed to be a command prefix (as well as '.')
+    mob.setcriminal(0) will clear the criminal timer and send status update packets
+    "destroy [desc] ..." messages will no longer display on item destruction.
+
+POL090-2000-09-03
+=================
+SPECIAL NOTE:
+  ALL SCRIPTS MUST BE RECOMPILED!  (all your scripts compile, right? :-)
+  Old .ECL files will not load!
+
+Titles
+    - if present, "[title_guild]" will display above name on singleclick
+    - if present, " (title_race)" will display after name on paperdoll
+    - title_prefix, title_suffix, title_guild and title_race can contain leading
+         and trailing spaces, embedded quotes, and embedded newlines.
+
+Interactive Debugger
+    - Added beginning of debugger interface.
+         pol.cfg: DebugPort=port, DebugPassword=string, DebugLocalOnly=0/1
+         Only enabled if DebugPort if specified as non-zero.
+    - Added local variable information to .dbg files
+    - Added stepinto debug command
+         (see srcdoc/poldbg.txt for debug command list)
+    - Added debugger commands:
+         pidlist [str]             return list of PIDs with scriptnames matching *str*
+         inslist [file] [line]     list instructions associated with File#/Line#
+         globalvars                list global variable names (if available, compile
+                                    with -z)
+         getlocalpacked [N]        get local variable #N, in packed format
+         setlocalpacked [N] [p]    set local variable #N, to packed value
+         getglobalpacked [N]       get global variable #N, in packed format
+         setglobalpacked [N] [p]   set global variable #N, to packed value
+    - Added debugger command 'call'
+         call [scriptname] [parameters:packed array]
+         parameters must be a packed array.
+         return value is returned packed.
+         So, if 'misc/called.src' ends with 'return 5;' then;
+         "call misc/called.ecl a3:i1i2i3"
+         will call misc/called.src, with three parameters: 1, 2, 3
+         Output will be:
+           Results: 1
+           Return value packed: i5
+    - Added debugger command 'quit' - graceful exit.
+
+eScript
+    - Added 'runecl.exe' to the core distro.
+        - only has access to 'basic', 'basicio', and 'math' execution modules
+    - Added math.em execution module
+    - Added Integer modulus operator '%'
+    - Added bitwise operators, for Integers only
+       & (bitwise and)
+       | (bitwise or)
+       ^ (bitwise xor)
+       ~ (one's complement)
+    - Added 'sysfind_flags' parameter to SystemFindObjectBySerial
+       - flag values can be found in uo.em:
+       - SYSFIND_SEARCH_OFFLINE_MOBILES - search for offline mobiles and equipment
+          on offline mobiles
+       - SYSFIND_SEARCH_STORAGE_AREAS   - search for items in all storage areas
+    - SystemFindObjectBySerial will always return an 'offline mobileref' if
+       SYSFIND_SEARCH_OFFLINE_MOBILES is specified.
+    - Added the 'struct' type.  These can be persisted, unlike a struct created
+      from an array.  Structs should be used rather than arrays when you want a
+      structure.
+      preferred forms:
+          var a,b,c,d;
+          a := array;      // make an empty array
+          a[1] := 2;
+          a[2] := 7;
+
+          b := struct;
+          b.+name := "YouThere";
+          print( b.name );
+
+          c := dictionary;
+          c["hello"] := "foo";
+          c["world"] := "bar";
+
+          d := { 2, 5 };   // make an initialized array
+    - The 'error' datatype is now persistable (internally it's a 'struct')
+    - Added pids (process ids) and a scripting object for process control
+       - os::getpid() gets your own pid
+       - os::getprocess(pid) gets a scripting object for a process given its PID
+    - Added polcore().skill_checks_per_min
+    - Added polcore().combat_operations_per_min
+    - The instares dialog gump packet will no longer be sent automatically on PC death
+       - chrdeath.src will have to handle this
+    - Added uo::SendInstaResDialog( chr );
+    - Added AwardRawSkillPoints( mobile, skillid, rawpoints )
+       - rawpoints must be positive at this time
+    - "pol.lg2" has been renamed to "debug.log" and is enabled in
+        pol.cfg:EnableDebugLog=0/1
+    - Added process.sendevent( object );
+    - Added process.kill();
+    - start_script will now return a process scripting object
+    - Added npc.process, returns a process scripting object
+    - Global variable name information is now included in .dbg files
+       '-z' option removed - only '-x' generates .dbg files
+       .dbg.txt files no longer generated
+    - Added GetObjPropertyNames(object) - returns array of all cprop names
+    - Configfile string properties can be contained within quotes, and can contain
+       leading and trailing spaces, embedded quotes (\"), and embedded newlines (\n)
+    - SendSysMessage, Broadcast, PrintTextAbove, and PrintTextAbove all take
+       optional parameters 'font' and 'color'
+    - Added item.buyprice
+       If nonzero, overrides the 'vendor_buys_for' value from itemdesc.cfg
+       If negative, vendors will not buy this item.
+    - 'invisible' in itemdesc.cfg will be honored as the default.
+
+Compiler
+    - Search rules for .inc and .em files changed:
+       - First, the directory of the including file is searched
+       - Next, either ECOMPILE_PATH_EM or ECOMPILE_PATH_INC (which default to
+          the directory containing ecompile.exe) are searched
+       - relative dir info from the included filename is always used.
+       - pass '-v10' to the compiler to see what's going on, if it can't find
+         your files.
+       - This means that:
+           D:\POL> ecompile -r .
+           D:\POL\PKG\MYPKG> ecompile foo.src
+           D:\POL\SCRIPTS> ecompile ..\pkg\mypkg\foo.src
+          should all be equivalent now.
+       - If you intend to use the debugger, compiling from your pol\ directory
+           is best, (or specifying a full path) so that pol.exe will have the
+           correct paths to all involved files.
+       - I recommend "ecompile -u -b -l -x -a -r d:\pol"
+    - It seems those of you using Win2k and Linux will need to have
+       ECOMPILE_PATH_EM and ECOMPILE_PATH_INC variables.
+
+Reputation System
+    - See srcdoc/repsys.htm for current criminal/murderer flagging rules
+    - Added mobile.SetParalyzed( isparalyzed := 1 );
+       - mobile.paralyzed := 1/0 is deprecated and will become read-only
+       - mobile.SetPoisoned sets repsys data
+    - Added mobile.SetPoisoned( ispoisoned := 1 )
+       - mobile.poisoned := 1/0 is deprecated for this use (it will become read-only)
+       - mobile.SetPoisoned can set repsys data (aggressor, criminal flagging)
+        mobile.poisoned assignment cannot.
+       - mobile.SetPoisoned will no longer set the Murderer flag
+    - Added mobile.SetCriminal( level := 1 ), level >= 1
+    - Added mobile.SetMurderer( ismurderer := 1 )
+    - Added mobile.murderer read-only flag
+    - mobile.criminal will always return true for murderers.
+    - Healing, Unpoisoning, and Unparalyzing will clear the ToBeReportable list if
+       all are clear
+    - A mobile's Reportables list is now persisted
+       Added mobile.reportables (see srcdoc/uoscrobj.htm for details)
+       Added mobile.RemoveReportable( serial, gameclock )
+    - ".i_repdata" updated to display murderer flag, ToBeReportable list, and
+       Reportable list
+    - repsys.cfg: added a General section, with Criminal and Aggressor timeouts.
+
+Client Issues
+    - Added Ignition support
+    - Weather packets are now disabled for all non-1.26.* clients (including Ignition)
+    - pol.cfg: DisplayUnknownPackets=0/1 added
+    - pol.cfg: ClientEncryptionVersion can be set to 1.26.4 , 2.0.0 , or ignition
+
+Errors Resolved
+    - Fixed a crash bug in SystemFindObjectBySerial when the object wasn't found
+    - Possibly fixed the "skill window update" client crash bug
+    - hair and beards created on corpses will be marked invisible and non-movable
+    - Ghosts will no longer be able to pick up or equip items.
+    - Dye tub cursors will no longer be sent if a script cursor is active
+    - Script constructs of the following form will no longer alter chr.name:
+       var n := chr.name;
+       n := "hey";
+       - this applies to all other read/write members
+    - ECOMPILE_PATH_EM and ECOMPILE_PATH_INC env variables will no longer be necessary
+       - (See compiler section above)
+    - Corrected some problems with target cursors
+    - Corrupt .ECL files should be handled better now
+    - fixed a crash bug if global variables were used before declared
+
+Miscellaneous
+    - movecost.cfg can have separate 'Walking' and 'Running' sections, and can
+       range from 0-200% of carrying capacity.
+    - Packages with a higher version than another enabled package by the same name
+       will automatically override the lower versioned package.
+    - Misspelled dot-commands will no longer display, so no more embarrassment
+       in mixed company when I leave an 'o' out of '.objcount'
+
+
+05/23/2000 - POLC089
+==========
+    Script functions can be passed parameters by reference.
+      put 'byref' in the function declaration before the parameter name.
+      function foo( pa, byref pb, pc )
+          pa := 5;
+          pb := 6;
+          pc := 7;
+      endfunction
+      var a := 12;
+      var b := 13;
+      var c := 14;
+      foo(a,b,c);
+      // at this point a and c are unchanged, b is 6
+      Note - it's much more efficient to pass arrays by reference than
+        by value, because pass-by-reference doesn't have to copy them
+        (or destroy them when it's done)
+    Mobilerefs and Itemrefs can be compared for equality directly
+      - so you can write "if (me = you)" instead of "if (me.serial = you.serial)"
+      - as a result, mobilerefs and itemrefs can be used as keys in dictionaries.
+    Linux version - gump problems, text command, MT mode problems fixed
+    Added mobile.title_prefix, mobile.title_suffix, mobile.title_guild, mobile.title_race
+      - mobile.title_prefix is displayed before the name on the paperdoll
+      - mobile.title_suffix is displayed after the name on the paperdoll
+      - mobile.title_guild and mobile.title_race are not used (but are persisted)
+    Added mobile.GuildId : just a numeric guild identifier
+      (not sure if this is how it'll be done, but this lets me start on highlighting etc)
+    config/repsys.cfg will be required by the core
+    MoveMode can be specified in npcdesc.cfg.
+      - This is per-NPC -- changing npcdesc.cfg will not affect existing NPCs
+      - MoveMode is a string, containing one or more of the following:
+        - "L" - Moves on Land (this is the default)
+        - "S" - Moves on the Sea
+        - "A" - Moves in the Air
+      - Mobiles require MoveMode 'L' to move on land.
+      - Mobiles require MoveMode 'S' to move on the sea.
+      - MoveMode A doesn't have any effect yet.
+      - There is no script interface to this yet.
+      - an example - "MoveMode LS" would be appropriate on a Water Elemental.
+      - PCs are all MoveMode L, unless you edit pcs.txt...
+    Added combat.cfg:WarmodeInhibitsRegen (default false)
+    Linux version: corrected an error in CreateAccount that would empty the account file (!)
+    Corrected bug where Paperdoll would display warmode when you weren't
+    'IP' entries in servers.cfg can be hostnames.  A DNS lookup will be performed each time
+      a client connects to the loginserver.
+    CInt(), CDbl(), and Hex() will all operate on Substrings
+    Mobiles without MoveMode L might not be able to move on land.
+    Added account.GetProp(propname)
+    Added account.SetProp(propname,propval)
+    Added 'DefaultPrivs' and 'DefaultCmdLevel' properties to entries in data/accounts.txt
+      - there is no script interface.
+      - these are assigned to new characters for the account.
+    object method name searches are now case-insensitive
+        - so now you can write array.size() or array.Size()
+        - this is really so you can write account.GetProp etc
+    object method names can be the same as system or user functions
+    account.SetName should work now (account.SetAcctName has been renamed to this)
+    Added some more log output when message handlers crash
+    Added FindAccount( acctname )
+    Added ListAccounts()
+    Added account.GetCharacter( index : 1..5 ) -- for offline access to PCs
+    Fixed the "server full" bug when --ip-- and --lan-- were used in servers.cfg
+    ECOMPILE_PATH_EM and ECOMPILE_PATH_INC environment variables are now unnecessary
+      if they would have referred to the directory where the 'ecompile' executable is.
+    ecompile now creates '.dep' files so that changed .inc files will be searched for
+      on '-u' (update) runs. ('ecompile -u -r .')
+      If no .dep file exists for a .src file, no dependencies are assumed - so in order
+      for this to work properly, run 'ecompile -b -r .' to recompile everything once.
+    Added http::QueryIP(), returns IP address of connecting browser.
+    PrintTextAbove and PrintTextAbovePrivate will use the correct description,
+      rather than always using the text from tiledata.mul
+    Added account.DeleteCharacter( index : 1..5 )
+    Added account.EraseProp( propname : string )
+    cfgfile::GetConfigStringKeys and cfgfile::GetConfigIntKeys should work now.
+    Added CChr, CAsc, CChrZ, CAscZ
+    ecompile will optimize IF statements with constant test expressions
+    substring access with out-of-bound indices will return an error rather than aborting the script
+    start_script will return an error rather than aborting the calling script.
+    Fixed a problem involving dictionaries, persistence, and substrings.
+
+
+04/08/2000 - POLC088
+==========
+    Fixed a crash bug when an item was destroyed while equipped on an offline mobile
+    Fixed a crash bug when an error occurred reading properties for a new NPC
+    Added mobile.hp_regen_rate, mobile.mana_regen_rate, and mobile.stamina_regen_rate.
+      - a value of '100' adds one point every five seconds.
+      - a value of '50' adds one half point every five seconds.
+      - ...you see the pattern...
+      - applied fixes for negative regen rates, and regen rates for new characters.
+    Added the BASIC-style FOR-loop to escript.
+      for i := 1 to 5
+         print(i);
+      endfor
+      is the syntax.
+    Added the 'dictionary' complex datatype for scripts.
+        usage:
+           var dict := dictionary;
+           dict[ "green" ] := "blue";
+           dict[ "red" ] := "orange";
+           dict[ 12 ] := "yellow";
+           print( dict[ "green" ] );
+           print( dict[ "red" ] );
+        methods:
+           dictionary.size()        : number of elements
+           dictionary.erase( key )  : erase an element
+           dictionary.insert( key, value ) : insert an element
+             (equivalent of dictionary[key] := value;)
+           dictionary.exists( key ) : check for existence of a key
+           dictionary.keys()        : return an array of all keys
+
+        dictionaries can be persisted.
+        keys can be integers, reals or strings.
+        values can be anything.
+    Added cfgfile::GetConfigStringKeys(config_file)
+    Added cfgfile::GetConfigIntKeys(config_file)
+    Packages can contain a 'www' directory.
+      (use URLs like "http://127.0.0.1:8080/pkg/saver/")
+    www directories and subdirectories will be searched for index.ecl, then
+      index htm, if no page is specified.
+    Added item.invisible; only applies to items in the ground, and the same
+      deal with moving "out of range" after enabling the 'seeinvisitems' priv applies.
+    run_script_to_completion will return the 'return value' of the script it runs
+      (the return value is what the 'program' section returns)
+      it will return an error if the script does not exist.
+    Fixed bugs in gump handling
+    Fixed bug in GetWorldHeight (kept dungeon teleporters from working)
+
+03/05/2000 - POLC087
+==========
+    Removed annoying hit-script debug output
+    Added logon scripts, logoff scripts, reconnect scripts.
+    Added delayed logout (see docs/logonoff.txt)
+     - at a minimum, you will need scripts/misc/logofftest.* for this
+    Line-of-sight will succeed to items in your backpack.
+    Added the 'losany' privilege for letting you ignore LOS.
+    Multis will be checked in Line-of-Sight tests
+    PCs can now walk through items they can move.  Hopefully this means if
+      you're a GM and the client wants to let you walk through something,
+      the server will let you.
+    Added character.enabled( setting ) to allow scripts to check enabled settings
+    Added the 'ignoredoors' privilege to let you walk through doors if your
+      client files will allow it (requires a modified VERDATA.MUL)
+    config/cmds.cfg added - specifies cmdlevel names and textcmd directories.
+    character.setcmdlevel( cmdlevelname ) added - set cmdlevel by name
+    character.cmdlevelstr added - text name of the cmdlevel
+    textcmds can be specified in packages; just make a textcmd/gm etc directory
+     - these are only scanned at startup, so if the directory doesn't exist then,
+       it won't be searched until restart.
+    character.poisoned added - just makes your health bar green or not.
+     - this is not saved with world state.
+    Added a console keypress interface - see config/console.cfg
+    Fixed house-walking bug on restart
+    Added os::unload_scripts(scriptname)  -- see os.em
+    Added os::set_script_option(optnum,optval)  -- see os.em
+    Added uo::Shutdown()
+    Added character.ip (returns an empty string if no client connected)
+    Added a facility for banning logins by IP.  You'll need config/bannedips.cfg
+    MoveItemToLocation and MoveItemToContainer will check the 'moveany' setting of
+      the script controller.
+    EquipItem will check item movability
+    Server should no longer crash if you hit Ctrl-C while packages are loading
+    Added character.gold member
+    Added character.spendgold( amount ) method - spends nothing and returns error if
+      character doesn't have enough.  Does not recurse into locked containers.
+    Added uo::ConsumeSubstance( container, objtype, amount ) - consumes nothing and
+      returns error if container doesn't have enough. Does not recurse into locked containers.
+    MoveItemToContainer will no longer allow a container to be moved into itself,
+      or into a subcontainer in itself.
+    Automatic skill advancement when skill is below 10 will only occur
+      if you had some chance of success
+    Fixed some movement errors; it should be possible to walk into caves now.
+     - dropping things on the ground in caves probably doesn't work yet.
+    character.gender is now read/write
+    Items being dragged will be moved back into the backpack when a character dies
+     (so they'll be moved to the corpse or kept based on newbie status etc)
+
+02/01/2000 - POLC086
+==========
+    Inactivity timeout will not occur to those with cmdlevel > 0
+    Inactivity timeout will not occur until a character is chosen or created
+    "InactivityWarningTimeout" and "InactivityDisconnectTimeout" in pol.cfg configure
+      the inactivity timeout in minutes.  Set either to 0 to disable.
+    pol.cfg will be checked for changes every 30 seconds.  Settings that can be changed
+      without restarting will be re-read.
+    Added map checking to correct LOS issues in dungeons.  (pol.cfg:ExpLosChecksMap=1/0)
+      - currently inhibits LOS across bodies of water, which may be bad.
+    Packet formats changed to match latest client
+      (skill locking stuff is ignored)
+    uo::SendSkillWindow( towhom, forwhom ) added.  A script could send you skills for
+      someone else, if it wanted; you'd get spurious "skill value changed" notifications,
+      but that's your choice.
+    scripts/misc/skillwin.ecl will be run on "Skill Window" (Alt-K) requests if present.
+    MoveItemToLocation takes a 5th parameter, 'flags'
+       - instead of adding MOVEITEM_FORCELOCATION to the z parameter, pass it here
+       - pass MOVEITEM_NORMAL or 0 for normal z-corrected movement
+       - for now, I'm making the 'flags' parameter mandatory, as all existing scripts
+         need to be changed.  Later I'll make flags default to 0.
+    Added EVID_DOUBLECLICKED event, sent when an NPC is doubleclicked
+      This event must be explicitly enabled with EnableEvents().
+    scripts/misc/skilladv.ecl will be run when a visible skill change happens
+      - parameters are (who, skillid)
+      - this is called for PCs and NPCs.
+    default 'facing' prop added to itemdesc.cfg
+    EquipTest scripts added - scripts/misc/equiptest and all package equiptest scripts
+      will be called to determine if an item can be equipped.
+    The 'mount' layer (25) can now be equipped.
+      - lots of issues are left yet - combat effects, what happens when you die, and so on.
+    pol.cfg:MinCmdlevelToLogin can specify the minimum cmdlevel allowed to log in.
+        (So you can set your server to GM-only access temporarily or whatever)
+    Objtype 0xF021 is now the 'mount' object type.
+        Add the following entry to itemdesc.cfg:
+            Item 0xF021
+            {
+                name    mount
+                graphic 0x3EA2
+            }
+        Graphic 0x3EA2 is a horse.  0x3E9F to 0x3EA6 will use other mount types.
+    Added uo::OpenPaperdoll( towhom, forwhom ).  Sends the paperdoll window.
+    scripts/misc/dblclickself.ecl will be executed when you doubleclick yourself,
+      if it exists.  The core will still handle "Open Paperdoll" macro requests
+      internally.  The basic doubleclick-self script would look like this:
+            use uo;
+
+            program dblclickself( me )
+                OpenPaperdoll( me, me );
+            endprogram
+    Weapons can specify MountedAnim in itemdesc.cfg.
+    config/animxlate.cfg specifies animation translations for actions while on
+      a mount.  Most weapons shouldn't need MountedAnim entries if this is
+      populated correctly. (thanks to Myrathi for filling in animxlate.cfg)
+    Removed messages when skillwin.ecl and skilladv.ecl don't exist
+    Fixed a crash bug if you tried to spend gold with no backpack.
+    The game clock will be paused during world save.  This should eliminate CPU
+      usage spikes afterwards.
+    Script compiler takes two new parameters:
+        -b : keep building other scripts after errors are encountered
+        -u : only compile updated scripts (.src newer than .ecl)
+    Script compiler will warn for locals with same name as globals
+      (only if -w 'enable warnings' option is passed)
+    Crypto Keys updated for client 1.26.4
+
+
+10/28/1999 - POLC085
+==========
+    Fixed a bug where dragging part of a stack from the ground would
+      misplace the remainder.
+    Items that are 'SaveOnExit 0' and in a container will no longer be saved.
+
+10/25/1999 - POLC084
+==========
+    script compiler: '\' will function as an escape character in strings
+      - \n and \t are defined as special characters
+    script compiler: *.hsr files are ASP-like source pages
+     (see files in the experimental files section for examples)
+    added http::WriteHtmlRaw(str) for .hsr/.asp pages
+    script scheduler uses a priority divider now; will be testing to see
+      if this can help with lag in some instances
+    polcore().set_priority_divide( newvalue ) added
+    polcore().priority_divide (read-only)
+    script compiler will generate a wordlist file if '-W' option is passed.
+    added mobile.criminal property
+    when loading, 1 dot will print per 1000 objects loaded.
+    Fixed a bug in array.insert(index,value) where it was impossible
+      to insert at the end of an array, or into an empty array.
+    Added array.append(value), array.reverse(), and array.sort() methods
+    Inactivity timer added: warning after 4 minutes, disconnect after 5 mins
+    MaxCallDepth for scripts can be specified in pol.cfg (default 100)
+!!  Decreased system load time.  Please BACK UP your datafiles!
+    IgnoreLoadErrors=1 in pol.cfg will ignore (most) load errors and start server
+    Script listfiles generated with -l with always contain source and
+      file/line information, even if -i is not specified
+      (it's best not to use -i, in fact -- less overhead)
+    Added polcore().script_profiles property:
+      returns array of { name, instr, invocations, instr_per_invoc, instr_percent }
+      - same data as output by .log_profile
+    Added polcore().clear_script_profile_counters() method.
+    array.insert() functions properly again
+    Overhauled the client item manipulation system (getting,dropping,equipping items):
+      - LOS is now checked when picking up an item
+      - LOS is checked when dropping an item
+      - range must be <= 2 to pick up an item
+      - drop-item range increased to 2
+      - picked up items are marked 'inuse'
+        Note this causes some easy resource-use exploits until scripts mark
+        items in-use.  But that's better than crashing.
+    Added uo::ReserveItem(item) and uo::ReleaseItem(item)
+      - these mark an item as inuse for this script only to use.
+      - all reserved items will be released on script exit if ReleaseItem is not called.
+    'inuse' items have special rules:
+      - they cannot be picked up (not even part of a stack)
+      - they cannot be added to, if they're a stack.
+      - they cannot be used as reagents
+      - they cannot be used as projectiles
+      - they cannot be spent at a vendor
+      - they cannot be sold to a vendor
+      - they will not decay
+      - if a stack, they cannot be added to if a like item is bought at a vendor
+      - The following functions will not operate on inuse items, unless the calling
+        script reserved the item for its use with ReserveItem
+          - DestroyItem
+          - SubtractAmount
+          - MoveItem
+          - MoveItemToContainer
+          - EquipItem
+        This means most scripts that have to check for materials twice (typically
+        before and after doing sound effects and delays) can just reserve the items
+        before checking for materials.
+
+      I'm considering whether inuse items should be doubleclickable, and
+        whether or not the doubleclick script should start out with the
+        item already reserved.
+     MoveCharacterToLocation and login will generate EVID_ENTEREDAREA events
+     Ghosts will no longer use nor require stamina for movement
+
+
+10/07/1999 - POLC083
+==========
+    Lots of items down there.  The highlights:
+        - secure trading (but see important note about enabling)
+        - stamina costs for movement
+
+    Startup output -- error messages, etc will be logged to 'start.log'.
+    Disabled the following internal text commands, because a replacement
+      script exists, or they're rarely used and a script could be written.
+      (They still exist; renamed to i_[cmd] in case you really need them)
+        .ident
+        .setusescript
+    Added polcore() members:
+        log_profile( clear )
+    text command script names can now contain underscores
+    New config file - config/servspecopt.cfg, for Server Specific Options
+       - DefaultDoubleclickRange, which is used if DoubleclickRange isn't
+         specified for an objtype in itemdesc.cfg
+       The default doubleclick range (if not specified there) is now 2
+    GMs should still see ghosts after they drop out of warmode
+    added mobile.enable( privilege ), mobile.disable( privilege )
+       - for enabling/disabling privileges
+    Added functions to the NPC module:
+        WalkTowardLocation( x, y );
+        WalkAwayFromLocation( x, y );
+        RunTowardLocation( x, y );
+        RunAwayFromLocation( x, y );
+        TurnTowardLocation( x, y );
+        TurnAwayFromLocation( x, y );
+    polcore().itemcount will now decrease
+    Added 'ipmatch' property to servers.cfg, so localhost and LAN servers
+      can be made to only show up if you connect from localhost or the lan.
+    Added the 'all' privilege which effectively gives you..all the privileges!
+    Added the 'dblclickany' privilege which lets you doubleclick any
+      doubleclickable object regardless of range
+    itemdesc.cfg has a 'Weight' entry which can specify whole weights
+      or fractional weights ("1/50" etc) in stones
+    Item weights will be tracked.  No limits or stamina effects yet.
+    added 'object.weight' member
+    Fixed an integrity problem if doors were on a zone boundary
+    Fixed a crash bug if a house component was destroyed before the house was.
+    Items will not decay on multis unless "DecayOnMultis 1" is set in itemdesc.cfg
+!       (Note this should be set for corpses in particular)
+    Gave boats some TLC: (some scripts+config files need updated to use this)
+       - corpses created on a boat will move with it.
+       - items dropped on the boat when a corpse decays will move with it
+       - the remainder of a stack half-removed from a deck will move with the boat
+       - NPCs created directly on boats will move with it
+       - added the rest of the boat definitions to config/boats.cfg
+       - walkon scripts will fire if the item's Z is 0 or 1-z below the walker
+          (specifically so that boat planks can have walkon scripts)
+       - massaged the data from client files so long boats don't have a hole in
+          the middle.
+       - fixed the "Deck is not empty" bug on boat destruction
+       - characters who log off on a boat will be moved when the boat moves
+       - added member 'boat.has_offline_mobiles'
+       - added method 'boat.move_offline_mobiles(x,y,z)' for moving the offline
+         mobiles carried by a ship somewhere.  This function is very trusting
+         regarding the coordinates you pass it. As long as they're within the
+         world bounds, it'll move the mobiles there.
+    "walkon" scripts have more parameters.  the full declaration:
+       program walkon( who, what, lastx, lasty, lastz )
+       the 'last' coordinates are the coordinates the walker is coming from.
+    MoveCharacterToLocation takes a 5th parameter, 'flags'
+       if MOVEMOB_FLAG_FORCELOCATION included, force z-location
+         (ignore any obstacles)
+    Added polcore().packages() - array of installed package names
+    Added polcore().compiledate - text string
+    Added polcore().compiletime - text string
+    Incorporated Beosil's latest crypto code to deal with the 21036-bytes bug
+    Fixed a bug with gump-dialog handling for dialogs with many textentry fields
+    Package start scripts will run under the Linux build
+    Added basics of secure trading:
+        Enabled if EnableSecureTrading=1 is set in pol.cfg.
+        Items can be added to the secure trade window
+        Items cannot be removed except through cancelling the trade
+        Items in the secure trade window can be singleclicked
+        Unlocked containers in your side of the trade window can be
+          doubleclicked, and will open for both trading parties
+        stacks currently cannot be added to.
+        If either party disconnects, trade will be cancelled.
+        Traded items which will not fit in your backpack will fall to your feet.
+        All secure trades will be cancelled before saving data or shutting down.
+!       This entry must be added to config/itemdesc.cfg:
+            Container 0xFF01
+            {
+                Name    SecureTradeContainer
+                graphic 0x1E5E
+                Gump    0x003C
+                MinX    0
+                MaxX    66
+                MinY    0
+                MaxY    33
+            }
+    Added servspecopt.cfg property: MovementUsesStamina=0/1
+        If this is set, you will need config/movecost.cfg
+        Note movement cost code is still being developed.
+    ecompile: option -l  (ell) will cause a listfile to be generated, which
+      contains the internal instructions in the compiled file.  In conjunction
+      with '-i' (include debug info) you may have a fighting chance at seeing
+      where your script corresponds to the instructions.  May be useful
+      for debugging or profiling, or for just being nosy.
+    Added runaway script detection.  RunawayScriptThreshold in pol.cfg specifies
+      how many instructions a script can execute without sleeping before being
+      reported as a runaway.  The default is 5000 instructions.  Reports will
+      be logged to log/script.log
+    spellbook weight will no longer include weight of contained scrolls
+    corrected an error in container-weight handling
+    added polcore().running_scripts
+    returns an array of structures { name, instr_cycles, consec_cycles, PC, call_depth, num_globals },
+      one element per running script.  See scripts/www/running_scripts.src
+    pol.cfg can specify WebServerPassword=username:password, to restrict access
+      If this is used, nothing can be accessed without the password.
+      A more flexible password scheme is in design.
+
+
+09/09/1999 - POLC082
+==========
+    Added 'hearghosts' privilege
+    Support added for UO client 1.26.1
+      - key constants are specified in a key file, so maybe next time
+        this won't require a rebuild.
+      - pol.cfg must have "Keyfile=crypto/v1_26_1.key"
+
+
+
+09/05/1999 - POLC081
+==========
+    Added cfgfile::LoadTusScpFile(basename) - loads TUS .SCP format files
+      so they can be accessed like a POL .cfg file
+      (not an importer - an importer will be built upon this)
+    New characters will start with clothing that matches what the new
+      client displays.
+    mobile.concealed can be set to anywhere between 0 and mobile.cmdlevel
+    mobile.concealed is now saved with game state
+    added array.erase( index ) - erases an element in an array
+    added array.size() - returns number of elements in an array
+    added array.shrink( nelems ) - erases all but the first 'nelems' elements
+    added array.insert( index, value ) - inserts an new element
+    NPC masters will be saved with game state
+    packages can contain npcdesc.cfg and ai scripts.. ".createnpc :pkg:npctype"
+    Encryption keys changed to support client 1.26b (Thanks Beosil!)
+    Added some code to get more information on a particular crash bug
+    Fixed an AV condition when equipping an NPC that isn't strong enough
+    ".integ_item" will write problem information to the logfile
+    a stack backtrace will be logged on assertion failure
+    Corrected an error in house destruction which could cause corruption
+    added os::events_waiting() - returns number of events in script's event queue
+    added direct stat modification:
+        mobile.setstr( newstrength )
+        mobile.setdex( newdexterity )
+        mobile.setint( newintelligence )
+
+08/28/1999 - POLC080
+==========
+    POL now supports the new UO Client (v 1.26)
+        startloc.cfg must be changed to list cities in a particular order.
+        (Yew, Minoc, Britain, Moonglow, Trinsic, Magincia, Jhelom, Skara Brae, Vesper)
+    Armor now has quality, hp, and maxhp.  This means Armor entries in
+      itemdesc.cfg must have a MaxHP entry!
+
+    Added polcore().version (79,80,81 etc)
+    Added polcore().verstr ("POL080", "POL080X1" etc)
+    POL version string will be written to log file on startup
+    Added CreateAccount( acctname, password, enabled )
+      - returns an accountref (see docs/objref/account.htm)
+    character.acct added
+    Account object created; gives the ability to ban,unban, disable, enable,
+      change the account name, and change the account password, from scripts.
+    Large shards will want to set UseNewStaticsFile=1 in pol.cfg.  This will
+      create files 'statics0.pol' and 'staidx0.pol', which are smaller versions
+      of statics0.mul and staidx0.mul.  These files are then loaded wholly into
+      memory for very fast access for walking height and LOS checks.
+      If this option is enabled, POL uses an additional 11 MB memory
+    NPC movement anchors can be set; call npc::SetAnchor() (see npc.em)
+      Movement anchors are only in effect when NPC isn't in warmode
+    ".unload" will now unload all scripts whos name contains the parameter
+      ".unload ai" will unload all scripts whos name contains 'ai', for example.
+    Fixed an access violation if a mobile died with a full backpack and
+      worn items.  (bug introduced in the 'newbie items' update)
+    Added weather effects, using static regions (regions/weather.cfg)
+    Armor will now take damage during combat
+    stackable weapons/armor in vendor inventories
+     (merchant.src must be changed to call CreateItemInInventory)
+    New priv/settings: seehidden, seeghosts
+    added character.setlightlevel( lightlevel, duration ) (mylight.src tests)
+      - sets personal light level for a period of time (duration in seconds)
+    DestroyMulti can destroy boats now (but use BoatFromItem..see destroyboat.src)
+    Fixed an object leak on house destruction
+    Paperdolls will only be opened for humans, ghosts, GMs, Lord British,
+      Lord Blackthorne, and Dupre
+    chrdeath.src has a second parameter, the character's ghost
+    Added chr.squelch(duration) - duration in seconds.  -1=forever, 0=off
+    added chr.squelched
+    "[invulnerable]", "[frozen]", and "[squelched]" tags will display
+      over affected mobiles when singleclicked.
+    Added SetRegionWeatherLevel(regionname,type,severity,aux,lightoverride)
+      - test/setweather.src tests
+
+08/16/1999 - POLC079
+==========
+    items on others' paperdolls within visual ranged can be singleclicked
+    If an equipped item can't be equipped on load, it'll be stuffed into the backpack
+      If the backpack is full, the server will refuse to start.
+    More error messages will print hex serial numbers now
+    It will be impossible to assign a blank name to a mobile, or a name
+      that begins with whitespace (this traps all-whitespace names)
+    All the houses should be creatable now.
+    Made a change that seems to help lag when lots of mobiles are on-screen at once
+    http::WriteHtml calls are now handled more efficiently
+    corrected anims for nonhumans using projectile weapons
+    'StrRequired' (Strength Requirement to Equip Item) can be specified in itemdesc.cfg
+    item.newbie added; 'newbie' items will stay with the ghost.
+    'Newbie' can be specified in itemdesc.cfg.  This is the default 'newbie' flag
+      for items of this type.  Typically set for spellbooks.
+      - newbie items stay with the ghost
+      - newbie stacks split turn into two newbie stacks
+      - a non-newbie item added to a newbie stack contaminates the newbie stack,
+        making it non-newbie
+      - the various CreateInContainer functions will not add to an existing newbie stack
+      - vendors won't buy newbie items
+    'BlocksCastingIfInHand' can be specified in itemdesc.cfg.  Both hands will be checked
+    for items after reagents are consumed but before mana is consumed
+    RequireSpellbooks can be specified in pol.cfg; default is 1
+      - Spellbooks, with scrolls, are required in order to cast spells if this is set.
+
+08/10/1999 - POLC078
+==========
+    added character.acctname
+    added weapon.dmg_mod (-32768 to +32767, but be gentle :)
+    added armor.ar_mod
+      Note if you change ar_mod on equipped armor, it won't reflect in your displayed
+      AR until you take the armor off and put it back on, but the change will
+      increase or decrease your protection immediately.
+    added armor.ar  (adjusted by ar_mod)
+    added armor.ar_base (unadjusted)
+    added nocast regions (will work for spells and scrolls, if they use StartSpellEffect)
+    SaveWorldState() will return an error if an exception occurs during world save
+      (instead of aborting the calling script)
+    added weapon.maxhp_mod
+    Scaled back optimizations so that crash dumps can give more information
+    Included more debug checks in the release version, to search for odd problems
+    corrected an out-of-bounds condition for mobiles near the edges of the world
+    Fixed a bug where boats could go off one side of the world a couple of tiles.
+    It is now impossible to use a skill or item during a casting delay
+    Houses can sit on slightly uneven ground; the z-coord can differ by up to 2
+    added item.sellprice; used instead of 'VendorSellsFor' if nonzero.
+      sellprice on a stack is the price for one unit
+    TwoHanded (0/1) can be set in itemdesc.cfg for weapons
+    Started on z-coord problems, but the map seems to sit above some statics *sigh*
+    Target() will accept TGTOPT_HARMFUL, TGTOPT_NEUTRAL, and TGT_HELPFUL in its
+     'options' parameter.  Harmful actions mark you criminal or aggressor according
+     to normal flagging rules.  Helpful actions on a criminal will mark you a criminal.
+     The criminal query window will pop up when appropriate if enabled on the client.
+    NPCs will get "enteredarea" and "leftarea" events when they move
+    alignment (good, neutral, evil) can be specified in npcdesc.cfg
+    actions for/against yourself or your pets will not affect criminal flags, etc
+    harmful actions against good-alignment NPCs will mark you criminal
+    helpful actions against evil-alignment NPCs will mark you criminal
+    internal command target cursors shouldn't interfere with script target cursors
+    Scripts have a 'controller' attached.  This is set to the spellcaster, or the
+      character doubleclicking the item, etc.  ApplyDamage and ApplyRawDamage now
+      send an EVID_DAMAGED event using the controller as ev.source
+    Added uo::SetScriptController(who) - should be used to set controllers for
+      traps and such
+    EVID_ENGAGED events will be sent to NPCs targetted with hostile actions
+    justice zone "entering" and "leaving" messages won't print if switching between
+      zones where the messages are the same
+    If 'enabled.pkg' exists in a package directory, the package will be enabled
+      regardless of Enabled=1/0 in pkg.cfg.  If 'disabled.pkg' exists, both these
+      will be ignored, and the package will be disabled.
+    It's now possible to set a mobile's colors above 0xfff
+    added mobile.cmdlevel; read-write, set to 0-5 (0-player, 5=test)
+
+07/27/1999 - POLC077
+==========
+    weapon skills, tactics, and parry will cause stat gain from combat
+      - note this is from ANY combat - GMs on rabbits, whatever.
+    transmission buffer size increased to handle huge gump dialogs
+    save time improved; tests show over 2x faster on Win98, almost 2x faster on WinNT
+    Fixed the "you are already holding an item" bug on disconnect while dragging an item
+    Unicode speech is now handled (ASCII character set only)
+    Tooltip text can be specified in itemdesc.cfg
+    'Name' can be specified as 'ObjtypeName' in itemdesc.cfg.  'ObjtypeName' is
+      preferred. 'Name' is deprecated, and will not be supported after core 079
+    Entries in pol.log will be timestamped
+    Added logging for login/logout (with IP), and incorrect password presentation.
+    new polcore() variables:
+        uptime:  system uptime in seconds
+        sysload: system load, 0-100
+    Limited the crash stack backtrace to 100 frames
+    LogSysload=1 in pol.cfg will cause sysload to be logged each minute
+    Corrected an error which could cause CPU usage to rise to 100% until shutdown
+    Removed dump of message type 0x69
+    New internal text command: "log_profile"  logs script profile data
+    New internal text command: "log_profile_clear"  logs script profile data, clears counters
+    new polcore() variables: bytes_sent, bytes_received
+    SendEvent now functions as advertised
+    new members for multis: multi.items and multi.mobiles
+      - arrays of supported items/mobiles
+    Names of scripts that cause access violations will now be logged.
+    Fixed an AV condition on skills with no script defined
+    Target() takes an 'options' parameter.  This should be either TGTOPT_CHECK_LOS or
+      TGTOPT_NOCHECK_LOS.  The default is TGTOPT_CHECK_LOS.  Some scripts currently
+      call Target( someone, "" ) -- this should be changed to Target( someone ) ASAP.
+      For now, this is treated the same as TGTOPT_CHECK_LOS.
+    Corrected another cause of client i/o thread infinite loops.
+    Autodefense will target an attackable opponent or hostile, rather than
+      exclusively trying to hit your opponent.
+    Added the beginnings of aggressor and criminal flagging.
+      Supported:
+        - criminal flagging (2 minutes) for attacking an innocent
+        - aggressor flagging (2 minutes) for attacking first
+        - extension of these timeouts for continued behavior
+        - pets ordered to attack will affect their owner's flags
+        - attacking a pet is like attacking the owner, as far as flagging is concerned
+        - name coloring
+      Not supported:
+        - any repercussions whatsoever for being a criminal
+            (except that others can attack you without becoming criminal)
+        - any repercussions whatsoever for being an aggressor
+            (except that those you are an aggressor to can attack you freely)
+    Corrected an error in the task scheduler, discovered while coding aggressor flagging.
+      This may also affect autodefense.
+    Ships will no longer be able to sail off the map
+
+07/06/1999 - POL076
+==========
+    data/accounts.txt will be re-read after it has been modified (must remain
+        unchanged for 10-40 seconds).
+    basic::pack( expr ) and basic::unpack( string ) added.
+    Config/Data file parser modified to handle arbitrarily long properties
+      (mostly for very large stored arrays)
+    Trailing spaces in config/data files will be trimmed.
+    arrays will display their contents when printed, instead of "<objarray>"
+    Weapons will have a 1% chance (was 25%) per swing of losing 1 HP
+    Temporary kludge for combat skill gain:
+        On each swing:
+            attacker gets 30 raw skill points in his weapon skill
+            attacker gets 15 raw skill points in tactics
+            defender gets 15 raw skill points in tactics
+            defender gets 30 points in parry, if a shield is equipped
+    GetObjProperty/SetObjProperty etc can store arrays of integers, strings, reals, and arrays
+    arrays can be tested for equality.
+    Fixed two memory leaks in the script compiler
+    Skill points will always be awarded for skills with <= 10.0 value
+    items which are 'SaveOnExit 0' will use a different serial number pool,
+      from 0x4F000000 to 0x4FFFFFFF
+    bugfix: fixed some problems with LOS checks on doubleclick (and others)
+            if you stood in the same place as, say, an iron ingot, you couldn't
+            open a container in your backpack; this has been fixed.
+    ecompile can take '-r directory' as a parameter, will compile .src files in
+        directory and all subdirectories
+    bugfix: 'npctemplate' custom prop on corpses will now work.
+    Adding support for packages: see also polcore/docs/packages.txt for detail.:
+        - 'item.usescript' can specify ':pkgname:script' format scriptnames
+        - PKG.CFG can specify 'version', 'requires pkgname version', and 'conflicts pkgname'
+        - AppendConfigFileElem and UnloadConfigFile will accept ":pkgname:cfgfile" syntax
+        - Anywhere you can specify 'script' that would specify a script in a package,
+          you can now specify ':pkgname:script' to reference a script in another package
+        - Spells can be put in packages (put a spells.cfg in package directory)
+        - Packages can contain 'skills.cfg'
+        - ReadConfigFile( "::itemdesc" ) will access data in main itemdesc.cfg as well
+          as all package itemdesc.cfg files.  Same for "::skills.cfg" and "::spells.cfg"
+        - ReadConfigFile handles new formats to specify a config file in another package
+
+05/31/1999 - POL075
+==========
+    DoubleclickRange can be specified in itemdesc.cfg
+      (archery buttes will be broken until their configuration uses this)
+    Linux build: Ctrl-C and 'kill [pid]' are caught for save/shutdown
+    Added uo::polcore() - returns an object that can be used to query system data
+       - itemcount
+       - mobilecount
+    regions/regions.cfg defines justice regions - only enter/leave messages are printed.
+    regions/regions.cfg defines music regions
+    ListMobilesInLineOfSight will not return mobile passed as the center
+    Linux build: fixed bug which was causing 100% cpu usage always
+    Startup output for start.src will be shorter
+    Line of sight to items changed: will be from head of mobile to center of item
+    Doubleclick limits added: must be range <= 1, and have LOS.
+    ~IN[spellnum] can be used to cast spells
+    Spells above the standard 64 can be defined (use ~IN to invoke)
+    NPCs have a 'setmaster(master)' method, which right now only allows renaming
+    Events sent to an NPC will be discarded if more than 30 events are currently queued
+    web server can now serve .gif, .jpg, and .jpeg files
+    scripts: "var" can be used instead of "global" and "local"
+    scripts: object methods are here - doors will have them first.
+    scripts: "array(2, 54)" syntax is deprecated in favor of "{ 2, 54 }"
+    scripts: C-style " /*   */ " comments will function again
+    scripts: old, non-"fully bracketed" syntax will no longer compile.
+    Custom properties prefixed with '#' will not be saved with game state.
+    SendDialogGump now returns an 'integer hash' with the results.
+        var x := SendDialogGump(...);
+        x[0] is the exit-button pressed
+        x[button id] returns 1 if that button was pressed/selected
+        x[text entry id] returns the string contents of a textentry field
+        x.keys returns an array of all the keys
+        See scripts/textcmd/test/exgump.*
+    Added GetWorldHeight(x,y) - returns lowest point above map and lowest statics
+        (It's supposed to, anyway.  It actually returns the point atop the
+         highest static, but it works for most dungeon teleporters, so I'm leaving
+         it broken for a while.)
+    internal changes to resource region stuff; more testing before X3
+    mid() is now unavailable (has always been broken)
+    ghosts will speak ghostspeech (no hooks for spirit speak yet)
+    doors are scriptable; door.src autocloses, and plays sound effects.
+      - door objects have an 'isopen' property
+      - door objects have 'open()', 'close()', and 'toggle()' methods
+      - 'isopen': reports if the door is open or closed
+      - 'open()': opens the door  ("door.open();" in script would open it)
+      - same for  'close()' and 'toggle()' - they change the state of the door.
+      Not sure how well this interface will work, or how intuitive it'll be.
+    bugfix: SetObjProperty etc now work with Multis
+    SystemFindObjectBySerial will find multis
+
+05/18/1999 - POL074
+==========
+    Spawner rewritten; basic spawn limiting is in place.
+    EVID_ITEM_GIVEN event added for items dragged onto NPCs
+    Wrestling will no longer do 0 damage after being used a few times
+    item colors set by scripts will be limited to 0-0xFFF
+    The following types of scripts run at priority 100, instead of critical:
+      - spells
+      - item use
+      - walk on
+      - skill use
+      - text commands
+    The following types of scripts still run critical:
+      - character creation
+    DestroyMulti will destroy houses, moving their contents to the ground.
+    NPCs will have a ".npctemplate" member
+    "CacheInteractiveScripts" in pol.cfg forces disk reloads on use for some scripts:
+      - text commands
+      - item use
+      - walk on
+      - character creation
+      - www pages
+      - spells
+      - skill use
+    Added uo::StartSpellEffect(who,spellid): start the spell script
+    Added uo::GetSpellDifficulty(spellid)
+    Added uo::SpeakPowerWords(who,spellid)
+    Corrected an error where config file/elem variables couldn't be passed to functions
+    spawns.cfg can take 'rect' entries
+    combat.cfg has a param for displaying a message on successful parry.
+    Multithread mode is stable.
+    CDbl(val) added - convert to double
+    ".setskill" now takes base-values instead of raw-values, so
+      ".setskill 25 60" will set Magery to 60.  It'll actually set it to
+      59.9, because of a base->raw conversion bug, so don't panic.
+    Fixed a resource leak if you set 'decayat' on an object...don't ask.
+    More stuff for houses:
+      - Empty space is required between houses:
+        - 2 tiles east-west
+        - 6 tiles north-south
+      - Houses cannot be built on top of mobiles or items.
+      - Houses must sit on level ground.
+      - Houses cannot sit on trees, rocks etc, or have them directly adjacent to it.
+      - Note, it's still possible to create houses in annoying places.. *sigh*
+    'cprop' and 'strprop' entries in itemdesc.cfg will be added to new items
+    Internal clock granularity is now 1/100th second.
+    CreateMultiAtLocation will function for houses, and will create doors and signs.
+      - house.components will be an array of all these items
+      - each component will have a 'house_serial' custom prop with the serial #
+        of the house.
+
+05/09/1999 - POL073
+==========
+    Rudimentary web server added.  Set WebServer=1, WebServerPort=8080 in pol.cfg,
+      then go to http://localhost:8080.  The default website only has a
+      "show online characters" page, but that's just the beginning!
+      This only works in multithread mode, which is unstable on exit,
+        so this is really only for playing around at this point.
+      Default operations allows access only from localhost.
+    Weapon animations can be set - 'Anim' in wepndesc.cfg
+    Weapon sounds can be set - 'HitSound', 'MissSound' in wepndesc.cfg
+    NPCs will no longer step into the same tile as another NPC.
+    WebServerLocalOnly (defaults to 1) in pol.cfg will restrict web server access
+    "AttackHitSound" and "AttackMissSound" can be specified in npcdesc.cfg
+      - Note that to do this, you have to have an AttackSpeed entry too
+    Added uo::SendTextEntryGump() - used for those input box thingies
+      - see uo.em for parameters and constants
+      - Added ".testtextentry" to play with it
+      - numerical mode isn't tested yet, but will for sure return result as a string
+    Added uo::SendDialogGump( who, layout, textlines ) - see uo.em and testgump.src
+       We need more 'testgump' scripts for radio buttons etc
+    RandomInt() will return an error if its parameter is <= 0
+    Performance enhancements to PC movement with lots of ingame items
+    The following functions will automatically convert a 'name' to an 'objtype'
+      (they automatically call GetObjtypeByName if a string is passed)
+      - CreateItemAtLocation
+      - AddMenuItem
+      - ListItemsNearLocationOfType
+      - CreateItemInContainer
+      - CreateRootItemInStorageArea
+      - FindObjtypeInContainer
+      - CreateItemInBackpack
+    ".createstack" can take an objname
+    "Movable" property added to itemdesc.cfg - overrides client datafiles
+    Item descriptions in merchant windows will no longer include redundant amounts
+    "Desc" property in itemdesc.cfg will now be used
+    "MOVEITEM_FORCELOCATION" can be added to the z-coordinate in
+      MoveItemToLocation to force acceptance of the position.
+    ControlScript in itemdesc.cfg is now functional
+    CreateScript in itemdesc.cfg fill now run for:
+      - CreateItemAtLocation
+      - CreateItemInContainer
+      - CreateItemInBackpack
+      If the CreateScript succeeds (returns a 'true' value, or nothing) creation
+      will be allowed; if it returns a 'false' value, creation will fail.
+    DestroyItem will consult the DestroyScript, if any
+    Decay will consult DestroyScript, if any.  Decay counter is not reset;
+      checks will continue on each decay sweep.
+    os::parameter() is gone
+    Added os::set_priority( priority ) - set script priority from 1 to 255
+      - higher priority scripts will get more CPU time
+      - in CS terms, priority is just quanta
+
+
+
+04/29/1999 - POL072 (ouch, too many changes! sorry!)
+==========
+    dot-commands will no longer unhide the character issuing them
+    'stealthsteps' member added to mobiles
+    GameMasters and ghosts can walk through doors
+      GM is defined as graphic == 0x3db, not humans wearing a GM robe
+    NPC stats in NPCDESC will be specified in die-roll, base values
+     (to come: hp, mana, stamina default to associated attributes)
+    'Unhides' property added to skills.cfg, mainly for stealth
+
+    Fixed an AV condition if a stat window was opened on a just-dead NPC
+    Skill values in NPCDESC.CFG are now 'base' values, dieroll-form
+    Skill values in NPCDESC.CFG can be named using Skill Name (skills.cfg)
+      rather than skillid (for example, Wrestling instead of Skill43)
+    Skill values in PCS.TXT and NPCS.TXT will use skill names (and raw values)
+    'concealed' flag added to mobiles.  Similar to 'hidden', but is only
+      cleared explicitly (who.concealed := 0).  Only effective against
+      mobiles below your command level - so Admins can always see GMs, etc.
+      The following functions will _always_ exclude 'concealed' mobiles:
+        ListMobilesNearLocationEx
+        ListMobilesNearLocation
+        ListMobilesInLineOfSight
+        ListHostiles
+        Note that these affect spells cast by higher-level beings.
+    Speech code modified to accomodate 'concealed' flag.  A side effect is
+      that speech by non-warmode ghosts should no longer be seen by non-ghosts
+    Some events will not be generated for hidden and concealed mobiles:
+       - speech
+       - entered area, left area
+       - opponent moved
+    'frozen' and 'paralyzed' members added to mobiles
+      - paralyzed is cleared when ApplyRawDamage is called
+      - paralyzed and frozen are cleared upon death and resurrection
+      - either block:
+        - walking and running (MoveCharacter() functions will still work)
+        - casting
+        - skill use
+        - item doubleclick (except paperdoll)
+        - targetting of any kind
+    '.freeze' and '.thaw' GM commands added
+
+    armor.cfg moved to armrdesc.cfg
+      format merged with itemdesc.cfg
+          ".armor" is gone = ".create" can do it now.
+
+    weapon.cfg moved to wepndesc.cfg
+      format merged with itemdesc.cfg
+      ripples to:
+          equipfromtemplate
+          ".weapon" is gone - ".create" should be able to do it now
+      Instead of WeaponTemplate names, weapons can just use different objtypes
+        to have different capabilities with the same graphic
+      This opens the door for magic weapons etc.
+
+    Experimental multithreading mode: Multithread=1 in pol.cfg
+      It's pretty unstable, typically crashing on exit.  Singlethread (default)
+      mode is unaffected.
+    Config properties can be accessed with "." syntax, rather than using
+      "GetConfigInt", "GetConfigString" etc.  Types (integer, string, real)
+      determined automatically.
+    Config files can be searched for elements with "[]" syntax:
+      config[6] searches by integer key, config["WarAxe"] searches by string
+    SendSellWindow() sort of works; any merchant will buy and item with a
+      nonzero "VendorBuysFor" price in itemdesc.cfg.
+!!  Be sure to recompile merchant.src
+    MoveToward etc will move around simple obstacles



From austin at berlios.de  Fri Sep 16 11:34:45 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 16 Sep 2005 11:34:45 +0200
Subject: [Poldistro-svn] r142 - trunk/096
Message-ID: <200509160934.j8G9YjAU019123@sheep.berlios.de>

Author: austin
Date: 2005-09-16 11:34:45 +0200 (Fri, 16 Sep 2005)
New Revision: 142

Removed:
   trunk/096/core-changes.txt
Log:


Deleted: trunk/096/core-changes.txt
===================================================================
--- trunk/096/core-changes.txt	2005-09-16 09:26:32 UTC (rev 141)
+++ trunk/096/core-changes.txt	2005-09-16 09:34:45 UTC (rev 142)
@@ -1,4028 +0,0 @@
--- POL096 --
-09-15 Austin
-        Added : mobile.connected - To determine if the character is actively connected to the game.
-                Is set to 1 before logon/reconnect scripts are run and 0 right before logofftest is run.
-
-09-14 Shinigami
-        Added : vitals.cfg element option "RegenWhileDead" added (0/1 - defaults to 0)
-
-09-13 Austin
-        Fixed : When a player dies, it will send SYSEVENT_DISENGAGED to the opponent-npc, if one is set.
-
-09-12 Shinigami
-        Added : some Packet functions, same as original one, but with flipping Byte Order
-                Packet.GetInt16Flipped(offset, value)
-                Packet.GetInt32Flipped(offset, value)
-                Packet.SetInt16Flipped(offset, value)
-                Packet.SetInt32Flipped(offset, value)
-
-09-11 Austin
-	Added : Member for mobiles ".opponent". Returns a mobile reference if a combat opponent is selected.
-
-09-10 Shinigami
-        Added : math::Root - returns y Root of x (same as Pow(x,1.0/y))
-
-09-08 Shinigami
-        Changed : eCompile - BASIC style for loops (for i:= start to end) will warn again on -v5 (and above)
-                  about the iteration variable being unused
-
-09-08 Austin
-	Added : polsys::Packages() now has a .npcdesc member. Will be 1 if the package has an npcdesc.cfg file.
-
-09-07 Folko
-        Changed: eCompile - BASIC style for loops (for i:= start to end) will no longer complain about the iteration variable being unused
-        Changed: Fixed some endianess issues and improved the conversion performance
-
-09-03 Shinigami
-        Changed : uo::FindPath will redefine Param mobilesblock as flags (FP_IGNORE_*)
-        Added   : uo::FindPath can ignore Doors (FP_IGNORE_DOORS)
-
-09-03 Austin
-        Fixed : cfgfile::GetConfigStringArray() lines that contain a property name but no value will not be placed in the array.
-        Added : cfgfile::GetConfigStringDictionary( element, property_name ). Works similarly to
-                GetConfigStringArray() but will take the first word on the line and use it for the key.
-                Elem ElemName
-                {
-                       PropLine keyname this will be the text placed in it
-                }
-
-09-02 Shinigami
-        Fixed : uo::Attach allowed you to attach more than one Script to a Character
-
-08-29 Shinigami
-        Changed : UseAAnTileFlags in SERVSPECOPT(.LOCAL).CFG renamed to UseTileFlagPrefix (check 03-05)
-                  (compatibility with const TILEDATA_FLAG_* inside uo.em)
-        Changed : player.spyonclient2 renamed to player.clientinfo (check 01-24)
-
-08-29 Folko
-        Added   : Support for custom MIME types in config/www.cfg. This allows you to
-                  add new file types that the web server can handle, for example PNG images,
-                  PDF files or favicon.ico. If you don't supply a www.cfg, old defaults are used.
-        Hint    : Here's an example www.cfg:
-
-                MIME gif
-                {
-                    Extension gif
-                    MIME image/gif
-                }
-
-                MIME jpg
-                {
-                    Extension jpg
-                    MIME image/jpeg
-                }
-
-                MIME jpeg
-                {
-                    Extension jpeg
-                    MIME image/jpeg
-                }
-
-08-28 Austin
-	Added : Ability to initialize error as you would a struct.
-		Example return error{"errortext" := "This is the error message"};
-	Added : Extended NPC.EM Say() function to allow for two additional parameters.
-		Say( text, text_type:=SAY_TEXTTYPE_DEFAULT, do_event:=SAY_DOEVENT_DISABLE );
-                Text type is a string "default", "yell", "whisper", constants are:
-		SAY_TEXTTYPE_DEFAULT, SAY_TEXTTYPE_YELL, SAY_TEXTTYPE_WHISPER (added to npc.em)
-		If do_event is enabled with SAY_DOEVENT_ENABLE, it will send a speech event to nearby npcs.
-
-08-26 Austin
-	Fixed : LEFTAREA event was not being sent to npcs in the old realm when a mobile was moved to a new realm.
-	
-08-25 Austin
-	Fixed : LEFTAREA event was not being sent if a mobile was teleported 33 tiles or more away.
-
-08-23 Austin
-        Added : Logging out will now send a LEFTAREA event (after logout.ecl has finished).
-        Added : New flag for servspecopt.cfg called "EventVisibilityCoreChecks" set to 0 (disabled) by default.
-                Enabled - the core does visibility checks before sending events as it did before.
-                Disabled - requires your scripts do visibility checking. 
-
-08-22 Shinigami
-        Fixed : sometimes the Core crashed while destroying Items (e.g. via Control Scripts) on Boats
-
-07-28 Shinigami
-        Changed : eCompile - Assignment inside Condition Check will produce Warning on -v5 (and above) only
-
-07-26 Shinigami
-        Changed : TextCMDs can be specified in Packages; just make a commands/gm (new style) or
-                  textcmd/gm (old style) etc directory. These are only scanned at startup,
-                  so if the directory doesn't exist then, it won't be searched until restart.
-        Changed : Support for packaged Includes - if you use 'Include ":blah:blubb";'
-                  eCompile will search for ":blah:blubb.inc" and ":blah:include/blubb.inc".
-                  It will use first file found. If both files exist eCompile will print a Warning.
-
-07-25 Shinigami
-        Added : MinDamage and MaxDamage in weapon.GetItemDescriptor() calculated from Damage-Dice
-        Changed : usable Msg size of SendDialogGump doubled - now you can use larger Gumps
-
-07-16 Shinigami
-        Fixed : uoconvert will ignore illegal statics with graphic >= 0x4000
-        Added : uoconvert.cfg element option extended by ShowIllegalGraphicWarning
-                StaticOptions
-                {
-                    MaxStaticsPerBlock        1000
-                    WarningStaticsPerBlock    1000
-                    ShowIllegalGraphicWarning 1
-                }
-                it's a flag and defaults to 1 (for the other entries go to 07-05)
-
-07-07 Shinigami
-        Hint : uo::ListItems*Location, uo::ListMobile*Location and uo::ListStatics*Location
-               will check for out-of-range coords now
-               uo::ListObjectsInBox, uo::ListMultisInBox and uo::ListStaticsInBox
-               will NOT check for out-of-range coords - a lot of scripter "love" this bug :o/
-
-07-06 Shinigami
-        Fixed : u'll get the correct string representation even if a numeric Config File
-                Value will cause an overflow
-
-07-05 Shinigami
-        Added : Warning if no tiles or landtiles are loaded (maybe files missing...)
-        Added : uoconvert.cfg element option added, StaticOptions, in the following form:
-                StaticOptions
-                {
-                    MaxStaticsPerBlock     1000
-                    WarningStaticsPerBlock 1000
-                }
-                max. Amount of Static Items per Block of 8x8x256 (or Warning Level)
-                it is hard limited to 10000. default is 1000.
-
-07-04 Shinigami
-        Changed : uo::ListStaticItemsAtLocation to uo::ListStaticsAtLocation( x, y, z, flags, realm )
-                  uo::ListStaticItemsNearLocation to uo::ListStaticsNearLocation( x, y, z, range, flags, realm )
-                  IGNORE_* constants to ITEMS_IGNORE_* constants
-        Added : Parameter Z in uo::ListStatics*Location
-        Added : LIST_IGNORE_Z constant u can use for Z Parameter to list all Items ignoring Z-Value
-                in uo::ListStatics*Location, uo::ListItems*Location and uo::ListMobilesNearLocation*
-        Added : uo::ListStaticsInBox( x1,y1,z1, x2,y2,z2, flags, realm );
-                creates an array of structures with Static and Multi Items in box.
-                you can specify via flags which Items you want to get. check ITEMS_IGNORE_* constants.
-        Added : realm-based coord check inside List*InBox and uo::ListMobilesNearLocation*
-
-07-01 Shinigami
-        Fixed : low-fragmentation Heap is linked dynamically, so Core will work on Win9x/NT again
-        ReAdded: uo::GetAttributeIntrinsicMod( character, attrname )
-                 You set intrinsic Mod via exported GetIntrinsicModFunction in attributes.cfg
-        Fixed : Memory leak inside cfgfile::Read-/UnloadConfigFile(...)
-                cfgfile::AppendConfigFile(...) will call cfgfile::UnloadConfigFile(...) immediately
-
-06-15 Shinigami
-        Added : npc::CanMove( direction ) - checks if an NPC can move in given direction
-                (IsLegalMove works in a different way and is used for bounding boxes only)
-        Added : UseWinLFH=0|1 in SERVSPECOPT(.LOCAL).CFG (default = 0)
-                Use Windows XP/2003 low-fragmentation Heap?
-
-06-06 Shinigami
-        Fixed : FindPath will work again @ Linux-Core without crashing server in some cases.
-
-06-01 Shinigami
-        Fixed : Cancel of TradeWin will put items in correct Realm on ground if backpack full
-        Added : movecost.cfg can have 'Walking_Mounted' and 'Running_Mounted' sections too.
-                You've to declare one global 'MovementCost' section or 2 sections 'Walking' and
-                'Running'. If you don't declare Mounted sections, Core will use unmounted values.
-        Added : uo::Attach( character ) - attach a Script to a Character
-        Fixed : moving intrinsic Weapon via MoveItemToLocation crashed Server
-                WARNING: You should never touch intrinsic Weapons!
-        Added : uo::ListStaticItemsAtLocation( x, y, flags, realm )
-        Added : uo::ListStaticItemsNearLocation( x, y, range, flags, realm )
-                creates an array of structures with Static and Multi Items at or around location.
-                you can specify via flags which Items you want to get. check IGNORE_* constants.
-                [Edit: changed... please check 07-04 above]
-        Added : uo::GetStandingLayers( x, y, flags, realm )
-                get an array of standing layers and blocking solids. check MAPDATA_FLAG_* constants.
-
-05-31 Shinigami
-        Added : flag LOG_DATETIME in file::LogToFile( filename, line, flags := 0 )
-                to log Core-Style DateTimeStr in front of log entry
-                
-05-28 Shinigami
-        Added : flag ENUMERATE_IGNORE_LOCKED in uo::EnumerateItemsInContainer( container, flags := 0 )
-                to list content of locked container too
-        Added : uo::SecureTradeWin( character, character2 ) - to init secure trade via script over long distances
-        Added : uo::MoveItemToSecureTradeWin( item, character ) - to move item to secure trade window via script
-
-05-25 Shinigami
-        Added : Account.delete() - delete this empty account
-        Added : Account.split( newacctname : string, index : 1..5 )
-                create a new account and move character to it
-        Added : Account.move_char( destacctname : string, index : 1..5 )
-                move character from this account to destination account.
-                you can use it to flip chars on same account too - it's not a bug, it's a feature ;oP
-
-04-04 Shinigami
-        Added : player.createdat - returns the PolClock when the character was created
-        Added : Before character deletion, scripts/misc/candelete.ecl will be called.
-                  program definition is:
-                    - program can_delete( who, deleteby ); // return nonzero to allow deletion
-                  new constants in UO.EM:
-                    - DELETE_BY_PLAYER : Delete-Request by Player
-                    - DELETE_BY_SCRIPT : Delete-Request by account.DeleteCharacter( index )
-                Before character deletion, scripts/misc/ondelete.ecl and anypkg/ondelete.ecl will be called.
-                  Their return values are ignored.
-        Fixed : Call OnDelete script in account.DeleteCharacter( index ) too.
-        Updated : Account.set_uo_expansion(string): recognized values: SE, AOS, LBR, T2A (default), "".
-                    This determines what flag is sent with packet 0xB9 during login
-                      (Nothing -> 0x0000 / T2A -> 0x0001 / LBR -> 0x0002 / AOS -> 0x801b / SE -> 0x805b).
-                    It's possible to hook 0xB9 but don't forget to set_uo_expansion anyway because core
-                    uses this for internal flags (e.g. AoS Tooltips). Packet 0xB9 will be sent earlier
-                    (before you choose a character) and after you've used set_uo_expansion.
-        Updated : servspecopt.cfg property: UOFeatureEnable, used in the last dword of the 0xA9 login packet,
-                  will block Bit 6 (support up to 6 Chars).
-                  To enable AoS stuff set Bit 5 (use 0x20), to enable SE stuff set Bit 7 & 5 (use 0xa0). 
-
-04-02 Shinigami
-        Added : Additional realm-support
-                  CreateItemCopyAtLocation(x, y, z, item, realm := _DEFAULT_REALM);
-                  boat.move_offline_mobiles(int x, int y, int z[, string realm]);
-                    (If realm is not set, Boat-realm is used.)
-        Added : Some realm-constants to uo.em
-
-03-05 Shinigami
-        Added : UseTileFlagPrefix=0|1 in SERVSPECOPT(.LOCAL).CFG (default = 1)
-                Should Core prepend "a"/"an" according to tiles.cfg flags to formatted item names?
-                (p.s.: in 08-29 renamed from UseAAnTileFlags to UseTileFlagPrefix)
-        Fixed : Last but not least, remove Spell Delay usage from core.
-
-03-03 Madman
-        Fixed : My previous attempt to remove spellcasting from the core was incomplete. It should no
-                  longer run a skillcheck before starting the spell script.
-
-03-02 Shinigami
-        Fixed : MoveObjectToRealm will handle any type of items (equipment etc.) and container with content too.
-        Fixed : You can move item from container to different realm without crash.
-
-03-01 Shinigami
-        Fixed : Pol will support up to 5 Maps now (Britannia, Britannia_alt, Ilshenar, Malas, Tokuno)
-
-02-23 Shinigami
-        Added : DecayItems=0|1 in SERVSPECOPT(.LOCAL).CFG (default = 1)
-                Disable (e.g. World Design Server) or enable (Live Shard Server) item decay.
-
-02-14 Shinigami
-        Fixed : AOS Spellbook entries in itemdesc.cfg will not crash linux build anymore.
-        Fixed : Wrong handling of double clicking AoS style Spellbooks.
-
-01-27 Shinigami
-        Fixed : UOConvert will convert Samurai Empire Map Tokuno.
-                Don't forget to use tiledata.mul shipped with SE.
-                Don't forget to build new tiles.cfg and landtiles.cfg too.
-                If not, your Tokuno Realm works and maybe looks funny ;o)
-        Fixed : Small bug within UOConvert and Tiledata names with full length.
-
-01-24 Shinigami
-        Added : player.clientinfo -- returns a struct with a lot of usefull infomation about client PC
-                Example :
-
-                Function TestClientInfo(who)
-                  Var info:=who.clientinfo;
-
-                  If (info.unknown1) // in most/all cases 0x02
-                    SysLog("ClientInfo '"+who.name+"' ["+who.acctname+"]");
-                    SysLog("  Unknown1                 = "+Lower(Hex(info.unknown1)));
-                    SysLog("  Unique Instance ID of UO = "+Lower(Hex(info.instance)));
-                    SysLog("  OS Version               = "+info.os_major+"."+info.os_minor+"."+info.os_revision);
-                    SysLog("  CPU Manufacturer         = "+info.cpu_manufacturer);
-                    SysLog("  CPU Family               = "+info.cpu_family);
-                    SysLog("  CPU Model                = "+info.cpu_model);
-                    SysLog("  CPU Clock Speed          = "+info.cpu_clockspeed+" MHz");
-                    SysLog("  CPU Quantity             = "+info.cpu_quantity);
-                    SysLog("  Memory                   = "+info.memory+" MB");
-                    SysLog("  Screen Resolution        = "+info.screen_width+" x "+info.screen_height+" x "+info.screen_depth+" Bit");
-                    SysLog("  Direct X Version         = "+info.directx_major+"."+info.directx_minor);
-                    SysLog("  Video Card Description   = "+CChrZ(info.video_description));
-                    SysLog("  Video Card Vendor ID     = "+info.video_vendor);
-                    SysLog("  Video Card Device ID     = "+info.video_device);
-                    SysLog("  Video Card Memory        = "+info.video_memory+" MB");
-                    SysLog("  Distribution             = "+info.distribution);
-                    SysLog("  Clients Running          = "+info.clients_running);
-                    SysLog("  Clients Installed        = "+info.clients_installed);
-                    SysLog("  Partial Insstalled       = "+info.partial_installed);
-                    SysLog("  Language Code            = "+CChrZ(info.langcode));
-                    SysLog("  Unknown2                 = "+info.unknown2);
-                  Else
-                    SysLog("No ClientInfo '"+who.name+"' ["+who.acctname+"]");
-                  EndIf
-                EndFunction
-
-                Limitations :
-                  The client doesn't send this Packet every time,
-                    if available you can use it first time in your misc/logon.src.
-                  If your login server differs from play/shard server it doesn't work
-                    (Packet will be send before you choose the server only).
-                  This will work for Win release only, until now. Win and Linux core
-                    handle server-choose- and play-connection in a different way.
-                    Not sure why, must be something with OS-Socks implementation :o(
-
-                Comment :
-                  Seems to be very usefull to detect shadow accounts...
-                  You love 1984? OSI too ;oP
-
-                (p.s.: in 08-29 renamed from player.spyonclient2 to player.clientinfo)
-
-01-24 Shinigami
-        Linux : If you'll get something like this using Gentoo Release:
-
-                  pol: ../sysdeps/generic/dl-tls.c:72: _dl_next_tls_modid:
-                    Assertion `result <= _dl_tls_max_dtv_idx' failed.
-
-                try following to run your Pol:
-
-                  #!/bin/sh
-                  export LD_ASSUME_KERNEL=2.4
-                  ./pol
-
-09-18 Birdy
-        Fixed : Moved login complete packet send higher in login process to try to fix
-                problems with logging into a weather region with weather where it would
-                start to rain spell icons instead of rain or snow.
-
-08-03 Birdy
-        Added : AcctMatch lines in server entries in servers.cfg.  Example of format
-                is below.  AcctMatch lines have one account name per line, and are
-                those accounts to show the given server to on login to the
-                'login server'(the server that is in the client's login.cfg).
-                Example :
-
-                GameServer
-                {
-                    Name      Test
-                    IP        192.168.0.1
-                    Port      5003
-                    AcctMatch admin
-                    AcctMatch staff
-                }
-
-                The above would only display that particular server(Test, located at
-                192.168.0.1:5003) to someone logging into the login server with
-                accounts admin or staff.
-
-                IPMatch still works as well, and for an account to see the server it
-                must fulfill both IPMatch and AcctMatch entries, if those exist to
-                match up against.
-
-08-03 Birdy
-        Fixed : Good Aligned NPCs that attack innocents and go criminal will
-                highlight grey now.
-                Attacking criminal flagged Good NPCs will no longer flag others as
-                criminal.
-
-08-01 Birdy
-        Fixed : Crash bug related to realm not being set in createitemincontainer soon
-                enough for references to it in create scripts.
-
-07-27 Birdy
-        Added : New system event : SYSEVENT_GONE_CRIMINAL := 0x2000;
-                You should add this to your sysevent.inc file or wherever you keep your
-                system event constants.  This event is closely associated with the
-                SYSEVENT_ENTERED_AREA event.  It uses the current range setting for
-                the ENTERED_AREA event as it's own range, and this is for good reason.
-                The GONE_CRIMINAL event lets the system tell the NPC when a mobile has
-                become a criminal(from a previously non-criminal state) by firing this
-                event and placing a character reference to the new criminal in the
-                source field of the event. If used in conjunction with the ENTERED_AREA
-                system event, then guards should be able to do their guarding work
-                without needing to do polling scans of the area around them periodically.
-                On ENTERED_AREA events, you check to see if the person entering the area
-                is a criminal or not.  On GONE_CRIMINAL events, you know that the person
-                who was already in the area has become a criminal from previously being
-                innocent.
-
-                This event will only fire if the criminal is visible to the NPC.  Though
-                again, if you are using it in conjunction with the ENTERED_AREA event, then
-                when the criminal comes out of hiding, an ENTERED_AREA event will be fired
-                and you can handle the criminal there.
-
-                This event will also only fire on transitions from innocent status to
-                criminal status.  No events will fire on transition to innocent status
-                again, and if the subject was already a criminal to begin with, then
-                doing a criminal act again will not fire the event.  This is to keep the
-                system from being overloaded with events since every hit on an innocent
-                is a new criminal act.
-
-                I will stress one last time, use this WITH the SYSEVENT_ENTERED_AREA
-                system event, NOT on it's own!  Or you will be confused and bewildered.
-                You have been warned!
-
-07-18 Madman Across the Water
-        Changed: Casting from the default spellbook:
-               * It no longer checks if you are dead, says the words of power,
-                 performs the animations, checks for free hands, performs a
-                 skill check, or checks for or consumes mana or reagents. All
-                 these things must now be handled in scripts. This, combined
-                 with Myrathi's changes on 5-12, wherein spellid is now passed
-                 to the cast spell, should allow greater flexibility and also
-                 simplicity in spell systems and scripts.
-
-06-17 Birdy
-        Changed: Uncommented RandomFloat(...) in util.em to allow it to be used.
-
-06-13 Birdy
-        Fixed: Items dragged across realms and dropped will update properly.  This
-               is necessary to allow storage containers to be able to have their items
-               dragged out of them and dropped on the ground directly, even if the
-               ground is not the default realm that storage containers are all in.
-        Fixed: All worn items will now have their realm updated on character realm
-               transfer instead of just the backpack.
-
-06-09 Myrathi
-        Removed: Deprecated UO.EM functions:
-               * Damage()
-               * GameStat()
-
-06-08 Myrathi
-        Fixed: CASE statements given a significant overhaul:
-               * Error messages now correctly refer to them as a "CASE statement",
-                 not a "SWITCH statement".
-               * They now *require* their test-expression to be within parenthesis.
-               * Empty CASE statements with no option clauses are now caught as
-                 invalid.
-               * A warning message will be displayed if the only thing defined is
-                 a "default:" clause (i.e. no option clauses)
-               * Missing option values are now caught and less cryptic error messages
-                 shown (e.g. when using undefined constants)
-
-06-06 Myrathi
-        Added: New 'dowhile' keyword (to solve the "do/while()/endwhile/while()"
-               bug). "do..dowhile()" now follows the more usual block syntax
-               style (if..endif, while..endwhile, etc.).
-               Syntax is as follows:
-
-                   do
-                     <statements>
-                   dowhile ( <expression-is-true> );
-
-06-05 Birdy
-        Added: ItemColorMask ServerSpecOpt option.  This option defaults to the
-               typical POL mask of 0xFFF.  It is a bitmask of what colors should
-               be considered valid.  For example, with an ItemColorMask of
-               0xFFF, any color from 0 to 4095 is considered a valid color.
-               With an ItemColorMask of 0xFF, this would be reduced to a range
-               from 0 to 255.  It was left a mask instead of given as a range
-               in order to allow specifying certain bits to be on.  So, for
-               instance, with the newer clients, a mask of 0x4FFF will allow
-               the third bit (value 4) of the most significant nibble to
-               be turned on, but no others in that nibble.  This allows for
-               newer clients to use the "transparent animation" feature, which
-               allows equipped mounts to be transparent(ie, ethereals).  Bear
-               in mind, older clients may well crash if you set colors to be
-               outside of the non-default mask of 0xFFF, so this is strictly at
-               your own risk to use it.  But for those of you wishing ethereal
-               beetles and other mount animations to be ethereal, you will have
-               to set the mount piece to be color 0x4001 and then equip it.
-               And in order to do that, you will need an ItemColorMask of
-               0x4FFF.
-
-06-03 Birdy
-        Removed: GetAttributeIntrinsicMod(...) function interface in uo.em was
-                 removed, since no Set for the function has existed since way
-                 back in POL094 test cores and no plans to impliment a set
-                 exist.  This will require a search of your scripts for this
-                 function and removal of it(some distro code has it) and
-                 a recompile of those scripts.
-
-05-24 Birdy
-        Fixed: FindSubstance should now (hopefully) auto-release items reserved by
-               it on script termination.
-        Fixed: Packet.SendAreaPacket(x,y,range,realm) now looks for 4 parameters
-               as it should instead of 3.
-
-05-17 Birdy
-        Changed: concealed property is no longer compared to cmdlevel by core.  Any
-                 scripts changing concealed should do validation against cmdlevel
-                 itself.  Doing this now allows NPCs and others to be able to be
-                 concealed at higher levels than their cmdlevel.  For this added
-                 flexibility, all validation must now be done within scripts!
-
-05-16 Myrathi
-    Removed deprecated operators and tokens (as promised! :P'):
-        - '=' has been removed; use '==' to test for equality.
-          (appropriate suggestions will be made for '==' or ':=')
-        - 'local', 'global' and 'dim' have been removed; use 'var' to declare variables.
-        - 'begin' and 'end' have been removed:
-			do..while() loops now work without them.
-			repeat..until() loops never actually needed them: so no loss. :)
-
-        ** Scripts containing any of the removed operators or tokens **
-        **     WILL NOT COMPILE ANY MORE!! Update your scripts!!     **
-
-05-12 Myrathi
-	Fixed: Mobile 'mob.frozen' flag is now saved properly (NOTE: this includes PCs and
-		will most likely require any existing scripted workarounds to be rewritten!)
-
-	Added: Extra 'spell_id' parameter is now passed to spell scripts which relates to
-		'SPELLID' in the spell's entry in '::spells.cfg'.
-
-		Example:
-			use uo;
-			program spellscript( who, spell_id )
-				SendSysMessage(who, "Casting SPELLID# " + CStr(spell_id));
-				// "Clumsy" has spell_id = 1, "Create Food" = 2, etc..
-			endprogram
-
-05-01 Birdy
-	Fixed: Number of Map/Static patches was reversed in the enable difs packet.
-
-05-01 Racalac
-    Fixed CProps "GivenBy", "GivenTo", and "GivenTime" set on items dropped on NPCs.
-
-04-26 Birdy
-    Added: New uo.em function created :
-        FindSubstance( container, objtype, amount, makeinuse := 0 )
-        This function will search the given container for items of objtype in an
-        amount equal or greater than the amount given(stackables can return greater
-        than #), if makeinuse is set to 1, then the items will be reserved.  If
-        sufficient # of items have been found, those found(and possibly reserved)
-        will be returned in an array as the return value.  If not enough of the
-        given item were found, then an error with errortext = "Not enough of that
-        substance in container" will be returned.
-
-04-25 Racalac
-    Added new house methods that allow write access to the house.components array.
-        house.add_component(item ref)
-        house.erase_component(item ref)
-    Added multi member:
-        multi.footprint
-            returns a struct with "xmin", "xmax", "ymin", "ymax" of the world coordinates
-            the house or boat occupies.
-    Added GetMultiDimensions(graphic), returns struct with "xmin", "xmax", "ymin", "ymax"
-        of _relative_ distances from center. xmin and ymin are _negative_.
-    Changed TargetMultiPlacement. new optional parameters:
-        TargetMultiPlacement( character, objtype, flags := 0, xoffset := 0, yoffset := 0 );
-        xoffset and yoffset change the "ghost" target house. NOTE: the coordinates returned
-        by this are the coordinates of the "target" cursor, not the center of the house!
-        So if you want to have the front steps be under the cursor, you must transform the
-        parameters to CreateMultiAtLocation to include your xoffset and yoffset. ANOTHER
-        NOTE: positive offsets move the cursor left/down in relation to the ghost house.
-        When transforming the coordinates for CreateMultiAtLocation, use the negative (i.e
-        if yoffset is 4, subtract 4 from the y coordinate result of TargetMultiPlacement
-        when passing the location to CreateMultiAtLocation.
-        Example, using the front steps to target:
-            var dims := GetMultiDimensions( 0x6071 );
-            if(!dims) return; endif
-            var loc := TargetMultiPlacement( who, 0x6071, 0, 0, dims.ymax );
-            if(!loc) return; endif
-            var house := CreateMultiAtLocation( loc.x, loc.y - dims.ymax, loc.z, 0x6071, 0, who.realm );
-
-
-04-24 Racalac
-    Armor Zone 0 errors hae a better message now.
-    Half-created PCs shouldn't get into the world file now.
-    Added house.custom() returns 1/0 (for upcoming custom house support)
-    NPC move functions check the current realm's bounds
-    CreateItemAtLocation correctly checks passed coordinates for validity for the realm
-    Map methods (insertpin, etc) check the current realm's bounds. Not like there's art for
-        the other realms anyway.
-    Packet 0x1B changed to include correct map/server bounds
-
-04-23 Birdy
-	Changed: Mounts listed in uoconvert.cfg that are not found to have tiledata.mul
-		entries will now be created regardless.  Should fix problems related to
-		0x3ea2 mount(perhaps others too), which has no tiledata.mul entry, yet
-		is a valid mount graphic.
-
-04-20 Birdy
-	Fixed: FindPath(...) should work again now.
-
-04-17 Birdy
-	Changed: Speech.mul -- Added in support for UTF-8 -> Unicode decoding in speech.mul
-		packets.  Should work now (hopefully) for all languages.
-	Fixed: Minor tweaks to movement.  Should fix some bounceback problems.
-
-04-17 Racalac
-	Multimap/Realm Support
-	----------------------
-	POL now supports seperate maps, or "Realms", such as britannia, ilshenar,
-	and malas. The uoconvert tool is the starting point for using realms on
-	your shard. Run the updated instructions in the included uoconvert.txt
-	help file. The names of the directories created in pol/realms by uoconvert
-	are the realm names that are used by the core and your scripts. I
-	recommend you keep them the same as what is in the uoconvert.txt file.
-	Realm names are the key to using realms on your shard.
-
-	The client's *.dif files should be used in the uoconvert process, as the
-	client needs to know how many patches exist. Any time the .dif files
-	change on the client side, re-run uoconvert with the new .dif files to
-	stay in sync.
-
-
-	Object Changes:
-	UObject.realm: Read-only string. (This inherits to Item, Character, Multi, etc)
-
-	Account.uo_expansion: Read-only string
-	Account.set_uo_expansion(string): recognized values: AOS, LBR, T2A (default)
-	  This determines what flag is sent with packet 0xB9 during login. The
-	  servspecopt.cfg UOFeatureEnable is used with packet 0xA9 and is currently
-	  global to all clients.
-
-	Packet.SendAreaPacket(x,y,range,realm), realm name string parameter added.
-
-	Escript Module Changes:
-	polsys.em:
-		Added "Realms()": returns a dictionary of structs. example:
-			"realm_name" -> "width"
-						    "height"
-						    "mapid"
-						    "toplevel_item_count"
-						    "mobile_count"
-
-	uo.em (included with zip):
-	The following functions were enhanced with a realm parameter (all realm
-	parameters are a case-sensative string name of the realm). All other
-	functions use some object's context for determining the realm.
-
-	Tip for upgrading: all your scripts should works normall _in Britannia_.
-	In any other realm they will fail. You must find all occurances of these
-	functions on your shard and fill in the realm parameter with an appropriate
-	value. For example, in the createnpc textcommand, the call to
-	CreateNPCAtLocation should be made with 'who.realm' as the last parameter.
-	Many script changes are easy like this, others are harder, like
-	spawnregion and recall/gate spells. If something doesn't work, you can be
-	fairly sure it's due to an incorrect realm parameter. The pol-distro
-	sourceforge project has been updated with many of these changes if you
-	wish to look.
-
-	const _DEFAULT_REALM := "britannia";
-	CreateItemAtLocation( x, y, z, objtype, amount := 1, realm := _DEFAULT_REALM );
-	CreateMultiAtLocation( x, y, z, objtype, flags := 0, realm := _DEFAULT_REALM );
-	CreateNpcFromTemplate( template, x, y, z, override_properties := 0, realm := _DEFAULT_REALM);
-	FindPath( x1, y1, z1, x2, y2, z2, realm := _DEFAULT_REALM, mobilesblock := 0, searchskirt := 5 );
-	GetHarvestDifficulty( resource, x, y, tiletype, realm := _DEFAULT_REALM );
-	GetMapInfo( x, y, realm := _DEFAULT_REALM );
-	GetRegionString( resource, x, y, propertyname, realm := _DEFAULT_REALM );
-	GetStandingHeight( x, y, startz, realm := _DEFAULT_REALM );
-	GetWorldHeight( x, y, realm := _DEFAULT_REALM );
-	HarvestResource( resource, x, y, b, n, realm := _DEFAULT_REALM ); // returns b*a where 0 <= a <= n
-	ListGhostsNearLocation( x, y, z, range, realm := _DEFAULT_REALM );
-	ListItemsAtLocation( x, y, z, realm := _DEFAULT_REALM );
-	ListItemsNearLocation( x, y, z, range, realm := _DEFAULT_REALM );
-	ListItemsNearLocationOfType( x,y,z, range, objtype, realm := _DEFAULT_REALM );
-	ListItemsNearLocationWithFlag( x,y,z, range, flags, realm := _DEFAULT_REALM );
-	ListMobilesNearLocation( x, y, z, range, realm := _DEFAULT_REALM );
-	ListMobilesNearLocationEx( x,y,z, range, flags, realm := _DEFAULT_REALM );
-	ListObjectsInBox( x1,y1,z1, x2,y2,z2, realm := _DEFAULT_REALM );
-	ListMultisInBox( x1,y1,z1, x2,y2,z2, realm := _DEFAULT_REALM );
-	PlayMovingEffectXYZ( srcx, srcy, srcz, dstx, dsty, dstz, effect, speed, loop := 0, explode := 0, realm := _DEFAULT_REALM );
-	PlayStationaryEffect( x, y, z, effect, speed, loop := 0, explode := 0, realm := _DEFAULT_REALM );
-
-	Functions added:
-	MoveObjectToRealm( object, realm, x, y, z, flags := 0 );
-		--This is the only write interface to an object's realm. If you wish
-		an object to reside on another realm, this is the only function
-		available. Check obj.realm != destination_realm to avoid unnecessary
-		same-realm transfers. flags is the normal MoveItem|CharacterToLocation
-		flags. The passed x,y,z must be a standable location in the specified
-		realm.
-
-	Most of these functions will return the errors "Realm not found" and
-	    "Invalid Coordinates for realm".
-
-
-	Regions:
-	Added "Realm realmname" property
-
-	poltool:
-	added a 5th parameter for the 'mapdump' command, a realm name string as above
-
-	uoconvert:
-	number of map and static patches (from mapdif and stadif files) saved to
-	   /realm/[name]/realm.cfg
-	Recommend to turn on mapdifs for all realms.
-
-
-	Other Changes:
-	AOS Spellbook packets are supported. For this, change you spellbook's
-	itemdesc.cfg type from Container to Spellbook. Paladin and Necromancer
-	spellbooks are supported by the new Spellbook itemdesc type property
-	"SpellType" which is one of these strings: "Magic", "Paladin", "Necro".
-
-	Recognized scroll objects are: Magic: 0x1F2D - 0x1F6C, Necro 0x2260 - 0x226F,
-	    Paladin: 0x2270 - 0x227C. Sorry this is hardcoded :P
-
-	Simple support for AOS tooltips - old single click functionality is supported.
-
-	Custom Houses - not yet sorry, that's next!
-
-
-04-01 Birdy
-	Added: 	MaxPathFindRange servspecopt[.local].cfg option added.  This will define the
-			maximum distance between the start and destination points which pathfinding
-			will be performed on.  If PathFind is called on points greater than this
-			value, an error result will be returned with "Beyond Max Range." as the
-			errortext.  Default value for this is 50.
-	Added:	HiddenTurnsCount servspecopt[.local].cfg option added.  This will define
-			whether or not turns made while hidden will count as a "move".  It defaults
-			to 1, which is the way POL has always operated.  If set to zero, then if
-			you are hidden and make a turn, it will not count against your stealth steps,
-			nor will it unhide you if you are not stealthing.  If set to one, turns while
-			hidden do count against stealthsteps, and will unhide you if you are not
-			stealthing.
-	Added:  New uo.em function added, UseItem(item, character);  This will allow the
-			item specified's use script to be run by the character specified.  No checks
-			are done for distance, or check for being a ghost, or anything else.
-			Essentially, the script is just fired off on the character without checks, so
-			the script calling this function should do those checks if desired.  This
-			function can also be called with NPC's as the character, but any use script
-			that requires interactivity with it's user that is called on an NPC may have
-			unpredictable results(dependant on the script).
-	Added:  UOConvert now will report the (x,y,z) of invalid tiles that cause it to
-			abort map conversion instead of just aborting.
-
-03-29 Birdy
-	Fixed: Caves should now be able to be walked into.  Some problems along shores fixed too.
-			Run UOconvert on your files for this fix to work.
-
-03-24 Birdy
-	Changed: Character height in all other aspects changed to 15 from 9 to better reflect height in
-			 game relative to items.
-	Changed: Walking related to ladders modified to try to help in their traversal.
-	Changed: The map now should block LOS.  Run UOconvert on all your files again! (see uoconvert.txt
-			 for instructions)
-	Fixed: Speech.mul should now display speech with keywords even when on a non-ENU region computer.
-	Changed: Boats now check height of blockables in relation to the boat before being
-			 blocked by them.  This should allow boats to travel under sufficiently high
-			 bridges and over statics that may be under the map.
-	Added: Pathfinding function FindPath.  This is a very experimental function and has a minute
-			chance of returning a "Path Corrupted" error.  If you use it and can find a distinct
-			path from point A to point B which generates a "Path Corrupted" error, please send
-			details to the dev team.
-
-			Function prototype is found in uo.em and takes the form :
-
-			FindPath( x1, y1, z1, x2, y2, z2, realm := _DEFAULT_REALM, mobilesblock := 0, searchskirt := 5 );
-
-			(x1,y1,z1) = start of the path
-			(x2,y2,z2) = destination
-			mobilesblock = Whether or not to consider mobiles in the way as 'blocking' the path.
-			searchskirt = The skirt around the square that is formed around the start of the path
-						  to the destination which represents the searchable area.
-
-			If it finds a path it will return an array of coordinates, representing each step
-			along the path from the next step to take from the start of the path to the actual
-			destination.  The coordinates are found in .x, .y, and .z.  Ex :
-
-			myPath := FindPath(startx, starty, startz, endx, endy, endz);
-
-			The first step to take from a standing position at (startx,starty,startz) would be
-			at (myPath[1].x, myPath[1].y, myPath[1].z), the next at (myPath[2].x, myPath[2].y,
-			myPath[2].z), etc.
-
-			Keep in mind that if you want you can give as large a search area as you want, and
-			it will try to find the area.  But the larger the search area(ie, the larger the
-			distance from start to destination), the more memory and more time it will take to
-			find a path.  Trying to search, for instance, for a path from Yew to Britain will
-			almost certainly freeze your shard and gobble up all it's memory.  No restrictions
-			were placed in core in order to allow for use of the function with future computers
-			which may indeed one day be able to search for such a path in a split second.  But
-			that leaves the responsibility on the scripter using the function to be certain to
-			not try to search for outrageously large paths.  My experience is that paths of
-			20 or less tiles are fairly quick and low impact on the server.
-
-			Several errors can be returned instead, with the following errortext messages :
-
-			"Failed to find a path."  --  The typical error returned when a path hasn't been found.
-			"Out of memory."          --  This will only happen if there isn't sufficient memory to perform the search.
-			"Solution Corrupted!"     --  This is an error that rarely seems to happen, but if you can get it to
-										  happen repeatedly along a static(non-changing) specific path, please
-										  report it to birdy at polserver.com
-			"Pathfind Error."         --  A catch-all error for various other circumstances, assume no path could be found.
-
->>>>>>> 1.192.4.30
-03-04 Birdy
-	Changed: Character look height changed to 15 from 9 to better reflect height in game relative
-			to items.
-	Added: uoconvert.cfg element option added, LOSOptions, in the following form:
-				LOSOptions
-				{
-					UseNoShoot        1
-					LOSThroughWindows 1
-				}
-			UseNoShoot means uoconvert will determine whether or not something blocks LOS by use of
-			the NoShoot tiledata flag instead of the Blocking tiledata flag.  A couple of special
-			cases exist for secret door items and blocking items that are walls(in both cases, LOS
-			will be hindered), but otherwise the NoShoot tiledata flag will be used.  This should
-			make many blocking, yet not really LOS blocking items no longer block sight, such as
-			candelabras, lamp posts, and such.
-			LOSThroughWindows only matters if UseNoShoot is 1.  If LOSThroughWindows is 1, then
-			items marked as windows in tiledata will not impede LOS.
-			Both of these options default to false.  When UseNoShoot is false, the old method of
-			determining sight blocking as being equivalent to ability to pass will be used for LOS.
-	Added: uoconvert.cfg element option added, Mounts, in the following form:
-				Mounts
-				{
-					Tiles  0x3ea0 0x3ea1 0x3ea2 0x3ea3 0x3ea4 0x3ea5 0x3ea6 0x3ea8 0x3ea9 0x3eb0 0x3eb2 0x3eb3 0x3e9f
-				}
-			If this element exists, and if Tiles exist within it, then those tiles with the graphic IDs
-			listed will be considered to be mounts by uoconvert and will set the layer to be the
-			mount layer and it will set the tile to be equippable.
-
-	Added: New System Hook : SpeechMul -- This hook will be activated when someone using a client with speech.mul
-			in it says a speech.mul keyword(one or more).  The person who spoke is passed as the first parameter
-			and an array containing each of the speech tokens they spoke is passed as the second parameter.
-			This is a very experimental hook, so use at your own risk!  Though I would like to know if it works,
-			particularly on non-english systems.  For ENU players/admins, whether you have a hook or not, these
-			changes should make it such that you no longer "lose text" that has speech.mul tokens in it.
-
-			If you wish to write a syshook script for speech.mul tokens, you will need a syshook.cfg file with
-			the following in it.  This should be in a package of some sort too of course.
-
-				SystemHookScript speechmulhook.ecl
-				{
-					SpeechMul SpeechMul
-				}
-
-			The following is an example of a very simple hook called speechmulhook.src.  It is, of course, up to
-			you to make something actually useful. :
-
-				use uo;
-
-				program SpeechMulHook()
-				    return 1; //change to 1 to enable the hook
-				endprogram
-
-				exported function SpeechMul(who, speechtokens) //note passed ARRAY of speech.mul tokens
-
-				    Print("Tokens : ");
-				    foreach token in speechtokens
-						Print(CStr(token));
-					endforeach
-
-				endfunction
-
-12-27 Racalac
-    Fixed invisible corpse clothing
-    Fixed boat member access
-    Fixed (maybe) first non-nodraw tile in multi definition flagged as static by uoconvert
-    Changed core visibility function - characters now can always see themselves. Fix for
-        equipping items while hidden not showing until unhiding.
-
-12-06 Racalac
-    Fixed: Invisible items in containers caused random items to become temporarily invisible
-    Fixed: default doubleclick range for items without an itemdesc entry wasn't reading from servspecopt.cfg
-
-11-16 Racalac
-    Fixed: member access to account and script objects (and any dicts/structs with the same key names)
-        Recompile your scripts! Keep testing, find my errors! :)
-    Changed: logged-off players are now considered not visible for any/all systems that check visibility.
-
-11-15 Racalac
-    poltool: prints flag descriptions
-    Fixed: height 1 "half-height" tiles no longer considered height 0.
-    Fixed: crash by passing 0 to SystemFindBoatBySerial
-    Fixed: account object method fall-through. d'oh!
-
-11-10 Racalac
-    Fixed member access to datastore, script, and guild objects. Keep testing!
-    Changed: equipment.container returns an "offline" character reference when equipped.
-
-11-09 Racalac
-    Changed: invisible items in containers can't be seen by those without the seeinvisitems priv
-    Major Changes: New ecompile version! Changed the way object methods and members are set and get.
-        This should give a moderate to major speed enhancement to script execution. Please report
-        any weirdness you encounter with respect to setting and getting object (and struct/dict)
-        members, calling object methods, and methodscripts (that may or may not override core-defined
-        methods).
-        Temporary new ecompile/ecompile.cfg option: specifiy the -m command-line paramter to compile
-            using the old way, or set "OptimizeObjectMembers" in ecompile.cfg to 0 (1 by default).
-            This option will go away when I'm satisfied this new code works.
-
-11-01 Racalac (not in 11-01 test core)
-    Fixed: water statics above walkable map no longer blocks movement below
-    Fixed: second equipped item in a layer no longer stored as "gotten" (fixes crash on save?)
-
-10-31 Racalac
-    Items with no defined itemdesc.cfg entry (walls, floors, etc) will use the
-        servspecopt.cfg values for decay time and dblclickrange.
-    Added character.cleargottenitem(). Returns "dragged" item to original
-        location. There's an graphical glitch with the client that makes it
-        look like the item is duplicated. The item that appears to remain on
-        the cursor is not really there.
-    uoconvert: changed map structure to allow building dynamic items and walking
-        around on them. RECONVERT YOUR MAP!
-    Allowed movement in places like T2A with dramatic Z changes in the map.
-    Fixed: certain script parameters were being flagged wrongly as out-of-range
-    Fixed: (maybe) If a layer is already equipped, trying to equip another item
-        on that layer will return the item to its original location (3D client thing).
-    Added Npcdesc.cfg property: AttackAnimation (default 0 (wrestling)), use this
-         change the template's intrinsic weapon animation (i.e. for LBR npcs)
-
-10-25 Racalac
-	Added uoconvert.cfg for defining what multi IDs are what type (Boat, House, Stairs (AOS)). See included file for 'normal' values.
-	Added for Packet Hooks: SubCommandLength property for 'parent' packets: 1, 2, or 4 byte lengths for subcommand fields.
-		Example:
-		Packet 0x12 //Macro/Spell/Action
-		{
-			Length variable
-			SubCommandOffset 3
-			SubCommandLength 1 //unlike cmd BF, the subcommand is 1 byte, not 2
-		}
-		SubPacket 0x12
-		{
-			SubCommandID 0xC7 //bow or salute
-			ReceiveFunction command_12:HandleC7Action
-		}
-
-09-27 Racalac
-    Fixed improper cleanup of accounts and player characters on exit, leftovers.txt should be reduced in size now.
-    Maybe fixed a memory leak in the packet hook system.
-
-09-08 Racalac
-    Fixed a crash condition concerning multis and movement.
-    Added error messages if missing realm files.
-
-    uoconvert: handles a specific poorly formed staidx block
-
-09-06 Racalac
-    uotool reads pol.cfg from the same dir to find the MUL files.
-    uotool & poltool usage statements updated
-    Example to fix mounts, add en entry like this in tiles.cfg for each of your mount types (i.e. listed in tamed.src)
-    Remember running "uoconvert tiles" will not save your manual changes.
-    tile 0x3ea2
-    {
-        Desc mount
-        UoFlags 0x04404000
-        Layer 25
-        Height 3
-        Weight 0
-        Equippable 1
-        Movable 1
-    }
-    Changed UOConvert handling of blocking flags, probably fixing NPCs walking through fences, etc. Please re-run UOconvert.
-    Syz changed uoconvert to be more friendly to tool-created map and statics MULs.
-
-08-21 Racalac
-    Turned off core sends of Packet oxB9 (UO expansion enable) for now, it will return!
-    Fixed bug with CreatePacket with specified cmdtype with fixed-length.
-
-08-20 Racalac
-    Fixed a bug in multis walking code introduced in the 08-19 testcore.
-
-08-16 Syzygy
-    The 'Summon Water Elemental' spell must now be in the spellbook to be cast.
-
-08-14 Syzygy
-    Fixed a LOS issue when doubleclicking an item stored in an NPC's backpack
-
-08-13 Syzygy
-    corrected an error where a client could be redirected to the wrong server if servers.cfg specified 'IPMatch' directives.
-    corrected an error which would not allow a mob to drop an item to a lower Z.
-    at death, those added to your "reportable" list will no longer be marked aggressor to you.
-    at death, those added to your "reportable" list will no longer be marked as having lawfully damaged you.
-      (this is imperfect - all your aggressors, and lawful damagers, should be cleared at your death)
-
-08-09 Syzygy
-    pol.exe no longer uses .mul files.  See uoconvert.txt for notes (you will use uoconvert to generate pol data files)
-      notable changes:
-         a door will only be ignored if its itemdesc entry says it's a door
-           (previously, used the tiledata.mul "door" flag to tell)
-      I do not recommend editing multis.cfg, tiles.cfg, or landtiles.cfg by hand - as uoconvert is young, it's likely
-      that you'll have to regenerate these files from the .mul files soon.
-
-08-05 Syzygy
-    Removed 'UseDynamicMapCache' pol.cfg option and related code
-
-07-27 Syzygy
-    CreateNpcFromTemplate will now accept a struct, or an array (with element names), specifying custom properties
-
-07-26 Racalac
-    Fixed creating armor items with GetItemDescriptor
-    Added: Packet Hook Scripts. See packethooks.txt. Don't try to hook AOS packets or I'll cry.
-
-06-20 Syzygy
-    account.GetCharacter(index) will notice if you pass 0, which is bad.
-        account.DeleteCharacter(index) - same
-
--- POL095 --
-07-03 Syzygy
-    Added length validation for the 0xBD (client version) packet.
-
-07-01 Syzygy
-    ecompile looks for ecompile.cfg in the current directory before looking where the binary is.
-    ecompile now flags the following as errors:
-        var s := "1234" + ;
-        var a := +;
-        var a := { 4, +, 6 };
-
-06-30 Racalac
-    account.SetName() takes an optional second parameter for new account password. If you have RetainCleartextPasswords=0,
-        then you must pass a new account password, or you will get an error.
-    default WeatherType for a region is now 255 (no weather), not 0 (rain).
-
-06-30 Syzygy
-    Corrected a crash exception on character creation if a control character was included in the name.
-    Fixed a crash bug when displaying corpses in some circumstances.
-
-06-25 Syzygy
-    Items which specify "SaveOnExit 0" will have serials allocated from the same range as normal items.
-      This also fixes a bug where duplicate serials could be allocated for nonsaved items.
-
-06-24 Racalac
-    Changed MD5 hashing flags to work on a broader range of windows installations.
-    Instrinsic NPC weapons now are read-only for: hp, maxhp_mod, quality, dmg_mod.
-
-06-20 Syzygy
-    account.GetCharacter and account.DeleteCharacter will no longer accept an index of 0
-    Fixed a problem with character creation that could result in characters being written
-      with 'CharIdx -1' (these were all failed character creations)
-    Character creation will refuse to create a character with control characters in the name (newline, for example)
-
-06-19 Racalac
-    Added a 2 minute timeout for closing sockets POL has not received any data on. The client normally sends keep-alive
-        messages every 60 seconds. This may fix the "number of connections reported much higher than the number of clients"
-        bug.
-
-06-19 Syzygy
-    Fixed an access violation if a negative X or negative Y value was passed to various functions
-
-    canInsert / onInsert script rework, part 3: changing parameter order to make things more consistent:
-        adding an amount to existing stack:
-          canInsert( mob, container, movetype, INSERT_INCREASE_STACK, adding_item, existing_stack, amt_to_add )
-          onInsert( mob, container, movetype, INSERT_INCREASE_STACK, uninit, existing_stack, amt_to_add )
-          (NOTE: for canInsert, adding_item can be an uninit, if one of the CreateItem functions is merely adding to an existing stack.
-           By the time onInsert is called, adding_item is gone.)
-        adding new item:
-          canInsert( mob, container, movetype, INSERT_ADD_ITEM, adding_item )
-          onInsert( mob, container, movetype, INSERT_ADD_ITEM, adding_item )
-
-    Fixed a race condition which could cause socket error 10038
-
-06-18 Syzygy
-    escript: array + array will return a concatenation of the arrays:
-           { 3,2,6 } + {6,4}  returns {3,2,6,6,4}
-    AddMenuItem will once again accept 0 as a valid objtype
-    TargetMultiPlacement will once again accept objtype values between 0x4000 and 0x4fff
-
-    **** A VERY SPECIAL NOTE ****
-       It would be best if you defined all your your objtypes in the range 0x5000 to 0xEFFF.
-       See notes under POL092-2000-12-11 for how to specify OldObjType in itemdesc.cfg to convert objtypes at load time.
-    *** END VERY SPECIAL NOTE ***
-
-06-16 Syzygy
-    Fixed typo in RESURRECT_FORCELOCATION flag
-    The main listen thread will no longer be started if ListenPort=0
-
-    All intrinsic weapons and storage area root items are now always marked inuse
-        - this way, DestroyItem, EquipItem, dragging etc won't work on these types of items
-        (this was a cause of the dreaded 'itr != wc.items.end()' assertion failures)
-
-    Fixed a memory leak in GetItemDescriptor()
-    Added sanity checking in GetItemDescriptor use in case you set descriptor.CProps to other than a dictionary,
-     or StackingIgnoresCProps to other than an array, to detect this rather than crash.
-
-    canInsert / onInsert script rework, part 2:
-      old:
-        can/onInsert( owner, container, item, movetype )
-        can/onInsert( owner, container, item, movetype, amtadded ) (sometimes)
-      new:
-        adding an amount to existing stack:
-          canInsert( mob, container, movetype, INSERT_INCREASE_STACK, existing_item, amt_to_add, adding_item )
-          onInsert( mob, container, movetype, INSERT_INCREASE_STACK, existing_item, amt_to_add )
-          (NOTE: adding_item can be an uninit, if one of the CreateItem functions is merely adding to an existing stack.
-           By the time onInsert is called, adding_item is gone.)
-        adding new item:
-          canInsert( mob, container, movetype, INSERT_ADD_ITEM, new_item )
-          onInsert( mob, container, movetype, INSERT_ADD_ITEM, new_item )
-
-      These are the times when canInsert / onInsert scripts are called:
-        Client drag/drop
-        vendor buy: when moving items to the player's backpack
-        vendor sell: when putting gold in the player's backpack
-        secure trade, when cancelling or confirming a trade
-        MoveItemToContainer
-        CreateItemInContainer
-        CreateItemInInventory
-        CreateItemInBackpack
-
-    Since I didn't actually test the backtrace-on-assertion functionality under Linux, it didn't work.
-      Now it does.
-
-    console.cfg is now reloadable (ReloadConfiguration, or SIGHUP)
-
-    Added file.em module:
-        ReadFile( filename ): read a text file
-            reads a text file
-            returns contents as an array of strings
-            removing newlines
-        WriteFile( filename, contents ): write a text file
-            contents is an array of strings.
-            appends newlines.
-            creates file if it does not exist.
-            renames existing file to filename.bak
-        AppendToFile( filename, morelines ): append to a text file
-            morelines: an array of strings
-            appends newlines.
-            creates file if it does not exist.
-        LogToFile( filename, textline ): append a single line to a text file
-            appends newlines.
-            creates file if it does not exist.
-        By default, no package has any file access rights.
-        config/fileaccess.cfg: reloadable config file, grants access.  Example:
-            FileAccess
-            {
-	            AllowRead 1
-	            AllowRemote 1
-	            Package testfileaccess
-	            Extension .cfg
-	            Extension .src
-            }
-
-            FileAccess
-            {
-	            AllowWrite 1
-	            AllowRemote 0
-	            Package testfileaccess
-	            Extension .txt
-            }
-
-            FileAccess
-            {
-	            AllowAppend 1
-	            Package *
-	            Extension .log
-            }
-
-
-
-06-15 Syzygy
-    new pol.cfg option: AssertionFailureAction = abort/continue/shutdown/shutdown-nosave
-        abort: (like old behavior) aborts immediately, without saving data.
-        continue: allows execution to continue.
-        shutdown: attempts graceful shutdown
-        shutdown-nosave: attempts graceful shutdown, without saving data.
-
-        If the assertion occurred during execution of a script, either 'shutdown', 'shutdown-nosave', or 'continue'
-        will abort that script, displaying the script name and PC.
-
-    Added uo.em function: ListMultisInBox(x1,y1,z1, x2,y2,z2) lists multis that have at least one static within the volume specified.
-    Resurrect takes an optional parameter.  If you pass RESURRECT_FORCELOCATION, will not check for blocking objects.
-        Be sure you know what you're doing if you pass this flag.
-
-    Just a note: if you're using Listener entries in uoclient.cfg, you should set ListenPort=0 in pol.cfg
-
-    ecompile: uses ECOMPILE_CFG_PATH environment variable to find ecompile.cfg, if present.
-      (note that normally it tries to look where the executable is.  Some shells don't always pass this,
-       particularly if you're using batch files or shell scripts - try putting the full path to ecompile in your batch file)
-    Added a bewildering number of options to ecompile.cfg:
-        DisplayWarnings = 0/1               (same as -w flag)
-        CompileAspPages = 0/1               (same as -a flag)
-        OnlyCompileUpdatedScripts = 0/1     (same as -u flag)
-        GenerateDependencyInfo = 0/1        Generate .dep files whether or not updating
-        DisplayUpToDateScripts = 0/1        Display the "xxx/script.ecl is up-to-date" message, or not.
-        AutoCompileByDefault = 0/1          If set, and you don't pass any script names or -r or -A, will perform an auto compile.
-        UpdateOnlyOnAutoCompile = 0/1       If set, autocompile will only update modified scripts.
-        DisplaySummary = 0/1                Displays overall totals after compilation, unless compilation aborted due to a compile error.
-      These are the settings I like:
-        GenerateListing		    1
-        GenerateDebugInfo	    1
-        GenerateDebugTextInfo	1
-        DisplayWarnings         1
-        CompileAspPages         1
-        AutoCompileByDefault    1
-        UpdateOnlyOnAutoCompile 1
-        OnlyCompileUpdatedScripts   1
-        DisplaySummary          1
-        GenerateDependencyInfo  1
-        DisplayUpToDateScripts  0
-        This way, if I'm editing scripts, I just type 'ecompile' and it compiles everything that's
-        changed.  If I want to compile a particular file, I pass its .src name on the command line.
-
-
-06-13 Syzygy
-    mob.backpack.container now returns a mobileref to the owner.
-    bugfix: buyprice was sometimes being incorrectly read as 2147483647, after being
-            gratuitously written as 4294967295.  This value is now detected and ignored.
-    Resurrect() will return an error if the mobile's location would be blocked if the mob were alive (ie by a door)
-    LOS to an object is no longer blocked by the parts of other objects that share the same space with it.
-        For example, this means:
-            If two chests sit at the same place, neither blocks LOS to the other.
-            If one chest is at Z=1, and the other at Z=2, LOS to the first can be blocked by the second, if looking from above.
-            If a ghost is standing in a closed doorway, you can still have LOS to it. (but note the change to Resurrect above)
-    Fixed: When sending mana level, sometimes the "current value" would be sent in place of the "maximum value", making it look like the mob had 100% mana.
-    ondelete scripts are now passed an offline mobileref.
-    Minor overhaul for onInsert scripts:
-        MoveItemToContainer:
-             now calls onInsert script _after_ putting the item in the container.
-        CreateItemInContainer, CreateItemInInventory, CreateItemInBackpack:
-             now call the onInsert script _after_ putting the item in the container.
-             when adding to an existing stack, passes the "amount added" as noted in the POL092 changelog.
-               (it was passing the size of the existing stack)
-         !!
-           I have just noticed that when any of these adds to an existing stack, the canInsert
-           script is called with these parameters: canInsert( mobile, container, existing_stack_already_within_container, MOVETYPE_PLAYER )
-           This is no good.  More thought required.
-        When purchasing from a vendor:
-            onInsert called _after_ putting the item in the PC's backpack.
-
-
-06-12 Syzygy
-    escript changes:
-        Added (yet another) syntax for declaring initialized arrays:
-            var x := array { 4, 3, 2 };
-            this is more consistent with struct { x, y, z } initializer syntax.
-            array(8,3,2) looks too much like it's creating a multi-dimensional array, so I don't like it anymore.
-        Added syntax for declaring initialized dictionaries:
-            var x := dictionary { "abx" -> 72, "xyz" -> 32 }; // direct
-            var key := 5, value := "x";
-            var x := dictionary { key -> value };       // indirect
-            var x := dictionary { "abc", "cyz" }; // values start as uninit
-            var pfx := "X";
-            var v := 7;
-            var x := dictionary { pfx+"abx" -> 72, pfx+"xyz" -> 32+v }; // with expressions
-        These are the preferred forms for declarations (see how they match?)
-            var x := array;
-            var x := dictionary;
-            var x := array { 53, 76, 32 };
-            var x := struct { x, y, z };
-            var x := dictionary { "ABC" -> 62 };
-
-        Expressions like these will now be flagged as errors by the compiler:
-            var x := { 2, 6, };
-            var x := array { 2, 6, };
-            var x := array( 2, 4, };
-            var x := struct { a, y, };
-            var x := 4 array;
-
-        bitwise operations are now optimizable:
-            int & int
-            int | int
-            int ^ int
-            ~ int
-
-    ecompile changes:
-        new ecompile option: -C <config file path>
-        new ecompile option: -A
-            "Auto compile", I guess - compiles scripts in your PolScriptRoot and all enabled packages under your PackageRoot directories.
-              (like -r, but knows where to go, using ecompile.cfg)
-
-        Fixed two memory leaks.  ecompile is now much more svelte when it runs, especially on directory trees.
-
-
-
-06-11 Syzygy
-    structs will again allow the obj[ keyname ] syntax, but only for strings.
-      if you pass a number, your script will abort.  If you pass another kind of object,
-      an error will be returned.  This is meant to help you quickly find cases where a script
-      pretends that a struct is an array, which is not the case.
-    fixed a compiler bug where the following would compile:
-        var a, b, c;
-        a := b { c, b };
-    AppendConfigElem will either accept an array of arrays, as it does now,
-      or an array of struct { name, value }
-
-
-06-10 Syzygy
-    linux: SIGUSR2 will now display a stack backtrace to console, and continue execution.
-    linux: properly set socket nonblocking options after accept()
-      (learned, first from intense googling, then ironically enough from 'man accept', that
-       linux can't be bothered to adhere to BSD norms in the "BSD sockets" interface, and
-       instead discards socket options on accept()'ed connections)
-       Note: there's a hole in the aux client interface obj.transmit() function, where it
-             can still block, but it shouldn't be a problem if you're just using it to feed
-             a local web server.
-
-06-10 Syzygy
-    It is once again possible to use mobrefs / itemrefs etc as keys to dictionaries.
-    structs are now totally different objects than dictionaries.  They can only contain named members,
-     and the [] operator no longer functions on them.
-     Also, struct names are now case-insensitive
-     For structs, you should use operations like this:
-       var a := struct { x, y, z };
-       a.x := 5;
-       var b := struct;
-       b.+g := 6;
-     For dictionaries, you should use operations like this:
-       var a := dictionary;
-       a[57] := 4;
-       a["XY"] := "Z";
-       a.erase( "XY" );
-
-
-06-09 Syzygy
-    removed 'SellPrice 4294967295' and 'BuyPrice 4294967295' spam from items.txt etc.
-    revised signal handling for linux.
-
-06-08 Syzygy
-    Added dirty flag to all mobiles/items.  This should be set when anything on the object changes, and cleared on world save.
-    Fixed a crash bug when a container previously send with SendOpenSpecialContainer was deleted.
-    Fixed a crash bug on shutdown having to do with the thread registry.
-    SaveWorldState() now returns a structure on success:
-        struct { CleanObjects, DirtyObjects, ElapsedMilliseconds };
-    internal change: The following will now return a true 'struct', rather than an array bastardized with element names:
-        (If you access these with obj.elemname you will have no trouble; if you use obj[1] etc you will have to make changes)
-        object methods/properties:
-            mobile.reportables
-            polcore().script_profiles
-            polcore().iostats
-            polcore().queued_iostats
-        uo.em:
-            TargetCoordinates
-            SelectMenuItem
-            GetPosition
-            GetMapInfo
-            GetStandingHeight
-        npc.em:
-            Position()
-        events (all):
-            speech events
-            unicode speech events
-            damaged events
-            engage events
-            disengage events
-            item-given events
-    dictionary object methods now explictly check that key objects are either an integer, a real, or a string.
-
-06-07 Racalac
-    Major Addition: You may now specify properties for an item during creation. Here are the mechanics:
-        polsys.em: GetItemDescriptor(objtype or name) returns a struct of all the itemdesc.cfg properties
-        for the specified objtype. You can use this to print the contents:
-            var ret := GetItemDescriptor(objtype);
-            foreach thing in ret
-                print(_thing_iter + ": " + thing);
-            endforeach
-        There are a couple special members. "CProps" is a dictionary of string->object pairs (object could be any
-          packable type). "StackingIgnoresCProps" is an array of strings. You may edit the values in this dict
-          but not all are assigned per-item (meaning it will do nothing). The item create functions accept this
-          dictionary in place of the objtype / objtypename parameter.
-	For example, to create a new item that will automatically stack with an existing stack with non-standard
-          color and cprops, it would look like:
-                var ret := GetItemDescriptor(objtype);
-                ret.Color := 0x10;
-                ret.CProps.insert("blah","1"); //assuming the existing stack have this color and cprop
-                ret.StackingIgnoresCProps.append("blingbling");
-                var item := CreateItemInBackpack(who,ret,10);
-
-06-07 Syzygy
-    SystemFindObjectBySerial now returns proper multirefs for multis
-    fixed a place that switched cout to hex formatting without switching it back
-
-06-06 Syzygy
-    Added automatic lockup detection: thread status will automatically be displayed after 30 seconds.
-    Fixed a potential corruption error during queued data mode.
-
-06-05 Racalac
-    Changed: pol.cfg EncryptPasswords to RetainCleartextPasswords (default 1). NOTE this is logically opposite
-        to the old EncryptPasswords option. We now ALWAYS MD5 hash passwords and ALWAYS store them. Make this
-        option 1 if you want to also retain normal passwords, 0 if you only want the hashed passwords stored.
-    Added: PasswordOnlyHash is written to accounts.txt. If the cleartext password is missing, it will be
-        empty until the account successfully logs in.
-    Added: account.PasswordHash (password only hashed), and account.UsernamePasswordHash (username + password
-        hashed). account here is an account script object, i.e. character.acct.
-    Added: accounts.txt reading info, X elements in Y ms.
-
-06-05 Syzygy
-    The .NET build now uses STLport 4.5.3 instead of MS's crappy implementation.
-      It seems to be a bit faster now.
-      Some comparison sysload numbers, using Xandros' huge shard data:
-        .NET old: 100(33018), 100(16326), 100(62705), 100(64700), 100(66679), 100(67030), 100(67030), 93(53725), 5(0), idle
-        VC6 05-24: 98(33533), 100(18338), 25(1519), 0(0), idle
-        .NET now: 35(19292), 6(1), idle
-    win32: we now retrieve CPU time used from the OS.  This is reported as cputime, when sysload
-      is reported.  cputime is read once a minute, and the value displayed is the number of microseconds used.
-      So, if cpuload is 10,000,000 then 10 seconds of CPU time were used.
-      It doesn't look possible to get this on linux without considerable teeth-pulling.
-    pol.cfg: ListenPort is now optional.  If you don't set it, or set it to zero, it won't be used.
-    Added to polsys.em: SetSysTrayPopupText( text )
-
-06-04 Syzygy
-    performance improvements:
-        ListMobilesNearLocation
-        ListMobilesNearLocationEx
-        ListGhostsNearLocation
-        Speech (sending events to NPCs)
-
-06-03 Syzygy
-    escript: fixed a bug where the compiler could emit corrupt code if an IF statement was optimized away
-    equipment.quality is now stored as a double-precision float, so equality comparisons should work better now.
-    Added itemdesc.cfg flags.  These apply to everything, even your own backpack.
-        CanUseWhileFrozen = 0/1
-        CanUseWhileParalyzed = 0/1
-    Removed internal command: .t_setusescript
-    Renamed internal ".props" command to ".t_props".  This script should replace it:
-        use uo;
-
-        program dot_props( who )
-            var what := Target( who );
-            if (what)
-                var names := what.propnames();
-                if (names.size() != 0)
-                    foreach propname in names
-                        SendSysMessage( who, propname + ": " + what.getprop( propname ) );
-                    endforeach
-                else
-                    SendSysMessage( who, "No properties." );
-                endif
-            endif
-
-        endprogram
-
-06-02 Syzygy
-    Modified i/o handling to better deal with unexpected signals (EINTR - socket error 4)
-    escript: equality comparisons for floats will allow for small differences (0.00000001)
-    win32 .NET build: changed some compiler settings to improve performance
-
-05-31 Syzygy
-    Backed out the 05/26 SetRegionWeatherLevel change which was causing a stack overflow
-      (which then caused pol to exit without any message)
-    Corrected music, justice, and weather zone switch handling.  They were broken
-      (would do no processing if you moved either into or out of a location entirely outside the regions)
-      Note: set the weather type to 255 to turn weather off.
-
-05-29 Syzygy
-    Target() will return a proper multiref if a multi is targetted (usable with DestroyMulti etc)
-      This does not apply to floors, etc - only ship masts and so forth.
-    Any function taking an objtype as a parameter will return an error if the objtype is not defined.
-      Note that all objtypes in the 0x0000-0x3fff range are implicitly defined.
-      (previous behavior was to throw an exception reporting that the objtype defined no graphic)
-
-05-28 Syzygy
-    New console command [threadstatus] will display thread status and checkpoints
-    Thread status is now available on win32 as well as linux.
-
-05-26 Racalac
-    Fixed: SetRegionWeatherLevel should work now!
-    Changed: Removed client 2.0.* weather packet disable. Let us know if there are still weather problems with
-        2.0.* clients.
-
-05-24 Syzygy
-    Fixed: a crash when an NPC killed itself in its script
-    Masked: crashes at shutdown due to leftover objects.  The objects will be leaked rather than attempt destruction.
-      (if we can find out _why_ we have leftovers, we won't get these crashes at all - this crash in particular is a symptom)
-
-05-23 Syzygy
-    Fixed: NPC weapons will use the hitscript specified, not the wrestling hitscript
-    Fixed: Display issue (1.26.4 clients only) when dragging an item to a mob that is too far away.
-    Linux build: Added segfault handler - will dump a stack backtrace to stderr before aborting.
-      please forward these (they'll just be a set of numbers) to PCT, if you're running the latest linux build.
-    escript: added more convenient syntax for declaring structures:
-      var t := struct { a, b, c };                                  // basic
-      var t := struct { a := 4, b := "hey", m := foo(bar(4)) };     // initialized
-      var t := struct { a := 4, b := struct { g,h,i }, c };         // with nested structures
-
-05-22 Syzygy
-    NPCs will be destroyed immediately when they die, rather than a little later.
-    It should now be impossible to "kill" an NPC twice, ending up with multiple corpses.
-       There may be cases where an NPC will be only partially killed.  We don't know why yet,
-       but there will now be log information to help us find out why.  If you find an NPC that can't be
-       killed, please check your logs for output containing: "Abnormal end after checkpoint" and post to PCT.
-    NPCs will use their intrinsic weapon templates again.  They were using human wrestling.
-    Log additions: character creation, deletion
-
-05-20 Racalac
-    Fixed: boat planks were not cleaned up correctly
-    For debugging: leftovers.txt is written to the pol directory on shutdown, contains serial and name for
-        objects that survived cleanup somehow.
-
-05-17 Syzygy
-    pol.log will now roll over every day.  Old logfiles will have names of the form: pol-YYYY-MM-DD.log
-
-05-17 Racalac
-    Added new pol.cfg option: EncryptPasswords=0/1 (default 0), if =1, the server will encrypt all passwords
-        and all plaintext passwords will be lost! YOU CANNOT GO BACK AT THIS POINT WITHOUT RESETTING ALL THE
-        PASSWORDS ON THE SERVER. So be careful about setting this option to 1! Don't make me have to repeat
-        myself! I mean it!
-
-05-17 Syzygy
-    Fixed a crash caused when a script accessed container.container on something in a mob's backpack.
-
-05-16 Syzygy
-    item.setcolor( color ) will return an error if the specified color is > 0xFFF
-      (it will still mask off the high bits and use what's left, though)
-    Alt-Tab should no longer show a window called "Dialog" while POL is running.
-    Fixed an assertion failure on load if a mobile or container failed to create completely.
-
-05-15 Racalac
-    Added: MD5 hashing of passwords. accounts.txt "Password" property is automatically converted, and saved
-        back to "PasswordHash". No passwords are stored in plaintext on disk or in memory anymore, so full
-        memory dumps should be safe from nosy people. MD5 strings cannot be reversed back to the original
-        plaintext password.
-
-05-15 Syzygy
-    HitScript will be read from itemdesc.cfg entries for weapons, and used.
-    OnHitScript will be read from itemdesc.cfg entries for armor, and used.
-    AttackMinRange and AttackMaxRange will be read from npcdesc.cfg
-    uoclient.cfg can now specify multiple ports to listen for clients on, and the encryption to use with each.
-      Here is an example:
-        Listener
-        {
-            Port 7011
-            Encryption ignition
-        }
-        Listener
-        {
-            Port 7012
-            Encryption 1.26.4
-        }
-      Note that the Port specified overrides the value from servers.cfg.
-
-
-05-13 Syzygy
-    Changing an item's graphic will also set its height accordingly.
-    There's now a little system tray icon that will let you stop POL.  Maybe later it'll let
-      you look at the console output or logs.  We're accepting fan art for the icon :-)
-      You'll need to uninstall and reinstall the service (pol -u, then pol -i) for the tray icon
-      to be able to appear.
-    start.log will now be written properly when POL is run as a service.
-
-05-11 Racalac
-    Changed: With the CreateItemInContainer/Backpack functions, a new stackable item will not be added to
-        an existing stack unless the existing item stack has color equal to its itemdesc.cfg color property
-        AND has equal CProps as its itemdesc.cfg entry (not counting locally and globally ignored cprops)
-
-05-11 Syzygy
-    process.kill() will immediately kill sleeping scripts, as well as scripts being debugged.
-      (previously, script process would not die until the script woke up, if it was sleeping.)
-    Mobiles will now break off an attack when an opponent changes from non-Innocent to Innocent.
-      (previously, this happened for PCs, but not for NPCs, particularly pets)
-
-05-10 Racalac
-    Fixed another 4.0.0e client hang issue.
-
-05-09 Syzygy
-    Undid my brain-dead repsys timer change which was causing lockups.
-
-05-08 Syzygy
-    POL can now run as a service:
-        1. Put the executable in your POL directory (as always...)
-        2. Run 'pol -i' to install.  'pol -u' will uninstall if needed.
-        3. Recommended: Use the service manager to change the login from 'LocalSystem' to some account.
-        4. Start the service
-
-05-07 Racalac
-    Added new pol.cfg option: "MiniDumpType", determines the type of crash dump created. "small" is the
-        normal minidump (default), "large" is the full memory space for POL (creates large files, but much
-        more useful to the developers). Case-sensative.
-
-05-07 Syzygy
-    Corrected possible crash bug in repsys handling
-    Corrected repsys timeout logic (would sometimes timeout early, would sometimes never time out)
-    Corrected possible crash bug related to client reconnections and interactive scripts
-
-04-25 Racalac
-    Fixed: CreateItemCopyAtLocation now copies cprops correctly.
-    Fixed: Dead NPC taking damage somehow is now killed.
-    Added: servspecopt.cfg property: UOFeatureEnable, used in the last dword of the 0xA9 login packet.
-           Probably has no effect (and possibly ill effects) until client messages like 0xBF 0x13 are
-           handled.
-
-04-18 Racalac
-    Fixed: Generic Gump textentry should work again for ANSI characters.
-    Added: Linux console command support
-
-04-13 Racalac
-    Fixed: Input is rejected for SendTextEntryGump if the string contains a control character (newline, etc)
-    Fixed: Generic Gump 'textentry' will strip out any control characters from user input.
-
-04-10 Racalac
-    Fixed: Moving a character during logout no longer throws an exception (introduced 3/27)
-
-04-09 Racalac
-    Fixed: MoveBoatXY did mot move items on deck properly.
-
-04-06 Racalac
-    Change: Call Attribute Intrinsic Modification exported functions before Vital Maximum and Regen.
-    Note: clients 4.0.0e and newer do not like the uoclient.cfg setting EnableControlFlowPackets enabled,
-        and causes login to fail. No way around this it seems.
-
-03-27 Racalac
-    Added: boat.em: MoveBoatXY(boatref,x,y)
-    Fixed: MoveCharacterToLocation with an offline character could cause an exception.
-    Fixed: who.multi was not returning a boat ref, when appropriate.
-
-03-25 Racalac
-    Fixed: 4.0.0e login issue (login tested with 4.0.0e (uorice), 4.0.0c (uorice), 3.0.8q (uorice),
-           2.0.0b, and 1.26.4b. (2.0.0g still doesn't work, oh well..)
-
-03-24 Racalac
-    Fixed: Login (A9) packet was the wrong length (might fix 4.0.0e login issue)
-    Fixed: Maps didn't work with set/get_member()
-    Fixed: Multi.isa wasn't working
-
-03-20 Myrathi
-    Fixed: ECOMPILE will no longer compile files with .src/.hsr/.asp/.inc
-        *anywhere* in the filename. These extensions must now be at the *end*
-        of the filenames for them to be compiled! (fixes 'file.src.bak' bug)
-    Found: Undocumented ECOMPILE option: -ri [dir]
-        Same as '-r' except it recursively compiles .INC files! Useful for
-        testing that your include files compile!
-    Fixed: ECOMPILE options bug: -r [dir] / -ri [dir]
-        These options will no longer 'eat up' options that follow them on the
-        command line ("-r -u" would incorrectly 'eat' the "-u" option!). Such
-        an option would be equivalent to "-r . -u" (recurse current folder).
-
-	NOTE: If you need to compile files AS WELL AS recursing the current folder
-	      you MUST add the '.' (no quotes) so it doesn't treat the files as a
-	      folder (WRONG one would try to recurse the FOLDER 'myscript.src'!)
-
-	      This is WRONG:  ECOMPILE.EXE -u -r myscript.src
-	      This is RIGHT:  ECOMPILE.EXE -u -r . myscript.src   <-- note the '.'
-
-03-19 Racalac
-    Changed the order of calling the Vital Maximum and Regenerate functions via RecalcVitals().
-        Order is: Maximum function, Regenerate function.
-    Important CFG change: Set Weapon 0xF020 to SaveOnExit 0. This will force the intrinsic NPC
-        wrestling weapon to a non-saved serial number.
-    Fixed 03-18 npctemplate oversight.
-
-03-19 Myrathi
-    Added: extra 'movetype' parameter to Can/OnInsert and Can/OnRemove scripts.
-        The values returned in this parameter are as follows (new constants in UO.EM)
-        - MOVETYPE_PLAYER     : physically moved (dragged) by a player
-        - MOVETYPE_COREMOVE   : moved by the core (eg, MoveItemToContainer().)
-        And in the *Insert scripts only...
-        - MOVETYPE_CORECREATE : created by core (eg, CreateItemInBackpack().)
-
-    Example:
-        use uo;
-        program caninsertscript(character, container, item, movetype)
-            if ( movetype != MOVETYPE_PLAYER )
-                // allow any movement/creation by core functions
-                return 1;
-            endif
-            // insertion by a player must be validated
-            // ...extra code here...
-        endprogram
-
-03-18 Racalac
-    Fixed: "npctemplate" was not initialized on start-up when the exported
-        vital functions were called.
-    Added: pol.cfg options:
-        ReportRunToCompletionScripts=0/1 (default=1)
-        ReportCriticalScripts=0/1 (default=1)
-        - Set to 0 to remove the "Script X running..." (RTC) and
-          "Critical Script X has run for X instructions..." console messages.
-
-03-16 Myrathi
-    Fixed RequestInputUC() input-validation issue (control-characters are now
-        correctly identified).
-        Returns:
-        - 0 (zero) if input is cancelled.
-        - a struct: 'uc_text' => Unicode Array, 'lang' => 3-char language code
-        - an error, when appropriate (see .errortext)
-
-03-16 Racalac
-    Added error message for thread exceptions, AUX service.
-    Fixed annoying garbled "Listening for HTTP requests on port" message.
-    Fixed up RequestInputUC().
-
-03-16 Myrathi
-    Added: UNICODE.EM function RequestInputUC(): works the same as UO.EM's
-        RequestInput() function except it takes 'unicode array' and 'language
-        code' parameters in place of the 'prompt' parameter. The 'item'
-        parameter is still simply a placeholder and a client cannot act upon
-        one of these functions if the other has already been called (you'll
-        get the "Another script has an active prompt" error).
-
-03-15 Racalac
-    Added uoclient.cfg property: MaxSkillID ("General" section,default 51 if not found). Use this depending on
-        what client versions connect to your server. Newer clients can handle more skill IDs and older clients
-        (which often crash being sent skillids above 48). You must have skills.cfg entires for each skillid up
-        to MaxSkillID.
-
-03-14 Racalac
-    Added ClientEncryptionVersion "none" and "uorice" to help newbies. These are identical to "ignition".
-    Linux Build:
-        This is Rac's first linux build, and hopefully it's improved. Previously, linux builds were made
-        using STLport and NO compiler optimizations. This build was made with libstdc++ 5.0.2, glibc 2.3.2
-        (with linuxthreads 2.3.2), gcc 3.2.2, and kernel 2.4.20. Consider using the same version libs as these.
-        Also, optimizations are turned on in this build (they were turned off because of inexplicable segfaults.
-        Hopefully, new build lib versions help this).
-
-03-13 Racalac
-    Fixed linux ".unload" crash.
-    Fixed exception with Character serial 0x1.
-
-03-12 Myrathi
-    Fixed: RadToDeg() and DegToRad() in MATH.EM. They now work the right way around. :)
-
-03-10 Racalac
-    Save character and item serial counter to pol.txt.
-    Increased Maximum UO SkillID to 51 (skills.cfg requires an update).
-    Fixed 03-08 bug: new multis not found with SFOBS.
-
-03-08 Racalac
-    Implimented Serial Recycling:
-        When POL reaches the maximum serial for characters (0x3FFFFFFF) and items (0x7FFFFFFF), it will then
-        search from the minimum serial (1 for characters, 0x40000000 for items) for an unused serial to give.
-        Note, nothing is done about CProps which store serials referring to destroyed objects. Hopefully with
-        this system of reusing the "oldest" unused serial will avoid most of these problems.
-    Very Significant speed improvement for all SystemFindObjectBySerial calls (including internal ones)! Your
-        start-up times (with CheckIntegrity enabled) should be vasty improved.
-    Fixed build so minidumps should give more information.
-
-02-18 Racalac
-    Removed unecessary equip layer check (some items in client 4.0.0 were prevented from being equipped due to
-        a client bug).
-
-02-09 Racalac
-    Added: new servspecopt.cfg options: DefaultContainerMaxItems (default 125) and DefaultContainerMaxWeight
-        (default 250). These values will be used for containers that do not define "MaxItems" and "MaxWeight"
-        in their itemdesc.cfg entries.
-    Added: OS.EM function: is_critical(). Returns 1 if the calling script was set critical, else 0.
-    Fixed: client version string was being limited to 10 characters.
-
-02-09 Racalac
-    Changed: CheckIntegrity=1 in pol.cfg now also checks storage areas and offline character for duplicate serial
-	    items (This extends start up times).
-
-02-08 Syzygy
-    Sort-of fix for shards with data files with very high serial numbers:
-        if 0x4effffff <= serial <= 0x40000000, serial will be allocated as a normal serial
-        if 0x7fffffff <= serial <= 0x4f000000, serial will be allocated as a "nonsaved" serial.
-        The upper range for "saved" serials will not be raised at this time.
-
-02-04 Racalac
-    Changed: PushthroughHook array of obstructors now includes hidden mobiles.
-    Changed: renaming a stackable item a specific name will now prepend the amount to the single-click description.
-        i.e. rename 2 items 'sucky item', then stack will produce a desc of '2 sucky items'.
-    Fixed: character.height was being assigned an incorrect value on start, causing LOS problems.
-
-02-03 Racalac
-    Fixed: offline boat travelers were not being processed correctly on startup, leaving them behind on the water.
-    Added: POL now supports Minidumps on Windows. If you are running POL on Windows XP, you do not need to do
-        anything to enable this. Before Windows XP, you need a new "dbghelp.dll" with version 5.1 or greater in your
-        POL directory. I've uploaded a redistributable version on core-test, this will be available and/or included
-	in the final 095 core package.
-
-        What Minidumps do: When(/if!) POL crashes, you will no longer see the cryptic dump of registers and call
-        stack. Instead, POL will log and print on console that it has created a ".dmp" file in your POL directory.
-        This file is much much more useful to us for debugging a crash than the simple text dump as before. This
-        File should be sent to the developers along with the usual "what I did to cause this crash" information.
-
-        If you run Linux, everything should work as before.
-    Added: Newly created NPCs send and receive SYSEVENT_ENTERED_AREA events with the NPCs around them.
-    Fixed by Syz: While on a moving boat, mobile's names no longer flash, and it's much easier to talk on a moving
-        boat. Only annoyance is now mobiles show the walk animation while the boat moves (but don't move anywhere)
-
-02-02 Syzygy
-    Added minidump support
-
-02-01 Syzygy
-    CoreRequired in pkg.cfg can now be a full version string (ie "POL095-2003-02-01" )
-    (pkg)/uoclient.cfg can now contain a 'Protocol' element:
-        Protocol
-        {
-            #
-            # EnableFlowControlPackets: use the 0x33 (0x00 / 0x01) pause/restart packets.
-            # Though OSI seems to no longer send these packets, they seem to help with smoothness,
-            # particularly with boat movement.
-            EnableFlowControlPackets    1
-        }
-
-01-30 Racalac
-    Fixed: "TrueObjtype" was not read correctly on startup.
-    Fixed: coordinate bounds checking for CreateNPCFromTemplate and CreateMultiAtLocation (still be careful with
-        this latter one, if some part of the multi overlaps beyond the map edge, it will cause problems)
-    Fixed: unequiptest and equiptest are now automatically reloaded after an .unload or .unloadall
-
-01-28 Racalac
-    Fixed a crash with destroying items in core-called run-to-completion scripts (like OnInsert) introduced 01-26
-
-01-26 Syzygy
-    foreach will no longer iterate over error objects
-
-01-26 Racalac
-    Added better stacking control over CProps: You can now specify specific CProp names that will be ignored when
-        items are being stacked. There are two ways to do this:
-        -Template level: new Itemdesc.cfg property: StackingIgnoresCProps, a space-delimited list of case-sensative
-         cprop names to ignore only for stacking items of this objtype. i.e.:
-             StackingIgnoresCProps    propname1 propname2 etc.
-        -Global level: A new packagable config file stacking.cfg (can be in /config and/or any package) specifies
-         lists of CProp names that are ignored for all stacking items (duplicate names ignored). Structure:
-             Stacking
-             {
-                 IgnoreCprops  propname1 propname2 etc.
-             }
-    Fixed: movecost.cfg entries were being interpolated in the wrong order.
-    Changed: MoveItemToLocation now calls UnEquipTest and UnEquip Scripts if the item was equipped on a char.
-    Changed: OnRemove and OnInsert are now Run-To-Completion (i.e. CRITICAL) scripts.
-
-01-24 Syzygy
-    The compiler will now put correct function names in listfiles.
-
-01-22 Syzygy
-    Added ReadMillisecondClock() to polsys.em
-
-01-22 Racalac
-    Fixed moved some npc creation code around so now npc.npctemplate is initialized by the time the vital maximum
-        and regen rate exported functions are called. (so grabbing the HITS property from the npcdesc element is
-        successful)
-
-01-20 Racalac
-    Fixed resetting stealthsteps (broken 01-09)
-    Added control character stripping from sysbook text entry.
-
-01-18 Racalac
-    Removed 01-06 LOS combat initiation check.
-    Fixed weirdness with merchant sell window and the .buy/sellprice changes.
-    Removed hardcoded death sounds for human characters.
-
-01-15 Racalac
-    Fixed: Errors on startup from corrupt items shouldn't crash the server. Also, file name & line numbers are
-        printed for ease of debugging.
-    Fixed: Buying stackable items from NPC merchants now call canInsert and onInsert for player's backpack.
-    Fixed: Setting .buyprice and .sellprice to 0 means the item's price is 0, not itemdesc default. (setting the
-        members to -1 will force them to default to itemdesc)
-    Fixed: Entered/Left regions weren't firing since 12-23.
-
-01-12 Syzygy
-    Fixed an assertion failure when assigning to a non-integer element of an array
-      test script: "var a := {}; var b; a[b] := 3;"
-
-01-12 Racalac
-    Fixed: Polsys::ReloadConfiguration() now really reloads npcdesc!
-    Fixed: item.multi should now return the correct MultiRef (items on tables and other 'blocked' locations
-        were not being processed correctly)
-    Removed hack fix for bug noted in 01-08 changes. Caused problem with boats.
-
-01-09 Racalac
-    Fixed: polcore().clear_script_profile_counters() shouldn't complain if you pass 0 parameters (the correct amount)
-    Fixed: PC Unhide generating ENTERED_AREA events shouldn't fire strange combat update functions anymore.
-
-01-08 Racalac
-    Hack fix for gold "dropping through" floors of multis. This would affect ant 0 height graphic.
-        **Please let me know if there are any weird effects with multis, LOS around/in/through multis,
-        **walking on multies, dropping items on multis, and so on!
-
-01-07 Syzygy
-    NPC Templates in packages will once again have ":packagename:" prepended to their template name
-      (npc.npctemplate, as well as what's written to npcs.txt)
-
-01-06 Racalac
-    Fixed: You now need line-of-sight to initiate combat.
-
-01-05 Racalac
-    Fixed: run_speed and use_adjustments weren't written to the save file.
-
-01-04 Racalac
-    Added: obj.set_member(membername, value) and obj.get_member(membername) to replace the removed "." method.
-        This sets/gets a built-in member on the object which is named "membername". Returns an error if the
-        member was not found on that object (i.e. "dmg_mod" on a backpack).
-
-01-03 Myrathi
-    Implimented new encryption routines as the basis for making future encryption updates
-    a LOT easier (and is the start of internal support for encryptions 2.0.3 upwards!)
-    NO NEW ENCRYPTIONS ARE WORKING AT THIS TIME.
-
-01-02 Racalac
-    Added character and account name to "No handler for skill X" message.
-
-(sometime in the past) Syzygy
-    Deleting an element from the datastore will mark the associated file as dirty.
-
-01-01 Syzygy
-    Windows 95 is no longer supported.  Minimum (MS) OS required: Win98/NT4
-    Added to polsys.em: ReloadConfiguration().  Loads npcdesc.cfg and pol.cfg
-    Linux: HUP signal will cause ReloadConfiguration to be called.
-
-01-01 Racalac
-    Fixed: for real: EnumerateItemsInContainer crash (with "worn items container" who.backpack.container)
-
-03-01-01 Myrathi
-    Added: DefaultDecayTime=# in SERVSPECOPT(.LOCAL).CFG (default = 10) - unit: minutes
-        NOTE: Only newly created or "refreshed" items will use any new setting! Existing
-              items and items which remain "untouched" will retain the old value.
-    Fixed: Picking up an item, failing to place it somewhere else and having the
-        action "undone" (by the core) will no longer reset the decay timer if the
-        "time until decay" is greater than the default interval.
-    Fixed: CreateItemCopyAtLocation() now copies itemref.graphic to cloned item.
-
-12-29 Syzygy
-    accounts.txt will no longer be reloaded after a new version is written by pol itself
-    Failure to bind the listening socket will now cause startup to fail on windows.
-    New ecompile.cfg options:
-        GenerateListing [0,1]
-        GenerateDebugInfo [0,1]
-        GenerateDebugTextInfo [0,1]
-    Fix for ecompile under win32: use GetModuleFileName instead of argv[0] to determine
-      path to ecompile.cfg
-
-12-29 Myrathi
-    Fixed: Shutdown no longer crashes when built with .NET (bonus points go to Syz!)
-    Fixed: Deprecation warnings now give filename of the operator/token as well as line number.
-
-12-28 Racalac
-    Added: IP & Account logging information for unexpected and out-of-sequence messages.
-
-12-28 Syzygy
-    Fixed a crash bug on exit in the VS.NET build (having to do with Token destruction)
-       (on the VS.NET build, some globals are destroyed in the opposite order.  We now manually clear
-        one particular container)
-
-12-27 Racalac
-    ReFixed: Players cannot rename a mobile with an invalid string.
-    MaybeFixed: Crash in EnumerateItemsInContainer. A long-shot fix, please test who ever was
-        experiencing this bug!
-
-12-25 Myrathi
-    Added: CFGFILE.EM function ListConfigElemProps(element): returns an array of the
-        element's property-names (as unique strings).
-
-12-24 Racalac
-    Fixed: Now updates the client correctly when another mobile's color changed.
-
-12-24 Myrathi
-    Fixed: unicode support problems under Linux (think I got 'em all)
-    Fixed: various bugs in various unicode routines. :P
-    Fixed: unicode spell invocation using: ~IN<spellid>
-    Added: "INVOKE: <info>" console spam now restricted to [pol.cfg]LogLevel=6 or higher.
-
-12-23 Myrathi
-    Fixed: Stat messages should now normalize properly to 1000 max-hp (0x11 packet)
-
-12-23 Racalac
-    Fixed: Exception if no regions were defined.
-    Fixed: CreateMultiAtLocation now returns a MultiRef, not an ItemRef ;)
-
-12-22 Racalac
-    Fixed: When combining two stacks of the same objtype (either dragging one stack onto the other, or
-        onto the container containing the other stack), the CProp lists of each item must match EXACTLY
-        in order to be stacked. So, if Stack A has cprop myprop i5 and Stack B has cprop myprop i6, they
-        will not be stackable by dragging. Similarly, if either of the stacks are missing a cprop the
-        other possesses, the items will not stack.
-        **Needs testing please**
-
-12-21 Racalac
-    Fixed: when a player buys an item from a merchant NPC, canInsert and OnInsert scripts are called
-        for his/her backpack.
-    CRITICAL: You MUST add this to an itemdesc.cfg entry or you server will fail to start!
-        Container 0xFF02
-        {
-            Name        WornItemsContainer
-            graphic     0x1E5E
-            Gump        0x003C
-            MinX        0
-            MaxX        66
-            MinY        0
-            MaxY        33
-            Weight      0
-            MaxItems    65535
-            Maxweight   65535
-        }
-        Note the objtype is in the core-reserved range of 0xF000 - 0xFFFF. I hope no one has any
-            items defined in that range.. :)
-        Note this change just fixed a bug with backpack weight limits, and won't help "total"
-            character weight (including equipped items).
-    Fixed: using an item's x,y,z members in its own create script would throw an exception.
-    Added: UO.EM function CreateItemCopyAtLocation(x, y, z, itemref): makes a clone of the item
-        referenced with "itemref" at location x,y,z. Copies member variables and CProps. Does
-        not work with Multi objects. Does not copy a container's contents.
-        **Needs testing please**
-    Fixed: Items split from a stack retain the CProps from the original stack.
-    Fixed: character.setwarmode() now works with NPC characters (no longer throws an exception)
-    Fixed: If the items sold TO an NPC merchant cost more than 60k gold, the core now creates seperate
-        stacks of 60k gold instead of one greater than 60k (invalid for the client). So if you have any
-        script code that handles this, you should probably remove it (or face creating twice the amount
-        of gold you should!).
-    Added: Unhiding AND Unconcealing generates a SYSEVENT_ENTEREDAREA event for nearby NPCs.
-
-12-20 Racalac
-    Fixed: A Mobile's lifebar will no longer disappear when you (for example), poison it.
-    Fixed: An exploit that allowed players to drag items onto far away mobiles.
-
-12-19 Racalac
-    Fixed: a bug with system books where bad characters were written to the save files, causing errors
-        like "Item has no SERIAL property".
-    Fixed: If zero items were sold to an NPC, a gold coin was created in the player's pack with
-        amount == 0.
-
-12-17 Racalac
-    Fixed: a nasty bug where items would not decay in certain areas (specifically, in a zone with
-        a multi house). Also fixes the related "items don't decay near multis" bug.
-    Fixed: If an item is defined as no decay on multis (the default), its destroy script was
-        mistakenly called when the item was not decayed. This is fixed.
-
-12-15 Syzygy
-    Correct crash bug in CanRemove and OnRemove script execution when there's no owning mobile
-    The originally defining package will be listed when multiple packages define an objtype
-    "attack timer" spam outputs only when DebugLevel >= 20
-    item.invisible will initialize based on itemdesc.cfg settings
-
-12-10 Myrathi
-    Added array.exists( index ) - returns 1 if index <= array.size(), otherwise 0.
-    Added: sturdier parameter checking for object member-functions (no AV when too few params)
-    Fixed: corrected the size of the 0xBB 'messenger' packet (no longer "eats up" extra bytes)
-    Fixed: rename packet validation. Invalid content is truncated and a log message shown
-        for admin use (including an output dump of the invalid data).
-        Valid characters are spaces and upper- or lower-case letters (A-Z)
-        e.g.
-            Client #1 (account test) attempted an invalid rename (packet 0x75):
-            0000: 48 61 63 6b 54 65 73 74  0d 0a 09 43 6f 6c 6f 72   HackTest ...Color
-            0010: 20 30 78 34 38 30 0d 0a                             0x480.. ........
-
-    Fixed: core now sends correct number-of-chars to client at login (this should fix the UOTD
-        "can't create character" client issues)
-    Fixed: array member-functions (.erase(), .size(), etc) now enforce parameter-passing:
-        if you pass the wrong number of parameters (too few -or- too many) they'll return an
-        appropriate error (until now, passing too few caused an Access Violation! Argh!!!)
-    Fixed: arrays will no longer "resize" when you attempt to *retrieve* a value from an index
-        that doesn't exist. Setting a value in a non-existant index still resizes, as always.
-        Test array.size() or check array.exists(index) as appropriate.
-    - Example:
-          var arr := {1,2};          // create array with arr[1] and arr[2]
-          arr[4] := "test";          // auto-enlarges to 4 indices (arr[3] is uninitialized)
-          var foo := arr[23];        // arr.size() is still 4 and it returns:
-                                     //    error{ errortext = "Array index out of bounds" }
-          var bar := arr.exists(15); // bar holds 0 since arr[15] doesn't exist.
-          var zim := arr.exists(3);  // zim holds 1. arr[3] exists, even though it's uninit!
-
-    Removed: account.SetAcctName() member-function (deprecated since 089!)
-        - use instead: account.SetName(name)
-
-12-09 Myrathi
-    Added new uo.em function: SendQuestArrow(to_whom, x := -1, y := -1)
-    - 'to_whom' is the character the arrow shows to.
-    - Passing 'x' and 'y' within map bounds will set the Quest Arrow to point at that location.
-    - Passing -1 as 'x' and 'y' (ie. by just called SendQuestArrow(to_whom)) will remove it.
-
-12-09 Myrathi
-    Fixed: All UNICODE.EM commands now take arrays with integers the "right way round" (sorry!)
-        Integers must now be "Big Endian" (0x1234) and not "Little Endian" (0x3412).
-    Fixed: Text-commands typed by a unicode-enabled client are now "recognised" properly.
-
-    Added: Text-command scripts now receive 2 extra parameters when activated by
-        Unicode-enabled clients.
-    - Program blocks should now look like this, to take advantage of them:
-
-            program textcmd_mycmd( who, text, uc_text, langcode )
-
-    - 'uc_text' is a "Unicode array" of 2-byte "Big Endian" integers (see above) and
-                can be an empty array (uc_text.size() == 0).
-    - 'langcode' is a 3-character, uppercase language code.
-    - 'uc_text' will be an 'error' type if the Unicode input is "bad".
-    - 'uc_text' and 'langcode' will be uninitialized if no Unicode text is available
-                (ie, when a non-Unicode client types the command)
-
-    -Note- Text-commands should still be in an "English readable" character set!!
-           There is no guarantee that foreign character sets in script-names will work,
-           never mind Unicode character-sets, as the 'filename' is still matched against
-           the ASCII equivalent!
-
-    Added: NPCs now receive 2 *extra* event-parameters when they "hear" Unicode speech:
-    - 'uc_text' is a "Unicode array" of 2-byte "Big Endian" integers (as above)
-    - 'langcode' is a 3-character, uppercase language code.
-    - these 2 parameters do not exist when speech is received from a non-Unicode client.
-    - Example:
-
-        var ev := os::wait_for_event(120);
-        if ( ev )
-          case ( ev.type )
-            SYSEVENT_SPEECH:
-                PrintTextAbovePrivate(Self(), "You said...", ev.source);
-                if ( ev.uc_text )
-                    PrintTextAbovePrivateUC(Self(), ev.uc_text, ev.langcode, ev.source);
-                    PrintTextAbovePrivate(Self(), "...in Unicode", ev.source);
-                else
-                    PrintTextAbovePrivate(Self(), ev.text, ev.source);
-                    PrintTextAbovePrivate(Self(), "...in ASCII", ev.source);
-                endif
-          endcase
-        endif
-
-12-07 Syzygy
-    Fixed: compiler bug w/ switch statement containing variable declarations
-    Fixed: compiler bug allowing this  to compile:
-                Broadcast( "ff";
-    Fixed: itemdesc.cfg setting 'Invisible' not being used on item creation
-
-12-05 Racalac
-    Fixed a crash bug with cheaters sending an invalid packet.
-
-12-04 Racalac
-    Added Character Method: setwarmode( 0/1 ); Sets the internal warmode flag and sends the
-        update to the player. Returns the new warmode value.
-    Added: MoveItemToContainer and MoveItemToLocation both call the item's parent container's
-        canRemove and onRemove scripts.
-    Fixed: Text command scripts now have their controller properly set. (character reference in
-        canInsert scripts where being passed as uninitialzed when the script was started via a
-        textcommand)
-
-12-02 Racalac
-    Fixed: Characters with the "freemove" privilages can now move with 0 stamina, frozen,
-        or paralyzed.
-    Added: "You are too fatigued to move" message when trying to move with 0 stamina, or
-        not enough stamina as defined in movecost.cfg. (Only if MovementUsesStamina=1 is
-        enabled in servspecopt.cfg)
-    Changed: MaximumClients in pol.cfg will be checked only after a character is selected to
-        play. Clients connected are only counted if they have attached characters (so a client
-        waiting to log in is not counted, and neither is a client that recently logged out).
-    Added: MaximumClientsBypassCmdLevel (default 1). This integer value (from 0 (player
-        cmdlevel) to 5 ("test") defines the minimum character command level to bypass the
-        maximum clients check. So if the option =1, counselors and above staff can log in if
-        the MaximumClients value is reached, but additional player cmdlevel characters cannot.
-
-12-01 Racalac
-    Improvements to pol.cfg MaximumClients: cmd_level>0 is checked, and clients without
-        characters attached are not counted against the maximum.
-
-12-01 Myrathi
-    Fixed: Unicode ghost speech (no longer shows in chinese)
-    Fixed: Various buffer overflow exploits in various uo.em functions (eg PrintTextAbove())
-
-    New EModule: UNICODE.EM containing 2 new constants and 4 new functions.
-
-        _DEFAULT_UCFONT, _DEFAULT_UCCOLOR
-        BroadcastUC(), PrintTextAboveUC(), PrintTextAbovePrivateUC(), SendSysMessageUC()
-
-    - These functions act identically to their UO.EM predecessors except for the parameters.
-    - ** please note the "UC" function suffixes **
-    - Unicode "strings" are actually EScript Arrays of 2-byte integers, where each integer
-      is a unicode wide-character. (example uctest.src will be uploaded to CoreTest group)
-      These "integer codes" are always clipped (internally) to 2 bytes (value & 0xFFFF) and
-      a '0x0000' value will stop the end the string, regardless of the size of the array.
-    - Passing a non-array variable or an array with a non-integer value in it, as the
-      'uc_text' parameter, will throw an error. They MUST all be integers.
-    - The 'uc_text' array cannot exceed the current 'maximum speech length' of 200.
-    - LangCode's are 3-character identifiers for the language it's in: ENG, RUS, KOR, etc.
-      Passing a langcode string that's not 3 characters will throw an error.
-
-11-30 Myrathi
-    ECompile now displays "deprecation" warnings for certain operators and tokens and
-        although your scripts will still compile, these are now "last warnings":
-        - '=' is deprecated; use '=='
-        - 'local', 'global' and 'dim' are deprecated; use 'var'
-        - 'begin' and 'end' are deprecated.
-
-        ** Deprecated expressions will be removed from 096 **
-        **     so make sure you update your scripts!!!     **
-
-11-28 Racalac
-    Improved: canInsert script will be called when a stack of item is placed into the
-        backpack through the paperdoll icon
-    Fixed: .hp, .maxhp_mod, for weapon and armor items should be writable again.
-    Fixed: .buyprice and .sellprice were returning 0 if you didn't write to them first.
-        Now if they are not written to first, they will return the itemdesc value for
-        VendorBuysFor and VendorSellsFor.
-
-11-27 Racalac
-    Added for Secure Trade Window: if a trade is cancelled, canInsert and onInsert scripts
-    will be called for the player's backpack. If the items cannot be inserted, they will fall
-    to the player's feet.
-
-11-25 Racalac
-    Fixed a bug with character.concealed being misread on server start as a boolean (0/1), not
-        an integer(0-255)
-    Fixed a bug in SystemFindObjectBySerial where items in the secure trade container were not
-        being found.
-    Fixed a crash introduced in the 11-21 test core concerning core-destroyed stacks of items.
-    Fixed a bug with the conceal system where if a character's concealed level was reduced to
-        a value still greater than 0, other characters of the same new concealed level did not
-        see the character.
-
-11-24 Racalac
-    Added new itemdesc.cfg property: UseRequiresLOS (defaults to 1 if not defined). If true,
-        Line-of-sight is needed to double-click the item. If false, a player can use the item
-        without LOS.
-        * Note DoubleClickRange is still checked.
-    Added new itemdesc.cfg property: GhostsCanUse (defaults to 0 if not defined). If true, dead
-        (ghost) characters may double-click this item.
-    Fixed a bug in SystemFindObjectBySerial where an item held on a character's cursor was not
-        found.
-    Added a new os.em function: set_event_queue_size(newsize) : Changes the maximum number of
-        events the current script will keep in the queue (additional events will be discarded).
-        If not called, the default size is 20 events. The function returns the old queue size.
-
-11-21 Syzygy
-    active trades will be cancelled on death
-    Fixed a problem with listening points that would cause big problems after
-        listener destruction (house doors, tillermen, wink wink, nudge nudge)
-    Containers will default to limits: 150 items, 250 stones
-
-11-20 Racalac
-    Added a new object method: script_process.clear_event_queue(). (script_process comes from
-    NPC.process or uo.em's getprocess(pid))
-
-11-19 Racalac
-    You will no longer be able to initiate a secure trade with a ghost (if either party is dead).
-
-11-17 Racalac
-    These Item creation/movement/deletion functions now properly will update character's weight on
-        the status gump: ConsumeSubstance, DestroyItem, CreateItemInContainer, CreateItemInBackpack,
-        MoveItemToContainer, MoveItemToLocation, SubtractAmount.
-
-    CreateItemInContainer and -Backpack will call the container's canInsert and onInsert scripts.
-        POL will attempt to find a character that owns this container. If one is not found (i.e.
-        container is on the ground, the CharacterRef passed to the passed to the canInsert and
-        onInsert scripts will be an uninitialized object (so, check to make sure it's valid before
-        using it).
-
-    Adding to a stack of items (manually and by a CreateItem script function) in a container will
-        call the container's canInsert and onInsert scripts. Note if a script initiates this action
-        (and the script has no character controller), the CharacterRef passed to the canInsert and
-        onInsert scripts will be an uninitialized object (so, check to make sure it's valid before
-        using it).
-
-    The core will no longer play sounds effects for items being inserted into containers (thus, they
-        aren't heard by everyone.). You can get the desired effects using the container's onInsert
-        script. For example, to get the different gold drop sounds in addition to the default one,
-        you might have in your container's onInsert:
-
-        if(item.objtype == GetObjtypeByName("goldcoin"))
-            if(item.amount >= 100)
-                PlaySoundEffectPrivate( who, 0x38, who ); //lotsa gold
-            elseif(item.amount >= 30)
-                PlaySoundEffectPrivate( who, 0x37, who ); //some gold
-            else
-                PlaySoundEffectPrivate( who, 0x36, who ); //a few coins
-            endif
-        else
-            PlaySoundEffectPrivate( who, 0x49, who ); //default sound
-        endif
-
-11-17 Myrathi
-    Fixed Unicode speech (and a couple of possible buffer overflow bugs)
-        - Text commands are now properly recognised and run
-    TypeOf() (see basic.em) on Dictionary and Struct variables now returns
-        "Dictionary" and "Struct", respectively.
-    Added "unicode.em" with Unicode support functions (refer to file for names)
-        - a Unicode "string" ('uc_text' param) is simply an Array of Integers.
-        - each Integer corresponds to a 2-byte Unicode character.
-        - each of the 4 functions must also be given a 3-character "language code"
-            - examples are "ENU" (US English), "ENG" (UK English), "RUS" (Russian)
-
-11-17 Syzygy
-    Fixed the map Z-height algorithm to match the UO client for negative Z
-        (for an example, see 1906,49)
-    Fixed an assertion failure in SendOpenBook on Linux systems
-    Fixed an ecompile error with substrings/multidimensional subscript access ( ex: tmp := Props[3,1] )
-
-11-16 Racalac
-    New member for the Text Event struct: "texttype". This will be a string with a value of "yell",
-        "whisper", "emote", or "default" depending on the type of speech received.
-
-    NPCs will only receive text events if the source is in range, depending on the texttype (this
-        will be configurable in the future, for now, whisper is 2 tiles, normal is 12, and yell is
-        25 tiles). So an NPC will not get a yell event from a source 30 tiles away, even if its
-        speech event range is 40. Item text listeners will get all text in their range, regardless
-        of texttype. (Need feedback for this)
-
-    New os.em function: clear_event_queue(), empties current script's event queue.
-        (Distro folks! - need to add this prototype to os.em)
-
-    The npc.em movement functions (Wander(), Move(), WalkToward(), WalkAwayFrom(), RunToward(),
-        RunAwayFrom(), TurnToward(), TurnAwayFrom(), WalkTowardLocation(),WalkAwayFromLocation(),
-        RunTowardLocation(), RunAwayFromLocation(), TurnTowardLocation(), TurnAwayFromLocation())
-        now return 1 is the move was successful, and 0 if the move failed. NOTE this will almost
-        ALWAYS return 1, if UseAdjustments is true (see next item), because the "adjusted" move
-        probably succeeded.
-
-    New npcdesc.cfg member: UseAdjustments : If set to 1 all NPCs of this template will behave as
-        normal when blocked by and object (pace back and forth if path is blocked). If set to 0, the
-        NPC will not attempt to find a adjacent tile toward the target that is not blocked (defaults
-        to 1 if not found in the npcdesc.cfg entry). Also, a new NPC member with the name
-        ".use_adjustments" is read/write. These NPC changes are in preperation for a pathfinding
-        system.
-
-    New npcdesc.cfg member: RunSpeed . If present, (default to dexterity value) this value is used
-        for time delay between NPC moves (maximum usable value is 250, which is pretty damn fast!
-        Running NPCs move twice as fast as walking NPCs). Also, a new NPC member with the name
-        ".run_speed" is read/write. Note that this member may become a Vital in the near future
-        (before the 095 final release).
-
-11-14 Racalac
-    Fixed MoveItemToContainer bug (default container coords of -1 was being flagged
-        as out of range). Reminder: any value of x or y outside the gump coordinate
-        range as defined in the container's itemdesc.cfg will be interpreted as "random location"
-    Added new uo.em function: ListItemsNearLocationWithFlag(x,y,z,range,flags). "flags" here are
-        tiledata.mul flags for the item's graphic. A list of known flags is forthcoming
-        (curious people can see Alazane's file format page at
-        http://dkbush.cablenet-va.com/alazane/file_formats.html#3.19 )
-    Fixed an additional MoveItemToContainer bug that was causing random location of items inside
-        the container gump.
-
-11-13 Myrathi
-    Updated ECOMPILE and RUNECL banners to include better version info
-        (number after the decimal point is the supported file version)
-
-11-12 Syzygy
-    Added support for ecompile.cfg and packaged includes
-        see scripts/ecompile.cfg.example
-        usage: include ":pkgname:filebase";
-    npcdesc.cfg can once again hold non-"NpcTemplate" elements.
-    xlate.cfg is no longer loaded and ignored, just ignored.
-
-11-10 Syzygy
-    item.color := (value) will once again set the color properly.
-
-11-10 Myrathi
-    Updated item.facing - valid range is now 0-127
-    Updated TotalStatsAtCreation= option in SERVSPECOPT(.LOCAL).CFG
-        Can now take comma-delimited lists of values and/or ranges (default = "65,80")
-        Example:
-               TotalStatsAtCreation=65,80,90-95,100-110
-    Anti-exploit checks in uo::SelectColor()
-          now validates values as 2 to 1001 to prevent client-side exploits:
-          - returns the chosen color value
-          - or an error ("Client selected an out-of-range color")
-          An error situation will also display information on the console:
-          e.g.
-            Client #1 (account test) selected an out-of-range color 0x1
-
-    Anti-exploit checks & updates in UNICODE-speech code
-          squelch()'d mobiles cannot speak.
-          Text-color is validated between 2 and 1001 to prevent client-side
-            exploits. Invalid color prints a message to console:
-            e.g.
-              Client #1 (account test) speaking with out-of-range color 0x1
-
-11-09 Syzygy
-    Major changes to the script engine:
-
-        ***   ALL SCRIPTS MUST BE RECOMPILED!!   ***
-
-        All scripts should function as they do now, with two exceptions:
-           .smember no longer works
-           the hidden iterator variable in "foreach" is now called
-                _(var)_iter instead of _(var)_counter
-        Fixed two major script object leaks.
-        Internal changes to the way member assignment and access works.
-        Internal changes to the way script substrings are handled.
-        Removed the 'Substring' object type.
-        Fixed: len() on an error would return random values
-           (now returns the number of elements in the error dictionary,
-            which is probably unnecessary)
-
-
-11-04 Syzygy
-    Fixed a nasty compiler error.  Expressions like this:
-        (!ev.source.isA(POLCLASS_NPC))
-        will now work properly.
-         The compiler used to consider that something like
-             (!ev.("source".isA(POLCLASS_NPC) ) )
-
-
-10-23 Syzygy
-    foreach now operates over dictionaries:
-        foreach v in dict
-            print( _v_iter + " -> " + v );
-        endforeach
-
-10-17 Syzygy
-    xlate.cfg is no longer used.
-    spells.cfg no longer depends on xlate.cfg for reagent name lookup - will use itemdesc.cfg names.
-    Preload 'equiptest' and 'unequiptest' scripts, to speed system load time.
-       (however, equiptest/unequiptest scripts created after startup will not be noticed)
-    Changed config file handling to speed load time.
-       (menus.cfg entries might have their elements reordered, though)
-
-    Sped up system load
-
-10-13 Syzygy
-    Sped up storage area lookups
-
-09-14  merged changes from Racalac:
-    -New property for itemdesc.cfg Map{} entries: Editable, which defaults to 0
-        This determines if the user can plot points on the map gump. Note you can still edit the map
-        via the script methods.
-
-    -New script methods for map objects:
-        GetPins(): returns an array of structs with .x and .y members for each pin point.
-        InsertPin( index, x, y ): inserts a pin with the passed x,y before the passed index. Valid range 0 to n-1
-        AppendPin( x, y ): appends a pin to the end of the course with the passed x,y
-        ErasePin( index ): erases the pin at the passed index (valid 0 to n-1), and shifts pins down.
-        isa(): returns true if the object is a map object
-
-    -New pol.cfg option:
-        MaximumClients=X
-        Denies logon to clients if # of clients connected is at defined maximum
-
-    -New syshook for walking through other players, i.e. define a package with syshook.cfg :
-        SystemHookScript pushhook.ecl
-        {
-            Pushthrough Pushthrough
-        }
-        with pushhook.src with something like:
-
-        use uo;
-
-        program PushthroughHook()
-            return 1;
-        endprogram
-
-        exported function Pushthrough(walker, obstructors) //note passed ARRAY of mobiles in destination tile
-
-            foreach mob in obstructors
-                print(mob.name);
-            endforeach
-
-            if(GetVital(walker,"Stamina") < GetVitalMaximumValue(walker,"Stamina"))
-                return 0;
-            else
-                return ConsumeVital(walker,"Stamina",1000);
-            endif
-
-        endfunction
-
-    -New player privilage: 'freemove' - ignore Pushthrough/stamina cost for movement
-    -New character method: character.GetGottenItem() returns itemref to item on player's "cursor"
-
-09-12
-    Linux changes
-
-=============================================================================
-POL095-2002-09-11
-=============================================================================
-    Changes for linux build:
-        Built with gcc 3.0, libstdc++2.10, on 2.4.18 kernel
-        Use sigaction() instead of signal() in hopes of correcting SIGPIPE problems.
-
-    The game clock will initialize before any objects are loaded from data files.
-    RecalcVitals will not operate on offline mobiles
-    Fixed an error related to multis which would cause decay to function sporadically
-      near multis, and to use memory without bound if items existed on multis.
-
-    Incorporated changes from Myrathi:
-        * Fixed IP Banning via /config/bannedips.cfg (no longer stops at first element)
-        * Warmode ghosts are no longer flagged criminal/aggressor for dbl-clicking on mobs/PCs
-
-        * Frozen/Paralyzed ghosts are no longer able to move due to being dead.
-
-        * HP/MaxHP update to nearby clients now uses a standard MaxHP ratio against 1000 hitpoints.
-          This should stop people from being able to snoop a mobile's exact HPs via a packet sniffer.
-
-        * item.facing can now be set from 0-101 (used to be 0-31)
-        * Added: AllowSecureTradingInWarMode=0|1 in SERVSPECOPT(.LOCAL).CFG (default = 0)
-        * Added: TotalStatsAtCreation=65|80 in SERVSPECOPT(.LOCAL).CFG (default = 65)
-
-        * Added: account.CheckPassword( password ) -- for validating an account's password
-          (returns 1 if the password is correct)
-
-        * Added: player.clientversion -- returns the client version string or an empty string
-          if the client has disconnected.
-
-        * BUGFIX!!! --> find_supporting_multi()
-            static MultiList mvec;
-            vec.clear();
-            mvec.clear();
-
-        * Addition of packet structures (to stop incorrectly variant blocks skewing data):
-          - 0x15 0x1E 0x1F 0x23 0x26 0x28-0x2B 0x2D 0x2F-0x32 0x35-0x39 0x3D-0x4D 0x50-0x52
-          - 0x55 0x57-0x5C 0x5E-0x64
-          - 0xC8
-
-        * Update of packet structure information (just cuz):
-          - 0x53
-          - 0x65 (weather enumerates)
-
-        * Version string update
-
-        * Copyright date update (1993-2002)
-
-        + Fixed legacy v1.xx-client 0x33 pause/restart packet padding.
-          Still works for "mass item/multi update" though, to help with blackholing.
-
-        + Fast-walk client-checking (packet 0xBF) -- stack-cycle & add-key
-        + Cursor Hues (packet 0xBF) -- Felucca & Trammel
-
-        + Sound effect support updated: repeat/single-use, volume and 'z' variables noted.
-
-=============================================================================
-POL094-2001-07-25
-=============================================================================
-
-    Fixed an error where some packets would be sent to all connected clients,
-      no matter how far away the item was from the logged-in character
-
-    Element types for maps need to be changed from Item to Map - their objtypes
-      no longer have to fall within the range of 0x14EB toi 0x14EE
-
-    Added ConsumeVital( mobile, vitalname, hundredths ) to uo.em
-
-    Added GetAttributeIntrinsicMod declaration to uo.em
-    Attribute updates will be sent to the client
-    Life updates will be sent to nearby clients
-    Added mobile.attached:
-       returns process reference if a script is attached,
-       or an error ("No script attached.")
-    If the Attack system hook returns false, core will handle combat as normal.
-    Vital regen rates will be limited to the range (-30,000 to +30,000)
-    Vital maximum values (in hunredths) will be limited to the range (100 to 10,000,000)
-       (1.00 to 100,000.00)
-    SetVital will accept any value between 0 and 10,000,000
-    Added SystemHook function Attack(attacker,defender)
-      -- called when the attack timer times out.
-      -- attacker must not be hidden
-      -- defender is chosen by checking attacker's Opponent, then Hostiles, for one
-         that meets the following criteria:
-           1) Defender is alive
-           2) Defender is in range of attacker's weapon
-           3) Defender is not hidden
-           4) Defender is not concealed from Attacker
-           5) Line-of-sight exists between Attacker and Defender
-    LOS will be checked when searching for an attackable mobile
-    Removed SetAttributeIntrinsicMod
-    GetIntrinsicModFunction added to attributes.cfg
-    added AlterAttributeTemporaryMod
-    Updated vitals will be sent to the client
-     - this only works for your own character, you won't see changes to others' vitals
-    Added GetAttributeIntrinsicMod and SetAttributeIntrinsicMod
-    Removed SetVitalRegenRate since regen rates are specified by exported functions
-    Added RecalcVitals(chr) which will recalculate regen rates and maximum values
-      for all vitals on a mobile
-    Corrected an error in the compiler having to do with optimization of if..elseif..endif statements
-    Newly created NPCs will regenerate vitals and start with maximum vitals
-    npcdesc.cfg entries can specify AttackAttribute instead of AttackSkillID
-    removed mobile.hp_regen_rate
-    removed mobile.mana_regen_rate
-    removed mobile.stamina_regen_rate
-    resmoved mobile.strength_mod
-    removed mobile.intelligence_mod
-    removed mobile.dexterity_mod
-    removed mobile.hp, mobile.maxhp
-    removed mobile.mana, mobile.maxmana
-    removed mobile.stamina, mobile.maxstamina
-    removed mobile.strength
-    removed mobile.dexterity
-    removed mobile.intelligence
-    removed uo::GetStatus
-    removed uo::GetStats
-    removed mobile.setstr()
-    removed mobile.setint()
-    removed mobile.setdex()
-    removed uo::GetRawSkill
-    removed uo::SetRawSkill
-    removed uo::GetSkill
-    removed uo::AwardRawPoints
-    removed internal attribute advancement due to combat (including parrying)
-    Added system hook: ParryAdvancement( attacker, weapon, defender, shield )
-    Weapon entries in itemdesc.cfg must have an 'Attribute' instead of a 'SkillID'
-    data/pol.txt needs the following element: (core 93 doesn't create)
-        System
-        {
-            CoreVersion 93
-        }
-
-
-=============================================================================
-POL093-2001-02-10
-=============================================================================
-    SetAttributeBaseValue will only accept base values between 0 and 2200 (0.0 to 220.0)
-    Added GetVitalMaximumValue(character, vitalname);
-
-    Added functions for Vitals:
-        GetVital(character, vitalname)
-        SetVital(character, vitalname, value);
-        GetVitalRegenRate( character, vitalname )
-        SetVitalRegenRate( character, vitalname, rate )
-        Regen rates are in "hundredths of points per minute."
-        A current regen rate of 100 (1 point per 5 seconds) would therefore
-        be 1200 (12 points per minute) under the new system.
-        Valid Vitals are Life, Stamina, and Mana
-
-
-    Added 'CombatAdvancement' system hook
-      function CombatAdvancement( attacker, weapon, defender )
-      The builtin functionality performs the following:
-        For the Attacker:
-           Award 30 raw skill points in the weapon skill
-           Award stat gain as if the weapon skill were used successfully.
-           Award 15 raw skill points in Tactics
-           Award stat gain as if Tactics were used successfully.
-        For the Defender:
-           Award 15 raw skill points in Tactics
-           Award stat gain as if Tactics were used successfully.
-      This is called whether or not the attack was successful
-
-      (I'm sure I'm not the only one that thinks combat needs an overhaul)
-
-
-
-    Started the new Attribute System (Read this!)
-    ---------------------------------------------
-        The short story: these functions presently operate on the current
-          skills and stats that you know and love.  Core 93 will not change
-          the underlying skills and stats - GetSkill, SetRawSkill etc will
-          continue to work.  Core 94 will no longer support these functions,
-          so you have until then to convert your current usage to use these
-          new functions.
-          When this is complete, there'll be no more "Raw" skill/stat values,
-          and all Attribute advancement will be handled by scripts.
-
-        See core-docs.txt for a description of Attributes and how they work.
-        In particular, the "conversion notes" at the end may be useful.
-
-        Added uo.em functions:
-            GetAttribute( character, attrname );
-            GetAttributeBaseValue( character, attrname );
-            GetAttributeTemporaryMod( character, attrname );
-            SetAttributeBaseValue( character, attrname, basevalue );
-            SetAttributeTemporaryMod( character, attrname, tempmod );
-
-    config/pkgroots.cfg specifies additional root directories to search for packages.
-        An example pkgroots.cfg:
-            PackageRoot
-            {
-                dir d:\devpkg\
-            }
-        Do include the trailing slash.
-
-    Assertions:
-        Assertions are now present in the Win32 build as well as the Linux build.
-        EnableAssertions is now 1 by default.
-        DumpStackOnAssertionFailure=1 in pol.cfg will cause a stack backtrace
-        to be generated when any assertion fails.
-        In any case, an exception will be thrown on an assertion failure.
-        I recommend running with EnableAssertions=1.  It is reloaded when pol.cfg is changed.
-
-=============================================================================
-POL092-2000-12-11
-=============================================================================
-    pkg.cfg directive added: "Replaces {pkg}".  Indicates this package should replace
-      any version of {pkg} found under the /pol/pkg/ tree.
-
-
-    objtypes.txt will be created on startup.  It lists all used and unused objtypes in numerical order.
-    Fixed a bug where only the first element in movecost.cfg would be read.
-    Added uo::SelectColor(chr,dyetub)
-    Removed internal dye and dyetub functionality.  (replacement 'dyeitems' package uploaded to pol-core-test)
-      - note this uses Zulu's 'dyecheck' script instead of the old internal functionality
-        to determine if you can dye a particular item.
-    Corrected a bug which caused BaseSkillToRawSkill (and therefore NPC creation) to take a
-      long time to complete (even for base skill values above 160)
-    Added support for the client's book interface:
-      uo::SendOpenBook(chr,book) kicks it off
-      The 'book' passed must have a Method Script, exporting the following functions:
-        exported function IsWritable(book) // returns 0 or 1 for readonly/writable
-        exported function GetNumLines(book) // returns maximum number of lines
-        exported function GetTitle(book)
-        exported function GetAuthor(book)
-        exported function GetLine(book, line) // line is 1-based
-      Writable books must provide the following functions:
-        exported function SetAuthor(book,author)
-        exported function SetTitle(book,title)
-        exported function SetLine(book,line,text)
-        exported function GetContents(book) // returns an array of all lines
-      I've put together a sample 'sysbook' package to demonstrate this.
-
-    Added the Data Store.
-      The Data Store is a collection of files, stored under data/ds/, saved
-        atomically with the rest of the world data.
-      Only those Data Files actually modified are saved at system save time.
-      A Data File is a collection of Data File Elements.  Data File Elements are
-        accessed by key, which can either be a String (case insensitive match)
-        or an Integer.
-      A Data Element is a collection of Properties.  Each Property has a Property
-        Name and a Property Value.  A Property Name is a string, and is, er,
-        case-sensitive (doh), while a Property Value can be any "packable" script
-        object.
-
-      In other words, a Data File is like a Config File that you can modify and
-        is stored under data/.  The Properties in a Data File Element are just 'cprops'
-        except that when saved in the data store I don't prefix them all with 'cprop'
-
-      scripts/datafile.em lists the functions that are complete and the methods provided
-        by a DataFile and by a DataFileElement.
-
-      Packages can have their own Data Files; these will be stored in
-        data/ds/{pkgname}/.  Normal package filename resolution rules apply.
-
-    Normal "Open Spellbook" handling will occur if the OpenSpellbook hook returns false.
-      (The OpenSpellbook hook script should return 1 if it handled the event, 0 if it didnt)
-    Any itemdesc entry can define zero or more 'OldObjtype' entries.  These are for
-      objtype renumbering.
-    Major rework of multi handling.  There must now be itemdesc.cfg entries for boats
-      and houses, and the objtypes aren't tied to the MultiIDs.  Multis.cfg defines what to
-      expect in multi.mul.
-      CreateMultiAtLocation has more flags for boat creation
-        (CRMULTI_FACING_NORTH, CRMULTI_FACING_EAST, etc)
-      An example entry for pkg/std/boat/itemdesc.cfg:
-        Boat 0x6041
-        {
-            Name smalldragonboat
-            Graphic 0x4004      // base graphic
-            MultiID 0x0004
-
-            OldObjtype 0x4004
-            OldObjtype 0x4005
-            OldObjtype 0x4006
-            OldObjtype 0x4007
-        }
-      An example entry for pkg/std/housing/itemdesc.cfg:
-        House 0x6060
-        {
-            Name smallstoneandplasterhouse
-            Graphic 0x4064
-            MultiID 0x64
-
-            OldObjtype 0x4064
-        }
-      See the latest pol-coresupp zip for config/multis.cfg
-
-
-    Fixed an error where the server would fail to start if a container was overfilled
-    RegisterForSpeechEvents takes an optional 'flags' parameter.  If LISTENPT_HEAR_GHOSTS is
-      passed, this listening point will hear unfiltered ghost speech.
-    Added scripts/include/sysevent.inc.  All system EVID_* constants have been copied here
-      and renamed to SYSEVENT_*.
-    Added SYSEVENT_GHOST_SPEECH (0x1000), to allow an NPC to hear unfiltered ghost speech.
-      The NPC must still be able to _see_ the ghost in able to hear it.
-    NPC event masks will now be checked for SYSEVENT_SPEECH being set.
-    Added npc.eventmask, in part to help you find scripts that don't set SYSEVENT_SPEECH.
-    Added npc.speech_color and npc.speech_font.  npc::say() will use these.
-      These will be saved in npcs.txt as SpeechColor and SpeechFont (and can be specified in
-      npcdesc.cfg)
-
-    Added uo::AddAmount(item,amount)
-      - only adds to stackables
-      - only allows stacks up to 60,000
-      - checks for container overfill
-    Added an optional 'flags' parameter to CreateMultiAtLocation
-      - uo.em contains constants to add together (CRMULTI_*)
-      - this parameter only applies to houses, not boats
-    Before character deletion, scripts/misc/ondelete.ecl and anypkg/ondelete.ecl will be called.
-      Their return values are ignored.
-    New system hook: OpenSpellbook( chr ), called when the Open Spellbook packet is received
-     (not when a spellbook is doubleclicked).  This is called even if the character is dead!
-
-    Added 'Method Scripts' for items:
-      An itemdesc.cfg entry can specify a 'MethodScript'
-      This is a script that (presumably) contains exported functions.
-      Method calls on the item are forwarded to the exported functions in this script.
-      Exported functions can have the same name as an existing object method.  In this case,
-        the exported function will override the existing object method.
-      An example that modifies door.open():
-
-      pkg/.../door/itemdesc.cfg:
-        Door 0x0675
-        {
-            xmod -1
-            ymod +1
-            script door
-            doortype metal
-            MethodScript cdoor.ecl
-        }
-
-      pkg/.../door/cdoor.src:
-        exported function open( door )
-            print( "cdoor::open(" + door.serial + ")" );
-            return door._open();
-        endfunction
-
-        program install()
-            print( "installing cdoor" );
-            return 1;
-        endprogram
-
-      Note the mostly empty 'program' section.  It must return 1 in order for the
-        method script to be installed.
-      Script methods don't have to be the same as existing methods, and can take
-        and number of parameters.  Pass-by-reference should be possible, as well.
-      Method scripts can only be specified for items in packages; the server will
-        probably blow chunks if you try it in pol/config/itemdesc.cfg.
-    Preceding a method call with an underscore will directly call the "real" object method.
-
-
-    escript changes:
-        'int' is no longer a reserved word
-        'exported' is now a reserved word
-    logon scripts in packages will now be called on character creation
-    Added the concept of a "System Hook":
-      - Any package can contain a syshook.cfg file
-      - Each entry is a SystemHookScript, which can provide one or more exported functions
-      - the only function that can presently be hooked is 'CheckSkill'
-      - A sample syshook.cfg:
-            SystemHookScript hooktest.ecl
-            {
-                CheckSkill MyCheckSkill
-            }
-      - And hooktest.src to go with it:
-            use uo;
-
-            exported function MyCheckSkill(who,skillid,difficulty,points)
-                print( "MyCheckSkill("+who.serial+","+skillid+","+difficulty+","+points+")" );
-
-                // note you can call the "system" function normally
-                return CheckSkill(who,skillid,difficulty,points);
-            endfunction
-
-            program hooktest()
-                print( "hooktest prog" );
-            endprogram
-      - The 'program' section is executed once, at system startup.
-        Thereafter, the exported function is called as needed.
-      - A hooked 'CheckSkill' will override any script's call to CheckSkill, as
-        well as the internal combat CheckSkill calls.
-      - Each hooked function has a recursion guard, so the system function can
-        be called from within the hook function (as in the example above)
-      - there is currently no way to unload system hook functions
-
-    Containers won't count their own weight against the weight they can hold
-    Multiple scripts can have active gump dialogs on a particular client
-
-    The 'SecureTradeContainer' itemdesc.cfg entry must specify "Weight 0"
-    Here is the entry I use:
-        Container 0xFF01
-        {
-            Name    SecureTradeContainer
-            graphic 0x1E5E
-            Gump    0x003C
-            MinX    0
-            MaxX    66
-            MinY    0
-            MaxY    33
-            Weight  0
-        }
-    If "Weight 0" is not specified, mobiles who participate in secure trading
-      will weight 255 stones more than they should.
-
-
-    Container entries in itemdesc.cfg can specify MaxWeight and MaxItems
-      - if zero (or not specified) there are no limits
-      - if MaxItems is specified, it includes item counts for child containers
-      - if MaxWeight is specified, it includes weights for child containers
-      - there is still a limit of 150 items in the top-level of a container
-          (so as not to flip out the client)
-      - added item.item_count
-      - container count and weight limits will not be enforced during startup
-    Weight of a mobile will now include items being "dragged" as well as
-      items in the secure trade window
-    Added Container scripts (specify in itemdesc.cfg):
-        Entries:
-            CanInsertScript // called to see if an item can be inserted
-            OnInsertScript  // started after an item is inserted
-            CanRemoveScript // called to see if an item can be removed
-            OnRemoveScript  // started after an item is removed
-      - program definitions are:
-      - program can_insert( who, container, item );
-      - program on_insert( who, container, item );
-      - program on_insert( who, container, item, amtadded ); // if an existing stack was added to
-
-      - program can_remove( who, container, item ); // return nonzero to allow removal
-      - program on_remove( who, container, item ); // when the item is dragged
-            - note the item will always be "in use" when this script is called.
-      - only started on "client drag" operations
-    Packed variables containing 'x' characters (an empty array element) should unpack correctly
-      (would have unpacked a huge error object instead of a nothing)
-
-=============================================================================
-POL091-2000-11-01
-=============================================================================
-    Added more guild support:
-      All guild data is stored in data/guilds.txt.  Existing GuildId entries in
-      pcs.txt will be migrated.
-      Ally and Enemy status is always 2-way, and is not transitive, so any hierarchies
-        will have to be implemented in script.
-
-      - new uo.em functions:
-        CreateGuild();          // returns a guildref
-        FindGuild( guildid );   // returns a guildref or error
-        ListGuilds();           // returns an array of guildrefs
-        DestroyGuild( guild );   // destroys a guild with neither members, allies, nor enemies
-      - Guild Object
-        Properties:
-         guild.guildid : integer, unique guild identifier
-         guild.members : array of offline mobilerefs
-         guild.allyguilds  : array of allied guilds
-         guild.enemyguilds : array of enemy guilds
-
-        Methods:
-         guild.ismember( who )
-         guild.isallyguild( otherguild )
-         guild.isenemyguild( otherguild )
-
-         guild.addmember( who )
-         guild.addallyguild( otherguild )
-         guild.addenemyguild( otherguild )
-
-         guild.removemember( who )
-         guild.removeallyguild( otherguild )
-         guild.removeenemyguild( otherguild )
-
-         guild.getprop( propname )
-         guild.setprop( propname, propvalue )
-         guild.eraseprop( propname )
-
-    Added Auxilliary Client Interface
-      - a package can contain 'auxsvc.cfg'
-      - packed values are sent, newline-terminated.  These show up on the aux service
-        script's event queue as an event with ev.type = "recv" and ev.value = the unpacked value
-      - parameter to the aux control script is an AuxConnection
-      - AuxConnection.transmit( val ) sends packed representation of val, newline terminated.
-      - see 'pkgauxsvc.zip' for an example
-
-    "CON", "AUX", "PRN", and "NUL" will be disallowed as text command names.
-    NPC intrinsic weapons will be re-equipped after unequipping another weapon
-      (instead of switching to the human wrestling weapon)
-    Removed "Searching for" messages when looking for textcmds
-    An "Unknown command" message will display if you mistype a textcmd
-    NPCs will walk through mobiles they can't see (whether due to concealment or hiding).
-    NPC AttackHitScript entries cause hit scripts to fire now.
-    Ghosts will no longer impede NPC movement.
-    minrange and maxrange can be specified in Weapon entries in itemdesc.cfg.
-      Default for melee weapons: minrange 0, maxrange 1
-      Default for projectile weapons: minrange 2, maxrange 20
-        (same as previous code)
-    NPCs in packages should retain their intrinsic weapon after a restart.
-    npc.isa(t) and mobile.isa(t) now work
-    mobile.setcriminal(0) now works
-    PID will display for runaway scripts
-    ReadConfigFile( ":*:foo" ) will load a combination of all foo.cfg files found in
-      config/ and all package directories.  These can be unloaded.  This method is preferred
-      over using "::itemdesc", "::spells", and "::skills", since reloading will be handled
-      correctly.
-    Added extra checking on item destruction in case a destroyscript is evil
-    Added uo::SendViewContainer( chr, container ) - just sends the container contents
-      (does not grant access like SendOpenSpecialContainer)
-    mobile.truecolor and mobile.trueobjtype are r/w (though I think trueobjtype has no effect)
-    Fixed a crash bug in some instances of item destruction, decay being one example.
-    "AttackHitScript" can be specified in npcdesc.cfg entries for a per-npctemplate HitScript.
-        For packaged npcdesc.cfg entries, this will need to have the package specified.
-        Also note that AttackSpeed must be specified for any per-npctemplate Attack* properties to be used.
-    added object.isa( polclass_type ) : boolean
-      use constants POLCLASS_OBJECT, POLCLASS_ITEM, etc from uo.em
-        example:
-          door.isa( POLCLASS_DOOR ) will return true
-          door.isa( POLCLASS_ITEM ) will return true
-          door.isa( POLCLASS_MOBILE ) will return false
-    Whisper range is 2, Yell range is 25
-    Items in decaying locked containers will be destroyed with the container.
-    movable=0 items in decaying containers will be destroyed.
-      Note that in both cases, destroy scripts will not execute.
-       (Destroy scripts execute only when DestroyItem is called, or when a toplevel
-        item is checked for decay)
-    '=' is assumed to be a command prefix (as well as '.')
-    mob.setcriminal(0) will clear the criminal timer and send status update packets
-    "destroy [desc] ..." messages will no longer display on item destruction.
-
-POL090-2000-09-03
-=================
-SPECIAL NOTE:
-  ALL SCRIPTS MUST BE RECOMPILED!  (all your scripts compile, right? :-)
-  Old .ECL files will not load!
-
-Titles
-    - if present, "[title_guild]" will display above name on singleclick
-    - if present, " (title_race)" will display after name on paperdoll
-    - title_prefix, title_suffix, title_guild and title_race can contain leading
-         and trailing spaces, embedded quotes, and embedded newlines.
-
-Interactive Debugger
-    - Added beginning of debugger interface.
-         pol.cfg: DebugPort=port, DebugPassword=string, DebugLocalOnly=0/1
-         Only enabled if DebugPort if specified as non-zero.
-    - Added local variable information to .dbg files
-    - Added stepinto debug command
-         (see srcdoc/poldbg.txt for debug command list)
-    - Added debugger commands:
-         pidlist [str]             return list of PIDs with scriptnames matching *str*
-         inslist [file] [line]     list instructions associated with File#/Line#
-         globalvars                list global variable names (if available, compile
-                                    with -z)
-         getlocalpacked [N]        get local variable #N, in packed format
-         setlocalpacked [N] [p]    set local variable #N, to packed value
-         getglobalpacked [N]       get global variable #N, in packed format
-         setglobalpacked [N] [p]   set global variable #N, to packed value
-    - Added debugger command 'call'
-         call [scriptname] [parameters:packed array]
-         parameters must be a packed array.
-         return value is returned packed.
-         So, if 'misc/called.src' ends with 'return 5;' then;
-         "call misc/called.ecl a3:i1i2i3"
-         will call misc/called.src, with three parameters: 1, 2, 3
-         Output will be:
-           Results: 1
-           Return value packed: i5
-    - Added debugger command 'quit' - graceful exit.
-
-eScript
-    - Added 'runecl.exe' to the core distro.
-        - only has access to 'basic', 'basicio', and 'math' execution modules
-    - Added math.em execution module
-    - Added Integer modulus operator '%'
-    - Added bitwise operators, for Integers only
-       & (bitwise and)
-       | (bitwise or)
-       ^ (bitwise xor)
-       ~ (one's complement)
-    - Added 'sysfind_flags' parameter to SystemFindObjectBySerial
-       - flag values can be found in uo.em:
-       - SYSFIND_SEARCH_OFFLINE_MOBILES - search for offline mobiles and equipment
-          on offline mobiles
-       - SYSFIND_SEARCH_STORAGE_AREAS   - search for items in all storage areas
-    - SystemFindObjectBySerial will always return an 'offline mobileref' if
-       SYSFIND_SEARCH_OFFLINE_MOBILES is specified.
-    - Added the 'struct' type.  These can be persisted, unlike a struct created
-      from an array.  Structs should be used rather than arrays when you want a
-      structure.
-      preferred forms:
-          var a,b,c,d;
-          a := array;      // make an empty array
-          a[1] := 2;
-          a[2] := 7;
-
-          b := struct;
-          b.+name := "YouThere";
-          print( b.name );
-
-          c := dictionary;
-          c["hello"] := "foo";
-          c["world"] := "bar";
-
-          d := { 2, 5 };   // make an initialized array
-    - The 'error' datatype is now persistable (internally it's a 'struct')
-    - Added pids (process ids) and a scripting object for process control
-       - os::getpid() gets your own pid
-       - os::getprocess(pid) gets a scripting object for a process given its PID
-    - Added polcore().skill_checks_per_min
-    - Added polcore().combat_operations_per_min
-    - The instares dialog gump packet will no longer be sent automatically on PC death
-       - chrdeath.src will have to handle this
-    - Added uo::SendInstaResDialog( chr );
-    - Added AwardRawSkillPoints( mobile, skillid, rawpoints )
-       - rawpoints must be positive at this time
-    - "pol.lg2" has been renamed to "debug.log" and is enabled in
-        pol.cfg:EnableDebugLog=0/1
-    - Added process.sendevent( object );
-    - Added process.kill();
-    - start_script will now return a process scripting object
-    - Added npc.process, returns a process scripting object
-    - Global variable name information is now included in .dbg files
-       '-z' option removed - only '-x' generates .dbg files
-       .dbg.txt files no longer generated
-    - Added GetObjPropertyNames(object) - returns array of all cprop names
-    - Configfile string properties can be contained within quotes, and can contain
-       leading and trailing spaces, embedded quotes (\"), and embedded newlines (\n)
-    - SendSysMessage, Broadcast, PrintTextAbove, and PrintTextAbove all take
-       optional parameters 'font' and 'color'
-    - Added item.buyprice
-       If nonzero, overrides the 'vendor_buys_for' value from itemdesc.cfg
-       If negative, vendors will not buy this item.
-    - 'invisible' in itemdesc.cfg will be honored as the default.
-
-Compiler
-    - Search rules for .inc and .em files changed:
-       - First, the directory of the including file is searched
-       - Next, either ECOMPILE_PATH_EM or ECOMPILE_PATH_INC (which default to
-          the directory containing ecompile.exe) are searched
-       - relative dir info from the included filename is always used.
-       - pass '-v10' to the compiler to see what's going on, if it can't find
-         your files.
-       - This means that:
-           D:\POL> ecompile -r .
-           D:\POL\PKG\MYPKG> ecompile foo.src
-           D:\POL\SCRIPTS> ecompile ..\pkg\mypkg\foo.src
-          should all be equivalent now.
-       - If you intend to use the debugger, compiling from your pol\ directory
-           is best, (or specifying a full path) so that pol.exe will have the
-           correct paths to all involved files.
-       - I recommend "ecompile -u -b -l -x -a -r d:\pol"
-    - It seems those of you using Win2k and Linux will need to have
-       ECOMPILE_PATH_EM and ECOMPILE_PATH_INC variables.
-
-Reputation System
-    - See srcdoc/repsys.htm for current criminal/murderer flagging rules
-    - Added mobile.SetParalyzed( isparalyzed := 1 );
-       - mobile.paralyzed := 1/0 is deprecated and will become read-only
-       - mobile.SetPoisoned sets repsys data
-    - Added mobile.SetPoisoned( ispoisoned := 1 )
-       - mobile.poisoned := 1/0 is deprecated for this use (it will become read-only)
-       - mobile.SetPoisoned can set repsys data (aggressor, criminal flagging)
-        mobile.poisoned assignment cannot.
-       - mobile.SetPoisoned will no longer set the Murderer flag
-    - Added mobile.SetCriminal( level := 1 ), level >= 1
-    - Added mobile.SetMurderer( ismurderer := 1 )
-    - Added mobile.murderer read-only flag
-    - mobile.criminal will always return true for murderers.
-    - Healing, Unpoisoning, and Unparalyzing will clear the ToBeReportable list if
-       all are clear
-    - A mobile's Reportables list is now persisted
-       Added mobile.reportables (see srcdoc/uoscrobj.htm for details)
-       Added mobile.RemoveReportable( serial, gameclock )
-    - ".i_repdata" updated to display murderer flag, ToBeReportable list, and
-       Reportable list
-    - repsys.cfg: added a General section, with Criminal and Aggressor timeouts.
-
-Client Issues
-    - Added Ignition support
-    - Weather packets are now disabled for all non-1.26.* clients (including Ignition)
-    - pol.cfg: DisplayUnknownPackets=0/1 added
-    - pol.cfg: ClientEncryptionVersion can be set to 1.26.4 , 2.0.0 , or ignition
-
-Errors Resolved
-    - Fixed a crash bug in SystemFindObjectBySerial when the object wasn't found
-    - Possibly fixed the "skill window update" client crash bug
-    - hair and beards created on corpses will be marked invisible and non-movable
-    - Ghosts will no longer be able to pick up or equip items.
-    - Dye tub cursors will no longer be sent if a script cursor is active
-    - Script constructs of the following form will no longer alter chr.name:
-       var n := chr.name;
-       n := "hey";
-       - this applies to all other read/write members
-    - ECOMPILE_PATH_EM and ECOMPILE_PATH_INC env variables will no longer be necessary
-       - (See compiler section above)
-    - Corrected some problems with target cursors
-    - Corrupt .ECL files should be handled better now
-    - fixed a crash bug if global variables were used before declared
-
-Miscellaneous
-    - movecost.cfg can have separate 'Walking' and 'Running' sections, and can
-       range from 0-200% of carrying capacity.
-    - Packages with a higher version than another enabled package by the same name
-       will automatically override the lower versioned package.
-    - Misspelled dot-commands will no longer display, so no more embarrassment
-       in mixed company when I leave an 'o' out of '.objcount'
-
-
-05/23/2000 - POLC089
-==========
-    Script functions can be passed parameters by reference.
-      put 'byref' in the function declaration before the parameter name.
-      function foo( pa, byref pb, pc )
-          pa := 5;
-          pb := 6;
-          pc := 7;
-      endfunction
-      var a := 12;
-      var b := 13;
-      var c := 14;
-      foo(a,b,c);
-      // at this point a and c are unchanged, b is 6
-      Note - it's much more efficient to pass arrays by reference than
-        by value, because pass-by-reference doesn't have to copy them
-        (or destroy them when it's done)
-    Mobilerefs and Itemrefs can be compared for equality directly
-      - so you can write "if (me = you)" instead of "if (me.serial = you.serial)"
-      - as a result, mobilerefs and itemrefs can be used as keys in dictionaries.
-    Linux version - gump problems, text command, MT mode problems fixed
-    Added mobile.title_prefix, mobile.title_suffix, mobile.title_guild, mobile.title_race
-      - mobile.title_prefix is displayed before the name on the paperdoll
-      - mobile.title_suffix is displayed after the name on the paperdoll
-      - mobile.title_guild and mobile.title_race are not used (but are persisted)
-    Added mobile.GuildId : just a numeric guild identifier
-      (not sure if this is how it'll be done, but this lets me start on highlighting etc)
-    config/repsys.cfg will be required by the core
-    MoveMode can be specified in npcdesc.cfg.
-      - This is per-NPC -- changing npcdesc.cfg will not affect existing NPCs
-      - MoveMode is a string, containing one or more of the following:
-        - "L" - Moves on Land (this is the default)
-        - "S" - Moves on the Sea
-        - "A" - Moves in the Air
-      - Mobiles require MoveMode 'L' to move on land.
-      - Mobiles require MoveMode 'S' to move on the sea.
-      - MoveMode A doesn't have any effect yet.
-      - There is no script interface to this yet.
-      - an example - "MoveMode LS" would be appropriate on a Water Elemental.
-      - PCs are all MoveMode L, unless you edit pcs.txt...
-    Added combat.cfg:WarmodeInhibitsRegen (default false)
-    Linux version: corrected an error in CreateAccount that would empty the account file (!)
-    Corrected bug where Paperdoll would display warmode when you weren't
-    'IP' entries in servers.cfg can be hostnames.  A DNS lookup will be performed each time
-      a client connects to the loginserver.
-    CInt(), CDbl(), and Hex() will all operate on Substrings
-    Mobiles without MoveMode L might not be able to move on land.
-    Added account.GetProp(propname)
-    Added account.SetProp(propname,propval)
-    Added 'DefaultPrivs' and 'DefaultCmdLevel' properties to entries in data/accounts.txt
-      - there is no script interface.
-      - these are assigned to new characters for the account.
-    object method name searches are now case-insensitive
-        - so now you can write array.size() or array.Size()
-        - this is really so you can write account.GetProp etc
-    object method names can be the same as system or user functions
-    account.SetName should work now (account.SetAcctName has been renamed to this)
-    Added some more log output when message handlers crash
-    Added FindAccount( acctname )
-    Added ListAccounts()
-    Added account.GetCharacter( index : 1..5 ) -- for offline access to PCs
-    Fixed the "server full" bug when --ip-- and --lan-- were used in servers.cfg
-    ECOMPILE_PATH_EM and ECOMPILE_PATH_INC environment variables are now unnecessary
-      if they would have referred to the directory where the 'ecompile' executable is.
-    ecompile now creates '.dep' files so that changed .inc files will be searched for
-      on '-u' (update) runs. ('ecompile -u -r .')
-      If no .dep file exists for a .src file, no dependencies are assumed - so in order
-      for this to work properly, run 'ecompile -b -r .' to recompile everything once.
-    Added http::QueryIP(), returns IP address of connecting browser.
-    PrintTextAbove and PrintTextAbovePrivate will use the correct description,
-      rather than always using the text from tiledata.mul
-    Added account.DeleteCharacter( index : 1..5 )
-    Added account.EraseProp( propname : string )
-    cfgfile::GetConfigStringKeys and cfgfile::GetConfigIntKeys should work now.
-    Added CChr, CAsc, CChrZ, CAscZ
-    ecompile will optimize IF statements with constant test expressions
-    substring access with out-of-bound indices will return an error rather than aborting the script
-    start_script will return an error rather than aborting the calling script.
-    Fixed a problem involving dictionaries, persistence, and substrings.
-
-
-04/08/2000 - POLC088
-==========
-    Fixed a crash bug when an item was destroyed while equipped on an offline mobile
-    Fixed a crash bug when an error occurred reading properties for a new NPC
-    Added mobile.hp_regen_rate, mobile.mana_regen_rate, and mobile.stamina_regen_rate.
-      - a value of '100' adds one point every five seconds.
-      - a value of '50' adds one half point every five seconds.
-      - ...you see the pattern...
-      - applied fixes for negative regen rates, and regen rates for new characters.
-    Added the BASIC-style FOR-loop to escript.
-      for i := 1 to 5
-         print(i);
-      endfor
-      is the syntax.
-    Added the 'dictionary' complex datatype for scripts.
-        usage:
-           var dict := dictionary;
-           dict[ "green" ] := "blue";
-           dict[ "red" ] := "orange";
-           dict[ 12 ] := "yellow";
-           print( dict[ "green" ] );
-           print( dict[ "red" ] );
-        methods:
-           dictionary.size()        : number of elements
-           dictionary.erase( key )  : erase an element
-           dictionary.insert( key, value ) : insert an element
-             (equivalent of dictionary[key] := value;)
-           dictionary.exists( key ) : check for existence of a key
-           dictionary.keys()        : return an array of all keys
-
-        dictionaries can be persisted.
-        keys can be integers, reals or strings.
-        values can be anything.
-    Added cfgfile::GetConfigStringKeys(config_file)
-    Added cfgfile::GetConfigIntKeys(config_file)
-    Packages can contain a 'www' directory.
-      (use URLs like "http://127.0.0.1:8080/pkg/saver/")
-    www directories and subdirectories will be searched for index.ecl, then
-      index htm, if no page is specified.
-    Added item.invisible; only applies to items in the ground, and the same
-      deal with moving "out of range" after enabling the 'seeinvisitems' priv applies.
-    run_script_to_completion will return the 'return value' of the script it runs
-      (the return value is what the 'program' section returns)
-      it will return an error if the script does not exist.
-    Fixed bugs in gump handling
-    Fixed bug in GetWorldHeight (kept dungeon teleporters from working)
-
-03/05/2000 - POLC087
-==========
-    Removed annoying hit-script debug output
-    Added logon scripts, logoff scripts, reconnect scripts.
-    Added delayed logout (see docs/logonoff.txt)
-     - at a minimum, you will need scripts/misc/logofftest.* for this
-    Line-of-sight will succeed to items in your backpack.
-    Added the 'losany' privilege for letting you ignore LOS.
-    Multis will be checked in Line-of-Sight tests
-    PCs can now walk through items they can move.  Hopefully this means if
-      you're a GM and the client wants to let you walk through something,
-      the server will let you.
-    Added character.enabled( setting ) to allow scripts to check enabled settings
-    Added the 'ignoredoors' privilege to let you walk through doors if your
-      client files will allow it (requires a modified VERDATA.MUL)
-    config/cmds.cfg added - specifies cmdlevel names and textcmd directories.
-    character.setcmdlevel( cmdlevelname ) added - set cmdlevel by name
-    character.cmdlevelstr added - text name of the cmdlevel
-    textcmds can be specified in packages; just make a textcmd/gm etc directory
-     - these are only scanned at startup, so if the directory doesn't exist then,
-       it won't be searched until restart.
-    character.poisoned added - just makes your health bar green or not.
-     - this is not saved with world state.
-    Added a console keypress interface - see config/console.cfg
-    Fixed house-walking bug on restart
-    Added os::unload_scripts(scriptname)  -- see os.em
-    Added os::set_script_option(optnum,optval)  -- see os.em
-    Added uo::Shutdown()
-    Added character.ip (returns an empty string if no client connected)
-    Added a facility for banning logins by IP.  You'll need config/bannedips.cfg
-    MoveItemToLocation and MoveItemToContainer will check the 'moveany' setting of
-      the script controller.
-    EquipItem will check item movability
-    Server should no longer crash if you hit Ctrl-C while packages are loading
-    Added character.gold member
-    Added character.spendgold( amount ) method - spends nothing and returns error if
-      character doesn't have enough.  Does not recurse into locked containers.
-    Added uo::ConsumeSubstance( container, objtype, amount ) - consumes nothing and
-      returns error if container doesn't have enough. Does not recurse into locked containers.
-    MoveItemToContainer will no longer allow a container to be moved into itself,
-      or into a subcontainer in itself.
-    Automatic skill advancement when skill is below 10 will only occur
-      if you had some chance of success
-    Fixed some movement errors; it should be possible to walk into caves now.
-     - dropping things on the ground in caves probably doesn't work yet.
-    character.gender is now read/write
-    Items being dragged will be moved back into the backpack when a character dies
-     (so they'll be moved to the corpse or kept based on newbie status etc)
-
-02/01/2000 - POLC086
-==========
-    Inactivity timeout will not occur to those with cmdlevel > 0
-    Inactivity timeout will not occur until a character is chosen or created
-    "InactivityWarningTimeout" and "InactivityDisconnectTimeout" in pol.cfg configure
-      the inactivity timeout in minutes.  Set either to 0 to disable.
-    pol.cfg will be checked for changes every 30 seconds.  Settings that can be changed
-      without restarting will be re-read.
-    Added map checking to correct LOS issues in dungeons.  (pol.cfg:ExpLosChecksMap=1/0)
-      - currently inhibits LOS across bodies of water, which may be bad.
-    Packet formats changed to match latest client
-      (skill locking stuff is ignored)
-    uo::SendSkillWindow( towhom, forwhom ) added.  A script could send you skills for
-      someone else, if it wanted; you'd get spurious "skill value changed" notifications,
-      but that's your choice.
-    scripts/misc/skillwin.ecl will be run on "Skill Window" (Alt-K) requests if present.
-    MoveItemToLocation takes a 5th parameter, 'flags'
-       - instead of adding MOVEITEM_FORCELOCATION to the z parameter, pass it here
-       - pass MOVEITEM_NORMAL or 0 for normal z-corrected movement
-       - for now, I'm making the 'flags' parameter mandatory, as all existing scripts
-         need to be changed.  Later I'll make flags default to 0.
-    Added EVID_DOUBLECLICKED event, sent when an NPC is doubleclicked
-      This event must be explicitly enabled with EnableEvents().
-    scripts/misc/skilladv.ecl will be run when a visible skill change happens
-      - parameters are (who, skillid)
-      - this is called for PCs and NPCs.
-    default 'facing' prop added to itemdesc.cfg
-    EquipTest scripts added - scripts/misc/equiptest and all package equiptest scripts
-      will be called to determine if an item can be equipped.
-    The 'mount' layer (25) can now be equipped.
-      - lots of issues are left yet - combat effects, what happens when you die, and so on.
-    pol.cfg:MinCmdlevelToLogin can specify the minimum cmdlevel allowed to log in.
-        (So you can set your server to GM-only access temporarily or whatever)
-    Objtype 0xF021 is now the 'mount' object type.
-        Add the following entry to itemdesc.cfg:
-            Item 0xF021
-            {
-                name    mount
-                graphic 0x3EA2
-            }
-        Graphic 0x3EA2 is a horse.  0x3E9F to 0x3EA6 will use other mount types.
-    Added uo::OpenPaperdoll( towhom, forwhom ).  Sends the paperdoll window.
-    scripts/misc/dblclickself.ecl will be executed when you doubleclick yourself,
-      if it exists.  The core will still handle "Open Paperdoll" macro requests
-      internally.  The basic doubleclick-self script would look like this:
-            use uo;
-
-            program dblclickself( me )
-                OpenPaperdoll( me, me );
-            endprogram
-    Weapons can specify MountedAnim in itemdesc.cfg.
-    config/animxlate.cfg specifies animation translations for actions while on
-      a mount.  Most weapons shouldn't need MountedAnim entries if this is
-      populated correctly. (thanks to Myrathi for filling in animxlate.cfg)
-    Removed messages when skillwin.ecl and skilladv.ecl don't exist
-    Fixed a crash bug if you tried to spend gold with no backpack.
-    The game clock will be paused during world save.  This should eliminate CPU
-      usage spikes afterwards.
-    Script compiler takes two new parameters:
-        -b : keep building other scripts after errors are encountered
-        -u : only compile updated scripts (.src newer than .ecl)
-    Script compiler will warn for locals with same name as globals
-      (only if -w 'enable warnings' option is passed)
-    Crypto Keys updated for client 1.26.4
-
-
-10/28/1999 - POLC085
-==========
-    Fixed a bug where dragging part of a stack from the ground would
-      misplace the remainder.
-    Items that are 'SaveOnExit 0' and in a container will no longer be saved.
-
-10/25/1999 - POLC084
-==========
-    script compiler: '\' will function as an escape character in strings
-      - \n and \t are defined as special characters
-    script compiler: *.hsr files are ASP-like source pages
-     (see files in the experimental files section for examples)
-    added http::WriteHtmlRaw(str) for .hsr/.asp pages
-    script scheduler uses a priority divider now; will be testing to see
-      if this can help with lag in some instances
-    polcore().set_priority_divide( newvalue ) added
-    polcore().priority_divide (read-only)
-    script compiler will generate a wordlist file if '-W' option is passed.
-    added mobile.criminal property
-    when loading, 1 dot will print per 1000 objects loaded.
-    Fixed a bug in array.insert(index,value) where it was impossible
-      to insert at the end of an array, or into an empty array.
-    Added array.append(value), array.reverse(), and array.sort() methods
-    Inactivity timer added: warning after 4 minutes, disconnect after 5 mins
-    MaxCallDepth for scripts can be specified in pol.cfg (default 100)
-!!  Decreased system load time.  Please BACK UP your datafiles!
-    IgnoreLoadErrors=1 in pol.cfg will ignore (most) load errors and start server
-    Script listfiles generated with -l with always contain source and
-      file/line information, even if -i is not specified
-      (it's best not to use -i, in fact -- less overhead)
-    Added polcore().script_profiles property:
-      returns array of { name, instr, invocations, instr_per_invoc, instr_percent }
-      - same data as output by .log_profile
-    Added polcore().clear_script_profile_counters() method.
-    array.insert() functions properly again
-    Overhauled the client item manipulation system (getting,dropping,equipping items):
-      - LOS is now checked when picking up an item
-      - LOS is checked when dropping an item
-      - range must be <= 2 to pick up an item
-      - drop-item range increased to 2
-      - picked up items are marked 'inuse'
-        Note this causes some easy resource-use exploits until scripts mark
-        items in-use.  But that's better than crashing.
-    Added uo::ReserveItem(item) and uo::ReleaseItem(item)
-      - these mark an item as inuse for this script only to use.
-      - all reserved items will be released on script exit if ReleaseItem is not called.
-    'inuse' items have special rules:
-      - they cannot be picked up (not even part of a stack)
-      - they cannot be added to, if they're a stack.
-      - they cannot be used as reagents
-      - they cannot be used as projectiles
-      - they cannot be spent at a vendor
-      - they cannot be sold to a vendor
-      - they will not decay
-      - if a stack, they cannot be added to if a like item is bought at a vendor
-      - The following functions will not operate on inuse items, unless the calling
-        script reserved the item for its use with ReserveItem
-          - DestroyItem
-          - SubtractAmount
-          - MoveItem
-          - MoveItemToContainer
-          - EquipItem
-        This means most scripts that have to check for materials twice (typically
-        before and after doing sound effects and delays) can just reserve the items
-        before checking for materials.
-
-      I'm considering whether inuse items should be doubleclickable, and
-        whether or not the doubleclick script should start out with the
-        item already reserved.
-     MoveCharacterToLocation and login will generate EVID_ENTEREDAREA events
-     Ghosts will no longer use nor require stamina for movement
-
-
-10/07/1999 - POLC083
-==========
-    Lots of items down there.  The highlights:
-        - secure trading (but see important note about enabling)
-        - stamina costs for movement
-
-    Startup output -- error messages, etc will be logged to 'start.log'.
-    Disabled the following internal text commands, because a replacement
-      script exists, or they're rarely used and a script could be written.
-      (They still exist; renamed to i_[cmd] in case you really need them)
-        .ident
-        .setusescript
-    Added polcore() members:
-        log_profile( clear )
-    text command script names can now contain underscores
-    New config file - config/servspecopt.cfg, for Server Specific Options
-       - DefaultDoubleclickRange, which is used if DoubleclickRange isn't
-         specified for an objtype in itemdesc.cfg
-       The default doubleclick range (if not specified there) is now 2
-    GMs should still see ghosts after they drop out of warmode
-    added mobile.enable( privilege ), mobile.disable( privilege )
-       - for enabling/disabling privileges
-    Added functions to the NPC module:
-        WalkTowardLocation( x, y );
-        WalkAwayFromLocation( x, y );
-        RunTowardLocation( x, y );
-        RunAwayFromLocation( x, y );
-        TurnTowardLocation( x, y );
-        TurnAwayFromLocation( x, y );
-    polcore().itemcount will now decrease
-    Added 'ipmatch' property to servers.cfg, so localhost and LAN servers
-      can be made to only show up if you connect from localhost or the lan.
-    Added the 'all' privilege which effectively gives you..all the privileges!
-    Added the 'dblclickany' privilege which lets you doubleclick any
-      doubleclickable object regardless of range
-    itemdesc.cfg has a 'Weight' entry which can specify whole weights
-      or fractional weights ("1/50" etc) in stones
-    Item weights will be tracked.  No limits or stamina effects yet.
-    added 'object.weight' member
-    Fixed an integrity problem if doors were on a zone boundary
-    Fixed a crash bug if a house component was destroyed before the house was.
-    Items will not decay on multis unless "DecayOnMultis 1" is set in itemdesc.cfg
-!       (Note this should be set for corpses in particular)
-    Gave boats some TLC: (some scripts+config files need updated to use this)
-       - corpses created on a boat will move with it.
-       - items dropped on the boat when a corpse decays will move with it
-       - the remainder of a stack half-removed from a deck will move with the boat
-       - NPCs created directly on boats will move with it
-       - added the rest of the boat definitions to config/boats.cfg
-       - walkon scripts will fire if the item's Z is 0 or 1-z below the walker
-          (specifically so that boat planks can have walkon scripts)
-       - massaged the data from client files so long boats don't have a hole in
-          the middle.
-       - fixed the "Deck is not empty" bug on boat destruction
-       - characters who log off on a boat will be moved when the boat moves
-       - added member 'boat.has_offline_mobiles'
-       - added method 'boat.move_offline_mobiles(x,y,z)' for moving the offline
-         mobiles carried by a ship somewhere.  This function is very trusting
-         regarding the coordinates you pass it. As long as they're within the
-         world bounds, it'll move the mobiles there.
-    "walkon" scripts have more parameters.  the full declaration:
-       program walkon( who, what, lastx, lasty, lastz )
-       the 'last' coordinates are the coordinates the walker is coming from.
-    MoveCharacterToLocation takes a 5th parameter, 'flags'
-       if MOVEMOB_FLAG_FORCELOCATION included, force z-location
-         (ignore any obstacles)
-    Added polcore().packages() - array of installed package names
-    Added polcore().compiledate - text string
-    Added polcore().compiletime - text string
-    Incorporated Beosil's latest crypto code to deal with the 21036-bytes bug
-    Fixed a bug with gump-dialog handling for dialogs with many textentry fields
-    Package start scripts will run under the Linux build
-    Added basics of secure trading:
-        Enabled if EnableSecureTrading=1 is set in pol.cfg.
-        Items can be added to the secure trade window
-        Items cannot be removed except through cancelling the trade
-        Items in the secure trade window can be singleclicked
-        Unlocked containers in your side of the trade window can be
-          doubleclicked, and will open for both trading parties
-        stacks currently cannot be added to.
-        If either party disconnects, trade will be cancelled.
-        Traded items which will not fit in your backpack will fall to your feet.
-        All secure trades will be cancelled before saving data or shutting down.
-!       This entry must be added to config/itemdesc.cfg:
-            Container 0xFF01
-            {
-                Name    SecureTradeContainer
-                graphic 0x1E5E
-                Gump    0x003C
-                MinX    0
-                MaxX    66
-                MinY    0
-                MaxY    33
-            }
-    Added servspecopt.cfg property: MovementUsesStamina=0/1
-        If this is set, you will need config/movecost.cfg
-        Note movement cost code is still being developed.
-    ecompile: option -l  (ell) will cause a listfile to be generated, which
-      contains the internal instructions in the compiled file.  In conjunction
-      with '-i' (include debug info) you may have a fighting chance at seeing
-      where your script corresponds to the instructions.  May be useful
-      for debugging or profiling, or for just being nosy.
-    Added runaway script detection.  RunawayScriptThreshold in pol.cfg specifies
-      how many instructions a script can execute without sleeping before being
-      reported as a runaway.  The default is 5000 instructions.  Reports will
-      be logged to log/script.log
-    spellbook weight will no longer include weight of contained scrolls
-    corrected an error in container-weight handling
-    added polcore().running_scripts
-    returns an array of structures { name, instr_cycles, consec_cycles, PC, call_depth, num_globals },
-      one element per running script.  See scripts/www/running_scripts.src
-    pol.cfg can specify WebServerPassword=username:password, to restrict access
-      If this is used, nothing can be accessed without the password.
-      A more flexible password scheme is in design.
-
-
-09/09/1999 - POLC082
-==========
-    Added 'hearghosts' privilege
-    Support added for UO client 1.26.1
-      - key constants are specified in a key file, so maybe next time
-        this won't require a rebuild.
-      - pol.cfg must have "Keyfile=crypto/v1_26_1.key"
-
-
-
-09/05/1999 - POLC081
-==========
-    Added cfgfile::LoadTusScpFile(basename) - loads TUS .SCP format files
-      so they can be accessed like a POL .cfg file
-      (not an importer - an importer will be built upon this)
-    New characters will start with clothing that matches what the new
-      client displays.
-    mobile.concealed can be set to anywhere between 0 and mobile.cmdlevel
-    mobile.concealed is now saved with game state
-    added array.erase( index ) - erases an element in an array
-    added array.size() - returns number of elements in an array
-    added array.shrink( nelems ) - erases all but the first 'nelems' elements
-    added array.insert( index, value ) - inserts an new element
-    NPC masters will be saved with game state
-    packages can contain npcdesc.cfg and ai scripts.. ".createnpc :pkg:npctype"
-    Encryption keys changed to support client 1.26b (Thanks Beosil!)
-    Added some code to get more information on a particular crash bug
-    Fixed an AV condition when equipping an NPC that isn't strong enough
-    ".integ_item" will write problem information to the logfile
-    a stack backtrace will be logged on assertion failure
-    Corrected an error in house destruction which could cause corruption
-    added os::events_waiting() - returns number of events in script's event queue
-    added direct stat modification:
-        mobile.setstr( newstrength )
-        mobile.setdex( newdexterity )
-        mobile.setint( newintelligence )
-
-08/28/1999 - POLC080
-==========
-    POL now supports the new UO Client (v 1.26)
-        startloc.cfg must be changed to list cities in a particular order.
-        (Yew, Minoc, Britain, Moonglow, Trinsic, Magincia, Jhelom, Skara Brae, Vesper)
-    Armor now has quality, hp, and maxhp.  This means Armor entries in
-      itemdesc.cfg must have a MaxHP entry!
-
-    Added polcore().version (79,80,81 etc)
-    Added polcore().verstr ("POL080", "POL080X1" etc)
-    POL version string will be written to log file on startup
-    Added CreateAccount( acctname, password, enabled )
-      - returns an accountref (see docs/objref/account.htm)
-    character.acct added
-    Account object created; gives the ability to ban,unban, disable, enable,
-      change the account name, and change the account password, from scripts.
-    Large shards will want to set UseNewStaticsFile=1 in pol.cfg.  This will
-      create files 'statics0.pol' and 'staidx0.pol', which are smaller versions
-      of statics0.mul and staidx0.mul.  These files are then loaded wholly into
-      memory for very fast access for walking height and LOS checks.
-      If this option is enabled, POL uses an additional 11 MB memory
-    NPC movement anchors can be set; call npc::SetAnchor() (see npc.em)
-      Movement anchors are only in effect when NPC isn't in warmode
-    ".unload" will now unload all scripts whos name contains the parameter
-      ".unload ai" will unload all scripts whos name contains 'ai', for example.
-    Fixed an access violation if a mobile died with a full backpack and
-      worn items.  (bug introduced in the 'newbie items' update)
-    Added weather effects, using static regions (regions/weather.cfg)
-    Armor will now take damage during combat
-    stackable weapons/armor in vendor inventories
-     (merchant.src must be changed to call CreateItemInInventory)
-    New priv/settings: seehidden, seeghosts
-    added character.setlightlevel( lightlevel, duration ) (mylight.src tests)
-      - sets personal light level for a period of time (duration in seconds)
-    DestroyMulti can destroy boats now (but use BoatFromItem..see destroyboat.src)
-    Fixed an object leak on house destruction
-    Paperdolls will only be opened for humans, ghosts, GMs, Lord British,
-      Lord Blackthorne, and Dupre
-    chrdeath.src has a second parameter, the character's ghost
-    Added chr.squelch(duration) - duration in seconds.  -1=forever, 0=off
-    added chr.squelched
-    "[invulnerable]", "[frozen]", and "[squelched]" tags will display
-      over affected mobiles when singleclicked.
-    Added SetRegionWeatherLevel(regionname,type,severity,aux,lightoverride)
-      - test/setweather.src tests
-
-08/16/1999 - POLC079
-==========
-    items on others' paperdolls within visual ranged can be singleclicked
-    If an equipped item can't be equipped on load, it'll be stuffed into the backpack
-      If the backpack is full, the server will refuse to start.
-    More error messages will print hex serial numbers now
-    It will be impossible to assign a blank name to a mobile, or a name
-      that begins with whitespace (this traps all-whitespace names)
-    All the houses should be creatable now.
-    Made a change that seems to help lag when lots of mobiles are on-screen at once
-    http::WriteHtml calls are now handled more efficiently
-    corrected anims for nonhumans using projectile weapons
-    'StrRequired' (Strength Requirement to Equip Item) can be specified in itemdesc.cfg
-    item.newbie added; 'newbie' items will stay with the ghost.
-    'Newbie' can be specified in itemdesc.cfg.  This is the default 'newbie' flag
-      for items of this type.  Typically set for spellbooks.
-      - newbie items stay with the ghost
-      - newbie stacks split turn into two newbie stacks
-      - a non-newbie item added to a newbie stack contaminates the newbie stack,
-        making it non-newbie
-      - the various CreateInContainer functions will not add to an existing newbie stack
-      - vendors won't buy newbie items
-    'BlocksCastingIfInHand' can be specified in itemdesc.cfg.  Both hands will be checked
-    for items after reagents are consumed but before mana is consumed
-    RequireSpellbooks can be specified in pol.cfg; default is 1
-      - Spellbooks, with scrolls, are required in order to cast spells if this is set.
-
-08/10/1999 - POLC078
-==========
-    added character.acctname
-    added weapon.dmg_mod (-32768 to +32767, but be gentle :)
-    added armor.ar_mod
-      Note if you change ar_mod on equipped armor, it won't reflect in your displayed
-      AR until you take the armor off and put it back on, but the change will
-      increase or decrease your protection immediately.
-    added armor.ar  (adjusted by ar_mod)
-    added armor.ar_base (unadjusted)
-    added nocast regions (will work for spells and scrolls, if they use StartSpellEffect)
-    SaveWorldState() will return an error if an exception occurs during world save
-      (instead of aborting the calling script)
-    added weapon.maxhp_mod
-    Scaled back optimizations so that crash dumps can give more information
-    Included more debug checks in the release version, to search for odd problems
-    corrected an out-of-bounds condition for mobiles near the edges of the world
-    Fixed a bug where boats could go off one side of the world a couple of tiles.
-    It is now impossible to use a skill or item during a casting delay
-    Houses can sit on slightly uneven ground; the z-coord can differ by up to 2
-    added item.sellprice; used instead of 'VendorSellsFor' if nonzero.
-      sellprice on a stack is the price for one unit
-    TwoHanded (0/1) can be set in itemdesc.cfg for weapons
-    Started on z-coord problems, but the map seems to sit above some statics *sigh*
-    Target() will accept TGTOPT_HARMFUL, TGTOPT_NEUTRAL, and TGT_HELPFUL in its
-     'options' parameter.  Harmful actions mark you criminal or aggressor according
-     to normal flagging rules.  Helpful actions on a criminal will mark you a criminal.
-     The criminal query window will pop up when appropriate if enabled on the client.
-    NPCs will get "enteredarea" and "leftarea" events when they move
-    alignment (good, neutral, evil) can be specified in npcdesc.cfg
-    actions for/against yourself or your pets will not affect criminal flags, etc
-    harmful actions against good-alignment NPCs will mark you criminal
-    helpful actions against evil-alignment NPCs will mark you criminal
-    internal command target cursors shouldn't interfere with script target cursors
-    Scripts have a 'controller' attached.  This is set to the spellcaster, or the
-      character doubleclicking the item, etc.  ApplyDamage and ApplyRawDamage now
-      send an EVID_DAMAGED event using the controller as ev.source
-    Added uo::SetScriptController(who) - should be used to set controllers for
-      traps and such
-    EVID_ENGAGED events will be sent to NPCs targetted with hostile actions
-    justice zone "entering" and "leaving" messages won't print if switching between
-      zones where the messages are the same
-    If 'enabled.pkg' exists in a package directory, the package will be enabled
-      regardless of Enabled=1/0 in pkg.cfg.  If 'disabled.pkg' exists, both these
-      will be ignored, and the package will be disabled.
-    It's now possible to set a mobile's colors above 0xfff
-    added mobile.cmdlevel; read-write, set to 0-5 (0-player, 5=test)
-
-07/27/1999 - POLC077
-==========
-    weapon skills, tactics, and parry will cause stat gain from combat
-      - note this is from ANY combat - GMs on rabbits, whatever.
-    transmission buffer size increased to handle huge gump dialogs
-    save time improved; tests show over 2x faster on Win98, almost 2x faster on WinNT
-    Fixed the "you are already holding an item" bug on disconnect while dragging an item
-    Unicode speech is now handled (ASCII character set only)
-    Tooltip text can be specified in itemdesc.cfg
-    'Name' can be specified as 'ObjtypeName' in itemdesc.cfg.  'ObjtypeName' is
-      preferred. 'Name' is deprecated, and will not be supported after core 079
-    Entries in pol.log will be timestamped
-    Added logging for login/logout (with IP), and incorrect password presentation.
-    new polcore() variables:
-        uptime:  system uptime in seconds
-        sysload: system load, 0-100
-    Limited the crash stack backtrace to 100 frames
-    LogSysload=1 in pol.cfg will cause sysload to be logged each minute
-    Corrected an error which could cause CPU usage to rise to 100% until shutdown
-    Removed dump of message type 0x69
-    New internal text command: "log_profile"  logs script profile data
-    New internal text command: "log_profile_clear"  logs script profile data, clears counters
-    new polcore() variables: bytes_sent, bytes_received
-    SendEvent now functions as advertised
-    new members for multis: multi.items and multi.mobiles
-      - arrays of supported items/mobiles
-    Names of scripts that cause access violations will now be logged.
-    Fixed an AV condition on skills with no script defined
-    Target() takes an 'options' parameter.  This should be either TGTOPT_CHECK_LOS or
-      TGTOPT_NOCHECK_LOS.  The default is TGTOPT_CHECK_LOS.  Some scripts currently
-      call Target( someone, "" ) -- this should be changed to Target( someone ) ASAP.
-      For now, this is treated the same as TGTOPT_CHECK_LOS.
-    Corrected another cause of client i/o thread infinite loops.
-    Autodefense will target an attackable opponent or hostile, rather than
-      exclusively trying to hit your opponent.
-    Added the beginnings of aggressor and criminal flagging.
-      Supported:
-        - criminal flagging (2 minutes) for attacking an innocent
-        - aggressor flagging (2 minutes) for attacking first
-        - extension of these timeouts for continued behavior
-        - pets ordered to attack will affect their owner's flags
-        - attacking a pet is like attacking the owner, as far as flagging is concerned
-        - name coloring
-      Not supported:
-        - any repercussions whatsoever for being a criminal
-            (except that others can attack you without becoming criminal)
-        - any repercussions whatsoever for being an aggressor
-            (except that those you are an aggressor to can attack you freely)
-    Corrected an error in the task scheduler, discovered while coding aggressor flagging.
-      This may also affect autodefense.
-    Ships will no longer be able to sail off the map
-
-07/06/1999 - POL076
-==========
-    data/accounts.txt will be re-read after it has been modified (must remain
-        unchanged for 10-40 seconds).
-    basic::pack( expr ) and basic::unpack( string ) added.
-    Config/Data file parser modified to handle arbitrarily long properties
-      (mostly for very large stored arrays)
-    Trailing spaces in config/data files will be trimmed.
-    arrays will display their contents when printed, instead of "<objarray>"
-    Weapons will have a 1% chance (was 25%) per swing of losing 1 HP
-    Temporary kludge for combat skill gain:
-        On each swing:
-            attacker gets 30 raw skill points in his weapon skill
-            attacker gets 15 raw skill points in tactics
-            defender gets 15 raw skill points in tactics
-            defender gets 30 points in parry, if a shield is equipped
-    GetObjProperty/SetObjProperty etc can store arrays of integers, strings, reals, and arrays
-    arrays can be tested for equality.
-    Fixed two memory leaks in the script compiler
-    Skill points will always be awarded for skills with <= 10.0 value
-    items which are 'SaveOnExit 0' will use a different serial number pool,
-      from 0x4F000000 to 0x4FFFFFFF
-    bugfix: fixed some problems with LOS checks on doubleclick (and others)
-            if you stood in the same place as, say, an iron ingot, you couldn't
-            open a container in your backpack; this has been fixed.
-    ecompile can take '-r directory' as a parameter, will compile .src files in
-        directory and all subdirectories
-    bugfix: 'npctemplate' custom prop on corpses will now work.
-    Adding support for packages: see also polcore/docs/packages.txt for detail.:
-        - 'item.usescript' can specify ':pkgname:script' format scriptnames
-        - PKG.CFG can specify 'version', 'requires pkgname version', and 'conflicts pkgname'
-        - AppendConfigFileElem and UnloadConfigFile will accept ":pkgname:cfgfile" syntax
-        - Anywhere you can specify 'script' that would specify a script in a package,
-          you can now specify ':pkgname:script' to reference a script in another package
-        - Spells can be put in packages (put a spells.cfg in package directory)
-        - Packages can contain 'skills.cfg'
-        - ReadConfigFile( "::itemdesc" ) will access data in main itemdesc.cfg as well
-          as all package itemdesc.cfg files.  Same for "::skills.cfg" and "::spells.cfg"
-        - ReadConfigFile handles new formats to specify a config file in another package
-
-05/31/1999 - POL075
-==========
-    DoubleclickRange can be specified in itemdesc.cfg
-      (archery buttes will be broken until their configuration uses this)
-    Linux build: Ctrl-C and 'kill [pid]' are caught for save/shutdown
-    Added uo::polcore() - returns an object that can be used to query system data
-       - itemcount
-       - mobilecount
-    regions/regions.cfg defines justice regions - only enter/leave messages are printed.
-    regions/regions.cfg defines music regions
-    ListMobilesInLineOfSight will not return mobile passed as the center
-    Linux build: fixed bug which was causing 100% cpu usage always
-    Startup output for start.src will be shorter
-    Line of sight to items changed: will be from head of mobile to center of item
-    Doubleclick limits added: must be range <= 1, and have LOS.
-    ~IN[spellnum] can be used to cast spells
-    Spells above the standard 64 can be defined (use ~IN to invoke)
-    NPCs have a 'setmaster(master)' method, which right now only allows renaming
-    Events sent to an NPC will be discarded if more than 30 events are currently queued
-    web server can now serve .gif, .jpg, and .jpeg files
-    scripts: "var" can be used instead of "global" and "local"
-    scripts: object methods are here - doors will have them first.
-    scripts: "array(2, 54)" syntax is deprecated in favor of "{ 2, 54 }"
-    scripts: C-style " /*   */ " comments will function again
-    scripts: old, non-"fully bracketed" syntax will no longer compile.
-    Custom properties prefixed with '#' will not be saved with game state.
-    SendDialogGump now returns an 'integer hash' with the results.
-        var x := SendDialogGump(...);
-        x[0] is the exit-button pressed
-        x[button id] returns 1 if that button was pressed/selected
-        x[text entry id] returns the string contents of a textentry field
-        x.keys returns an array of all the keys
-        See scripts/textcmd/test/exgump.*
-    Added GetWorldHeight(x,y) - returns lowest point above map and lowest statics
-        (It's supposed to, anyway.  It actually returns the point atop the
-         highest static, but it works for most dungeon teleporters, so I'm leaving
-         it broken for a while.)
-    internal changes to resource region stuff; more testing before X3
-    mid() is now unavailable (has always been broken)
-    ghosts will speak ghostspeech (no hooks for spirit speak yet)
-    doors are scriptable; door.src autocloses, and plays sound effects.
-      - door objects have an 'isopen' property
-      - door objects have 'open()', 'close()', and 'toggle()' methods
-      - 'isopen': reports if the door is open or closed
-      - 'open()': opens the door  ("door.open();" in script would open it)
-      - same for  'close()' and 'toggle()' - they change the state of the door.
-      Not sure how well this interface will work, or how intuitive it'll be.
-    bugfix: SetObjProperty etc now work with Multis
-    SystemFindObjectBySerial will find multis
-
-05/18/1999 - POL074
-==========
-    Spawner rewritten; basic spawn limiting is in place.
-    EVID_ITEM_GIVEN event added for items dragged onto NPCs
-    Wrestling will no longer do 0 damage after being used a few times
-    item colors set by scripts will be limited to 0-0xFFF
-    The following types of scripts run at priority 100, instead of critical:
-      - spells
-      - item use
-      - walk on
-      - skill use
-      - text commands
-    The following types of scripts still run critical:
-      - character creation
-    DestroyMulti will destroy houses, moving their contents to the ground.
-    NPCs will have a ".npctemplate" member
-    "CacheInteractiveScripts" in pol.cfg forces disk reloads on use for some scripts:
-      - text commands
-      - item use
-      - walk on
-      - character creation
-      - www pages
-      - spells
-      - skill use
-    Added uo::StartSpellEffect(who,spellid): start the spell script
-    Added uo::GetSpellDifficulty(spellid)
-    Added uo::SpeakPowerWords(who,spellid)
-    Corrected an error where config file/elem variables couldn't be passed to functions
-    spawns.cfg can take 'rect' entries
-    combat.cfg has a param for displaying a message on successful parry.
-    Multithread mode is stable.
-    CDbl(val) added - convert to double
-    ".setskill" now takes base-values instead of raw-values, so
-      ".setskill 25 60" will set Magery to 60.  It'll actually set it to
-      59.9, because of a base->raw conversion bug, so don't panic.
-    Fixed a resource leak if you set 'decayat' on an object...don't ask.
-    More stuff for houses:
-      - Empty space is required between houses:
-        - 2 tiles east-west
-        - 6 tiles north-south
-      - Houses cannot be built on top of mobiles or items.
-      - Houses must sit on level ground.
-      - Houses cannot sit on trees, rocks etc, or have them directly adjacent to it.
-      - Note, it's still possible to create houses in annoying places.. *sigh*
-    'cprop' and 'strprop' entries in itemdesc.cfg will be added to new items
-    Internal clock granularity is now 1/100th second.
-    CreateMultiAtLocation will function for houses, and will create doors and signs.
-      - house.components will be an array of all these items
-      - each component will have a 'house_serial' custom prop with the serial #
-        of the house.
-
-05/09/1999 - POL073
-==========
-    Rudimentary web server added.  Set WebServer=1, WebServerPort=8080 in pol.cfg,
-      then go to http://localhost:8080.  The default website only has a
-      "show online characters" page, but that's just the beginning!
-      This only works in multithread mode, which is unstable on exit,
-        so this is really only for playing around at this point.
-      Default operations allows access only from localhost.
-    Weapon animations can be set - 'Anim' in wepndesc.cfg
-    Weapon sounds can be set - 'HitSound', 'MissSound' in wepndesc.cfg
-    NPCs will no longer step into the same tile as another NPC.
-    WebServerLocalOnly (defaults to 1) in pol.cfg will restrict web server access
-    "AttackHitSound" and "AttackMissSound" can be specified in npcdesc.cfg
-      - Note that to do this, you have to have an AttackSpeed entry too
-    Added uo::SendTextEntryGump() - used for those input box thingies
-      - see uo.em for parameters and constants
-      - Added ".testtextentry" to play with it
-      - numerical mode isn't tested yet, but will for sure return result as a string
-    Added uo::SendDialogGump( who, layout, textlines ) - see uo.em and testgump.src
-       We need more 'testgump' scripts for radio buttons etc
-    RandomInt() will return an error if its parameter is <= 0
-    Performance enhancements to PC movement with lots of ingame items
-    The following functions will automatically convert a 'name' to an 'objtype'
-      (they automatically call GetObjtypeByName if a string is passed)
-      - CreateItemAtLocation
-      - AddMenuItem
-      - ListItemsNearLocationOfType
-      - CreateItemInContainer
-      - CreateRootItemInStorageArea
-      - FindObjtypeInContainer
-      - CreateItemInBackpack
-    ".createstack" can take an objname
-    "Movable" property added to itemdesc.cfg - overrides client datafiles
-    Item descriptions in merchant windows will no longer include redundant amounts
-    "Desc" property in itemdesc.cfg will now be used
-    "MOVEITEM_FORCELOCATION" can be added to the z-coordinate in
-      MoveItemToLocation to force acceptance of the position.
-    ControlScript in itemdesc.cfg is now functional
-    CreateScript in itemdesc.cfg fill now run for:
-      - CreateItemAtLocation
-      - CreateItemInContainer
-      - CreateItemInBackpack
-      If the CreateScript succeeds (returns a 'true' value, or nothing) creation
-      will be allowed; if it returns a 'false' value, creation will fail.
-    DestroyItem will consult the DestroyScript, if any
-    Decay will consult DestroyScript, if any.  Decay counter is not reset;
-      checks will continue on each decay sweep.
-    os::parameter() is gone
-    Added os::set_priority( priority ) - set script priority from 1 to 255
-      - higher priority scripts will get more CPU time
-      - in CS terms, priority is just quanta
-
-
-
-04/29/1999 - POL072 (ouch, too many changes! sorry!)
-==========
-    dot-commands will no longer unhide the character issuing them
-    'stealthsteps' member added to mobiles
-    GameMasters and ghosts can walk through doors
-      GM is defined as graphic == 0x3db, not humans wearing a GM robe
-    NPC stats in NPCDESC will be specified in die-roll, base values
-     (to come: hp, mana, stamina default to associated attributes)
-    'Unhides' property added to skills.cfg, mainly for stealth
-
-    Fixed an AV condition if a stat window was opened on a just-dead NPC
-    Skill values in NPCDESC.CFG are now 'base' values, dieroll-form
-    Skill values in NPCDESC.CFG can be named using Skill Name (skills.cfg)
-      rather than skillid (for example, Wrestling instead of Skill43)
-    Skill values in PCS.TXT and NPCS.TXT will use skill names (and raw values)
-    'concealed' flag added to mobiles.  Similar to 'hidden', but is only
-      cleared explicitly (who.concealed := 0).  Only effective against
-      mobiles below your command level - so Admins can always see GMs, etc.
-      The following functions will _always_ exclude 'concealed' mobiles:
-        ListMobilesNearLocationEx
-        ListMobilesNearLocation
-        ListMobilesInLineOfSight
-        ListHostiles
-        Note that these affect spells cast by higher-level beings.
-    Speech code modified to accomodate 'concealed' flag.  A side effect is
-      that speech by non-warmode ghosts should no longer be seen by non-ghosts
-    Some events will not be generated for hidden and concealed mobiles:
-       - speech
-       - entered area, left area
-       - opponent moved
-    'frozen' and 'paralyzed' members added to mobiles
-      - paralyzed is cleared when ApplyRawDamage is called
-      - paralyzed and frozen are cleared upon death and resurrection
-      - either block:
-        - walking and running (MoveCharacter() functions will still work)
-        - casting
-        - skill use
-        - item doubleclick (except paperdoll)
-        - targetting of any kind
-    '.freeze' and '.thaw' GM commands added
-
-    armor.cfg moved to armrdesc.cfg
-      format merged with itemdesc.cfg
-          ".armor" is gone = ".create" can do it now.
-
-    weapon.cfg moved to wepndesc.cfg
-      format merged with itemdesc.cfg
-      ripples to:
-          equipfromtemplate
-          ".weapon" is gone - ".create" should be able to do it now
-      Instead of WeaponTemplate names, weapons can just use different objtypes
-        to have different capabilities with the same graphic
-      This opens the door for magic weapons etc.
-
-    Experimental multithreading mode: Multithread=1 in pol.cfg
-      It's pretty unstable, typically crashing on exit.  Singlethread (default)
-      mode is unaffected.
-    Config properties can be accessed with "." syntax, rather than using
-      "GetConfigInt", "GetConfigString" etc.  Types (integer, string, real)
-      determined automatically.
-    Config files can be searched for elements with "[]" syntax:
-      config[6] searches by integer key, config["WarAxe"] searches by string
-    SendSellWindow() sort of works; any merchant will buy and item with a
-      nonzero "VendorBuysFor" price in itemdesc.cfg.
-!!  Be sure to recompile merchant.src
-    MoveToward etc will move around simple obstacles



From muaddiblsd at berlios.de  Tue Sep 20 05:56:08 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Tue, 20 Sep 2005 05:56:08 +0200
Subject: [Poldistro-svn] r165 - in trunk/096/pkg/commands: . include
Message-ID: <200509200356.j8K3u8aP030846@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-20 05:56:04 +0200 (Tue, 20 Sep 2005)
New Revision: 165

Added:
   trunk/096/pkg/commands/include/
   trunk/096/pkg/commands/include/go-add.inc
   trunk/096/pkg/commands/include/go-edit.inc
   trunk/096/pkg/commands/include/go-gumps.inc
   trunk/096/pkg/commands/include/go-template.inc
Log:
Include directory added for the storing of Include files for the commands package. Initial includes added for the new .go command.

Added: trunk/096/pkg/commands/include/go-add.inc
===================================================================
--- trunk/096/pkg/commands/include/go-add.inc	2005-09-19 03:50:28 UTC (rev 164)
+++ trunk/096/pkg/commands/include/go-add.inc	2005-09-20 03:56:04 UTC (rev 165)
@@ -0,0 +1,241 @@
+function Go_AddPrivateLocation(who)
+
+        SendSysMessage(who, "Click where you want the new personal Go Location to go to.");
+        var targ := TargetCoordinates(who);
+
+        if (!targ)
+                SendSysMessage(who, "Cancelled");
+                return;
+        endif
+
+        var name := RequestInput(who, who.backpack, "What do you want to call this go location?");
+
+        if ( !name )
+                SendSysMessage(who, "Cancelled");
+                return;
+        endif
+
+        go_prop := go_elem.GetProp(who.acctname);
+        if ( go_prop.exists(lower(name)) )
+                SendSysMessage(who, "You already have a go location named ["+name+"]");
+                return;
+        endif
+
+        Go_SetLocation(who.acctname, who, name, targ.realm, targ.x, targ.y, targ.z);
+
+endfunction
+
+function Go_AddPublicLocation(who)
+
+        SendSysMessage(who, "Click where you want the new public Go Location to go to.");
+        var targ := TargetCoordinates(who);
+
+        if (!targ)
+                SendSysMessage(who, "Cancelled");
+                return;
+        endif
+
+        var name := RequestInput(who, who.backpack, "What do you want to call this go location?");
+
+        if ( !name )
+                SendSysMessage(who, "Cancelled");
+                return;
+        endif
+
+        go_prop_base := go_elem.GetProp("base_Distro");
+        if ( go_prop_base.exists(lower(name)) )
+                SendSysMessage(who, "You already have a go location named ["+name+"]");
+                return;
+        endif
+
+        Go_SetLocation("base_Distro", who, name, targ.realm, targ.x, targ.y, targ.z);
+
+endfunction
+
+function Go_CopyPublicLocation(who)
+
+        var gump := Go_RetrieveGump("CopyIndex", "base_Distro");
+        num_keys := go_keys_base.size();
+        if  ( !gump )
+                SendSysMessage(who, "Building go public copy gump...");
+                gump := Go_PublicCopyGump();
+                Go_SaveGump("CopyIndex", gump, "base_Distro");
+        endif
+
+        var input := GFSendGump(who, gump);
+        input := input[0];
+
+        if(input)
+                var send_Location := 0;
+                send_Location := go_prop_base[lower(go_keys_base[input])];
+                if ( send_Location )
+                        go_prop_base := go_elem.GetProp("base_Distro");
+                        if ( go_prop.exists(lower(send_Location.Name)) )
+                                SendSysMessage(who, "You already have a go location named ["+send_Location.Name+"]");
+                                return;
+                        endif
+                        SendSysMessage(who, "Copying [" + send_Location.Name + "] to your personal menu.");
+                        Go_SetLocation(who.acctname, who, send_Location.Name, send_Location.Realm, send_Location.X, send_Location.Y, send_Location.Z);
+                        return;
+                else
+                        SendSysMessage(who, "Location [" + send_Location.Name + "] does not exist.");
+                        Go_RefreshMyGumps(who);
+                        return;
+                endif
+        else
+                SendSysMessage(who, "Copying Cancelled");
+                Go_RefreshMyGumps(who);
+                return;
+        endif
+
+endfunction
+
+function Go_CopyPrivateLocation(who)
+
+        var gump := Go_RetrieveGump("CopyIndex", who.acctname);
+        num_keys := go_keys.size();
+        if  ( !gump )
+                SendSysMessage(who, "Building go private copy gump...");
+                gump := Go_PrivateCopyGump();
+                Go_SaveGump("CopyIndex", gump, who.acctname);
+        endif
+
+        var input := GFSendGump(who, gump);
+        input := input[0];
+
+        if(input)
+                var send_Location := 0;
+                send_Location := go_prop[lower(go_keys[input])];
+                if ( send_Location )
+                        go_prop := go_elem.GetProp(who.acctname);
+                        if ( go_prop_base.exists(lower(send_Location.Name)) )
+                                SendSysMessage(who, "You already have a public go location named ["+send_Location.Name+"]");
+                                return;
+                        endif
+                        SendSysMessage(who, "Copying [" + send_Location.Name + "] to the public menu.");
+                        Go_SetLocation("base_Distro", who, send_Location.Name, send_Location.Realm, send_Location.X, send_Location.Y, send_Location.Z);
+                        return;
+                else
+                        SendSysMessage(who, "Location [" + send_Location.Name + "] does not exist.");
+                        Go_RefreshMyGumps(who);
+                        return;
+                endif
+        else
+                SendSysMessage(who, "Copying Cancelled");
+                Go_RefreshMyGumps(who);
+                return;
+        endif
+
+endfunction
+
+function Go_SetLocation(gump_Type, who, name, realm, x, y, z)
+
+        if( !realm )
+          realm := who.realm;
+        endif
+
+        z := GetMapInfo(x, y, realm).z;
+
+        var temp := dictionary;
+        temp.+Name := lower(name);
+        temp.+Realm := realm;
+        temp.+X := x;
+        temp.+Y := y;
+        temp.+Z := z;
+        case(gump_Type)
+          "base_Distro": go_prop_base[lower(name)] := temp;
+                         go_elem.SetProp(gump_Type, go_prop_base);
+          default: go_prop[lower(name)] := temp;
+                   go_elem.SetProp(gump_Type, go_prop);
+        endcase
+        Go_RefreshMyGumps(who);
+
+endfunction
+
+function Go_PublicCopyGump()
+
+        var gump := GFCreateGump();
+        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
+        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
+        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
+        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
+        GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
+        GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
+        GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Copy");
+        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
+
+
+        GFPage(gump, 1);
+
+        var y_loc := 85;
+        var page_num := 1;
+        var counter := 1;
+        var line_num := 0;
+
+        go_keys_base.sort();
+        foreach place in ( go_keys_base )
+                GFTextLine(gump,  25, y_loc, 2100, go_prop_base[place].Name);
+                GFTextLine(gump, 175, y_loc, 2100, go_prop_base[place].Realm);
+                GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+
+                counter := counter + 1;
+                line_num := line_num+1;
+                y_loc := y_loc + 20;
+                if ( line_num >= 18 && line_num < num_keys )
+                        GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+                        page_num := page_num + 1;
+                        GFPage(gump, page_num);
+                        GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+                        y_loc := 85;
+                        line_num := 0;
+                endif
+                sleepms(2);
+        endforeach
+
+        return gump;
+
+endfunction
+
+function Go_PrivateCopyGump()
+
+        var gump := GFCreateGump();
+        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
+        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
+        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
+        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
+        GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
+        GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
+        GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Copy");
+        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
+
+
+        GFPage(gump, 1);
+
+        var y_loc := 85;
+        var page_num := 1;
+        var counter := 1;
+        var line_num := 0;
+
+        go_keys.sort();
+        foreach place in ( go_keys )
+                GFTextLine(gump,  25, y_loc, 2100, go_prop[place].Name);
+                GFTextLine(gump, 175, y_loc, 2100, go_prop[place].Realm);
+                GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+
+                counter := counter + 1;
+                line_num := line_num+1;
+                y_loc := y_loc + 20;
+                if ( line_num >= 18 && line_num < num_keys )
+                        GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+                        page_num := page_num + 1;
+                        GFPage(gump, page_num);
+                        GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+                        y_loc := 85;
+                        line_num := 0;
+                endif
+                sleepms(2);
+        endforeach
+
+        return gump;
+
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/commands/include/go-edit.inc
===================================================================
--- trunk/096/pkg/commands/include/go-edit.inc	2005-09-19 03:50:28 UTC (rev 164)
+++ trunk/096/pkg/commands/include/go-edit.inc	2005-09-20 03:56:04 UTC (rev 165)
@@ -0,0 +1,263 @@
+function Go_EditPublicLocation(who)
+
+        var gump := Go_PublicEditGump();
+        num_keys := go_keys_base.size();
+
+        var input := GFSendGump(who, gump);
+        input := input[0];
+
+        if(input)
+                var send_Location := go_prop_base[lower(go_keys_base[input])];
+                if ( send_Location )
+                        var edit_gump := Go_EditPublicLocationGump(send_Location);
+                        var edit_input := GFSendGump(who, edit_gump);
+
+                        if ( edit_input[edit_update] )
+                                edit_name := GFExtractData(edit_input, edit_name);
+                                x_pos := CInt(GFExtractData(edit_input, x_pos));
+                                y_pos := CInt(GFExtractData(edit_input, y_pos));
+                                z_pos := CInt(GFExtractData(edit_input, z_pos));
+
+                                if ( !edit_name )
+                                        SendSysMessage(who, "Cancelled - No name entered");
+                                        return;
+                                elseif ( lower(edit_name) != send_Location.Name )
+                                        if ( go_prop_base.exists( Lower(edit_name) ) )
+                                                SendSysMessage(who, "Cancelled - location already exists with the name ["+edit_name+"]");
+                                                return;
+                                        endif
+                                endif
+
+                                var original_Realm := send_Location.Realm;
+                                go_prop_base.erase(lower(send_Location.Name));
+                                go_elem.SetProp("base_Distro", go_prop_base);
+                                Go_SetLocation("base_Distro", who, edit_name, original_Realm, x_pos, y_pos, z_pos);
+                                SendSysMessage(who, "Updated ["+edit_name+"]");
+                                Go_RefreshMyGumps(who);
+                        elseif ( edit_input[edit_delete] )
+                                SendSysMessage(who, "Deleted [" + send_Location.Name + "]");
+                                go_prop_base.erase(lower(send_Location.Name));
+                                go_elem.SetProp("base_Distro", go_prop_base);
+                                Go_RefreshMyGumps(who);
+                        else
+                                SendSysMessage(who, "Cancelled");
+                        endif
+                else
+                        SendSysMessage(who, "Location [" + send_Location.Name + "] does not exist.");
+                        return;
+                endif
+        else
+                SendSysMessage(who, "Editing Cancelled");
+                return;
+        endif
+
+endfunction
+
+function Go_EditPrivateLocation(who)
+
+        var gump := Go_PrivateEditGump();
+        num_keys := go_keys.size();
+
+        var input := GFSendGump(who, gump);
+        input := input[0];
+
+        if(input)
+                var send_Location := go_prop[lower(go_keys[input])];
+                if ( send_Location )
+                        var edit_gump := Go_EditPrivateLocationGump(send_Location);
+                        var edit_input := GFSendGump(who, edit_gump);
+
+                        if ( edit_input[edit_update] )
+                                edit_name := GFExtractData(edit_input, edit_name);
+                                x_pos := CInt(GFExtractData(edit_input, x_pos));
+                                y_pos := CInt(GFExtractData(edit_input, y_pos));
+                                z_pos := CInt(GFExtractData(edit_input, z_pos));
+
+                                if ( !edit_name )
+                                        SendSysMessage(who, "Cancelled - No name entered");
+                                        return;
+                                elseif ( lower(edit_name) != send_Location.Name )
+                                        if ( go_prop_base.exists( Lower(edit_name) ) )
+                                                SendSysMessage(who, "Cancelled - location already exists with the name ["+edit_name+"]");
+                                                return;
+                                        endif
+                                endif
+
+                                var original_Realm := send_Location.Realm;
+                                go_prop.erase(lower(send_Location.Name));
+                                go_elem.SetProp(who.acctname, go_prop);
+                                Go_SetLocation(who.acctname, who, edit_name, original_Realm, x_pos, y_pos, z_pos);
+                                SendSysMessage(who, "Updated ["+edit_name+"]");
+                                Go_RefreshMyGumps(who);
+                        elseif ( edit_input[edit_delete] )
+                                SendSysMessage(who, "Deleted [" + send_Location.Name + "]");
+                                go_prop.erase(lower(send_Location.Name));
+                                go_elem.SetProp(who.acctname, go_prop);
+                                Go_RefreshMyGumps(who);
+                        else
+                                SendSysMessage(who, "Cancelled");
+                        endif
+                else
+                        SendSysMessage(who, "Location [" + send_Location.Name + "] does not exist.");
+                        return;
+                endif
+        else
+                SendSysMessage(who, "Editing Cancelled");
+                return;
+        endif
+
+endfunction
+
+function Go_PublicEditGump()
+
+        var gump := GFCreateGump();
+        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
+        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
+        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
+        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
+        GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
+        GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
+        GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Edit");
+        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
+
+
+        GFPage(gump, 1);
+
+        var y_loc := 85;
+        var page_num := 1;
+        var counter := 1;
+        var line_num := 0;
+
+        go_keys_base.sort();
+        foreach place in ( go_keys_base )
+                GFTextLine(gump,  25, y_loc, 2100, go_prop_base[place].Name);
+                GFTextLine(gump, 175, y_loc, 2100, go_prop_base[place].Realm);
+                GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+
+                counter := counter + 1;
+                line_num := line_num+1;
+                y_loc := y_loc + 20;
+                if ( line_num >= 18 && line_num < num_keys )
+                        GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+                        page_num := page_num + 1;
+                        GFPage(gump, page_num);
+                        GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+                        y_loc := 85;
+                        line_num := 0;
+                endif
+                sleepms(2);
+        endforeach
+
+        return gump;
+
+endfunction
+
+function Go_PrivateEditGump()
+
+        var gump := GFCreateGump();
+        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
+        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
+        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
+        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
+        GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
+        GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
+        GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Edit");
+        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
+
+
+        GFPage(gump, 1);
+
+        var y_loc := 85;
+        var page_num := 1;
+        var counter := 1;
+        var line_num := 0;
+
+        go_keys.sort();
+        foreach place in ( go_keys )
+                GFTextLine(gump,  25, y_loc, 2100, go_prop[place].Name);
+                GFTextLine(gump, 175, y_loc, 2100, go_prop[place].Realm);
+                GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+
+                counter := counter + 1;
+                line_num := line_num+1;
+                y_loc := y_loc + 20;
+                if ( line_num >= 18 && line_num < num_keys )
+                        GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+                        page_num := page_num + 1;
+                        GFPage(gump, page_num);
+                        GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+                        y_loc := 85;
+                        line_num := 0;
+                endif
+                sleepms(2);
+        endforeach
+
+        return gump;
+
+endfunction
+
+function Go_EditPublicLocationGump(send_Location)
+
+        var gump := GFCreateGump();
+        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
+        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
+        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
+        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
+        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
+        edit_update := GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, UPDATE_BUTTON);
+        GFHTMLArea(gump,  57, 480, 40, 20, "<basefont color=#7FFFD4>Update");
+        edit_delete := GFAddButton(gump, 100, 477, 4005, 4007, GF_CLOSE_BTN, DELETE_BUTTON);
+        GFHTMLArea(gump,  132, 480, 40, 20, "<basefont color=#7FFFD4>Delete");
+
+        GFTextLine(gump, 20, 120, 2100, "Name");
+        GFResizePic(gump, 120, 117, 2620, 180, 30);
+        edit_name := GFTextEntry(gump, 130, 122, 160, 25, 2100, send_Location.Name);
+
+        GFTextLine(gump, 20, 143, 2100, "X Coordinate");
+        GFResizePic(gump, 120, 140, 2620, 100, 30);
+        x_pos := GFTextEntry(gump, 130, 145, 80, 25, 2100, send_Location.X);
+
+        GFTextLine(gump, 20, 166, 2100, "Y Coordinate");
+        GFResizePic(gump, 120, 163, 2620, 100, 30);
+        y_pos := GFTextEntry(gump, 130, 168, 80, 25, 2100, send_Location.Y);
+
+        GFTextLine(gump, 20, 189, 2100, "Z Coordinate");
+        GFResizePic(gump, 120, 186, 2620, 100, 30);
+        z_pos := GFTextEntry(gump, 130, 191, 80, 25, 2100, send_Location.Z);
+
+        return gump;
+
+endfunction
+
+function Go_EditPrivateLocationGump(send_Location)
+
+        var gump := GFCreateGump();
+        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
+        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
+        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
+        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
+        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
+        edit_update := GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, UPDATE_BUTTON);
+        GFHTMLArea(gump,  57, 480, 40, 20, "<basefont color=#7FFFD4>Update");
+        edit_delete := GFAddButton(gump, 100, 477, 4005, 4007, GF_CLOSE_BTN, DELETE_BUTTON);
+        GFHTMLArea(gump,  132, 480, 40, 20, "<basefont color=#7FFFD4>Delete");
+
+        GFTextLine(gump, 20, 120, 2100, "Name");
+        GFResizePic(gump, 120, 117, 2620, 180, 30);
+        edit_name := GFTextEntry(gump, 130, 122, 160, 25, 2100, send_Location.Name);
+
+        GFTextLine(gump, 20, 143, 2100, "X Coordinate");
+        GFResizePic(gump, 120, 140, 2620, 100, 30);
+        x_pos := GFTextEntry(gump, 130, 145, 80, 25, 2100, send_Location.X);
+
+        GFTextLine(gump, 20, 166, 2100, "Y Coordinate");
+        GFResizePic(gump, 120, 163, 2620, 100, 30);
+        y_pos := GFTextEntry(gump, 130, 168, 80, 25, 2100, send_Location.Y);
+
+        GFTextLine(gump, 20, 189, 2100, "Z Coordinate");
+        GFResizePic(gump, 120, 186, 2620, 100, 30);
+        z_pos := GFTextEntry(gump, 130, 191, 80, 25, 2100, send_Location.Z);
+
+        return gump;
+
+endfunction

Added: trunk/096/pkg/commands/include/go-gumps.inc
===================================================================
--- trunk/096/pkg/commands/include/go-gumps.inc	2005-09-19 03:50:28 UTC (rev 164)
+++ trunk/096/pkg/commands/include/go-gumps.inc	2005-09-20 03:56:04 UTC (rev 165)
@@ -0,0 +1,216 @@
+// Gump backgrounds - Used in various functions - easier to use globally.
+var BKGND_SILVERTRIM := GFCfgConst("BackGrounds", "SILVERTRIM");
+var BKGND_DARK_STONE := GFCfgConst("BackGrounds", "DARK_STONE");
+
+
+function Go_LocationIndex(who, gump_Type:="base_Distro")
+
+        var gump := Go_RetrieveGump("LocationIndex", gump_Type);
+        if(gump_Type == "base_Distro")
+                num_keys := go_keys_base.size();
+        else
+                num_keys := go_keys.size();
+        endif
+        if  ( !gump )
+                SendSysMessage(who, "Building go index gump...");
+                if(gump_Type == "base_Distro")
+                        gump := Go_PublicIndexGump();
+                else
+                        gump := Go_PersonalIndexGump();
+                endif
+                Go_SaveGump("LocationIndex", gump, gump_Type);
+        endif
+
+        var input := GFSendGump(who, gump);
+        input := input[0];
+
+        case(input)
+          0: SendSysMessage(who, "Closed");
+             return;
+          ADD_NEW_PUBLIC: Go_AddPublicLocation(who);
+                   return;
+          ADD_NEW_PRIVATE: Go_AddPrivateLocation(who);
+                   return;
+          COPY_PUBLIC_ITEM: Go_CopyPublicLocation(who);
+                   return;
+          COPY_PRIVATE_ITEM: Go_CopyPrivateLocation(who);
+                   return;
+          EDIT_PUBLIC_ITEM: Go_EditPublicLocation(who);
+                   return;
+          EDIT_PRIVATE_ITEM: Go_EditPrivateLocation(who);
+                   return;
+          SHOW_PUBLIC_INDEX: SetObjProperty(who, "#Go_Gump", 1);
+                             Go_LocationIndex(who);
+                   return;
+          SHOW_PRIVATE_INDEX: SetObjProperty(who, "#Go_Gump", 2);
+                              Go_LocationIndex(who, who.acctname);
+                   return;
+          default:
+        endcase
+
+        if(input)
+                var send_Location;
+                var moved := who;
+                if ( input <= num_keys )
+                        case(gump_Type)
+                          "base_Distro": send_Location := go_prop_base[lower(go_keys_base[input])];
+                          default:       send_Location := go_prop[lower(go_keys[input])];
+                        endcase
+                        SendSysMessage(who, "Who do you want to send to " + send_Location.Name);
+                        moved := target(who);
+                        if (!moved)
+                                return;
+                        endif
+                else
+                        input := input - num_keys;
+                        case(gump_Type)
+                          "base_Distro": send_Location  := go_prop_base[lower(go_keys_base[input])];
+                          default:       send_Location := go_prop[lower(go_keys[input])];
+                        endcase
+                endif
+
+                if ( send_Location )
+                        var move;
+                        SendSysMessage(who, "Going to [" + send_Location.Name + "]");
+                        if ( moved.IsA(POLCLASS_ITEM) )
+                                move := MoveItemToLocation(moved, CInt(send_Location.X), CInt(send_Location.Y), CInt(send_Location.Z), MOVEITEM_FORCELOCATION);
+                        else
+                                move := MoveCharacterToLocation(moved, CInt(send_Location.X), CInt(send_Location.Y), CInt(send_Location.Z), MOVECHAR_FORCELOCATION);
+                        endif
+                        if ( TypeOf(move) != "Integer" )
+                                SendSysMessage(who, "Error moving: X[" + send_Location.X +"] Y[" + send_Location.Y + "] Z[" + send_Location.Z + "]");
+                        endif
+                else
+                        SendSysMessage(who, "Location [" + send_Location.Name + "] does not exist.");
+                endif
+        endif
+
+endfunction
+
+function Go_PersonalIndexGump()
+
+        var gump := GFCreateGump();
+        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
+        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
+        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
+        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
+        GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
+        GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
+        GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Send");
+        GFHTMLArea(gump, 345, 60, 150, 20, "<basefont color=#7FFFD4>Goto");
+        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
+        GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, ADD_NEW_PRIVATE);
+        GFHTMLArea(gump,  57, 480, 30, 20, "<basefont color=#7FFFD4>Add");
+        GFAddButton(gump, 100, 477, 4005, 4007, GF_CLOSE_BTN, COPY_PRIVATE_ITEM);
+        GFHTMLArea(gump,  132, 480, 30, 20, "<basefont color=#7FFFD4>Copy");
+        GFAddButton(gump, 175, 477, 4008, 4010, GF_CLOSE_BTN, EDIT_PRIVATE_ITEM);
+        GFHTMLArea(gump,  207, 480, 30, 20, "<basefont color=#7FFFD4>Edit");
+        GFAddButton(gump, 250, 477, 4008, 4010, GF_CLOSE_BTN, SHOW_PUBLIC_INDEX);
+        GFHTMLArea(gump,  282, 480, 100, 20, "<basefont color=#7FFFD4>Public Menu");
+
+        GFPage(gump, 1);
+
+        var y_loc := 85;
+        var page_num := 1;
+        var counter := 1;
+        var line_num := 0;
+
+        go_keys.sort();
+        foreach place in ( go_keys )
+                GFTextLine(gump,  25, y_loc, 2100, go_prop[place].Name);
+                GFTextLine(gump, 175, y_loc, 2100, go_prop[place].Realm);
+                GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+                GFAddButton(gump, 350, y_loc+3, 2117, 2118, GF_CLOSE_BTN, (num_keys+counter));
+
+                counter := counter + 1;
+                line_num := line_num+1;
+                y_loc := y_loc + 20;
+                if ( line_num >= 18 && line_num < num_keys )
+                        GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+                        page_num := page_num + 1;
+                        GFPage(gump, page_num);
+                        GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+                        y_loc := 85;
+                        line_num := 0;
+                endif
+                sleepms(2);
+        endforeach
+
+        return gump;
+
+
+endfunction
+
+function Go_PublicIndexGump()
+
+        var gump := GFCreateGump();
+        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
+        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
+        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
+        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
+        GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
+        GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
+        GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Send");
+        GFHTMLArea(gump, 345, 60, 150, 20, "<basefont color=#7FFFD4>Goto");
+        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
+        GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, ADD_NEW_PUBLIC);
+        GFHTMLArea(gump,  57, 480, 30, 20, "<basefont color=#7FFFD4>Add");
+        GFAddButton(gump, 100, 477, 4005, 4007, GF_CLOSE_BTN, COPY_PUBLIC_ITEM);
+        GFHTMLArea(gump,  132, 480, 30, 20, "<basefont color=#7FFFD4>Copy");
+        GFAddButton(gump, 175, 477, 4008, 4010, GF_CLOSE_BTN, EDIT_PUBLIC_ITEM);
+        GFHTMLArea(gump,  207, 480, 30, 20, "<basefont color=#7FFFD4>Edit");
+        GFAddButton(gump, 250, 477, 4008, 4010, GF_CLOSE_BTN, SHOW_PRIVATE_INDEX);
+        GFHTMLArea(gump,  282, 480, 100, 20, "<basefont color=#7FFFD4>Private Menu");
+
+        GFPage(gump, 1);
+
+        var y_loc := 85;
+        var page_num := 1;
+        var counter := 1;
+        var line_num := 0;
+
+        go_keys_base.sort();
+        foreach place in ( go_keys_base )
+                GFTextLine(gump,  25, y_loc, 2100, go_prop_base[place].Name);
+                GFTextLine(gump, 175, y_loc, 2100, go_prop_base[place].Realm);
+                GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+                GFAddButton(gump, 350, y_loc+3, 2117, 2118, GF_CLOSE_BTN, (num_keys+counter));
+
+                counter := counter + 1;
+                line_num := line_num+1;
+                y_loc := y_loc + 20;
+                if ( line_num >= 18 && line_num < num_keys )
+                        GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+                        page_num := page_num + 1;
+                        GFPage(gump, page_num);
+                        GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+                        y_loc := 85;
+                        line_num := 0;
+                endif
+                sleepms(2);
+        endforeach
+
+        return gump;
+
+endfunction
+
+function Go_RetrieveGump(elem_name, prop_name:="base_Distro")
+
+        var elem := DFFindElement(go_data_gumps, elem_name);
+        return (elem.GetProp(prop_name));
+
+endfunction
+
+function Go_SaveGump(elem_name, gump, prop_name:="base_Distro")
+
+        var elem := DFFindElement(go_data_gumps, elem_name, DF_CREATE);
+        return (elem.SetProp(prop_name, gump));
+
+endfunction
+
+function Go_RefreshGump(elem_name, prop_name:="base_Distro")
+
+        var elem := DFFindElement(go_data_gumps, elem_name);
+        return (elem.EraseProp(prop_name));
+
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/commands/include/go-template.inc
===================================================================
--- trunk/096/pkg/commands/include/go-template.inc	2005-09-19 03:50:28 UTC (rev 164)
+++ trunk/096/pkg/commands/include/go-template.inc	2005-09-20 03:56:04 UTC (rev 165)
@@ -0,0 +1,34 @@
+function Go_CheckInit(who)
+
+        if ( !go_prop_base )
+                SendSysMessage(who, "Creating initial go list dictionary...");
+                var oldlocs := ReadConfigFile("::golocs");
+                var MaxLocs := GetConfigMaxIntKey(oldlocs);
+                go_prop_base := dictionary;
+                for i:=1 to MaxLocs
+                        // Open files and set veriables
+                        var dest := oldlocs[i];
+                        Go_SetLocation("base_Distro", who, dest.name, dest.realm, dest.x, dest.y, dest.z);
+                        sleepms(2);
+                endfor
+
+                go_prop_base := go_elem.GetProp("base_Distro");
+                go_keys_base := go_prop_base.keys();
+                Go_RefreshGump("LocationIndex", "base_Distro");
+        endif
+
+endfunction
+
+function Go_RefreshMyGumps(who)
+
+        var elem := DFFindElement(go_data_gumps, "LocationIndex");
+        elem.EraseProp("base_Distro");
+        elem.EraseProp(who.acctname);
+
+        elem := DFFindElement(go_data_gumps, "CopyIndex");
+        elem.EraseProp("base_Distro");
+        elem.EraseProp(who.acctname);
+
+        SendSysMessage(who, "Your public and personal gumps have been refreshed.");
+
+endfunction
\ No newline at end of file



From muaddiblsd at berlios.de  Tue Sep 20 06:00:29 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Tue, 20 Sep 2005 06:00:29 +0200
Subject: [Poldistro-svn] r166 - trunk/096/pkg/commands/seer
Message-ID: <200509200400.j8K40TIO031630@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-20 06:00:26 +0200 (Tue, 20 Sep 2005)
New Revision: 166

Modified:
   trunk/096/pkg/commands/seer/go.src
Log:
New .go command that saves lists in DataFiles instead of Config Files for easier handling. Allows you to add, remove, and edit entries. It also gives you a "base" list of locations that everyone can see. As you add locations, they are all "account" specific if added while viewing your Private locations. Only the adder will see his personal list that has been added to the locations. If you are viewing the "public" list when you use Add, it will add it to the Public list instead! You can also add locations from the "base" list to the personal list via Copy. Then simply select the location from the list given via gump.

Modified: trunk/096/pkg/commands/seer/go.src
===================================================================
--- trunk/096/pkg/commands/seer/go.src	2005-09-20 03:56:04 UTC (rev 165)
+++ trunk/096/pkg/commands/seer/go.src	2005-09-20 04:00:26 UTC (rev 166)
@@ -1,176 +1,98 @@
-// Go v2.0
-// Author: Unknown
-// Updated by: Sentack
-// Updates:
-//   1/13/2000 : v2.0
-//     - displays gump of all available locations (Stole from .goto command)
-//     - Can now teleport other mobles with "Send" button in gump window (Got some help from .info Command)
-//     - Updated and editied golocs.cfg to better work with gump
-
-use os;
+////////////////////////////////////////////////////////////////////////////////////////////////////
+//
+//  name:    go.src - Player Textcommand
+//  version: 2.0a
+//  author:  MuadDib
+//
+//  Purpose: New .go command that saves lists in DataFiles instead of Config Files for easier
+//           handling. Allows you to add, remove, and edit entries. It also gives you a "base"
+//           list of locations that everyone can see. As you add locations, they are all "account"
+//           specific if added while viewing your Private locations. Only the adder will see his
+//           personal list that has been added to the locations. If you are viewing the "public"
+//           list when you use Add, it will add it to the Public list instead! You can also add
+//           locations from the "base" list to the personal list via Copy. Then simply select the
+//           location from the list given via gump.
+//
+//  To-Do:   Optimize gump functions within includes.
+//           Add more "text" checks at beginning of the script. Possibly in /include/go_text.inc
+//
+////////////////////////////////////////////////////////////////////////////////////////////////////
 use uo;
-use cfgfile;
-use util;
+use os;
+use datafile;
 
-include "include/math"; // Used for Mod
-include "include/attributes";
+include ":datafile:datafile";
+include "include/math";
+include ":gumps:include/gumpprompt";
+include ":gumps:include/gumps";
+include ":gumps:include/gumps_ex";
+include ":gumps:include/yesno";
+include ":commands:include/go-add";
+include ":commands:include/go-edit";
+include ":commands:include/go-gumps";
+include ":commands:include/go-template";
 
-const TEXTSTARTLOCY :=  70;  // The location of the top of the gump
+CONST ADD_NEW_PUBLIC      := 0x20001;
+CONST ADD_NEW_PRIVATE     := 0x20002;
+CONST COPY_PUBLIC_ITEM    := 0x20003;
+CONST COPY_PRIVATE_ITEM   := 0x20004;
+CONST EDIT_PUBLIC_ITEM    := 0x20005;
+CONST EDIT_PRIVATE_ITEM   := 0x20006;
+CONST UPDATE_BUTTON       := 0x20007;
+CONST DELETE_BUTTON       := 0x20008;
+CONST SHOW_PUBLIC_INDEX   := 0x20009;
+CONST SHOW_PRIVATE_INDEX  := 0x2000A;
 
-var locationscount := 0;  // The number of locations found for this user
-var pagecount := 1;       // The current developing page
+CONST BUILD_FROM_OLD      := 0x1;
 
-var layout := array(      // The layout of the gump with text notes to be added later
+var go_data_gumps := DFOpenDataFile(":commands:GoGumps", DF_CREATE);
+var go_data_file  := DFOpenDataFile(":commands:GoFile", DF_CREATE);
+var go_elem       := DFFindElement(go_data_file, "GoList", DF_CREATE);
+var go_prop_base  := go_elem.GetProp("base_Distro");
+var go_keys_base  := go_prop_base.keys();
+var go_prop;
+var go_keys;
+var num_keys;
+var edit_name;
+var edit_update;
+var edit_delete;
+var x_pos;
+var y_pos;
+var z_pos;
 
-"page 0",
-"nodispose",
-"gumppic 0 50 2620",
-"gumppic 20 50 2621",
-"gumppic 290 50 2622",
-"gumppic 0 68 2623",
-"gumppic 22 68 2624",
-"gumppic 288 68 2625",
-"gumppic 0 272 2623",
-"gumppic 22 272 2624",
-"gumppic 288 272 2625",
-"gumppic 0 476 2626",
-"gumppic 20 476 2627",
-"gumppic 290 476 2628",
-"gumppic 20 80 2621",
-
-"text 20 59 40 0",
-"text 200 59 40 1",
-"text 260 59 40 2"
-);
-
-var data := array(      // The data array that holds all the text to be displayed in the gump
-       "Location",         //0
-       "Goto",
-       "Send"
-);
-
 program textcmd_go( who, text )
-  // Test to see if the user sent a location via command text.  if not show gump, else attempt travel to that location
-  if(!text)
-    // The name of the current user of this command
-    var tname := lower(who.name);
-    // Create the Array
-    FillInArrays( tname );
-    // Display the array and receive a responce from the player
-    var result := SendDialogGump( who, layout, data );
-    // If the user canceled, quit
-    if (result[0] == 0)
-      return;
-    endif
-    // Open files and set veriables
-    var locs    := ReadConfigFile("golocs");
-    var MaxLocs := GetConfigMaxIntKey(locs)+1;
-    var dest    := locs[mod(result[0], MaxLocs)];
-    var traveler;
-    // Determine if we are teleporting ourselves or someone other and set the traveler variable
-    if ( result[0] > MaxLocs ) // teleporting someone else
-       SendSysMessage( who, "Select a MOBILE." );
-       traveler :=  Target( who, TGTOPT_NOCHECK_LOS );
-       if(!traveler || !GetStrength(traveler))
-         SendSysMessage( who, "Invalid selection." );
-         return;
-       endif
-    else
-      // Teleporting ourself
-      traveler := who;
-    endif
-    // Teleport moble
-    MoveCharacterToLocation(traveler, dest.x, dest.y, GetMapInfo(dest.x, dest.y, who.realm).z);
-  else
-    text := lower( text );
-    // Open files and set veriables
-    var cfg := ReadConfigFile(":*:golocs");
-    var tname := lower(who.name);
-    var elem;
-    var cfglength := GetConfigMaxIntKey(cfg);
-    var i;
-    // Manual search through each text entry to see if it's the one
-    for( i := 1; i <= cfglength; i := i + 1  )
-      elem := cfg[i];
-      if (elem.Name == text)
-        // If name matches, make sure type does as well
-        if ((elem.TYPE == "all") || (elem.TYPE == tname))
-          // If so, teleport user
-          MoveCharacterToLocation(who, elem.x, elem.y, elem.z);
+
+        if( lower(text) == "refresh" )
+          Go_RefreshGump("LocationIndex", "base_Distro");
+          Go_RefreshGump("LocationIndex", who.acctname);
+          Go_RefreshGump("CopyIndex", "base_Distro");
+          Go_RefreshGump("CopyIndex", who.acctname);
+          SendSysMessage(who, "Gump Cache emptied for base and personal.");
           return;
         endif
-      endif
-    endfor
-    // Warn user that command failed.
-    SendSysMessage(who, "Unknown Location");
-  endif
-    UnloadConfigFile(":*:golocs");
-endprogram
 
+        Go_CheckInit(who);
+        // See if there is an element in the DataFile that matches their
+        // account name.
+        go_prop := go_elem.GetProp( who.acctname );
 
-function FillInArrays( tname )
-
-    var telelocations := ReadConfigFile(":*:golocs");
-    var datalen;
-    var layoutlen;
-    var prev_y := CInt(TEXTSTARTLOCY);
-    var datindx := 2;
-    var buttonret := 1;
-    var i;
-    var numlocations := GetConfigMaxIntKey(telelocations);
-    var currloc;
-
-    for( i := 1; i <= numlocations; i := i + 1  )
-      currloc := telelocations[i];
-
-      if ((currloc.TYPE == "all") || (currloc.TYPE == tname))
-        locationscount := locationscount + 1;
-
-        datalen := GetDataLength();
-        layoutlen := GetLayoutLength();
-
-        // Store Name
-        datindx := datalen+1;
-        data[datindx] := currloc.Name;
-
-        if (mod(locationscount, 19) == 1)
-
-          // Pointer Down
-          if (locationscount >= 19)
-            layout[GetLayoutLength()+1] := "button 285 465 2648 2647 0 " + (pagecount);
-          endif
-
-          // Set Page Number
-          layout[GetLayoutLength()+1] := "page " + pagecount;
-          pagecount := pagecount + 1;
-          prev_y := TEXTSTARTLOCY;
-
-          if (locationscount > 19)
-            // Pointer Up
-            if( i > 19)
-              layout[GetLayoutLength()+1] := "button 285 85 2650 2651 0 " + (pagecount - 2);
-            endif
-          endif
+        // If there is no Element in the DataFile that matches their account name
+        // let's create it now.
+        if ( !go_prop )
+                SendSysMessage(who, "Creating personal go list dictionary...");
+                var temp := dictionary;
+                go_elem.SetProp(who.acctname, temp);
+                go_prop  := go_elem.GetProp(who.acctname);
         endif
+        
+        go_keys  := go_prop.keys();
+        
+        var gump_Open := GetObjProperty(who, "#Go_Gump");
+        case(gump_Open)
+          1: Go_LocationIndex(who);
+          2: Go_LocationIndex(who, who.acctname);
+          default: Go_LocationIndex(who);
+        endcase
 
-        layout[GetLayoutLength()+1] := ("text 20 " + CStr(prev_y + 20) + " 40 " + datalen);
-        layout[GetLayoutLength()+1] := ("button 200 " + CStr(prev_y + 20) + " 2640 2641 1 0 " + ((buttonret+1) / 2)); // Go Button
-        layout[GetLayoutLength()+1] := ("button 260 " + CStr(prev_y + 20) + " 2640 2641 1 0 " + (((buttonret+1) / 2) + numlocations+1)); // Send Button
 
-        prev_y := prev_y + 20;
-      endif
-
-      buttonret := buttonret + 2;
-    endfor
-
-endfunction
-
-// Returns the Length of the Layout Gump Array
-function GetLayoutLength();
-    return (len(layout));
-endfunction
-
-// Returns the length of the Names Array that populates the gump.
-function GetDataLength();
-    return (len(data));
-endfunction
\ No newline at end of file
+endprogram



From muaddiblsd at berlios.de  Tue Sep 20 06:15:50 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Tue, 20 Sep 2005 06:15:50 +0200
Subject: [Poldistro-svn] r167 - trunk/096/pkg/items/decorations
Message-ID: <200509200415.j8K4FofK002400@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-20 06:15:41 +0200 (Tue, 20 Sep 2005)
New Revision: 167

Modified:
   trunk/096/pkg/items/decorations/itemdesc.cfg
   trunk/096/pkg/items/decorations/pkg.cfg
Log:
Updated. Moved items around for future crafting updates.

Modified: trunk/096/pkg/items/decorations/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/decorations/itemdesc.cfg	2005-09-20 04:00:26 UTC (rev 166)
+++ trunk/096/pkg/items/decorations/itemdesc.cfg	2005-09-20 04:15:41 UTC (rev 167)
@@ -1,4 +1,3 @@
-
 Item 0x0E46 // empty jars
 {
    Name emptyjars1
@@ -6,13 +5,6 @@
    VendorBuysFor   75
 }
 
-Item 0x0EC6 // dress form
-{
-   Name dressform
-   VendorSellsFor  100
-   VendorBuysFor   45
-}
-
 Item 0x0EE4 // W spiderweb
 {
    Name spiderweb1
@@ -27,20 +19,6 @@
    VendorBuysFor   75
 }
 
-Item 0x0F66 // EW easel with canvas
-{
-   Name easel1
-   VendorSellsFor  300
-   VendorBuysFor   75
-}
-
-Item 0x0F68 // NS easel with canvas
-{
-   Name easel2
-   VendorSellsFor  300
-   VendorBuysFor   75
-}
-
 Item 0x154D // water barrel
 {
    Name waterbarrel

Modified: trunk/096/pkg/items/decorations/pkg.cfg
===================================================================
--- trunk/096/pkg/items/decorations/pkg.cfg	2005-09-20 04:00:26 UTC (rev 166)
+++ trunk/096/pkg/items/decorations/pkg.cfg	2005-09-20 04:15:41 UTC (rev 167)
@@ -1,5 +1,5 @@
-Enabled 1
-Name decorations
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
\ No newline at end of file
+Enabled         1
+Name            decorations
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0a



From muaddiblsd at berlios.de  Tue Sep 20 06:24:47 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Tue, 20 Sep 2005 06:24:47 +0200
Subject: [Poldistro-svn] r168 - trunk/096/pkg/commands/seer
Message-ID: <200509200424.j8K4OlNx003875@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-20 06:24:44 +0200 (Tue, 20 Sep 2005)
New Revision: 168

Removed:
   trunk/096/pkg/commands/seer/addgoloc.src
Log:
Removed addgoloc.src due to go.src now fully handling all Go Location commands.

Deleted: trunk/096/pkg/commands/seer/addgoloc.src
===================================================================
--- trunk/096/pkg/commands/seer/addgoloc.src	2005-09-20 04:15:41 UTC (rev 167)
+++ trunk/096/pkg/commands/seer/addgoloc.src	2005-09-20 04:24:44 UTC (rev 168)
@@ -1,52 +0,0 @@
-use npc;
-use uo;
-use basicio;
-use util;
-use basic;
-use cfgfile;
-
-
-var  cfg;
-var colors;
-var num_colors;
-
-program addgoloc(who)
-
-
-var where := TargetCoordinates(who);
-var desc := RequestInput(who, who.backpack, "How would you like to refer to this location?" );
-var locs    := ReadConfigFile("golocs");
-var locvalue := GetConfigMaxIntKey(locs)+1;
-var elemkey := "" + lower(desc);
-
-    var props:= array;
-    var prop:= array;
-    prop .+ pname;
-    prop .+ pvalue;
-
-    prop.pname := "Name";
-    prop.pvalue := elemkey;
-    props[1] := prop;
-
-    prop.pname := "Type";
-    prop.pvalue := "all";
-    props[2] := prop;
-
-    prop.pname := "x";
-    prop.pvalue := where.x;
-    props[3] := prop;
-
-    prop.pname := "y";
-    prop.pvalue := where.y;
-    props[4] := prop;
-
-    prop.pname := "z";
-    prop.pvalue := where.z;
-    props[5] := prop;
-
-    AppendConfigFileElem( "golocs", "goloc", locvalue, props );
-
-
-UnloadConfigFile("golocs");
-
-endprogram



From austin at berlios.de  Tue Sep 20 17:07:29 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 17:07:29 +0200
Subject: [Poldistro-svn] r169 - trunk/096/pkg/systems/attributes
Message-ID: <200509201507.j8KF7TIO018703@sheep.berlios.de>

Author: austin
Date: 2005-09-20 17:07:29 +0200 (Tue, 20 Sep 2005)
New Revision: 169

Modified:
   trunk/096/pkg/systems/attributes/attributes.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/attributes.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-20 04:24:44 UTC (rev 168)
+++ trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-20 15:07:29 UTC (rev 169)
@@ -14,247 +14,333 @@
 # Attribute_Name defines the UNIQUE name for this attribute, like 'Cooking', 'Tactics', 'Strength', etc.
 # Aliases are optional and any number maybe be assigned for each attribute.
 # This way 'STR' may be used in place of 'Strength'.
+#
 # At the LEAST, these attributes must be defined:
 # 'Strength', 'Intelligence', 'Dexterity', 'Parry', and 'Tactics' for use in internal calculations.
+#
 # GetIntrinsicModFunction returns a value between -30000 and +30000 that is added to the
 # Attribute "base" value to obtain the "effective" value for the attribute.
 # The function is called when UO.EM RecalVitals is called.
+#
 
-// Custom Attributes
+///////////////////////////////////////
+//
+// ** CUSTOM ATTRIBUTES **
+//
+///////////////////////////////////////
 
 Attribute HitsRegeneration
 {
+	AttributeType	Regen
 }
 
 Attribute ManaRegeneration
 {
+	AttributeType	Regen
 }
 
 Attribute StaminaRegeneration
 {
+	AttributeType	Regen
 }
 
-// Basic Stats
+///////////////////////////////////////
+//
+// ** BASIC STATS **
+//
+///////////////////////////////////////
 
 Attribute Strength
 {
+	AttributeType	Stat
 }
 
 Attribute Intelligence
 {
+	AttributeType	Stat
 }
 
 Attribute Dexterity
 {
+	AttributeType	Stat
 }
 
-// Basic Skills
+///////////////////////////////////////
+//
+// ** SKILLS **
+//
+///////////////////////////////////////
 
 Attribute Alchemy
 {
+	AttributeType	Skill
 }
 
 Attribute Anatomy
 {
+	AttributeType	Skill
 }
 
 Attribute AnimalLore
 {
+	AttributeType	Skill
 }
 
 Attribute ItemIdentification
 {
+	AttributeType	Skill
+	DisplayName	Item Identification
 }
 
 Attribute ArmsLore
 {
+	AttributeType	Skill
 }
 
 Attribute Parrying
 {
-    Alias       Parry
+	Alias       Parry
+	
+	AttributeType	Skill
 }
 
 Attribute Begging
 {
+	AttributeType	Skill
 }
 
 Attribute Blacksmithy
 {
+	AttributeType	Skill
 }
 
 Attribute BowcraftFletching
 {
+	AttributeType	Skill
+	DisplayName	Bowcraft Fletching
 }
 
 Attribute Peacemaking
 {
+	AttributeType	Skill
 }
 
 Attribute Camping
 {
+	AttributeType	Skill
 }
 
 Attribute Carpentry
 {
+	AttributeType	Skill
 }
 
 Attribute Cartography
 {
+	AttributeType	Skill
 }
 
 Attribute Cooking
 {
+	AttributeType	Skill
 }
 
 Attribute DetectingHidden
 {
+	AttributeType	Skill
+	DisplayName	Detect Hidden
 }
 
 Attribute Discordance
 {
+	AttributeType	Skill
 }
 
 Attribute EvaluatingIntelligence
 {
+	AttributeType	Skill
+	DisplayName	Evaluating Intelligence
 }
 
 Attribute Healing
 {
+	AttributeType	Skill
 }
 
 Attribute Fishing
 {
+	AttributeType	Skill
 }
 
 Attribute ForensicEvaluation
 {
+	AttributeType	Skill
+	DisplayName	Forensic Evaluation
 }
 
 Attribute Herding
 {
+	AttributeType	Skill
 }
 
 Attribute Hiding
 {
+	AttributeType	Skill
 }
 
 Attribute Provocation
 {
+	AttributeType	Skill
 }
 
 Attribute Inscription
 {
+	AttributeType	Skill
 }
 
 Attribute Lockpicking
 {
+	AttributeType	Skill
 }
 
 Attribute Magery
 {
+	AttributeType	Skill
 }
 
 Attribute ResistingSpells
 {
+	AttributeType	Skill
+	DisplayName	Resisting Spells
 }
 
 Attribute Tactics
 {
+	AttributeType	Skill
 }
 
 Attribute Snooping
 {
+	AttributeType	Skill
 }
 
 Attribute Musicianship
 {
+	AttributeType	Skill
 }
 
 Attribute Poisoning
 {
+	AttributeType	Skill
 }
 
 Attribute Archery
 {
+	AttributeType	Skill
 }
 
 Attribute SpiritSpeak
 {
+	AttributeType	Skill
+	DisplayName	Spirit Speak
 }
 
 Attribute Stealing
 {
+	AttributeType	Skill
 }
 
 Attribute Tailoring
 {
+	AttributeType	Skill
 }
 
 Attribute AnimalTaming
 {
+	AttributeType	Skill
+	DisplayName	Animal Taming
 }
 
 Attribute TasteIdentification
 {
+	AttributeType	Skill
+	DisplayName	Taste Identification
 }
 
 Attribute Tinkering
 {
+	AttributeType	Skill
 }
 
 Attribute Tracking
 {
+	AttributeType	Skill
 }
 
 Attribute Veterinary
 {
+	AttributeType	Skill
 }
 
 Attribute Swordsmanship
 {
+	AttributeType	Skill
 }
 
 Attribute MaceFighting
 {
+	AttributeType	Skill
+	DisplayName	Mace Fighting
 }
 
 Attribute Fencing
 {
+	AttributeType	Skill
 }
 
 Attribute Wrestling
 {
+	AttributeType	Skill
 }
 
 Attribute Lumberjacking
 {
+	AttributeType	Skill
 }
 
 Attribute Mining
 {
+	AttributeType	Skill
 }
 
 Attribute Meditation
 {
+	AttributeType	Skill
 }
 
 Attribute Stealth
 {
+	AttributeType	Skill
 }
 
 Attribute RemoveTrap
 {
+	AttributeType	Skill
+	DisplayName	Remove Trap
 }
 
 Attribute Necromancy
 {
+	AttributeType	Skill
 }
 
 Attribute BattleFocus
 {
+	AttributeType	Skill
+	DisplayName	Battle Focus
 }
 
 Attribute Chivalry
 {
+	AttributeType	Skill
 }



From austin at berlios.de  Tue Sep 20 17:43:33 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 17:43:33 +0200
Subject: [Poldistro-svn] r170 - trunk/096/pkg/systems/attributes
Message-ID: <200509201543.j8KFhX8Q021545@sheep.berlios.de>

Author: austin
Date: 2005-09-20 17:43:32 +0200 (Tue, 20 Sep 2005)
New Revision: 170

Modified:
   trunk/096/pkg/systems/attributes/attributes.cfg
Log:
Finished

Modified: trunk/096/pkg/systems/attributes/attributes.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-20 15:07:29 UTC (rev 169)
+++ trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-20 15:43:32 UTC (rev 170)
@@ -74,273 +74,432 @@
 Attribute Alchemy
 {
 	AttributeType	Skill
+	SkilliD		0
+	
+	StatCheck	Dexterity	100	1d1+20
+	StatCheck	Intelligence	100	1d4+20
 }
 
 Attribute Anatomy
 {
 	AttributeType	Skill
+	SkillId		1
+	
+	StatCheck	Intelligence	100	1d2+10
 }
 
 Attribute AnimalLore
 {
 	AttributeType	Skill
+	SkillId		2
+	
+	StatCheck	Intelligence	100	1d4+20
 }
 
 Attribute ItemIdentification
 {
 	AttributeType	Skill
 	DisplayName	Item Identification
+	SkillId		3
+	
+	StatCheck	Intelligence	100	1d3+15
 }
 
 Attribute ArmsLore
 {
 	AttributeType	Skill
+	SkillId		4
+	
+	StatCheck	Intelligence	100	1d1+10
+	StatCheck	Strength	100	1d2+10
 }
 
 Attribute Parrying
 {
-	Alias       Parry
+	AttributeType	Skill
+	SkillId		5
 	
-	AttributeType	Skill
+	StatCheck	Strength	100	1d2+20
 }
 
 Attribute Begging
 {
 	AttributeType	Skill
+	SkillId		6
+	
+	StatCheck	Intelligence	100	1d1+20
 }
 
 Attribute Blacksmithy
 {
 	AttributeType	Skill
+	SkillId		7
+	
+	StatCheck	Strength	100	1d4+20
 }
 
 Attribute BowcraftFletching
 {
 	AttributeType	Skill
 	DisplayName	Bowcraft Fletching
+	SkillId		8
+	
+	StatCheck	Dexterity	100	1d3+20
+	StatCheck	Strength	100	1d4+20
 }
 
 Attribute Peacemaking
 {
 	AttributeType	Skill
+	SkillId		9
+	
+	StatCheck	Intelligence	100	1d2
 }
 
 Attribute Camping
 {
 	AttributeType	Skill
+	SkillId		10
+	
+	StatCheck	Intelligence	100	1d2+10
+	StatCheck	Strength	100	1d2+10
 }
 
 Attribute Carpentry
 {
 	AttributeType	Skill
+	SkillId		11
+	
+	StatCheck	Strength	100	1d4+25
 }
 
 Attribute Cartography
 {
 	AttributeType	Skill
+	SkillId		12
+	
+	StatCheck	Intelligence	100	1d2+10
 }
 
 Attribute Cooking
 {
 	AttributeType	Skill
+	SkillId		13
+	
+	StatCheck	Intelligence	100	1d2+10
 }
 
 Attribute DetectingHidden
 {
 	AttributeType	Skill
 	DisplayName	Detect Hidden
+	SkillId		14
+	
+	StatCheck	Intelligence	100	1d4+20
 }
 
 Attribute Discordance
 {
 	AttributeType	Skill
+	SkillId		15
+	
+	StatCheck	Intelligence	20	2d4
 }
 
 Attribute EvaluatingIntelligence
 {
 	AttributeType	Skill
 	DisplayName	Evaluating Intelligence
+	SkillId		16
+	
+	StatCheck	Intelligence	100	1d4+20
 }
 
 Attribute Healing
 {
 	AttributeType	Skill
+	SkillId		17
+	
+	StatCheck	Dexterity	100	1d1+10
 }
 
 Attribute Fishing
 {
 	AttributeType	Skill
+	SkillId		18
+	
+	StatCheck	Dexterity	100	1d4+20
+	StatCheck	Strength	100	1d4+20
 }
 
 Attribute ForensicEvaluation
 {
 	AttributeType	Skill
 	DisplayName	Forensic Evaluation
+	SkillId		19
+	
+	StatCheck	Intelligence	100	1d4+20
 }
 
 Attribute Herding
 {
 	AttributeType	Skill
+	SkillId		20
+	
+	StatCheck	Strength	100	1d4+20
 }
 
 Attribute Hiding
 {
 	AttributeType	Skill
+	SkillId		21
+	
+	StatCheck	Dexterity	100	1d4+20
 }
 
 Attribute Provocation
 {
 	AttributeType	Skill
+	SkillId		22
+	
+	StatCheck	Dexterity	100	1d2
 }
 
 Attribute Inscription
 {
 	AttributeType	Skill
+	SkillId		23
+	
+	StatCheck	Intelligence	100	1d4+20
 }
 
 Attribute Lockpicking
 {
 	AttributeType	Skill
+	SkillId		24
+	
+	StatCheck	Dexterity	100	1d3+10
 }
 
 Attribute Magery
 {
 	AttributeType	Skill
+	SkillId		25
+	
+	StatCheck	Intelligence	100	1d4+20
 }
 
 Attribute ResistingSpells
 {
 	AttributeType	Skill
 	DisplayName	Resisting Spells
+	SkillId		26
 }
 
 Attribute Tactics
 {
 	AttributeType	Skill
+	SkillId		27
 }
 
 Attribute Snooping
 {
 	AttributeType	Skill
+	SkillId		28
+	
+	StatCheck	Dexterity	80	4d6+10
 }
 
 Attribute Musicianship
 {
 	AttributeType	Skill
+	SkillId		29
+	
+	StatCheck	Dexterity	100	1d4+20
+	StatCheck	Intelligence	100	1d2+10
 }
 
 Attribute Poisoning
 {
 	AttributeType	Skill
+	SkillId		30
+	
+	StatCheck	Dexterity	100	1d4+20
+	StatCheck	Intelligence	100	1d2+10
 }
 
 Attribute Archery
 {
 	AttributeType	Skill
+	SkillId		31
+	
+	StatCheck	Dexterity	100	1d4+20
+	StatCheck	Strength	100	1d2+10
 }
 
 Attribute SpiritSpeak
 {
 	AttributeType	Skill
 	DisplayName	Spirit Speak
+	SkillId		32
+	
+	StatCheck	Intelligence	100	1d4+20
 }
 
 Attribute Stealing
 {
 	AttributeType	Skill
+	SkillId		33
+	
+	StatCheck	Dexterity	90	3d4+9
 }
 
 Attribute Tailoring
 {
 	AttributeType	Skill
+	SkillId		34
+	
+	StatCheck	Dexterity	100	1d1+10
 }
 
 Attribute AnimalTaming
 {
 	AttributeType	Skill
 	DisplayName	Animal Taming
+	SkillId		35
+	
+	StatCheck	Intelligence	100	1d3+10
+	StatCheck	Strength	100	1d4+20
 }
 
 Attribute TasteIdentification
 {
 	AttributeType	Skill
 	DisplayName	Taste Identification
+	SkillId		36
+	
+	StatCheck	Intelligence	100	1d4+20
 }
 
 Attribute Tinkering
 {
 	AttributeType	Skill
+	SkillId		37
+	
+	StatCheck	Intelligence	100	1d4+20
+	StatCheck	Strength	100	1d4+20
 }
 
 Attribute Tracking
 {
 	AttributeType	Skill
+	SkillId		38
+	
+	StatCheck	Dexterity	100	1d2+10
+	StatCheck	Intelligence	100	1d4+20
 }
 
 Attribute Veterinary
 {
 	AttributeType	Skill
+	SkillId		39
+	
+	StatCheck	Intelligence	100	1d2+10
 }
 
 Attribute Swordsmanship
 {
 	AttributeType	Skill
+	SkillId		40
+	
+	StatCheck	Dexterity	100	1d3
+	StatCheck	Strength	100	1d3+20
 }
 
 Attribute MaceFighting
 {
 	AttributeType	Skill
 	DisplayName	Mace Fighting
+	SkillId		41
+	
+	StatCheck	Dexterity	100	1d2
+	StatCheck	Strength	100	1d4+30
 }
 
 Attribute Fencing
 {
 	AttributeType	Skill
+	SkillId		42
+	
+	StatCheck	Dexterity	100	1d3+10
+	StatCheck	Strength	100	1d2+10
 }
 
 Attribute Wrestling
 {
 	AttributeType	Skill
+	SkillId		43
+	
+	StatCheck	Dexterity	100	1d4
+	StatCheck	Strength	100	1d2+20
 }
 
 Attribute Lumberjacking
 {
 	AttributeType	Skill
+	SkillId		44
+	
+	StatCheck	Strength	100	1d4+20
 }
 
 Attribute Mining
 {
 	AttributeType	Skill
+	SkillId		45
+	
+	StatCheck	Strength	100	1d4+20
 }
 
 Attribute Meditation
 {
 	AttributeType	Skill
+	SkillId		46
+	
+	StatCheck	Intelligence	100	1d4+20
 }
 
 Attribute Stealth
 {
 	AttributeType	Skill
+	SkillId		47
+	
+	StatCheck	Dexterity	100	1d4+20
 }
 
 Attribute RemoveTrap
 {
 	AttributeType	Skill
 	DisplayName	Remove Trap
+	SkillId		48
+	
+	StatCheck	Dexterity	100	1d4+20
 }
 
 Attribute Necromancy
 {
 	AttributeType	Skill
+	SkillId		49
 }
 
 Attribute BattleFocus
 {
 	AttributeType	Skill
 	DisplayName	Battle Focus
+	SkillId		50
 }
 
 Attribute Chivalry
 {
 	AttributeType	Skill
+	SkillId		51
 }



From austin at berlios.de  Tue Sep 20 18:20:43 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 18:20:43 +0200
Subject: [Poldistro-svn] r171 - trunk/096/pkg/systems/attributes
Message-ID: <200509201620.j8KGKhgd024619@sheep.berlios.de>

Author: austin
Date: 2005-09-20 18:20:42 +0200 (Tue, 20 Sep 2005)
New Revision: 171

Modified:
   trunk/096/pkg/systems/attributes/attributes.cfg
Log:
Script entries..

Modified: trunk/096/pkg/systems/attributes/attributes.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-20 15:43:32 UTC (rev 170)
+++ trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-20 16:20:42 UTC (rev 171)
@@ -83,6 +83,7 @@
 Attribute Anatomy
 {
 	AttributeType	Skill
+	Script		:anatomy:anatomy
 	SkillId		1
 	
 	StatCheck	Intelligence	100	1d2+10
@@ -91,6 +92,7 @@
 Attribute AnimalLore
 {
 	AttributeType	Skill
+	Script		:animallore:animalLore
 	SkillId		2
 	
 	StatCheck	Intelligence	100	1d4+20
@@ -100,6 +102,7 @@
 {
 	AttributeType	Skill
 	DisplayName	Item Identification
+	Script		:itemid:itemID
 	SkillId		3
 	
 	StatCheck	Intelligence	100	1d3+15
@@ -108,6 +111,7 @@
 Attribute ArmsLore
 {
 	AttributeType	Skill
+	Script		:armslore:armsLore
 	SkillId		4
 	
 	StatCheck	Intelligence	100	1d1+10
@@ -125,6 +129,7 @@
 Attribute Begging
 {
 	AttributeType	Skill
+	Script		:begging:begging
 	SkillId		6
 	
 	StatCheck	Intelligence	100	1d1+20
@@ -176,6 +181,7 @@
 Attribute Cartography
 {
 	AttributeType	Skill
+	Script		:cartography:cartography
 	SkillId		12
 	
 	StatCheck	Intelligence	100	1d2+10
@@ -193,6 +199,7 @@
 {
 	AttributeType	Skill
 	DisplayName	Detect Hidden
+	Script		:detecthidden:detectHidden
 	SkillId		14
 	
 	StatCheck	Intelligence	100	1d4+20
@@ -209,6 +216,7 @@
 Attribute EvaluatingIntelligence
 {
 	AttributeType	Skill
+	Script		:evalint:evalInt
 	DisplayName	Evaluating Intelligence
 	SkillId		16
 	
@@ -235,6 +243,7 @@
 Attribute ForensicEvaluation
 {
 	AttributeType	Skill
+	Script		:forensicevaluation:forensic
 	DisplayName	Forensic Evaluation
 	SkillId		19
 	
@@ -252,6 +261,7 @@
 Attribute Hiding
 {
 	AttributeType	Skill
+	Script		:hiding:hiding
 	SkillId		21
 	
 	StatCheck	Dexterity	100	1d4+20
@@ -341,6 +351,7 @@
 {
 	AttributeType	Skill
 	DisplayName	Spirit Speak
+	Script		:spiritspeak:spiritSpeak
 	SkillId		32
 	
 	StatCheck	Intelligence	100	1d4+20
@@ -366,6 +377,7 @@
 {
 	AttributeType	Skill
 	DisplayName	Animal Taming
+	Script		:taming:taming
 	SkillId		35
 	
 	StatCheck	Intelligence	100	1d3+10



From austin at berlios.de  Tue Sep 20 18:27:23 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 18:27:23 +0200
Subject: [Poldistro-svn] r172 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509201627.j8KGRNeA025134@sheep.berlios.de>

Author: austin
Date: 2005-09-20 18:27:23 +0200 (Tue, 20 Sep 2005)
New Revision: 172

Added:
   trunk/096/pkg/systems/attributes/include/folko-attributes.inc
   trunk/096/pkg/systems/attributes/include/stats.inc
   trunk/096/pkg/systems/attributes/include/vitals.inc
Removed:
   trunk/096/pkg/systems/attributes/include/attributes.inc
Log:


Deleted: trunk/096/pkg/systems/attributes/include/attributes.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-20 16:20:42 UTC (rev 171)
+++ trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-20 16:27:23 UTC (rev 172)
@@ -1,204 +0,0 @@
-/* $Id: attributes.inc,v 1.5 2004/05/02 12:20:56 melanius Exp $
- *
- * Purpose
- * Provide various functions and constants for the attribute system.
- *
- */
-use uo;
-
-enum ATTRIBUTE_CUSTOM
-	ATTRIBUTE_HITS_REGENERATION         := "HitsRegeneration",
-	ATTRIBUTE_MANA_REGENERATION         := "ManaRegeneration",
-	ATTRIBUTE_STAMINA_REGENERATION      := "StaminaRegeneration"
-endenum
-
-enum ATTRIBUTE_STATS
-	ATTRIBUTE_STRENGTH                  := "Strength",
-	ATTRIBUTE_DEXTERITY                 := "Dexterity",
-	ATTRIBUTE_INTELLIGENCE              := "Intelligence"
-endenum
-
-enum ATTRIBUTE_SKILLS
-	ATTRIBUTE_ALCHEMY                   := "Alchemy",
-	ATTRIBUTE_ANATOMY                   := "Anatomy",
-	ATTRIBUTE_ANIMAL_LORE               := "AnimalLore",
-	ATTRIBUTE_ITEM_IDENTIFICATION       := "ItemIdentification",
-	ATTRIBUTE_ARMS_LORE                 := "ArmsLore",
-	ATTRIBUTE_PARRYING                  := "Parrying",
-	ATTRIBUTE_BEGGING                   := "Begging",
-	ATTRIBUTE_BLACKSMITHY               := "Blacksmithy",
-	ATTRIBUTE_BOWCRAFT_FLETCHING        := "BowcraftFletching",
-    ATTRIBUTE_PEACEMAKING               := "Peacemaking",
-    ATTRIBUTE_CAMPING                   := "Camping",
-    ATTRIBUTE_CARPENTRY                 := "Carpentry",
-    ATTRIBUTE_CARTOGRAPHY               := "Cartography",
-    ATTRIBUTE_COOKING                   := "Cooking",
-    ATTRIBUTE_DETECTING_HIDDEN          := "DetectingHidden",
-    ATTRIBUTE_DISCORDANCE               := "Discordance",
-    ATTRIBUTE_EVALUATING_INTELLIGENCE   := "EvaluatingIntelligence",
-    ATTRIBUTE_HEALING                   := "Healing",
-    ATTRIBUTE_FISHING                   := "Fishing",
-    ATTRIBUTE_FORENSIC_EVALUATION       := "ForensicEvaluation",
-    ATTRIBUTE_HERDING                   := "Herding",
-    ATTRIBUTE_HIDING                    := "Hiding",
-    ATTRIBUTE_PROVOCATION               := "Provocation",
-    ATTRIBUTE_INSCRIPTION               := "Inscription",
-    ATTRIBUTE_LOCKPICKING               := "Lockpicking",
-    ATTRIBUTE_MAGERY                    := "Magery",
-    ATTRIBUTE_RESISTING_SPELLS          := "ResistingSpells",
-    ATTRIBUTE_TACTICS                   := "Tactics",
-    ATTRIBUTE_SNOOPING                  := "Snooping",
-    ATTRIBUTE_MUSICIANSHIP              := "Musicianship",
-    ATTRIBUTE_POISONING                 := "Poisoning",
-    ATTRIBUTE_ARCHERY                   := "Archery",
-    ATTRIBUTE_SPIRIT_SPEAK              := "SpiritSpeak",
-    ATTRIBUTE_STEALING                  := "Stealing",
-    ATTRIBUTE_TAILORING                 := "Tailoring",
-    ATTRIBUTE_ANIMAL_TAMING             := "AnimalTaming",
-    ATTRIBUTE_TASTE_IDENTIFICATION      := "TasteIdentification",
-    ATTRIBUTE_TINKERING                 := "Tinkering",
-    ATTRIBUTE_TRACKING                  := "Tracking",
-    ATTRIBUTE_VETERINARY                := "Veterinary",
-    ATTRIBUTE_SWORDSMANSHIP             := "Swordsmanship",
-    ATTRIBUTE_MACE_FIGHTING             := "MaceFighting",
-    ATTRIBUTE_FENCING                   := "Fencing",
-    ATTRIBUTE_WRESTLING                 := "Wrestling",
-    ATTRIBUTE_LUMBERJACKING             := "Lumberjacking",
-    ATTRIBUTE_MINING                    := "Mining",
-    ATTRIBUTE_MEDITATION                := "Meditation",
-    ATTRIBUTE_STEALTH                   := "Stealth",
-    ATTRIBUTE_REMOVE_TRAP               := "RemoveTrap",
-    ATTRIBUTE_NECROMANCY                := "Necromancy",
-    ATTRIBUTE_BATTLE_FOCUS              := "BattleFocus",
-    ATTRIBUTE_CHIVALRY                  := "Chivalry"
-endenum
-
-
-/*
- * GetCustomAttributes()
- *
- * Author: Melanius [x90]
- * Last-Edit: Folko
- *
- * Purpose
- * Returns an array with all the custom attribute names.
- *
- * Parameters
- * No parameters
- *
- * Return value
- * Array containing the names of all custom attributes.
- *
- */
-function GetCustomAttributes()
-	return(
-		{
-			ATTRIBUTE_HITS_REGENERATION,
-			ATTRIBUTE_MANA_REGENERATION,
-			ATTRIBUTE_STAMINA_REGENERATION
-		}
-	);
-endfunction
-
-
-/*
- * GetStatAttributes()
- *
- * Author: Melanius [x90]
- * Last-Edit: Folko
- *
- * Purpose
- * Returns an array with the names of all stat attributes.
- *
- * Parameters
- * No parameters
- *
- * Return value
- * Array containing the names of all stat attribuets.
- *
- */
-function GetStatAttributes()
-	return(
-		{
-			ATTRIBUTE_STRENGTH,
-			ATTRIBUTE_DEXTERITY,
-			ATTRIBUTE_INTELLIGENCE
-		}
-	);
-endfunction
-
-
-/*
- * GetSkillAttributes()
- *
- * Author: Melanius [x90]
- * Last-Edit: Folko
- *
- * Purpose
- * Returns an array with the names of all skill attributes.
- *
- * Parameters
- * No parameters
- *
- * Return value
- * Array containing the names of all attributes.
- *
- */
-function GetSkillAttributes()
-	return(
-		{
-			ATTRIBUTE_ALCHEMY,
-			ATTRIBUTE_ANATOMY,
-			ATTRIBUTE_ANIMAL_LORE,
-            ATTRIBUTE_ITEM_IDENTIFICATION,
-            ATTRIBUTE_ARMS_LORE,
-            ATTRIBUTE_PARRYING,
-            ATTRIBUTE_BEGGING,
-            ATTRIBUTE_BLACKSMITHY,
-            ATTRIBUTE_BOWCRAFT_FLETCHING,
-            ATTRIBUTE_PEACEMAKING,
-            ATTRIBUTE_CAMPING,
-            ATTRIBUTE_CARPENTRY,
-            ATTRIBUTE_CARTOGRAPHY,
-            ATTRIBUTE_COOKING,
-            ATTRIBUTE_DETECTING_HIDDEN,
-            ATTRIBUTE_DISCORDANCE,
-            ATTRIBUTE_EVALUATING_INTELLIGENCE,
-            ATTRIBUTE_HEALING,
-            ATTRIBUTE_FISHING,
-            ATTRIBUTE_FORENSIC_EVALUATION,
-            ATTRIBUTE_HERDING,
-            ATTRIBUTE_HIDING,
-            ATTRIBUTE_PROVOCATION,
-            ATTRIBUTE_INSCRIPTION,
-            ATTRIBUTE_LOCKPICKING,
-            ATTRIBUTE_MAGERY,
-            ATTRIBUTE_RESISTING_SPELLS,
-            ATTRIBUTE_TACTICS,
-            ATTRIBUTE_SNOOPING,
-            ATTRIBUTE_MUSICIANSHIP,
-            ATTRIBUTE_POISONING,
-            ATTRIBUTE_ARCHERY,
-            ATTRIBUTE_SPIRIT_SPEAK,
-            ATTRIBUTE_STEALING,
-            ATTRIBUTE_TAILORING,
-            ATTRIBUTE_ANIMAL_TAMING,
-            ATTRIBUTE_TASTE_IDENTIFICATION,
-            ATTRIBUTE_TINKERING,
-            ATTRIBUTE_TRACKING,
-            ATTRIBUTE_VETERINARY,
-            ATTRIBUTE_SWORDSMANSHIP,
-            ATTRIBUTE_MACE_FIGHTING,
-            ATTRIBUTE_FENCING,
-            ATTRIBUTE_WRESTLING,
-            ATTRIBUTE_LUMBERJACKING,
-            ATTRIBUTE_MINING,
-            ATTRIBUTE_MEDITATION,
-            ATTRIBUTE_STEALTH,
-            ATTRIBUTE_REMOVE_TRAP,
-			ATTRIBUTE_NECROMANCY,
-			ATTRIBUTE_BATTLE_FOCUS,
-			ATTRIBUTE_CHIVALRY
-		}
-	);
-endfunction

Copied: trunk/096/pkg/systems/attributes/include/folko-attributes.inc (from rev 168, trunk/096/pkg/systems/attributes/include/attributes.inc)

Added: trunk/096/pkg/systems/attributes/include/stats.inc
===================================================================

Added: trunk/096/pkg/systems/attributes/include/vitals.inc
===================================================================



From austin at berlios.de  Tue Sep 20 18:29:13 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 18:29:13 +0200
Subject: [Poldistro-svn] r173 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509201629.j8KGTDQD025226@sheep.berlios.de>

Author: austin
Date: 2005-09-20 18:29:13 +0200 (Tue, 20 Sep 2005)
New Revision: 173

Added:
   trunk/096/pkg/systems/attributes/include/attributes.inc
   trunk/096/pkg/systems/attributes/include/regen.inc
   trunk/096/pkg/systems/attributes/include/skills.inc
Log:


Added: trunk/096/pkg/systems/attributes/include/attributes.inc
===================================================================

Added: trunk/096/pkg/systems/attributes/include/regen.inc
===================================================================

Added: trunk/096/pkg/systems/attributes/include/skills.inc
===================================================================



From muaddiblsd at berlios.de  Tue Sep 20 19:27:21 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Tue, 20 Sep 2005 19:27:21 +0200
Subject: [Poldistro-svn] r174 - in trunk/096/pkg/commands: . config include seer
Message-ID: <200509201727.j8KHRLhA016332@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-20 19:27:16 +0200 (Tue, 20 Sep 2005)
New Revision: 174

Added:
   trunk/096/pkg/commands/config/
   trunk/096/pkg/commands/config/icp.cfg
   trunk/096/pkg/commands/include/go-text.inc
Removed:
   trunk/096/pkg/commands/seer/goxyz.src
Modified:
   trunk/096/pkg/commands/include/go-add.inc
   trunk/096/pkg/commands/include/go-edit.inc
   trunk/096/pkg/commands/include/go-gumps.inc
   trunk/096/pkg/commands/include/go-template.inc
   trunk/096/pkg/commands/seer/go.src
Log:
Upgraded commands pkg to be ICP compliant.
Added .go to ICP Commands.
Updated .go for text parsing and other features.
Upgraded .go for full realm support.
Deleted .goxyz.src and combined it with .go.


Added: trunk/096/pkg/commands/config/icp.cfg
===================================================================
--- trunk/096/pkg/commands/config/icp.cfg	2005-09-20 16:29:13 UTC (rev 173)
+++ trunk/096/pkg/commands/config/icp.cfg	2005-09-20 17:27:16 UTC (rev 174)
@@ -0,0 +1,15 @@
+ICP Register
+{
+        Name            Text Commands
+        Version         1.0
+        Description     Main Package for Text Commands.
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+
+        //TextCmd       cmdlevel path
+        TextCmd         2 :commands:seer/go
+}

Modified: trunk/096/pkg/commands/include/go-add.inc
===================================================================
--- trunk/096/pkg/commands/include/go-add.inc	2005-09-20 16:29:13 UTC (rev 173)
+++ trunk/096/pkg/commands/include/go-add.inc	2005-09-20 17:27:16 UTC (rev 174)
@@ -5,24 +5,26 @@
 
         if (!targ)
                 SendSysMessage(who, "Cancelled");
-                return;
+                return 0;
         endif
 
         var name := RequestInput(who, who.backpack, "What do you want to call this go location?");
 
         if ( !name )
                 SendSysMessage(who, "Cancelled");
-                return;
+                return 0;
         endif
 
         go_prop := go_elem.GetProp(who.acctname);
-        if ( go_prop.exists(lower(name)) )
-                SendSysMessage(who, "You already have a go location named ["+name+"]");
-                return;
+        if ( go_prop.Exists(lower(name)) )
+                GumpPrompt(who, "You already have a go location named ["+name+"]");
+                return 0;
         endif
 
         Go_SetLocation(who.acctname, who, name, targ.realm, targ.x, targ.y, targ.z);
 
+        return 0;
+
 endfunction
 
 function Go_AddPublicLocation(who)
@@ -32,24 +34,26 @@
 
         if (!targ)
                 SendSysMessage(who, "Cancelled");
-                return;
+                return 0;
         endif
 
         var name := RequestInput(who, who.backpack, "What do you want to call this go location?");
 
         if ( !name )
                 SendSysMessage(who, "Cancelled");
-                return;
+                return 0;
         endif
 
         go_prop_base := go_elem.GetProp("base_Distro");
-        if ( go_prop_base.exists(lower(name)) )
-                SendSysMessage(who, "You already have a go location named ["+name+"]");
-                return;
+        if ( go_prop_base.Exists(lower(name)) )
+                GumpPrompt(who, "You already have a go location named ["+name+"]");
+                return 0;
         endif
 
         Go_SetLocation("base_Distro", who, name, targ.realm, targ.x, targ.y, targ.z);
 
+        return 0;
+
 endfunction
 
 function Go_CopyPublicLocation(who)
@@ -57,7 +61,6 @@
         var gump := Go_RetrieveGump("CopyIndex", "base_Distro");
         num_keys := go_keys_base.size();
         if  ( !gump )
-                SendSysMessage(who, "Building go public copy gump...");
                 gump := Go_PublicCopyGump();
                 Go_SaveGump("CopyIndex", gump, "base_Distro");
         endif
@@ -70,24 +73,26 @@
                 send_Location := go_prop_base[lower(go_keys_base[input])];
                 if ( send_Location )
                         go_prop_base := go_elem.GetProp("base_Distro");
-                        if ( go_prop.exists(lower(send_Location.Name)) )
-                                SendSysMessage(who, "You already have a go location named ["+send_Location.Name+"]");
-                                return;
+                        if ( go_prop.Exists(lower(send_Location.Name)) )
+                                GumpPrompt(who, "You already have a go location named ["+send_Location.Name+"]");
+                                return 0;
                         endif
                         SendSysMessage(who, "Copying [" + send_Location.Name + "] to your personal menu.");
                         Go_SetLocation(who.acctname, who, send_Location.Name, send_Location.Realm, send_Location.X, send_Location.Y, send_Location.Z);
-                        return;
+                        return 0;
                 else
-                        SendSysMessage(who, "Location [" + send_Location.Name + "] does not exist.");
+                        GumpPrompt(who, "Location [" + send_Location.Name + "] does not exist.");
                         Go_RefreshMyGumps(who);
-                        return;
+                        return 0;
                 endif
         else
                 SendSysMessage(who, "Copying Cancelled");
                 Go_RefreshMyGumps(who);
-                return;
+                return 0;
         endif
 
+        return 0;
+
 endfunction
 
 function Go_CopyPrivateLocation(who)
@@ -95,7 +100,6 @@
         var gump := Go_RetrieveGump("CopyIndex", who.acctname);
         num_keys := go_keys.size();
         if  ( !gump )
-                SendSysMessage(who, "Building go private copy gump...");
                 gump := Go_PrivateCopyGump();
                 Go_SaveGump("CopyIndex", gump, who.acctname);
         endif
@@ -108,24 +112,26 @@
                 send_Location := go_prop[lower(go_keys[input])];
                 if ( send_Location )
                         go_prop := go_elem.GetProp(who.acctname);
-                        if ( go_prop_base.exists(lower(send_Location.Name)) )
-                                SendSysMessage(who, "You already have a public go location named ["+send_Location.Name+"]");
-                                return;
+                        if ( go_prop_base.Exists(lower(send_Location.Name)) )
+                                GumpPrompt(who, "You already have a public go location named ["+send_Location.Name+"]");
+                                return 0;
                         endif
                         SendSysMessage(who, "Copying [" + send_Location.Name + "] to the public menu.");
                         Go_SetLocation("base_Distro", who, send_Location.Name, send_Location.Realm, send_Location.X, send_Location.Y, send_Location.Z);
-                        return;
+                        return 0;
                 else
-                        SendSysMessage(who, "Location [" + send_Location.Name + "] does not exist.");
+                        GumpPrompt(who, "Location [" + send_Location.Name + "] does not exist.");
                         Go_RefreshMyGumps(who);
-                        return;
+                        return 0;
                 endif
         else
                 SendSysMessage(who, "Copying Cancelled");
                 Go_RefreshMyGumps(who);
-                return;
+                return 0;
         endif
 
+        return 0;
+
 endfunction
 
 function Go_SetLocation(gump_Type, who, name, realm, x, y, z)
@@ -138,7 +144,7 @@
 
         var temp := dictionary;
         temp.+Name := lower(name);
-        temp.+Realm := realm;
+        temp.+Realm := lower(realm);
         temp.+X := x;
         temp.+Y := y;
         temp.+Z := z;
@@ -150,6 +156,8 @@
         endcase
         Go_RefreshMyGumps(who);
 
+        return 0;
+
 endfunction
 
 function Go_PublicCopyGump()

Modified: trunk/096/pkg/commands/include/go-edit.inc
===================================================================
--- trunk/096/pkg/commands/include/go-edit.inc	2005-09-20 16:29:13 UTC (rev 173)
+++ trunk/096/pkg/commands/include/go-edit.inc	2005-09-20 17:27:16 UTC (rev 174)
@@ -14,24 +14,24 @@
 
                         if ( edit_input[edit_update] )
                                 edit_name := GFExtractData(edit_input, edit_name);
-                                x_pos := CInt(GFExtractData(edit_input, x_pos));
-                                y_pos := CInt(GFExtractData(edit_input, y_pos));
-                                z_pos := CInt(GFExtractData(edit_input, z_pos));
+                                xg_pos := CInt(GFExtractData(edit_input, xg_pos));
+                                yg_pos := CInt(GFExtractData(edit_input, yg_pos));
+                                zg_pos := CInt(GFExtractData(edit_input, zg_pos));
 
                                 if ( !edit_name )
-                                        SendSysMessage(who, "Cancelled - No name entered");
-                                        return;
+                                        GumpPrompt(who, "Cancelled - No name entered");
+                                        return 0;
                                 elseif ( lower(edit_name) != send_Location.Name )
-                                        if ( go_prop_base.exists( Lower(edit_name) ) )
-                                                SendSysMessage(who, "Cancelled - location already exists with the name ["+edit_name+"]");
-                                                return;
+                                        if ( go_prop_base.Exists( Lower(edit_name) ) )
+                                                GumpPrompt(who, "Cancelled - location already exists with the name ["+edit_name+"]");
+                                                return 0;
                                         endif
                                 endif
 
                                 var original_Realm := send_Location.Realm;
                                 go_prop_base.erase(lower(send_Location.Name));
                                 go_elem.SetProp("base_Distro", go_prop_base);
-                                Go_SetLocation("base_Distro", who, edit_name, original_Realm, x_pos, y_pos, z_pos);
+                                Go_SetLocation("base_Distro", who, edit_name, original_Realm, xg_pos, yg_pos, zg_pos);
                                 SendSysMessage(who, "Updated ["+edit_name+"]");
                                 Go_RefreshMyGumps(who);
                         elseif ( edit_input[edit_delete] )
@@ -43,14 +43,16 @@
                                 SendSysMessage(who, "Cancelled");
                         endif
                 else
-                        SendSysMessage(who, "Location [" + send_Location.Name + "] does not exist.");
-                        return;
+                        GumpPrompt(who, "Location [" + send_Location.Name + "] does not exist.");
+                        return 0;
                 endif
         else
                 SendSysMessage(who, "Editing Cancelled");
-                return;
+                return 0;
         endif
 
+        return 0;
+
 endfunction
 
 function Go_EditPrivateLocation(who)
@@ -69,24 +71,24 @@
 
                         if ( edit_input[edit_update] )
                                 edit_name := GFExtractData(edit_input, edit_name);
-                                x_pos := CInt(GFExtractData(edit_input, x_pos));
-                                y_pos := CInt(GFExtractData(edit_input, y_pos));
-                                z_pos := CInt(GFExtractData(edit_input, z_pos));
+                                xg_pos := CInt(GFExtractData(edit_input, xg_pos));
+                                yg_pos := CInt(GFExtractData(edit_input, yg_pos));
+                                zg_pos := CInt(GFExtractData(edit_input, zg_pos));
 
                                 if ( !edit_name )
-                                        SendSysMessage(who, "Cancelled - No name entered");
-                                        return;
+                                        GumpPrompt(who, "Cancelled - No name entered");
+                                        return 0;
                                 elseif ( lower(edit_name) != send_Location.Name )
-                                        if ( go_prop_base.exists( Lower(edit_name) ) )
-                                                SendSysMessage(who, "Cancelled - location already exists with the name ["+edit_name+"]");
-                                                return;
+                                        if ( go_prop_base.Exists( Lower(edit_name) ) )
+                                                GumpPrompt(who, "Cancelled - location already exists with the name ["+edit_name+"]");
+                                                return 0;
                                         endif
                                 endif
 
                                 var original_Realm := send_Location.Realm;
                                 go_prop.erase(lower(send_Location.Name));
                                 go_elem.SetProp(who.acctname, go_prop);
-                                Go_SetLocation(who.acctname, who, edit_name, original_Realm, x_pos, y_pos, z_pos);
+                                Go_SetLocation(who.acctname, who, edit_name, original_Realm, xg_pos, yg_pos, zg_pos);
                                 SendSysMessage(who, "Updated ["+edit_name+"]");
                                 Go_RefreshMyGumps(who);
                         elseif ( edit_input[edit_delete] )
@@ -98,14 +100,16 @@
                                 SendSysMessage(who, "Cancelled");
                         endif
                 else
-                        SendSysMessage(who, "Location [" + send_Location.Name + "] does not exist.");
-                        return;
+                        GumpPrompt(who, "Location [" + send_Location.Name + "] does not exist.");
+                        return 0;
                 endif
         else
                 SendSysMessage(who, "Editing Cancelled");
-                return;
+                return 0;
         endif
 
+        return 0;
+
 endfunction
 
 function Go_PublicEditGump()
@@ -215,15 +219,15 @@
 
         GFTextLine(gump, 20, 143, 2100, "X Coordinate");
         GFResizePic(gump, 120, 140, 2620, 100, 30);
-        x_pos := GFTextEntry(gump, 130, 145, 80, 25, 2100, send_Location.X);
+        xg_pos := GFTextEntry(gump, 130, 145, 80, 25, 2100, send_Location.X);
 
         GFTextLine(gump, 20, 166, 2100, "Y Coordinate");
         GFResizePic(gump, 120, 163, 2620, 100, 30);
-        y_pos := GFTextEntry(gump, 130, 168, 80, 25, 2100, send_Location.Y);
+        yg_pos := GFTextEntry(gump, 130, 168, 80, 25, 2100, send_Location.Y);
 
         GFTextLine(gump, 20, 189, 2100, "Z Coordinate");
         GFResizePic(gump, 120, 186, 2620, 100, 30);
-        z_pos := GFTextEntry(gump, 130, 191, 80, 25, 2100, send_Location.Z);
+        zg_pos := GFTextEntry(gump, 130, 191, 80, 25, 2100, send_Location.Z);
 
         return gump;
 
@@ -248,15 +252,15 @@
 
         GFTextLine(gump, 20, 143, 2100, "X Coordinate");
         GFResizePic(gump, 120, 140, 2620, 100, 30);
-        x_pos := GFTextEntry(gump, 130, 145, 80, 25, 2100, send_Location.X);
+        xg_pos := GFTextEntry(gump, 130, 145, 80, 25, 2100, send_Location.X);
 
         GFTextLine(gump, 20, 166, 2100, "Y Coordinate");
         GFResizePic(gump, 120, 163, 2620, 100, 30);
-        y_pos := GFTextEntry(gump, 130, 168, 80, 25, 2100, send_Location.Y);
+        yg_pos := GFTextEntry(gump, 130, 168, 80, 25, 2100, send_Location.Y);
 
         GFTextLine(gump, 20, 189, 2100, "Z Coordinate");
         GFResizePic(gump, 120, 186, 2620, 100, 30);
-        z_pos := GFTextEntry(gump, 130, 191, 80, 25, 2100, send_Location.Z);
+        zg_pos := GFTextEntry(gump, 130, 191, 80, 25, 2100, send_Location.Z);
 
         return gump;
 

Modified: trunk/096/pkg/commands/include/go-gumps.inc
===================================================================
--- trunk/096/pkg/commands/include/go-gumps.inc	2005-09-20 16:29:13 UTC (rev 173)
+++ trunk/096/pkg/commands/include/go-gumps.inc	2005-09-20 17:27:16 UTC (rev 174)
@@ -1,6 +1,6 @@
 // Gump backgrounds - Used in various functions - easier to use globally.
-var BKGND_SILVERTRIM := GFCfgConst("BackGrounds", "SILVERTRIM");
-var BKGND_DARK_STONE := GFCfgConst("BackGrounds", "DARK_STONE");
+var BKGND_SILVERTRIM := GFCfgConst("Defaults", "BackGround");
+var BKGND_DARK_STONE := GFCfgConst("Defaults", "ForeGround");
 
 
 function Go_LocationIndex(who, gump_Type:="base_Distro")
@@ -12,7 +12,6 @@
                 num_keys := go_keys.size();
         endif
         if  ( !gump )
-                SendSysMessage(who, "Building go index gump...");
                 if(gump_Type == "base_Distro")
                         gump := Go_PublicIndexGump();
                 else
@@ -26,25 +25,25 @@
 
         case(input)
           0: SendSysMessage(who, "Closed");
-             return;
-          ADD_NEW_PUBLIC: Go_AddPublicLocation(who);
-                   return;
-          ADD_NEW_PRIVATE: Go_AddPrivateLocation(who);
-                   return;
-          COPY_PUBLIC_ITEM: Go_CopyPublicLocation(who);
-                   return;
-          COPY_PRIVATE_ITEM: Go_CopyPrivateLocation(who);
-                   return;
-          EDIT_PUBLIC_ITEM: Go_EditPublicLocation(who);
-                   return;
-          EDIT_PRIVATE_ITEM: Go_EditPrivateLocation(who);
-                   return;
-          SHOW_PUBLIC_INDEX: SetObjProperty(who, "#Go_Gump", 1);
-                             Go_LocationIndex(who);
-                   return;
+             return 0;
+          ADD_NEW_PUBLIC:     Go_AddPublicLocation(who);
+                              return 0;
+          ADD_NEW_PRIVATE:    Go_AddPrivateLocation(who);
+                              return 0;
+          COPY_PUBLIC_ITEM:   Go_CopyPublicLocation(who);
+                              return 0;
+          COPY_PRIVATE_ITEM:  Go_CopyPrivateLocation(who);
+                              return 0;
+          EDIT_PUBLIC_ITEM:   Go_EditPublicLocation(who);
+                              return 0;
+          EDIT_PRIVATE_ITEM:  Go_EditPrivateLocation(who);
+                              return 0;
+          SHOW_PUBLIC_INDEX:  SetObjProperty(who, "#Go_Gump", 1);
+                              Go_LocationIndex(who);
+                              return 0;
           SHOW_PRIVATE_INDEX: SetObjProperty(who, "#Go_Gump", 2);
                               Go_LocationIndex(who, who.acctname);
-                   return;
+                              return 0;
           default:
         endcase
 
@@ -59,7 +58,7 @@
                         SendSysMessage(who, "Who do you want to send to " + send_Location.Name);
                         moved := target(who);
                         if (!moved)
-                                return;
+                                return 0;
                         endif
                 else
                         input := input - num_keys;
@@ -72,19 +71,26 @@
                 if ( send_Location )
                         var move;
                         SendSysMessage(who, "Going to [" + send_Location.Name + "]");
-                        if ( moved.IsA(POLCLASS_ITEM) )
-                                move := MoveItemToLocation(moved, CInt(send_Location.X), CInt(send_Location.Y), CInt(send_Location.Z), MOVEITEM_FORCELOCATION);
+                        if( moved.realm == send_Location.Realm )
+                                if ( moved.IsA(POLCLASS_ITEM) )
+                                        move := MoveItemToLocation(moved, CInt(send_Location.X), CInt(send_Location.Y), CInt(send_Location.Z), MOVEITEM_FORCELOCATION);
+                                else
+                                        move := MoveCharacterToLocation(moved, CInt(send_Location.X), CInt(send_Location.Y), CInt(send_Location.Z), MOVECHAR_FORCELOCATION);
+                                endif
                         else
-                                move := MoveCharacterToLocation(moved, CInt(send_Location.X), CInt(send_Location.Y), CInt(send_Location.Z), MOVECHAR_FORCELOCATION);
+                                move := MoveObjectToRealm( who, send_Location.Realm, send_Location.X, send_Location.Y, send_Location.Z, MOVECHAR_FORCELOCATION );
                         endif
+
                         if ( TypeOf(move) != "Integer" )
-                                SendSysMessage(who, "Error moving: X[" + send_Location.X +"] Y[" + send_Location.Y + "] Z[" + send_Location.Z + "]");
+                                GumpPrompt(who, "Error moving: X[" + send_Location.X +"] Y[" + send_Location.Y + "] Z[" + send_Location.Z + "]");
                         endif
                 else
-                        SendSysMessage(who, "Location [" + send_Location.Name + "] does not exist.");
+                        GumpPrompt(who, "Location [" + send_Location.Name + "] does not exist.");
                 endif
         endif
 
+        return 0;
+
 endfunction
 
 function Go_PersonalIndexGump()

Modified: trunk/096/pkg/commands/include/go-template.inc
===================================================================
--- trunk/096/pkg/commands/include/go-template.inc	2005-09-20 16:29:13 UTC (rev 173)
+++ trunk/096/pkg/commands/include/go-template.inc	2005-09-20 17:27:16 UTC (rev 174)
@@ -17,6 +17,8 @@
                 Go_RefreshGump("LocationIndex", "base_Distro");
         endif
 
+        return 0;
+
 endfunction
 
 function Go_RefreshMyGumps(who)
@@ -29,6 +31,6 @@
         elem.EraseProp("base_Distro");
         elem.EraseProp(who.acctname);
 
-        SendSysMessage(who, "Your public and personal gumps have been refreshed.");
+        return 1;
 
 endfunction
\ No newline at end of file

Added: trunk/096/pkg/commands/include/go-text.inc
===================================================================
--- trunk/096/pkg/commands/include/go-text.inc	2005-09-20 16:29:13 UTC (rev 173)
+++ trunk/096/pkg/commands/include/go-text.inc	2005-09-20 17:27:16 UTC (rev 174)
@@ -0,0 +1,141 @@
+function Go_Parse_Text(who, text)
+
+        if( !text )
+                return 0;
+        endif
+
+        var params := SplitWords(text);
+
+        case( lower(params[1]) )
+          "refresh": return Go_RefreshMyGumps(who);
+          "xyz":     return Go_GoXYZ(who, params);
+          default:   return Go_FindLocationByText(who, params);
+        endcase
+
+        return 0;
+
+endfunction
+
+function Go_GoXYZ(who, params)
+
+        var num_params := len(params);
+
+        case(num_params)
+          1:
+          2: SendSysMessage(who, "Error. Insufficient data supplied. \".go xyz x y [z] [string realm name]\"");
+          3: params[4] := GetMapInfo( CInt(params[1]), CInt(params[2]), who.realm ).z;
+             params[5] := who.realm;
+          4: params[5] := who.realm;
+          default:
+        endcase
+
+        if( Realms().Exists( lower(params[5])) )
+                if( who.realm == lower(params[5]) )
+                        return ( MoveCharacterToLocation( who, CInt(params[2]), CInt(params[3]), CInt(params[4]), MOVECHAR_FORCELOCATION ) );
+                else
+                        return ( MoveObjectToRealm( who, lower(params[5]), CInt(params[2]), CInt(params[3]), CInt(params[4]), MOVECHAR_FORCELOCATION ) );
+                endif
+        else
+                GumpPrompt(who, "Invalid Realm name in xyz!");
+                return 1;
+        endif
+
+        return 1;
+
+endfunction
+
+function Go_FindLocationByText(who, params)
+
+        case( lower(params[params.size()]) )
+          "private": Go_ByPrivateLocation(who, params);
+          "public":  Go_ByPublicLocation(who, params);
+          default:   Go_ByDefaultLocation(who, params);
+        endcase
+
+        return 1;
+
+endfunction
+
+function Go_ByPrivateLocation(who, params)
+
+        if(go_prop.Exists( lower(params[1]) ) )
+                var temp := go_prop[lower(params[1])];
+                SendSysMessage(who, "Going to private location [" + params[1] + "]");
+                var move;
+                if( who.realm == temp.Realm )
+                        move := MoveCharacterToLocation(who, CInt(temp.X), CInt(temp.Y), CInt(temp.Z), MOVECHAR_FORCELOCATION);
+                else
+                        move := MoveObjectToRealm( who, temp.Realm, temp.X, temp.Y, temp.Z, MOVECHAR_FORCELOCATION );
+                endif
+                if ( TypeOf(move) != "Integer" )
+                        GumpPrompt(who, "Error moving: X[" + temp.X +"] Y[" + temp.Y + "] Z[" + temp.Z + "]");
+                        return 0;
+                endif
+        else
+                GumpPrompt(who, "Private Location [" + params[1] + "] does not exist.");
+                return 0;
+        endif
+
+        return 0;
+
+endfunction
+
+function Go_ByPublicLocation(who, params)
+
+        if(go_prop_base.Exists( lower(params[1]) ) )
+                var temp := go_prop_base[lower(params[1])];
+                SendSysMessage(who, "Going to public location [" + params[1] + "]");
+                var move;
+                if( who.realm == temp.Realm )
+                        move := MoveCharacterToLocation(who, CInt(temp.X), CInt(temp.Y), CInt(temp.Z), MOVECHAR_FORCELOCATION);
+                else
+                        move := MoveObjectToRealm( who, temp.Realm, temp.X, temp.Y, temp.Z, MOVECHAR_FORCELOCATION );
+                endif
+                if ( TypeOf(move) != "Integer" )
+                        GumpPrompt(who, "Error moving: X[" + temp.X +"] Y[" + temp.Y + "] Z[" + temp.Z + "]");
+                        return 0;
+                endif
+        else
+                GumpPrompt(who, "Public Location [" + params[1] + "] does not exist.");
+                return 0;
+        endif
+
+        return 0;
+
+endfunction
+
+function Go_ByDefaultLocation(who, params)
+
+        if(go_prop.Exists( lower(params[1]) ) )
+                var temp := go_prop[lower(params[1])];
+                SendSysMessage(who, "Going to private location [" + params[1] + "]");
+                var move;
+                if( who.realm == temp.Realm )
+                        move := MoveCharacterToLocation(who, CInt(temp.X), CInt(temp.Y), CInt(temp.Z), MOVECHAR_FORCELOCATION);
+                else
+                        move := MoveObjectToRealm( who, temp.Realm, temp.X, temp.Y, temp.Z, MOVECHAR_FORCELOCATION );
+                endif
+                if ( TypeOf(move) != "Integer" )
+                        GumpPrompt(who, "Error moving: X[" + temp.X +"] Y[" + temp.Y + "] Z[" + temp.Z + "]");
+                        return 0;
+                endif
+        elseif(go_prop_base.Exists( lower(params[1]) ) )
+                var temp := go_prop_base[lower(params[1])];
+                SendSysMessage(who, "Going to public location[" + params[1] + "]");
+                var move;
+                if( who.realm == temp.Realm )
+                        move := MoveCharacterToLocation(who, CInt(temp.X), CInt(temp.Y), CInt(temp.Z), MOVECHAR_FORCELOCATION);
+                else
+                        move := MoveObjectToRealm( who, temp.Realm, temp.X, temp.Y, temp.Z, MOVECHAR_FORCELOCATION );
+                endif
+                if ( TypeOf(move) != "Integer" )
+                        GumpPrompt(who, "Error moving: X[" + temp.X +"] Y[" + temp.Y + "] Z[" + temp.Z + "]");
+                        return 0;
+                endif
+        else
+                GumpPrompt(who, "Location [" + params[1] + "] does not exist.");
+                return 0;
+        endif
+
+
+endfunction

Modified: trunk/096/pkg/commands/seer/go.src
===================================================================
--- trunk/096/pkg/commands/seer/go.src	2005-09-20 16:29:13 UTC (rev 173)
+++ trunk/096/pkg/commands/seer/go.src	2005-09-20 17:27:16 UTC (rev 174)
@@ -1,22 +1,35 @@
 ////////////////////////////////////////////////////////////////////////////////////////////////////
 //
-//  name:    go.src - Player Textcommand
-//  version: 2.0a
+//  name:    go.src - Staff Textcommand
+//  version: 2.0b
 //  author:  MuadDib
 //
-//  Purpose: New .go command that saves lists in DataFiles instead of Config Files for easier
-//           handling. Allows you to add, remove, and edit entries. It also gives you a "base"
-//           list of locations that everyone can see. As you add locations, they are all "account"
-//           specific if added while viewing your Private locations. Only the adder will see his
-//           personal list that has been added to the locations. If you are viewing the "public"
-//           list when you use Add, it will add it to the Public list instead! You can also add
-//           locations from the "base" list to the personal list via Copy. Then simply select the
-//           location from the list given via gump.
+//  Purpose: Lists and Gumps are now cached via DataFiles instead of Config files. Initial use of
+//           the command will import the /config/golocs.cfg file. New features are as follows:
 //
+//           Buttons:
+//           Goto - Will move you to the selected location.
+//           Send - Will move the object you target to the selected location.
+//           Add Button - Will add the new location to the menu version you are viewing only.
+//           Copy Button - Will copy a location you select from the menu version you are viewing
+//                         to the other menu version.
+//           Edit Button - Allows you to rename a location, change the coords, or delete the
+//                         location totally.
+//           Public/Private Button - This button will switch you the menu version the button states.
+//
+//           Other Abilities:
+//           Text Parsing from the command line. If you pass "xyz" as the location to go to, it will
+//              expect the x and y at least with it. The format is ".go xyz x y [z] [realm]". Z and
+//              realm are optional.
+//           Location Parsing from the command line. If you pass the location name from the command
+//              line, it will auto move you to that location.
+//           Refresh. If you pass the word "refresh" on the command line, it will refresh all the
+//              gumps for your private gumps, and the main gump.
+//
 //  To-Do:   Optimize gump functions within includes.
-//           Add more "text" checks at beginning of the script. Possibly in /include/go_text.inc
 //
 ////////////////////////////////////////////////////////////////////////////////////////////////////
+use polsys;
 use uo;
 use os;
 use datafile;
@@ -29,6 +42,7 @@
 include ":gumps:include/yesno";
 include ":commands:include/go-add";
 include ":commands:include/go-edit";
+include ":commands:include/go-text";
 include ":commands:include/go-gumps";
 include ":commands:include/go-template";
 
@@ -45,6 +59,7 @@
 
 CONST BUILD_FROM_OLD      := 0x1;
 
+var go_Reserved_Words := array("refresh", "xyz");
 var go_data_gumps := DFOpenDataFile(":commands:GoGumps", DF_CREATE);
 var go_data_file  := DFOpenDataFile(":commands:GoFile", DF_CREATE);
 var go_elem       := DFFindElement(go_data_file, "GoList", DF_CREATE);
@@ -56,22 +71,14 @@
 var edit_name;
 var edit_update;
 var edit_delete;
-var x_pos;
-var y_pos;
-var z_pos;
+var xg_pos;
+var yg_pos;
+var zg_pos;
 
 program textcmd_go( who, text )
 
-        if( lower(text) == "refresh" )
-          Go_RefreshGump("LocationIndex", "base_Distro");
-          Go_RefreshGump("LocationIndex", who.acctname);
-          Go_RefreshGump("CopyIndex", "base_Distro");
-          Go_RefreshGump("CopyIndex", who.acctname);
-          SendSysMessage(who, "Gump Cache emptied for base and personal.");
-          return;
-        endif
+        Go_CheckInit(who);
 
-        Go_CheckInit(who);
         // See if there is an element in the DataFile that matches their
         // account name.
         go_prop := go_elem.GetProp( who.acctname );
@@ -79,14 +86,17 @@
         // If there is no Element in the DataFile that matches their account name
         // let's create it now.
         if ( !go_prop )
-                SendSysMessage(who, "Creating personal go list dictionary...");
                 var temp := dictionary;
                 go_elem.SetProp(who.acctname, temp);
                 go_prop  := go_elem.GetProp(who.acctname);
         endif
-        
+
         go_keys  := go_prop.keys();
-        
+
+        if( Go_Parse_Text(who, text) )
+                return 0;
+        endif
+
         var gump_Open := GetObjProperty(who, "#Go_Gump");
         case(gump_Open)
           1: Go_LocationIndex(who);

Deleted: trunk/096/pkg/commands/seer/goxyz.src
===================================================================
--- trunk/096/pkg/commands/seer/goxyz.src	2005-09-20 16:29:13 UTC (rev 173)
+++ trunk/096/pkg/commands/seer/goxyz.src	2005-09-20 17:27:16 UTC (rev 174)
@@ -1,27 +0,0 @@
-/////////////////////////////////////////////////////////////////////////////
-//
-//  ".goxyz x y [z]" - jump to a location, specifying coordinates.
-//
-//  If Z is not specified, map data will be read.  Note statics and dynamic
-//  items won't be taken into account, except insofar as
-//  MoveCharacterToLocation does automatically.
-//
-//  Last Modified: 1999/02/06 Syzygy
-//
-/////////////////////////////////////////////////////////////////////////////
-
-
-use uo;
-
-program textcmd_goxyz( who, text )
-	var params := SplitWords( text );
-    if (len(params) < 3) // didn't pass Z
-        params[3] := GetMapInfo( CInt(params[1]), CInt(params[2]), who.realm ).z;
-    endif
-
-	var res := MoveCharacterToLocation( who, CInt(params[1]), CInt(params[2]), CInt(params[3]), MOVECHAR_FORCELOCATION );
-
-    if (!res)
-        SendSysMessage( who, "Unable to go there: " + res.errortext );
-    endif
-endprogram
\ No newline at end of file



From muaddiblsd at berlios.de  Tue Sep 20 20:12:25 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Tue, 20 Sep 2005 20:12:25 +0200
Subject: [Poldistro-svn] r175 - in trunk/096: config pkg/skills/blacksmithy pkg/skills/carpentry pkg/skills/tailoring scripts/include scripts/util
Message-ID: <200509201812.j8KICPaN016848@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-20 20:12:19 +0200 (Tue, 20 Sep 2005)
New Revision: 175

Added:
   trunk/096/config/resourceList.cfg
Modified:
   trunk/096/pkg/skills/blacksmithy/makeBlacksmithItems.src
   trunk/096/pkg/skills/carpentry/carpentry.src
   trunk/096/pkg/skills/tailoring/makeClothItems.src
   trunk/096/scripts/include/objtype.inc
   trunk/096/scripts/util/repair.inc
Log:
Updated for specific changes to util/repair.inc and objtype.inc.

Added: trunk/096/config/resourceList.cfg
===================================================================
--- trunk/096/config/resourceList.cfg	2005-09-20 17:27:16 UTC (rev 174)
+++ trunk/096/config/resourceList.cfg	2005-09-20 18:12:19 UTC (rev 175)
@@ -0,0 +1,316 @@
+// Metals/Ingots
+
+Resource 0x6309
+{
+    Name        iron
+    Color       0
+    Power       0
+    WPower      0
+    Skill       0
+    Type        Metal
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0x630a
+{
+    Name        dull copper
+    Color       0x8415
+    Power       0
+    WPower      0
+    Skill       65
+    Type        Metal
+    Quality     0 6 10
+    Ptmod       5
+}
+
+Resource 0x630b
+{
+    Name        shadow
+    Color       0x8455
+    Power       0
+    WPower      0
+    Skill       70
+    Type        Metal
+    Quality     1 2 10
+    Ptmod       5
+}
+
+Resource 0x630c
+{
+    Name        copper
+    Color       0x845e
+    Power       COPPER
+    WPower      0
+    Skill       75
+    Type        Metal
+    Quality     1 1 40
+    Ptmod       10
+}
+
+Resource 0x630d
+{
+    Name        bronze
+    Color       0x86b2
+    Power       0
+    WPower      0
+    Skill       80
+    Type        Metal
+    Quality     3 3 40
+    Ptmod       10
+}
+
+Resource 0x630e
+{
+    Name        golden
+    Color       0x88a6
+    Power       0
+    WPower      0
+    Skill       85
+    Type        Metal
+    Quality     5 1 50
+    Ptmod       15
+}
+
+Resource 0x630f
+{
+    Name        agapite
+    Color       0x83ea
+    Power       0
+    WPower      0
+    Skill       90
+    Type        Metal
+    Quality     7 2 50
+    Ptmod       15
+}
+
+Resource 0x6310
+{
+    Name        verite
+    Color       0x889f
+    Power       0
+    WPower      0
+    Skill       97
+    Type        Metal
+    Quality     7 3 50
+    Ptmod       20
+}
+
+Resource 0x6311
+{
+    Name        valorite
+    Color       0x8539
+    Power       0
+    WPower      0
+    Skill       100
+    Type        Metal
+    Quality     9 4 50
+    Ptmod       25
+}
+
+// Wood/Logs/Boards
+
+Resource 0x1bdd
+{
+    Name        plain
+    Color       0
+    Power       0
+    WPower      0
+    Skill       0
+    Type        Wood
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0x1bd7
+{
+    Name        plain
+    Color       0
+    Power       0
+    WPower      0
+    Skill       0
+    Type        Wood
+    Quality     0 0 0
+    Ptmod       0
+}
+
+// Cloth
+
+Resource 0x1766
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0x1767
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0x1768
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf95
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf96
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf97
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf98
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf99
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf9a
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf9b
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf9c
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+
+// Leather
+
+Resource 0x1078
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Leather
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0x1079
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Leather
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0x702e
+{
+    Name	spined
+    Color	1337
+    Skill       65
+    Power       0
+    Type        Leather
+    Quality     0 5 0
+    Ptmod       17
+}
+
+Resource 0x7030
+{
+    Name	horned
+    Color       1653
+    Power       0
+    Skill       90
+    Type        Leather
+    Quality     0 2 0
+    Ptmod       25
+}
+
+Resource 0x702f
+{
+    Name	barbed
+    Color       1425
+    Power       0
+    Skill       70
+    Type        Leather
+    Quality     0 2 0
+    Ptmod       20
+}

Modified: trunk/096/pkg/skills/blacksmithy/makeBlacksmithItems.src
===================================================================
--- trunk/096/pkg/skills/blacksmithy/makeBlacksmithItems.src	2005-09-20 17:27:16 UTC (rev 174)
+++ trunk/096/pkg/skills/blacksmithy/makeBlacksmithItems.src	2005-09-20 18:12:19 UTC (rev 175)
@@ -1,3 +1,4 @@
+use polsys;
 use cfgfile;
 use util;
 
@@ -521,56 +522,13 @@
 endfunction
 
 function GFButtonIDC(x, y, release, press, close, retval)
-	var line := "button " + CStr(gfref.x + CInt(x)) + " " + CStr(gfref.y + CInt(y));
-	line := line + " " + CStr(CInt(release)) + " " + CStr(CInt(press)) + " ";
-	line := line + CStr(CInt(close)) + " 0 ";
-	line := line + CStr(CInt(retval));
-	gflayout.append( line );
+        var line := "button " + CStr(gfref.x + CInt(x)) + " " + CStr(gfref.y + CInt(y));
+        line := line + " " + CStr(CInt(release)) + " " + CStr(CInt(press)) + " ";
+        line := line + CStr(CInt(close)) + " 0 ";
+        line := line + CStr(CInt(retval));
+        gflayout.append( line );
 endfunction
 
-function repair_this(who)
-  SendSysMessage(who, "Select an item to repair.");
-  var use_on := Target(who);
-  if(!can_access(who, use_on))
-    return;
-  endif
-  if(use_on.movable == 0)
-    SendSysMessage(who, "You cannot repair that.");
-    return;
-  endif
-  if(!Accessible(who, use_on))
-    SendSysMessage(who, "You cannot reach that.");
-    return;
-  elseif(dist(who, use_on) > 2)
-    SendSysMessage(who, "That is too far away.");
-    return;
-  endif
-  if(is_weapon_armor(use_on.objtype))
-    var near_items := ListItemsNearLocation(who.x, who.y, who.z,3, who.realm);
-    foreach item in near_items
-      if ((item.objtype == UOBJ_ANVIL1) || (item.objtype == UOBJ_ANVIL2))
-        repair_item( who, use_on, SKILLID_BLACKSMITHY );
-        return;
-      endif
-    endforeach
-    SendSysMessage( who, "You must be near an anvil to repair items!" );
-    return;
-  else
-    SendSysMessage(who, "You cannot repair that.");
-  endif
-  return;
-endfunction
-
-function is_weapon_armor(what)
-  var elem := FindConfigElem(itemcfg, what);
-  var repairable := GetConfigInt(elem,"repairable");
-  if (repairable == 1)
-    return 1;
-  else
-    return 0;
-  endif
-endfunction
-
 function makeBlacksmithItems(who, what, amt, cont, hammer)
   var anvil_near := 0;
   foreach item in ListItemsNearLocation(who.x, who.y, who.z, 3, who.realm)
@@ -598,7 +556,7 @@
   var ptmod := 0;
   case(use_on.objtype)
     0x6309: is_ingot := 1; ptmod := 0;
-	0x630a: is_ingot := 1; ptmod := 5;
+        0x630a: is_ingot := 1; ptmod := 5;
     0x630b: is_ingot := 1; ptmod := 5;
     0x630c: is_ingot := 1; ptmod := 10;
     0x630d: is_ingot := 1; ptmod := 10;
@@ -670,7 +628,7 @@
           if(!theitem.isa(POLCLASS_WEAPON))
             case(use_on.objtype)
               0x6309:   nme := ""             + itemname; theitem.color := 0x0;
-	          0x630a:   nme := "dull copper " + itemname; theitem.color := 0x8415;
+                  0x630a:   nme := "dull copper " + itemname; theitem.color := 0x8415;
               0x630b:   nme := "shadow "      + itemname; theitem.color := 0x8455;
               0x630c:   nme := "copper "      + itemname; theitem.color := 0x845e;
               0x630d:   nme := "bronze "      + itemname; theitem.color := 0x86b2;
@@ -785,7 +743,7 @@
 function checkSkillForDifferentMetals(who, ingot)
   case( ingot.objtype )
     0x6309:   return(checkHisSkill(who,  0));
-	0x630a:   return(checkHisSkill(who, 65));
+        0x630a:   return(checkHisSkill(who, 65));
     0x630b:   return(checkHisSkill(who, 70));
     0x630c:   return(checkHisSkill(who, 75));
     0x630d:   return(checkHisSkill(who, 80));
@@ -805,76 +763,3 @@
     return 0;
   endif
 endfunction
-
-function resmelt(who, tongs)
-  var near_items := ListItemsNearLocation(who.x, who.y, who.z, 3, who.realm);
-  var forge_near := 0;
-  foreach forge in near_items
-    if((forge.objtype == 0xfb1) || ((forge.objtype >= 0x197a) && (forge.objtype <= 0x19a9)))
-      forge_near := 1;
-      break;
-    endif
-  endforeach
-  if(forge_near == 0)
-    SendSysMessage(who, "You must be near a forge to re-smelt items.");
-    return;
-  endif
-  SendSysMessage(who, "Select the item you wish to melt down.");
-  var use_on := Target(who, TGTOPT_CHECK_LOS);
-  if(!use_on)
-	SendSysMessage(who, "Targetting cancelled.");
-	return;
-  endif
-  if(!can_access(who, use_on))
-    SendSysMessage(who, "You cannot use that.");
-    return;
-  endif
-  if(!Accessible(who, use_on) || !ReserveItem( use_on ))
-    SendSysMessage(who, "You cannot use that.");
-    return;
-  endif
-  if(use_on.container != who.backpack)
-	SendSysMessage(who, "You can only melt items stored in the top level of your backpack.");
-	return;
-  endif
-  var skill := smith_cfg[use_on.objtype]."skill";
-  var amt := CInt(smith_cfg[use_on.objtype]."material");
-  if((!skill) || (!amt))
-    SendSysMessage(who, "You cannot resmelt that.");
-    return;
-  endif
-  amt := CInt((amt * GetEffectiveSkill(who,SKILLID_BLACKSMITHY) * 75 ) / 10000);
-  if(amt < 1)
-	amt := 1;
-  endif
-  var itemcfg := ReadConfigFile(":mining:itemdesc");
-  if(!itemcfg)
-	return;
-  endif
-  var elemcol;
-  var ingot := -1;
-  var color := use_on.color;
-  var valid_ingot := { 0x6309, 0x630a, 0x630b, 0x630c, 0x630d, 0x630e, 0x630f, 0x6310, 0x6311 };
-  foreach entry in valid_ingot
-    elemcol := itemcfg[entry]."Color";
-	if(color == elemcol)
-	  ingot := entry;
-	  break;
-	endif
-  endforeach
-  if(ingot == -1)
-	PrintTextAbovePrivate(use_on, "You can't melt this metal down!", who);
-	return;
-  endif
-  PlaySoundEffect(who, 0x2c);
-  sleep(1);
-  if(DestroyItem(use_on))
-	if(CheckSkill(who, SKILLID_BLACKSMITHY, skill, 10))
-	  SendSysMessage(who, "You manage to get a bit of material out of that.");
-	  CreateItemInBackpack(who, ingot, amt);
-	else
-	  SendSysMessage(who, "You fail, and destroy the item.");
-	endif
-    return;
-  endif
-endfunction
\ No newline at end of file

Modified: trunk/096/pkg/skills/carpentry/carpentry.src
===================================================================
--- trunk/096/pkg/skills/carpentry/carpentry.src	2005-09-20 17:27:16 UTC (rev 174)
+++ trunk/096/pkg/skills/carpentry/carpentry.src	2005-09-20 18:12:19 UTC (rev 175)
@@ -18,8 +18,6 @@
 // These entries are unnecessary?  - HellRazor 19 Nov 02
 // var itemcfg   := ReadConfigFile(":combat:itemdesc");
 // var smith_cfg := ReadConfigFile("blacksmithy");
-var UOBJ_BOLT_START   := 0x0f95;
-var UOBJ_BOLT_END     := 0x0f9c;
 gfref.x := 50;
 gfref.y := 50;
 var O := 501;
@@ -993,4 +991,4 @@
     endif
   endif
   return pts;
-endfunction
\ No newline at end of file
+endfunction

Modified: trunk/096/pkg/skills/tailoring/makeClothItems.src
===================================================================
--- trunk/096/pkg/skills/tailoring/makeClothItems.src	2005-09-20 17:27:16 UTC (rev 174)
+++ trunk/096/pkg/skills/tailoring/makeClothItems.src	2005-09-20 18:12:19 UTC (rev 175)
@@ -13,12 +13,6 @@
 include "include/toolWear";
 include "include/noto";
 
-const UOBJ_SEWING_KIT   := 0x0f9d;
-const UOBJ_BOLT_START   := 0x0f95;
-const UOBJ_BOLT_END     := 0x0f9c;
-const UOBJ_CLOTH_STARTS := 0x175d;
-const UOBJ_CLOTH_END    := 0x1768;
-const UOBJ_MUTLI_CLOTH  := 0x1766;
 const SCISSORS_SOUND    := 0x0249;
 
 var itemcfg          := ReadConfigFile( "itemdesc" );
@@ -920,4 +914,4 @@
         line := line + CStr(retval);
         gflayout.append( line );
         return XGFRetVal( gflayout.size(), -1, gfbutid - 1 );
-endfunction
\ No newline at end of file
+endfunction

Modified: trunk/096/scripts/include/objtype.inc
===================================================================
--- trunk/096/scripts/include/objtype.inc	2005-09-20 17:27:16 UTC (rev 174)
+++ trunk/096/scripts/include/objtype.inc	2005-09-20 18:12:19 UTC (rev 175)
@@ -3,7 +3,7 @@
 // include/objtype.inc - Object Type definitions
 //
 // TODO: consider moving these into include/client.inc
-//       or, moving CID_XX constants in here
+//       or, moving CID_XX CONSTants in here
 //
 /////////////////////////////////////////////////////////////////////////////
 
@@ -13,183 +13,184 @@
 //
 /////////////////////////////////////////////////////////////////////////////
 
-const UOBJ_STONEWALL_NS := 0x005f;
-const UOBJ_STONEWALL_EW := 0x0060;
-const UOBJ_GUARDS       := 0xa340;
-const UOBJ_FISHSTEAK    := 0x097a;
+CONST UOBJ_STONEWALL_NS := 0x005f;
+CONST UOBJ_STONEWALL_EW := 0x0060;
+CONST UOBJ_GUARDS       := 0xa340;
+CONST UOBJ_FISHSTEAK    := 0x097a;
 
-const UOBJ_BOX          := 0x09aa;
+CONST UOBJ_BOX          := 0x09aa;
 
-const UOBJ_FISH_START   := 0x09cc;
-const UOBJ_FISH_END     := 0x09cf;
+CONST UOBJ_FISH_START   := 0x09cc;
+CONST UOBJ_FISH_END     := 0x09cf;
 
-const UOBJ_SFISH_START  := 0x0dd6;
-const UOBJ_SFISH_END    := 0x0dd9;
+CONST UOBJ_SFISH_START  := 0x0dd6;
+CONST UOBJ_SFISH_END    := 0x0dd9;
 
-const UOBJ_KINDLING     := 0x0de1;
-const UOBJ_CAMPFIRE     := 0x0de3;
-const UOBJ_EMBERS       := 0x0de9;
-const UOBJ_ASHES        := 0x0dea;
+CONST UOBJ_KINDLING     := 0x0de1;
+CONST UOBJ_CAMPFIRE     := 0x0de3;
+CONST UOBJ_EMBERS       := 0x0de9;
+CONST UOBJ_ASHES        := 0x0dea;
 
-const UOBJ_BANDAGE      := 0x0e21;
-const UOBJ_BLANK_SCROLL := 0x0e34;
+CONST UOBJ_BANDAGE      := 0x0e21;
+CONST UOBJ_BLANK_SCROLL := 0x0e34;
 
-const UOBJ_BANKBOX      := 0x0e40;
+CONST UOBJ_BANKBOX      := 0x0e40;
 
-const UOBJ_DRUM         := 0x0e9c;
-const UOBJ_TAMB         := 0x0e9d;
-const UOBJ_HARP         := 0x0eb2;
-const UOBJ_LUTE         := 0x0eb3;
+CONST UOBJ_DRUM         := 0x0e9c;
+CONST UOBJ_TAMB         := 0x0e9d;
+CONST UOBJ_HARP         := 0x0eb2;
+CONST UOBJ_LUTE         := 0x0eb3;
 
-const UOBJ_SPELLBOOK        := 0x0efa;
+CONST UOBJ_SPELLBOOK        := 0x0efa;
 
-const UOBJ_POISON_POTION    := 0x0f0a;
-const UOBJ_EMPTY_BOTTLE     := 0x0f0e;
+CONST UOBJ_POISON_POTION    := 0x0f0a;
+CONST UOBJ_EMPTY_BOTTLE     := 0x0f0e;
 
-const UOBJ_GEM_START        := 0x0f0f;
-const UOBJ_GEM_END          := 0x0f30;
+CONST UOBJ_GEM_START        := 0x0f0f;
+CONST UOBJ_GEM_END          := 0x0f30;
 
-const UOBJ_SHOVEL           := 0x0f39;
+CONST UOBJ_SHOVEL           := 0x0f39;
 
-const UOBJ_XBOW             := 0x0f4f;
+CONST UOBJ_XBOW             := 0x0f4f;
 
-const UOBJ_BLUE_MOONGATE    := 0x0f6c;
+CONST UOBJ_BLUE_MOONGATE    := 0x0f6c;
 
 
 
-const UOBJ_CLAY             := 0xee19;
-const UOBJ_SAND             := 0xee18;
+CONST UOBJ_CLAY             := 0xee19;
+CONST UOBJ_SAND             := 0xee18;
 
 
 
 
-const UOBJ_BLACK_PEARL      := 0x0f7a;
-const UOBJ_BLOOD_MOSS       := 0x0f7b;
-const UOBJ_BRIMSTONE        := 0x0f7f;
-const UOBJ_FERTILE_DIRT     := 0x0f81;
-const UOBJ_EXECUTIONERS_CAP := 0x0f83;
-const UOBJ_GARLIC           := 0x0f84;
-const UOBJ_GINSENG          := 0x0f85;
-const UOBJ_MANDRAKE_ROOT    := 0x0f86;
-const UOBJ_NIGHTSHADE       := 0x0f88;
-const UOBJ_OBSIDIAN         := 0x0f89;
-const UOBJ_PIG_IRON         := 0x0f8a;
-const UOBJ_SULFUROUS_ASH    := 0x0f8c; // CHECKME spelling
-const UOBJ_SPIDER_SILK      := 0x0f8d;
-const UOBJ_VOLCANIC_ASH     := 0x0f8f;
+CONST UOBJ_BLACK_PEARL      := 0x0f7a;
+CONST UOBJ_BLOOD_MOSS       := 0x0f7b;
+CONST UOBJ_BRIMSTONE        := 0x0f7f;
+CONST UOBJ_FERTILE_DIRT     := 0x0f81;
+CONST UOBJ_EXECUTIONERS_CAP := 0x0f83;
+CONST UOBJ_GARLIC           := 0x0f84;
+CONST UOBJ_GINSENG          := 0x0f85;
+CONST UOBJ_MANDRAKE_ROOT    := 0x0f86;
+CONST UOBJ_NIGHTSHADE       := 0x0f88;
+CONST UOBJ_OBSIDIAN         := 0x0f89;
+CONST UOBJ_PIG_IRON         := 0x0f8a;
+CONST UOBJ_SULFUROUS_ASH    := 0x0f8c; // CHECKME spelling
+CONST UOBJ_SPIDER_SILK      := 0x0f8d;
+CONST UOBJ_VOLCANIC_ASH     := 0x0f8f;
 
+CONST UOBJ_DEAD_WOOD    := 0x0f90;
 
-const UOBJ_DEAD_WOOD    := 0x0f90;
+CONST UOBJ_CLOTH        := 0x0f95;
+CONST UOBJ_CLOTH_STARTS := 0x175d;
+CONST UOBJ_CLOTH_END    := 0x1768;
+CONST UOBJ_LOOM_START   := 0x105f;
+CONST UOBJ_LOOM_END     := 0x1066;
+CONST UOBJ_BOLT_START   := 0x0f95;
+CONST UOBJ_BOLT_END     := 0x0f9c;
+CONST UOBJ_THREAD_START := 0x0fa0;
+CONST UOBJ_THREAD_END   := 0x0fa1;
+CONST UOBJ_MUTLI_CLOTH  := 0x1766;
+CONST UOBJ_SEWING_KIT   := 0x0f9d;
 
-const UOBJ_CLOTH        := 0x0f95;
+CONST UOBJ_ANVIL1       := 0x0faf;
+CONST UOBJ_ANVIL2       := 0x0fb0;
+CONST UOBJ_SMALL_FORGE  := 0xfb1;  // see also UOBJ_FORGE_START..UOBJ_FORGE_END
+CONST UOBJ_FORGE1       := 0x19a2;
+CONST UOBJ_FORGE2       := 0x19a6;
+CONST UOBJ_FORGE3       := 0x1982;
+CONST UOBJ_FORGE4       := 0x1996;
+CONST UOBJ_FORGE5       := 0x199a;
+CONST UOBJ_FORGE6       := 0x198e;
+CONST UOBJ_FORGE7       := 0x1992;
+CONST UOBJ_FORGE8       := 0x1986;
+CONST UOBJ_FORGE9       := 0x198a;
 
-const UOBJ_THREAD_START := 0x0fa0;
-const UOBJ_THREAD_END   := 0x0fa1;
+CONST UOBJ_COPPER_KEY   := 0x100e;
+CONST UOBJ_GOLD_KEY     := 0x100f;
+CONST UOBJ_IRON_KEY     := 0x1010;
+CONST UOBJ_KEY_RING     := 0x1011;
+CONST UOBJ_MAGIC_KEY    := 0x1012;
+CONST UOBJ_RUSTY_IRON_KEY := 0x1013;
 
-const UOBJ_ANVIL1       := 0x0faf;
-const UOBJ_ANVIL2       := 0x0fb0;
-const UOBJ_SMALL_FORGE  := 0xfb1;  // see also UOBJ_FORGE_START..UOBJ_FORGE_END
-const UOBJ_FORGE1       := 0x19a2;
-const UOBJ_FORGE2       := 0x19a6;
-const UOBJ_FORGE3       := 0x1982;
-const UOBJ_FORGE4       := 0x1996;
-const UOBJ_FORGE5       := 0x199a;
-const UOBJ_FORGE6       := 0x198e;
-const UOBJ_FORGE7       := 0x1992;
-const UOBJ_FORGE8       := 0x1986;
-const UOBJ_FORGE9       := 0x198a;
+CONST UOBJ_CLOCK   := 0x104c;
+CONST UOBJ_CLOCK_FRAME   := 0x104e;
+CONST UOBJ_CLOCK_PARTS   := 0x104f;
+CONST UOBJ_AXLE_AND_GEARS   := 0x1051;
+CONST UOBJ_GEARS   := 0x1053;
+CONST UOBJ_HINGE   := 0x1055;
+CONST UOBJ_SEXTANT   := 0x1057;
+CONST UOBJ_SEXTANT_PARTS   := 0x1059;
+CONST UOBJ_AXLE   := 0x105b;
+CONST UOBJ_SPRINGS   := 0x105d;
 
-const UOBJ_COPPER_KEY   := 0x100e;
-const UOBJ_GOLD_KEY     := 0x100f;
-const UOBJ_IRON_KEY     := 0x1010;
-const UOBJ_KEY_RING     := 0x1011;
-const UOBJ_MAGIC_KEY    := 0x1012;
-const UOBJ_RUSTY_IRON_KEY := 0x1013;
+CONST UOBJ_TDUMMYSWING_NS     := 0x1071;
+CONST UOBJ_TDUMMYFREEZE_NS    := 0x1070;
+CONST UOBJ_TDUMMYSWING_EW     := 0x1075;
+CONST UOBJ_TDUMMYFREEZE_EW    := 0x1074;
 
-const UOBJ_CLOCK   := 0x104c;
-const UOBJ_CLOCK_FRAME   := 0x104e;
-const UOBJ_CLOCK_PARTS   := 0x104f;
-const UOBJ_AXLE_AND_GEARS   := 0x1051;
-const UOBJ_GEARS   := 0x1053;
-const UOBJ_HINGE   := 0x1055;
-const UOBJ_SEXTANT   := 0x1057;
-const UOBJ_SEXTANT_PARTS   := 0x1059;
-const UOBJ_AXLE   := 0x105b;
-const UOBJ_SPRINGS   := 0x105d;
+CONST UOBJ_PDUMMYSWING_EW       := 0x1EC1;
+CONST UOBJ_PDUMMYFREEZE_EW      := 0x1EC0;
+CONST UOBJ_PDUMMYSWING_NS       := 0x1EC4;
+CONST UOBJ_PDUMMYFREEZE_NS      := 0x1EC3;
 
+CONST UOBJ_BLOOD        := 0x122d;
 
+CONST UOBJ_BOW          := 0x13b2;
+CONST UOBJ_HEAVY_XBOW   := 0x13fd;
 
-const UOBJ_LOOM_START   := 0x105f;
-const UOBJ_LOOM_END     := 0x1066;
+CONST UOBJ_MAP1         := 0x14eb;
+CONST UOBJ_MAP2         := 0x14ec;
+CONST UOBJ_ROLLED_MAP1  := 0x14ed;
+CONST UOBJ_ROLLED_MAP2  := 0x14ee;
 
-const UOBJ_TDUMMYSWING_NS     := 0x1071;
-const UOBJ_TDUMMYFREEZE_NS    := 0x1070;
-const UOBJ_TDUMMYSWING_EW     := 0x1075;
-const UOBJ_TDUMMYFREEZE_EW    := 0x1074;
+CONST UOBJ_HOUSE_DEED1  := 0x14ef;
+CONST UOBJ_SHIP_DEED1   := 0x14f1;
+CONST UOBJ_SHIP_DEED2   := 0x14f2;
 
-const UOBJ_PDUMMYSWING_EW	:= 0x1EC1;
-const UOBJ_PDUMMYFREEZE_EW	:= 0x1EC0;
-const UOBJ_PDUMMYSWING_NS	:= 0x1EC4;
-const UOBJ_PDUMMYFREEZE_NS	:= 0x1EC3;
+CONST UOBJ_CHEST        := 0x1940;
 
-const UOBJ_BLOOD        := 0x122d;
+CONST UOBJ_FORGE_START  := 0x197a;  // see also UOBJ_SMALL_FORGE
+CONST UOBJ_FORGE_END    := 0x19a9;
 
-const UOBJ_BOW          := 0x13b2;
-const UOBJ_HEAVY_XBOW   := 0x13fd;
+CONST UOBJ_FEATHER      := 0x1bd1;
+CONST UOBJ_SHAFTS       := 0x1bd4;
+CONST UOBJ_LOGS         := 0x1bdd;
 
-const UOBJ_MAP1         := 0x14eb;
-const UOBJ_MAP2         := 0x14ec;
-const UOBJ_ROLLED_MAP1  := 0x14ed;
-const UOBJ_ROLLED_MAP2  := 0x14ee;
+CONST UOBJ_GLASS        := 0xee20;
 
-const UOBJ_HOUSE_DEED1  := 0x14ef;
-const UOBJ_SHIP_DEED1   := 0x14f1;
-const UOBJ_SHIP_DEED2   := 0x14f2;
+CONST UOBJ_ARM          := 0x1cec;
+CONST UOBJ_LEG          := 0x1ce2;
+CONST UOBJ_TRUNK        := 0x1cee;
+CONST UOBJ_HEART        := 0x1cef;
+CONST UOBJ_HEAD         := 0x1dae;
 
-const UOBJ_CHEST        := 0x1940;
+CONST UOBJ_TINKER_TOOLS := 0x1ebc;
 
-const UOBJ_FORGE_START  := 0x197a;  // see also UOBJ_SMALL_FORGE
-const UOBJ_FORGE_END    := 0x19a9;
 
-const UOBJ_FEATHER      := 0x1bd1;
-const UOBJ_SHAFTS       := 0x1bd4;
-const UOBJ_LOGS         := 0x1bdd;
+CONST UOBJ_RUNE         := 0x1f14;
 
-const UOBJ_GLASS        := 0xee20;
+CONST UOBJ_CORPSE       := 0x2006;
 
-const UOBJ_ARM          := 0x1cec;
-const UOBJ_LEG          := 0x1ce2;
-const UOBJ_TRUNK        := 0x1cee;
-const UOBJ_HEART        := 0x1cef;
-const UOBJ_HEAD         := 0x1dae;
+CONST UOBJ_PARAFIELD_NS := 0x3967;
+CONST UOBJ_PARAFIELD_EW := 0x3979;
+CONST UOBJ_POISONFIELD_NS   := 0x3914;
+CONST UOBJ_POISONFIELD_EW   := 0x3920;
+CONST UOBJ_EFIELD_NS        := 0x3947;
+CONST UOBJ_EFIELD_EW        := 0x3956;
 
-const UOBJ_TINKER_TOOLS := 0x1ebc;
+CONST GID_PLANK_EXTENDED_FACING_WEST   := 0x3ed5;
+CONST GID_PLANK_RETRACTED_FACING_WEST  := 0x3eb1;
+CONST GID_PLANK_EXTENDED_FACING_EAST   := 0x3ed4;
+CONST GID_PLANK_RETRACTED_FACING_EAST  := 0x3eb2;
+CONST GID_PLANK_EXTENDED_FACING_SOUTH  := 0x3e84;
+CONST GID_PLANK_RETRACTED_FACING_SOUTH := 0x3e85;
+CONST GID_PLANK_EXTENDED_FACING_NORTH  := 0x3e89;
+CONST GID_PLANK_RETRACTED_FACING_NORTH := 0x3e8a;
 
-
-const UOBJ_RUNE         := 0x1f14;
-
-const UOBJ_CORPSE       := 0x2006;
-
-const UOBJ_PARAFIELD_NS	:= 0x3967;
-const UOBJ_PARAFIELD_EW := 0x3979;
-const UOBJ_POISONFIELD_NS   := 0x3914;
-const UOBJ_POISONFIELD_EW   := 0x3920;
-const UOBJ_EFIELD_NS        := 0x3947;
-const UOBJ_EFIELD_EW        := 0x3956;
-
-const GID_PLANK_EXTENDED_FACING_WEST   := 0x3ed5;
-const GID_PLANK_RETRACTED_FACING_WEST  := 0x3eb1;
-const GID_PLANK_EXTENDED_FACING_EAST   := 0x3ed4;
-const GID_PLANK_RETRACTED_FACING_EAST  := 0x3eb2;
-const GID_PLANK_EXTENDED_FACING_SOUTH  := 0x3e84;
-const GID_PLANK_RETRACTED_FACING_SOUTH := 0x3e85;
-const GID_PLANK_EXTENDED_FACING_NORTH  := 0x3e89;
-const GID_PLANK_RETRACTED_FACING_NORTH := 0x3e8a;
-
 // ick! these are fine for humans, but not true for items..
 // these are more of a CID.
-const UOBJ_HUMAN_MALE   := 0x190;
-const UOBJ_HUMAN_FEMALE := 0x191;
+CONST UOBJ_HUMAN_MALE   := 0x190;
+CONST UOBJ_HUMAN_FEMALE := 0x191;
 
 /////////////////////////////////////////////////////////////////////////////
 //
@@ -210,10 +211,10 @@
 //
 /////////////////////////////////////////////////////////////////////////////
 
-	//
-	// Ship Components
-	//
-const EXTOBJ_TILLERMAN       := 0xf010;
-const EXTOBJ_PORT_PLANK      := 0xf011;
-const EXTOBJ_STARBOARD_PLANK := 0xf012;
-const EXTOBJ_HOLD            := 0xf013;
+        //
+        // Ship Components
+        //
+CONST EXTOBJ_TILLERMAN       := 0xf010;
+CONST EXTOBJ_PORT_PLANK      := 0xf011;
+CONST EXTOBJ_STARBOARD_PLANK := 0xf012;
+CONST EXTOBJ_HOLD            := 0xf013;

Modified: trunk/096/scripts/util/repair.inc
===================================================================
--- trunk/096/scripts/util/repair.inc	2005-09-20 17:27:16 UTC (rev 174)
+++ trunk/096/scripts/util/repair.inc	2005-09-20 18:12:19 UTC (rev 175)
@@ -1,6 +1,23 @@
+////////////////////////////////////////////////////////////////////////////////////////////////////
+//
+//  name:    repair.inc
+//  version: 2.0
+//  author:  MuadDib
+//
+//  Purpose: Contains all the central Repair functions involving repairing items, using repair
+//           deeds, etc.
+//
+//  Changes: Sept 14, 2005 - Updated repair_item() for swing counter (new crafting ready)
+//                         - Added CreateRepairDeed() Function with support for the following skills:
+//                           Smithy, Bowcraft, Carpenter, Tailor (new crafting ready)
+//                         - Moved repair_this() function to the include (new crafting ready)
+//                         - Moved s_weapon_armor() to the include (new crafting ready)
+//                         - Moved resmelt() to include (New crafting ready)
+//
+////////////////////////////////////////////////////////////////////////////////////////////////////
 
+include "include/attributes";
 
-include "include/attributes";
 function repair_item(character, what, skillid )
   var maxhp;
   maxhp := what.maxhp;
@@ -12,21 +29,21 @@
   damageamount := (125 -  hisskill)/3000.0;
   if(what.hp == what.maxhp)
     SendSysMessage(character, "That item is not damaged.");
-    return; 
+    return;
   endif
   if((what.hp <= 0) || (what.quality <= 0.1) || (!what.quality))
-    SendSysMessage(character, "The brittle material breaks when you handle it.");
+    SendSysMessage(character, "The brittle material breaks when you handle it");
     DestroyItem(what);
     return;
   endif
   if(what.quality <= damageamount)
-    SendSysMessage(character, "The brittle material breaks when you handle it.");
+    SendSysMessage(character, "The brittle material breaks when you handle it");
     DestroyItem(what);
     return;
   endif
   what.quality := what.quality - damageamount;
   if((what.hp <= 0) || (what.quality <= 0.1) || (!what.quality))
-    SendSysMessage(character, "The brittle material breaks when you handle it.");
+    SendSysMessage(character, "The brittle material breaks when you handle it");
     DestroyItem(what);
     return;
   endif
@@ -37,22 +54,22 @@
     endif
     if (thehp + repaired_amount > what.maxhp)
       what.hp := what.maxhp;
-      SendSysMessage(character, "You repair the item completely.");       
+      EraseObjProperty(what, "swings");
+      SendSysMessage(character, "You  repair the item completely");
     else
       what.hp := thehp + repaired_amount;
-      SendSysMessage(character, "You successfully repair some of the damage.");
+      SendSysMessage(character, "You successfully repair some of the damage");
     endif
     if ((what.hp <= 0) || (what.quality <= 0.1) || (!what.quality))
-      SendSysMessage(character, "The brittle material breaks when you handle it.");
+      SendSysMessage(character, "The brittle material breaks when you handle it");
       DestroyItem(what);
-      print("Destroyed item when " + character.name + " repaired it");
       return;
-    endif     
+    endif
   else
     var damage_amount := randomint(10);
     if (thehp <= damage_amount)
       DestroyItem(what);
-      SendSysMessage(character, "You fail and destroy the item.");
+      SendSysMessage(character, "You fail and destroy the item");
     endif
     thehp := thehp - damage_amount;
     what.hp := thehp;
@@ -61,14 +78,260 @@
     endif
     if(thehp <= 0)
       DestroyItem(what);
-      SendSysMessage(character, "You fail and destroy the item.");
+      SendSysMessage(character, "You fail and destroy the item");
     else
-      SendSysMessage(character, "You fail and damage the item.");
+      SendSysMessage(character, "You fail and damage the item");
     endif
     if ((what.hp <= 0) || (what.quality <= 0.1) || (!what.quality))
-      SendSysMessage(character, "The brittle material breaks when you handle it.");
+      SendSysMessage(character, "The brittle material breaks when you handle it");
       DestroyItem(what);
       return;
-    endif     
+    endif
   endif
+endfunction
+
+function CreateRepairDeed(who, scroll, skillid)
+
+  var type, title, color;
+  case(CInt(skillid))
+     7: type := "Blacksmith"; color := CInt(2107);
+     8: type := "Bowyer"; color := CInt(2116);
+    11: type := "Carpenter"; color := CInt(2113);
+    34: type := "Tailor"; color := CInt(2128);
+  endcase
+  var ramt := GetEffectiveSkill(who, skillid);
+  if(ramt < 50)
+    SendSysMessage(who, "You must be at least apprentice level to create a repair service contract.");
+    return;
+  endif
+  if(ramt < 60 )
+    title := "A repair service contract from an Apprentice " + type;
+  elseif(ramt < 70 )
+    title := "A repair service contract from a Journeyman " + type;
+  elseif(ramt < 80 )
+    title := "A repair service contract from an Expert " + type;
+  elseif(ramt < 90 )
+    title := "A repair service contract from an Adept " + type;
+  elseif(ramt < 100 )
+    title := "A repair service contract from a Master " + type;
+  elseif(ramt < 110 )
+    title := "A repair service contract from a Grandmaster " + type;
+  elseif(ramt < 120 )
+    title := "A repair service contract from an Elder " + type;
+  elseif(ramt < 130 )
+    title := "A repair service contract from a Legendary " + type;
+  endif
+  type := lower(type);
+  var ret := GetItemDescriptor(0xee09);
+  ret.Color := color;
+  ret.CProps.insert("type", type);
+  ret.CProps.insert("skillid", skillid);
+  ret.CProps.insert("ramt", ramt);
+  var theitem := CreateItemInBackpack(who, ret, 1);
+  if(theitem)
+    SubtractAmount(scroll, 1);
+  endif
+  SetName(theitem, title);
+  return;
+
+endfunction
+
+function repair_this(who, skillid := 7)
+  SendSysMessage(who, "Select item to repair.");
+  var use_on := Target(who);
+  if(!can_access(who, use_on))
+    return;
+  endif
+  if(use_on.movable == 0)
+    SendSysMessage(who, "You cannot repair that.");
+    return;
+  endif
+  if((!Accessible(who, use_on)) or (dist(who, use_on) > 2))
+    SendSysMessage(who, "You cannot reach that.");
+    return;
+  endif
+  if(CInt(use_on.objtype) == CInt(0xe34))
+    case(CInt(skillid))
+       7: CreateRepairDeed(who, use_on, skillid);
+       8: CreateRepairDeed(who, use_on, skillid);
+      11: CreateRepairDeed(who, use_on, skillid);
+      34: CreateRepairDeed(who, use_on, skillid);
+    endcase
+    return;
+  endif
+  var forge := 0;
+  case(CInt(skillid))
+     7: forge := 1;
+  endcase
+  if(!forge)
+    if(is_weapon_armor(use_on.objtype))
+      repair_item( who, use_on, skillid);
+    else
+      SendSysMessage(who, "You cannot repair that.");
+    endif
+  else
+    if(is_weapon_armor(use_on.objtype))
+      var near_items := ListItemsNearLocation(who.x, who.y, who.z,3);
+      foreach item in near_items
+        if ((item.objtype == UOBJ_ANVIL1) || (item.objtype == UOBJ_ANVIL2))
+          repair_item( who, use_on, skillid);
+          return;
+        endif
+      endforeach
+      SendSysMessage( who, "You must be near an anvil to repair items!" );
+      return;
+    else
+      SendSysMessage(who, "You cannot repair that");
+    endif
+  endif
+  return;
+endfunction
+
+function is_weapon_armor(what)
+  var combatcfg := ReadConfigFile(":combat:itemdesc");
+  var elem := FindConfigElem(combatcfg, what);
+  var repairable := GetConfigInt(elem, "repairable");
+  if (repairable == 1)
+    return 1;
+  else
+    return 0;
+  endif
+endfunction
+
+function resmelt(who)
+
+  var near_items := ListItemsNearLocation(who.x, who.y, who.z, 3);
+  var forge_near := 0;
+  foreach forge in near_items
+    if((forge.objtype == 0xfb1) || ((forge.objtype >= 0x197a) && (forge.objtype <= 0x19a9)))
+      forge_near := 1;
+      break;
+    endif
+  endforeach
+  if(forge_near == 0)
+    SendSysMessage(who, "You must be near a forge.");
+    return;
+  endif
+  SendSysMessage(who, "Select the item you wish to melt.");
+  var use_on := Target(who, TGTOPT_CHECK_LOS);
+  if(!use_on or !can_access(who, use_on))
+    return;
+  endif
+  if(use_on.container.serial != who.backpack.serial)
+    SendSysMessage(who, "That is not in your backpack.");
+    return;
+  endif
+  if(!Accessible(who, use_on) || !ReserveItem( use_on ))
+    SendSysMessage(who, "You cannot use that.");
+    return;
+  endif
+  if(use_on.movable == 0)
+    SendSysMessage(who, "You cannot use that while it is locked down.");
+    return;
+  endif
+  if(use_on in ListEquippedItems(who))
+    SendSysMessage(who, "You cannot use that.");
+    return;
+  endif
+  var cfgarray := GetConfigStringKeys(rlist_cfg);
+  if(use_on.isA(POLCLASS_CONTAINER))
+    var contitems := EnumerateItemsInContainer(use_on);
+    var skill, amt, ingot;
+    foreach thing in contitems
+      if(craftcfg[thing.objtype])
+        skill := craftcfg[thing.objtype].skill;
+        amt := CInt(craftcfg[thing.objtype].material);
+        if((!skill) || (!amt))
+          return;
+        endif
+        skill := CInt(skill/2);
+        if(skill < 5)
+          skill := 5;
+        endif
+        amt := CInt((amt * GetEffectiveSkill(who,SKILLID_BLACKSMITHY) * 75 ) / 10000);
+        if(amt < 1)
+          amt := 1;
+        endif
+        ingot := -1;
+        var mattype := CInt(GetObjProperty(use_on, "material"));
+        if(mattype >= 0)
+          if(mattype != error)
+            ingot := mattype;
+          endif
+        endif
+        if(ingot == -1)
+          foreach entry in cfgarray
+            if(lower(rlist_cfg[entry].Type) == "metal")
+              if(CInt(rlist_cfg[entry].Color) == CInt(thing.color))
+                ingot := entry;
+              endif
+            endif
+          endforeach
+        endif
+        if(ingot == -1)
+          SendSysMessage(who, "You have no idea how to smelt this strange ore!");
+          return;
+        endif
+        PlaySoundEffect(who, 0x2c);
+        sleep(1);
+        PlaySoundEffect(who, 0x22);
+        if(DestroyItem(thing))
+          if(CheckSkill(who, SKILLID_BLACKSMITHY, skill, 10))
+            CreateItemInContainer(who.backpack, ingot, amt);
+          else
+            SendSysMessage(who, "You destroy the item.");
+          endif
+        endif
+      endif
+      sleep(1);
+   endforeach
+  else
+    if(!craftcfg[use_on.objtype])
+      return;
+    endif
+    var ingot := -1;
+    var skill := craftcfg[use_on.objtype].skill;
+    var amt := CInt(craftcfg[use_on.objtype].material);
+    if((!skill) || (!amt))
+      return;
+    endif
+    skill := CInt(skill/2);
+    if(skill < 5)
+      skill := 5;
+    endif
+    amt := CInt((amt * GetEffectiveSkill(who,SKILLID_BLACKSMITHY) * 75 ) / 10000);
+    if(amt < 1)
+      amt := 1;
+    endif
+    var mattype := CInt(GetObjProperty(use_on, "material"));
+    if(mattype >= 0)
+      if(mattype != error)
+        ingot := mattype;
+      endif
+    endif
+    if(ingot == -1)
+      foreach entry in cfgarray
+        if(lower(rlist_cfg[entry].Type) == "metal")
+          if(CInt(rlist_cfg[entry].Color) == CInt(use_on.color))
+            ingot := entry;
+          endif
+        endif
+      endforeach
+    endif
+    if(ingot == -1)
+      SendSysMessage(who, "You have no idea how to smelt this strange ore!");
+      return;
+    endif
+    PlaySoundEffect(who, 0x2c);
+    sleep(1);
+    PlaySoundEffect(who, 0x22);
+    if(DestroyItem(use_on))
+      if(CheckSkill(who, SKILLID_BLACKSMITHY, skill, 10))
+        CreateItemInContainer(who.backpack, ingot, amt);
+      else
+        SendSysMessage(who, "You destroy the item.");
+      endif
+    endif
+  endif
+
 endfunction
\ No newline at end of file



From muaddiblsd at berlios.de  Tue Sep 20 20:19:46 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Tue, 20 Sep 2005 20:19:46 +0200
Subject: [Poldistro-svn] r176 - in trunk/096/pkg/items: . repaircontract
Message-ID: <200509201819.j8KIJkbZ017484@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-20 20:19:44 +0200 (Tue, 20 Sep 2005)
New Revision: 176

Added:
   trunk/096/pkg/items/repaircontract/
   trunk/096/pkg/items/repaircontract/itemdesc.cfg
   trunk/096/pkg/items/repaircontract/pkg.cfg
   trunk/096/pkg/items/repaircontract/repairDeed.src
Log:


Added: trunk/096/pkg/items/repaircontract/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/repaircontract/itemdesc.cfg	2005-09-20 18:12:19 UTC (rev 175)
+++ trunk/096/pkg/items/repaircontract/itemdesc.cfg	2005-09-20 18:19:44 UTC (rev 176)
@@ -0,0 +1,11 @@
+Item 0xee09
+{
+    name 		repairdeed
+    desc 		repair deed
+    script              repairDeed
+    Graphic             0x14EF
+    Newbie              1
+    VendorSellsFor      0
+    VendorBuysFor 	0
+}
+

Added: trunk/096/pkg/items/repaircontract/pkg.cfg
===================================================================
--- trunk/096/pkg/items/repaircontract/pkg.cfg	2005-09-20 18:12:19 UTC (rev 175)
+++ trunk/096/pkg/items/repaircontract/pkg.cfg	2005-09-20 18:19:44 UTC (rev 176)
@@ -0,0 +1,5 @@
+Enabled         1
+Name            repaircontract
+Version         1.0
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net

Added: trunk/096/pkg/items/repaircontract/repairDeed.src
===================================================================
--- trunk/096/pkg/items/repaircontract/repairDeed.src	2005-09-20 18:12:19 UTC (rev 175)
+++ trunk/096/pkg/items/repaircontract/repairDeed.src	2005-09-20 18:19:44 UTC (rev 176)
@@ -0,0 +1,149 @@
+use uo;
+use cfgfile;
+
+include "include/canAccess";
+include "include/attributes";
+include "include/dist";
+
+program usescript_repairDeed(who, deed)
+
+  if(!can_access(who, deed, "reserve"))
+    return;
+  endif
+
+  if(deed.container.serial != who.backpack.serial)
+    SendSysMessage(who, "The contract must be in your backpack to use it.");
+    return;
+  endif
+
+  if(NearNPC(who, (GetObjProperty(deed, "type"))))
+    if(RepairFromDeed(who, deed))
+      DestroyItem(deed);
+    endif
+  else
+    SendSysMessage(who, "You must be near a "+(GetObjProperty(deed, "type"))+" shop to use this contract.");
+    return;
+  endif
+
+endprogram
+
+function NearNPC(who, type)
+
+  var MOBS_Near := ListMobilesNearLocation(who.x, who.y, who.z, 10);
+  foreach mobile in MOBS_Near
+    if( lower(GetObjProperty(mobile, "MerchantType")) == type)
+      return 1;
+    endif
+  endforeach
+  return 0;
+
+endfunction
+
+function RepairFromDeed(who, deed)
+
+  var skillid := GetObjProperty(deed, "skillid");
+  var what := SelectiveRepair(who, skillid);
+  if(!what)
+    return 0;
+  endif
+  var maxhp := what.maxhp;
+  maxhp := CInt(maxhp * what.quality);
+  var thehp := what.hp;
+  var damaged := maxhp - thehp;
+  var hisskill := GetObjProperty(deed, "ramt");
+  var damageamount := 0.0;
+  damageamount := (125 -  hisskill)/3000.0;
+  if(what.hp == what.maxhp)
+    SendSysMessage(who, "That is already in full repair.");
+    return 0;
+  endif
+  if((what.hp <= 0) || (what.quality <= 0.1) || (!what.quality))
+    SendSysMessage(who, "You destroyed the item.");
+    DestroyItem(what);
+    return 1;
+  endif
+  if(what.quality <= damageamount)
+    SendSysMessage(who, "That item has been repaired many times, and will break if repairs are attempted again.");
+    return 0;
+  endif
+  if((what.hp <= 0) || (what.quality <= 0.1) || (!what.quality))
+    SendSysMessage(who, "You destroyed the item.");
+    DestroyItem(what);
+    return 1;
+  endif
+  var repaired_amount := CInt(((randomint(hisskill) + 1))/2);
+  print("repair: " + repaired_amount + " / " + (maxhp / 3));
+  if(repaired_amount < (maxhp / 3))
+    SendSysMessage(who, "You fail to repair the item and the repair contract is destroyed.");
+    return 1;
+  endif
+  if(damaged == 1)
+    repaired_amount := 1;
+  endif
+  what.quality := what.quality - damageamount;
+  if (thehp + repaired_amount > what.maxhp)
+    what.hp := what.maxhp;
+    EraseObjProperty(what, "swings");
+    SendSysMessage(who, "You repair the item.");
+  else
+    what.hp := thehp + repaired_amount;
+    SendSysMessage(who, "You repair the item");
+  endif
+
+  return 1;
+  
+endfunction
+
+function SelectiveRepair(who, skillid)
+
+  SendSysMessage(who, "Select item to repair.");
+  var use_on := Target(who);
+  if(!can_access(who, use_on, "reserve"))
+    return;
+  endif
+  if(use_on.movable == 0)
+    SendSysMessage(who, "You cannot repair that");
+    return;
+  endif
+  if((!Accessible(who, use_on)) or (dist(who, use_on) > 2))
+    SendSysMessage(who, "You cannot reach that");
+    return;
+  endif
+  if(use_on.container.serial != who.backpack.serial)
+    SendSysMessage(who, "The item must be in your backpack to repair it.");
+    return;
+  endif
+  if(is_repairable(who, use_on.objtype, skillid))
+    return use_on;
+  else
+    return 0;
+  endif
+
+endfunction
+
+function is_repairable(who, what, skillid)
+
+  var skill_cfg;
+  case(CInt(skillid))
+     7: skill_cfg := ReadConfigFile(":blacksmithy:blacksmithy");
+     8: skill_cfg := ReadConfigFile(":bowcraft:bowcraft");
+    11: skill_cfg := ReadConfigFile(":carpentry:carpentry");
+    34: skill_cfg := ReadConfigFile(":tailoring:tailoring");
+  endcase
+  var itemcfg := ReadConfigFile(":*:itemdesc");
+  var elem := FindConfigElem(itemcfg, what);
+  var skillref := FindConfigElem(skill_cfg, what);
+  var repairable := GetConfigInt(elem,"repairable");
+  if(skillref)
+    if(repairable == 1)
+      return 1;
+    else
+      SendSysMessage(who, "The item cannot be repaired");
+      return 0;
+    endif
+  else
+    SendSysMessage(who, "You cannot repair that item with this type of repair contract.");
+    return 0;
+  endif
+
+endfunction



From austin at berlios.de  Tue Sep 20 20:47:41 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 20:47:41 +0200
Subject: [Poldistro-svn] r177 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509201847.j8KIlfNm020151@sheep.berlios.de>

Author: austin
Date: 2005-09-20 20:47:41 +0200 (Tue, 20 Sep 2005)
New Revision: 177

Added:
   trunk/096/pkg/systems/attributes/include/attributes_ex.inc
Log:
Functions to convert skill ids and attribute names back and forth.

Added: trunk/096/pkg/systems/attributes/include/attributes_ex.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes_ex.inc	2005-09-20 18:19:44 UTC (rev 176)
+++ trunk/096/pkg/systems/attributes/include/attributes_ex.inc	2005-09-20 18:47:41 UTC (rev 177)
@@ -0,0 +1,52 @@
+/*===============================================================
+* Current Version
+* ATTRIBUTES_EX.INC - v1.0
+* Updated 9/20/2005 11:42AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+include ":attributes:include/attributes";
+
+/*
+ * AF_SkillIDToAttributeName(skill_number)
+ *
+ * Purpose
+ * Gets the name of the attribute that is associated with a skill number.
+ * Skills.cfg -> Attributes.cfg
+ *
+ * Parameters
+ * skill_number:	Skill ID to convert
+ *
+ * Return value
+ * Returns a string.
+ *
+ */
+function AF_IDToAttributeName(skill_number)
+	var skills_cfg := ReadConfigFile(":*:skills");
+	var cfg_elem := skills_cfg[skill_number];
+	
+	return elem.Name;
+endfunction
+
+/*
+ * AF_AttributeNameToSkillID(skill_number)
+ *
+ * Purpose
+ * Gets the skill number (ID) that an attribute name is associated with.
+ * Attributes.cfg -> Skills.cfg
+ *
+ * Parameters
+ * attribute_name:	Attribute name to convert.
+ *
+ * Return value
+ * Returns an integer.
+ *
+ */
+function AF_AttributeNameToSkillID(attribute_name)
+	var cfg_elem := AF_GetAttributeElem(attribute_name);
+	
+	return cfg_elem.SkillId;
+endfunction
\ No newline at end of file



From austin at berlios.de  Tue Sep 20 20:53:35 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 20:53:35 +0200
Subject: [Poldistro-svn] r178 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509201853.j8KIrZGc020943@sheep.berlios.de>

Author: austin
Date: 2005-09-20 20:53:34 +0200 (Tue, 20 Sep 2005)
New Revision: 178

Modified:
   trunk/096/pkg/systems/attributes/include/attributes.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/attributes.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-20 18:47:41 UTC (rev 177)
+++ trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-20 18:53:34 UTC (rev 178)
@@ -0,0 +1,44 @@
+/*===============================================================
+* Current Version
+* ATTRIBUTES.INC - v1.0
+* Updated 9/20/2005 10:30AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+
+include ":attributes:include/regen";
+include ":attributes:include/skills";
+include ":attributes:include/stats";
+include ":attributes:include/vitals";
+
+/*
+ * AF_GetAttributeCfgElem(attribute)
+ *
+ * Purpose
+ * Retrieves a config elem for an attribute in attributes.cfg
+ *
+ * Parameters
+ * attribute:	Name of the attribute to get the elem of.
+ *
+ * Return value
+ * Returns a config file elem.
+ *
+ */
+function AF_GetAttributeCfgElem(attribute)
+	var cfg := ReadConfigFile(":attributes:attributes");
+	if ( cfg.errortext )
+		SysLog("Error::GetAttributeCfgElem() - Unable to open attributes.cfg ->"+cfg.errortext);
+	endif
+	
+	var cfg_elem := cfg[attribute];
+	if ( cfg_elem.errortext )
+		SysLog("Error::GetAttributeCfgElem() - in attributes.cfg ->"+cfg_elem.errortext);
+	endif
+	
+	return cfg_elem;
+endfunction



From austin at berlios.de  Tue Sep 20 21:04:09 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 21:04:09 +0200
Subject: [Poldistro-svn] r179 - trunk/096/pkg/systems/attributes
Message-ID: <200509201904.j8KJ49os021903@sheep.berlios.de>

Author: austin
Date: 2005-09-20 21:04:08 +0200 (Tue, 20 Sep 2005)
New Revision: 179

Modified:
   trunk/096/pkg/systems/attributes/attributes.cfg
Log:
Parry fixed ;p

Modified: trunk/096/pkg/systems/attributes/attributes.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-20 18:53:34 UTC (rev 178)
+++ trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-20 19:04:08 UTC (rev 179)
@@ -120,6 +120,7 @@
 
 Attribute Parrying
 {
+	Alias		Parry
 	AttributeType	Skill
 	SkillId		5
 	



From austin at berlios.de  Tue Sep 20 21:17:19 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 21:17:19 +0200
Subject: [Poldistro-svn] r180 - in trunk/096/pkg/systems/attributes: . hooks
Message-ID: <200509201917.j8KJHJc3023044@sheep.berlios.de>

Author: austin
Date: 2005-09-20 21:17:19 +0200 (Tue, 20 Sep 2005)
New Revision: 180

Added:
   trunk/096/pkg/systems/attributes/hooks/
   trunk/096/pkg/systems/attributes/hooks/regenRate.src
Log:
Regen rate hook... intrinsic mod hooks, etc.

Added: trunk/096/pkg/systems/attributes/hooks/regenRate.src
===================================================================



From austin at berlios.de  Tue Sep 20 21:41:54 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 21:41:54 +0200
Subject: [Poldistro-svn] r181 - in trunk/096/pkg/systems/attributes: . hooks include
Message-ID: <200509201941.j8KJfsMw024726@sheep.berlios.de>

Author: austin
Date: 2005-09-20 21:41:53 +0200 (Tue, 20 Sep 2005)
New Revision: 181

Modified:
   trunk/096/pkg/systems/attributes/attributes.cfg
   trunk/096/pkg/systems/attributes/hooks/regenRate.src
   trunk/096/pkg/systems/attributes/include/attributes.inc
   trunk/096/pkg/systems/attributes/include/attributes_ex.inc
   trunk/096/pkg/systems/attributes/pkg.cfg
   trunk/096/pkg/systems/attributes/vitals.cfg
Log:
Got it to where the package 'works' :-P

Modified: trunk/096/pkg/systems/attributes/attributes.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-20 19:17:19 UTC (rev 180)
+++ trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-20 19:41:53 UTC (rev 181)
@@ -121,6 +121,7 @@
 Attribute Parrying
 {
 	Alias		Parry
+	
 	AttributeType	Skill
 	SkillId		5
 	
@@ -422,6 +423,8 @@
 
 Attribute Swordsmanship
 {
+	Alias		Swords
+	
 	AttributeType	Skill
 	SkillId		40
 	
@@ -431,6 +434,8 @@
 
 Attribute MaceFighting
 {
+	Alias		Mace
+	
 	AttributeType	Skill
 	DisplayName	Mace Fighting
 	SkillId		41

Modified: trunk/096/pkg/systems/attributes/hooks/regenRate.src
===================================================================
--- trunk/096/pkg/systems/attributes/hooks/regenRate.src	2005-09-20 19:17:19 UTC (rev 180)
+++ trunk/096/pkg/systems/attributes/hooks/regenRate.src	2005-09-20 19:41:53 UTC (rev 181)
@@ -0,0 +1,61 @@
+/*===============================================================
+* Current Version
+* regenRates.src
+* Updated 9/20/2005 12:20PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created file
+===============================================================*/
+use uo;
+
+include ":attributes:include/attributes";
+include ":ai_brain:include/npcUtil";
+
+program Install()
+	print("INSTALLED: Exported Vital - RegenRate and MaxValue functions... ok.");
+	return 1;
+endprogram
+
+
+
+// *****
+// Hit Point Functions
+// *****
+exported function GetHitsRegenRate(mobile)
+	return 1200;
+endfunction
+
+exported function GetHitsMaximumValue(mobile)
+	var max_hits := GetAttribute(mobile, "Strength") * 100;
+	if ( mobile.npctemplate )
+		var npc_cfg := NPC_GetNPCConfig(mobile.npctemplate);
+		if ( npc_cfg.HITS )
+			max_hits := npc_cfg.HITS * 100;
+		endif
+	endif
+		
+	return max_hits;
+endfunction
+
+// *****
+// Mana Functions
+// *****
+exported function GetManaRegenRate(mobile)
+	return 1200;
+endfunction
+
+exported function GetManaMaximumValue(mobile)
+    return GetAttribute(mobile, "Mana") * 100;
+endfunction
+
+// *****
+// Stamina Functions
+// *****
+exported function GetStaminaRegenRate(mobile)
+	return 1200;
+endfunction
+
+exported function GetStaminaMaximumValue(mobile)
+	return GetAttribute(mobile, "Stamina") * 100;
+endfunction

Modified: trunk/096/pkg/systems/attributes/include/attributes.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-20 19:17:19 UTC (rev 180)
+++ trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-20 19:41:53 UTC (rev 181)
@@ -10,6 +10,7 @@
 
 use uo;
 use os;
+use cfgfile;
 
 include ":attributes:include/regen";
 include ":attributes:include/skills";
@@ -32,12 +33,12 @@
 function AF_GetAttributeCfgElem(attribute)
 	var cfg := ReadConfigFile(":attributes:attributes");
 	if ( cfg.errortext )
-		SysLog("Error::GetAttributeCfgElem() - Unable to open attributes.cfg ->"+cfg.errortext);
+		SysLog("Error::AF_GetAttributeCfgElem() - Unable to open attributes.cfg ->"+cfg.errortext);
 	endif
 	
 	var cfg_elem := cfg[attribute];
 	if ( cfg_elem.errortext )
-		SysLog("Error::GetAttributeCfgElem() - in attributes.cfg ->"+cfg_elem.errortext);
+		SysLog("Error::AF_GetAttributeCfgElem() - unable to find cfg elem ["+attribute+"] ->"+cfg_elem.errortext);
 	endif
 	
 	return cfg_elem;

Modified: trunk/096/pkg/systems/attributes/include/attributes_ex.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes_ex.inc	2005-09-20 19:17:19 UTC (rev 180)
+++ trunk/096/pkg/systems/attributes/include/attributes_ex.inc	2005-09-20 19:41:53 UTC (rev 181)
@@ -26,9 +26,16 @@
  */
 function AF_IDToAttributeName(skill_number)
 	var skills_cfg := ReadConfigFile(":*:skills");
+	if ( skills_cfg.errortext )
+		SysLog("Error::AF_IDToAttributeName() - Unable to open :*:skills.cfg ->"+skills_cfg.errortext);
+	endif
+	
 	var cfg_elem := skills_cfg[skill_number];
+	if ( cfg_elem.errortext )
+		SysLog("Error::AF_IDToAttributeName() - unable to find cfg elem ["+skill_number+"] ->"+cfg_elem.errortext);
+	endif
 	
-	return elem.Name;
+	return cfg_elem.Name;
 endfunction
 
 /*
@@ -46,7 +53,7 @@
  *
  */
 function AF_AttributeNameToSkillID(attribute_name)
-	var cfg_elem := AF_GetAttributeElem(attribute_name);
+	var cfg_elem := AF_GetAttributeCfgElem(attribute_name);
 	
 	return cfg_elem.SkillId;
 endfunction
\ No newline at end of file

Modified: trunk/096/pkg/systems/attributes/pkg.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/pkg.cfg	2005-09-20 19:17:19 UTC (rev 180)
+++ trunk/096/pkg/systems/attributes/pkg.cfg	2005-09-20 19:41:53 UTC (rev 181)
@@ -1,4 +1,4 @@
-Enabled		0
+Enabled		1
 Name		attributes
 
 Creator		Hesinde-Team

Modified: trunk/096/pkg/systems/attributes/vitals.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/vitals.cfg	2005-09-20 19:17:19 UTC (rev 180)
+++ trunk/096/pkg/systems/attributes/vitals.cfg	2005-09-20 19:41:53 UTC (rev 181)
@@ -28,18 +28,18 @@
 Vital Hits
 {
     Alias               Life
-    RegenRateFunction   regenRate:GetHitsRegenRate
-    MaximumFunction     regenRate:GetHitsMaximumValue
+    RegenRateFunction	:attributes:hooks/regenRate:GetHitsRegenRate
+    MaximumFunction	:attributes:hooks/regenRate:GetHitsMaximumValue
 }
 
 Vital Mana
 {
-    RegenRateFunction   regenRate:GetManaRegenRate
-    MaximumFunction     regenRate:GetManaMaximumValue
+    RegenRateFunction	:attributes:hooks/regenRate:GetManaRegenRate
+    MaximumFunction	:attributes:hooks/regenRate:GetManaMaximumValue
 }
 
 Vital Stamina
 {
-    RegenRateFunction   regenRate:GetStaminaRegenRate
-    MaximumFunction     regenRate:GetStaminaMaximumValue
+    RegenRateFunction	:attributes:hooks/regenRate:GetStaminaRegenRate
+    MaximumFunction	:attributes:hooks/regenRate:GetStaminaMaximumValue
 }



From austin at berlios.de  Tue Sep 20 21:52:44 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 21:52:44 +0200
Subject: [Poldistro-svn] r182 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509201952.j8KJqiKw025356@sheep.berlios.de>

Author: austin
Date: 2005-09-20 21:52:44 +0200 (Tue, 20 Sep 2005)
New Revision: 182

Modified:
   trunk/096/pkg/systems/attributes/include/attributes_ex.inc
Log:
uses uoskills.cfg instead of skills.cfg

Modified: trunk/096/pkg/systems/attributes/include/attributes_ex.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes_ex.inc	2005-09-20 19:41:53 UTC (rev 181)
+++ trunk/096/pkg/systems/attributes/include/attributes_ex.inc	2005-09-20 19:52:44 UTC (rev 182)
@@ -25,7 +25,7 @@
  *
  */
 function AF_IDToAttributeName(skill_number)
-	var skills_cfg := ReadConfigFile(":*:skills");
+	var skills_cfg := ReadConfigFile(":attributes:uoskills");
 	if ( skills_cfg.errortext )
 		SysLog("Error::AF_IDToAttributeName() - Unable to open :*:skills.cfg ->"+skills_cfg.errortext);
 	endif



From austin at berlios.de  Tue Sep 20 21:53:55 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 21:53:55 +0200
Subject: [Poldistro-svn] r183 - trunk/096/pkg/systems/attributes
Message-ID: <200509201953.j8KJrtLD025470@sheep.berlios.de>

Author: austin
Date: 2005-09-20 21:53:54 +0200 (Tue, 20 Sep 2005)
New Revision: 183

Modified:
   trunk/096/pkg/systems/attributes/attributes.cfg
   trunk/096/pkg/systems/attributes/uoskills.cfg
Log:
Gets rid of aliases which don't work and should not be used.
Renames parrying to parry (required by core)

Modified: trunk/096/pkg/systems/attributes/attributes.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-20 19:52:44 UTC (rev 182)
+++ trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-20 19:53:54 UTC (rev 183)
@@ -118,10 +118,8 @@
 	StatCheck	Strength	100	1d2+10
 }
 
-Attribute Parrying
+Attribute Parry
 {
-	Alias		Parry
-	
 	AttributeType	Skill
 	SkillId		5
 	
@@ -423,8 +421,6 @@
 
 Attribute Swordsmanship
 {
-	Alias		Swords
-	
 	AttributeType	Skill
 	SkillId		40
 	
@@ -434,8 +430,6 @@
 
 Attribute MaceFighting
 {
-	Alias		Mace
-	
 	AttributeType	Skill
 	DisplayName	Mace Fighting
 	SkillId		41

Modified: trunk/096/pkg/systems/attributes/uoskills.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/uoskills.cfg	2005-09-20 19:52:44 UTC (rev 182)
+++ trunk/096/pkg/systems/attributes/uoskills.cfg	2005-09-20 19:53:54 UTC (rev 183)
@@ -43,7 +43,7 @@
 
 Skill 5
 {
-	Attribute Parrying
+	Attribute Parry
 }
 
 Skill 6



From austin at berlios.de  Tue Sep 20 21:58:14 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 21:58:14 +0200
Subject: [Poldistro-svn] r184 - trunk/096/config
Message-ID: <200509201958.j8KJwEq4025675@sheep.berlios.de>

Author: austin
Date: 2005-09-20 21:58:14 +0200 (Tue, 20 Sep 2005)
New Revision: 184

Modified:
   trunk/096/config/npcdesc.cfg
Log:
Gets rid of aliases used for attributes!

Modified: trunk/096/config/npcdesc.cfg
===================================================================
--- trunk/096/config/npcdesc.cfg	2005-09-20 19:53:54 UTC (rev 183)
+++ trunk/096/config/npcdesc.cfg	2005-09-20 19:58:14 UTC (rev 184)
@@ -5715,7 +5715,7 @@
     Tactics                78
     Fencing                68
     Swordsmanship          58
-    Parrying               78
+    Parry               78
     AttackSpeed            30
     AttackDamage           4d4
     AttackAttribute        Wrestling



From austin at berlios.de  Tue Sep 20 21:59:00 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 21:59:00 +0200
Subject: [Poldistro-svn] r185 - trunk/096/pkg/systems/combat
Message-ID: <200509201959.j8KJx0k0025738@sheep.berlios.de>

Author: austin
Date: 2005-09-20 21:59:00 +0200 (Tue, 20 Sep 2005)
New Revision: 185

Modified:
   trunk/096/pkg/systems/combat/itemdesc.cfg
Log:
Gets rid of aliases used for attribute names.

Modified: trunk/096/pkg/systems/combat/itemdesc.cfg
===================================================================
--- trunk/096/pkg/systems/combat/itemdesc.cfg	2005-09-20 19:58:14 UTC (rev 184)
+++ trunk/096/pkg/systems/combat/itemdesc.cfg	2005-09-20 19:59:00 UTC (rev 185)
@@ -1410,7 +1410,7 @@
     Default         1
     Speed           35
     Damage          2d15+3
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x0009
     MaxHP           60
     Script          bladed
@@ -1434,7 +1434,7 @@
     desc            war axe
     Speed           40
     Damage          6d4+3
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000b
     HitSound        0x23D
     MissSound       0x233
@@ -1547,7 +1547,7 @@
     desc            axe
     Speed           37
     Damage          3d10+3
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x000d
     MaxHP           65
     Script          :lumberjacking:lumberjack
@@ -1572,7 +1572,7 @@
     desc            battle axe
     Speed           30
     Damage          2d17+4
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x000d
     MaxHP           55
     Script          :lumberjacking:lumberjack
@@ -1597,7 +1597,7 @@
     desc            double axe
     Speed           37
     Damage          1d31+4
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x000d
     MaxHP           65
     Script          :lumberjacking:lumberjack
@@ -1622,7 +1622,7 @@
     desc            executioner's axe
     Speed           37
     Damage          3d10+3
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x000d
     MaxHP           60
     Script          :lumberjacking:lumberjack
@@ -1647,7 +1647,7 @@
     desc            large battle axe
     Speed           30
     Damage          2d17+4
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x000d
     MaxHP           70
     Script          :lumberjacking:lumberjack
@@ -1672,7 +1672,7 @@
     desc            two handed axe
     Speed           30
     Damage          2d18+3
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x000d
     MaxHP           50
     Script          :lumberjacking:lumberjack
@@ -1698,7 +1698,7 @@
     desc            hammer pick
     Speed           30
     Damage          3d10+3
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000b
     MaxHP           50
     Script          :mining:mining
@@ -1730,7 +1730,7 @@
     VendorSellsFor  38
     VendorBuysFor   30
     strrequired     20
-    Attribute       Mace
+    Attribute       Macefighting
     repairable      1
     MinDam          8
     MaxDam          32
@@ -1747,7 +1747,7 @@
     desc            maul
     Speed           30
     Damage          5d5+5
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000b
     HitSound        0x13C
     MissSound       0x234
@@ -1771,7 +1771,7 @@
     desc            war hammer
     Speed           31
     Damage          7d5+1
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000d
     HitSound        0x13C
     MissSound       0x234
@@ -1796,7 +1796,7 @@
     desc            war mace
     Speed           32
     Damage          5d5+5
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000b
     HitSound        0x13C
     MissSound       0x234
@@ -1820,7 +1820,7 @@
     desc            bardiche
     Speed           26
     Damage          2d18+3
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x000d
     HitSound        0x237
     MissSound       0x233
@@ -1845,7 +1845,7 @@
     desc            halberd
     Speed           25
     Damage          8d5+3
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0xC
     HitSound        0x238
     MissSound       0x233
@@ -1942,7 +1942,7 @@
     desc            broadsword
     Speed           45
     Damage          2d13+3
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x0009
     MaxHP           65
     Script          bladed
@@ -1966,7 +1966,7 @@
     desc            cutlass
     Speed           45
     Damage          2d12+4
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x0009
     MaxHP           55
     Script          bladed
@@ -2014,7 +2014,7 @@
     desc            katana
     Speed           58
     Damage          3d8+2
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x0009
     MaxHP           60
     Script          bladed
@@ -2062,7 +2062,7 @@
     desc            scimitar
     Speed           43
     Damage          2d14+2
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x0009
     MaxHP           50
     Script          bladed
@@ -2086,7 +2086,7 @@
     desc            viking sword
     Speed           30
     Damage          4d8+2
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x0009
     MaxHP           50
     Script          bladed
@@ -2111,7 +2111,7 @@
     desc            hatchet
     Speed           40
     Damage          2d8+1
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x0009
     MaxHP           55
     Script          :lumberjacking:lumberjack
@@ -2135,7 +2135,7 @@
     desc            pickaxe
     Speed           35
     Damage          1d15
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000c
     MaxHP           45
     Script          :mining:mining
@@ -2159,7 +2159,7 @@
     desc            butcher's knife
     Speed           40
     Damage          2d2
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x0009
     MaxHP           35
     Script          bladed
@@ -2183,7 +2183,7 @@
     desc            cleaver
     Speed           40
     Damage          1d7
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x0009
     MaxHP           40
     Script          bladed
@@ -2207,7 +2207,7 @@
     desc            skinning knife
     Speed           40
     Damage          1d5
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x0009
     MaxHP           35
     Script          bladed
@@ -2231,7 +2231,7 @@
     desc            club
     Speed           40
     Damage          4d5+4
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000b
     MaxHP           35
     HitSound        0x13C
@@ -2280,7 +2280,7 @@
     desc            black staff
     Speed           35
     Damage          5d6+3
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0xD
     HitSound        0x13C
     MissSound       0x234
@@ -2305,7 +2305,7 @@
     desc            gnarled staff
     Speed           33
     Damage          5d5+5
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0xC
     MaxHP           40
     HitSound        0x13C
@@ -2329,7 +2329,7 @@
     desc            quarterstaff
     Speed           48
     Damage          5d5+3
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0xC
     MaxHP           45
     HitSound        0x13C
@@ -2354,7 +2354,7 @@
     script          :herding:herd
     Speed           30
     Damage          3d4
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0xC
     MaxHP           30
     HitSound        0x13C
@@ -2393,7 +2393,7 @@
     graphic         0x0F60
     Speed           35
     Damage          2d4
-    Attribute       Swords
+    Attribute       Swordsmanship
     Anim            0x0009
     MaxHP           60
     Script          bladed
@@ -2414,7 +2414,7 @@
     graphic         0x0f5c
     Speed           30
     Damage          2d4
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000b
     HitSound        0x13C
     MissSound       0x234
@@ -2476,7 +2476,7 @@
     Default         1
     Speed           30
     Damage          6d3
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000b
     MaxHP           60
     Script          :blacksmithy:makeBlacksmithItems
@@ -2497,7 +2497,7 @@
     Default         1
     Speed           30
     Damage          6d3
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000b
     MaxHP           60
     Script          :blacksmithy:makeBlacksmithItems
@@ -2517,7 +2517,7 @@
     Name            sledgehammer
     Speed           25
     Damage          4d6
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000b
     MaxHP           80
     Script          :blacksmithy:makeBlacksmithItems
@@ -2537,7 +2537,7 @@
     Name            sledgehammer2
     Speed           25
     Damage          4d6
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000b
     MaxHP           80
     Script          :blacksmithy:makeBlacksmithItems
@@ -2559,7 +2559,7 @@
     Weight          1
     Speed           35
     Damage          2d3
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000b
     MaxHP           30
     HitSound        0x13C
@@ -2576,7 +2576,7 @@
     Weight          1
     Speed           35
     Damage          2d3
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000b
     MaxHP           30
     HitSound        0x13C
@@ -2593,7 +2593,7 @@
     Weight          1
     Speed           35
     Damage          2d3
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000b
     MaxHP           30
     HitSound        0x13C
@@ -2610,7 +2610,7 @@
     Weight          1
     Speed           35
     Damage          2d3
-    Attribute       Mace
+    Attribute       Macefighting
     Anim            0x000b
     MaxHP           30
     HitSound        0x13C



From austin at berlios.de  Tue Sep 20 22:08:14 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 22:08:14 +0200
Subject: [Poldistro-svn] r186 - trunk/096/pkg/systems/attributes
Message-ID: <200509202008.j8KK8EaR026310@sheep.berlios.de>

Author: austin
Date: 2005-09-20 22:08:14 +0200 (Tue, 20 Sep 2005)
New Revision: 186

Added:
   trunk/096/pkg/systems/attributes/skills.cfg
Log:
I declare that skills.cfg shall only exist in the attributes package..!

Added: trunk/096/pkg/systems/attributes/skills.cfg
===================================================================



From austin at berlios.de  Tue Sep 20 22:14:31 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 22:14:31 +0200
Subject: [Poldistro-svn] r187 - trunk/096/config
Message-ID: <200509202014.j8KKEV1o012627@sheep.berlios.de>

Author: austin
Date: 2005-09-20 22:14:31 +0200 (Tue, 20 Sep 2005)
New Revision: 187

Modified:
   trunk/096/config/skills.cfg
Log:
SO EMPTY!

Modified: trunk/096/config/skills.cfg
===================================================================
--- trunk/096/config/skills.cfg	2005-09-20 20:08:14 UTC (rev 186)
+++ trunk/096/config/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
@@ -1,306 +1,6 @@
- /////////////////////////////////////////////////////////////////////////////
+//////////////////////
 //
-//  SKILLS.CFG:     Skill Definitions
+// Do not place anything in this file. It is here because the core requires it be.
+// Look in the attributes package if you need to edit skills.cfg
 //
-//  USED BY:        System
-//
-//  TODO:           tune delays, define stat advancement data for all skills
-//
-//  The following can be defined for a Skill:
-//
-//      Name        Skill name [will be used to read/write data files]
-//      SkillId     0-[max skill]
-//      Script      Script to run when skill is clicked in skills window
-//      Delay       Number of seconds skills cannot be used after this one
-//      Unhides     Using this skill unhides user if hidden (default: 1)
-//      StrAdv      Strength advancement definition
-//      IntAdv      Intelligence advancement definition
-//      DexAdv      Dexterity advancement definition
-//
-//  Format of StrAdv, IntAdv, DexAdv:
-//      StrAdv [chance] [points]
-//      StrAdv 10 1d4
-//      StrAdv 50 1
-//      StrAdv 2.5 1d3+2
-//
-//      chance is a floating point percentage, from 0.0 to 100.0
-//
-/////////////////////////////////////////////////////////////////////////////
-
-Skill 0
-{
-    Name           Alchemy
-    SkillId        0
-    IntAdv         100 1d4+20
-    DexAdv         100 1d1+20
-    default_points 100
-    title          Alchemist
-    DropStat       str
-}
-
-# Anatomy (#1) moved to package
-
-# Animal Lore (#2) moved to package
-
-
-# ItemId (#3) moved to package
-
-# ArmsLore (#4) moved to package
-
-Skill 5
-{
-    Name    Parry
-    SkillId 5
-    StrAdv  100 1d2+20
-    default_points 100
-    title   Shieldsfighter
-    DropStat       dex int
-}
-
-# Begging (#6) moved to package
-
-# Blacksmithy (#7) moved to package
-
-# Bowcrafting (#8) moved to package
-
-# Peacemaking (#9) moved to package
-
-Skill 10
-{
-    Name    Camping
-    SkillId 10
-    Delay   10
-    StrAdv  100 1d2+10
-    IntAdv  100 1d2+10
-    default_points 100
-    title   Ranger
-    Unhides 1
-    DropStat       dex
-}
-
-# Cartography (#12) moved to package
-
-Skill 13
-{
-    Name    Cooking
-    SkillId 13
-    Delay   15
-    IntAdv  100 1d2+10
-    default_points 100
-    title   Chef
-    Unhides 1
-    DropStat       str dex
-}
-
-# DetectingHidden (#14) moved to package
-
-# Enticement (#15) moved to package
-
-# EvaluatingIntelligence (#16) moved to package
-
-Skill 17
-{
-    Name    Healing
-    SkillId 17
-    Delay   10
-    DexAdv  100 1d1+10
-    default_points 100
-    title   Healer
-    Unhides 1
-    DropStat       str int
-}
-
-# Fishing (#19) moved to package
-
-
-
-Skill 20
-{
-    Name    Herding
-    SkillId 20
-    StrAdv  100 1d4+20
-    default_points 100
-    title   Shepherd
-    Unhides 1
-    DropStat       dex int
-}
-
-# Hiding (#21) moved to package
-
-# Provocation (# 22) moved to package
-
-# Inscription (#23) moved to package
-
-Skill 24
-{
-    Name    Lockpicking
-    SkillId 24
-    Delay   15
-    DexAdv  100 1d3+10
-    default_points 100
-    title   Rogue
-    Unhides 0
-    DropStat       str int
-}
-
-# Magery (#25) moved to package
-
-Skill 26
-{
-    Name    MagicResistance
-    SkillId 26
-    default_points 100
-    title   Mage
-    Unhides 1
-    DropStat       dex
-}
-
-Skill 27
-{
-    Name    Tactics
-    SkillId 27
-    default_points 40
-    title   Warrior
-    DropStat       dex
-}
-
-# Snooping (#28) moved to package
-
-Skill 29
-{
-    Name    Musicianship
-    SkillId 29
-    Delay   15
-    IntAdv  100 1d2+10
-    DexAdv  100 1d4+20
-    default_points 100
-    title   Bard
-    Unhides 1
-    DropStat       str
-}
-
-# Poisoning (#30) moved to package
-Skill 31
-{
-    Name    Archery
-    SkillId 31
-    DexAdv  100 1d4+20
-    StrAdv  100 1d2+10
-    title   Archer
-    Unhides 1
-    DropStat       int
-}
-
-# SpiritSpeak (#32) moved to package
-
-Skill 34
-{
-    Name    Tailoring
-    SkillId 34
-    Delay   15
-    DexAdv  100 1d1+10
-    default_points 100
-    title   Tailor
-    Unhides 1
-    DropStat       str int
-}
-
-
-# AnimalTaming (#35) moved to package
-
-# TasteIdentification (#36) moved to package
-
-
-# Tracking (#38) moved to package
-
-Skill 39
-{
-    Name    Veterinary
-    SkillId 39
-    Delay   10
-    IntAdv  100 1d2+10
-    default_points 100
-    title   Healer
-    Unhides 1
-    DropStat       str dex
-}
-
-Skill 40
-{
-    Name    Swordsmanship
-    SkillId 40
-    StrAdv  100 1d3+20
-    DexAdv  100 1d3
-    title   Swordsman
-    Unhides 1
-    DropStat       int
-}
-
-Skill 41
-{
-    Name    Macefighting
-    SkillId 41
-    StrAdv  100 1d4+30
-    DexAdv  100 1d2
-    title   Armsman
-    Unhides 1
-    DropStat       int
-}
-
-Skill 42
-{
-    Name    Fencing
-    SkillId 42
-    StrAdv  100 1d2+10
-    DexAdv  100 1d3+10
-    title   Fencer
-    Unhides 1
-    DropStat       int
-}
-
-
-Skill 43
-{
-    Name    Wrestling
-    SkillId 43
-    StrAdv  100 1d2+20
-    DexAdv  100 1d4
-    title   Wrestler
-    Unhides 1
-    DropStat       int
-}
-
-
-Skill 44
-{
-    Name    Lumberjacking
-    SkillId 44
-    Delay   10
-    StrAdv  100 1d4+20
-    default_points 100
-    title   Lumberjack
-    Unhides 1
-    DropStat       dex int
-}
-
-
-Skill 45
-{
-    Name    Mining
-    SkillId 45
-    Delay   10
-    StrAdv  100 1d4+20
-    default_points 100
-    title   Miner
-    Unhides 1
-    DropStat       dex int
-}
-
-# Meditation (#46) moved to package
-
-
-# Stealth (#47) moved to package
-
-
-# RemoveTrap (#48) moved to package
-
+//////////////////////
\ No newline at end of file



From austin at berlios.de  Tue Sep 20 22:23:06 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 22:23:06 +0200
Subject: [Poldistro-svn] r188 - in trunk/096/pkg: expansions/aos/skills/chivalry expansions/aos/skills/focus expansions/aos/skills/necromancy skills/anatomy skills/animallore skills/armslore skills/begging skills/blacksmithy skills/bowcraft skills/carpentry skills/cartography skills/detecthidden skills/evalint skills/fishing skills/forensicevaluation skills/hiding skills/inscription skills/itemid skills/magery skills/meditation skills/musicianship skills/poisoning skills/removetrap skills/spiritspeak skills/stealing skills/stealth skills/taming skills/tasteid skills/tinkering skills/tracking systems/attributes
Message-ID: <200509202023.j8KKN6sG005089@sheep.berlios.de>

Author: austin
Date: 2005-09-20 22:23:06 +0200 (Tue, 20 Sep 2005)
New Revision: 188

Removed:
   trunk/096/pkg/expansions/aos/skills/chivalry/skills.cfg
   trunk/096/pkg/expansions/aos/skills/focus/skills.cfg
   trunk/096/pkg/expansions/aos/skills/necromancy/skills.cfg
   trunk/096/pkg/skills/anatomy/skills.cfg
   trunk/096/pkg/skills/animallore/skills.cfg
   trunk/096/pkg/skills/armslore/skills.cfg
   trunk/096/pkg/skills/begging/skills.cfg
   trunk/096/pkg/skills/blacksmithy/skills.cfg
   trunk/096/pkg/skills/bowcraft/skills.cfg
   trunk/096/pkg/skills/carpentry/skills.cfg
   trunk/096/pkg/skills/cartography/skills.cfg
   trunk/096/pkg/skills/detecthidden/skills.cfg
   trunk/096/pkg/skills/evalint/skills.cfg
   trunk/096/pkg/skills/fishing/skills.cfg
   trunk/096/pkg/skills/forensicevaluation/skills.cfg
   trunk/096/pkg/skills/hiding/skills.cfg
   trunk/096/pkg/skills/inscription/skills.cfg
   trunk/096/pkg/skills/itemid/skills.cfg
   trunk/096/pkg/skills/magery/skills.cfg
   trunk/096/pkg/skills/meditation/skills.cfg
   trunk/096/pkg/skills/musicianship/skills.cfg
   trunk/096/pkg/skills/poisoning/skills.cfg
   trunk/096/pkg/skills/removetrap/skills.cfg
   trunk/096/pkg/skills/spiritspeak/skills.cfg
   trunk/096/pkg/skills/stealing/skills.cfg
   trunk/096/pkg/skills/stealth/skills.cfg
   trunk/096/pkg/skills/taming/skills.cfg
   trunk/096/pkg/skills/tasteid/skills.cfg
   trunk/096/pkg/skills/tinkering/skills.cfg
   trunk/096/pkg/skills/tracking/skills.cfg
Modified:
   trunk/096/pkg/systems/attributes/skills.cfg
Log:
All skills.cfg merged into the one in the attributes package.

Deleted: trunk/096/pkg/expansions/aos/skills/chivalry/skills.cfg
===================================================================
--- trunk/096/pkg/expansions/aos/skills/chivalry/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/expansions/aos/skills/chivalry/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,10 +0,0 @@
-Skill 51
-{
-    Name    Chivalry
-    SkillId 51
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Paladin
-    Unhides 1
-    DropStat       str dex
-}
\ No newline at end of file

Deleted: trunk/096/pkg/expansions/aos/skills/focus/skills.cfg
===================================================================
--- trunk/096/pkg/expansions/aos/skills/focus/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/expansions/aos/skills/focus/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,10 +0,0 @@
-Skill 50
-{
-    Name    Focus
-    SkillId 50
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Monk
-    Unhides 1
-    DropStat       str dex
-}
\ No newline at end of file

Deleted: trunk/096/pkg/expansions/aos/skills/necromancy/skills.cfg
===================================================================
--- trunk/096/pkg/expansions/aos/skills/necromancy/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/expansions/aos/skills/necromancy/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,10 +0,0 @@
-Skill 49
-{
-    Name    Necromancy
-    SkillId 49
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Necromancer
-    Unhides 1
-    DropStat       str dex
-}
\ No newline at end of file

Deleted: trunk/096/pkg/skills/anatomy/skills.cfg
===================================================================
--- trunk/096/pkg/skills/anatomy/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/anatomy/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,13 +0,0 @@
-Skill 1
-{
-    Name    Anatomy
-    SkillId 1
-    Script  anatomy
-    Delay 10
-    IntAdv  100 1d2+10
-    default_points 50
-    title   Healer
-    DropStat       str dex
-}
-
-

Deleted: trunk/096/pkg/skills/animallore/skills.cfg
===================================================================
--- trunk/096/pkg/skills/animallore/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/animallore/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,11 +0,0 @@
-Skill 2
-{
-    Name    AnimalLore
-    SkillId 2
-    Script animalLore
-    Delay   10
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Ranger
-    DropStat       str dex
-}
\ No newline at end of file

Deleted: trunk/096/pkg/skills/armslore/skills.cfg
===================================================================
--- trunk/096/pkg/skills/armslore/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/armslore/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,13 +0,0 @@
-Skill 4
-{
-    Name    ArmsLore
-    SkillId 4
-    Script  armsLore
-    Delay   10
-    IntAdv  100 1d1+10
-    StrAdv  100 1d2+10
-    default_points 50
-    title   Warrior
-    DropStat       dex
-}
-

Deleted: trunk/096/pkg/skills/begging/skills.cfg
===================================================================
--- trunk/096/pkg/skills/begging/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/begging/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,13 +0,0 @@
-Skill 6
-{
-	Name			Begging
-	SkillId			6
-	Delay			10
-	IntAdv			100 1d1+20
-	default_points	100
-	title			Beggar
-	Unhides			1
-	DropStat		str dex
-	Script			begging
-}
-

Deleted: trunk/096/pkg/skills/blacksmithy/skills.cfg
===================================================================
--- trunk/096/pkg/skills/blacksmithy/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/blacksmithy/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,10 +0,0 @@
-Skill 7
-{
-    Name    Blacksmithy
-    SkillId 7
-    Delay   10
-    StrAdv  100 1d4+20
-    default_points 100
-    title   Smith
-    DropStat       dex int
-}

Deleted: trunk/096/pkg/skills/bowcraft/skills.cfg
===================================================================
--- trunk/096/pkg/skills/bowcraft/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/bowcraft/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,12 +0,0 @@
-Skill 8
-{
-    Name    Bowcraft
-    SkillId 8
-    Delay   15
-    StrAdv  100 1d4+20
-    DexAdv  100 1d3+20
-    default_points 100
-    title   Bowyer
-    Unhides 1
-    DropStat       int
-}

Deleted: trunk/096/pkg/skills/carpentry/skills.cfg
===================================================================
--- trunk/096/pkg/skills/carpentry/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/carpentry/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,11 +0,0 @@
-
-Skill 11
-{
-    Name    Carpentry
-    SkillId 11
-    Delay   10
-    StrAdv  100 1d4+25
-    default_points 100
-    title   Carpenter
-    DropStat       dex int
-}

Deleted: trunk/096/pkg/skills/cartography/skills.cfg
===================================================================
--- trunk/096/pkg/skills/cartography/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/cartography/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,11 +0,0 @@
-Skill 12
-{
-    Name    Cartography
-    SkillId 12
-    Script  cartography
-    Delay   15
-    IntAdv  100 1d2+10
-    default_points 100
-    title   Cartographer
-    DropStat       str dex
-}
\ No newline at end of file

Deleted: trunk/096/pkg/skills/detecthidden/skills.cfg
===================================================================
--- trunk/096/pkg/skills/detecthidden/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/detecthidden/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,11 +0,0 @@
-Skill 14
-{
-    Name    DetectingHidden
-    SkillId 14
-    Script  detectHidden
-    Delay   10
-    IntAdv  100 1d4+20
-    default_points 50
-    title   Scout
-    DropStat       str dex
-}

Deleted: trunk/096/pkg/skills/evalint/skills.cfg
===================================================================
--- trunk/096/pkg/skills/evalint/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/evalint/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,11 +0,0 @@
-Skill 16
-{
-    Name    EvaluatingIntelligence
-    SkillId 16
-    Script  evalInt
-    Delay   10
-    IntAdv  100 1d4+20
-    default_points 50
-    title   Scholar
-    DropStat       str dex
-}

Deleted: trunk/096/pkg/skills/fishing/skills.cfg
===================================================================
--- trunk/096/pkg/skills/fishing/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/fishing/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,11 +0,0 @@
-Skill 18
-{
-    Name    Fishing
-    SkillId 18
-    Delay   5
-    DexAdv  100 1d4+20
-    StrAdv  100 1d4+20
-    default_points 100
-    title   Fisherman
-    DropStat       int
-}

Deleted: trunk/096/pkg/skills/forensicevaluation/skills.cfg
===================================================================
--- trunk/096/pkg/skills/forensicevaluation/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/forensicevaluation/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,11 +0,0 @@
-Skill 19
-{
-    Name    ForensicEvaluation
-    SkillId 19
-    Delay   15
-    IntAdv  100 1d4+20
-    default_points 100
-    script forensic
-    title   Detective
-    DropStat       str dex
-}
\ No newline at end of file

Deleted: trunk/096/pkg/skills/hiding/skills.cfg
===================================================================
--- trunk/096/pkg/skills/hiding/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/hiding/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,12 +0,0 @@
-Skill 21
-{
-    Name    Hiding
-    SkillId 21
-    Script  hiding
-    Delay   10
-    DexAdv  100 1d4+20
-    default_points 50
-    title   Rogue
-    DropStat       str int
-}
-

Deleted: trunk/096/pkg/skills/inscription/skills.cfg
===================================================================
--- trunk/096/pkg/skills/inscription/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/inscription/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,11 +0,0 @@
-Skill 23
-{
-    Name    Inscription
-    SkillId 23
-    Script  inscription
-    Delay   0
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Scribe
-    DropStat       str dex
-}

Deleted: trunk/096/pkg/skills/itemid/skills.cfg
===================================================================
--- trunk/096/pkg/skills/itemid/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/itemid/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,11 +0,0 @@
-Skill 3
-{
-    Name    ItemId
-    SkillId 3
-    Script  itemID
-    Delay   10
-    IntAdv  100 1d3+15
-    default_points 50
-    title   Merchant
-    DropStat       str dex
-}

Deleted: trunk/096/pkg/skills/magery/skills.cfg
===================================================================
--- trunk/096/pkg/skills/magery/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/magery/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,11 +0,0 @@
-
-Skill 25
-{
-    Name    Magery
-    SkillId 25
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Mage
-    Unhides 1
-    DropStat       str dex
-}

Deleted: trunk/096/pkg/skills/meditation/skills.cfg
===================================================================
--- trunk/096/pkg/skills/meditation/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/meditation/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,11 +0,0 @@
-Skill 46
-{
-    Name    Meditation
-    SkillId 46
-    Delay   10
-    Script  meditation
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Stoic
-    DropStat       str dex
-}
\ No newline at end of file

Deleted: trunk/096/pkg/skills/musicianship/skills.cfg
===================================================================
--- trunk/096/pkg/skills/musicianship/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/musicianship/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,33 +0,0 @@
-Skill 9
-{
-    Name    Peacemaking
-    SkillId 9
-    Script  peacemaking
-    IntAdv  100 1d2
-    default_points 50
-    title   Bard
-    Delay   10
-    DropStat       str
-}
-
-Skill 15
-{
-    Name    Enticement
-    SkillId 15
-    Script  entice
-    Delay   10
-    IntAdv  20 2d4
-    default_points 100
-    DropStat       str
-}
-
-Skill 22
-{
-    Name    Provocation
-    SkillId 22
-    default_points 100
-    dexadv 100 1d2
-    script provocation
-    title   Bard
-    DropStat       str int
-}
\ No newline at end of file

Deleted: trunk/096/pkg/skills/poisoning/skills.cfg
===================================================================
--- trunk/096/pkg/skills/poisoning/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/poisoning/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,12 +0,0 @@
-Skill 30
-{
-	Name    Poisoning
-	SkillId 30
-	Script  poisonSkill
-	Delay   10
-	IntAdv  100 1d2+10
-	DexAdv  100 1d4+20
-	default_points 50
-	title   Assassin
-	DropStat       str
-}

Deleted: trunk/096/pkg/skills/removetrap/skills.cfg
===================================================================
--- trunk/096/pkg/skills/removetrap/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/removetrap/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,12 +0,0 @@
-Skill 48
-{
-    Name    RemoveTrap
-    SkillId 48
-    Delay   10
-    Script  removeTrap
-    DexAdv  100 1d4+20
-    default_points 50
-    title   Rogue
-    DropStat       str int
-}
-

Deleted: trunk/096/pkg/skills/spiritspeak/skills.cfg
===================================================================
--- trunk/096/pkg/skills/spiritspeak/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/spiritspeak/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,11 +0,0 @@
-Skill 32
-{
-    Name    SpiritSpeak
-    SkillId 32
-    Script  spiritSpeak
-    Delay   10
-    IntAdv  100 1d4+20
-    default_points 50
-    title   Medium
-    DropStat       str dex
-}

Deleted: trunk/096/pkg/skills/stealing/skills.cfg
===================================================================
--- trunk/096/pkg/skills/stealing/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/stealing/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,21 +0,0 @@
-Skill 33
-{
-    Name    Stealing
-    SkillId 33
-    Delay   15
-    Unhides 0
-    DexAdv  90 3d4+9
-    default_points 200
-    DropStat       str int
-}
-
-Skill 28
-{
-    Name    Snooping
-    SkillId 28
-    Delay 5
-    Unhides 0
-    DexAdv  80 4d6+10
-    default_points 200
-    DropStat       str int
-}

Deleted: trunk/096/pkg/skills/stealth/skills.cfg
===================================================================
--- trunk/096/pkg/skills/stealth/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/stealth/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,12 +0,0 @@
-Skill 47
-{
-    Name    Stealth
-    SkillId 47
-    Delay   10
-    Unhides 0
-    script  stealth
-    DexAdv  100 1d4+20
-    default_points 50
-    title   Rogue
-    DropStat       str int
-}

Deleted: trunk/096/pkg/skills/taming/skills.cfg
===================================================================
--- trunk/096/pkg/skills/taming/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/taming/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,12 +0,0 @@
-Skill 35
-{
-    Name    AnimalTaming
-    SkillId 35
-    Script  taming
-    Delay   10
-    StrAdv  100 1d4+20
-    IntAdv  100 1d3+10
-    default_points 50
-    title   Tamer
-    DropStat       dex
-}

Deleted: trunk/096/pkg/skills/tasteid/skills.cfg
===================================================================
--- trunk/096/pkg/skills/tasteid/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/tasteid/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,12 +0,0 @@
-Skill 36
-{
-	Name			TasteIdentification
-	SkillId			36
-	Script			tasteID
-	Delay			10
-	IntAdv			100 1d4+20
-	default_points	50
-	title			Chef
-	DropStat		str dex
-}
-

Deleted: trunk/096/pkg/skills/tinkering/skills.cfg
===================================================================
--- trunk/096/pkg/skills/tinkering/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/tinkering/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,12 +0,0 @@
-
-Skill 37
-{
-    Name    Tinkering
-    SkillId 37
-    Delay   10
-    StrAdv  100 1d4+20
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Tinker
-    DropStat       dex
-}

Deleted: trunk/096/pkg/skills/tracking/skills.cfg
===================================================================
--- trunk/096/pkg/skills/tracking/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/skills/tracking/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -1,11 +0,0 @@
-Skill 38
-{
-    Name    Tracking
-    SkillId 38
-    Script tracking
-    Delay   10
-    IntAdv  100 1d4+20
-    DexAdv  100 1d2+10
-    default_points 50
-    DropStat       str
-}

Modified: trunk/096/pkg/systems/attributes/skills.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/skills.cfg	2005-09-20 20:14:31 UTC (rev 187)
+++ trunk/096/pkg/systems/attributes/skills.cfg	2005-09-20 20:23:06 UTC (rev 188)
@@ -0,0 +1,637 @@
+ /////////////////////////////////////////////////////////////////////////////
+//
+//  SKILLS.CFG:     Skill Definitions
+//
+//  USED BY:        System
+//
+//  TODO:           tune delays, define stat advancement data for all skills
+//
+//  The following can be defined for a Skill:
+//
+//      Name        Skill name [will be used to read/write data files]
+//      SkillId     0-[max skill]
+//      Script      Script to run when skill is clicked in skills window
+//      Delay       Number of seconds skills cannot be used after this one
+//      Unhides     Using this skill unhides user if hidden (default: 1)
+//      StrAdv      Strength advancement definition
+//      IntAdv      Intelligence advancement definition
+//      DexAdv      Dexterity advancement definition
+//
+//  Format of StrAdv, IntAdv, DexAdv:
+//      StrAdv [chance] [points]
+//      StrAdv 10 1d4
+//      StrAdv 50 1
+//      StrAdv 2.5 1d3+2
+//
+//      chance is a floating point percentage, from 0.0 to 100.0
+//
+/////////////////////////////////////////////////////////////////////////////
+
+Skill 0
+{
+    Name           Alchemy
+    SkillId        0
+    IntAdv         100 1d4+20
+    DexAdv         100 1d1+20
+    default_points 100
+    title          Alchemist
+    DropStat       str
+}
+
+Skill 1
+{
+    Name    Anatomy
+    SkillId 1
+    Script  anatomy
+    Delay 10
+    IntAdv  100 1d2+10
+    default_points 50
+    title   Healer
+    DropStat       str dex
+}
+
+Skill 2
+{
+    Name    AnimalLore
+    SkillId 2
+    Script animalLore
+    Delay   10
+    IntAdv  100 1d4+20
+    default_points 100
+    title   Ranger
+    DropStat       str dex
+}
+
+Skill 3
+{
+    Name    ItemId
+    SkillId 3
+    Script  itemID
+    Delay   10
+    IntAdv  100 1d3+15
+    default_points 50
+    title   Merchant
+    DropStat       str dex
+}
+
+Skill 4
+{
+    Name    ArmsLore
+    SkillId 4
+    Script  armsLore
+    Delay   10
+    IntAdv  100 1d1+10
+    StrAdv  100 1d2+10
+    default_points 50
+    title   Warrior
+    DropStat       dex
+}
+
+Skill 5
+{
+    Name    Parry
+    SkillId 5
+    StrAdv  100 1d2+20
+    default_points 100
+    title   Shieldsfighter
+    DropStat       dex int
+}
+
+Skill 6
+{
+	Name			Begging
+	SkillId			6
+	Delay			10
+	IntAdv			100 1d1+20
+	default_points	100
+	title			Beggar
+	Unhides			1
+	DropStat		str dex
+	Script			begging
+}
+
+Skill 7
+{
+    Name    Blacksmithy
+    SkillId 7
+    Delay   10
+    StrAdv  100 1d4+20
+    default_points 100
+    title   Smith
+    DropStat       dex int
+}
+
+Skill 8
+{
+    Name    Bowcraft
+    SkillId 8
+    Delay   15
+    StrAdv  100 1d4+20
+    DexAdv  100 1d3+20
+    default_points 100
+    title   Bowyer
+    Unhides 1
+    DropStat       int
+}
+
+Skill 9
+{
+    Name    Peacemaking
+    SkillId 9
+    Script  peacemaking
+    IntAdv  100 1d2
+    default_points 50
+    title   Bard
+    Delay   10
+    DropStat       str
+}
+
+Skill 10
+{
+    Name    Camping
+    SkillId 10
+    Delay   10
+    StrAdv  100 1d2+10
+    IntAdv  100 1d2+10
+    default_points 100
+    title   Ranger
+    Unhides 1
+    DropStat       dex
+}
+
+Skill 11
+{
+    Name    Carpentry
+    SkillId 11
+    Delay   10
+    StrAdv  100 1d4+25
+    default_points 100
+    title   Carpenter
+    DropStat       dex int
+}
+
+Skill 12
+{
+    Name    Cartography
+    SkillId 12
+    Script  cartography
+    Delay   15
+    IntAdv  100 1d2+10
+    default_points 100
+    title   Cartographer
+    DropStat       str dex
+}
+
+Skill 13
+{
+    Name    Cooking
+    SkillId 13
+    Delay   15
+    IntAdv  100 1d2+10
+    default_points 100
+    title   Chef
+    Unhides 1
+    DropStat       str dex
+}
+
+Skill 14
+{
+    Name    DetectingHidden
+    SkillId 14
+    Script  detectHidden
+    Delay   10
+    IntAdv  100 1d4+20
+    default_points 50
+    title   Scout
+    DropStat       str dex
+}
+
+Skill 15
+{
+    Name    Enticement
+    SkillId 15
+    Script  entice
+    Delay   10
+    IntAdv  20 2d4
+    default_points 100
+    DropStat       str
+}
+
+Skill 16
+{
+    Name    EvaluatingIntelligence
+    SkillId 16
+    Script  evalInt
+    Delay   10
+    IntAdv  100 1d4+20
+    default_points 50
+    title   Scholar
+    DropStat       str dex
+}
+
+
+Skill 17
+{
+    Name    Healing
+    SkillId 17
+    Delay   10
+    DexAdv  100 1d1+10
+    default_points 100
+    title   Healer
+    Unhides 1
+    DropStat       str int
+}
+
+Skill 18
+{
+    Name    Fishing
+    SkillId 18
+    Delay   5
+    DexAdv  100 1d4+20
+    StrAdv  100 1d4+20
+    default_points 100
+    title   Fisherman
+    DropStat       int
+}
+
+Skill 19
+{
+    Name    ForensicEvaluation
+    SkillId 19
+    Delay   15
+    IntAdv  100 1d4+20
+    default_points 100
+    script forensic
+    title   Detective
+    DropStat       str dex
+}
+
+Skill 20
+{
+    Name    Herding
+    SkillId 20
+    StrAdv  100 1d4+20
+    default_points 100
+    title   Shepherd
+    Unhides 1
+    DropStat       dex int
+}
+
+Skill 21
+{
+    Name    Hiding
+    SkillId 21
+    Script  hiding
+    Delay   10
+    DexAdv  100 1d4+20
+    default_points 50
+    title   Rogue
+    DropStat       str int
+}
+
+Skill 22
+{
+    Name    Provocation
+    SkillId 22
+    default_points 100
+    dexadv 100 1d2
+    script provocation
+    title   Bard
+    DropStat       str int
+}
+
+Skill 23
+{
+    Name    Inscription
+    SkillId 23
+    Script  inscription
+    Delay   0
+    IntAdv  100 1d4+20
+    default_points 100
+    title   Scribe
+    DropStat       str dex
+}
+
+Skill 24
+{
+    Name    Lockpicking
+    SkillId 24
+    Delay   15
+    DexAdv  100 1d3+10
+    default_points 100
+    title   Rogue
+    Unhides 0
+    DropStat       str int
+}
+
+Skill 25
+{
+    Name    Magery
+    SkillId 25
+    IntAdv  100 1d4+20
+    default_points 100
+    title   Mage
+    Unhides 1
+    DropStat       str dex
+}
+
+Skill 26
+{
+    Name    MagicResistance
+    SkillId 26
+    default_points 100
+    title   Mage
+    Unhides 1
+    DropStat       dex
+}
+
+Skill 27
+{
+    Name    Tactics
+    SkillId 27
+    default_points 40
+    title   Warrior
+    DropStat       dex
+}
+
+Skill 28
+{
+    Name    Snooping
+    SkillId 28
+    Delay 5
+    Unhides 0
+    DexAdv  80 4d6+10
+    default_points 200
+    DropStat       str int
+}
+
+Skill 29
+{
+    Name    Musicianship
+    SkillId 29
+    Delay   15
+    IntAdv  100 1d2+10
+    DexAdv  100 1d4+20
+    default_points 100
+    title   Bard
+    Unhides 1
+    DropStat       str
+}
+
+Skill 30
+{
+	Name    Poisoning
+	SkillId 30
+	Script  poisonSkill
+	Delay   10
+	IntAdv  100 1d2+10
+	DexAdv  100 1d4+20
+	default_points 50
+	title   Assassin
+	DropStat       str
+}
+
+Skill 31
+{
+    Name    Archery
+    SkillId 31
+    DexAdv  100 1d4+20
+    StrAdv  100 1d2+10
+    title   Archer
+    Unhides 1
+    DropStat       int
+}
+
+Skill 32
+{
+    Name    SpiritSpeak
+    SkillId 32
+    Script  spiritSpeak
+    Delay   10
+    IntAdv  100 1d4+20
+    default_points 50
+    title   Medium
+    DropStat       str dex
+}
+
+Skill 33
+{
+    Name    Stealing
+    SkillId 33
+    Delay   15
+    Unhides 0
+    DexAdv  90 3d4+9
+    default_points 200
+    DropStat       str int
+}
+
+Skill 34
+{
+    Name    Tailoring
+    SkillId 34
+    Delay   15
+    DexAdv  100 1d1+10
+    default_points 100
+    title   Tailor
+    Unhides 1
+    DropStat       str int
+}
+
+Skill 35
+{
+    Name    AnimalTaming
+    SkillId 35
+    Script  taming
+    Delay   10
+    StrAdv  100 1d4+20
+    IntAdv  100 1d3+10
+    default_points 50
+    title   Tamer
+    DropStat       dex
+}
+
+Skill 36
+{
+	Name			TasteIdentification
+	SkillId			36
+	Script			tasteID
+	Delay			10
+	IntAdv			100 1d4+20
+	default_points	50
+	title			Chef
+	DropStat		str dex
+}
+
+Skill 37
+{
+    Name    Tinkering
+    SkillId 37
+    Delay   10
+    StrAdv  100 1d4+20
+    IntAdv  100 1d4+20
+    default_points 100
+    title   Tinker
+    DropStat       dex
+}
+
+Skill 38
+{
+    Name    Tracking
+    SkillId 38
+    Script tracking
+    Delay   10
+    IntAdv  100 1d4+20
+    DexAdv  100 1d2+10
+    default_points 50
+    DropStat       str
+}
+
+Skill 39
+{
+    Name    Veterinary
+    SkillId 39
+    Delay   10
+    IntAdv  100 1d2+10
+    default_points 100
+    title   Healer
+    Unhides 1
+    DropStat       str dex
+}
+
+Skill 40
+{
+    Name    Swordsmanship
+    SkillId 40
+    StrAdv  100 1d3+20
+    DexAdv  100 1d3
+    title   Swordsman
+    Unhides 1
+    DropStat       int
+}
+
+Skill 41
+{
+    Name    Macefighting
+    SkillId 41
+    StrAdv  100 1d4+30
+    DexAdv  100 1d2
+    title   Armsman
+    Unhides 1
+    DropStat       int
+}
+
+Skill 42
+{
+    Name    Fencing
+    SkillId 42
+    StrAdv  100 1d2+10
+    DexAdv  100 1d3+10
+    title   Fencer
+    Unhides 1
+    DropStat       int
+}
+
+Skill 43
+{
+    Name    Wrestling
+    SkillId 43
+    StrAdv  100 1d2+20
+    DexAdv  100 1d4
+    title   Wrestler
+    Unhides 1
+    DropStat       int
+}
+
+Skill 44
+{
+    Name    Lumberjacking
+    SkillId 44
+    Delay   10
+    StrAdv  100 1d4+20
+    default_points 100
+    title   Lumberjack
+    Unhides 1
+    DropStat       dex int
+}
+
+Skill 45
+{
+    Name    Mining
+    SkillId 45
+    Delay   10
+    StrAdv  100 1d4+20
+    default_points 100
+    title   Miner
+    Unhides 1
+    DropStat       dex int
+}
+
+Skill 46
+{
+    Name    Meditation
+    SkillId 46
+    Delay   10
+    Script  meditation
+    IntAdv  100 1d4+20
+    default_points 100
+    title   Stoic
+    DropStat       str dex
+}
+
+Skill 47
+{
+    Name    Stealth
+    SkillId 47
+    Delay   10
+    Unhides 0
+    script  stealth
+    DexAdv  100 1d4+20
+    default_points 50
+    title   Rogue
+    DropStat       str int
+}
+
+Skill 48
+{
+    Name    RemoveTrap
+    SkillId 48
+    Delay   10
+    Script  removeTrap
+    DexAdv  100 1d4+20
+    default_points 50
+    title   Rogue
+    DropStat       str int
+}
+
+Skill 49
+{
+    Name    Necromancy
+    SkillId 49
+    IntAdv  100 1d4+20
+    default_points 100
+    title   Necromancer
+    Unhides 1
+    DropStat       str dex
+}
+
+Skill 50
+{
+    Name    Focus
+    SkillId 50
+    IntAdv  100 1d4+20
+    default_points 100
+    title   Monk
+    Unhides 1
+    DropStat       str dex
+}
+
+Skill 51
+{
+    Name    Chivalry
+    SkillId 51
+    IntAdv  100 1d4+20
+    default_points 100
+    title   Paladin
+    Unhides 1
+    DropStat       str dex
+}
\ No newline at end of file



From austin at berlios.de  Tue Sep 20 22:27:59 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 22:27:59 +0200
Subject: [Poldistro-svn] r189 - trunk/096/pkg/systems/attributes
Message-ID: <200509202027.j8KKRxkJ005736@sheep.berlios.de>

Author: austin
Date: 2005-09-20 22:27:58 +0200 (Tue, 20 Sep 2005)
New Revision: 189

Removed:
   trunk/096/pkg/systems/attributes/regenRate.src
Log:
Moved to /hooks/

Deleted: trunk/096/pkg/systems/attributes/regenRate.src
===================================================================
--- trunk/096/pkg/systems/attributes/regenRate.src	2005-09-20 20:23:06 UTC (rev 188)
+++ trunk/096/pkg/systems/attributes/regenRate.src	2005-09-20 20:27:58 UTC (rev 189)
@@ -1,55 +0,0 @@
-/* $Id: regenRate.src,v 1.1 2004/03/16 14:05:46 folko Exp $
- *
- * Purpose
- * This functions return the regen rate and the maximum value of a stat.
- * RegenRateFunction should return value from -30000 to 30000.
- * Regen rates are in 'hundredths of points per minute.'
- * A current regen rate of 100 (1 point per 5 seconds) would therefore be 1200 (12 points per minute).
- * MaximumFunction should return the maximum value for this vital, an integer in 'hundreths'
- * between 100 and 10000000 (1-100,000)
- *
- * These functions are called during loading and when RecalcVitals() is called.
- *
- */
-use uo;
-
-include ":config:include/config";
-include ":attributes:include/attributes";
-
-
-program Regen()
-	return(1);
-endprogram
-
-
-exported function GetHitsRegenRate(who)
-	who := 0;
-	return(GetDefaultRegenRate(REGEN_HITS) * 100);
-endfunction
-
-
-exported function GetHitsMaximumValue(who)
-	return(GetAttribute(who, ATTRIBUTE_STRENGTH) * 100);
-endfunction
-
-
-exported function GetStaminaRegenRate(who)
-	who := 0;
-	return(GetDefaultRegenRate(REGEN_STAM) * 100);
-endfunction
-
-
-exported function GetStaminaMaximumValue(who)
-    return(GetAttribute(who, ATTRIBUTE_DEXTERITY) * 100);
-endfunction
-
-
-exported function GetManaRegenRate(who)
-	who := 0;
-	return(GetDefaultRegenRate(REGEN_MANA) * 100);
-endfunction
-
-
-exported function GetManaMaximumValue(who)
-	return(GetAttribute(who, ATTRIBUTE_INTELLIGENCE) * 100);
-endfunction



From austin at berlios.de  Tue Sep 20 22:30:34 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 22:30:34 +0200
Subject: [Poldistro-svn] r190 - in trunk/096/pkg/systems/attributes: . hooks
Message-ID: <200509202030.j8KKUYZk006024@sheep.berlios.de>

Author: austin
Date: 2005-09-20 22:30:33 +0200 (Tue, 20 Sep 2005)
New Revision: 190

Modified:
   trunk/096/pkg/systems/attributes/hooks/regenRate.src
   trunk/096/pkg/systems/attributes/pkg.cfg
Log:
Enables the package.

Modified: trunk/096/pkg/systems/attributes/hooks/regenRate.src
===================================================================
--- trunk/096/pkg/systems/attributes/hooks/regenRate.src	2005-09-20 20:27:58 UTC (rev 189)
+++ trunk/096/pkg/systems/attributes/hooks/regenRate.src	2005-09-20 20:30:33 UTC (rev 190)
@@ -11,6 +11,7 @@
 
 include ":attributes:include/attributes";
 include ":ai_brain:include/npcUtil";
+include ":config:include/config";
 
 program Install()
 	print("INSTALLED: Exported Vital - RegenRate and MaxValue functions... ok.");

Modified: trunk/096/pkg/systems/attributes/pkg.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/pkg.cfg	2005-09-20 20:27:58 UTC (rev 189)
+++ trunk/096/pkg/systems/attributes/pkg.cfg	2005-09-20 20:30:33 UTC (rev 190)
@@ -1,11 +1,13 @@
 Enabled		1
-Name		attributes
+Name		control
 
-Creator		Hesinde-Team
-Email		folko at elitecoder.net
+Version		1.0
 
-Maintainer	POL Distro Team
-Email		distro at polserver.com
+CoreRequired	96
 
-CoreRequired	96
-Version		1.0
+Creator		Austin Heilman
+Email		Austin at tsse.net
+Maintainer	Distro Team
+Email		pol-distro-support at sourceforge.net
+
+#Conflicts none
\ No newline at end of file



From austin at berlios.de  Tue Sep 20 22:31:07 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 22:31:07 +0200
Subject: [Poldistro-svn] r191 - trunk/096/pkg/other/hooks
Message-ID: <200509202031.j8KKV7eI006088@sheep.berlios.de>

Author: austin
Date: 2005-09-20 22:31:07 +0200 (Tue, 20 Sep 2005)
New Revision: 191

Modified:
   trunk/096/pkg/other/hooks/pkg.cfg
Log:
Disables the old attributes package

Modified: trunk/096/pkg/other/hooks/pkg.cfg
===================================================================
--- trunk/096/pkg/other/hooks/pkg.cfg	2005-09-20 20:30:33 UTC (rev 190)
+++ trunk/096/pkg/other/hooks/pkg.cfg	2005-09-20 20:31:07 UTC (rev 191)
@@ -1,4 +1,4 @@
-Enabled		1
+Enabled		0
 Name		hooks
 Maintainer	Distro Team
 Email		pol-distro-support at sourceforge.net



From austin at berlios.de  Tue Sep 20 22:46:30 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 22:46:30 +0200
Subject: [Poldistro-svn] r192 - trunk/096/pkg/systems/attributes
Message-ID: <200509202046.j8KKkUpD007349@sheep.berlios.de>

Author: austin
Date: 2005-09-20 22:46:29 +0200 (Tue, 20 Sep 2005)
New Revision: 192

Modified:
   trunk/096/pkg/systems/attributes/skills.cfg
   trunk/096/pkg/systems/attributes/uoskills.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/skills.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/skills.cfg	2005-09-20 20:31:07 UTC (rev 191)
+++ trunk/096/pkg/systems/attributes/skills.cfg	2005-09-20 20:46:29 UTC (rev 192)
@@ -8,8 +8,8 @@
 //
 //  The following can be defined for a Skill:
 //
-//      Name        Skill name [will be used to read/write data files]
-//      SkillId     0-[max skill]
+//  	Name	    Skill name [will be used to read/write data files]
+//  	SkillId	    0-[max skill]
 //      Script      Script to run when skill is clicked in skills window
 //      Delay       Number of seconds skills cannot be used after this one
 //      Unhides     Using this skill unhides user if hidden (default: 1)
@@ -26,11 +26,19 @@
 //      chance is a floating point percentage, from 0.0 to 100.0
 //
 /////////////////////////////////////////////////////////////////////////////
+// 
+// *** NOTICE ***
+// 
+// As of POL 094, this file is only used to start up a skill Script	when a
+// client uses one.
+//
+/////////////////////////////////////////////////////////////////////////////
 
 Skill 0
 {
-    Name           Alchemy
-    SkillId        0
+	Name	       Alchemy
+	SkillId	       0
+   
     IntAdv         100 1d4+20
     DexAdv         100 1d1+20
     default_points 100
@@ -40,9 +48,10 @@
 
 Skill 1
 {
-    Name    Anatomy
-    SkillId 1
-    Script  anatomy
+	Name	Anatomy
+	SkillId	1
+	Script	:anatomy:anatomy
+  
     Delay 10
     IntAdv  100 1d2+10
     default_points 50
@@ -52,10 +61,11 @@
 
 Skill 2
 {
-    Name    AnimalLore
-    SkillId 2
-    Script animalLore
-    Delay   10
+	Name	AnimalLore
+	SkillId	2
+	Script	animalLore
+ 
+   Delay   10
     IntAdv  100 1d4+20
     default_points 100
     title   Ranger
@@ -64,9 +74,10 @@
 
 Skill 3
 {
-    Name    ItemId
-    SkillId 3
-    Script  itemID
+	Name	ItemId
+	SkillId	3
+	Script	itemID
+ 
     Delay   10
     IntAdv  100 1d3+15
     default_points 50
@@ -76,9 +87,10 @@
 
 Skill 4
 {
-    Name    ArmsLore
-    SkillId 4
-    Script  armsLore
+	Name	ArmsLore
+	SkillId	4
+	Script	armsLore
+ 
     Delay   10
     IntAdv  100 1d1+10
     StrAdv  100 1d2+10
@@ -89,8 +101,9 @@
 
 Skill 5
 {
-    Name    Parry
-    SkillId 5
+	Name	Parry
+	SkillId	5
+  
     StrAdv  100 1d2+20
     default_points 100
     title   Shieldsfighter
@@ -99,21 +112,23 @@
 
 Skill 6
 {
-	Name			Begging
-	SkillId			6
-	Delay			10
-	IntAdv			100 1d1+20
-	default_points	100
-	title			Beggar
-	Unhides			1
-	DropStat		str dex
-	Script			begging
+	Name	Begging
+	SkillId	6
+	Script	:begging:begging
+	
+  Delay			10
+  IntAdv			100 1d1+20
+  default_points	100
+  title			Beggar
+  Unhides			1
+  DropStat		str dex
 }
 
 Skill 7
 {
-    Name    Blacksmithy
-    SkillId 7
+	Name	Blacksmithy
+	SkillId	7
+	
     Delay   10
     StrAdv  100 1d4+20
     default_points 100
@@ -123,8 +138,9 @@
 
 Skill 8
 {
-    Name    Bowcraft
-    SkillId 8
+	Name	Bowcraft
+	SkillId	8
+	
     Delay   15
     StrAdv  100 1d4+20
     DexAdv  100 1d3+20
@@ -136,9 +152,10 @@
 
 Skill 9
 {
-    Name    Peacemaking
-    SkillId 9
-    Script  peacemaking
+	Name	Peacemaking
+	SkillId	9
+	Script	:musicianship:peacemaking
+	
     IntAdv  100 1d2
     default_points 50
     title   Bard
@@ -148,8 +165,9 @@
 
 Skill 10
 {
-    Name    Camping
-    SkillId 10
+	Name	Camping
+	SkillId	10
+	
     Delay   10
     StrAdv  100 1d2+10
     IntAdv  100 1d2+10
@@ -161,8 +179,9 @@
 
 Skill 11
 {
-    Name    Carpentry
-    SkillId 11
+	Name	Carpentry
+	SkillId	11
+	
     Delay   10
     StrAdv  100 1d4+25
     default_points 100
@@ -172,9 +191,10 @@
 
 Skill 12
 {
-    Name    Cartography
-    SkillId 12
-    Script  cartography
+	Name	Cartography
+	SkillId	12
+	Script	:cartography:cartography
+		
     Delay   15
     IntAdv  100 1d2+10
     default_points 100
@@ -184,8 +204,9 @@
 
 Skill 13
 {
-    Name    Cooking
-    SkillId 13
+	Name	Cooking
+	SkillId	13
+	
     Delay   15
     IntAdv  100 1d2+10
     default_points 100
@@ -196,9 +217,10 @@
 
 Skill 14
 {
-    Name    DetectingHidden
-    SkillId 14
-    Script  detectHidden
+	Name	DetectingHidden
+	SkillId	14
+	Script	:detecthidden:detectHidden
+	
     Delay   10
     IntAdv  100 1d4+20
     default_points 50
@@ -208,9 +230,10 @@
 
 Skill 15
 {
-    Name    Enticement
-    SkillId 15
-    Script  entice
+	Name	Enticement
+	SkillId	15
+	Script	:musicianship:entice
+	
     Delay   10
     IntAdv  20 2d4
     default_points 100
@@ -219,9 +242,10 @@
 
 Skill 16
 {
-    Name    EvaluatingIntelligence
-    SkillId 16
-    Script  evalInt
+	Name	EvaluatingIntelligence
+	SkillId	16
+	Script	:evalint:evalInt
+	
     Delay   10
     IntAdv  100 1d4+20
     default_points 50
@@ -232,8 +256,9 @@
 
 Skill 17
 {
-    Name    Healing
-    SkillId 17
+	Name	Healing
+	SkillId	17
+	
     Delay   10
     DexAdv  100 1d1+10
     default_points 100
@@ -244,8 +269,9 @@
 
 Skill 18
 {
-    Name    Fishing
-    SkillId 18
+	Name	Fishing
+	SkillId	18
+	
     Delay   5
     DexAdv  100 1d4+20
     StrAdv  100 1d4+20
@@ -256,20 +282,23 @@
 
 Skill 19
 {
-    Name    ForensicEvaluation
-    SkillId 19
+	Name	ForensicEvaluation
+	SkillId	19
+	Script	:forensicevaluation:forensic
+	
     Delay   15
     IntAdv  100 1d4+20
     default_points 100
-    script forensic
+	
     title   Detective
     DropStat       str dex
 }
 
 Skill 20
 {
-    Name    Herding
-    SkillId 20
+	Name	Herding
+	SkillId	20
+	
     StrAdv  100 1d4+20
     default_points 100
     title   Shepherd
@@ -279,9 +308,10 @@
 
 Skill 21
 {
-    Name    Hiding
-    SkillId 21
-    Script  hiding
+	Name	Hiding
+	SkillId	21
+	Script	:hiding:hiding
+	
     Delay   10
     DexAdv  100 1d4+20
     default_points 50
@@ -291,20 +321,22 @@
 
 Skill 22
 {
-    Name    Provocation
-    SkillId 22
+	Name	Provocation
+	SkillId	22
+	Script	:musicianship:provocation
+	
     default_points 100
     dexadv 100 1d2
-    script provocation
     title   Bard
     DropStat       str int
 }
 
 Skill 23
 {
-    Name    Inscription
-    SkillId 23
-    Script  inscription
+	Name	Inscription
+	SkillId	23
+	Script	:inscription:inscription
+	
     Delay   0
     IntAdv  100 1d4+20
     default_points 100
@@ -314,8 +346,9 @@
 
 Skill 24
 {
-    Name    Lockpicking
-    SkillId 24
+	Name	Lockpicking
+	SkillId	24
+	
     Delay   15
     DexAdv  100 1d3+10
     default_points 100
@@ -326,8 +359,9 @@
 
 Skill 25
 {
-    Name    Magery
-    SkillId 25
+	Name	Magery
+	SkillId	25
+	
     IntAdv  100 1d4+20
     default_points 100
     title   Mage
@@ -337,8 +371,9 @@
 
 Skill 26
 {
-    Name    MagicResistance
-    SkillId 26
+	Name	MagicResistance
+	SkillId	26
+	
     default_points 100
     title   Mage
     Unhides 1
@@ -347,8 +382,9 @@
 
 Skill 27
 {
-    Name    Tactics
-    SkillId 27
+	Name	Tactics
+	SkillId	27
+	
     default_points 40
     title   Warrior
     DropStat       dex
@@ -356,8 +392,9 @@
 
 Skill 28
 {
-    Name    Snooping
-    SkillId 28
+	Name	Snooping
+	SkillId	28
+	
     Delay 5
     Unhides 0
     DexAdv  80 4d6+10
@@ -367,8 +404,9 @@
 
 Skill 29
 {
-    Name    Musicianship
-    SkillId 29
+	Name	Musicianship
+	SkillId	29
+	
     Delay   15
     IntAdv  100 1d2+10
     DexAdv  100 1d4+20
@@ -380,9 +418,10 @@
 
 Skill 30
 {
-	Name    Poisoning
-	SkillId 30
-	Script  poisonSkill
+	Name	Poisoning
+	SkillId	30
+	Script	:poisoning:poisonSkill
+	
 	Delay   10
 	IntAdv  100 1d2+10
 	DexAdv  100 1d4+20
@@ -393,8 +432,9 @@
 
 Skill 31
 {
-    Name    Archery
-    SkillId 31
+	Name	Archery
+	SkillId	31
+	
     DexAdv  100 1d4+20
     StrAdv  100 1d2+10
     title   Archer
@@ -404,9 +444,10 @@
 
 Skill 32
 {
-    Name    SpiritSpeak
-    SkillId 32
-    Script  spiritSpeak
+	Name	SpiritSpeak
+	SkillId	32
+	Script	:spiritspeak:spiritSpeak
+	
     Delay   10
     IntAdv  100 1d4+20
     default_points 50
@@ -416,8 +457,9 @@
 
 Skill 33
 {
-    Name    Stealing
-    SkillId 33
+	Name	Stealing
+	SkillId	33
+	
     Delay   15
     Unhides 0
     DexAdv  90 3d4+9
@@ -427,8 +469,9 @@
 
 Skill 34
 {
-    Name    Tailoring
-    SkillId 34
+	Name	Tailoring
+	SkillId	34
+	
     Delay   15
     DexAdv  100 1d1+10
     default_points 100
@@ -439,9 +482,10 @@
 
 Skill 35
 {
-    Name    AnimalTaming
-    SkillId 35
-    Script  taming
+	Name	AnimalTaming
+	SkillId	35
+	Script	:taming:taming
+	
     Delay   10
     StrAdv  100 1d4+20
     IntAdv  100 1d3+10
@@ -452,9 +496,10 @@
 
 Skill 36
 {
-	Name			TasteIdentification
-	SkillId			36
-	Script			tasteID
+	Name	TasteIdentification
+	SkillId	36
+	Script	:tasteid:tasteID
+	
 	Delay			10
 	IntAdv			100 1d4+20
 	default_points	50
@@ -464,8 +509,9 @@
 
 Skill 37
 {
-    Name    Tinkering
-    SkillId 37
+	Name	Tinkering
+	SkillId	37
+	
     Delay   10
     StrAdv  100 1d4+20
     IntAdv  100 1d4+20
@@ -476,9 +522,10 @@
 
 Skill 38
 {
-    Name    Tracking
-    SkillId 38
-    Script tracking
+	Name	Tracking
+	SkillId	38
+	Script	:tracking:tracking
+	
     Delay   10
     IntAdv  100 1d4+20
     DexAdv  100 1d2+10
@@ -488,8 +535,9 @@
 
 Skill 39
 {
-    Name    Veterinary
-    SkillId 39
+	Name	Veterinary
+	SkillId	39
+	
     Delay   10
     IntAdv  100 1d2+10
     default_points 100
@@ -500,8 +548,9 @@
 
 Skill 40
 {
-    Name    Swordsmanship
-    SkillId 40
+	Name	Swordsmanship
+	SkillId	40
+	
     StrAdv  100 1d3+20
     DexAdv  100 1d3
     title   Swordsman
@@ -511,8 +560,9 @@
 
 Skill 41
 {
-    Name    Macefighting
-    SkillId 41
+	Name	Macefighting
+	SkillId	41
+	
     StrAdv  100 1d4+30
     DexAdv  100 1d2
     title   Armsman
@@ -522,8 +572,9 @@
 
 Skill 42
 {
-    Name    Fencing
-    SkillId 42
+	Name	Fencing
+	SkillId	42
+	
     StrAdv  100 1d2+10
     DexAdv  100 1d3+10
     title   Fencer
@@ -533,8 +584,9 @@
 
 Skill 43
 {
-    Name    Wrestling
-    SkillId 43
+	Name	Wrestling
+	SkillId	43
+	
     StrAdv  100 1d2+20
     DexAdv  100 1d4
     title   Wrestler
@@ -544,8 +596,9 @@
 
 Skill 44
 {
-    Name    Lumberjacking
-    SkillId 44
+	Name	Lumberjacking
+	SkillId	44
+	
     Delay   10
     StrAdv  100 1d4+20
     default_points 100
@@ -556,8 +609,9 @@
 
 Skill 45
 {
-    Name    Mining
-    SkillId 45
+	Name	Mining
+	SkillId	45
+	
     Delay   10
     StrAdv  100 1d4+20
     default_points 100
@@ -568,10 +622,11 @@
 
 Skill 46
 {
-    Name    Meditation
-    SkillId 46
+	Name	Meditation
+	SkillId	46
+	Script	:meditation:meditation
+    
     Delay   10
-    Script  meditation
     IntAdv  100 1d4+20
     default_points 100
     title   Stoic
@@ -580,11 +635,12 @@
 
 Skill 47
 {
-    Name    Stealth
-    SkillId 47
+	Name	Stealth
+	SkillId	47
+	Script	:stealth:stealth
+	
     Delay   10
     Unhides 0
-    script  stealth
     DexAdv  100 1d4+20
     default_points 50
     title   Rogue
@@ -593,10 +649,11 @@
 
 Skill 48
 {
-    Name    RemoveTrap
-    SkillId 48
+	Name	RemoveTrap
+	SkillId	48
+	Script	removeTrap
+		
     Delay   10
-    Script  removeTrap
     DexAdv  100 1d4+20
     default_points 50
     title   Rogue
@@ -605,8 +662,9 @@
 
 Skill 49
 {
-    Name    Necromancy
-    SkillId 49
+	Name	Necromancy
+	SkillId	49
+	
     IntAdv  100 1d4+20
     default_points 100
     title   Necromancer
@@ -616,8 +674,9 @@
 
 Skill 50
 {
-    Name    Focus
-    SkillId 50
+	Name	Focus
+	SkillId	50
+	
     IntAdv  100 1d4+20
     default_points 100
     title   Monk
@@ -627,8 +686,9 @@
 
 Skill 51
 {
-    Name    Chivalry
-    SkillId 51
+	Name	Chivalry
+	SkillId	51
+	
     IntAdv  100 1d4+20
     default_points 100
     title   Paladin

Modified: trunk/096/pkg/systems/attributes/uoskills.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/uoskills.cfg	2005-09-20 20:31:07 UTC (rev 191)
+++ trunk/096/pkg/systems/attributes/uoskills.cfg	2005-09-20 20:46:29 UTC (rev 192)
@@ -15,6 +15,9 @@
 # Only one attribute may be mapped to a skill id. Attribute_name must be found in attributes.cfg!
 # SkillID must be an integer between 0 and 500, though any entries past the maximum UO skill id
 # will not be sent to the UO client.
+# 
+# ** Used to handle the blue skill messages that player's see when they change. **
+#
 
 Skill 0
 {



From austin at berlios.de  Tue Sep 20 22:47:21 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 22:47:21 +0200
Subject: [Poldistro-svn] r193 - trunk/096/pkg/systems/attributes
Message-ID: <200509202047.j8KKlLWc007400@sheep.berlios.de>

Author: austin
Date: 2005-09-20 22:47:21 +0200 (Tue, 20 Sep 2005)
New Revision: 193

Modified:
   trunk/096/pkg/systems/attributes/pkg.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/pkg.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/pkg.cfg	2005-09-20 20:46:29 UTC (rev 192)
+++ trunk/096/pkg/systems/attributes/pkg.cfg	2005-09-20 20:47:21 UTC (rev 193)
@@ -1,5 +1,5 @@
 Enabled		1
-Name		control
+Name		attributes
 
 Version		1.0
 



From austin at berlios.de  Tue Sep 20 23:01:09 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 23:01:09 +0200
Subject: [Poldistro-svn] r194 - in trunk/096/pkg/systems/attributes: . commands commands/test include
Message-ID: <200509202101.j8KL19U4008558@sheep.berlios.de>

Author: austin
Date: 2005-09-20 23:01:09 +0200 (Tue, 20 Sep 2005)
New Revision: 194

Added:
   trunk/096/pkg/systems/attributes/commands/
   trunk/096/pkg/systems/attributes/commands/test/
   trunk/096/pkg/systems/attributes/commands/test/attribconvert.src
Modified:
   trunk/096/pkg/systems/attributes/include/attributes_ex.inc
Log:


Added: trunk/096/pkg/systems/attributes/commands/test/attribconvert.src
===================================================================
--- trunk/096/pkg/systems/attributes/commands/test/attribconvert.src	2005-09-20 20:47:21 UTC (rev 193)
+++ trunk/096/pkg/systems/attributes/commands/test/attribconvert.src	2005-09-20 21:01:09 UTC (rev 194)
@@ -0,0 +1,15 @@
+use uo;
+use os;
+
+include ":attributes:include/attributes_ex";
+
+program command_AttribConvert(who, input)
+	if ( !input )
+		SendSysMessage(who, "Error - no skillID or attribute name was sent.");
+		return;
+	elseif ( Len(input) <= 2 )
+		SendSysMessage(who, "SkillID ["+input+"] points to attribute "+AF_IDToAttributeName(input));
+	else
+		SendSysMessage(who, "Attribute ["+input+"] points to skillID "+AF_AttributeNameToSkillID(input));
+	endif
+endprogram

Modified: trunk/096/pkg/systems/attributes/include/attributes_ex.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes_ex.inc	2005-09-20 20:47:21 UTC (rev 193)
+++ trunk/096/pkg/systems/attributes/include/attributes_ex.inc	2005-09-20 21:01:09 UTC (rev 194)
@@ -27,7 +27,7 @@
 function AF_IDToAttributeName(skill_number)
 	var skills_cfg := ReadConfigFile(":attributes:uoskills");
 	if ( skills_cfg.errortext )
-		SysLog("Error::AF_IDToAttributeName() - Unable to open :*:skills.cfg ->"+skills_cfg.errortext);
+		SysLog("Error::AF_IDToAttributeName() - Unable to open :attributes:uoskills.cfg ->"+skills_cfg.errortext);
 	endif
 	
 	var cfg_elem := skills_cfg[skill_number];
@@ -35,11 +35,11 @@
 		SysLog("Error::AF_IDToAttributeName() - unable to find cfg elem ["+skill_number+"] ->"+cfg_elem.errortext);
 	endif
 	
-	return cfg_elem.Name;
+	return cfg_elem.Attribute;
 endfunction
 
 /*
- * AF_AttributeNameToSkillID(skill_number)
+ * AF_AttributeNameToSkillID(attribute_name)
  *
  * Purpose
  * Gets the skill number (ID) that an attribute name is associated with.



From austin at berlios.de  Tue Sep 20 23:02:07 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 23:02:07 +0200
Subject: [Poldistro-svn] r195 - trunk/096/pkg/systems/attributes
Message-ID: <200509202102.j8KL27tc008633@sheep.berlios.de>

Author: austin
Date: 2005-09-20 23:02:06 +0200 (Tue, 20 Sep 2005)
New Revision: 195

Modified:
   trunk/096/pkg/systems/attributes/attributes.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/attributes.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-20 21:01:09 UTC (rev 194)
+++ trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-20 21:02:06 UTC (rev 195)
@@ -74,7 +74,7 @@
 Attribute Alchemy
 {
 	AttributeType	Skill
-	SkilliD		0
+	SkillId		0
 	
 	StatCheck	Dexterity	100	1d1+20
 	StatCheck	Intelligence	100	1d4+20



From austin at berlios.de  Tue Sep 20 23:14:30 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 20 Sep 2005 23:14:30 +0200
Subject: [Poldistro-svn] r196 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509202114.j8KLEUeX009811@sheep.berlios.de>

Author: austin
Date: 2005-09-20 23:14:30 +0200 (Tue, 20 Sep 2005)
New Revision: 196

Modified:
   trunk/096/pkg/systems/attributes/include/vitals.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/vitals.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-20 21:02:06 UTC (rev 195)
+++ trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-20 21:14:30 UTC (rev 196)
@@ -0,0 +1,84 @@
+/*===============================================================
+* Current Version
+* VITALS.INC - v1.0
+* Updated 9/20/2005 2:04PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+
+/*
+ * AF_GetVital(mobile, vital_name)
+ *
+ * Purpose
+ * Retrieves the number of vital points a mobile has.
+ *
+ * Parameters
+ * mobile:	Mobile reference to retrieve the points from.
+ * vital_name:	Name of the vital to retrieve the points for.
+ *
+ * Return value
+ * Returns a double.
+ *
+ */
+function AF_GetVital(mobile, vital_name)
+	return (GetVital(mobile, vital_name) / 100);
+endfunction
+
+/*
+ * AF_GetVital(mobile, vital_name)
+ *
+ * Purpose
+ * Retrieves the maximum number of vital points a mobile can have.
+ *
+ * Parameters
+ * mobile:	Mobile reference to check.
+ * vital_name:	Name of the vital to retrieve the max. points for.
+ *
+ * Return value
+ * Returns an integer.
+ *
+ */
+function AF_GetVitalMaximumValue(mobile, vital_name)
+	return GetVitalMaximumValue(mobile, vital_name);
+endfunction
+
+/*
+ * AF_GetVitalRegenRate(mobile, vital_name)
+ *
+ * Purpose
+ * Retrieves the regen rate of a vital on a mobile.
+ *
+ * Parameters
+ * mobile:	Mobile reference to check.
+ * vital_name:	Name of the vital to retrieve the regen rate of.
+ *
+ * Return value
+ * Returns an integer.
+ *
+ */
+function GetVitalRegenRate(mobile, vital_name)
+	return GetVitalRegenRate(mobile, vital_name);
+endfunction
+
+/*
+ * AF_SetVital(mobile, vital_name, points)
+ *
+ * Purpose
+ * Sets vital points on a mobile.
+ *
+ * Parameters
+ * mobile:	Mobile reference to set the vital on.
+ * vital_name:	Name of the vital to set.
+ * points:	Number of points to set the vital to.
+ *
+ * Return value
+ * Returns result of the SetVital() core function.
+ *
+ */
+function AF_SetVital(mobile, vital_name, amount)
+	return SetVital(mobile, vital_name, CInt(CDbl(amount)*100.0));
+endfunction



From austin at berlios.de  Wed Sep 21 00:09:01 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 21 Sep 2005 00:09:01 +0200
Subject: [Poldistro-svn] r197 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509202209.j8KM91Sp013255@sheep.berlios.de>

Author: austin
Date: 2005-09-21 00:09:01 +0200 (Wed, 21 Sep 2005)
New Revision: 197

Modified:
   trunk/096/pkg/systems/attributes/include/stats.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/stats.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-20 21:14:30 UTC (rev 196)
+++ trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-20 22:09:01 UTC (rev 197)
@@ -0,0 +1,83 @@
+/*===============================================================
+* Current Version
+* STATS.INC - v1.0
+* Updated 9/20/2005 2:20PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+
+/*
+ * AF_GetRawStat(mobile, stat_name)
+ *
+ * Purpose
+ * Retrieves the value of the stat as it is stored in the core.
+ *
+ * Parameters
+ * mobile:	Mobile reference to retrieve the points from.
+ * stat_name:	Name of the stat to retrieve the points for.
+ *
+ * Return value
+ * Returns an integer.
+ *
+ */
+ function AF_GetRawStat(who, stat_name)
+	return GetAttributeBaseValue(who, stat_name);
+endfunction
+
+/*
+ * AF_GetStat(mobile, stat_name)
+ *
+ * Purpose
+ * Retrieves the base value of the stat plus its mod value.
+ *
+ * Parameters
+ * mobile:	Mobile reference to retrieve the points from.
+ * stat_name:	Name of the stat to retrieve the points for.
+ *
+ * Return value
+ * Returns an integer.
+ *
+ */
+function AF_GetStat(who, stat_name)
+	return (GetTrueStat(who, stat_name)+GetStatMod(who, stat_name));
+endfunction
+
+/*
+ * AF_GetTrueStat(mobile, stat_name)
+ *
+ * Purpose
+ * Retrieves the base value of the stat and turns it into a usable number.
+ *
+ * Parameters
+ * mobile:	Mobile reference to retrieve the points from.
+ * stat_name:	Name of the stat to retrieve the points for.
+ *
+ * Return value
+ * Returns a double.
+ *
+ */
+function AF_GetTrueStat(who, stat_name)
+	return (CDbl(GetAttributeBaseValue(who, stat_name)) / 10.0);
+endfunction
+
+/*
+ * AF_GetStatMod(mobile, stat_name)
+ *
+ * Purpose
+ * Retrieves the base value of the stat mod and turns it into a usable number.
+ *
+ * Parameters
+ * mobile:	Mobile reference to retrieve the points from.
+ * stat_name:	Name of the stat to retrieve the modifier points for.
+ *
+ * Return value
+ * Returns a double.
+ *
+ */
+function AF_GetStatMod(who, stat_name)
+	return (CDbl(GetAttributeTemporaryMod(who, stat_name)) / 10.0);
+endfunction
\ No newline at end of file



From austin at berlios.de  Wed Sep 21 00:13:18 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 21 Sep 2005 00:13:18 +0200
Subject: [Poldistro-svn] r198 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509202213.j8KMDIeU013506@sheep.berlios.de>

Author: austin
Date: 2005-09-21 00:13:18 +0200 (Wed, 21 Sep 2005)
New Revision: 198

Added:
   trunk/096/pkg/systems/attributes/include/attributeConstants.inc
Removed:
   trunk/096/pkg/systems/attributes/include/folko-attributes.inc
Log:


Copied: trunk/096/pkg/systems/attributes/include/attributeConstants.inc (from rev 185, trunk/096/pkg/systems/attributes/include/folko-attributes.inc)
===================================================================
--- trunk/096/pkg/systems/attributes/include/folko-attributes.inc	2005-09-20 19:59:00 UTC (rev 185)
+++ trunk/096/pkg/systems/attributes/include/attributeConstants.inc	2005-09-20 22:13:18 UTC (rev 198)
@@ -0,0 +1,204 @@
+/* $Id: attributes.inc,v 1.5 2004/05/02 12:20:56 melanius Exp $
+ *
+ * Purpose
+ * Provide various functions and constants for the attribute system.
+ *
+ */
+use uo;
+
+enum ATTRIBUTE_CUSTOM
+	ATTRIBUTE_HITS_REGENERATION         := "HitsRegeneration",
+	ATTRIBUTE_MANA_REGENERATION         := "ManaRegeneration",
+	ATTRIBUTE_STAMINA_REGENERATION      := "StaminaRegeneration"
+endenum
+
+enum ATTRIBUTE_STATS
+	ATTRIBUTE_STRENGTH                  := "Strength",
+	ATTRIBUTE_DEXTERITY                 := "Dexterity",
+	ATTRIBUTE_INTELLIGENCE              := "Intelligence"
+endenum
+
+enum ATTRIBUTE_SKILLS
+	ATTRIBUTE_ALCHEMY                   := "Alchemy",
+	ATTRIBUTE_ANATOMY                   := "Anatomy",
+	ATTRIBUTE_ANIMAL_LORE               := "AnimalLore",
+	ATTRIBUTE_ITEM_IDENTIFICATION       := "ItemIdentification",
+	ATTRIBUTE_ARMS_LORE                 := "ArmsLore",
+	ATTRIBUTE_PARRY                     := "Parry",
+	ATTRIBUTE_BEGGING                   := "Begging",
+	ATTRIBUTE_BLACKSMITHY               := "Blacksmithy",
+	ATTRIBUTE_BOWCRAFT_FLETCHING        := "BowcraftFletching",
+	ATTRIBUTE_PEACEMAKING               := "Peacemaking",
+	ATTRIBUTE_CAMPING                   := "Camping",
+	ATTRIBUTE_CARPENTRY                 := "Carpentry",
+	ATTRIBUTE_CARTOGRAPHY               := "Cartography",
+	ATTRIBUTE_COOKING                   := "Cooking",
+	ATTRIBUTE_DETECTING_HIDDEN          := "DetectingHidden",
+	ATTRIBUTE_DISCORDANCE               := "Discordance",
+	ATTRIBUTE_EVALUATING_INTELLIGENCE   := "EvaluatingIntelligence",
+	ATTRIBUTE_HEALING                   := "Healing",
+	ATTRIBUTE_FISHING                   := "Fishing",
+	ATTRIBUTE_FORENSIC_EVALUATION       := "ForensicEvaluation",
+	ATTRIBUTE_HERDING                   := "Herding",
+	ATTRIBUTE_HIDING                    := "Hiding",
+	ATTRIBUTE_PROVOCATION               := "Provocation",
+	ATTRIBUTE_INSCRIPTION               := "Inscription",
+	ATTRIBUTE_LOCKPICKING               := "Lockpicking",
+	ATTRIBUTE_MAGERY                    := "Magery",
+	ATTRIBUTE_RESISTING_SPELLS          := "ResistingSpells",
+	ATTRIBUTE_TACTICS                   := "Tactics",
+	ATTRIBUTE_SNOOPING                  := "Snooping",
+	ATTRIBUTE_MUSICIANSHIP              := "Musicianship",
+	ATTRIBUTE_POISONING                 := "Poisoning",
+	ATTRIBUTE_ARCHERY                   := "Archery",
+	ATTRIBUTE_SPIRIT_SPEAK              := "SpiritSpeak",
+	ATTRIBUTE_STEALING                  := "Stealing",
+	ATTRIBUTE_TAILORING                 := "Tailoring",
+	ATTRIBUTE_ANIMAL_TAMING             := "AnimalTaming",
+	ATTRIBUTE_TASTE_IDENTIFICATION      := "TasteIdentification",
+	ATTRIBUTE_TINKERING                 := "Tinkering",
+	ATTRIBUTE_TRACKING                  := "Tracking",
+	ATTRIBUTE_VETERINARY                := "Veterinary",
+	ATTRIBUTE_SWORDSMANSHIP             := "Swordsmanship",
+	ATTRIBUTE_MACE_FIGHTING             := "MaceFighting",
+	ATTRIBUTE_FENCING                   := "Fencing",
+	ATTRIBUTE_WRESTLING                 := "Wrestling",
+	ATTRIBUTE_LUMBERJACKING             := "Lumberjacking",
+	ATTRIBUTE_MINING                    := "Mining",
+	ATTRIBUTE_MEDITATION                := "Meditation",
+	ATTRIBUTE_STEALTH                   := "Stealth",
+	ATTRIBUTE_REMOVE_TRAP               := "RemoveTrap",
+	ATTRIBUTE_NECROMANCY                := "Necromancy",
+	ATTRIBUTE_BATTLE_FOCUS              := "BattleFocus",
+	ATTRIBUTE_CHIVALRY                  := "Chivalry"
+endenum
+
+
+/*
+ * GetCustomAttributes()
+ *
+ * Author: Melanius [x90]
+ * Last-Edit: Folko
+ *
+ * Purpose
+ * Returns an array with all the custom attribute names.
+ *
+ * Parameters
+ * No parameters
+ *
+ * Return value
+ * Array containing the names of all custom attributes.
+ *
+ */
+function GetCustomAttributes()
+	return(
+		{
+			ATTRIBUTE_HITS_REGENERATION,
+			ATTRIBUTE_MANA_REGENERATION,
+			ATTRIBUTE_STAMINA_REGENERATION
+		}
+	);
+endfunction
+
+
+/*
+ * GetStatAttributes()
+ *
+ * Author: Melanius [x90]
+ * Last-Edit: Folko
+ *
+ * Purpose
+ * Returns an array with the names of all stat attributes.
+ *
+ * Parameters
+ * No parameters
+ *
+ * Return value
+ * Array containing the names of all stat attribuets.
+ *
+ */
+function GetStatAttributes()
+	return(
+		{
+			ATTRIBUTE_STRENGTH,
+			ATTRIBUTE_DEXTERITY,
+			ATTRIBUTE_INTELLIGENCE
+		}
+	);
+endfunction
+
+
+/*
+ * GetSkillAttributes()
+ *
+ * Author: Melanius [x90]
+ * Last-Edit: Folko
+ *
+ * Purpose
+ * Returns an array with the names of all skill attributes.
+ *
+ * Parameters
+ * No parameters
+ *
+ * Return value
+ * Array containing the names of all attributes.
+ *
+ */
+function GetSkillAttributes()
+	return(
+		{
+			ATTRIBUTE_ALCHEMY,
+			ATTRIBUTE_ANATOMY,
+			ATTRIBUTE_ANIMAL_LORE,
+			ATTRIBUTE_ITEM_IDENTIFICATION,
+			ATTRIBUTE_ARMS_LORE,
+			ATTRIBUTE_PARRYING,
+			ATTRIBUTE_BEGGING,
+			ATTRIBUTE_BLACKSMITHY,
+			ATTRIBUTE_BOWCRAFT_FLETCHING,
+			ATTRIBUTE_PEACEMAKING,
+			ATTRIBUTE_CAMPING,
+			ATTRIBUTE_CARPENTRY,
+			ATTRIBUTE_CARTOGRAPHY,
+			ATTRIBUTE_COOKING,
+			ATTRIBUTE_DETECTING_HIDDEN,
+			ATTRIBUTE_DISCORDANCE,
+			ATTRIBUTE_EVALUATING_INTELLIGENCE,
+			ATTRIBUTE_HEALING,
+			ATTRIBUTE_FISHING,
+			ATTRIBUTE_FORENSIC_EVALUATION,
+			ATTRIBUTE_HERDING,
+			ATTRIBUTE_HIDING,
+			ATTRIBUTE_PROVOCATION,
+			ATTRIBUTE_INSCRIPTION,
+			ATTRIBUTE_LOCKPICKING,
+			ATTRIBUTE_MAGERY,
+			ATTRIBUTE_RESISTING_SPELLS,
+			ATTRIBUTE_TACTICS,
+			ATTRIBUTE_SNOOPING,
+			ATTRIBUTE_MUSICIANSHIP,
+			ATTRIBUTE_POISONING,
+			ATTRIBUTE_ARCHERY,
+			ATTRIBUTE_SPIRIT_SPEAK,
+			ATTRIBUTE_STEALING,
+			ATTRIBUTE_TAILORING,
+			ATTRIBUTE_ANIMAL_TAMING,
+			ATTRIBUTE_TASTE_IDENTIFICATION,
+			ATTRIBUTE_TINKERING,
+			ATTRIBUTE_TRACKING,
+			ATTRIBUTE_VETERINARY,
+			ATTRIBUTE_SWORDSMANSHIP,
+			ATTRIBUTE_MACE_FIGHTING,
+			ATTRIBUTE_FENCING,
+			ATTRIBUTE_WRESTLING,
+			ATTRIBUTE_LUMBERJACKING,
+			ATTRIBUTE_MINING,
+			ATTRIBUTE_MEDITATION,
+			ATTRIBUTE_STEALTH,
+			ATTRIBUTE_REMOVE_TRAP,
+			ATTRIBUTE_NECROMANCY,
+			ATTRIBUTE_BATTLE_FOCUS,
+			ATTRIBUTE_CHIVALRY
+		}
+	);
+endfunction

Deleted: trunk/096/pkg/systems/attributes/include/folko-attributes.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/folko-attributes.inc	2005-09-20 22:09:01 UTC (rev 197)
+++ trunk/096/pkg/systems/attributes/include/folko-attributes.inc	2005-09-20 22:13:18 UTC (rev 198)
@@ -1,204 +0,0 @@
-/* $Id: attributes.inc,v 1.5 2004/05/02 12:20:56 melanius Exp $
- *
- * Purpose
- * Provide various functions and constants for the attribute system.
- *
- */
-use uo;
-
-enum ATTRIBUTE_CUSTOM
-	ATTRIBUTE_HITS_REGENERATION         := "HitsRegeneration",
-	ATTRIBUTE_MANA_REGENERATION         := "ManaRegeneration",
-	ATTRIBUTE_STAMINA_REGENERATION      := "StaminaRegeneration"
-endenum
-
-enum ATTRIBUTE_STATS
-	ATTRIBUTE_STRENGTH                  := "Strength",
-	ATTRIBUTE_DEXTERITY                 := "Dexterity",
-	ATTRIBUTE_INTELLIGENCE              := "Intelligence"
-endenum
-
-enum ATTRIBUTE_SKILLS
-	ATTRIBUTE_ALCHEMY                   := "Alchemy",
-	ATTRIBUTE_ANATOMY                   := "Anatomy",
-	ATTRIBUTE_ANIMAL_LORE               := "AnimalLore",
-	ATTRIBUTE_ITEM_IDENTIFICATION       := "ItemIdentification",
-	ATTRIBUTE_ARMS_LORE                 := "ArmsLore",
-	ATTRIBUTE_PARRYING                  := "Parrying",
-	ATTRIBUTE_BEGGING                   := "Begging",
-	ATTRIBUTE_BLACKSMITHY               := "Blacksmithy",
-	ATTRIBUTE_BOWCRAFT_FLETCHING        := "BowcraftFletching",
-    ATTRIBUTE_PEACEMAKING               := "Peacemaking",
-    ATTRIBUTE_CAMPING                   := "Camping",
-    ATTRIBUTE_CARPENTRY                 := "Carpentry",
-    ATTRIBUTE_CARTOGRAPHY               := "Cartography",
-    ATTRIBUTE_COOKING                   := "Cooking",
-    ATTRIBUTE_DETECTING_HIDDEN          := "DetectingHidden",
-    ATTRIBUTE_DISCORDANCE               := "Discordance",
-    ATTRIBUTE_EVALUATING_INTELLIGENCE   := "EvaluatingIntelligence",
-    ATTRIBUTE_HEALING                   := "Healing",
-    ATTRIBUTE_FISHING                   := "Fishing",
-    ATTRIBUTE_FORENSIC_EVALUATION       := "ForensicEvaluation",
-    ATTRIBUTE_HERDING                   := "Herding",
-    ATTRIBUTE_HIDING                    := "Hiding",
-    ATTRIBUTE_PROVOCATION               := "Provocation",
-    ATTRIBUTE_INSCRIPTION               := "Inscription",
-    ATTRIBUTE_LOCKPICKING               := "Lockpicking",
-    ATTRIBUTE_MAGERY                    := "Magery",
-    ATTRIBUTE_RESISTING_SPELLS          := "ResistingSpells",
-    ATTRIBUTE_TACTICS                   := "Tactics",
-    ATTRIBUTE_SNOOPING                  := "Snooping",
-    ATTRIBUTE_MUSICIANSHIP              := "Musicianship",
-    ATTRIBUTE_POISONING                 := "Poisoning",
-    ATTRIBUTE_ARCHERY                   := "Archery",
-    ATTRIBUTE_SPIRIT_SPEAK              := "SpiritSpeak",
-    ATTRIBUTE_STEALING                  := "Stealing",
-    ATTRIBUTE_TAILORING                 := "Tailoring",
-    ATTRIBUTE_ANIMAL_TAMING             := "AnimalTaming",
-    ATTRIBUTE_TASTE_IDENTIFICATION      := "TasteIdentification",
-    ATTRIBUTE_TINKERING                 := "Tinkering",
-    ATTRIBUTE_TRACKING                  := "Tracking",
-    ATTRIBUTE_VETERINARY                := "Veterinary",
-    ATTRIBUTE_SWORDSMANSHIP             := "Swordsmanship",
-    ATTRIBUTE_MACE_FIGHTING             := "MaceFighting",
-    ATTRIBUTE_FENCING                   := "Fencing",
-    ATTRIBUTE_WRESTLING                 := "Wrestling",
-    ATTRIBUTE_LUMBERJACKING             := "Lumberjacking",
-    ATTRIBUTE_MINING                    := "Mining",
-    ATTRIBUTE_MEDITATION                := "Meditation",
-    ATTRIBUTE_STEALTH                   := "Stealth",
-    ATTRIBUTE_REMOVE_TRAP               := "RemoveTrap",
-    ATTRIBUTE_NECROMANCY                := "Necromancy",
-    ATTRIBUTE_BATTLE_FOCUS              := "BattleFocus",
-    ATTRIBUTE_CHIVALRY                  := "Chivalry"
-endenum
-
-
-/*
- * GetCustomAttributes()
- *
- * Author: Melanius [x90]
- * Last-Edit: Folko
- *
- * Purpose
- * Returns an array with all the custom attribute names.
- *
- * Parameters
- * No parameters
- *
- * Return value
- * Array containing the names of all custom attributes.
- *
- */
-function GetCustomAttributes()
-	return(
-		{
-			ATTRIBUTE_HITS_REGENERATION,
-			ATTRIBUTE_MANA_REGENERATION,
-			ATTRIBUTE_STAMINA_REGENERATION
-		}
-	);
-endfunction
-
-
-/*
- * GetStatAttributes()
- *
- * Author: Melanius [x90]
- * Last-Edit: Folko
- *
- * Purpose
- * Returns an array with the names of all stat attributes.
- *
- * Parameters
- * No parameters
- *
- * Return value
- * Array containing the names of all stat attribuets.
- *
- */
-function GetStatAttributes()
-	return(
-		{
-			ATTRIBUTE_STRENGTH,
-			ATTRIBUTE_DEXTERITY,
-			ATTRIBUTE_INTELLIGENCE
-		}
-	);
-endfunction
-
-
-/*
- * GetSkillAttributes()
- *
- * Author: Melanius [x90]
- * Last-Edit: Folko
- *
- * Purpose
- * Returns an array with the names of all skill attributes.
- *
- * Parameters
- * No parameters
- *
- * Return value
- * Array containing the names of all attributes.
- *
- */
-function GetSkillAttributes()
-	return(
-		{
-			ATTRIBUTE_ALCHEMY,
-			ATTRIBUTE_ANATOMY,
-			ATTRIBUTE_ANIMAL_LORE,
-            ATTRIBUTE_ITEM_IDENTIFICATION,
-            ATTRIBUTE_ARMS_LORE,
-            ATTRIBUTE_PARRYING,
-            ATTRIBUTE_BEGGING,
-            ATTRIBUTE_BLACKSMITHY,
-            ATTRIBUTE_BOWCRAFT_FLETCHING,
-            ATTRIBUTE_PEACEMAKING,
-            ATTRIBUTE_CAMPING,
-            ATTRIBUTE_CARPENTRY,
-            ATTRIBUTE_CARTOGRAPHY,
-            ATTRIBUTE_COOKING,
-            ATTRIBUTE_DETECTING_HIDDEN,
-            ATTRIBUTE_DISCORDANCE,
-            ATTRIBUTE_EVALUATING_INTELLIGENCE,
-            ATTRIBUTE_HEALING,
-            ATTRIBUTE_FISHING,
-            ATTRIBUTE_FORENSIC_EVALUATION,
-            ATTRIBUTE_HERDING,
-            ATTRIBUTE_HIDING,
-            ATTRIBUTE_PROVOCATION,
-            ATTRIBUTE_INSCRIPTION,
-            ATTRIBUTE_LOCKPICKING,
-            ATTRIBUTE_MAGERY,
-            ATTRIBUTE_RESISTING_SPELLS,
-            ATTRIBUTE_TACTICS,
-            ATTRIBUTE_SNOOPING,
-            ATTRIBUTE_MUSICIANSHIP,
-            ATTRIBUTE_POISONING,
-            ATTRIBUTE_ARCHERY,
-            ATTRIBUTE_SPIRIT_SPEAK,
-            ATTRIBUTE_STEALING,
-            ATTRIBUTE_TAILORING,
-            ATTRIBUTE_ANIMAL_TAMING,
-            ATTRIBUTE_TASTE_IDENTIFICATION,
-            ATTRIBUTE_TINKERING,
-            ATTRIBUTE_TRACKING,
-            ATTRIBUTE_VETERINARY,
-            ATTRIBUTE_SWORDSMANSHIP,
-            ATTRIBUTE_MACE_FIGHTING,
-            ATTRIBUTE_FENCING,
-            ATTRIBUTE_WRESTLING,
-            ATTRIBUTE_LUMBERJACKING,
-            ATTRIBUTE_MINING,
-            ATTRIBUTE_MEDITATION,
-            ATTRIBUTE_STEALTH,
-            ATTRIBUTE_REMOVE_TRAP,
-			ATTRIBUTE_NECROMANCY,
-			ATTRIBUTE_BATTLE_FOCUS,
-			ATTRIBUTE_CHIVALRY
-		}
-	);
-endfunction



From austin at berlios.de  Wed Sep 21 00:47:26 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 21 Sep 2005 00:47:26 +0200
Subject: [Poldistro-svn] r199 - in trunk/096/pkg/systems/attributes: commands/test include
Message-ID: <200509202247.j8KMlQZs007522@sheep.berlios.de>

Author: austin
Date: 2005-09-21 00:47:24 +0200 (Wed, 21 Sep 2005)
New Revision: 199

Modified:
   trunk/096/pkg/systems/attributes/commands/test/attribconvert.src
   trunk/096/pkg/systems/attributes/include/stats.inc
   trunk/096/pkg/systems/attributes/include/vitals.inc
Log:


Modified: trunk/096/pkg/systems/attributes/commands/test/attribconvert.src
===================================================================
--- trunk/096/pkg/systems/attributes/commands/test/attribconvert.src	2005-09-20 22:13:18 UTC (rev 198)
+++ trunk/096/pkg/systems/attributes/commands/test/attribconvert.src	2005-09-20 22:47:24 UTC (rev 199)
@@ -1,6 +1,7 @@
 use uo;
 use os;
 
+include ":attributes:include/attributeConstants";
 include ":attributes:include/attributes_ex";
 
 program command_AttribConvert(who, input)

Modified: trunk/096/pkg/systems/attributes/include/stats.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-20 22:13:18 UTC (rev 198)
+++ trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-20 22:47:24 UTC (rev 199)
@@ -11,10 +11,10 @@
 use uo;
 
 /*
- * AF_GetRawStat(mobile, stat_name)
+ * AF_GetStat(mobile, stat_name)
  *
  * Purpose
- * Retrieves the value of the stat as it is stored in the core.
+ * Retrieves the base value of the stat plus its mod value.
  *
  * Parameters
  * mobile:	Mobile reference to retrieve the points from.
@@ -24,60 +24,82 @@
  * Returns an integer.
  *
  */
- function AF_GetRawStat(who, stat_name)
-	return GetAttributeBaseValue(who, stat_name);
+function AF_GetStat(who, stat_name)
+	return AF_GetTrueStat(who, stat_name)+AF_GetStatMod(who, stat_name);
 endfunction
 
 /*
- * AF_GetStat(mobile, stat_name)
+ * AF_GetTrueStat(mobile, stat_name)
  *
  * Purpose
- * Retrieves the base value of the stat plus its mod value.
+ * Retrieves the base value of the stat and turns it into a usable number.
  *
  * Parameters
  * mobile:	Mobile reference to retrieve the points from.
  * stat_name:	Name of the stat to retrieve the points for.
  *
  * Return value
- * Returns an integer.
+ * Returns a double.
  *
  */
-function AF_GetStat(who, stat_name)
-	return (GetTrueStat(who, stat_name)+GetStatMod(who, stat_name));
+function AF_GetTrueStat(who, stat_name)
+	return CDbl(GetAttributeBaseValue(who, stat_name)) / 10.0;
 endfunction
 
 /*
- * AF_GetTrueStat(mobile, stat_name)
+ * AF_GetStatMod(mobile, stat_name)
  *
  * Purpose
- * Retrieves the base value of the stat and turns it into a usable number.
+ * Retrieves the base value of the stat mod and turns it into a usable number.
  *
  * Parameters
  * mobile:	Mobile reference to retrieve the points from.
- * stat_name:	Name of the stat to retrieve the points for.
+ * stat_name:	Name of the stat to retrieve the modifier points for.
  *
  * Return value
  * Returns a double.
  *
  */
-function AF_GetTrueStat(who, stat_name)
-	return (CDbl(GetAttributeBaseValue(who, stat_name)) / 10.0);
+function AF_GetStatMod(who, stat_name)
+	return CDbl(GetAttributeTemporaryMod(who, stat_name)) / 10.0;
 endfunction
 
 /*
- * AF_GetStatMod(mobile, stat_name)
+ * AF_SetTrueStat(mobile, stat_name, points)
  *
  * Purpose
- * Retrieves the base value of the stat mod and turns it into a usable number.
+ * Sets the value of the stat.
+ * Example: AF_SetTrueStat(mobile, "strength", 44.5)
  *
  * Parameters
- * mobile:	Mobile reference to retrieve the points from.
- * stat_name:	Name of the stat to retrieve the modifier points for.
+ * mobile:	Mobile reference to set the points on.
+ * stat_name:	Name of the stat to set the points on.
+ * points:	Number of points to set the stat at.
  *
  * Return value
  * Returns a double.
  *
  */
-function AF_GetStatMod(who, stat_name)
-	return (CDbl(GetAttributeTemporaryMod(who, stat_name)) / 10.0);
-endfunction
\ No newline at end of file
+function AF_SetTrueStat(mobile, stat_name, points)
+	SetAttributeBaseValue(mobile, stat_name, CInt(CDbl(points) * 10.0));
+endfunction
+
+/*
+ * AF_SetStatMod(mobile, stat_name, points)
+ *
+ * Purpose
+ * Sets the modifier value for the stat.
+ * Example: AF_SetStatMod(mobile, "strength", -15.3)
+ *
+ * Parameters
+ * mobile:	Mobile reference to set the modifier points on.
+ * stat_name:	Name of the stat to set the modifier points on.
+ * points:	Number of points to set the modifier stat at.
+ *
+ * Return value
+ * Returns a double.
+ *
+ */
+function AF_SetStatMod(mobile, stat_name, points)
+	SetAttributeTemporaryMod(mobile, stat_name, CInt(CDbl(points) * 10.0));
+endfunction

Modified: trunk/096/pkg/systems/attributes/include/vitals.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-20 22:13:18 UTC (rev 198)
+++ trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-20 22:47:24 UTC (rev 199)
@@ -60,7 +60,7 @@
  * Returns an integer.
  *
  */
-function GetVitalRegenRate(mobile, vital_name)
+function AF_GetVitalRegenRate(mobile, vital_name)
 	return GetVitalRegenRate(mobile, vital_name);
 endfunction
 



From austin at berlios.de  Wed Sep 21 00:55:01 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 21 Sep 2005 00:55:01 +0200
Subject: [Poldistro-svn] r200 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509202255.j8KMt1t2013801@sheep.berlios.de>

Author: austin
Date: 2005-09-21 00:54:59 +0200 (Wed, 21 Sep 2005)
New Revision: 200

Modified:
   trunk/096/pkg/systems/attributes/include/skills.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/skills.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-20 22:47:24 UTC (rev 199)
+++ trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-20 22:54:59 UTC (rev 200)
@@ -0,0 +1,105 @@
+/*===============================================================
+* Current Version
+* SKILLS.INC - v1.0
+* Updated 9/20/2005 2:20PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+
+/*
+ * AF_GetSkill(mobile, skill_name)
+ *
+ * Purpose
+ * Retrieves the base value of the skill plus its mod value.
+ *
+ * Parameters
+ * mobile:	Mobile reference to retrieve the points from.
+ * skill_name:	Name of the skill to retrieve the points for.
+ *
+ * Return value
+ * Returns an integer.
+ *
+ */
+function AF_GetSkill(who, skill_name)
+	return AF_GetTrueSkill(who, skill_name)+AF_GetSkillMod(who, skill_name);
+endfunction
+
+/*
+ * AF_GetTrueSkill(mobile, skill_name)
+ *
+ * Purpose
+ * Retrieves the base value of the skill and turns it into a usable number.
+ *
+ * Parameters
+ * mobile:	Mobile reference to retrieve the points from.
+ * skill_name:	Name of the skill to retrieve the points for.
+ *
+ * Return value
+ * Returns a double.
+ *
+ */
+function AF_GetTrueSkill(who, skill_name)
+	return CDbl(GetAttributeBaseValue(who, skill_name)) / 10.0;
+endfunction
+
+/*
+ * AF_GetSkillMod(mobile, skill_name)
+ *
+ * Purpose
+ * Retrieves the base value of the skill mod and turns it into a usable number.
+ *
+ * Parameters
+ * mobile:	Mobile reference to retrieve the points from.
+ * skill_name:	Name of the skill to retrieve the modifier points for.
+ *
+ * Return value
+ * Returns a double.
+ *
+ */
+function AF_GetSkillMod(who, skill_name)
+	return CDbl(GetAttributeTemporaryMod(who, skill_name)) / 10.0;
+endfunction
+
+/*
+ * AF_SetTrueSkill(mobile, skill_name, points)
+ *
+ * Purpose
+ * Sets the value of the skill.
+ * Example: AF_SetTrueSkill(mobile, "strength", 44.5)
+ *
+ * Parameters
+ * mobile:	Mobile reference to set the points on.
+ * skill_name:	Name of the skill to set the points on.
+ * points:	Number of points to set the skill at.
+ *
+ * Return value
+ * Returns a double.
+ *
+ */
+function AF_SetTrueSkill(mobile, skill_name, points)
+	SetAttributeBaseValue(mobile, skill_name, CInt(CDbl(points) * 10.0));
+endfunction
+
+/*
+ * AF_SetSkillMod(mobile, skill_name, points)
+ *
+ * Purpose
+ * Sets the modifier value for the skill.
+ * Example: AF_SetSkillMod(mobile, "strength", -15.3)
+ *
+ * Parameters
+ * mobile:	Mobile reference to set the modifier points on.
+ * skill_name:	Name of the skill to set the modifier points on.
+ * points:	Number of points to set the modifier skill at.
+ *
+ * Return value
+ * Returns a double.
+ *
+ */
+function AF_SetSkillMod(mobile, skill_name, points)
+	SetAttributeTemporaryMod(mobile, skill_name, CInt(CDbl(points) * 10.0));
+endfunction



From austin at berlios.de  Wed Sep 21 01:16:38 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 21 Sep 2005 01:16:38 +0200
Subject: [Poldistro-svn] r201 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509202316.j8KNGctA026940@sheep.berlios.de>

Author: austin
Date: 2005-09-21 01:16:35 +0200 (Wed, 21 Sep 2005)
New Revision: 201

Modified:
   trunk/096/pkg/systems/attributes/include/regen.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/regen.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-20 22:54:59 UTC (rev 200)
+++ trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-20 23:16:35 UTC (rev 201)
@@ -0,0 +1,38 @@
+/*===============================================================
+* Current Version
+* SKILLS.INC - v1.0
+* Updated 9/20/2005 4:09PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+
+/*
+ * AF_SetVitalRegenRate(mobile, skill_name, points)
+ *
+ * Purpose
+ * Sets the regeneration rate modifier for an attribute.
+ * Base value is 1200.
+ *
+ * Parameters
+ * mobile:	Mobile reference to set the modifier on.
+ * skill_name:	Name of the vital to set the regen modifier for.
+ * points:	Modifier (+/-) points to set for the regen rate.
+ *
+ * Return value
+ * Returns 1
+ *
+ */
+function AF_SetVitalRegenRate(mobile, vital_name, rate)
+	if ( !vital_name["Regeneration"] )
+		vital_name := vital_name+"Regeneration";
+	endif
+	
+	SetAttributeBaseValue(mobile, vital_name, rate);
+	RecalcVitals(mobile);
+	
+	return 1;
+endfunction



From austin at berlios.de  Wed Sep 21 01:38:42 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 21 Sep 2005 01:38:42 +0200
Subject: [Poldistro-svn] r202 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509202338.j8KNcgvq009085@sheep.berlios.de>

Author: austin
Date: 2005-09-21 01:38:41 +0200 (Wed, 21 Sep 2005)
New Revision: 202

Modified:
   trunk/096/pkg/systems/attributes/include/attributes.inc
   trunk/096/pkg/systems/attributes/include/regen.inc
   trunk/096/pkg/systems/attributes/include/skills.inc
   trunk/096/pkg/systems/attributes/include/vitals.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/attributes.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-20 23:16:35 UTC (rev 201)
+++ trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-20 23:38:41 UTC (rev 202)
@@ -43,3 +43,32 @@
 	
 	return cfg_elem;
 endfunction
+
+/*
+ * AF_ListAttributesByType(type)
+ *
+ * Purpose
+ * Gets the name of all attributes of a certain type.
+ *
+ * Parameters
+ * Type:	String containing the type of attributes to list.
+ *
+ * Return value
+ * Returns an array
+ *
+ */
+function AF_ListAttributesByType(type)
+	type := Lower(type);
+	
+	var list := array;
+	var cfg := ReadConfigFile(":attributes:attributes");
+	foreach elem_name in ( GetConfigStringKeys(cfg) )
+		var elem_info := cfg[elem_name];
+		if ( Lower(elem_info.AttributeType) == type )
+			list.append(array);
+		endif
+		sleepms(2);
+	endforeach
+	
+	return list;
+endfunction

Modified: trunk/096/pkg/systems/attributes/include/regen.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-20 23:16:35 UTC (rev 201)
+++ trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-20 23:38:41 UTC (rev 202)
@@ -27,7 +27,7 @@
  *
  */
 function AF_SetVitalRegenRate(mobile, vital_name, rate)
-	if ( !vital_name["Regeneration"] )
+	if ( !Lower(vital_name["regeneration"]) )
 		vital_name := vital_name+"Regeneration";
 	endif
 	

Modified: trunk/096/pkg/systems/attributes/include/skills.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-20 23:16:35 UTC (rev 201)
+++ trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-20 23:38:41 UTC (rev 202)
@@ -103,3 +103,21 @@
 function AF_SetSkillMod(mobile, skill_name, points)
 	SetAttributeTemporaryMod(mobile, skill_name, CInt(CDbl(points) * 10.0));
 endfunction
+
+/*
+ * AF_SetSkillScript(attribute_name)
+ *
+ * Purpose
+ * Gets the script that a skill uses.
+ *
+ * Parameters
+ * attribute_name:	Name of the attribute to get the script for.
+ *
+ * Return value
+ * Returns a string.
+ *
+ */
+function GetSkillScript(attribute_name)
+	var cfg := AF_GetAttributeCfgElem(attribute_name);
+	return cfg.Script;
+endfunction

Modified: trunk/096/pkg/systems/attributes/include/vitals.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-20 23:16:35 UTC (rev 201)
+++ trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-20 23:38:41 UTC (rev 202)
@@ -9,8 +9,38 @@
 ===============================================================*/
 
 use uo;
+use os;
+use cfgfile;
 
+
 /*
+ * AF_GetVitalCfgElem(vital)
+ *
+ * Purpose
+ * Retrieves a config elem for an vital in vitals.cfg
+ *
+ * Parameters
+ * attribute:	Name of the vital to get the elem of.
+ *
+ * Return value
+ * Returns a config file elem.
+ *
+ */
+function AF_GetVitalCfgElem(vital)
+	var cfg := ReadConfigFile(":attributes:vitals");
+	if ( cfg.errortext )
+		SysLog("Error::AF_GetVitalCfgElem() - Unable to open vitals.cfg ->"+cfg.errortext);
+	endif
+	
+	var cfg_elem := cfg[vital];
+	if ( cfg_elem.errortext )
+		SysLog("Error::AF_GetVitalsCfgElem() - unable to find cfg elem ["+vital+"] ->"+cfg_elem.errortext);
+	endif
+	
+	return cfg_elem;
+endfunction
+
+/*
  * AF_GetVital(mobile, vital_name)
  *
  * Purpose
@@ -82,3 +112,26 @@
 function AF_SetVital(mobile, vital_name, amount)
 	return SetVital(mobile, vital_name, CInt(CDbl(amount)*100.0));
 endfunction
+
+/*
+ * AF_RefreshVitals(mobile)
+ *
+ * Purpose
+ * Sets all vitals on a mobile to their maximum values.
+ *
+ * Parameters
+ * mobile:	Mobile to refresh.
+ *
+ * Return value
+ * Returns 1
+ *
+ */
+function AF_RefreshVitals(mobile)
+	var vital_cfg := ReadConfigFile(":attributes:vitals");
+	foreach elem_name in (vital_cfg)
+		AF_SetVital(mobile, elem_name, AF_GetVitalMaximumValue(mobile, elem_name));
+		sleepms(2);
+	endforeach
+
+	return 1;
+endfunction



From austin at berlios.de  Wed Sep 21 01:40:32 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 21 Sep 2005 01:40:32 +0200
Subject: [Poldistro-svn] r203 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509202340.j8KNeWEk009346@sheep.berlios.de>

Author: austin
Date: 2005-09-21 01:40:30 +0200 (Wed, 21 Sep 2005)
New Revision: 203

Modified:
   trunk/096/pkg/systems/attributes/include/attributeConstants.inc
   trunk/096/pkg/systems/attributes/include/regen.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/attributeConstants.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributeConstants.inc	2005-09-20 23:38:41 UTC (rev 202)
+++ trunk/096/pkg/systems/attributes/include/attributeConstants.inc	2005-09-20 23:40:30 UTC (rev 203)
@@ -72,133 +72,3 @@
 	ATTRIBUTE_BATTLE_FOCUS              := "BattleFocus",
 	ATTRIBUTE_CHIVALRY                  := "Chivalry"
 endenum
-
-
-/*
- * GetCustomAttributes()
- *
- * Author: Melanius [x90]
- * Last-Edit: Folko
- *
- * Purpose
- * Returns an array with all the custom attribute names.
- *
- * Parameters
- * No parameters
- *
- * Return value
- * Array containing the names of all custom attributes.
- *
- */
-function GetCustomAttributes()
-	return(
-		{
-			ATTRIBUTE_HITS_REGENERATION,
-			ATTRIBUTE_MANA_REGENERATION,
-			ATTRIBUTE_STAMINA_REGENERATION
-		}
-	);
-endfunction
-
-
-/*
- * GetStatAttributes()
- *
- * Author: Melanius [x90]
- * Last-Edit: Folko
- *
- * Purpose
- * Returns an array with the names of all stat attributes.
- *
- * Parameters
- * No parameters
- *
- * Return value
- * Array containing the names of all stat attribuets.
- *
- */
-function GetStatAttributes()
-	return(
-		{
-			ATTRIBUTE_STRENGTH,
-			ATTRIBUTE_DEXTERITY,
-			ATTRIBUTE_INTELLIGENCE
-		}
-	);
-endfunction
-
-
-/*
- * GetSkillAttributes()
- *
- * Author: Melanius [x90]
- * Last-Edit: Folko
- *
- * Purpose
- * Returns an array with the names of all skill attributes.
- *
- * Parameters
- * No parameters
- *
- * Return value
- * Array containing the names of all attributes.
- *
- */
-function GetSkillAttributes()
-	return(
-		{
-			ATTRIBUTE_ALCHEMY,
-			ATTRIBUTE_ANATOMY,
-			ATTRIBUTE_ANIMAL_LORE,
-			ATTRIBUTE_ITEM_IDENTIFICATION,
-			ATTRIBUTE_ARMS_LORE,
-			ATTRIBUTE_PARRYING,
-			ATTRIBUTE_BEGGING,
-			ATTRIBUTE_BLACKSMITHY,
-			ATTRIBUTE_BOWCRAFT_FLETCHING,
-			ATTRIBUTE_PEACEMAKING,
-			ATTRIBUTE_CAMPING,
-			ATTRIBUTE_CARPENTRY,
-			ATTRIBUTE_CARTOGRAPHY,
-			ATTRIBUTE_COOKING,
-			ATTRIBUTE_DETECTING_HIDDEN,
-			ATTRIBUTE_DISCORDANCE,
-			ATTRIBUTE_EVALUATING_INTELLIGENCE,
-			ATTRIBUTE_HEALING,
-			ATTRIBUTE_FISHING,
-			ATTRIBUTE_FORENSIC_EVALUATION,
-			ATTRIBUTE_HERDING,
-			ATTRIBUTE_HIDING,
-			ATTRIBUTE_PROVOCATION,
-			ATTRIBUTE_INSCRIPTION,
-			ATTRIBUTE_LOCKPICKING,
-			ATTRIBUTE_MAGERY,
-			ATTRIBUTE_RESISTING_SPELLS,
-			ATTRIBUTE_TACTICS,
-			ATTRIBUTE_SNOOPING,
-			ATTRIBUTE_MUSICIANSHIP,
-			ATTRIBUTE_POISONING,
-			ATTRIBUTE_ARCHERY,
-			ATTRIBUTE_SPIRIT_SPEAK,
-			ATTRIBUTE_STEALING,
-			ATTRIBUTE_TAILORING,
-			ATTRIBUTE_ANIMAL_TAMING,
-			ATTRIBUTE_TASTE_IDENTIFICATION,
-			ATTRIBUTE_TINKERING,
-			ATTRIBUTE_TRACKING,
-			ATTRIBUTE_VETERINARY,
-			ATTRIBUTE_SWORDSMANSHIP,
-			ATTRIBUTE_MACE_FIGHTING,
-			ATTRIBUTE_FENCING,
-			ATTRIBUTE_WRESTLING,
-			ATTRIBUTE_LUMBERJACKING,
-			ATTRIBUTE_MINING,
-			ATTRIBUTE_MEDITATION,
-			ATTRIBUTE_STEALTH,
-			ATTRIBUTE_REMOVE_TRAP,
-			ATTRIBUTE_NECROMANCY,
-			ATTRIBUTE_BATTLE_FOCUS,
-			ATTRIBUTE_CHIVALRY
-		}
-	);
-endfunction

Modified: trunk/096/pkg/systems/attributes/include/regen.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-20 23:38:41 UTC (rev 202)
+++ trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-20 23:40:30 UTC (rev 203)
@@ -1,6 +1,6 @@
 /*===============================================================
 * Current Version
-* SKILLS.INC - v1.0
+* REGEN.INC - v1.0
 * Updated 9/20/2005 4:09PM
 *
 * -- Revision v1.0 --



From austin at berlios.de  Wed Sep 21 01:42:12 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 21 Sep 2005 01:42:12 +0200
Subject: [Poldistro-svn] r204 - trunk/096/pkg/systems/attributes/hooks
Message-ID: <200509202342.j8KNgCrE009700@sheep.berlios.de>

Author: austin
Date: 2005-09-21 01:42:10 +0200 (Wed, 21 Sep 2005)
New Revision: 204

Modified:
   trunk/096/pkg/systems/attributes/hooks/regenRate.src
Log:


Modified: trunk/096/pkg/systems/attributes/hooks/regenRate.src
===================================================================
--- trunk/096/pkg/systems/attributes/hooks/regenRate.src	2005-09-20 23:40:30 UTC (rev 203)
+++ trunk/096/pkg/systems/attributes/hooks/regenRate.src	2005-09-20 23:42:10 UTC (rev 204)
@@ -24,7 +24,7 @@
 // Hit Point Functions
 // *****
 exported function GetHitsRegenRate(mobile)
-	return 1200;
+	return 1200 + CInt(GetAttribute(mobile, "HitsRegeneration"));
 endfunction
 
 exported function GetHitsMaximumValue(mobile)
@@ -43,7 +43,7 @@
 // Mana Functions
 // *****
 exported function GetManaRegenRate(mobile)
-	return 1200;
+	return 1200 + CInt(GetAttribute(mobile, "ManaRegeneration"));
 endfunction
 
 exported function GetManaMaximumValue(mobile)
@@ -54,7 +54,7 @@
 // Stamina Functions
 // *****
 exported function GetStaminaRegenRate(mobile)
-	return 1200;
+	return 1200 + CInt(GetAttribute(mobile, "StaminaRegeneration"));
 endfunction
 
 exported function GetStaminaMaximumValue(mobile)



From austin at berlios.de  Wed Sep 21 01:44:38 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 21 Sep 2005 01:44:38 +0200
Subject: [Poldistro-svn] r205 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509202344.j8KNicEd011214@sheep.berlios.de>

Author: austin
Date: 2005-09-21 01:44:36 +0200 (Wed, 21 Sep 2005)
New Revision: 205

Modified:
   trunk/096/pkg/systems/attributes/include/vitals.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/vitals.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-20 23:42:10 UTC (rev 204)
+++ trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-20 23:44:36 UTC (rev 205)
@@ -128,7 +128,7 @@
  */
 function AF_RefreshVitals(mobile)
 	var vital_cfg := ReadConfigFile(":attributes:vitals");
-	foreach elem_name in (vital_cfg)
+	foreach elem_name in GetConfigStringKeys(vital_cfg)
 		AF_SetVital(mobile, elem_name, AF_GetVitalMaximumValue(mobile, elem_name));
 		sleepms(2);
 	endforeach



From muaddiblsd at berlios.de  Wed Sep 21 05:39:45 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Wed, 21 Sep 2005 05:39:45 +0200
Subject: [Poldistro-svn] r206 - trunk/096/pkg/systems/attributes
Message-ID: <200509210339.j8L3djJx026280@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-21 05:39:28 +0200 (Wed, 21 Sep 2005)
New Revision: 206

Modified:
   trunk/096/pkg/systems/attributes/skills.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/skills.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/skills.cfg	2005-09-20 23:44:36 UTC (rev 205)
+++ trunk/096/pkg/systems/attributes/skills.cfg	2005-09-21 03:39:28 UTC (rev 206)
@@ -8,8 +8,8 @@
 //
 //  The following can be defined for a Skill:
 //
-//  	Name	    Skill name [will be used to read/write data files]
-//  	SkillId	    0-[max skill]
+//      Name        Skill name [will be used to read/write data files]
+//      SkillId     0-[max skill]
 //      Script      Script to run when skill is clicked in skills window
 //      Delay       Number of seconds skills cannot be used after this one
 //      Unhides     Using this skill unhides user if hidden (default: 1)
@@ -26,672 +26,636 @@
 //      chance is a floating point percentage, from 0.0 to 100.0
 //
 /////////////////////////////////////////////////////////////////////////////
-// 
+//
 // *** NOTICE ***
-// 
-// As of POL 094, this file is only used to start up a skill Script	when a
+//
+// As of POL 094, this file is only used to start up a skill Script     when a
 // client uses one.
 //
 /////////////////////////////////////////////////////////////////////////////
 
 Skill 0
 {
-	Name	       Alchemy
-	SkillId	       0
-   
-    IntAdv         100 1d4+20
-    DexAdv         100 1d1+20
-    default_points 100
-    title          Alchemist
-    DropStat       str
+        Name            Alchemy
+        SkillId         0
+        IntAdv          100 1d4+20
+        DexAdv          100 1d1+20
+        default_points  100
+        title           Alchemist
+        DropStat        str
 }
 
 Skill 1
 {
-	Name	Anatomy
-	SkillId	1
-	Script	:anatomy:anatomy
-  
-    Delay 10
-    IntAdv  100 1d2+10
-    default_points 50
-    title   Healer
-    DropStat       str dex
+        Name            Anatomy
+        SkillId         1
+        Script          :anatomy:anatomy
+        Delay           10
+        IntAdv          100 1d2+10
+        default_points  50
+        title           Healer
+        Unhides         0
+        DropStat        str dex
 }
 
 Skill 2
 {
-	Name	AnimalLore
-	SkillId	2
-	Script	animalLore
- 
-   Delay   10
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Ranger
-    DropStat       str dex
+        Name            AnimalLore
+        SkillId         2
+        Script          :animallore:animalLore
+        Delay           10
+        IntAdv          100 1d4+20
+        default_points  100
+        title           Ranger
+        Unhides         0
+        DropStat        str dex
 }
 
 Skill 3
 {
-	Name	ItemId
-	SkillId	3
-	Script	itemID
- 
-    Delay   10
-    IntAdv  100 1d3+15
-    default_points 50
-    title   Merchant
-    DropStat       str dex
+        Name            ItemId
+        SkillId         3
+        Script          :itemid:itemID
+        Delay           10
+        IntAdv          100 1d3+15
+        default_points  50
+        title           Merchant
+        Unhides         0
+        DropStat        str dex
 }
 
 Skill 4
 {
-	Name	ArmsLore
-	SkillId	4
-	Script	armsLore
- 
-    Delay   10
-    IntAdv  100 1d1+10
-    StrAdv  100 1d2+10
-    default_points 50
-    title   Warrior
-    DropStat       dex
+        Name            ArmsLore
+        SkillId         4
+        Script          :armslore:armsLore
+        Delay           10
+        IntAdv          100 1d1+10
+        StrAdv          100 1d2+10
+        default_points  50
+        title           Warrior
+        Unhides         0
+        DropStat        dex
 }
 
 Skill 5
 {
-	Name	Parry
-	SkillId	5
-  
-    StrAdv  100 1d2+20
-    default_points 100
-    title   Shieldsfighter
-    DropStat       dex int
+        Name            Parry
+        SkillId         5
+        StrAdv          100 1d2+20
+        default_points  100
+        title           Shieldsfighter
+        DropStat        dex int
 }
 
 Skill 6
 {
-	Name	Begging
-	SkillId	6
-	Script	:begging:begging
-	
-  Delay			10
-  IntAdv			100 1d1+20
-  default_points	100
-  title			Beggar
-  Unhides			1
-  DropStat		str dex
+        Name            Begging
+        SkillId         6
+        Script          :begging:begging
+        Delay           10
+        IntAdv          100 1d1+20
+        default_points  100
+        title           Beggar
+        Unhides         1
+        DropStat        str dex
 }
 
 Skill 7
 {
-	Name	Blacksmithy
-	SkillId	7
-	
-    Delay   10
-    StrAdv  100 1d4+20
-    default_points 100
-    title   Smith
-    DropStat       dex int
+        Name            Blacksmithy
+        SkillId         7
+        Delay           10
+        StrAdv          100 1d4+20
+        default_points  100
+        title           Smith
+        DropStat        dex int
 }
 
 Skill 8
 {
-	Name	Bowcraft
-	SkillId	8
-	
-    Delay   15
-    StrAdv  100 1d4+20
-    DexAdv  100 1d3+20
-    default_points 100
-    title   Bowyer
-    Unhides 1
-    DropStat       int
+        Name            Bowcraft
+        SkillId         8
+        Delay           15
+        StrAdv          100 1d4+20
+        DexAdv          100 1d3+20
+        default_points  100
+        title           Bowyer
+        Unhides         1
+        DropStat        int
 }
 
 Skill 9
 {
-	Name	Peacemaking
-	SkillId	9
-	Script	:musicianship:peacemaking
-	
-    IntAdv  100 1d2
-    default_points 50
-    title   Bard
-    Delay   10
-    DropStat       str
+        Name            Peacemaking
+        SkillId         9
+        Script          :musicianship:peacemaking
+        IntAdv          100 1d2
+        default_points  50
+        title           Bard
+        Delay           10
+        Unhides         1
+        DropStat        str
 }
 
 Skill 10
 {
-	Name	Camping
-	SkillId	10
-	
-    Delay   10
-    StrAdv  100 1d2+10
-    IntAdv  100 1d2+10
-    default_points 100
-    title   Ranger
-    Unhides 1
-    DropStat       dex
+        Name            Camping
+        SkillId         10
+        Delay           10
+        StrAdv          100 1d2+10
+        IntAdv          100 1d2+10
+        default_points  100
+        title           Ranger
+        Unhides         1
+        DropStat        dex
 }
 
 Skill 11
 {
-	Name	Carpentry
-	SkillId	11
-	
-    Delay   10
-    StrAdv  100 1d4+25
-    default_points 100
-    title   Carpenter
-    DropStat       dex int
+        Name            Carpentry
+        SkillId         11
+        Delay           10
+        StrAdv          100 1d4+25
+        default_points  100
+        title           Carpenter
+        DropStat        dex int
 }
 
 Skill 12
 {
-	Name	Cartography
-	SkillId	12
-	Script	:cartography:cartography
-		
-    Delay   15
-    IntAdv  100 1d2+10
-    default_points 100
-    title   Cartographer
-    DropStat       str dex
+        Name            Cartography
+        SkillId         12
+        Script          :cartography:cartography
+        Delay           15
+        IntAdv          100 1d2+10
+        default_points  100
+        title           Cartographer
+        Unhides         0
+        DropStat        str dex
 }
 
 Skill 13
 {
-	Name	Cooking
-	SkillId	13
-	
-    Delay   15
-    IntAdv  100 1d2+10
-    default_points 100
-    title   Chef
-    Unhides 1
-    DropStat       str dex
+        Name            Cooking
+        SkillId         13
+        Delay           15
+        IntAdv          100 1d2+10
+        default_points  100
+        title           Chef
+        Unhides         1
+        DropStat        str dex
 }
 
 Skill 14
 {
-	Name	DetectingHidden
-	SkillId	14
-	Script	:detecthidden:detectHidden
-	
-    Delay   10
-    IntAdv  100 1d4+20
-    default_points 50
-    title   Scout
-    DropStat       str dex
+        Name            DetectingHidden
+        SkillId         14
+        Script          :detecthidden:detectHidden
+        Delay           10
+        IntAdv          100 1d4+20
+        default_points  50
+        title           Scout
+        DropStat        str dex
 }
 
 Skill 15
 {
-	Name	Enticement
-	SkillId	15
-	Script	:musicianship:entice
-	
-    Delay   10
-    IntAdv  20 2d4
-    default_points 100
-    DropStat       str
+        Name            Enticement
+        SkillId         15
+        Script          :musicianship:entice
+        Delay           10
+        IntAdv          20 2d4
+        default_points  100
+        DropStat        str
 }
 
 Skill 16
 {
-	Name	EvaluatingIntelligence
-	SkillId	16
-	Script	:evalint:evalInt
-	
-    Delay   10
-    IntAdv  100 1d4+20
-    default_points 50
-    title   Scholar
-    DropStat       str dex
+        Name            EvaluatingIntelligence
+        SkillId         16
+        Script          :evalint:evalInt
+        Delay           10
+        IntAdv          100 1d4+20
+        default_points  50
+        title           Scholar
+        Unhides         0
+        DropStat        str dex
 }
 
 
 Skill 17
 {
-	Name	Healing
-	SkillId	17
-	
-    Delay   10
-    DexAdv  100 1d1+10
-    default_points 100
-    title   Healer
-    Unhides 1
-    DropStat       str int
+        Name            Healing
+        SkillId         17
+        Delay           10
+        DexAdv          100 1d1+10
+        default_points  100
+        title           Healer
+        Unhides         1
+        DropStat        str int
 }
 
 Skill 18
 {
-	Name	Fishing
-	SkillId	18
-	
-    Delay   5
-    DexAdv  100 1d4+20
-    StrAdv  100 1d4+20
-    default_points 100
-    title   Fisherman
-    DropStat       int
+        Name            Fishing
+        SkillId         18
+        Delay           5
+        DexAdv          100 1d4+20
+        StrAdv          100 1d4+20
+        default_points  100
+        title           Fisherman
+        DropStat        int
 }
 
 Skill 19
 {
-	Name	ForensicEvaluation
-	SkillId	19
-	Script	:forensicevaluation:forensic
-	
-    Delay   15
-    IntAdv  100 1d4+20
-    default_points 100
-	
-    title   Detective
-    DropStat       str dex
+        Name            ForensicEvaluation
+        SkillId         19
+        Script          :forensicevaluation:forensic
+        Delay           15
+        IntAdv          100 1d4+20
+        default_points  100
+        title           Detective
+        Unhides         0
+        DropStat        str dex
 }
 
 Skill 20
 {
-	Name	Herding
-	SkillId	20
-	
-    StrAdv  100 1d4+20
-    default_points 100
-    title   Shepherd
-    Unhides 1
-    DropStat       dex int
+        Name            Herding
+        SkillId         20
+        StrAdv          100 1d4+20
+        default_points  100
+        title           Shepherd
+        Unhides         1
+        DropStat        dex int
 }
 
 Skill 21
 {
-	Name	Hiding
-	SkillId	21
-	Script	:hiding:hiding
-	
-    Delay   10
-    DexAdv  100 1d4+20
-    default_points 50
-    title   Rogue
-    DropStat       str int
+        Name            Hiding
+        SkillId         21
+        Script          :hiding:hiding
+        Delay           10
+        DexAdv          100 1d4+20
+        default_points  50
+        title           Rogue
+        Unhides         0
+        DropStat        str int
 }
 
 Skill 22
 {
-	Name	Provocation
-	SkillId	22
-	Script	:musicianship:provocation
-	
-    default_points 100
-    dexadv 100 1d2
-    title   Bard
-    DropStat       str int
+        Name            Provocation
+        SkillId         22
+        Script          :musicianship:provocation
+        default_points  100
+        dexadv          100 1d2
+        title           Bard
+        Unhides         1
+        DropStat        str int
 }
 
 Skill 23
 {
-	Name	Inscription
-	SkillId	23
-	Script	:inscription:inscription
-	
-    Delay   0
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Scribe
-    DropStat       str dex
+        Name            Inscription
+        SkillId         23
+        Script          :inscription:inscription
+        Delay           3
+        IntAdv          100 1d4+20
+        default_points  100
+        title           Scribe
+        Unhides         0
+        DropStat        str dex
 }
 
 Skill 24
 {
-	Name	Lockpicking
-	SkillId	24
-	
-    Delay   15
-    DexAdv  100 1d3+10
-    default_points 100
-    title   Rogue
-    Unhides 0
-    DropStat       str int
+        Name            Lockpicking
+        SkillId         24
+        Delay           15
+        DexAdv          100 1d3+10
+        default_points  100
+        title           Rogue
+        Unhides         0
+        DropStat        str int
 }
 
 Skill 25
 {
-	Name	Magery
-	SkillId	25
-	
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Mage
-    Unhides 1
-    DropStat       str dex
+        Name            Magery
+        SkillId         25
+        IntAdv          100 1d4+20
+        default_points  100
+        title           Mage
+        Unhides         1
+        DropStat        str dex
 }
 
 Skill 26
 {
-	Name	MagicResistance
-	SkillId	26
-	
-    default_points 100
-    title   Mage
-    Unhides 1
-    DropStat       dex
+        Name            MagicResistance
+        SkillId         26
+        IntAdv          100 1d4+20
+        default_points  100
+        title           Mage
+        Unhides         1
+        DropStat        dex
 }
 
 Skill 27
 {
-	Name	Tactics
-	SkillId	27
-	
-    default_points 40
-    title   Warrior
-    DropStat       dex
+        Name            Tactics
+        SkillId         27
+        default_points  40
+        title           Warrior
+        DropStat        dex
 }
 
 Skill 28
 {
-	Name	Snooping
-	SkillId	28
-	
-    Delay 5
-    Unhides 0
-    DexAdv  80 4d6+10
-    default_points 200
-    DropStat       str int
+        Name            Snooping
+        SkillId         28
+        Delay           5
+        Unhides         0
+        DexAdv          80 4d6+10
+        default_points  200
+        DropStat        str int
 }
 
 Skill 29
 {
-	Name	Musicianship
-	SkillId	29
-	
-    Delay   15
-    IntAdv  100 1d2+10
-    DexAdv  100 1d4+20
-    default_points 100
-    title   Bard
-    Unhides 1
-    DropStat       str
+        Name            Musicianship
+        SkillId         29
+        Delay           15
+        IntAdv          100 1d2+10
+        DexAdv          100 1d4+20
+        default_points  100
+        title           Bard
+        Unhides         1
+        DropStat        str
 }
 
 Skill 30
 {
-	Name	Poisoning
-	SkillId	30
-	Script	:poisoning:poisonSkill
-	
-	Delay   10
-	IntAdv  100 1d2+10
-	DexAdv  100 1d4+20
-	default_points 50
-	title   Assassin
-	DropStat       str
+        Name            Poisoning
+        SkillId         30
+        Script          :poisoning:poisonSkill
+        Delay           10
+        IntAdv          100 1d2+10
+        DexAdv          100 1d4+20
+        default_points  50
+        title           Assassin
+        Unhides         0
+        DropStat        str
 }
 
 Skill 31
 {
-	Name	Archery
-	SkillId	31
-	
-    DexAdv  100 1d4+20
-    StrAdv  100 1d2+10
-    title   Archer
-    Unhides 1
-    DropStat       int
+        Name            Archery
+        SkillId         31
+        DexAdv          100 1d4+20
+        StrAdv          100 1d2+10
+        title           Archer
+        Unhides         1
+        DropStat        int
 }
 
 Skill 32
 {
-	Name	SpiritSpeak
-	SkillId	32
-	Script	:spiritspeak:spiritSpeak
-	
-    Delay   10
-    IntAdv  100 1d4+20
-    default_points 50
-    title   Medium
-    DropStat       str dex
+        Name            SpiritSpeak
+        SkillId         32
+        Script          :spiritspeak:spiritSpeak
+        Delay           10
+        IntAdv          100 1d4+20
+        default_points  50
+        title           Medium
+        Unhides         1
+        DropStat        str dex
 }
 
 Skill 33
 {
-	Name	Stealing
-	SkillId	33
-	
-    Delay   15
-    Unhides 0
-    DexAdv  90 3d4+9
-    default_points 200
-    DropStat       str int
+        Name            Stealing
+        SkillId         33
+        Script          :stealing:stealing
+        Delay           15
+        Unhides         0
+        DexAdv          90 3d4+9
+        default_points  200
+        Unhides         1
+        DropStat        str int
 }
 
 Skill 34
 {
-	Name	Tailoring
-	SkillId	34
-	
-    Delay   15
-    DexAdv  100 1d1+10
-    default_points 100
-    title   Tailor
-    Unhides 1
-    DropStat       str int
+        Name            Tailoring
+        SkillId         34
+        Delay           15
+        DexAdv          100 1d1+10
+        default_points  100
+        title           Tailor
+        Unhides         0
+        DropStat        str int
 }
 
 Skill 35
 {
-	Name	AnimalTaming
-	SkillId	35
-	Script	:taming:taming
-	
-    Delay   10
-    StrAdv  100 1d4+20
-    IntAdv  100 1d3+10
-    default_points 50
-    title   Tamer
-    DropStat       dex
+        Name            AnimalTaming
+        SkillId         35
+        Script          :taming:taming
+        Delay           10
+        StrAdv          100 1d4+20
+        IntAdv          100 1d3+10
+        default_points  50
+        title           Tamer
+        Unhides         1
+        DropStat        dex
 }
 
 Skill 36
 {
-	Name	TasteIdentification
-	SkillId	36
-	Script	:tasteid:tasteID
-	
-	Delay			10
-	IntAdv			100 1d4+20
-	default_points	50
-	title			Chef
-	DropStat		str dex
+        Name            TasteIdentification
+        SkillId         36
+        Script          :tasteid:tasteID
+        Delay           10
+        IntAdv          100 1d4+20
+        default_points  50
+        title           Chef
+        Unhides         0
+        DropStat        str dex
 }
 
 Skill 37
 {
-	Name	Tinkering
-	SkillId	37
-	
-    Delay   10
-    StrAdv  100 1d4+20
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Tinker
-    DropStat       dex
+        Name            Tinkering
+        SkillId         37
+        Delay           10
+        StrAdv          100 1d4+20
+        IntAdv          100 1d4+20
+        default_points  100
+        title           Tinker
+        DropStat        dex
 }
 
 Skill 38
 {
-	Name	Tracking
-	SkillId	38
-	Script	:tracking:tracking
-	
-    Delay   10
-    IntAdv  100 1d4+20
-    DexAdv  100 1d2+10
-    default_points 50
-    DropStat       str
+        Name            Tracking
+        SkillId         38
+        Script          :tracking:tracking
+        Delay           10
+        IntAdv          100 1d4+20
+        DexAdv          100 1d2+10
+        default_points  50
+        Unhides         1
+        DropStat        str
 }
 
 Skill 39
 {
-	Name	Veterinary
-	SkillId	39
-	
-    Delay   10
-    IntAdv  100 1d2+10
-    default_points 100
-    title   Healer
-    Unhides 1
-    DropStat       str dex
+        Name            Veterinary
+        SkillId         39
+        Delay           10
+        IntAdv          100 1d2+10
+        default_points  100
+        title           Healer
+        Unhides         1
+        DropStat        str dex
 }
 
 Skill 40
 {
-	Name	Swordsmanship
-	SkillId	40
-	
-    StrAdv  100 1d3+20
-    DexAdv  100 1d3
-    title   Swordsman
-    Unhides 1
-    DropStat       int
+        Name            Swordsmanship
+        SkillId         40
+        StrAdv          100 1d3+20
+        DexAdv          100 1d3
+        title           Swordsman
+        Unhides         1
+        DropStat        int
 }
 
 Skill 41
 {
-	Name	Macefighting
-	SkillId	41
-	
-    StrAdv  100 1d4+30
-    DexAdv  100 1d2
-    title   Armsman
-    Unhides 1
-    DropStat       int
+        Name            Macefighting
+        SkillId         41
+        StrAdv          100 1d4+30
+        DexAdv          100 1d2
+        title           Armsman
+        Unhides         1
+        DropStat        int
 }
 
 Skill 42
 {
-	Name	Fencing
-	SkillId	42
-	
-    StrAdv  100 1d2+10
-    DexAdv  100 1d3+10
-    title   Fencer
-    Unhides 1
-    DropStat       int
+        Name            Fencing
+        SkillId         42
+        StrAdv          100 1d2+10
+        DexAdv          100 1d3+10
+        title           Fencer
+        Unhides         1
+        DropStat        int
 }
 
 Skill 43
 {
-	Name	Wrestling
-	SkillId	43
-	
-    StrAdv  100 1d2+20
-    DexAdv  100 1d4
-    title   Wrestler
-    Unhides 1
-    DropStat       int
+        Name            Wrestling
+        SkillId         43
+        StrAdv          100 1d2+20
+        DexAdv          100 1d4
+        title           Wrestler
+        Unhides         1
+        DropStat        int
 }
 
 Skill 44
 {
-	Name	Lumberjacking
-	SkillId	44
-	
-    Delay   10
-    StrAdv  100 1d4+20
-    default_points 100
-    title   Lumberjack
-    Unhides 1
-    DropStat       dex int
+        Name            Lumberjacking
+        SkillId         44
+        StrAdv          100 1d4+20
+        default_points  100
+        title           Lumberjack
+        Unhides         1
+        DropStat        dex int
 }
 
 Skill 45
 {
-	Name	Mining
-	SkillId	45
-	
-    Delay   10
-    StrAdv  100 1d4+20
-    default_points 100
-    title   Miner
-    Unhides 1
-    DropStat       dex int
+        Name            Mining
+        SkillId         45
+        Delay           10
+        StrAdv          100 1d4+20
+        default_points  100
+        title           Miner
+        Unhides         1
+        DropStat        dex int
 }
 
 Skill 46
 {
-	Name	Meditation
-	SkillId	46
-	Script	:meditation:meditation
-    
-    Delay   10
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Stoic
-    DropStat       str dex
+        Name            Meditation
+        SkillId         46
+        Script          :meditation:meditation
+        Delay           10
+        IntAdv          100 1d4+20
+        default_points  100
+        title           Stoic
+        Unhides         1
+        DropStat        str dex
 }
 
 Skill 47
 {
-	Name	Stealth
-	SkillId	47
-	Script	:stealth:stealth
-	
-    Delay   10
-    Unhides 0
-    DexAdv  100 1d4+20
-    default_points 50
-    title   Rogue
-    DropStat       str int
+        Name            Stealth
+        SkillId         47
+        Script          :stealth:stealth
+        Delay           10
+        Unhides         0
+        DexAdv          100 1d4+20
+        default_points  50
+        title           Rogue
+        DropStat        str int
 }
 
 Skill 48
 {
-	Name	RemoveTrap
-	SkillId	48
-	Script	removeTrap
-		
-    Delay   10
-    DexAdv  100 1d4+20
-    default_points 50
-    title   Rogue
-    DropStat       str int
+        Name            RemoveTrap
+        SkillId         48
+        Script          removeTrap
+        Delay           10
+        DexAdv          100 1d4+20
+        default_points  50
+        title           Rogue
+        DropStat        str int
 }
 
 Skill 49
 {
-	Name	Necromancy
-	SkillId	49
-	
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Necromancer
-    Unhides 1
-    DropStat       str dex
+        Name            Necromancy
+        SkillId         49
+        IntAdv          100 1d4+20
+        default_points  100
+        title           Necromancer
+        DropStat        str dex
 }
 
 Skill 50
 {
-	Name	Focus
-	SkillId	50
-	
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Monk
-    Unhides 1
-    DropStat       str dex
+        Name            Focus
+        SkillId         50
+        IntAdv          100 1d4+20
+        default_points  100
+        title           Monk
+        DropStat        str dex
 }
 
 Skill 51
 {
-	Name	Chivalry
-	SkillId	51
-	
-    IntAdv  100 1d4+20
-    default_points 100
-    title   Paladin
-    Unhides 1
-    DropStat       str dex
+        Name            Chivalry
+        SkillId         51
+        IntAdv          100 1d4+20
+        default_points  100
+        title           Paladin
+        Unhides         1
+        DropStat        str dex
 }
\ No newline at end of file



From muaddiblsd at berlios.de  Wed Sep 21 07:00:35 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Wed, 21 Sep 2005 07:00:35 +0200
Subject: [Poldistro-svn] r207 - in trunk/096/pkg/skills: alchemy alchemy/config anatomy anatomy/config animallore animallore/config armslore armslore/config begging begging/config blacksmithy blacksmithy/config bowcraft bowcraft/config camping camping/config carpentry carpentry/config cartography cartography/config cooking cooking/config detecthidden detecthidden/config evalint evalint/config fishing fishing/config forensicevaluation forensicevaluation/config healing healing/config
Message-ID: <200509210500.j8L50ZW0031680@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-21 07:00:22 +0200 (Wed, 21 Sep 2005)
New Revision: 207

Added:
   trunk/096/pkg/skills/alchemy/config/
   trunk/096/pkg/skills/alchemy/config/icp.cfg
   trunk/096/pkg/skills/anatomy/config/
   trunk/096/pkg/skills/anatomy/config/icp.cfg
   trunk/096/pkg/skills/animallore/config/
   trunk/096/pkg/skills/animallore/config/icp.cfg
   trunk/096/pkg/skills/armslore/config/
   trunk/096/pkg/skills/armslore/config/icp.cfg
   trunk/096/pkg/skills/begging/config/
   trunk/096/pkg/skills/begging/config/icp.cfg
   trunk/096/pkg/skills/blacksmithy/config/
   trunk/096/pkg/skills/blacksmithy/config/icp.cfg
   trunk/096/pkg/skills/bowcraft/config/
   trunk/096/pkg/skills/bowcraft/config/icp.cfg
   trunk/096/pkg/skills/camping/config/
   trunk/096/pkg/skills/camping/config/icp.cfg
   trunk/096/pkg/skills/carpentry/config/
   trunk/096/pkg/skills/carpentry/config/icp.cfg
   trunk/096/pkg/skills/cartography/config/
   trunk/096/pkg/skills/cartography/config/icp.cfg
   trunk/096/pkg/skills/cooking/config/
   trunk/096/pkg/skills/cooking/config/icp.cfg
   trunk/096/pkg/skills/detecthidden/config/
   trunk/096/pkg/skills/detecthidden/config/icp.cfg
   trunk/096/pkg/skills/evalint/config/
   trunk/096/pkg/skills/evalint/config/icp.cfg
   trunk/096/pkg/skills/fishing/config/
   trunk/096/pkg/skills/fishing/config/icp.cfg
   trunk/096/pkg/skills/forensicevaluation/config/
   trunk/096/pkg/skills/forensicevaluation/config/icp.cfg
   trunk/096/pkg/skills/healing/config/
   trunk/096/pkg/skills/healing/config/icp.cfg
Modified:
   trunk/096/pkg/skills/alchemy/pkg.cfg
   trunk/096/pkg/skills/anatomy/pkg.cfg
   trunk/096/pkg/skills/animallore/pkg.cfg
   trunk/096/pkg/skills/armslore/pkg.cfg
   trunk/096/pkg/skills/begging/pkg.cfg
   trunk/096/pkg/skills/blacksmithy/pkg.cfg
   trunk/096/pkg/skills/bowcraft/pkg.cfg
   trunk/096/pkg/skills/camping/pkg.cfg
   trunk/096/pkg/skills/carpentry/pkg.cfg
   trunk/096/pkg/skills/cartography/pkg.cfg
   trunk/096/pkg/skills/cooking/pkg.cfg
   trunk/096/pkg/skills/detecthidden/pkg.cfg
   trunk/096/pkg/skills/evalint/pkg.cfg
   trunk/096/pkg/skills/fishing/pkg.cfg
   trunk/096/pkg/skills/forensicevaluation/pkg.cfg
   trunk/096/pkg/skills/healing/pkg.cfg
Log:
Added /config/icp.cfg for ICP Compliance.
Restructured pkg.cfg for correct spacing in file.

Added: trunk/096/pkg/skills/alchemy/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/alchemy/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/alchemy/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Alchemy
+        Version         1.0
+        Description     Alchemy Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/alchemy/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/alchemy/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/alchemy/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,6 +1,5 @@
-Enabled 1
-Name alchemy
-Maintainer Distro Team
-// Original code by Dream Weaver
-Email pol-distro-support at sourceforge.net
-Version 1.0
\ No newline at end of file
+Enabled         1
+Name            alchemy
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/anatomy/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/anatomy/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/anatomy/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Anatomy
+        Version         1.1
+        Description     Anatomy Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/anatomy/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/anatomy/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/anatomy/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,6 +1,6 @@
-Enabled 1
-Name anatomy
-Maintainer Distro Team
-Email  pol-distro-support at sourceforge.net
-Version 1.1
-Core Required 095
\ No newline at end of file
+Enabled         1
+Name            anatomy
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.1
+CoreRequired    95

Added: trunk/096/pkg/skills/animallore/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/animallore/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/animallore/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Animal Lore
+        Version         1.0
+        Description     Animal Lore Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/animallore/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/animallore/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/animallore/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,5 +1,5 @@
-Enabled 1
-Name animallore
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            animallore
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/armslore/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/armslore/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/armslore/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Arms Lore
+        Version         1.0
+        Description     Arms Lore Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/armslore/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/armslore/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/armslore/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,5 +1,5 @@
-Enabled 1
-Name armslore
-Maintainer Distro Team
-Email  pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            armslore
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/begging/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/begging/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/begging/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Begging
+        Version         0.5
+        Description     Begging Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/begging/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/begging/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/begging/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,8 +1,7 @@
-Name begging
-Version 0.5
-CoreRequired 94
-Enabled 1
+Name            begging
+Version         0.5
+CoreRequired    94
+Enabled         1
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
 
-Maintainer Distro Team
-Email  pol-distro-support at sourceforge.net
-

Added: trunk/096/pkg/skills/blacksmithy/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/blacksmithy/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/blacksmithy/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Blacksmithy
+        Version         1.0
+        Description     Blacksmithy Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/blacksmithy/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/blacksmithy/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/blacksmithy/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,6 +1,6 @@
-Enabled 1
-Name blacksmithy
-Maintainer Distro Team
-Email  pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            blacksmithy
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
 

Added: trunk/096/pkg/skills/bowcraft/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/bowcraft/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/bowcraft/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Bowcraft
+        Version         1.0
+        Description     Bowcraft Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/bowcraft/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/bowcraft/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/bowcraft/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,5 +1,5 @@
-Enabled 1
-Name bowcraft
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            bowcraft
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/camping/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/camping/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/camping/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Camping
+        Version         1.0
+        Description     Camping Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/camping/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/camping/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/camping/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,5 +1,5 @@
-Enabled 1
-Name camping
-Maintainer  Distro Team
-Email  pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            camping
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/carpentry/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/carpentry/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/carpentry/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Carpentry
+        Version         1.0
+        Description     Carpentry Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/carpentry/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/carpentry/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/carpentry/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,5 +1,5 @@
-Enabled 1
-Name carpentry
-Maintainer Distro Team
-Email  pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            carpentry
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/cartography/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/cartography/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/cartography/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Cartography
+        Version         1.0
+        Description     Cartography Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/cartography/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/cartography/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/cartography/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,6 +1,6 @@
-Enabled 1
-Name cartography
-Maintainer  Distro Team
-Email  pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            cartography
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
 

Added: trunk/096/pkg/skills/cooking/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/cooking/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/cooking/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Cooking
+        Version         1.1
+        Description     Cooking Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/cooking/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/cooking/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/cooking/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,5 +1,5 @@
-Enabled 1
-Name cooking
-Maintainer Distro Team
-Email  pol-distro-support at sourceforge.net
-Version 1.1
+Enabled         1
+Name            cooking
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.1

Added: trunk/096/pkg/skills/detecthidden/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/detecthidden/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/detecthidden/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Detect Hidden
+        Version         1.0
+        Description     Detect Hidden Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/detecthidden/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/detecthidden/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/detecthidden/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,6 +1,6 @@
-Enabled 1
-Name detecthidden
-Maintainer Distro Team
-Email  pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            detecthidden
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
 

Added: trunk/096/pkg/skills/evalint/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/evalint/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/evalint/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Evaluating Intelligence
+        Version         1.1
+        Description     Evaluating Intelligence Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/evalint/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/evalint/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/evalint/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,5 +1,5 @@
-Enabled 1
-Name evalint
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.1
+Enabled         1
+Name            evalint
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.1

Added: trunk/096/pkg/skills/fishing/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/fishing/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/fishing/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Fishing
+        Version         1.0
+        Description     Fishing Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/fishing/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/fishing/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/fishing/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,5 +1,5 @@
-Enabled 1
-Name fishing
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            fishing
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
\ No newline at end of file

Added: trunk/096/pkg/skills/forensicevaluation/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/forensicevaluation/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/forensicevaluation/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Forensic Evaluation
+        Version         1.0
+        Description     Forensic Evaluation Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/forensicevaluation/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/forensicevaluation/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/forensicevaluation/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,5 +1,5 @@
-Enabled 1
-Name forensicevaluation
-Maintainer Distro Team
-Email  pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            forensicevaluation
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
\ No newline at end of file

Added: trunk/096/pkg/skills/healing/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/healing/config/icp.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/healing/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Healing
+        Version         1.0
+        Description     Healing Evaluation Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/healing/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/healing/pkg.cfg	2005-09-21 03:39:28 UTC (rev 206)
+++ trunk/096/pkg/skills/healing/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
@@ -1,5 +1,5 @@
-Enabled 1
-Name healing
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            healing
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
\ No newline at end of file



From muaddiblsd at berlios.de  Wed Sep 21 07:28:32 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Wed, 21 Sep 2005 07:28:32 +0200
Subject: [Poldistro-svn] r208 - in trunk/096/pkg/skills: healing/config herding herding/config hiding hiding/config inscription inscription/config itemid itemid/config lockpicking lockpicking/config lumberjacking lumberjacking/config magery magery/config meditation meditation/config mining mining/config musicianship musicianship/config poisoning poisoning/config removetrap removetrap/config spiritspeak spiritspeak/config stealing stealing/config stealth stealth/config tailoring tailoring/config taming taming/config tasteid tasteid/config tinkering tinkering/config tracking tracking/config veterinary veterinary/config
Message-ID: <200509210528.j8L5SWj6013761@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-21 07:28:09 +0200 (Wed, 21 Sep 2005)
New Revision: 208

Added:
   trunk/096/pkg/skills/herding/config/
   trunk/096/pkg/skills/herding/config/icp.cfg
   trunk/096/pkg/skills/hiding/config/
   trunk/096/pkg/skills/hiding/config/icp.cfg
   trunk/096/pkg/skills/inscription/config/
   trunk/096/pkg/skills/inscription/config/icp.cfg
   trunk/096/pkg/skills/itemid/config/
   trunk/096/pkg/skills/itemid/config/icp.cfg
   trunk/096/pkg/skills/lockpicking/config/
   trunk/096/pkg/skills/lockpicking/config/icp.cfg
   trunk/096/pkg/skills/lumberjacking/config/
   trunk/096/pkg/skills/lumberjacking/config/icp.cfg
   trunk/096/pkg/skills/magery/config/
   trunk/096/pkg/skills/magery/config/icp.cfg
   trunk/096/pkg/skills/meditation/config/
   trunk/096/pkg/skills/meditation/config/icp.cfg
   trunk/096/pkg/skills/mining/config/
   trunk/096/pkg/skills/mining/config/icp.cfg
   trunk/096/pkg/skills/musicianship/config/
   trunk/096/pkg/skills/musicianship/config/icp.cfg
   trunk/096/pkg/skills/poisoning/config/
   trunk/096/pkg/skills/poisoning/config/icp.cfg
   trunk/096/pkg/skills/removetrap/config/
   trunk/096/pkg/skills/removetrap/config/icp.cfg
   trunk/096/pkg/skills/spiritspeak/config/
   trunk/096/pkg/skills/spiritspeak/config/icp.cfg
   trunk/096/pkg/skills/stealing/config/
   trunk/096/pkg/skills/stealing/config/icp.cfg
   trunk/096/pkg/skills/stealing/stealing.src
   trunk/096/pkg/skills/stealth/config/
   trunk/096/pkg/skills/stealth/config/icp.cfg
   trunk/096/pkg/skills/tailoring/config/
   trunk/096/pkg/skills/tailoring/config/icp.cfg
   trunk/096/pkg/skills/taming/config/
   trunk/096/pkg/skills/taming/config/icp.cfg
   trunk/096/pkg/skills/tasteid/config/
   trunk/096/pkg/skills/tasteid/config/icp.cfg
   trunk/096/pkg/skills/tinkering/config/
   trunk/096/pkg/skills/tinkering/config/icp.cfg
   trunk/096/pkg/skills/tracking/config/
   trunk/096/pkg/skills/tracking/config/icp.cfg
   trunk/096/pkg/skills/veterinary/config/
   trunk/096/pkg/skills/veterinary/config/icp.cfg
Modified:
   trunk/096/pkg/skills/healing/config/icp.cfg
   trunk/096/pkg/skills/herding/pkg.cfg
   trunk/096/pkg/skills/hiding/pkg.cfg
   trunk/096/pkg/skills/inscription/pkg.cfg
   trunk/096/pkg/skills/itemid/pkg.cfg
   trunk/096/pkg/skills/lockpicking/pkg.cfg
   trunk/096/pkg/skills/lumberjacking/pkg.cfg
   trunk/096/pkg/skills/magery/pkg.cfg
   trunk/096/pkg/skills/meditation/pkg.cfg
   trunk/096/pkg/skills/mining/pkg.cfg
   trunk/096/pkg/skills/musicianship/pkg.cfg
   trunk/096/pkg/skills/poisoning/pkg.cfg
   trunk/096/pkg/skills/removetrap/pkg.cfg
   trunk/096/pkg/skills/spiritspeak/pkg.cfg
   trunk/096/pkg/skills/stealing/pkg.cfg
   trunk/096/pkg/skills/stealth/pkg.cfg
   trunk/096/pkg/skills/tailoring/pkg.cfg
   trunk/096/pkg/skills/taming/pkg.cfg
   trunk/096/pkg/skills/tasteid/pkg.cfg
   trunk/096/pkg/skills/tinkering/pkg.cfg
   trunk/096/pkg/skills/tracking/pkg.cfg
   trunk/096/pkg/skills/veterinary/pkg.cfg
Log:
Added /config/icp.cfg for ICP Compliance.
Restructured pkg.cfg for correct spacing in file.

Modified: trunk/096/pkg/skills/healing/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/healing/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/healing/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -2,7 +2,7 @@
 {
         Name            Healing
         Version         1.0
-        Description     Healing Evaluation Skill
+        Description     Healing Skill
 
         Creator         Distro Team
         C_Email         pol-distro-support at sourceforge.net

Added: trunk/096/pkg/skills/herding/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/herding/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/herding/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Herding
+        Version         1.0
+        Description     Herding Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/herding/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/herding/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/herding/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,5 +1,5 @@
-Enabled 1
-Name herding
-Maintainer Distro Team
-E-Mail pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            herding
+Maintainer      Distro Team
+E-Mail          pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/hiding/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/hiding/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/hiding/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Hiding
+        Version         1.0
+        Description     Hiding Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/hiding/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/hiding/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/hiding/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,5 +1,5 @@
-Enabled 1
-Name hiding
-Maintainer Distro Team
-Email  pol-distro-support at sourceforge.net
-Version 1.0
\ No newline at end of file
+Enabled         1
+Name            hiding
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
\ No newline at end of file

Added: trunk/096/pkg/skills/inscription/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/inscription/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/inscription/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Inscription
+        Version         1.1
+        Description     Inscription Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/inscription/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/inscription/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/inscription/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,6 +1,6 @@
-Enabled     1
-Name        inscription
-Requires    blacksmithy
-Maintainer  Distro Team
-Email  pol-distro-support at sourceforge.net
-Version 1.1
+Enabled         1
+Name            inscription
+Requires        blacksmithy
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.1

Added: trunk/096/pkg/skills/itemid/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/itemid/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/itemid/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Item ID
+        Version         1.0
+        Description     Item ID Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/itemid/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/itemid/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/itemid/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,5 +1,5 @@
-Enabled 1
-Name itemid
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            itemid
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/lockpicking/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/lockpicking/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/lockpicking/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Lockpicking
+        Version         1.0
+        Description     Lockpicking Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/lockpicking/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/lockpicking/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/lockpicking/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,6 +1,6 @@
-Enabled 1
-Name lockpicking
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            lockpicking
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
 

Added: trunk/096/pkg/skills/lumberjacking/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/lumberjacking/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/lumberjacking/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Lumberjacking
+        Version         1.0
+        Description     Lumberjacking Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/lumberjacking/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/lumberjacking/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/lumberjacking/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,5 +1,5 @@
-Enabled 1
-Name lumberjacking
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
\ No newline at end of file
+Enabled         1
+Name            lumberjacking
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
\ No newline at end of file

Added: trunk/096/pkg/skills/magery/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/magery/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/magery/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Magery
+        Version         1.0
+        Description     Magery Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/magery/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/magery/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/magery/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,5 +1,5 @@
-Enabled 1
-Name magery
-maintainer Distro Team
-email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            magery
+maintainer      Distro Team
+email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/meditation/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/meditation/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/meditation/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Meditation
+        Version         1.0
+        Description     Meditation Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/meditation/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/meditation/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/meditation/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,5 +1,5 @@
-Enabled 1
-Name meditation
-Version 1.0
-Maintainer  Distro Team
-Email  pol-distro-support at sourceforge.net
\ No newline at end of file
+Enabled         1
+Name            meditation
+Version         1.0
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
\ No newline at end of file

Added: trunk/096/pkg/skills/mining/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/mining/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/mining/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Mining
+        Version         1.0
+        Description     Mining Skill and Ore Core
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/mining/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/mining/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/mining/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,6 +1,6 @@
-Enabled 1
-Name mining
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            mining
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
 

Added: trunk/096/pkg/skills/musicianship/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/musicianship/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/musicianship/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Musicianship
+        Version         1.0
+        Description     Musicianship, Provocation, Discordance, and Peacemaking Skills
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/musicianship/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/musicianship/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/musicianship/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,6 +1,6 @@
-Enabled 1
-Name musicianship
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            musicianship
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
 

Added: trunk/096/pkg/skills/poisoning/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/poisoning/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/poisoning/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Poisoning
+        Version         1.0
+        Description     Poisoning Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/poisoning/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/poisoning/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/poisoning/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,5 +1,5 @@
-Enabled 1
-Name poisoning
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            poisoning
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/removetrap/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/removetrap/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/removetrap/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Remove Trap
+        Version         1.0
+        Description     Remove Trap Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/removetrap/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/removetrap/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/removetrap/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,6 +1,6 @@
-Enabled 1
-Name removetrap
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            removetrap
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
 

Added: trunk/096/pkg/skills/spiritspeak/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/spiritspeak/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/spiritspeak/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Spirit Speak
+        Version         1.0
+        Description     Spirit Speak Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/spiritspeak/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/spiritspeak/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/spiritspeak/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,5 +1,5 @@
-Enabled 1
-Name spiritspeak
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            spiritspeak
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/stealing/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/stealing/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/stealing/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Stealing
+        Version         1.0
+        Description     Stealing Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/stealing/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/stealing/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/stealing/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,5 +1,5 @@
-Enabled 1
-Name stealing
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 0.0
+Enabled         1
+Name            stealing
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/stealing/stealing.src
===================================================================
--- trunk/096/pkg/skills/stealing/stealing.src	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/stealing/stealing.src	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,8 @@
+use uo;
+
+program skill_stealing(who)
+
+        SendSysMessage(who, "That skill is not implemented.");
+        return;
+        
+endprogram

Added: trunk/096/pkg/skills/stealth/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/stealth/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/stealth/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Stealth
+        Version         1.0
+        Description     Stealth Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/stealth/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/stealth/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/stealth/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,5 +1,5 @@
-Enabled 1
-Name stealth
-Maintainer Distro Team
-Email  pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            stealth
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/tailoring/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/tailoring/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/tailoring/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Tailoring
+        Version         1.0
+        Description     Tailoring Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/tailoring/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/tailoring/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/tailoring/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,6 +1,6 @@
-Enabled 1
-Name tailoring
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            tailoring
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
 

Added: trunk/096/pkg/skills/taming/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/taming/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/taming/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Taming
+        Version         1.0
+        Description     Taming Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/taming/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/taming/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/taming/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,5 +1,5 @@
-Enabled 1
-Name taming
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            taming
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/tasteid/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/tasteid/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/tasteid/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Taste ID
+        Version         1.0
+        Description     Taste ID Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/tasteid/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/tasteid/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/tasteid/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,5 +1,5 @@
-Enabled 1
-Name tasteid
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            tasteid
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/tinkering/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/tinkering/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/tinkering/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Tinkering
+        Version         1.0
+        Description     Tinkering Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/tinkering/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/tinkering/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/tinkering/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,5 +1,5 @@
-Enabled 1
-Name tinkering
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            tinkering
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/tracking/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/tracking/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/tracking/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Tracking
+        Version         1.0
+        Description     Tracking Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/tracking/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/tracking/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/tracking/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,5 +1,5 @@
-Enabled 1
-Name tracking
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            tracking
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0

Added: trunk/096/pkg/skills/veterinary/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/veterinary/config/icp.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/veterinary/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Veterinary
+        Version         1.0
+        Description     Veterinary Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/skills/veterinary/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/veterinary/pkg.cfg	2005-09-21 05:00:22 UTC (rev 207)
+++ trunk/096/pkg/skills/veterinary/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
@@ -1,5 +1,5 @@
-Enabled 1
-Name veterinary
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled         1
+Name            veterinary
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0



From muaddiblsd at berlios.de  Wed Sep 21 08:35:15 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Wed, 21 Sep 2005 08:35:15 +0200
Subject: [Poldistro-svn] r209 - in trunk/096/pkg/items: bountyboard bountyboard/config bulletinboard food
Message-ID: <200509210635.j8L6ZFNe018985@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-21 08:35:07 +0200 (Wed, 21 Sep 2005)
New Revision: 209

Added:
   trunk/096/pkg/items/bountyboard/config/icp.cfg
Removed:
   trunk/096/pkg/items/bulletinboard/icp.cfg
Modified:
   trunk/096/pkg/items/bountyboard/pkg.cfg
   trunk/096/pkg/items/bulletinboard/pkg.cfg
   trunk/096/pkg/items/food/food.cfg
Log:
Added /config/icp.cfg for ICP Compliance.
Restructured pkg.cfg for correct spacing in file.

Added: trunk/096/pkg/items/bountyboard/config/icp.cfg
===================================================================
--- trunk/096/pkg/items/bountyboard/config/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
+++ trunk/096/pkg/items/bountyboard/config/icp.cfg	2005-09-21 06:35:07 UTC (rev 209)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Bounty Board
+        Version         1.0
+        Description     Bounty system based on the older OSI system. Upon death can place bounties on the players who murdered you. The board package will show who has what bounties, and handles other aspects of this system.
+
+        Creator         Bishop Ebonhand
+        C_Email         bishop_ebonhand at cfl.rr.com
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/items/bountyboard/pkg.cfg
===================================================================
--- trunk/096/pkg/items/bountyboard/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
+++ trunk/096/pkg/items/bountyboard/pkg.cfg	2005-09-21 06:35:07 UTC (rev 209)
@@ -1,6 +1,6 @@
-Enabled 1
-Name 	bountyboard
-Creator Bishop Ebonhand
-Email	bishop_ebonhand at cfl.rr.com
-Version	0.1
-CoreRequired	94
\ No newline at end of file
+Enabled         1
+Name            bountyboard
+Creator         Bishop Ebonhand
+Email           bishop_ebonhand at cfl.rr.com
+Version         0.1
+CoreRequired    94
\ No newline at end of file

Deleted: trunk/096/pkg/items/bulletinboard/icp.cfg
===================================================================
--- trunk/096/pkg/items/bulletinboard/icp.cfg	2005-09-21 05:28:09 UTC (rev 208)
+++ trunk/096/pkg/items/bulletinboard/icp.cfg	2005-09-21 06:35:07 UTC (rev 209)
@@ -1,16 +0,0 @@
-ICP Register
-{
-	Name		Bulletin Boards
-	Version		1.0
-	Description	Scripts and item definitions for bulletin boards
-	
-	Creator		Austin
-	C_Email		Austin at tsse.net
-	
-	Maintainer	
-	M_Email	
-	
-	//Script	cmdlevel path
-	
-	//TextCmd	cmdlevel path	
-}

Modified: trunk/096/pkg/items/bulletinboard/pkg.cfg
===================================================================
--- trunk/096/pkg/items/bulletinboard/pkg.cfg	2005-09-21 05:28:09 UTC (rev 208)
+++ trunk/096/pkg/items/bulletinboard/pkg.cfg	2005-09-21 06:35:07 UTC (rev 209)
@@ -1,8 +1,6 @@
-Enabled 1
-Name 	bulletinboard
-
-Creator	Austin Heilman
-Email	Austin at tsse.net
-
-Version	1.0
-CoreRequired	92
\ No newline at end of file
+Enabled         1
+Name            bulletinboard
+Creator         Austin Heilman
+Email           Austin at tsse.net
+Version         1.0
+CoreRequired    92
\ No newline at end of file

Modified: trunk/096/pkg/items/food/food.cfg
===================================================================
--- trunk/096/pkg/items/food/food.cfg	2005-09-21 05:28:09 UTC (rev 208)
+++ trunk/096/pkg/items/food/food.cfg	2005-09-21 06:35:07 UTC (rev 209)
@@ -1,153 +1,217 @@
 food veggie
 {
-food 0x09d0	
-food 0x09d1	
-food 0x09d2	
-food 0x0c5c	
-food 0x0c5d	
-food 0x0c64	
-food 0x0c65
-food 0x0c66	
-food 0x0c67	
-food 0x0c6a	
-food 0x0c6b	
-food 0x0c6c	
-food 0x0c6d
-food 0x0c6e
-food 0x0c70
-food 0x0c71
-food 0x0c72
-food 0x0c73
-food 0x0c74
-food 0x0c75
-food 0x0c77
-food 0x0c78
-food 0x0c79
-food 0x0c7a
-food 0x0c7b
-food 0x0c7c
-food 0x0c7f
-food 0x0c80
-food 0x0c81
-food 0x0c82
-food 0x0d39
-food 0x0d3a
-food 0x0f36
-food 0x100c
-food 0x100d
-food 0x171d
-food 0x171e
-food 0x171f
-food 0x1720
-food 0x1721
-food 0x1722
-food 0x1723
-food 0x1724
-food 0x1725
-food 0x1726
-food 0x1727
-food 0x1728
-food 0x1729
-food 0x172a
-food 0x172b
-food 0x172c
-food 0x172d
-food 0x1a92
-food 0x1a93
-food 0x1a94
-food 0x1a95
-food 0x1a96
-food 0x1ebd
-food 0x1ebe
-food 0x1ebf
+  food 0x09d0
+  food 0x09d1
+  food 0x09d2
+  food 0x0c5c
+  food 0x0c5d
+  food 0x0c64
+  food 0x0c65
+  food 0x0c66
+  food 0x0c67
+  food 0x0c6a
+  food 0x0c6b
+  food 0x0c6c
+  food 0x0c6d
+  food 0x0c6e
+  food 0x0c70
+  food 0x0c71
+  food 0x0c72
+  food 0x0c73
+  food 0x0c74
+  food 0x0c75
+  food 0x0c77
+  food 0x0c78
+  food 0x0c79
+  food 0x0c7a
+  food 0x0c7b
+  food 0x0c7c
+  food 0x0c7f
+  food 0x0c80
+  food 0x0c81
+  food 0x0c82
+  food 0x0d39
+  food 0x0d3a
+  food 0x0f36
+  food 0x100c
+  food 0x100d
+  food 0x171d
+  food 0x171e
+  food 0x171f
+  food 0x1720
+  food 0x1721
+  food 0x1722
+  food 0x1723
+  food 0x1724
+  food 0x1725
+  food 0x1726
+  food 0x1727
+  food 0x1728
+  food 0x1729
+  food 0x172a
+  food 0x172b
+  food 0x172c
+  food 0x172d
+  food 0x1a92
+  food 0x1a93
+  food 0x1a94
+  food 0x1a95
+  food 0x1a96
+  food 0x1ebd
+  food 0x1ebe
+  food 0x1ebf
 }
 
 food meat
 {
-food 0x9f1
-food 0x9b9
-food 0x09cc
-food 0x09cd
-food 0x09ce
-food 0x09cf
-food 0x0dd6
-food 0x0dd7
-food 0x0dd8
-food 0x0dd9
-food 9x9c9
+  food 0x9f1
+  food 0x9b9
+  food 0x09cc
+  food 0x09cd
+  food 0x09ce
+  food 0x09cf
+  food 0x0dd6
+  food 0x0dd7
+  food 0x0dd8
+  food 0x0dd9
+  food 9x9c9
 }
 
+food grain
+{
+  food 0x1ebd
+  food 0xc56
+  food 0xc57
+  food 0xc58
+  food 0xc5a
+  food 0xc5b
+}
+
+food metal
+{
+  food 0x6300
+  food 0x6301
+  food 0x6302
+  food 0x6303
+  food 0x6304
+  food 0x6305
+  food 0x6306
+  food 0x6307
+  food 0x6308
+}
+
+food fish
+{
+  food 0x97a
+  food 0x97b
+  food 0x9cc
+  food 0x9cd
+  food 0x9ce
+  food 0x9cf
+  food 0xdd6
+  food 0xdd7
+  food 0xdd8
+  food 0xdd9
+}
+
 food all
 {
-food 0x09d0	
-food 0x09d1	
-food 0x09d2	
-food 0x0c5c	
-food 0x0c5d	
-food 0x0c64	
-food 0x0c65
-food 0x0c66	
-food 0x0c67	
-food 0x0c6a	
-food 0x0c6b	
-food 0x0c6c	
-food 0x0c6d
-food 0x0c6e
-food 0x0c70
-food 0x0c71
-food 0x0c72
-food 0x0c73
-food 0x0c74
-food 0x0c75
-food 0x0c77
-food 0x0c78
-food 0x0c79
-food 0x0c7a
-food 0x0c7b
-food 0x0c7c
-food 0x0c7f
-food 0x0c80
-food 0x0c81
-food 0x0c82
-food 0x0d39
-food 0x0d3a
-food 0x0f36
-food 0x100c
-food 0x100d
-food 0x171d
-food 0x171e
-food 0x171f
-food 0x1720
-food 0x1721
-food 0x1722
-food 0x1723
-food 0x1724
-food 0x1725
-food 0x1726
-food 0x1727
-food 0x1728
-food 0x1729
-food 0x172a
-food 0x172b
-food 0x172c
-food 0x172d
-food 0x1a92
-food 0x1a93
-food 0x1a94
-food 0x1a95
-food 0x1a96
-food 0x1ebd
-food 0x1ebe
-food 0x1ebf
-food 0x9f1
-food 0x9b9
-food 0x09cc
-food 0x09cd
-food 0x09ce
-food 0x09cf
-food 0x0dd6
-food 0x0dd7
-food 0x0dd8
-food 0x0dd9
-food 9x9c9
+  food 0x09d0
+  food 0x09d1
+  food 0x09d2
+  food 0x0c5c
+  food 0x0c5d
+  food 0x0c64
+  food 0x0c65
+  food 0x0c66
+  food 0x0c67
+  food 0x0c6a
+  food 0x0c6b
+  food 0x0c6c
+  food 0x0c6d
+  food 0x0c6e
+  food 0x0c70
+  food 0x0c71
+  food 0x0c72
+  food 0x0c73
+  food 0x0c74
+  food 0x0c75
+  food 0x0c77
+  food 0x0c78
+  food 0x0c79
+  food 0x0c7a
+  food 0x0c7b
+  food 0x0c7c
+  food 0x0c7f
+  food 0x0c80
+  food 0x0c81
+  food 0x0c82
+  food 0x0d39
+  food 0x0d3a
+  food 0x0f36
+  food 0x100c
+  food 0x100d
+  food 0x171d
+  food 0x171e
+  food 0x171f
+  food 0x1720
+  food 0x1721
+  food 0x1722
+  food 0x1723
+  food 0x1724
+  food 0x1725
+  food 0x1726
+  food 0x1727
+  food 0x1728
+  food 0x1729
+  food 0x172a
+  food 0x172b
+  food 0x172c
+  food 0x172d
+  food 0x1a92
+  food 0x1a93
+  food 0x1a94
+  food 0x1a95
+  food 0x1a96
+  food 0x1ebd
+  food 0x1ebe
+  food 0x1ebf
+  food 0x9f1
+  food 0x9b9
+  food 0x09cc
+  food 0x09cd
+  food 0x09ce
+  food 0x09cf
+  food 0x0dd6
+  food 0x0dd7
+  food 0x0dd8
+  food 0x0dd9
+  food 9x9c9
+  food 0x1ebd
+  food 0xc56
+  food 0xc57
+  food 0xc58
+  food 0xc5a
+  food 0xc5b
+  food 0x6300
+  food 0x6301
+  food 0x6302
+  food 0x6303
+  food 0x6304
+  food 0x6305
+  food 0x6306
+  food 0x6307
+  food 0x6308
+  food 0x97a
+  food 0x97b
+  food 0x9cc
+  food 0x9cd
+  food 0x9ce
+  food 0x9cf
+  food 0xdd6
+  food 0xdd7
+  food 0xdd8
+  food 0xdd9
 }
+
+



From muaddiblsd at berlios.de  Wed Sep 21 08:36:27 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Wed, 21 Sep 2005 08:36:27 +0200
Subject: [Poldistro-svn] r210 - in trunk/096/pkg: config/config expansions/aos expansions/aos/config expansions/aos/skills/chivalry expansions/aos/skills/chivalry/config expansions/aos/skills/focus expansions/aos/skills/focus/config expansions/aos/skills/necromancy expansions/aos/skills/necromancy/config expansions/lbr expansions/lbr/config expansions/uor expansions/uor/config
Message-ID: <200509210636.j8L6aRKF019352@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-21 08:36:17 +0200 (Wed, 21 Sep 2005)
New Revision: 210

Added:
   trunk/096/pkg/config/config/icp.cfg
   trunk/096/pkg/expansions/aos/config/
   trunk/096/pkg/expansions/aos/config/icp.cfg
   trunk/096/pkg/expansions/aos/skills/chivalry/config/
   trunk/096/pkg/expansions/aos/skills/chivalry/config/icp.cfg
   trunk/096/pkg/expansions/aos/skills/focus/config/
   trunk/096/pkg/expansions/aos/skills/focus/config/icp.cfg
   trunk/096/pkg/expansions/aos/skills/necromancy/config/
   trunk/096/pkg/expansions/aos/skills/necromancy/config/icp.cfg
   trunk/096/pkg/expansions/lbr/config/
   trunk/096/pkg/expansions/lbr/config/icp.cfg
   trunk/096/pkg/expansions/uor/config/
   trunk/096/pkg/expansions/uor/config/icp.cfg
Modified:
   trunk/096/pkg/expansions/aos/pkg.cfg
   trunk/096/pkg/expansions/aos/skills/chivalry/pkg.cfg
   trunk/096/pkg/expansions/aos/skills/focus/pkg.cfg
   trunk/096/pkg/expansions/aos/skills/necromancy/pkg.cfg
   trunk/096/pkg/expansions/lbr/pkg.cfg
   trunk/096/pkg/expansions/uor/pkg.cfg
Log:
Added /config/icp.cfg for ICP Compliance.
Restructured pkg.cfg for correct spacing in file.

Added: trunk/096/pkg/config/config/icp.cfg
===================================================================
--- trunk/096/pkg/config/config/icp.cfg	2005-09-21 06:35:07 UTC (rev 209)
+++ trunk/096/pkg/config/config/icp.cfg	2005-09-21 06:36:17 UTC (rev 210)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Shard Config
+        Version         1.0
+        Description     Configures various shard behaviours such as Shard Name, logout timers, etc.
+
+        Creator         Hesinde-Team
+        C_Email         hesinde at elitecoder.net
+
+        Maintainer      Hesinde-Team
+        M_Email         hesinde at elitecoder.net
+}

Added: trunk/096/pkg/expansions/aos/config/icp.cfg
===================================================================
--- trunk/096/pkg/expansions/aos/config/icp.cfg	2005-09-21 06:35:07 UTC (rev 209)
+++ trunk/096/pkg/expansions/aos/config/icp.cfg	2005-09-21 06:36:17 UTC (rev 210)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            AOS Subsection
+        Version         1.0
+        Description     Package section for the files pertaining to AOS specific versions of scripts.
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/expansions/aos/pkg.cfg
===================================================================
--- trunk/096/pkg/expansions/aos/pkg.cfg	2005-09-21 06:35:07 UTC (rev 209)
+++ trunk/096/pkg/expansions/aos/pkg.cfg	2005-09-21 06:36:17 UTC (rev 210)
@@ -1,8 +1,8 @@
-Enabled 1
-Name AOS
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
-CoreRequired 96
-Conflicts uor
-Conflicts lbr
\ No newline at end of file
+Enabled         1
+Name            AOS
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
+CoreRequired    96
+Conflicts       uor
+Conflicts       lbr
\ No newline at end of file

Added: trunk/096/pkg/expansions/aos/skills/chivalry/config/icp.cfg
===================================================================
--- trunk/096/pkg/expansions/aos/skills/chivalry/config/icp.cfg	2005-09-21 06:35:07 UTC (rev 209)
+++ trunk/096/pkg/expansions/aos/skills/chivalry/config/icp.cfg	2005-09-21 06:36:17 UTC (rev 210)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Chivalry
+        Version         1.0
+        Description     Chivalry Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/expansions/aos/skills/chivalry/pkg.cfg
===================================================================
--- trunk/096/pkg/expansions/aos/skills/chivalry/pkg.cfg	2005-09-21 06:35:07 UTC (rev 209)
+++ trunk/096/pkg/expansions/aos/skills/chivalry/pkg.cfg	2005-09-21 06:36:17 UTC (rev 210)
@@ -1,6 +1,6 @@
-Enabled 1
-Name Chivalry
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
-CoreRequired 96
\ No newline at end of file
+Enabled         1
+Name            chivalry
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
+CoreRequired    96
\ No newline at end of file

Added: trunk/096/pkg/expansions/aos/skills/focus/config/icp.cfg
===================================================================
--- trunk/096/pkg/expansions/aos/skills/focus/config/icp.cfg	2005-09-21 06:35:07 UTC (rev 209)
+++ trunk/096/pkg/expansions/aos/skills/focus/config/icp.cfg	2005-09-21 06:36:17 UTC (rev 210)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Focus
+        Version         1.0
+        Description     Focus Skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/expansions/aos/skills/focus/pkg.cfg
===================================================================
--- trunk/096/pkg/expansions/aos/skills/focus/pkg.cfg	2005-09-21 06:35:07 UTC (rev 209)
+++ trunk/096/pkg/expansions/aos/skills/focus/pkg.cfg	2005-09-21 06:36:17 UTC (rev 210)
@@ -1,6 +1,6 @@
-Enabled 1
-Name Focus
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
-CoreRequired 96
\ No newline at end of file
+Enabled         1
+Name            focus
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
+CoreRequired    96
\ No newline at end of file

Added: trunk/096/pkg/expansions/aos/skills/necromancy/config/icp.cfg
===================================================================
--- trunk/096/pkg/expansions/aos/skills/necromancy/config/icp.cfg	2005-09-21 06:35:07 UTC (rev 209)
+++ trunk/096/pkg/expansions/aos/skills/necromancy/config/icp.cfg	2005-09-21 06:36:17 UTC (rev 210)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Necromancy
+        Version         1.0
+        Description     Necromancy skill
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/expansions/aos/skills/necromancy/pkg.cfg
===================================================================
--- trunk/096/pkg/expansions/aos/skills/necromancy/pkg.cfg	2005-09-21 06:35:07 UTC (rev 209)
+++ trunk/096/pkg/expansions/aos/skills/necromancy/pkg.cfg	2005-09-21 06:36:17 UTC (rev 210)
@@ -1,6 +1,6 @@
-Enabled 1
-Name necromancy
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
-CoreRequired 96
\ No newline at end of file
+Enabled         1
+Name            necromancy
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
+CoreRequired    96
\ No newline at end of file

Added: trunk/096/pkg/expansions/lbr/config/icp.cfg
===================================================================
--- trunk/096/pkg/expansions/lbr/config/icp.cfg	2005-09-21 06:35:07 UTC (rev 209)
+++ trunk/096/pkg/expansions/lbr/config/icp.cfg	2005-09-21 06:36:17 UTC (rev 210)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            LBR Subsection
+        Version         1.0
+        Description     Package section for the files pertaining to LBR specific versions of scripts.
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/expansions/lbr/pkg.cfg
===================================================================
--- trunk/096/pkg/expansions/lbr/pkg.cfg	2005-09-21 06:35:07 UTC (rev 209)
+++ trunk/096/pkg/expansions/lbr/pkg.cfg	2005-09-21 06:36:17 UTC (rev 210)
@@ -1,8 +1,8 @@
-Enabled 0
-Name lbr
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
-CoreRequired 96
-Conflicts uor
-Conflicts aos
+Enabled         0
+Name            lbr
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
+CoreRequired    96
+Conflicts       uor
+Conflicts       aos

Added: trunk/096/pkg/expansions/uor/config/icp.cfg
===================================================================
--- trunk/096/pkg/expansions/uor/config/icp.cfg	2005-09-21 06:35:07 UTC (rev 209)
+++ trunk/096/pkg/expansions/uor/config/icp.cfg	2005-09-21 06:36:17 UTC (rev 210)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            UOR Subsection
+        Version         1.0
+        Description     Package section for the files pertaining to UOR specific versions of scripts.
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/expansions/uor/pkg.cfg
===================================================================
--- trunk/096/pkg/expansions/uor/pkg.cfg	2005-09-21 06:35:07 UTC (rev 209)
+++ trunk/096/pkg/expansions/uor/pkg.cfg	2005-09-21 06:36:17 UTC (rev 210)
@@ -1,8 +1,8 @@
-Enabled 0
-Name uor
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
-CoreRequired 96
-Conflicts LBR
-Conflicts AOS
+Enabled         0
+Name            uor
+Maintainer      Distro Team
+Email           pol-distro-support at sourceforge.net
+Version         1.0
+CoreRequired    96
+Conflicts       LBR
+Conflicts       AOS



From muaddiblsd at berlios.de  Wed Sep 21 15:08:21 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Wed, 21 Sep 2005 15:08:21 +0200
Subject: [Poldistro-svn] r211 - in trunk/096/pkg: items/commcrystals items/commcrystals/config items/corpses items/corpses/config items/decorations items/decorations/config utils/servperf utils/servperf/config utils/servperf/www
Message-ID: <200509211308.j8LD8LtZ002087@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-21 15:08:14 +0200 (Wed, 21 Sep 2005)
New Revision: 211

Added:
   trunk/096/pkg/items/commcrystals/config/
   trunk/096/pkg/items/commcrystals/config/icp.cfg
   trunk/096/pkg/items/corpses/config/
   trunk/096/pkg/items/corpses/config/icp.cfg
   trunk/096/pkg/items/decorations/config/
   trunk/096/pkg/items/decorations/config/icp.cfg
   trunk/096/pkg/utils/servperf/config/
   trunk/096/pkg/utils/servperf/config/icp.cfg
Modified:
   trunk/096/pkg/items/commcrystals/commCrystal.src
   trunk/096/pkg/items/commcrystals/crystalControl.src
   trunk/096/pkg/items/commcrystals/itemdesc.cfg
   trunk/096/pkg/items/commcrystals/pkg.cfg
   trunk/096/pkg/items/corpses/boneControl.src
   trunk/096/pkg/items/corpses/corpseControl.src
   trunk/096/pkg/items/corpses/corpseFunctions.inc
   trunk/096/pkg/items/corpses/pkg.cfg
   trunk/096/pkg/items/decorations/itemdesc.cfg
   trunk/096/pkg/utils/servperf/pkg.cfg
   trunk/096/pkg/utils/servperf/recbandwidth.src
   trunk/096/pkg/utils/servperf/start.src
   trunk/096/pkg/utils/servperf/www/header.inc
Log:
Added /config/icp.cfg for ICP Compliance.
Restructured pkg.cfg for correct spacing in file.
Reindented files for correct tab spacing.

Modified: trunk/096/pkg/items/commcrystals/commCrystal.src
===================================================================
--- trunk/096/pkg/items/commcrystals/commCrystal.src	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/items/commcrystals/commCrystal.src	2005-09-21 13:08:14 UTC (rev 211)
@@ -1,79 +1,82 @@
-
 use uo;
 use basic;
 
-const CRYSTALOBJ := 0xC001;
-const RECEIVEROBJ := 0xC002;
+CONST CRYSTALOBJ  := 0xC001;
+CONST RECEIVEROBJ := 0xC002;
 
-program use_commcrystal(who, crystal)
-  var CrystalStatus := GetObjProperty(crystal, "Status");
-  var Charges := GetObjProperty(crystal, "Charges");
-  Charges := Cint(Charges);
-  if ( Charges <= 0 )
-    SendSysMessage(who, "All charges have been used.");
-    return;
-  endif
-  
-  var LinkString := GetObjProperty(crystal, "Links");
-  var Links := Splitwords(LinkString);
-  var LinkCount := Len(Links);
-  var CrystalId := crystal.serial;
-  var i, blank, placeholder, receiver;
-  SendSysMessage(who, "Select object.");
-  var TargetItem := target(who);
-  if ( (TargetItem.objtype != CRYSTALOBJ) and (TargetItem.objtype != RECEIVEROBJ) )
-    SendSysMessage(who, "That is not a communication crystal.");
-    return;
-  endif
-  if (TargetItem.serial == crystal.serial)
-    if (CrystalStatus == "OFF")
-      SendSysMessage(who, "Crystal activated.  You are linked to " + (LinkCount-1) + " receivers.");
-      SetObjProperty(crystal, "Status", "ON");
-      Charges := Charges -1;
-      SetObjProperty( crystal, "Charges", Charges );
-      return;
-    else
-      SendSysMessage(who, "Crystal deactivated.");
-      SetObjProperty(crystal, "Status", "OFF");
-      return;
-    endif
-  endif
-  if (TargetItem.objtype == RECEIVEROBJ)
-    var Master := GetObjProperty(TargetItem, "Master");
-    Master := Cint(Master);
-    if (Master == 0)
-      If (LinkCount > 10)
-        SendSysMessage(who, "Too many receivers.   Aborted.");
-        return;
-      endif
-      SendSysMessage(who, "Linked.");
-      SetObjProperty(TargetItem, "Master", CrystalId);
-      LinkString := Cstr(LinkString) + " " + Cstr(TargetItem.serial);
-      SetObjProperty(crystal, "Links", LinkString);
-      return;
-    endif
-    if (Master == CrystalId)
-      receiver := CStr(TargetItem.serial);
-      placeholder := "";
-      i := 1;
-      LinkCount := LinkCount + 1;
-      SetObjProperty(TargetItem, "Master", 0);
-      while (i < LinkCount)
-        blank := CStr(Links[i]);
-        if (blank == receiver)
-          blank := "nothing";
-          //we ignore this one
-        else
-          placeholder := placeholder + " " + blank;
-        endif
-        i := i + 1;
-      endwhile
-      SetObjProperty(crystal, "Links", placeholder);
-      SendSysMessage(who, "Unlinked.");
-      return;
-    else
-      SendSysMessage(who, "That receiver is in use.");
-      return;
-    endif
-  endif
+program use_commCrystal(who, crystal)
+
+	var CrystalStatus := GetObjProperty(crystal, "Status");
+	var Charges := GetObjProperty(crystal, "Charges");
+	Charges := Cint(Charges);
+	if ( Charges <= 0 )
+		SendSysMessage(who, "All charges have been used.");
+		return 0;
+	endif
+
+	var LinkString := GetObjProperty(crystal, "Links");
+	var Links := Splitwords(LinkString);
+	var LinkCount := Len(Links);
+	var CrystalId := crystal.serial;
+	var i, blank, placeholder, receiver;
+	SendSysMessage(who, "Select object.");
+	var TargetItem := target(who);
+	if ( (TargetItem.objtype != CRYSTALOBJ) and (TargetItem.objtype != RECEIVEROBJ) )
+		SendSysMessage(who, "That is not a communication crystal.");
+		return 0;
+	endif
+	if (TargetItem.serial == crystal.serial)
+		if (CrystalStatus == "OFF")
+			SendSysMessage(who, "Crystal activated.  You are linked to " + (LinkCount-1) + " receivers.");
+			SetObjProperty(crystal, "Status", "ON");
+			Charges := Charges -1;
+			SetObjProperty( crystal, "Charges", Charges );
+			return 0;
+		else
+			SendSysMessage(who, "Crystal deactivated.");
+			SetObjProperty(crystal, "Status", "OFF");
+			return 0;
+		endif
+	endif
+	if (TargetItem.objtype == RECEIVEROBJ)
+		var Master := GetObjProperty(TargetItem, "Master");
+		Master := Cint(Master);
+		if (Master == 0)
+			If (LinkCount > 10)
+				SendSysMessage(who, "Too many receivers.   Aborted.");
+				return 0;
+			endif
+			SendSysMessage(who, "Linked.");
+			SetObjProperty(TargetItem, "Master", CrystalId);
+			LinkString := Cstr(LinkString) + " " + Cstr(TargetItem.serial);
+			SetObjProperty(crystal, "Links", LinkString);
+			return 0;
+		endif
+		if (Master == CrystalId)
+			receiver := CStr(TargetItem.serial);
+			placeholder := "";
+			i := 1;
+			LinkCount := LinkCount + 1;
+			SetObjProperty(TargetItem, "Master", 0);
+			while (i < LinkCount)
+				blank := CStr(Links[i]);
+				if (blank == receiver)
+					blank := "nothing";
+					//we ignore this one
+				else
+					placeholder := placeholder + " " + blank;
+				endif
+				i := i + 1;
+			endwhile
+			SetObjProperty(crystal, "Links", placeholder);
+			SendSysMessage(who, "Unlinked.");
+			return 0;
+		else
+			SendSysMessage(who, "That receiver is in use.");
+			return 0;
+		endif
+	endif
+
+	return 0;
+
 endprogram

Added: trunk/096/pkg/items/commcrystals/config/icp.cfg
===================================================================
--- trunk/096/pkg/items/commcrystals/config/icp.cfg	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/items/commcrystals/config/icp.cfg	2005-09-21 13:08:14 UTC (rev 211)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Communication Crystals
+        Version         1.0
+        Description     CommCrystal Control Package
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/items/commcrystals/crystalControl.src
===================================================================
--- trunk/096/pkg/items/commcrystals/crystalControl.src	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/items/commcrystals/crystalControl.src	2005-09-21 13:08:14 UTC (rev 211)
@@ -4,32 +4,36 @@
 
 include "include/sysEvent";
 
-program receivercontrol(crystal);
-  var i, placeholder, receiver, Links, LinkList, LinkCount;
-  RegisterForSpeechEvents(crystal, 1);
-  EnableEvents(SYSEVENT_SPEECH,1);
-  var ev;
+program receiverControl(crystal);
 
-  while(1)
-    ev := os::wait_for_event( 3 );
-    if(ev)
-      var IsOn := GetObjProperty(crystal, "Status");
-      IsOn := CStr(IsOn);
-      if (IsOn == "ON")
-        if (ev.type==SYSEVENT_SPEECH)
-          LinkList := GetObjProperty(crystal, "Links");
-          Links := Splitwords(LinkList);
-          LinkCount := Len(Links);
-          LinkCount := LinkCount + 1;
-          i := 1;
-          while (i < LinkCount)
-            placeholder := Cint(Links[i]);
-            receiver := SystemFindObjectBySerial(placeholder);
-            PrintTextAbove(receiver, "Message from "+ev.source.name+": " + ev.text);
-            i := i + 1;
-          endwhile
-        endif
-      endif
-    endif
-  endwhile
+	var i, placeholder, receiver, Links, LinkList, LinkCount;
+	RegisterForSpeechEvents(crystal, 1);
+	EnableEvents(SYSEVENT_SPEECH,1);
+	var ev;
+
+	while(1)
+		ev := os::wait_for_event( 3 );
+		if(ev)
+			var IsOn := GetObjProperty(crystal, "Status");
+			IsOn := CStr(IsOn);
+			if (IsOn == "ON")
+				if (ev.type==SYSEVENT_SPEECH)
+					LinkList := GetObjProperty(crystal, "Links");
+					Links := Splitwords(LinkList);
+					LinkCount := Len(Links);
+					LinkCount := LinkCount + 1;
+					i := 1;
+					while (i < LinkCount)
+						placeholder := Cint(Links[i]);
+						receiver := SystemFindObjectBySerial(placeholder);
+						PrintTextAbove(receiver, "Message from "+ev.source.name+": " + ev.text);
+						i := i + 1;
+					endwhile
+				endif
+			endif
+		endif
+	endwhile
+
+	return 0;
+
 endprogram

Modified: trunk/096/pkg/items/commcrystals/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/commcrystals/itemdesc.cfg	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/items/commcrystals/itemdesc.cfg	2005-09-21 13:08:14 UTC (rev 211)
@@ -6,7 +6,7 @@
 	ControlScript	crystalControl
 	Script		commCrystal
 	graphic		0x1ED0
-    CProp       Status      sOFF
+	CProp		Status      sOFF
 	CProp		Links		sBLANK
 	CProp		Charges		i2000
 }

Modified: trunk/096/pkg/items/commcrystals/pkg.cfg
===================================================================
--- trunk/096/pkg/items/commcrystals/pkg.cfg	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/items/commcrystals/pkg.cfg	2005-09-21 13:08:14 UTC (rev 211)
@@ -1,6 +1,6 @@
-Enabled 1
-Name commcrystals
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
+Enabled	 	1
+Name 		commcrystals
+Maintainer 	Distro Team
+Email 		pol-distro-support at sourceforge.net
+Version 	1.0
 

Modified: trunk/096/pkg/items/corpses/boneControl.src
===================================================================
--- trunk/096/pkg/items/corpses/boneControl.src	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/items/corpses/boneControl.src	2005-09-21 13:08:14 UTC (rev 211)
@@ -1,8 +1,9 @@
 use uo;
 use os;
-use util;
 
-program bonecontrol(corpse)
-  sleep(300);
-  DestroyItem(corpse);
-endprogram
\ No newline at end of file
+program boneControl(corpse)
+
+        sleep(300);
+        DestroyItem(corpse);
+
+endprogram

Added: trunk/096/pkg/items/corpses/config/icp.cfg
===================================================================
--- trunk/096/pkg/items/corpses/config/icp.cfg	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/items/corpses/config/icp.cfg	2005-09-21 13:08:14 UTC (rev 211)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Corpses
+        Version         1.0
+        Description     Corpse Control package. Handles corpse carving, corpse decay, and bone decay (from corpse).
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/items/corpses/corpseControl.src
===================================================================
--- trunk/096/pkg/items/corpses/corpseControl.src	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/items/corpses/corpseControl.src	2005-09-21 13:08:14 UTC (rev 211)
@@ -2,32 +2,36 @@
 use os;
 use util;
 
-program corpsecontrol(corpse)
-  sleep(300);
-  if(!corpse)
-    return;
-  endif
-  if(GetObjProperty(corpse, "npctemplate"))
-    DestroyItem(corpse);
-    return;
-  else
-    var beardlist := {0x203e, 0x203f, 0x2040, 0x2041, 0x204b, 0x204c, 0x204d };
-    var hairlist  := {0x2044, 0x2045, 0x2046, 0x2047, 0x2048, 0x2049, 0x204a, 0x203b, 0x203c, 0x203d };
-    var bonearray := array(0xed2, 0xed1, 0xed0, 0xecf, 0xece, 0xecd, 0xecc, 0xecb, 0xeca);
-    var bones := CreateItemAtLocation(corpse.x, corpse.y, corpse.z, bonearray[RandomInt(9)+1], 1, corpse.realm);
-    var newname := corpse.name["A corpse of "] := "";
-    bones.name := "remains of " + newname;
-    foreach thing in EnumerateItemsInContainer(corpse)
-      if((thing.objtype in beardlist) || (thing.objtype in hairlist))
-        DestroyItem(thing);
-        elseif(thing.movable == 0)
-        DestroyItem(thing);
-      else
-        MoveItemToContainer(thing, bones);
-        thing.decayAt := ReadGameClock() + 600;
-      endif
-    endforeach
-    DestroyItem(corpse);
-    start_script("boneControl", bones);
-  endif
+program corpseControl(corpse)
+
+	sleep(300);
+	if(!corpse)
+		return 0;
+	endif
+	if(GetObjProperty(corpse, "npctemplate"))
+		DestroyItem(corpse);
+		return 0;
+	else
+		var beardlist := {0x203e, 0x203f, 0x2040, 0x2041, 0x204b, 0x204c, 0x204d };
+		var hairlist  := {0x2044, 0x2045, 0x2046, 0x2047, 0x2048, 0x2049, 0x204a, 0x203b, 0x203c, 0x203d };
+		var bonearray := array(0xed2, 0xed1, 0xed0, 0xecf, 0xece, 0xecd, 0xecc, 0xecb, 0xeca);
+		var bones := CreateItemAtLocation(corpse.x, corpse.y, corpse.z, bonearray[RandomInt(9)+1], 1, corpse.realm);
+		var newname := corpse.name["A corpse of "] := "";
+		bones.name := "remains of " + newname;
+		foreach thing in EnumerateItemsInContainer(corpse)
+			if((thing.objtype in beardlist) || (thing.objtype in hairlist))
+				DestroyItem(thing);
+			elseif(thing.movable == 0)
+				DestroyItem(thing);
+			else
+				MoveItemToContainer(thing, bones);
+				thing.decayAt := ReadGameClock() + 600;
+			endif
+		endforeach
+		DestroyItem(corpse);
+		start_script("boneControl", bones);
+	endif
+
+	return 0;
+
 endprogram
\ No newline at end of file

Modified: trunk/096/pkg/items/corpses/corpseFunctions.inc
===================================================================
--- trunk/096/pkg/items/corpses/corpseFunctions.inc	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/items/corpses/corpseFunctions.inc	2005-09-21 13:08:14 UTC (rev 211)
@@ -1,109 +1,114 @@
 
 function Carve_Corpse(who, cadaver)
-  Detach();
-  if((!Accessible(who, cadaver)) or (!CheckLineOfSight(who, cadaver)))
-    SendSysMessage(who, "You cannot use that.");
-    return;
-  endif
-  if(Distance(who, cadaver) > 2)
-    SendSysMessage(who, "You are not close enough.");
-    return;
-  endif
-  var c_type := cadaver.corpsetype;
-  if(GetObjProperty(cadaver, "cut") == "1")
-    SendSysMessage( who, "You cannot get any more from this corpse." );
-    foreach thing in EnumerateItemsInContainer(cadaver)
-      MoveItemToLocation(thing, cadaver.x, cadaver.y, cadaver.z, MOVEITEM_FORCELOCATION);
-    endforeach
-    DestroyItem(cadaver);
-  elseif((c_type == 400) || (c_type == 401))
-    var beardlist := {0x203e, 0x203f, 0x2040, 0x2041, 0x204b, 0x204c, 0x204d };
-    var hairlist  := {0x2044, 0x2045, 0x2046, 0x2047, 0x2048, 0x2049, 0x204a, 0x203b, 0x203c, 0x203d };
-    foreach thing in EnumerateItemsInContainer(cadaver)
-      if((thing.objtype in hairlist) or (thing.objtype in beardlist))
-        DestroyItem(thing);
-      else
-        MoveItemToLocation(thing, cadaver.x, cadaver.y, cadaver.z, MOVEITEM_FORCELOCATION);
-      endif
-    endforeach
-    var partsarray := {};
-    var part;
-    part := CreateItemAtLocation(cadaver.x-1, cadaver.y, cadaver.z, 0x1da0, 1, cadaver.realm);
-    partsarray.append(part);
-    SetObjProperty(part, "serial", GetObjProperty(cadaver, "serial"));
-    var aname := cadaver.name;
-    aname["A corpse of"] := "";
-    part.name := "The head of " + aname;
-    part := CreateItemAtLocation(cadaver.x-1, cadaver.y, cadaver.z, 0x1da1, 1, cadaver.realm);
-    partsarray.append(part);
-    part := CreateItemAtLocation(cadaver.x-1, cadaver.y+1, cadaver.z, 0x1da2, 1, cadaver.realm);
-    partsarray.append(part);
-    part := CreateItemAtLocation(cadaver.x+1, cadaver.y, cadaver.z, 0x1da3, 1, cadaver.realm);
-    partsarray.append(part);
-    part := CreateItemAtLocation(cadaver.x+1, cadaver.y+1, cadaver.z, 0x1da4, 1, cadaver.realm);
-    partsarray.append(part);
-    part := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, 0x1d9f, 1, cadaver.realm);
-    partsarray.append(part);
-    var blood := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, 0x122a, 1, cadaver.realm);
-    blood.movable := 0;
-    DestroyItem(cadaver);
-    sleep(40);
-    foreach thing in partsarray
-      if(!thing.container)
-        DestroyItem(thing);
-      endif
-    endforeach
-    sleep(20);
-    DestroyItem(blood);
-  else
-    if(c_type == 223)
-      CreateItemInContainer(cadaver, 0x9f1, 2);
-      SendSysMessage(who, "You place the items on the corpse.");
-      var theblood := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, UOBJ_BLOOD, 1, cadaver.realm);
-      sleep(30);
-      DestroyItem(cadaver);
-      sleep(30);
-      DestroyItem(theblood);
-      return;
-    endif
-    var conf := ReadConfigFile(":*:npcdesc");
-    var tmplate := GetObjProperty(cadaver, "npctemplate");
-    if(!tmplate)
-      SendSysMessage(who, "You cut the corpse, but fail to find anything useful.", 3, 40);
-      var theblood := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, UOBJ_BLOOD, 1, cadaver.realm);
-      sleep(30);
-      DestroyItem(cadaver);
-      sleep(30);
-      DestroyItem(theblood);
-      return;
-    else
-      SetObjProperty(cadaver, "cut","1");
-      var corpseitm := conf[tmplate]."corpseitm";
-      var corpseamt := conf[tmplate]."corpseamt";
-      print("I: " + corpseitm);
-      print("A: " + corpseamt);
-      if(!corpseitm)
-        print("error");
-        var theblood := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, UOBJ_BLOOD, 1, cadaver.realm);
-        sleep(30);
-        DestroyItem(cadaver);
-        sleep(30);
-        DestroyItem(theblood);
-        return;
-      endif
-      var i := 1;
-      corpseitm := SplitWords(corpseitm);
-      corpseamt := SplitWords(corpseamt);
-      foreach thing in corpseitm
-        CreateItemInContainer(cadaver, thing, Cint(corpseamt[i]));
-        i := i + 1;
-      endforeach
-      SendSysMessage(who, "You place the items on the corpse.");
-      var theblood := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, UOBJ_BLOOD, 1, cadaver.realm);
-      sleep(30);
-      DestroyItem(cadaver);
-      sleep(30);
-      DestroyItem(theblood);
-    endif
-  endif
-endfunction
+
+         Detach();
+	if((!Accessible(who, cadaver)) or (!CheckLineOfSight(who, cadaver)))
+		SendSysMessage(who, "You cannot use that.");
+		return 0;
+	endif
+	if(Distance(who, cadaver) > 2)
+		SendSysMessage(who, "You are not close enough.");
+		return 0;
+	endif
+
+	var c_type := cadaver.corpsetype;
+	if(GetObjProperty(cadaver, "cut") == "1")
+		SendSysMessage( who, "You cannot get any more from this corpse." );
+		foreach thing in EnumerateItemsInContainer(cadaver)
+			MoveItemToLocation(thing, cadaver.x, cadaver.y, cadaver.z, MOVEITEM_FORCELOCATION);
+		endforeach
+		DestroyItem(cadaver);
+	elseif((c_type == 400) || (c_type == 401))
+		var beardlist := {0x203e, 0x203f, 0x2040, 0x2041, 0x204b, 0x204c, 0x204d };
+		var hairlist  := {0x2044, 0x2045, 0x2046, 0x2047, 0x2048, 0x2049, 0x204a, 0x203b, 0x203c, 0x203d };
+		foreach thing in EnumerateItemsInContainer(cadaver)
+			if((thing.objtype in hairlist) or (thing.objtype in beardlist))
+				DestroyItem(thing);
+			else
+				MoveItemToLocation(thing, cadaver.x, cadaver.y, cadaver.z, MOVEITEM_FORCELOCATION);
+			endif
+		endforeach
+		var partsarray := {};
+		var part;
+		part := CreateItemAtLocation(cadaver.x-1, cadaver.y, cadaver.z, 0x1da0, 1, cadaver.realm);
+		partsarray.append(part);
+		SetObjProperty(part, "serial", GetObjProperty(cadaver, "serial"));
+		var aname := cadaver.name;
+		aname["A corpse of"] := "";
+		part.name := "The head of " + aname;
+		part := CreateItemAtLocation(cadaver.x-1, cadaver.y, cadaver.z, 0x1da1, 1, cadaver.realm);
+		partsarray.append(part);
+		part := CreateItemAtLocation(cadaver.x-1, cadaver.y+1, cadaver.z, 0x1da2, 1, cadaver.realm);
+		partsarray.append(part);
+		part := CreateItemAtLocation(cadaver.x+1, cadaver.y, cadaver.z, 0x1da3, 1, cadaver.realm);
+		partsarray.append(part);
+		part := CreateItemAtLocation(cadaver.x+1, cadaver.y+1, cadaver.z, 0x1da4, 1, cadaver.realm);
+		partsarray.append(part);
+		part := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, 0x1d9f, 1, cadaver.realm);
+		partsarray.append(part);
+		var blood := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, 0x122a, 1, cadaver.realm);
+		blood.movable := 0;
+		DestroyItem(cadaver);
+		sleep(40);
+		foreach thing in partsarray
+			if(!thing.container)
+				DestroyItem(thing);
+			endif
+		endforeach
+		sleep(20);
+		DestroyItem(blood);
+	else
+		if(c_type == 223)
+			CreateItemInContainer(cadaver, 0x9f1, 2);
+			SendSysMessage(who, "You place the items on the corpse.");
+			var theblood := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, UOBJ_BLOOD, 1, cadaver.realm);
+			sleep(30);
+			DestroyItem(cadaver);
+			sleep(30);
+			DestroyItem(theblood);
+			return 0;
+		endif
+		var conf := ReadConfigFile(":*:npcdesc");
+		var tmplate := GetObjProperty(cadaver, "npctemplate");
+		if(!tmplate)
+			SendSysMessage(who, "You cut the corpse, but fail to find anything useful.", 3, 40);
+			var theblood := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, UOBJ_BLOOD, 1, cadaver.realm);
+			sleep(30);
+			DestroyItem(cadaver);
+			sleep(30);
+			DestroyItem(theblood);
+			return 0;
+		else
+			SetObjProperty(cadaver, "cut","1");
+			var corpseitm := conf[tmplate]."corpseitm";
+			var corpseamt := conf[tmplate]."corpseamt";
+			print("I: " + corpseitm);
+			print("A: " + corpseamt);
+			if(!corpseitm)
+				print("error");
+				var theblood := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, UOBJ_BLOOD, 1, cadaver.realm);
+				sleep(30);
+				DestroyItem(cadaver);
+				sleep(30);
+				DestroyItem(theblood);
+				return 0;
+			endif
+			var i := 1;
+			corpseitm := SplitWords(corpseitm);
+			corpseamt := SplitWords(corpseamt);
+			foreach thing in corpseitm
+				CreateItemInContainer(cadaver, thing, Cint(corpseamt[i]));
+				i := i + 1;
+			endforeach
+			SendSysMessage(who, "You place the items on the corpse.");
+			var theblood := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, UOBJ_BLOOD, 1, cadaver.realm);
+			sleep(30);
+			DestroyItem(cadaver);
+			sleep(30);
+			DestroyItem(theblood);
+		endif
+	endif
+
+	return 0;
+
+endfunction
\ No newline at end of file

Modified: trunk/096/pkg/items/corpses/pkg.cfg
===================================================================
--- trunk/096/pkg/items/corpses/pkg.cfg	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/items/corpses/pkg.cfg	2005-09-21 13:08:14 UTC (rev 211)
@@ -1,5 +1,5 @@
-Enabled 1
-Name corpses
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
\ No newline at end of file
+Enabled 	1
+Name 		corpses
+Maintainer 	Distro Team
+Email 		pol-distro-support at sourceforge.net
+Version 	1.0
\ No newline at end of file

Added: trunk/096/pkg/items/decorations/config/icp.cfg
===================================================================
--- trunk/096/pkg/items/decorations/config/icp.cfg	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/items/decorations/config/icp.cfg	2005-09-21 13:08:14 UTC (rev 211)
@@ -0,0 +1,12 @@
+ICP Register
+{
+        Name            Decorations
+        Version         1.0a
+        Description     Decorations package. Contains items solely for decoration and their scripts if any required.
+
+        Creator         Distro Team
+        C_Email         pol-distro-support at sourceforge.net
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+}

Modified: trunk/096/pkg/items/decorations/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/decorations/itemdesc.cfg	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/items/decorations/itemdesc.cfg	2005-09-21 13:08:14 UTC (rev 211)
@@ -1,34 +1,34 @@
 Item 0x0E46 // empty jars
 {
-   Name emptyjars1
-   VendorSellsFor  200
-   VendorBuysFor   75
+	Name		emptyjars1
+	VendorSellsFor  200
+	VendorBuysFor   75
 }
 
 Item 0x0EE4 // W spiderweb
 {
-   Name spiderweb1
-   VendorSellsFor  200
-   VendorBuysFor   75
+	Name 		spiderweb1
+	VendorSellsFor  200
+	VendorBuysFor   75
 }
 
 Item 0x0EE3 // N spiderweb
 {
-   Name spiderweb2
-   VendorSellsFor  200
-   VendorBuysFor   75
+	Name 		spiderweb2
+	VendorSellsFor  200
+	VendorBuysFor   75
 }
 
 Item 0x154D // water barrel
 {
-   Name waterbarrel
-   VendorSellsFor  280
-   VendorBuysFor   130
+	Name 		waterbarrel
+	VendorSellsFor  280
+	VendorBuysFor   130
 }
 
 Item 0x1852 // scales2
 {
-   Name scales2
-   VendorSellsFor  200
-   VendorBuysFor   75
+	Name 		scales2
+	VendorSellsFor  200
+	VendorBuysFor   75
 }

Added: trunk/096/pkg/utils/servperf/config/icp.cfg
===================================================================
--- trunk/096/pkg/utils/servperf/config/icp.cfg	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/utils/servperf/config/icp.cfg	2005-09-21 13:08:14 UTC (rev 211)
@@ -0,0 +1,16 @@
+ICP Register
+{
+	Name		Server Performance WebPkg
+	Version		1.1
+	Description	Server Performance recording package for internal Webserver.
+
+	Creator		Syzygy
+	C_Email		syzygy at pobox.com
+
+	Maintainer	Distro Team
+	M_Email		pol-distro-support at sourceforge.net
+
+	//Script	cmdlevel path
+
+	//TextCmd	cmdlevel path
+}

Modified: trunk/096/pkg/utils/servperf/pkg.cfg
===================================================================
--- trunk/096/pkg/utils/servperf/pkg.cfg	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/utils/servperf/pkg.cfg	2005-09-21 13:08:14 UTC (rev 211)
@@ -1,6 +1,6 @@
-Enabled 1
-CoreRequired 84
-Name servperf
-Maintainer Syzygy
-Email syzygy at pobox.com
-Version 1.1
\ No newline at end of file
+Enabled 	1
+CoreRequired 	84
+Name 		servperf
+Maintainer 	Syzygy
+Email 		syzygy at pobox.com
+Version 	1.1
\ No newline at end of file

Modified: trunk/096/pkg/utils/servperf/recbandwidth.src
===================================================================
--- trunk/096/pkg/utils/servperf/recbandwidth.src	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/utils/servperf/recbandwidth.src	2005-09-21 13:08:14 UTC (rev 211)
@@ -2,28 +2,30 @@
 use uo;
 
 // This program records the bandwidth used per minute
-// Samples are stored for the last HISTORY_MINUTES minutes 
+// Samples are stored for the last HISTORY_MINUTES minutes
 // each element contains { bytes_received, bytes_sent } for that minute
 
-const HISTORY_MINUTES := 10;
+CONST HISTORY_MINUTES := 10;
 
-program record_bandwidth_used()
-    var results := { {0,0} };
-    var system := polcore();
-    var last_received := system.bytes_received;
-    var last_sent := system.bytes_sent;
-    var this_received, this_sent;
+program record_Bandwidth_used()
 
-    set_critical(1);
-    while (1)
-        sleep( 60 );
-        this_received := system.bytes_received;
-        this_sent := system.bytes_sent;    
-        results.insert( 1, { this_received-last_received,this_sent-last_sent } );
-        // print( "results: " + results );
-        results.erase( HISTORY_MINUTES+1 );
-        last_received := this_received;
-        last_sent := this_sent;
-        SetGlobalProperty( "#:servperf:bandwidth", results );
-    endwhile     
+	var results := { {0,0} };
+	var system := polcore();
+	var last_received := system.bytes_received;
+	var last_sent := system.bytes_sent;
+	var this_received, this_sent;
+
+	set_critical(1);
+	while (1)
+		sleep( 60 );
+		this_received := system.bytes_received;
+		this_sent := system.bytes_sent;
+		results.insert( 1, { this_received-last_received,this_sent-last_sent } );
+		// print( "results: " + results );
+		results.erase( HISTORY_MINUTES+1 );
+		last_received := this_received;
+		last_sent := this_sent;
+		SetGlobalProperty( "#:servperf:bandwidth", results );
+	endwhile
+
 endprogram
\ No newline at end of file

Modified: trunk/096/pkg/utils/servperf/start.src
===================================================================
--- trunk/096/pkg/utils/servperf/start.src	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/utils/servperf/start.src	2005-09-21 13:08:14 UTC (rev 211)
@@ -1,3 +1,3 @@
 use os;
 
-start_script( "recbandwidth" );
+start_script( "recBandwidth" );

Modified: trunk/096/pkg/utils/servperf/www/header.inc
===================================================================
--- trunk/096/pkg/utils/servperf/www/header.inc	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/utils/servperf/www/header.inc	2005-09-21 13:08:14 UTC (rev 211)
@@ -1,9 +1,13 @@
 function PrintHeader( name )
-  WriteHtmlRaw( "<table border=0 width=\"100%\"" 
-      +"<tr>"
-      +"<td valign=\"top\" width=\"100%\"><strong><big>" + name + "</big></strong></td>"
-      +"<td width=\"50%\" valign=\"top\" align=\"right\" nowrap><a href=\"index.ecl\"><small>Performance<br>"
-      +"Home</small></a></td>"
-      +"</tr>"
-      +"</table>" );
+
+	WriteHtmlRaw( "<table border=0 width=\"100%\""
+			+"<tr>"
+			+"<td valign=\"top\" width=\"100%\"><strong><big>" + name + "</big></strong></td>"
+			+"<td width=\"50%\" valign=\"top\" align=\"right\" nowrap><a href=\"index.ecl\"><small>Performance<br>"
+			+"Home</small></a></td>"
+			+"</tr>"
+			+"</table>" );
+
+	return 0;
+
 endfunction



From austin at berlios.de  Wed Sep 21 17:10:11 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 21 Sep 2005 17:10:11 +0200
Subject: [Poldistro-svn] r212 - in trunk/096/pkg/systems/attributes: . hooks include
Message-ID: <200509211510.j8LFABXx014143@sheep.berlios.de>

Author: austin
Date: 2005-09-21 17:10:10 +0200 (Wed, 21 Sep 2005)
New Revision: 212

Added:
   trunk/096/pkg/systems/attributes/hooks/vitalInit.src
Removed:
   trunk/096/pkg/systems/attributes/hooks/regenRate.src
Modified:
   trunk/096/pkg/systems/attributes/attributes.cfg
   trunk/096/pkg/systems/attributes/include/regen.inc
   trunk/096/pkg/systems/attributes/include/vitals.inc
   trunk/096/pkg/systems/attributes/skills.cfg
   trunk/096/pkg/systems/attributes/vitals.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/attributes.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-21 13:08:14 UTC (rev 211)
+++ trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-21 15:10:10 UTC (rev 212)
@@ -25,27 +25,6 @@
 
 ///////////////////////////////////////
 //
-// ** CUSTOM ATTRIBUTES **
-//
-///////////////////////////////////////
-
-Attribute HitsRegeneration
-{
-	AttributeType	Regen
-}
-
-Attribute ManaRegeneration
-{
-	AttributeType	Regen
-}
-
-Attribute StaminaRegeneration
-{
-	AttributeType	Regen
-}
-
-///////////////////////////////////////
-//
 // ** BASIC STATS **
 //
 ///////////////////////////////////////

Deleted: trunk/096/pkg/systems/attributes/hooks/regenRate.src
===================================================================
--- trunk/096/pkg/systems/attributes/hooks/regenRate.src	2005-09-21 13:08:14 UTC (rev 211)
+++ trunk/096/pkg/systems/attributes/hooks/regenRate.src	2005-09-21 15:10:10 UTC (rev 212)
@@ -1,62 +0,0 @@
-/*===============================================================
-* Current Version
-* regenRates.src
-* Updated 9/20/2005 12:20PM
-*
-* -- Revision v1.0 --
-* Austin:
-*  Created file
-===============================================================*/
-use uo;
-
-include ":attributes:include/attributes";
-include ":ai_brain:include/npcUtil";
-include ":config:include/config";
-
-program Install()
-	print("INSTALLED: Exported Vital - RegenRate and MaxValue functions... ok.");
-	return 1;
-endprogram
-
-
-
-// *****
-// Hit Point Functions
-// *****
-exported function GetHitsRegenRate(mobile)
-	return 1200 + CInt(GetAttribute(mobile, "HitsRegeneration"));
-endfunction
-
-exported function GetHitsMaximumValue(mobile)
-	var max_hits := GetAttribute(mobile, "Strength") * 100;
-	if ( mobile.npctemplate )
-		var npc_cfg := NPC_GetNPCConfig(mobile.npctemplate);
-		if ( npc_cfg.HITS )
-			max_hits := npc_cfg.HITS * 100;
-		endif
-	endif
-		
-	return max_hits;
-endfunction
-
-// *****
-// Mana Functions
-// *****
-exported function GetManaRegenRate(mobile)
-	return 1200 + CInt(GetAttribute(mobile, "ManaRegeneration"));
-endfunction
-
-exported function GetManaMaximumValue(mobile)
-    return GetAttribute(mobile, "Mana") * 100;
-endfunction
-
-// *****
-// Stamina Functions
-// *****
-exported function GetStaminaRegenRate(mobile)
-	return 1200 + CInt(GetAttribute(mobile, "StaminaRegeneration"));
-endfunction
-
-exported function GetStaminaMaximumValue(mobile)
-	return GetAttribute(mobile, "Stamina") * 100;
-endfunction

Copied: trunk/096/pkg/systems/attributes/hooks/vitalInit.src (from rev 210, trunk/096/pkg/systems/attributes/hooks/regenRate.src)
===================================================================
--- trunk/096/pkg/systems/attributes/hooks/regenRate.src	2005-09-21 06:36:17 UTC (rev 210)
+++ trunk/096/pkg/systems/attributes/hooks/vitalInit.src	2005-09-21 15:10:10 UTC (rev 212)
@@ -0,0 +1,108 @@
+/*===============================================================
+* Current Version
+* regenRates.src
+* Updated 9/20/2005 12:20PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created file
+===============================================================*/
+use uo;
+use util;
+
+include ":attributes:include/attributes";
+include ":ai_brain:include/npcUtil";
+include ":config:include/config";
+
+program Install()
+	print("INSTALLED: Exported Vital - RegenRate and MaxValue functions... ok.");
+	return 1;
+endprogram
+
+
+
+// *****
+// Hit Point Functions
+// *****
+exported function GetHitsRegenRate(mobile)
+	return 1200 + AF_GetVitalRegenRateMod(mobile, "hits");
+endfunction
+
+exported function GetHitsMaximumValue(mobile)
+	var vital_points := GetNPCVitalSetting(mobile, "HITS");
+	if ( !vital_points )
+		vital_points := GetAttribute(mobile, "Strength") * 100;
+	endif
+
+	return vital_points;
+endfunction
+
+// *****
+// Mana Functions
+// *****
+exported function GetManaRegenRate(mobile)
+	return 1200 + AF_GetVitalRegenRateMod(mobile, "mana");
+endfunction
+
+exported function GetManaMaximumValue(mobile)
+	var vital_points := GetNPCVitalSetting(mobile, "MANA");
+	if ( !vital_points )
+		vital_points := GetAttribute(mobile, "Intelligence") * 100;
+	endif
+
+	return vital_points;
+endfunction
+
+// *****
+// Stamina Functions
+// *****
+exported function GetStaminaRegenRate(mobile)
+	return 1200 + AF_GetVitalRegenRateMod(mobile, "stamina");
+endfunction
+
+exported function GetStaminaMaximumValue(mobile)
+	var vital_points := GetNPCVitalSetting(mobile, "STAM");
+	if ( !vital_points )
+		vital_points := GetAttribute(mobile, "Dexterity") * 100;
+	endif
+
+	return vital_points;
+endfunction
+
+// *****
+// Private Function for NPC stuff
+// *****
+function GetNPCVitalSetting(mobile, vital)
+	if ( !mobile.npctemplate )
+		return 0;
+	endif
+	
+	var value := 0;
+
+	// CProp used if NPC had dice settings - so they dont change over and over.
+	var vital_settings := GetObjProperty(mobile, "%NPC_Vitals%");
+	if ( vital_settings.Exists(vital) )
+		value := vital_settings[vital];
+	else
+		// No prior setup took place - get information from the npcdesc.cfg
+		var npc_cfg := NPC_GetNPCConfig(mobile.npctemplate);
+		value := GetConfigString(npc_cfg, vital);
+
+		if ( !value )
+			return 0;
+		endif
+
+		if ( value["d"] ) // Dice
+			value := RandomDiceRoll(value);
+			if ( Lower(TypeOf(vital_settings)) != "dictionary" )
+				vital_settings := dictionary;
+			endif
+			vital_settings[vital] := value;
+			SetObjProperty(mobile, "%NPC_Vitals%", vital_settings);
+		else
+			value := CInt(value);
+		endif
+	endif
+
+	return (value * 100);
+endfunction

Modified: trunk/096/pkg/systems/attributes/include/regen.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-21 13:08:14 UTC (rev 211)
+++ trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-21 15:10:10 UTC (rev 212)
@@ -11,28 +11,99 @@
 use uo;
 
 /*
- * AF_SetVitalRegenRate(mobile, skill_name, points)
+ * AF_SetVitalRegenRate(mobile, vital_name, number)
  *
  * Purpose
  * Sets the regeneration rate modifier for an attribute.
- * Base value is 1200.
+ * Base value is 1200 (unless you changed it)
  *
  * Parameters
  * mobile:	Mobile reference to set the modifier on.
  * skill_name:	Name of the vital to set the regen modifier for.
- * points:	Modifier (+/-) points to set for the regen rate.
+ * number:	Modifier (+/-) points to set for the regen rate.
  *
  * Return value
  * Returns 1
  *
  */
-function AF_SetVitalRegenRate(mobile, vital_name, rate)
-	if ( !Lower(vital_name["regeneration"]) )
-		vital_name := vital_name+"Regeneration";
+function AF_SetVitalRegenRateMod(mobile, vital_name, number)
+	vital_name := Lower(vital_name);
+	number := CInt(number);
+	
+	var regen_prop := AF_LoadVitalRegenRateProp(mobile);
+		
+	if ( number == 0 )
+		// Remove keys with no modifier
+		regen_prop.Erase(vital_name);
+	else
+		regen_prop[vital_name] := CInt(number);
 	endif
 	
-	SetAttributeBaseValue(mobile, vital_name, rate);
-	RecalcVitals(mobile);
-	
+	AF_SaveVitalRegenRateProp(mobile, regen_prop);
 	return 1;
 endfunction
+
+/*
+ * AF_GetVitalRegenRateMod(mobile, vital_name)
+ *
+ * Purpose
+ * Gets the regeneration rate modifier for a vital.
+ *
+ * Parameters
+ * mobile:	Mobile reference to get the regen information from.
+ * vital_name:	Name of the vital to get the regeneration rate for.
+ *
+ * Return value
+ * Returns an integer.
+ *
+ */
+function AF_GetVitalRegenRateMod(mobile, vital_name)
+	vital_name := Lower(vital_name);
+	
+	var regen_prop := AF_LoadVitalRegenRateProp(mobile);
+	return CInt(regen_prop[vital_name]);
+endfunction
+
+/*
+ * AF_LoadVitalRegenRateProp(mobile)
+ *
+ * Purpose
+ * Loads the dictionary of regeneration settings from a mobile.
+ *
+ * Parameters
+ * mobile:	Mobile reference to get the regen information from.
+ *
+ * Return value
+ * Returns a dictionary
+ *
+ */
+function AF_LoadVitalRegenRateProp(mobile)
+	var regen_prop := GetObjProperty(mobile, "%RegenRates%");
+	if ( Lower(TypeOf(regen_prop)) != "dictionary" )
+		regen_prop := dictionary;
+	endif
+	
+	return regen_prop;
+endfunction
+
+/*
+ * AF_SaveVitalRegenRateProp(mobile, regen_prop)
+ *
+ * Purpose
+ * Saves the dictionary of regeneration settings on a mobile.
+ *
+ * Parameters
+ * mobile:	Mobile reference to save the regen information on.
+ * regen_prop:	Dictionary containing regeneration modifier values.
+ *
+ * Return value
+ * Returns the result of saving the property.
+ *
+ */
+function AF_SaveVitalRegenRateProp(mobile, byref regen_prop)
+	if ( Lower(TypeOf(regen_prop)) != "dictionary" )
+		return error{"errortext":="Regen prop must be a dictionary."};
+	endif
+	
+	return SetObjProperty(mobile, "%RegenRates%", regen_prop);
+endfunction
\ No newline at end of file

Modified: trunk/096/pkg/systems/attributes/include/vitals.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-21 13:08:14 UTC (rev 211)
+++ trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-21 15:10:10 UTC (rev 212)
@@ -12,7 +12,6 @@
 use os;
 use cfgfile;
 
-
 /*
  * AF_GetVitalCfgElem(vital)
  *

Modified: trunk/096/pkg/systems/attributes/skills.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/skills.cfg	2005-09-21 13:08:14 UTC (rev 211)
+++ trunk/096/pkg/systems/attributes/skills.cfg	2005-09-21 15:10:10 UTC (rev 212)
@@ -2,13 +2,13 @@
 //
 //  SKILLS.CFG:     Skill Definitions
 //
-//  USED BY:        System
+//  USED BY:	System
 //
-//  TODO:           tune delays, define stat advancement data for all skills
+//  TODO:	   tune delays, define stat advancement data for all skills
 //
 //  The following can be defined for a Skill:
 //
-//      Name        Skill name [will be used to read/write data files]
+//      Name	Skill name [will be used to read/write data files]
 //      SkillId     0-[max skill]
 //      Script      Script to run when skill is clicked in skills window
 //      Delay       Number of seconds skills cannot be used after this one
@@ -29,633 +29,633 @@
 //
 // *** NOTICE ***
 //
-// As of POL 094, this file is only used to start up a skill Script     when a
+// As of POL 094, this file is only used to start up a skill Script when a
 // client uses one.
 //
 /////////////////////////////////////////////////////////////////////////////
 
 Skill 0
 {
-        Name            Alchemy
-        SkillId         0
-        IntAdv          100 1d4+20
-        DexAdv          100 1d1+20
-        default_points  100
-        title           Alchemist
-        DropStat        str
+	Name	    Alchemy
+	SkillId	 0
+	IntAdv	  100 1d4+20
+	DexAdv	  100 1d1+20
+	default_points  100
+	title	   Alchemist
+	DropStat	str
 }
 
 Skill 1
 {
-        Name            Anatomy
-        SkillId         1
-        Script          :anatomy:anatomy
-        Delay           10
-        IntAdv          100 1d2+10
-        default_points  50
-        title           Healer
-        Unhides         0
-        DropStat        str dex
+	Name	    Anatomy
+	SkillId	 1
+	Script	  :anatomy:anatomy
+	Delay	   10
+	IntAdv	  100 1d2+10
+	default_points  50
+	title	   Healer
+	Unhides	 0
+	DropStat	str dex
 }
 
 Skill 2
 {
-        Name            AnimalLore
-        SkillId         2
-        Script          :animallore:animalLore
-        Delay           10
-        IntAdv          100 1d4+20
-        default_points  100
-        title           Ranger
-        Unhides         0
-        DropStat        str dex
+	Name	    AnimalLore
+	SkillId	 2
+	Script	  :animallore:animalLore
+	Delay	   10
+	IntAdv	  100 1d4+20
+	default_points  100
+	title	   Ranger
+	Unhides	 0
+	DropStat	str dex
 }
 
 Skill 3
 {
-        Name            ItemId
-        SkillId         3
-        Script          :itemid:itemID
-        Delay           10
-        IntAdv          100 1d3+15
-        default_points  50
-        title           Merchant
-        Unhides         0
-        DropStat        str dex
+	Name	    ItemId
+	SkillId	 3
+	Script	  :itemid:itemID
+	Delay	   10
+	IntAdv	  100 1d3+15
+	default_points  50
+	title	   Merchant
+	Unhides	 0
+	DropStat	str dex
 }
 
 Skill 4
 {
-        Name            ArmsLore
-        SkillId         4
-        Script          :armslore:armsLore
-        Delay           10
-        IntAdv          100 1d1+10
-        StrAdv          100 1d2+10
-        default_points  50
-        title           Warrior
-        Unhides         0
-        DropStat        dex
+	Name	    ArmsLore
+	SkillId	 4
+	Script	  :armslore:armsLore
+	Delay	   10
+	IntAdv	  100 1d1+10
+	StrAdv	  100 1d2+10
+	default_points  50
+	title	   Warrior
+	Unhides	 0
+	DropStat	dex
 }
 
 Skill 5
 {
-        Name            Parry
-        SkillId         5
-        StrAdv          100 1d2+20
-        default_points  100
-        title           Shieldsfighter
-        DropStat        dex int
+	Name	    Parry
+	SkillId	 5
+	StrAdv	  100 1d2+20
+	default_points  100
+	title	   Shieldsfighter
+	DropStat	dex int
 }
 
 Skill 6
 {
-        Name            Begging
-        SkillId         6
-        Script          :begging:begging
-        Delay           10
-        IntAdv          100 1d1+20
-        default_points  100
-        title           Beggar
-        Unhides         1
-        DropStat        str dex
+	Name	    Begging
+	SkillId	 6
+	Script	  :begging:begging
+	Delay	   10
+	IntAdv	  100 1d1+20
+	default_points  100
+	title	   Beggar
+	Unhides	 1
+	DropStat	str dex
 }
 
 Skill 7
 {
-        Name            Blacksmithy
-        SkillId         7
-        Delay           10
-        StrAdv          100 1d4+20
-        default_points  100
-        title           Smith
-        DropStat        dex int
+	Name	    Blacksmithy
+	SkillId	 7
+	Delay	   10
+	StrAdv	  100 1d4+20
+	default_points  100
+	title	   Smith
+	DropStat	dex int
 }
 
 Skill 8
 {
-        Name            Bowcraft
-        SkillId         8
-        Delay           15
-        StrAdv          100 1d4+20
-        DexAdv          100 1d3+20
-        default_points  100
-        title           Bowyer
-        Unhides         1
-        DropStat        int
+	Name	    Bowcraft
+	SkillId	 8
+	Delay	   15
+	StrAdv	  100 1d4+20
+	DexAdv	  100 1d3+20
+	default_points  100
+	title	   Bowyer
+	Unhides	 1
+	DropStat	int
 }
 
 Skill 9
 {
-        Name            Peacemaking
-        SkillId         9
-        Script          :musicianship:peacemaking
-        IntAdv          100 1d2
-        default_points  50
-        title           Bard
-        Delay           10
-        Unhides         1
-        DropStat        str
+	Name	    Peacemaking
+	SkillId	 9
+	Script	  :musicianship:peacemaking
+	IntAdv	  100 1d2
+	default_points  50
+	title	   Bard
+	Delay	   10
+	Unhides	 1
+	DropStat	str
 }
 
 Skill 10
 {
-        Name            Camping
-        SkillId         10
-        Delay           10
-        StrAdv          100 1d2+10
-        IntAdv          100 1d2+10
-        default_points  100
-        title           Ranger
-        Unhides         1
-        DropStat        dex
+	Name	    Camping
+	SkillId	 10
+	Delay	   10
+	StrAdv	  100 1d2+10
+	IntAdv	  100 1d2+10
+	default_points  100
+	title	   Ranger
+	Unhides	 1
+	DropStat	dex
 }
 
 Skill 11
 {
-        Name            Carpentry
-        SkillId         11
-        Delay           10
-        StrAdv          100 1d4+25
-        default_points  100
-        title           Carpenter
-        DropStat        dex int
+	Name	    Carpentry
+	SkillId	 11
+	Delay	   10
+	StrAdv	  100 1d4+25
+	default_points  100
+	title	   Carpenter
+	DropStat	dex int
 }
 
 Skill 12
 {
-        Name            Cartography
-        SkillId         12
-        Script          :cartography:cartography
-        Delay           15
-        IntAdv          100 1d2+10
-        default_points  100
-        title           Cartographer
-        Unhides         0
-        DropStat        str dex
+	Name	    Cartography
+	SkillId	 12
+	Script	  :cartography:cartography
+	Delay	   15
+	IntAdv	  100 1d2+10
+	default_points  100
+	title	   Cartographer
+	Unhides	 0
+	DropStat	str dex
 }
 
 Skill 13
 {
-        Name            Cooking
-        SkillId         13
-        Delay           15
-        IntAdv          100 1d2+10
-        default_points  100
-        title           Chef
-        Unhides         1
-        DropStat        str dex
+	Name	    Cooking
+	SkillId	 13
+	Delay	   15
+	IntAdv	  100 1d2+10
+	default_points  100
+	title	   Chef
+	Unhides	 1
+	DropStat	str dex
 }
 
 Skill 14
 {
-        Name            DetectingHidden
-        SkillId         14
-        Script          :detecthidden:detectHidden
-        Delay           10
-        IntAdv          100 1d4+20
-        default_points  50
-        title           Scout
-        DropStat        str dex
+	Name	    DetectingHidden
+	SkillId	 14
+	Script	  :detecthidden:detectHidden
+	Delay	   10
+	IntAdv	  100 1d4+20
+	default_points  50
+	title	   Scout
+	DropStat	str dex
 }
 
 Skill 15
 {
-        Name            Enticement
-        SkillId         15
-        Script          :musicianship:entice
-        Delay           10
-        IntAdv          20 2d4
-        default_points  100
-        DropStat        str
+	Name	    Enticement
+	SkillId	 15
+	Script	  :musicianship:entice
+	Delay	   10
+	IntAdv	  20 2d4
+	default_points  100
+	DropStat	str
 }
 
 Skill 16
 {
-        Name            EvaluatingIntelligence
-        SkillId         16
-        Script          :evalint:evalInt
-        Delay           10
-        IntAdv          100 1d4+20
-        default_points  50
-        title           Scholar
-        Unhides         0
-        DropStat        str dex
+	Name	    EvaluatingIntelligence
+	SkillId	 16
+	Script	  :evalint:evalInt
+	Delay	   10
+	IntAdv	  100 1d4+20
+	default_points  50
+	title	   Scholar
+	Unhides	 0
+	DropStat	str dex
 }
 
 
 Skill 17
 {
-        Name            Healing
-        SkillId         17
-        Delay           10
-        DexAdv          100 1d1+10
-        default_points  100
-        title           Healer
-        Unhides         1
-        DropStat        str int
+	Name	    Healing
+	SkillId	 17
+	Delay	   10
+	DexAdv	  100 1d1+10
+	default_points  100
+	title	   Healer
+	Unhides	 1
+	DropStat	str int
 }
 
 Skill 18
 {
-        Name            Fishing
-        SkillId         18
-        Delay           5
-        DexAdv          100 1d4+20
-        StrAdv          100 1d4+20
-        default_points  100
-        title           Fisherman
-        DropStat        int
+	Name	    Fishing
+	SkillId	 18
+	Delay	   5
+	DexAdv	  100 1d4+20
+	StrAdv	  100 1d4+20
+	default_points  100
+	title	   Fisherman
+	DropStat	int
 }
 
 Skill 19
 {
-        Name            ForensicEvaluation
-        SkillId         19
-        Script          :forensicevaluation:forensic
-        Delay           15
-        IntAdv          100 1d4+20
-        default_points  100
-        title           Detective
-        Unhides         0
-        DropStat        str dex
+	Name	    ForensicEvaluation
+	SkillId	 19
+	Script	  :forensicevaluation:forensic
+	Delay	   15
+	IntAdv	  100 1d4+20
+	default_points  100
+	title	   Detective
+	Unhides	 0
+	DropStat	str dex
 }
 
 Skill 20
 {
-        Name            Herding
-        SkillId         20
-        StrAdv          100 1d4+20
-        default_points  100
-        title           Shepherd
-        Unhides         1
-        DropStat        dex int
+	Name	    Herding
+	SkillId	 20
+	StrAdv	  100 1d4+20
+	default_points  100
+	title	   Shepherd
+	Unhides	 1
+	DropStat	dex int
 }
 
 Skill 21
 {
-        Name            Hiding
-        SkillId         21
-        Script          :hiding:hiding
-        Delay           10
-        DexAdv          100 1d4+20
-        default_points  50
-        title           Rogue
-        Unhides         0
-        DropStat        str int
+	Name	    Hiding
+	SkillId	 21
+	Script	  :hiding:hiding
+	Delay	   10
+	DexAdv	  100 1d4+20
+	default_points  50
+	title	   Rogue
+	Unhides	 0
+	DropStat	str int
 }
 
 Skill 22
 {
-        Name            Provocation
-        SkillId         22
-        Script          :musicianship:provocation
-        default_points  100
-        dexadv          100 1d2
-        title           Bard
-        Unhides         1
-        DropStat        str int
+	Name	    Provocation
+	SkillId	 22
+	Script	  :musicianship:provocation
+	default_points  100
+	dexadv	  100 1d2
+	title	   Bard
+	Unhides	 1
+	DropStat	str int
 }
 
 Skill 23
 {
-        Name            Inscription
-        SkillId         23
-        Script          :inscription:inscription
-        Delay           3
-        IntAdv          100 1d4+20
-        default_points  100
-        title           Scribe
-        Unhides         0
-        DropStat        str dex
+	Name	    Inscription
+	SkillId	 23
+	Script	  :inscription:inscription
+	Delay	   3
+	IntAdv	  100 1d4+20
+	default_points  100
+	title	   Scribe
+	Unhides	 0
+	DropStat	str dex
 }
 
 Skill 24
 {
-        Name            Lockpicking
-        SkillId         24
-        Delay           15
-        DexAdv          100 1d3+10
-        default_points  100
-        title           Rogue
-        Unhides         0
-        DropStat        str int
+	Name	    Lockpicking
+	SkillId	 24
+	Delay	   15
+	DexAdv	  100 1d3+10
+	default_points  100
+	title	   Rogue
+	Unhides	 0
+	DropStat	str int
 }
 
 Skill 25
 {
-        Name            Magery
-        SkillId         25
-        IntAdv          100 1d4+20
-        default_points  100
-        title           Mage
-        Unhides         1
-        DropStat        str dex
+	Name	    Magery
+	SkillId	 25
+	IntAdv	  100 1d4+20
+	default_points  100
+	title	   Mage
+	Unhides	 1
+	DropStat	str dex
 }
 
 Skill 26
 {
-        Name            MagicResistance
-        SkillId         26
-        IntAdv          100 1d4+20
-        default_points  100
-        title           Mage
-        Unhides         1
-        DropStat        dex
+	Name	    MagicResistance
+	SkillId	 26
+	IntAdv	  100 1d4+20
+	default_points  100
+	title	   Mage
+	Unhides	 1
+	DropStat	dex
 }
 
 Skill 27
 {
-        Name            Tactics
-        SkillId         27
-        default_points  40
-        title           Warrior
-        DropStat        dex
+	Name	    Tactics
+	SkillId	 27
+	default_points  40
+	title	   Warrior
+	DropStat	dex
 }
 
 Skill 28
 {
-        Name            Snooping
-        SkillId         28
-        Delay           5
-        Unhides         0
-        DexAdv          80 4d6+10
-        default_points  200
-        DropStat        str int
+	Name	    Snooping
+	SkillId	 28
+	Delay	   5
+	Unhides	 0
+	DexAdv	  80 4d6+10
+	default_points  200
+	DropStat	str int
 }
 
 Skill 29
 {
-        Name            Musicianship
-        SkillId         29
-        Delay           15
-        IntAdv          100 1d2+10
-        DexAdv          100 1d4+20
-        default_points  100
-        title           Bard
-        Unhides         1
-        DropStat        str
+	Name	    Musicianship
+	SkillId	 29
+	Delay	   15
+	IntAdv	  100 1d2+10
+	DexAdv	  100 1d4+20
+	default_points  100
+	title	   Bard
+	Unhides	 1
+	DropStat	str
 }
 
 Skill 30
 {
-        Name            Poisoning
-        SkillId         30
-        Script          :poisoning:poisonSkill
-        Delay           10
-        IntAdv          100 1d2+10
-        DexAdv          100 1d4+20
-        default_points  50
-        title           Assassin
-        Unhides         0
-        DropStat        str
+	Name	    Poisoning
+	SkillId	 30
+	Script	  :poisoning:poisonSkill
+	Delay	   10
+	IntAdv	  100 1d2+10
+	DexAdv	  100 1d4+20
+	default_points  50
+	title	   Assassin
+	Unhides	 0
+	DropStat	str
 }
 
 Skill 31
 {
-        Name            Archery
-        SkillId         31
-        DexAdv          100 1d4+20
-        StrAdv          100 1d2+10
-        title           Archer
-        Unhides         1
-        DropStat        int
+	Name	    Archery
+	SkillId	 31
+	DexAdv	  100 1d4+20
+	StrAdv	  100 1d2+10
+	title	   Archer
+	Unhides	 1
+	DropStat	int
 }
 
 Skill 32
 {
-        Name            SpiritSpeak
-        SkillId         32
-        Script          :spiritspeak:spiritSpeak
-        Delay           10
-        IntAdv          100 1d4+20
-        default_points  50
-        title           Medium
-        Unhides         1
-        DropStat        str dex
+	Name	    SpiritSpeak
+	SkillId	 32
+	Script	  :spiritspeak:spiritSpeak
+	Delay	   10
+	IntAdv	  100 1d4+20
+	default_points  50
+	title	   Medium
+	Unhides	 1
+	DropStat	str dex
 }
 
 Skill 33
 {
-        Name            Stealing
-        SkillId         33
-        Script          :stealing:stealing
-        Delay           15
-        Unhides         0
-        DexAdv          90 3d4+9
-        default_points  200
-        Unhides         1
-        DropStat        str int
+	Name	    Stealing
+	SkillId	 33
+	Script	  :stealing:stealing
+	Delay	   15
+	Unhides	 0
+	DexAdv	  90 3d4+9
+	default_points  200
+	Unhides	 1
+	DropStat	str int
 }
 
 Skill 34
 {
-        Name            Tailoring
-        SkillId         34
-        Delay           15
-        DexAdv          100 1d1+10
-        default_points  100
-        title           Tailor
-        Unhides         0
-        DropStat        str int
+	Name	    Tailoring
+	SkillId	 34
+	Delay	   15
+	DexAdv	  100 1d1+10
+	default_points  100
+	title	   Tailor
+	Unhides	 0
+	DropStat	str int
 }
 
 Skill 35
 {
-        Name            AnimalTaming
-        SkillId         35
-        Script          :taming:taming
-        Delay           10
-        StrAdv          100 1d4+20
-        IntAdv          100 1d3+10
-        default_points  50
-        title           Tamer
-        Unhides         1
-        DropStat        dex
+	Name	    AnimalTaming
+	SkillId	 35
+	Script	  :taming:taming
+	Delay	   10
+	StrAdv	  100 1d4+20
+	IntAdv	  100 1d3+10
+	default_points  50
+	title	   Tamer
+	Unhides	 1
+	DropStat	dex
 }
 
 Skill 36
 {
-        Name            TasteIdentification
-        SkillId         36
-        Script          :tasteid:tasteID
-        Delay           10
-        IntAdv          100 1d4+20
-        default_points  50
-        title           Chef
-        Unhides         0
-        DropStat        str dex
+	Name	    TasteIdentification
+	SkillId	 36
+	Script	  :tasteid:tasteID
+	Delay	   10
+	IntAdv	  100 1d4+20
+	default_points  50
+	title	   Chef
+	Unhides	 0
+	DropStat	str dex
 }
 
 Skill 37
 {
-        Name            Tinkering
-        SkillId         37
-        Delay           10
-        StrAdv          100 1d4+20
-        IntAdv          100 1d4+20
-        default_points  100
-        title           Tinker
-        DropStat        dex
+	Name	    Tinkering
+	SkillId	 37
+	Delay	   10
+	StrAdv	  100 1d4+20
+	IntAdv	  100 1d4+20
+	default_points  100
+	title	   Tinker
+	DropStat	dex
 }
 
 Skill 38
 {
-        Name            Tracking
-        SkillId         38
-        Script          :tracking:tracking
-        Delay           10
-        IntAdv          100 1d4+20
-        DexAdv          100 1d2+10
-        default_points  50
-        Unhides         1
-        DropStat        str
+	Name	    Tracking
+	SkillId	 38
+	Script	  :tracking:tracking
+	Delay	   10
+	IntAdv	  100 1d4+20
+	DexAdv	  100 1d2+10
+	default_points  50
+	Unhides	 1
+	DropStat	str
 }
 
 Skill 39
 {
-        Name            Veterinary
-        SkillId         39
-        Delay           10
-        IntAdv          100 1d2+10
-        default_points  100
-        title           Healer
-        Unhides         1
-        DropStat        str dex
+	Name	    Veterinary
+	SkillId	 39
+	Delay	   10
+	IntAdv	  100 1d2+10
+	default_points  100
+	title	   Healer
+	Unhides	 1
+	DropStat	str dex
 }
 
 Skill 40
 {
-        Name            Swordsmanship
-        SkillId         40
-        StrAdv          100 1d3+20
-        DexAdv          100 1d3
-        title           Swordsman
-        Unhides         1
-        DropStat        int
+	Name	    Swordsmanship
+	SkillId	 40
+	StrAdv	  100 1d3+20
+	DexAdv	  100 1d3
+	title	   Swordsman
+	Unhides	 1
+	DropStat	int
 }
 
 Skill 41
 {
-        Name            Macefighting
-        SkillId         41
-        StrAdv          100 1d4+30
-        DexAdv          100 1d2
-        title           Armsman
-        Unhides         1
-        DropStat        int
+	Name	    Macefighting
+	SkillId	 41
+	StrAdv	  100 1d4+30
+	DexAdv	  100 1d2
+	title	   Armsman
+	Unhides	 1
+	DropStat	int
 }
 
 Skill 42
 {
-        Name            Fencing
-        SkillId         42
-        StrAdv          100 1d2+10
-        DexAdv          100 1d3+10
-        title           Fencer
-        Unhides         1
-        DropStat        int
+	Name	    Fencing
+	SkillId	 42
+	StrAdv	  100 1d2+10
+	DexAdv	  100 1d3+10
+	title	   Fencer
+	Unhides	 1
+	DropStat	int
 }
 
 Skill 43
 {
-        Name            Wrestling
-        SkillId         43
-        StrAdv          100 1d2+20
-        DexAdv          100 1d4
-        title           Wrestler
-        Unhides         1
-        DropStat        int
+	Name	    Wrestling
+	SkillId	 43
+	StrAdv	  100 1d2+20
+	DexAdv	  100 1d4
+	title	   Wrestler
+	Unhides	 1
+	DropStat	int
 }
 
 Skill 44
 {
-        Name            Lumberjacking
-        SkillId         44
-        StrAdv          100 1d4+20
-        default_points  100
-        title           Lumberjack
-        Unhides         1
-        DropStat        dex int
+	Name	    Lumberjacking
+	SkillId	 44
+	StrAdv	  100 1d4+20
+	default_points  100
+	title	   Lumberjack
+	Unhides	 1
+	DropStat	dex int
 }
 
 Skill 45
 {
-        Name            Mining
-        SkillId         45
-        Delay           10
-        StrAdv          100 1d4+20
-        default_points  100
-        title           Miner
-        Unhides         1
-        DropStat        dex int
+	Name	    Mining
+	SkillId	 45
+	Delay	   10
+	StrAdv	  100 1d4+20
+	default_points  100
+	title	   Miner
+	Unhides	 1
+	DropStat	dex int
 }
 
 Skill 46
 {
-        Name            Meditation
-        SkillId         46
-        Script          :meditation:meditation
-        Delay           10
-        IntAdv          100 1d4+20
-        default_points  100
-        title           Stoic
-        Unhides         1
-        DropStat        str dex
+	Name	    Meditation
+	SkillId	 46
+	Script	  :meditation:meditation
+	Delay	   10
+	IntAdv	  100 1d4+20
+	default_points  100
+	title	   Stoic
+	Unhides	 1
+	DropStat	str dex
 }
 
 Skill 47
 {
-        Name            Stealth
-        SkillId         47
-        Script          :stealth:stealth
-        Delay           10
-        Unhides         0
-        DexAdv          100 1d4+20
-        default_points  50
-        title           Rogue
-        DropStat        str int
+	Name	    Stealth
+	SkillId	 47
+	Script	  :stealth:stealth
+	Delay	   10
+	Unhides	 0
+	DexAdv	  100 1d4+20
+	default_points  50
+	title	   Rogue
+	DropStat	str int
 }
 
 Skill 48
 {
-        Name            RemoveTrap
-        SkillId         48
-        Script          removeTrap
-        Delay           10
-        DexAdv          100 1d4+20
-        default_points  50
-        title           Rogue
-        DropStat        str int
+	Name	    RemoveTrap
+	SkillId	 48
+	Script	  removeTrap
+	Delay	   10
+	DexAdv	  100 1d4+20
+	default_points  50
+	title	   Rogue
+	DropStat	str int
 }
 
 Skill 49
 {
-        Name            Necromancy
-        SkillId         49
-        IntAdv          100 1d4+20
-        default_points  100
-        title           Necromancer
-        DropStat        str dex
+	Name	    Necromancy
+	SkillId	 49
+	IntAdv	  100 1d4+20
+	default_points  100
+	title	   Necromancer
+	DropStat	str dex
 }
 
 Skill 50
 {
-        Name            Focus
-        SkillId         50
-        IntAdv          100 1d4+20
-        default_points  100
-        title           Monk
-        DropStat        str dex
+	Name	    Focus
+	SkillId	 50
+	IntAdv	  100 1d4+20
+	default_points  100
+	title	   Monk
+	DropStat	str dex
 }
 
 Skill 51
 {
-        Name            Chivalry
-        SkillId         51
-        IntAdv          100 1d4+20
-        default_points  100
-        title           Paladin
-        Unhides         1
-        DropStat        str dex
+	Name	    Chivalry
+	SkillId	 51
+	IntAdv	  100 1d4+20
+	default_points  100
+	title	   Paladin
+	Unhides	 1
+	DropStat	str dex
 }
\ No newline at end of file

Modified: trunk/096/pkg/systems/attributes/vitals.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/vitals.cfg	2005-09-21 13:08:14 UTC (rev 211)
+++ trunk/096/pkg/systems/attributes/vitals.cfg	2005-09-21 15:10:10 UTC (rev 212)
@@ -28,18 +28,18 @@
 Vital Hits
 {
     Alias               Life
-    RegenRateFunction	:attributes:hooks/regenRate:GetHitsRegenRate
-    MaximumFunction	:attributes:hooks/regenRate:GetHitsMaximumValue
+    RegenRateFunction	:attributes:hooks/vitalInit:GetHitsRegenRate
+    MaximumFunction	:attributes:hooks/vitalInit:GetHitsMaximumValue
 }
 
 Vital Mana
 {
-    RegenRateFunction	:attributes:hooks/regenRate:GetManaRegenRate
-    MaximumFunction	:attributes:hooks/regenRate:GetManaMaximumValue
+    RegenRateFunction	:attributes:hooks/vitalInit:GetManaRegenRate
+    MaximumFunction	:attributes:hooks/vitalInit:GetManaMaximumValue
 }
 
 Vital Stamina
 {
-    RegenRateFunction	:attributes:hooks/regenRate:GetStaminaRegenRate
-    MaximumFunction	:attributes:hooks/regenRate:GetStaminaMaximumValue
+    RegenRateFunction	:attributes:hooks/vitalInit:GetStaminaRegenRate
+    MaximumFunction	:attributes:hooks/vitalInit:GetStaminaMaximumValue
 }



From austin at berlios.de  Wed Sep 21 17:11:14 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 21 Sep 2005 17:11:14 +0200
Subject: [Poldistro-svn] r213 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509211511.j8LFBEWx014219@sheep.berlios.de>

Author: austin
Date: 2005-09-21 17:11:14 +0200 (Wed, 21 Sep 2005)
New Revision: 213

Modified:
   trunk/096/pkg/systems/attributes/include/regen.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/regen.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-21 15:10:10 UTC (rev 212)
+++ trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-21 15:11:14 UTC (rev 213)
@@ -105,5 +105,7 @@
 		return error{"errortext":="Regen prop must be a dictionary."};
 	endif
 	
+	RecalcVitals(mobile);
+	
 	return SetObjProperty(mobile, "%RegenRates%", regen_prop);
 endfunction
\ No newline at end of file



From austin at berlios.de  Wed Sep 21 17:50:33 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 21 Sep 2005 17:50:33 +0200
Subject: [Poldistro-svn] r214 - trunk/096/pkg/mobiles/ai_brain/commands/gm
Message-ID: <200509211550.j8LFoX4S017104@sheep.berlios.de>

Author: austin
Date: 2005-09-21 17:50:32 +0200 (Wed, 21 Sep 2005)
New Revision: 214

Modified:
   trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src	2005-09-21 15:11:14 UTC (rev 213)
+++ trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src	2005-09-21 15:50:32 UTC (rev 214)
@@ -5,7 +5,7 @@
 
 include ":gumps:include/requestgump";
 
-program cmd_npcwipe(who, text)
+program cmd_npcwipe(who)
 	Set_Priority(100);
 	
 	var realm_name := RequestGump(who, "Enter the realm name to perform the wipe on.", "", who.realm);



From austin at berlios.de  Thu Sep 22 01:37:40 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 22 Sep 2005 01:37:40 +0200
Subject: [Poldistro-svn] r215 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509212337.j8LNbevv023303@sheep.berlios.de>

Author: austin
Date: 2005-09-22 01:37:38 +0200 (Thu, 22 Sep 2005)
New Revision: 215

Modified:
   trunk/096/pkg/systems/attributes/include/attributeConstants.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/attributeConstants.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributeConstants.inc	2005-09-21 15:50:32 UTC (rev 214)
+++ trunk/096/pkg/systems/attributes/include/attributeConstants.inc	2005-09-21 23:37:38 UTC (rev 215)
@@ -6,10 +6,10 @@
  */
 use uo;
 
-enum ATTRIBUTE_CUSTOM
-	ATTRIBUTE_HITS_REGENERATION         := "HitsRegeneration",
-	ATTRIBUTE_MANA_REGENERATION         := "ManaRegeneration",
-	ATTRIBUTE_STAMINA_REGENERATION      := "StaminaRegeneration"
+enum VITALS
+	VITAL_HITS         := "HitsRegeneration",
+	VITAL_MANA         := "ManaRegeneration",
+	VITAL_STAMINA      := "StaminaRegeneration"
 endenum
 
 enum ATTRIBUTE_STATS



From muaddiblsd at berlios.de  Thu Sep 22 07:05:27 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Thu, 22 Sep 2005 07:05:27 +0200
Subject: [Poldistro-svn] r216 - in trunk/096/pkg/commands: include seer
Message-ID: <200509220505.j8M55RZ6027447@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-22 07:05:10 +0200 (Thu, 22 Sep 2005)
New Revision: 216

Modified:
   trunk/096/pkg/commands/include/go-add.inc
   trunk/096/pkg/commands/include/go-edit.inc
   trunk/096/pkg/commands/include/go-gumps.inc
   trunk/096/pkg/commands/seer/go.src
Log:
Updated some indentation.
Optimized out the dual functions for public/private.

Modified: trunk/096/pkg/commands/include/go-add.inc
===================================================================
--- trunk/096/pkg/commands/include/go-add.inc	2005-09-21 23:37:38 UTC (rev 215)
+++ trunk/096/pkg/commands/include/go-add.inc	2005-09-22 05:05:10 UTC (rev 216)
@@ -1,249 +1,198 @@
-function Go_AddPrivateLocation(who)
+function Go_AddNewLocation(who, public:=1)
 
-        SendSysMessage(who, "Click where you want the new personal Go Location to go to.");
-        var targ := TargetCoordinates(who);
+	SendSysMessage(who, "Click where you want the new Go Location to go to.");
+	var targ := TargetCoordinates(who);
 
-        if (!targ)
-                SendSysMessage(who, "Cancelled");
-                return 0;
-        endif
+	if (!targ)
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	endif
 
-        var name := RequestInput(who, who.backpack, "What do you want to call this go location?");
+	var name := RequestInput(who, who.backpack, "What do you want to call this go location?");
 
-        if ( !name )
-                SendSysMessage(who, "Cancelled");
-                return 0;
-        endif
+	if ( !name )
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	endif
 
-        go_prop := go_elem.GetProp(who.acctname);
-        if ( go_prop.Exists(lower(name)) )
-                GumpPrompt(who, "You already have a go location named ["+name+"]");
-                return 0;
-        endif
+	if( public )
+		go_prop_base := go_elem.GetProp("base_Distro");
+		if ( go_prop_base.Exists(lower(name)) )
+			GumpPrompt(who, "You already have a public go location named ["+name+"]");
+			return 0;
+		endif
+		Go_SetLocation("base_Distro", who, name, targ.realm, targ.x, targ.y, targ.z);
+		GumpPrompt(who, "New public go location added: ["+name+"]");
+	else
+		go_prop := go_elem.GetProp(who.acctname);
+		if ( go_prop.Exists(lower(name)) )
+			GumpPrompt(who, "You already have a private go location named ["+name+"]");
+			return 0;
+		endif
+		Go_SetLocation(who.acctname, who, name, targ.realm, targ.x, targ.y, targ.z);
+		GumpPrompt(who, "New private go location added: ["+name+"]");
+	endif
 
-        Go_SetLocation(who.acctname, who, name, targ.realm, targ.x, targ.y, targ.z);
+	return 0;
 
-        return 0;
-
 endfunction
 
-function Go_AddPublicLocation(who)
+function Go_CopyLocation(who, public:=1)
 
-        SendSysMessage(who, "Click where you want the new public Go Location to go to.");
-        var targ := TargetCoordinates(who);
+	var gump;
+	if( public )
+		gump := Go_RetrieveGump("CopyIndex", "base_Distro");
+		num_keys := go_keys_base.size();
+	else
+		gump := Go_RetrieveGump("CopyIndex", who.acctname);
+		num_keys := go_keys.size();
+	endif
 
-        if (!targ)
-                SendSysMessage(who, "Cancelled");
-                return 0;
-        endif
+	if  ( !gump )
+		if( public )
+			gump := Go_LocationCopyGump(1);
+			Go_SaveGump("CopyIndex", gump, "base_Distro");
+		else
+			gump := Go_LocationCopyGump(0);
+			Go_SaveGump("CopyIndex", gump, who.acctname);
+		endif
+	endif
 
-        var name := RequestInput(who, who.backpack, "What do you want to call this go location?");
+	var input := GFSendGump(who, gump);
+	input := input[0];
 
-        if ( !name )
-                SendSysMessage(who, "Cancelled");
-                return 0;
-        endif
+	if(input)
+		var send_Location := 0;
+		if( public )
+			send_Location := go_prop_base[lower(go_keys_base[input])];
+		else
+			send_Location := go_prop[lower(go_keys[input])];
+		endif
+		if ( send_Location )
+			if( public )
+				go_prop_base := go_elem.GetProp("base_Distro");
+				if ( go_prop.Exists(lower(send_Location.Name)) )
+					GumpPrompt(who, "You already have a private go location named ["+send_Location.Name+"]");
+					return 0;
+				endif
+				Go_SetLocation(who.acctname, who, send_Location.Name, send_Location.Realm, send_Location.X, send_Location.Y, send_Location.Z);
+				GumpPrompt(who, "Copied [" + send_Location.Name + "] to your private menu.");
+			else
+				go_prop := go_elem.GetProp(who.acctname);
+				if ( go_prop_base.Exists(lower(send_Location.Name)) )
+					GumpPrompt(who, "You already have a public go location named ["+send_Location.Name+"]");
+					return 0;
+				endif
+				Go_SetLocation("base_Distro", who, send_Location.Name, send_Location.Realm, send_Location.X, send_Location.Y, send_Location.Z);
+				GumpPrompt(who, "Copied [" + send_Location.Name + "] to the public menu.");
+			endif
+			return 0;
+		else
+			GumpPrompt(who, "Location [" + send_Location.Name + "] does not exist.");
+			Go_RefreshMyGumps(who);
+			return 0;
+		endif
+	else
+		SendSysMessage(who, "Copying Cancelled");
+		Go_RefreshMyGumps(who);
+		return 0;
+	endif
 
-        go_prop_base := go_elem.GetProp("base_Distro");
-        if ( go_prop_base.Exists(lower(name)) )
-                GumpPrompt(who, "You already have a go location named ["+name+"]");
-                return 0;
-        endif
+	return 0;
 
-        Go_SetLocation("base_Distro", who, name, targ.realm, targ.x, targ.y, targ.z);
-
-        return 0;
-
 endfunction
 
-function Go_CopyPublicLocation(who)
-
-        var gump := Go_RetrieveGump("CopyIndex", "base_Distro");
-        num_keys := go_keys_base.size();
-        if  ( !gump )
-                gump := Go_PublicCopyGump();
-                Go_SaveGump("CopyIndex", gump, "base_Distro");
-        endif
-
-        var input := GFSendGump(who, gump);
-        input := input[0];
-
-        if(input)
-                var send_Location := 0;
-                send_Location := go_prop_base[lower(go_keys_base[input])];
-                if ( send_Location )
-                        go_prop_base := go_elem.GetProp("base_Distro");
-                        if ( go_prop.Exists(lower(send_Location.Name)) )
-                                GumpPrompt(who, "You already have a go location named ["+send_Location.Name+"]");
-                                return 0;
-                        endif
-                        SendSysMessage(who, "Copying [" + send_Location.Name + "] to your personal menu.");
-                        Go_SetLocation(who.acctname, who, send_Location.Name, send_Location.Realm, send_Location.X, send_Location.Y, send_Location.Z);
-                        return 0;
-                else
-                        GumpPrompt(who, "Location [" + send_Location.Name + "] does not exist.");
-                        Go_RefreshMyGumps(who);
-                        return 0;
-                endif
-        else
-                SendSysMessage(who, "Copying Cancelled");
-                Go_RefreshMyGumps(who);
-                return 0;
-        endif
-
-        return 0;
-
-endfunction
-
-function Go_CopyPrivateLocation(who)
-
-        var gump := Go_RetrieveGump("CopyIndex", who.acctname);
-        num_keys := go_keys.size();
-        if  ( !gump )
-                gump := Go_PrivateCopyGump();
-                Go_SaveGump("CopyIndex", gump, who.acctname);
-        endif
-
-        var input := GFSendGump(who, gump);
-        input := input[0];
-
-        if(input)
-                var send_Location := 0;
-                send_Location := go_prop[lower(go_keys[input])];
-                if ( send_Location )
-                        go_prop := go_elem.GetProp(who.acctname);
-                        if ( go_prop_base.Exists(lower(send_Location.Name)) )
-                                GumpPrompt(who, "You already have a public go location named ["+send_Location.Name+"]");
-                                return 0;
-                        endif
-                        SendSysMessage(who, "Copying [" + send_Location.Name + "] to the public menu.");
-                        Go_SetLocation("base_Distro", who, send_Location.Name, send_Location.Realm, send_Location.X, send_Location.Y, send_Location.Z);
-                        return 0;
-                else
-                        GumpPrompt(who, "Location [" + send_Location.Name + "] does not exist.");
-                        Go_RefreshMyGumps(who);
-                        return 0;
-                endif
-        else
-                SendSysMessage(who, "Copying Cancelled");
-                Go_RefreshMyGumps(who);
-                return 0;
-        endif
-
-        return 0;
-
-endfunction
-
 function Go_SetLocation(gump_Type, who, name, realm, x, y, z)
 
-        if( !realm )
-          realm := who.realm;
-        endif
+	if( !realm )
+		realm := who.realm;
+	endif
 
-        z := GetMapInfo(x, y, realm).z;
+	z := GetMapInfo(x, y, realm).z;
 
-        var temp := dictionary;
-        temp.+Name := lower(name);
-        temp.+Realm := lower(realm);
-        temp.+X := x;
-        temp.+Y := y;
-        temp.+Z := z;
-        case(gump_Type)
-          "base_Distro": go_prop_base[lower(name)] := temp;
-                         go_elem.SetProp(gump_Type, go_prop_base);
-          default: go_prop[lower(name)] := temp;
-                   go_elem.SetProp(gump_Type, go_prop);
-        endcase
-        Go_RefreshMyGumps(who);
+	var temp := dictionary;
+	temp.+Name := lower(name);
+	temp.+Realm := lower(realm);
+	temp.+X := x;
+	temp.+Y := y;
+	temp.+Z := z;
+	case(gump_Type)
+		"base_Distro": go_prop_base[lower(name)] := temp;
+			       go_elem.SetProp(gump_Type, go_prop_base);
+		default:       go_prop[lower(name)] := temp;
+                               go_elem.SetProp(gump_Type, go_prop);
+	endcase
+	Go_RefreshMyGumps(who);
 
-        return 0;
+	return 0;
 
 endfunction
 
-function Go_PublicCopyGump()
+function Go_LocationCopyGump(public:=1)
 
-        var gump := GFCreateGump();
-        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
-        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
-        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
-        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
-        GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
-        GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
-        GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Copy");
-        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
+	var gump := GFCreateGump();
+	GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
+	GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
+	if( public )
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
+	else
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
+	endif
+	GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
+	GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
+	GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
+	GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Copy");
+	GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
 
+	GFPage(gump, 1);
 
-        GFPage(gump, 1);
+	var y_loc := 85;
+	var page_num := 1;
+	var counter := 1;
+	var line_num := 0;
 
-        var y_loc := 85;
-        var page_num := 1;
-        var counter := 1;
-        var line_num := 0;
+	if( public )
+		go_keys_base.sort();
+		foreach place in ( go_keys_base )
+			GFTextLine(gump,  25, y_loc, 2100, go_prop_base[place].Name);
+			GFTextLine(gump, 175, y_loc, 2100, go_prop_base[place].Realm);
+			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
 
-        go_keys_base.sort();
-        foreach place in ( go_keys_base )
-                GFTextLine(gump,  25, y_loc, 2100, go_prop_base[place].Name);
-                GFTextLine(gump, 175, y_loc, 2100, go_prop_base[place].Realm);
-                GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+			counter := counter + 1;
+			line_num := line_num+1;
+			y_loc := y_loc + 20;
+			if ( line_num >= 18 && line_num < num_keys )
+				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+				page_num := page_num + 1;
+				GFPage(gump, page_num);
+				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+				y_loc := 85;
+				line_num := 0;
+			endif
+			sleepms(2);
+		endforeach
+	else
+		go_keys.sort();
+		foreach place in ( go_keys )
+			GFTextLine(gump,  25, y_loc, 2100, go_prop[place].Name);
+			GFTextLine(gump, 175, y_loc, 2100, go_prop[place].Realm);
+			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
 
-                counter := counter + 1;
-                line_num := line_num+1;
-                y_loc := y_loc + 20;
-                if ( line_num >= 18 && line_num < num_keys )
-                        GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
-                        page_num := page_num + 1;
-                        GFPage(gump, page_num);
-                        GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
-                        y_loc := 85;
-                        line_num := 0;
-                endif
-                sleepms(2);
-        endforeach
+			counter := counter + 1;
+			line_num := line_num+1;
+			y_loc := y_loc + 20;
+			if ( line_num >= 18 && line_num < num_keys )
+				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+				page_num := page_num + 1;
+				GFPage(gump, page_num);
+				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+				y_loc := 85;
+				line_num := 0;
+			endif
+			sleepms(2);
+		endforeach
+	endif
 
-        return gump;
+	return gump;
 
-endfunction
-
-function Go_PrivateCopyGump()
-
-        var gump := GFCreateGump();
-        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
-        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
-        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
-        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
-        GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
-        GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
-        GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Copy");
-        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
-
-
-        GFPage(gump, 1);
-
-        var y_loc := 85;
-        var page_num := 1;
-        var counter := 1;
-        var line_num := 0;
-
-        go_keys.sort();
-        foreach place in ( go_keys )
-                GFTextLine(gump,  25, y_loc, 2100, go_prop[place].Name);
-                GFTextLine(gump, 175, y_loc, 2100, go_prop[place].Realm);
-                GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
-
-                counter := counter + 1;
-                line_num := line_num+1;
-                y_loc := y_loc + 20;
-                if ( line_num >= 18 && line_num < num_keys )
-                        GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
-                        page_num := page_num + 1;
-                        GFPage(gump, page_num);
-                        GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
-                        y_loc := 85;
-                        line_num := 0;
-                endif
-                sleepms(2);
-        endforeach
-
-        return gump;
-
 endfunction
\ No newline at end of file

Modified: trunk/096/pkg/commands/include/go-edit.inc
===================================================================
--- trunk/096/pkg/commands/include/go-edit.inc	2005-09-21 23:37:38 UTC (rev 215)
+++ trunk/096/pkg/commands/include/go-edit.inc	2005-09-22 05:05:10 UTC (rev 216)
@@ -1,15 +1,31 @@
-function Go_EditPublicLocation(who)
+function Go_EditSendLocation(who, public:=1)
 
-        var gump := Go_PublicEditGump();
-        num_keys := go_keys_base.size();
+	var gump;
+	if( public )
+		gump := Go_SelectEditGump(1);
+		num_keys := go_keys_base.size();
+	else
+		gump := Go_SelectEditGump(0);
+		num_keys := go_keys.size();
+	endif
 
-        var input := GFSendGump(who, gump);
+	var input := GFSendGump(who, gump);
         input := input[0];
 
         if(input)
-                var send_Location := go_prop_base[lower(go_keys_base[input])];
+		var send_Location;
+		if( public )
+			send_Location := go_prop_base[lower(go_keys_base[input])];
+		else
+			send_Location := go_prop[lower(go_keys[input])];
+		endif
                 if ( send_Location )
-                        var edit_gump := Go_EditPublicLocationGump(send_Location);
+			var edit_gump;
+			if( public )
+				edit_gump := Go_EditLocationGump(send_Location);
+			else
+				edit_gump := Go_EditLocationGump(send_Location, 0);
+			endif
                         var edit_input := GFSendGump(who, edit_gump);
 
                         if ( edit_input[edit_update] )
@@ -22,22 +38,40 @@
                                         GumpPrompt(who, "Cancelled - No name entered");
                                         return 0;
                                 elseif ( lower(edit_name) != send_Location.Name )
-                                        if ( go_prop_base.Exists( Lower(edit_name) ) )
-                                                GumpPrompt(who, "Cancelled - location already exists with the name ["+edit_name+"]");
-                                                return 0;
-                                        endif
+					if( public )
+						if ( go_prop_base.Exists( Lower(edit_name) ) )
+							GumpPrompt(who, "Cancelled - location already exists with the name ["+edit_name+"]");
+							return 0;
+						endif
+					else
+						if ( go_prop.Exists( Lower(edit_name) ) )
+							GumpPrompt(who, "Cancelled - location already exists with the name ["+edit_name+"]");
+							return 0;
+						endif
+					endif
                                 endif
 
                                 var original_Realm := send_Location.Realm;
-                                go_prop_base.erase(lower(send_Location.Name));
-                                go_elem.SetProp("base_Distro", go_prop_base);
-                                Go_SetLocation("base_Distro", who, edit_name, original_Realm, xg_pos, yg_pos, zg_pos);
+				if( public )
+					go_prop_base.erase(lower(send_Location.Name));
+					go_elem.SetProp("base_Distro", go_prop_base);
+					Go_SetLocation("base_Distro", who, edit_name, original_Realm, xg_pos, yg_pos, zg_pos);
+				else
+					go_prop.erase(lower(send_Location.Name));
+					go_elem.SetProp(who.acctname, go_prop);
+					Go_SetLocation(who.acctname, who, edit_name, original_Realm, xg_pos, yg_pos, zg_pos);
+				endif
                                 SendSysMessage(who, "Updated ["+edit_name+"]");
                                 Go_RefreshMyGumps(who);
                         elseif ( edit_input[edit_delete] )
                                 SendSysMessage(who, "Deleted [" + send_Location.Name + "]");
-                                go_prop_base.erase(lower(send_Location.Name));
-                                go_elem.SetProp("base_Distro", go_prop_base);
+				if( public )
+					go_prop_base.erase(lower(send_Location.Name));
+					go_elem.SetProp("base_Distro", go_prop_base);
+				else
+					go_prop.erase(lower(send_Location.Name));
+					go_elem.SetProp(who.acctname, go_prop);
+				endif
                                 Go_RefreshMyGumps(who);
                         else
                                 SendSysMessage(who, "Cancelled");
@@ -55,69 +89,16 @@
 
 endfunction
 
-function Go_EditPrivateLocation(who)
+function Go_SelectEditGump(public)
 
-        var gump := Go_PrivateEditGump();
-        num_keys := go_keys.size();
-
-        var input := GFSendGump(who, gump);
-        input := input[0];
-
-        if(input)
-                var send_Location := go_prop[lower(go_keys[input])];
-                if ( send_Location )
-                        var edit_gump := Go_EditPrivateLocationGump(send_Location);
-                        var edit_input := GFSendGump(who, edit_gump);
-
-                        if ( edit_input[edit_update] )
-                                edit_name := GFExtractData(edit_input, edit_name);
-                                xg_pos := CInt(GFExtractData(edit_input, xg_pos));
-                                yg_pos := CInt(GFExtractData(edit_input, yg_pos));
-                                zg_pos := CInt(GFExtractData(edit_input, zg_pos));
-
-                                if ( !edit_name )
-                                        GumpPrompt(who, "Cancelled - No name entered");
-                                        return 0;
-                                elseif ( lower(edit_name) != send_Location.Name )
-                                        if ( go_prop_base.Exists( Lower(edit_name) ) )
-                                                GumpPrompt(who, "Cancelled - location already exists with the name ["+edit_name+"]");
-                                                return 0;
-                                        endif
-                                endif
-
-                                var original_Realm := send_Location.Realm;
-                                go_prop.erase(lower(send_Location.Name));
-                                go_elem.SetProp(who.acctname, go_prop);
-                                Go_SetLocation(who.acctname, who, edit_name, original_Realm, xg_pos, yg_pos, zg_pos);
-                                SendSysMessage(who, "Updated ["+edit_name+"]");
-                                Go_RefreshMyGumps(who);
-                        elseif ( edit_input[edit_delete] )
-                                SendSysMessage(who, "Deleted [" + send_Location.Name + "]");
-                                go_prop.erase(lower(send_Location.Name));
-                                go_elem.SetProp(who.acctname, go_prop);
-                                Go_RefreshMyGumps(who);
-                        else
-                                SendSysMessage(who, "Cancelled");
-                        endif
-                else
-                        GumpPrompt(who, "Location [" + send_Location.Name + "] does not exist.");
-                        return 0;
-                endif
-        else
-                SendSysMessage(who, "Editing Cancelled");
-                return 0;
-        endif
-
-        return 0;
-
-endfunction
-
-function Go_PublicEditGump()
-
-        var gump := GFCreateGump();
-        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
-        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
-        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
+	var gump := GFCreateGump();
+	GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
+	GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
+	if( public )
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
+	else
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
+	endif
         GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
         GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
         GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
@@ -132,80 +113,62 @@
         var counter := 1;
         var line_num := 0;
 
-        go_keys_base.sort();
-        foreach place in ( go_keys_base )
-                GFTextLine(gump,  25, y_loc, 2100, go_prop_base[place].Name);
-                GFTextLine(gump, 175, y_loc, 2100, go_prop_base[place].Realm);
-                GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+	if( public )
+		go_keys_base.sort();
+		foreach place in ( go_keys_base )
+			GFTextLine(gump,  25, y_loc, 2100, go_prop_base[place].Name);
+			GFTextLine(gump, 175, y_loc, 2100, go_prop_base[place].Realm);
+			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
 
-                counter := counter + 1;
-                line_num := line_num+1;
-                y_loc := y_loc + 20;
-                if ( line_num >= 18 && line_num < num_keys )
-                        GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
-                        page_num := page_num + 1;
-                        GFPage(gump, page_num);
-                        GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
-                        y_loc := 85;
-                        line_num := 0;
-                endif
-                sleepms(2);
-        endforeach
+			counter := counter + 1;
+			line_num := line_num+1;
+			y_loc := y_loc + 20;
+			if ( line_num >= 18 && line_num < num_keys )
+				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+				page_num := page_num + 1;
+				GFPage(gump, page_num);
+				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+				y_loc := 85;
+				line_num := 0;
+			endif
+			sleepms(2);
+		endforeach
+	else
+		go_keys.sort();
+		foreach place in ( go_keys )
+			GFTextLine(gump,  25, y_loc, 2100, go_prop[place].Name);
+			GFTextLine(gump, 175, y_loc, 2100, go_prop[place].Realm);
+			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
 
-        return gump;
+			counter := counter + 1;
+			line_num := line_num+1;
+			y_loc := y_loc + 20;
+			if ( line_num >= 18 && line_num < num_keys )
+				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+				page_num := page_num + 1;
+				GFPage(gump, page_num);
+				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+				y_loc := 85;
+				line_num := 0;
+			endif
+			sleepms(2);
+		endforeach
+	endif
 
-endfunction
-
-function Go_PrivateEditGump()
-
-        var gump := GFCreateGump();
-        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
-        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
-        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
-        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
-        GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
-        GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
-        GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Edit");
-        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
-
-
-        GFPage(gump, 1);
-
-        var y_loc := 85;
-        var page_num := 1;
-        var counter := 1;
-        var line_num := 0;
-
-        go_keys.sort();
-        foreach place in ( go_keys )
-                GFTextLine(gump,  25, y_loc, 2100, go_prop[place].Name);
-                GFTextLine(gump, 175, y_loc, 2100, go_prop[place].Realm);
-                GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
-
-                counter := counter + 1;
-                line_num := line_num+1;
-                y_loc := y_loc + 20;
-                if ( line_num >= 18 && line_num < num_keys )
-                        GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
-                        page_num := page_num + 1;
-                        GFPage(gump, page_num);
-                        GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
-                        y_loc := 85;
-                        line_num := 0;
-                endif
-                sleepms(2);
-        endforeach
-
         return gump;
 
 endfunction
 
-function Go_EditPublicLocationGump(send_Location)
+function Go_EditLocationGump(send_Location, public:=1)
 
         var gump := GFCreateGump();
         GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
         GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
-        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
+	if(public)
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
+	else
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
+	endif
         GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
         GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
         edit_update := GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, UPDATE_BUTTON);
@@ -231,37 +194,4 @@
 
         return gump;
 
-endfunction
-
-function Go_EditPrivateLocationGump(send_Location)
-
-        var gump := GFCreateGump();
-        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
-        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
-        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
-        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
-        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
-        edit_update := GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, UPDATE_BUTTON);
-        GFHTMLArea(gump,  57, 480, 40, 20, "<basefont color=#7FFFD4>Update");
-        edit_delete := GFAddButton(gump, 100, 477, 4005, 4007, GF_CLOSE_BTN, DELETE_BUTTON);
-        GFHTMLArea(gump,  132, 480, 40, 20, "<basefont color=#7FFFD4>Delete");
-
-        GFTextLine(gump, 20, 120, 2100, "Name");
-        GFResizePic(gump, 120, 117, 2620, 180, 30);
-        edit_name := GFTextEntry(gump, 130, 122, 160, 25, 2100, send_Location.Name);
-
-        GFTextLine(gump, 20, 143, 2100, "X Coordinate");
-        GFResizePic(gump, 120, 140, 2620, 100, 30);
-        xg_pos := GFTextEntry(gump, 130, 145, 80, 25, 2100, send_Location.X);
-
-        GFTextLine(gump, 20, 166, 2100, "Y Coordinate");
-        GFResizePic(gump, 120, 163, 2620, 100, 30);
-        yg_pos := GFTextEntry(gump, 130, 168, 80, 25, 2100, send_Location.Y);
-
-        GFTextLine(gump, 20, 189, 2100, "Z Coordinate");
-        GFResizePic(gump, 120, 186, 2620, 100, 30);
-        zg_pos := GFTextEntry(gump, 130, 191, 80, 25, 2100, send_Location.Z);
-
-        return gump;
-
-endfunction
+endfunction
\ No newline at end of file

Modified: trunk/096/pkg/commands/include/go-gumps.inc
===================================================================
--- trunk/096/pkg/commands/include/go-gumps.inc	2005-09-21 23:37:38 UTC (rev 215)
+++ trunk/096/pkg/commands/include/go-gumps.inc	2005-09-22 05:05:10 UTC (rev 216)
@@ -13,9 +13,9 @@
         endif
         if  ( !gump )
                 if(gump_Type == "base_Distro")
-                        gump := Go_PublicIndexGump();
+                        gump := Go_LocationIndexGump(1);
                 else
-                        gump := Go_PersonalIndexGump();
+                        gump := Go_LocationIndexGump(0);
                 endif
                 Go_SaveGump("LocationIndex", gump, gump_Type);
         endif
@@ -26,17 +26,17 @@
         case(input)
           0: SendSysMessage(who, "Closed");
              return 0;
-          ADD_NEW_PUBLIC:     Go_AddPublicLocation(who);
+          ADD_NEW_PUBLIC:     Go_AddNewLocation(who, 1);
                               return 0;
-          ADD_NEW_PRIVATE:    Go_AddPrivateLocation(who);
+          ADD_NEW_PRIVATE:    Go_AddNewLocation(who, 0);
                               return 0;
-          COPY_PUBLIC_ITEM:   Go_CopyPublicLocation(who);
+          COPY_PUBLIC_ITEM:   Go_CopyLocation(who, 1);
                               return 0;
-          COPY_PRIVATE_ITEM:  Go_CopyPrivateLocation(who);
+          COPY_PRIVATE_ITEM:  Go_CopyLocation(who, 0);
                               return 0;
-          EDIT_PUBLIC_ITEM:   Go_EditPublicLocation(who);
+          EDIT_PUBLIC_ITEM:   print("Edit Public"); Go_EditSendLocation(who, 1);
                               return 0;
-          EDIT_PRIVATE_ITEM:  Go_EditPrivateLocation(who);
+          EDIT_PRIVATE_ITEM:  Go_EditSendLocation(who, 0);
                               return 0;
           SHOW_PUBLIC_INDEX:  SetObjProperty(who, "#Go_Gump", 1);
                               Go_LocationIndex(who);
@@ -93,113 +93,98 @@
 
 endfunction
 
-function Go_PersonalIndexGump()
+function Go_LocationIndexGump(public:=1)
 
-        var gump := GFCreateGump();
-        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
-        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
-        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
-        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
-        GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
-        GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
-        GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Send");
-        GFHTMLArea(gump, 345, 60, 150, 20, "<basefont color=#7FFFD4>Goto");
-        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
-        GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, ADD_NEW_PRIVATE);
-        GFHTMLArea(gump,  57, 480, 30, 20, "<basefont color=#7FFFD4>Add");
-        GFAddButton(gump, 100, 477, 4005, 4007, GF_CLOSE_BTN, COPY_PRIVATE_ITEM);
-        GFHTMLArea(gump,  132, 480, 30, 20, "<basefont color=#7FFFD4>Copy");
-        GFAddButton(gump, 175, 477, 4008, 4010, GF_CLOSE_BTN, EDIT_PRIVATE_ITEM);
-        GFHTMLArea(gump,  207, 480, 30, 20, "<basefont color=#7FFFD4>Edit");
-        GFAddButton(gump, 250, 477, 4008, 4010, GF_CLOSE_BTN, SHOW_PUBLIC_INDEX);
-        GFHTMLArea(gump,  282, 480, 100, 20, "<basefont color=#7FFFD4>Public Menu");
+	var gump := GFCreateGump();
+	GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
+	GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
+	if( public )
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
+	else
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
+	endif
+	GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
+	GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
+	GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
+	GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Send");
+	GFHTMLArea(gump, 345, 60, 150, 20, "<basefont color=#7FFFD4>Goto");
+	GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
+	if( public )
+		GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, ADD_NEW_PUBLIC);
+		GFHTMLArea(gump,  57, 480, 30, 20, "<basefont color=#7FFFD4>Add");
+		GFAddButton(gump, 100, 477, 4005, 4007, GF_CLOSE_BTN, COPY_PUBLIC_ITEM);
+		GFHTMLArea(gump,  132, 480, 30, 20, "<basefont color=#7FFFD4>Copy");
+		GFAddButton(gump, 175, 477, 4008, 4010, GF_CLOSE_BTN, EDIT_PUBLIC_ITEM);
+		GFHTMLArea(gump,  207, 480, 30, 20, "<basefont color=#7FFFD4>Edit");
+		GFAddButton(gump, 250, 477, 4008, 4010, GF_CLOSE_BTN, SHOW_PRIVATE_INDEX);
+		GFHTMLArea(gump,  282, 480, 100, 20, "<basefont color=#7FFFD4>Public Menu");
+	else
+		GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, ADD_NEW_PRIVATE);
+		GFHTMLArea(gump,  57, 480, 30, 20, "<basefont color=#7FFFD4>Add");
+		GFAddButton(gump, 100, 477, 4005, 4007, GF_CLOSE_BTN, COPY_PRIVATE_ITEM);
+		GFHTMLArea(gump,  132, 480, 30, 20, "<basefont color=#7FFFD4>Copy");
+		GFAddButton(gump, 175, 477, 4008, 4010, GF_CLOSE_BTN, EDIT_PRIVATE_ITEM);
+		GFHTMLArea(gump,  207, 480, 30, 20, "<basefont color=#7FFFD4>Edit");
+		GFAddButton(gump, 250, 477, 4008, 4010, GF_CLOSE_BTN, SHOW_PUBLIC_INDEX);
+		GFHTMLArea(gump,  282, 480, 100, 20, "<basefont color=#7FFFD4>Public Menu");
+	endif
 
-        GFPage(gump, 1);
+	GFPage(gump, 1);
 
-        var y_loc := 85;
-        var page_num := 1;
-        var counter := 1;
-        var line_num := 0;
+	var y_loc := 85;
+	var page_num := 1;
+	var counter := 1;
+	var line_num := 0;
 
-        go_keys.sort();
-        foreach place in ( go_keys )
-                GFTextLine(gump,  25, y_loc, 2100, go_prop[place].Name);
-                GFTextLine(gump, 175, y_loc, 2100, go_prop[place].Realm);
-                GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
-                GFAddButton(gump, 350, y_loc+3, 2117, 2118, GF_CLOSE_BTN, (num_keys+counter));
+	if( public )
+		go_keys_base.sort();
+		foreach place in ( go_keys_base )
+			GFTextLine(gump,  25, y_loc, 2100, go_prop_base[place].Name);
+			GFTextLine(gump, 175, y_loc, 2100, go_prop_base[place].Realm);
+			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+			GFAddButton(gump, 350, y_loc+3, 2117, 2118, GF_CLOSE_BTN, (num_keys+counter));
 
-                counter := counter + 1;
-                line_num := line_num+1;
-                y_loc := y_loc + 20;
-                if ( line_num >= 18 && line_num < num_keys )
-                        GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
-                        page_num := page_num + 1;
-                        GFPage(gump, page_num);
-                        GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
-                        y_loc := 85;
-                        line_num := 0;
-                endif
-                sleepms(2);
-        endforeach
+			counter := counter + 1;
+			line_num := line_num+1;
+			y_loc := y_loc + 20;
+			if ( line_num >= 18 && line_num < num_keys )
+				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+				page_num := page_num + 1;
+				GFPage(gump, page_num);
+				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+				y_loc := 85;
+				line_num := 0;
+			endif
+			sleepms(2);
+		endforeach
+	else
+		go_keys.sort();
+		foreach place in ( go_keys )
+			GFTextLine(gump,  25, y_loc, 2100, go_prop[place].Name);
+			GFTextLine(gump, 175, y_loc, 2100, go_prop[place].Realm);
+			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+			GFAddButton(gump, 350, y_loc+3, 2117, 2118, GF_CLOSE_BTN, (num_keys+counter));
 
+			counter := counter + 1;
+			line_num := line_num+1;
+			y_loc := y_loc + 20;
+			if ( line_num >= 18 && line_num < num_keys )
+				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+				page_num := page_num + 1;
+				GFPage(gump, page_num);
+				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+				y_loc := 85;
+				line_num := 0;
+			endif
+			sleepms(2);
+		endforeach
+	endif
+
         return gump;
 
 
 endfunction
 
-function Go_PublicIndexGump()
-
-        var gump := GFCreateGump();
-        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
-        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
-        GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
-        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
-        GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
-        GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
-        GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Send");
-        GFHTMLArea(gump, 345, 60, 150, 20, "<basefont color=#7FFFD4>Goto");
-        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
-        GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, ADD_NEW_PUBLIC);
-        GFHTMLArea(gump,  57, 480, 30, 20, "<basefont color=#7FFFD4>Add");
-        GFAddButton(gump, 100, 477, 4005, 4007, GF_CLOSE_BTN, COPY_PUBLIC_ITEM);
-        GFHTMLArea(gump,  132, 480, 30, 20, "<basefont color=#7FFFD4>Copy");
-        GFAddButton(gump, 175, 477, 4008, 4010, GF_CLOSE_BTN, EDIT_PUBLIC_ITEM);
-        GFHTMLArea(gump,  207, 480, 30, 20, "<basefont color=#7FFFD4>Edit");
-        GFAddButton(gump, 250, 477, 4008, 4010, GF_CLOSE_BTN, SHOW_PRIVATE_INDEX);
-        GFHTMLArea(gump,  282, 480, 100, 20, "<basefont color=#7FFFD4>Private Menu");
-
-        GFPage(gump, 1);
-
-        var y_loc := 85;
-        var page_num := 1;
-        var counter := 1;
-        var line_num := 0;
-
-        go_keys_base.sort();
-        foreach place in ( go_keys_base )
-                GFTextLine(gump,  25, y_loc, 2100, go_prop_base[place].Name);
-                GFTextLine(gump, 175, y_loc, 2100, go_prop_base[place].Realm);
-                GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
-                GFAddButton(gump, 350, y_loc+3, 2117, 2118, GF_CLOSE_BTN, (num_keys+counter));
-
-                counter := counter + 1;
-                line_num := line_num+1;
-                y_loc := y_loc + 20;
-                if ( line_num >= 18 && line_num < num_keys )
-                        GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
-                        page_num := page_num + 1;
-                        GFPage(gump, page_num);
-                        GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
-                        y_loc := 85;
-                        line_num := 0;
-                endif
-                sleepms(2);
-        endforeach
-
-        return gump;
-
-endfunction
-
 function Go_RetrieveGump(elem_name, prop_name:="base_Distro")
 
         var elem := DFFindElement(go_data_gumps, elem_name);

Modified: trunk/096/pkg/commands/seer/go.src
===================================================================
--- trunk/096/pkg/commands/seer/go.src	2005-09-21 23:37:38 UTC (rev 215)
+++ trunk/096/pkg/commands/seer/go.src	2005-09-22 05:05:10 UTC (rev 216)
@@ -1,7 +1,7 @@
 ////////////////////////////////////////////////////////////////////////////////////////////////////
 //
 //  name:    go.src - Staff Textcommand
-//  version: 2.0b
+//  version: 2.0c
 //  author:  MuadDib
 //
 //  Purpose: Lists and Gumps are now cached via DataFiles instead of Config files. Initial use of
@@ -26,8 +26,6 @@
 //           Refresh. If you pass the word "refresh" on the command line, it will refresh all the
 //              gumps for your private gumps, and the main gump.
 //
-//  To-Do:   Optimize gump functions within includes.
-//
 ////////////////////////////////////////////////////////////////////////////////////////////////////
 use polsys;
 use uo;
@@ -75,34 +73,34 @@
 var yg_pos;
 var zg_pos;
 
-program textcmd_go( who, text )
+program command_go( who, text )
 
-        Go_CheckInit(who);
+	Go_CheckInit(who);
 
-        // See if there is an element in the DataFile that matches their
-        // account name.
-        go_prop := go_elem.GetProp( who.acctname );
+	// See if there is an element in the DataFile that matches their
+	// account name.
+	go_prop := go_elem.GetProp( who.acctname );
 
-        // If there is no Element in the DataFile that matches their account name
-        // let's create it now.
-        if ( !go_prop )
-                var temp := dictionary;
-                go_elem.SetProp(who.acctname, temp);
-                go_prop  := go_elem.GetProp(who.acctname);
-        endif
+	// If there is no Element in the DataFile that matches their account name
+	// let's create it now.
+	if ( !go_prop )
+		var temp := dictionary;
+		go_elem.SetProp(who.acctname, temp);
+		go_prop  := go_elem.GetProp(who.acctname);
+	endif
 
-        go_keys  := go_prop.keys();
+	go_keys  := go_prop.keys();
 
-        if( Go_Parse_Text(who, text) )
-                return 0;
-        endif
+	if( Go_Parse_Text(who, text) )
+		return 0;
+	endif
 
-        var gump_Open := GetObjProperty(who, "#Go_Gump");
-        case(gump_Open)
-          1: Go_LocationIndex(who);
-          2: Go_LocationIndex(who, who.acctname);
-          default: Go_LocationIndex(who);
-        endcase
+	var gump_Open := GetObjProperty(who, "#Go_Gump");
+	case(gump_Open)
+		1: Go_LocationIndex(who);
+		2: Go_LocationIndex(who, who.acctname);
+		default: Go_LocationIndex(who);
+	endcase
 
 
 endprogram



From austin at berlios.de  Thu Sep 22 15:55:46 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 22 Sep 2005 15:55:46 +0200
Subject: [Poldistro-svn] r217 - trunk/096/pkg/mobiles/ai_brain/complete/testnpc
Message-ID: <200509221355.j8MDtkPg004710@sheep.berlios.de>

Author: austin
Date: 2005-09-22 15:55:40 +0200 (Thu, 22 Sep 2005)
New Revision: 217

Modified:
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/shouldWatch.src
Log:


Modified: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/shouldWatch.src
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/complete/testnpc/shouldWatch.src	2005-09-22 05:05:10 UTC (rev 216)
+++ trunk/096/pkg/mobiles/ai_brain/complete/testnpc/shouldWatch.src	2005-09-22 13:55:40 UTC (rev 217)
@@ -8,9 +8,15 @@
 
 program BrainCriticalScript(params)
 	//var npc := params[1];
-	//var mobile := params[2];
+	var mobile := params[2];
 	//var settings := params[3];
 	params := 0; // Not needed anymore
 	
+	if ( mobile.cmdlevel )
+		return 0;
+	elseif ( mobile.npctemplate )
+		return 0;
+	endif
+	
 	return 1;
 endprogram



From austin at berlios.de  Fri Sep 23 07:34:30 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 23 Sep 2005 07:34:30 +0200
Subject: [Poldistro-svn] r218 - in trunk/096/pkg/systems/spawnsystem: . include initializer
Message-ID: <200509230534.j8N5YUK4019678@sheep.berlios.de>

Author: austin
Date: 2005-09-23 07:34:25 +0200 (Fri, 23 Sep 2005)
New Revision: 218

Added:
   trunk/096/pkg/systems/spawnsystem/include/spawnerUtil.inc
   trunk/096/pkg/systems/spawnsystem/initializer/
   trunk/096/pkg/systems/spawnsystem/initializer/firstrun.src
Removed:
   trunk/096/pkg/systems/spawnsystem/firstrun.src
   trunk/096/pkg/systems/spawnsystem/include/spawner.inc
Modified:
   trunk/096/pkg/systems/spawnsystem/include/errors.inc
   trunk/096/pkg/systems/spawnsystem/include/settings.inc
Log:


Deleted: trunk/096/pkg/systems/spawnsystem/firstrun.src
===================================================================
--- trunk/096/pkg/systems/spawnsystem/firstrun.src	2005-09-22 13:55:40 UTC (rev 217)
+++ trunk/096/pkg/systems/spawnsystem/firstrun.src	2005-09-23 05:34:25 UTC (rev 218)
@@ -1,152 +0,0 @@
-use uo;
-use os;
-
-include ":spawnsystem:include/groups";
-include ":spawnsystem:include/realms";
-include ":spawnsystem:include/regions";
-include ":spawnsystem:include/errors";
-
-program FirstRun()
-	var start_cfg := ReadConfigFile(":spawnsystem:config/firstrun");
-	if ( start_cfg.errortext )
-		SSErrorReport(start_cfg.errortext, SPAWN_ERROR_SYSLOG);
-		return 0;
-	endif
-
-	var realm_list := start_cfg["Realms"];
-	if ( realm_list.errortext)
-		SSErrorReport(start_cfg.errortext, SPAWN_ERROR_SYSLOG);
-		return 0;
-	endif
-
-	foreach realm_name in (GetConfigStringArray(realm_list, "Realm"))
-		SysLog("Setting up spawner realm ("+realm_name+")");
-		var success := SetupRealm(realm_name, start_cfg);
-		
-		if ( success )
-			SysLog("Spawn realm ("+realm_name+") setup... okay.");
-		else
-			SysLog("Spawn realm ("+realm_name+") setup... failed!");
-		endif
-		
-		sleepms(2);
-	endforeach
-	
-	UnloadConfigFile(":spawnsystem:config/firstrun");
-
-	return 1;
-endprogram
-
-function SetupRealm(realm_name, start_cfg)
-	var realm_info := start_cfg[realm_name];
-	if ( realm_info.errortext )
-		SSErrorReport("No cfg elem for realm ("+realm_name+") -> "+realm_info.errortext, SPAWN_ERROR_SYSLOG);
-		return 0;
-	endif
-	
-	SSAddRealm(realm_name);
-
-	foreach region_name in (GetConfigStringArray(realm_info, "Region"))
-		SysLog("Setting up spawn region ("+region_name+")");
-		var success := SetupRegion(region_name, realm_name, start_cfg);
-		
-		if ( success )
-			SSAddRegionToRealm(realm_name, region_name);
-		endif
-		
-		if ( success )
-			SysLog("Spawn region ("+region_name+") setup... okay.");
-		else
-			SysLog("Spawn region ("+region_name+") setup... failed!");
-		endif
-		
-		sleepms(2);
-	endforeach
-
-	return 1;
-endfunction
-
-function SetupRegion(region_name, realm_name, start_cfg)
-	var region_info := start_cfg[region_name];
-	if ( region_info.errortext )
-		SSErrorReport("No cfg elem for region ("+region_name+") -> "+region_info.errortext, SPAWN_ERROR_SYSLOG);
-		return 0;
-	endif
-
-	
-	SSAddRegion(region_name, realm_name);
-	var coords := SplitWords(region_info.Coordinates);
-	SSSetRegionCoordinates(region_name, coords[1], coords[2], coords[3], coords[4]);
-
-	foreach group_name in (GetConfigStringArray(region_info, "Group"))
-		group_name := SplitWords(group_name);
-		var max_amt := CInt(group_name[2]);
-		var spawn_wait := CInt(group_name[3]);
-		group_name := group_name[1];
-		
-		var success := SetupGroup(group_name, start_cfg);
-		
-		if ( success )
-			success := SSAddGroupToRegion(region_name, group_name, max_amt, spawn_wait, 1);
-		endif
-		if ( success )
-			SysLog("Adding group ("+group_name+") to region ("+region_name+")... okay.");
-		else
-			SysLog("Adding group ("+group_name+") to region ("+region_name+")... failed!");
-		endif
-		
-		sleepms(2);
-	endforeach
-
-	return 1;
-endfunction
-
-function SetupGroup(group_name, start_cfg)
-	if ( SSGetGroupDataElem(group_name) )
-		//Group has already been set up.
-		return 1;
-	endif
-	
-	SysLog("Setting up spawner group ("+group_name+")");
-	
-	var group_info := start_cfg[group_name];
-	if ( group_info.errortext )
-		SSErrorReport("No cfg elem for group ("+group_name+") -> "+group_info.errortext, SPAWN_ERROR_SYSLOG);
-		return 0;
-	elseif ( !group_info.Engine )
-		SSErrorReport("No valid engine name was set for group ("+group_name+")", SPAWN_ERROR_SYSLOG);
-		return 0;
-	endif
-	
-	SSAddGroup(group_name, group_info.Engine);
-	
-	foreach entry in (GetConfigStringArray(group_info, "Entry"))
-		SSAddEntryToGroup(group_name, entry);
-		sleepms(2);
-	endforeach
-	
-	return 1;
-endfunction
-
-/*
-function Test_WipeSpawner()
-	foreach realm_name in SSGetRealmNames()
-		Print("* Erasing Realm ("+realm_name+") ["+SSRemoveRealm(realm_name)+"]");
-		sleepms(2);
-	endforeach
-	
-	foreach region_name in SSGetRegionNames()
-		Print("* Erasing Region ("+region_name+") ["+SSRemoveRegion(region_name)+"]");
-		sleepms(2);
-	endforeach
-	
-	foreach group_name in SSGetGroupNames()
-		Print("* Erasing Group ("+group_name+") ["+SSRemoveGroup(group_name)+"]");
-		sleepms(2);
-	endforeach
-	
-	sleep(1);
-	
-	return 1;
-endfunction
-*/
\ No newline at end of file

Modified: trunk/096/pkg/systems/spawnsystem/include/errors.inc
===================================================================
--- trunk/096/pkg/systems/spawnsystem/include/errors.inc	2005-09-22 13:55:40 UTC (rev 217)
+++ trunk/096/pkg/systems/spawnsystem/include/errors.inc	2005-09-23 05:34:25 UTC (rev 218)
@@ -7,22 +7,18 @@
 CONST SPAWN_ERROR_BROADCAST	:= 4;
 
 function SSErrorReport(error_text, err_report:=SPAWN_ERROR_DISABLE)
-	var do_print := err_report & SPAWN_ERROR_PRINT;
-	var do_syslog := err_report & SPAWN_ERROR_SYSLOG;
-	var do_broadcast := err_report & SPAWN_ERROR_BROADCAST;
-	
-	if ( do_print )
-		Print("Error - Spawn System ["+error_text+"]");
+		if ( err_report & SPAWN_ERROR_PRINT )
+		Print(""+error_text);
 	endif
 	
-	if ( do_syslog )
-		SysLog("Error - Spawn System ["+error_text+"]");
+	if ( err_report & SPAWN_ERROR_SYSLOG )
+		SysLog(""+error_text);
 	endif
 	
-	if ( do_broadcast )
+	if ( err_report & SPAWN_ERROR_BROADCAST )
 		foreach mobile in EnumerateOnlineCharacters()
 			if ( mobile.cmdlevel )
-				SendSysMessage(mobile, "Error - Spawn System ["+error_text+"]");
+				SendSysMessage(mobile, ""+error_text);
 			endif
 			sleepms(5);
 		endforeach

Modified: trunk/096/pkg/systems/spawnsystem/include/settings.inc
===================================================================
--- trunk/096/pkg/systems/spawnsystem/include/settings.inc	2005-09-22 13:55:40 UTC (rev 217)
+++ trunk/096/pkg/systems/spawnsystem/include/settings.inc	2005-09-23 05:34:25 UTC (rev 218)
@@ -24,7 +24,7 @@
 	var cfg := ReadConfigFile(":spawnsystem:config/settings");
 
 	if ( cfg.errortext )
-		SysLog("Error - Unable to open "+cfg_path+".cfg ->"+cfg.errortext);
+		SysLog("Error::SSGetSettingsCfgFile() - Unable to open "+cfg_path+".cfg ->"+cfg.errortext);
 	endif
 
 	return cfg;
@@ -49,7 +49,7 @@
 	var elem := cfg[elem_name];
 
 	if ( elem.errortext )
-		SysLog("Error - Unable to find elem ["+elem_name+"] in "+cfg_file.name+" ->"+elem.errortext);
+		SysLog("Error::SSGetSettingsCfgElem() - Unable to find elem ["+elem_name+"] in "+cfg_file.name+" ->"+elem.errortext);
 	endif
 
 	return elem;

Deleted: trunk/096/pkg/systems/spawnsystem/include/spawner.inc
===================================================================
--- trunk/096/pkg/systems/spawnsystem/include/spawner.inc	2005-09-22 13:55:40 UTC (rev 217)
+++ trunk/096/pkg/systems/spawnsystem/include/spawner.inc	2005-09-23 05:34:25 UTC (rev 218)
@@ -1,30 +0,0 @@
-use uo;
-use os;
-use util;
-
-include ":datafile:include/datafile";
-
-/*
- * SSSelectCoordsInArea(x1, y1, x2, y2)
- *
- * Purpose
- * Takes in four numbers (two coordinates) and
- * picks a random coordinate within the area they create.
- *
- * Parameters
- * x1:	The top-left spot of the X axis.
- * y1:	The top-left spot of the Y axis.
- * x2:	The bottom-right spot of the X axis.
- * y2:	The bottom-right spot of the Y axis.
- *
- * Return value
- * A structure containing an X and Y property.
- *
- */
-function SSSelectCoordsInArea(x1, y1, x2, y2)
-	var coord := struct;
-	coord.+x := RandomInt(x2-x1)+x1;
-	coord.+y := RandomInt(y2-y1)+y1;
-
-	return coord;
-endfunction

Copied: trunk/096/pkg/systems/spawnsystem/include/spawnerUtil.inc (from rev 213, trunk/096/pkg/systems/spawnsystem/include/spawner.inc)

Added: trunk/096/pkg/systems/spawnsystem/initializer/firstrun.src
===================================================================
--- trunk/096/pkg/systems/spawnsystem/initializer/firstrun.src	2005-09-22 13:55:40 UTC (rev 217)
+++ trunk/096/pkg/systems/spawnsystem/initializer/firstrun.src	2005-09-23 05:34:25 UTC (rev 218)
@@ -0,0 +1,152 @@
+use uo;
+use os;
+
+include ":spawnsystem:include/groups";
+include ":spawnsystem:include/realms";
+include ":spawnsystem:include/regions";
+include ":spawnsystem:include/errors";
+
+program FirstRun()
+	var start_cfg := ReadConfigFile(":spawnsystem:config/firstrun");
+	if ( start_cfg.errortext )
+		SSErrorReport(start_cfg.errortext, SPAWN_ERROR_SYSLOG);
+		return 0;
+	endif
+
+	var realm_list := start_cfg["Realms"];
+	if ( realm_list.errortext)
+		SSErrorReport(start_cfg.errortext, SPAWN_ERROR_SYSLOG);
+		return 0;
+	endif
+
+	foreach realm_name in (GetConfigStringArray(realm_list, "Realm"))
+		SysLog("Setting up spawner realm ("+realm_name+")");
+		var success := SetupRealm(realm_name, start_cfg);
+		
+		if ( success )
+			SysLog("Spawn realm ("+realm_name+") setup... okay.");
+		else
+			SysLog("Spawn realm ("+realm_name+") setup... failed!");
+		endif
+		
+		sleepms(2);
+	endforeach
+	
+	UnloadConfigFile(":spawnsystem:config/firstrun");
+
+	return 1;
+endprogram
+
+function SetupRealm(realm_name, start_cfg)
+	var realm_info := start_cfg[realm_name];
+	if ( realm_info.errortext )
+		SSErrorReport("No cfg elem for realm ("+realm_name+") -> "+realm_info.errortext, SPAWN_ERROR_SYSLOG);
+		return 0;
+	endif
+	
+	SSAddRealm(realm_name);
+
+	foreach region_name in (GetConfigStringArray(realm_info, "Region"))
+		SysLog("Setting up spawn region ("+region_name+")");
+		var success := SetupRegion(region_name, realm_name, start_cfg);
+		
+		if ( success )
+			SSAddRegionToRealm(realm_name, region_name);
+		endif
+		
+		if ( success )
+			SysLog("Spawn region ("+region_name+") setup... okay.");
+		else
+			SysLog("Spawn region ("+region_name+") setup... failed!");
+		endif
+		
+		sleepms(2);
+	endforeach
+
+	return 1;
+endfunction
+
+function SetupRegion(region_name, realm_name, start_cfg)
+	var region_info := start_cfg[region_name];
+	if ( region_info.errortext )
+		SSErrorReport("No cfg elem for region ("+region_name+") -> "+region_info.errortext, SPAWN_ERROR_SYSLOG);
+		return 0;
+	endif
+
+	
+	SSAddRegion(region_name, realm_name);
+	var coords := SplitWords(region_info.Coordinates);
+	SSSetRegionCoordinates(region_name, coords[1], coords[2], coords[3], coords[4]);
+
+	foreach group_name in (GetConfigStringArray(region_info, "Group"))
+		group_name := SplitWords(group_name);
+		var max_amt := CInt(group_name[2]);
+		var spawn_wait := CInt(group_name[3]);
+		group_name := group_name[1];
+		
+		var success := SetupGroup(group_name, start_cfg);
+		
+		if ( success )
+			success := SSAddGroupToRegion(region_name, group_name, max_amt, spawn_wait, 1);
+		endif
+		if ( success )
+			SysLog("Adding group ("+group_name+") to region ("+region_name+")... okay.");
+		else
+			SysLog("Adding group ("+group_name+") to region ("+region_name+")... failed!");
+		endif
+		
+		sleepms(2);
+	endforeach
+
+	return 1;
+endfunction
+
+function SetupGroup(group_name, start_cfg)
+	if ( SSGetGroupDataElem(group_name) )
+		//Group has already been set up.
+		return 1;
+	endif
+	
+	SysLog("Setting up spawner group ("+group_name+")");
+	
+	var group_info := start_cfg[group_name];
+	if ( group_info.errortext )
+		SSErrorReport("No cfg elem for group ("+group_name+") -> "+group_info.errortext, SPAWN_ERROR_SYSLOG);
+		return 0;
+	elseif ( !group_info.Engine )
+		SSErrorReport("No valid engine name was set for group ("+group_name+")", SPAWN_ERROR_SYSLOG);
+		return 0;
+	endif
+	
+	SSAddGroup(group_name, group_info.Engine);
+	
+	foreach entry in (GetConfigStringArray(group_info, "Entry"))
+		SSAddEntryToGroup(group_name, entry);
+		sleepms(2);
+	endforeach
+	
+	return 1;
+endfunction
+
+/*
+function Test_WipeSpawner()
+	foreach realm_name in SSGetRealmNames()
+		Print("* Erasing Realm ("+realm_name+") ["+SSRemoveRealm(realm_name)+"]");
+		sleepms(2);
+	endforeach
+	
+	foreach region_name in SSGetRegionNames()
+		Print("* Erasing Region ("+region_name+") ["+SSRemoveRegion(region_name)+"]");
+		sleepms(2);
+	endforeach
+	
+	foreach group_name in SSGetGroupNames()
+		Print("* Erasing Group ("+group_name+") ["+SSRemoveGroup(group_name)+"]");
+		sleepms(2);
+	endforeach
+	
+	sleep(1);
+	
+	return 1;
+endfunction
+*/
\ No newline at end of file



From panosl at berlios.de  Sat Sep 24 18:34:53 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Sat, 24 Sep 2005 18:34:53 +0200
Subject: [Poldistro-svn] r219 - trunk/096/scripts
Message-ID: <200509241634.j8OGYrKZ015875@sheep.berlios.de>

Author: panosl
Date: 2005-09-24 18:34:52 +0200 (Sat, 24 Sep 2005)
New Revision: 219

Modified:
   trunk/096/scripts/start.src
Log:


Modified: trunk/096/scripts/start.src
===================================================================
--- trunk/096/scripts/start.src	2005-09-23 05:34:25 UTC (rev 218)
+++ trunk/096/scripts/start.src	2005-09-24 16:34:52 UTC (rev 219)
@@ -1,4 +1,4 @@
-/* $Id: start.src,v 1.1 2004/03/16 14:05:46 folko Exp $
+/* $Id$
  *
  * Purpose
  * This script is called when the server starts up.


Property changes on: trunk/096/scripts/start.src
___________________________________________________________________
Name: svn:keywords
   + Id



From austin at berlios.de  Sat Sep 24 19:06:29 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 24 Sep 2005 19:06:29 +0200
Subject: [Poldistro-svn] r220 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509241706.j8OH6Ts5006829@sheep.berlios.de>

Author: austin
Date: 2005-09-24 19:06:27 +0200 (Sat, 24 Sep 2005)
New Revision: 220

Modified:
   trunk/096/pkg/systems/attributes/include/regen.inc
Log:
Regen uses a cprop now.

Modified: trunk/096/pkg/systems/attributes/include/regen.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-24 16:34:52 UTC (rev 219)
+++ trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-24 17:06:27 UTC (rev 220)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * REGEN.INC - v1.0
-* Updated 9/20/2005 4:09PM
+* Updated 9/21/2005 8:14AM
 *
 * -- Revision v1.0 --
 * Austin:



From austin at berlios.de  Sat Sep 24 19:12:59 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sat, 24 Sep 2005 19:12:59 +0200
Subject: [Poldistro-svn] r221 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509241712.j8OHCxeo011476@sheep.berlios.de>

Author: austin
Date: 2005-09-24 19:12:56 +0200 (Sat, 24 Sep 2005)
New Revision: 221

Modified:
   trunk/096/pkg/systems/attributes/include/attributes.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/attributes.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-24 17:06:27 UTC (rev 220)
+++ trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-24 17:12:56 UTC (rev 221)
@@ -18,7 +18,7 @@
 include ":attributes:include/vitals";
 
 /*
- * AF_GetAttributeCfgElem(attribute)
+ * attributes_GetAttributeCfgElem(attribute)
  *
  * Purpose
  * Retrieves a config elem for an attribute in attributes.cfg
@@ -30,22 +30,22 @@
  * Returns a config file elem.
  *
  */
-function AF_GetAttributeCfgElem(attribute)
+function attributes_GetAttributeCfgElem(attribute)
 	var cfg := ReadConfigFile(":attributes:attributes");
 	if ( cfg.errortext )
-		SysLog("Error::AF_GetAttributeCfgElem() - Unable to open attributes.cfg ->"+cfg.errortext);
+		SysLog("Error::attributes_GetAttributeCfgElem() - Unable to open attributes.cfg ->"+cfg.errortext);
 	endif
 	
 	var cfg_elem := cfg[attribute];
 	if ( cfg_elem.errortext )
-		SysLog("Error::AF_GetAttributeCfgElem() - unable to find cfg elem ["+attribute+"] ->"+cfg_elem.errortext);
+		SysLog("Error::attributes_GetAttributeCfgElem() - unable to find cfg elem ["+attribute+"] ->"+cfg_elem.errortext);
 	endif
 	
 	return cfg_elem;
 endfunction
 
 /*
- * AF_ListAttributesByType(type)
+ * attributes_ListAttributesByType(type)
  *
  * Purpose
  * Gets the name of all attributes of a certain type.
@@ -57,7 +57,7 @@
  * Returns an array
  *
  */
-function AF_ListAttributesByType(type)
+function attributes_ListAttributesByType(type)
 	type := Lower(type);
 	
 	var list := array;



From austin at berlios.de  Sun Sep 25 00:25:19 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 00:25:19 +0200
Subject: [Poldistro-svn] r222 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509242225.j8OMPJVS009882@sheep.berlios.de>

Author: austin
Date: 2005-09-25 00:25:19 +0200 (Sun, 25 Sep 2005)
New Revision: 222

Added:
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
Log:


Added: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-24 17:12:56 UTC (rev 221)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-24 22:25:19 UTC (rev 222)
@@ -0,0 +1,44 @@
+/*===============================================================
+* Current Version
+* SKILLCHECK.INC - v1.0
+* Updated 9/24/2005 12:34AM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+use util;
+use cfgfile;
+
+include ":attributes:include/attributes";
+
+const ADV_SKILL		:= 1;
+const ADV_STATS		:= 2;
+const ADV_ALL		:= ADV_SKILL+ADV_STATS; // 3
+//Set to 4 because if it was 0, it would default to ADV_ALL.
+const ADV_DISABLE	:= 4;
+
+var g_skill_debug	:= 0;
+
+function SkillCheck(mobile, attrib_name, difficulty, award_points:=0, advance_flags:=ADV_ALL)
+	if ( mobile.dead )
+		SendSysMessageEX(mobile, "You can't use skills while dead.");
+		return -100;
+	elseif ( GetObjProperty(mobile, "DisableSkills") )
+		SendSysMessageEX(mobile, "Your skills are disabled.");
+		return -100;
+	elseif ( GetObjProperty(mobile, "NoGains") )
+		advance := ADV_DISABLE;
+	endif
+	
+	var advance_skill := advance & ADV_SKILL;
+	var advance_stats := advance & ADV_STATS;
+	
+	// Global skill-debug ( for SkillDbgMsg() )
+	g_debug := (GetObjProperty(mobile,"SkillDebug") != error);
+	
+endfunction
+



From austin at berlios.de  Sun Sep 25 00:27:01 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 00:27:01 +0200
Subject: [Poldistro-svn] r223 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509242227.j8OMR1Io010045@sheep.berlios.de>

Author: austin
Date: 2005-09-25 00:27:01 +0200 (Sun, 25 Sep 2005)
New Revision: 223

Modified:
   trunk/096/pkg/systems/attributes/include/attributes_ex.inc
   trunk/096/pkg/systems/attributes/include/skills.inc
   trunk/096/pkg/systems/attributes/include/stats.inc
   trunk/096/pkg/systems/attributes/include/vitals.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/attributes_ex.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes_ex.inc	2005-09-24 22:25:19 UTC (rev 222)
+++ trunk/096/pkg/systems/attributes/include/attributes_ex.inc	2005-09-24 22:27:01 UTC (rev 223)
@@ -11,7 +11,7 @@
 include ":attributes:include/attributes";
 
 /*
- * AF_SkillIDToAttributeName(skill_number)
+ * attributes_SkillIDToAttributeName(skill_number)
  *
  * Purpose
  * Gets the name of the attribute that is associated with a skill number.
@@ -24,22 +24,22 @@
  * Returns a string.
  *
  */
-function AF_IDToAttributeName(skill_number)
+function attributes_IDToAttributeName(skill_number)
 	var skills_cfg := ReadConfigFile(":attributes:uoskills");
 	if ( skills_cfg.errortext )
-		SysLog("Error::AF_IDToAttributeName() - Unable to open :attributes:uoskills.cfg ->"+skills_cfg.errortext);
+		SysLog("Error::attributes_IDToAttributeName() - Unable to open :attributes:uoskills.cfg ->"+skills_cfg.errortext);
 	endif
 	
 	var cfg_elem := skills_cfg[skill_number];
 	if ( cfg_elem.errortext )
-		SysLog("Error::AF_IDToAttributeName() - unable to find cfg elem ["+skill_number+"] ->"+cfg_elem.errortext);
+		SysLog("Error::attributes_IDToAttributeName() - unable to find cfg elem ["+skill_number+"] ->"+cfg_elem.errortext);
 	endif
 	
 	return cfg_elem.Attribute;
 endfunction
 
 /*
- * AF_AttributeNameToSkillID(attribute_name)
+ * attributes_AttributeNameToSkillID(attribute_name)
  *
  * Purpose
  * Gets the skill number (ID) that an attribute name is associated with.
@@ -52,8 +52,8 @@
  * Returns an integer.
  *
  */
-function AF_AttributeNameToSkillID(attribute_name)
-	var cfg_elem := AF_GetAttributeCfgElem(attribute_name);
+function attributes_AttributeNameToSkillID(attribute_name)
+	var cfg_elem := attributes_GetAttributeCfgElem(attribute_name);
 	
 	return cfg_elem.SkillId;
 endfunction
\ No newline at end of file

Modified: trunk/096/pkg/systems/attributes/include/skills.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-24 22:25:19 UTC (rev 222)
+++ trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-24 22:27:01 UTC (rev 223)
@@ -11,7 +11,7 @@
 use uo;
 
 /*
- * AF_GetSkill(mobile, skill_name)
+ * attributes_GetSkill(mobile, skill_name)
  *
  * Purpose
  * Retrieves the base value of the skill plus its mod value.
@@ -24,12 +24,12 @@
  * Returns an integer.
  *
  */
-function AF_GetSkill(who, skill_name)
-	return AF_GetTrueSkill(who, skill_name)+AF_GetSkillMod(who, skill_name);
+function attributes_GetSkill(who, skill_name)
+	return attributes_GetTrueSkill(who, skill_name)+attributes_GetSkillMod(who, skill_name);
 endfunction
 
 /*
- * AF_GetTrueSkill(mobile, skill_name)
+ * attributes_GetTrueSkill(mobile, skill_name)
  *
  * Purpose
  * Retrieves the base value of the skill and turns it into a usable number.
@@ -42,12 +42,12 @@
  * Returns a double.
  *
  */
-function AF_GetTrueSkill(who, skill_name)
+function attributes_GetTrueSkill(who, skill_name)
 	return CDbl(GetAttributeBaseValue(who, skill_name)) / 10.0;
 endfunction
 
 /*
- * AF_GetSkillMod(mobile, skill_name)
+ * attributes_GetSkillMod(mobile, skill_name)
  *
  * Purpose
  * Retrieves the base value of the skill mod and turns it into a usable number.
@@ -60,16 +60,16 @@
  * Returns a double.
  *
  */
-function AF_GetSkillMod(who, skill_name)
+function attributes_GetSkillMod(who, skill_name)
 	return CDbl(GetAttributeTemporaryMod(who, skill_name)) / 10.0;
 endfunction
 
 /*
- * AF_SetTrueSkill(mobile, skill_name, points)
+ * attributes_SetTrueSkill(mobile, skill_name, points)
  *
  * Purpose
  * Sets the value of the skill.
- * Example: AF_SetTrueSkill(mobile, "strength", 44.5)
+ * Example: attributes_SetTrueSkill(mobile, "strength", 44.5)
  *
  * Parameters
  * mobile:	Mobile reference to set the points on.
@@ -80,16 +80,16 @@
  * Returns a double.
  *
  */
-function AF_SetTrueSkill(mobile, skill_name, points)
+function attributes_SetTrueSkill(mobile, skill_name, points)
 	SetAttributeBaseValue(mobile, skill_name, CInt(CDbl(points) * 10.0));
 endfunction
 
 /*
- * AF_SetSkillMod(mobile, skill_name, points)
+ * attributes_SetSkillMod(mobile, skill_name, points)
  *
  * Purpose
  * Sets the modifier value for the skill.
- * Example: AF_SetSkillMod(mobile, "strength", -15.3)
+ * Example: attributes_SetSkillMod(mobile, "strength", -15.3)
  *
  * Parameters
  * mobile:	Mobile reference to set the modifier points on.
@@ -100,12 +100,12 @@
  * Returns a double.
  *
  */
-function AF_SetSkillMod(mobile, skill_name, points)
+function attributes_SetSkillMod(mobile, skill_name, points)
 	SetAttributeTemporaryMod(mobile, skill_name, CInt(CDbl(points) * 10.0));
 endfunction
 
 /*
- * AF_SetSkillScript(attribute_name)
+ * attributes_SetSkillScript(attribute_name)
  *
  * Purpose
  * Gets the script that a skill uses.
@@ -117,7 +117,33 @@
  * Returns a string.
  *
  */
-function GetSkillScript(attribute_name)
-	var cfg := AF_GetAttributeCfgElem(attribute_name);
+function attributes_GetSkillScript(attribute_name)
+	var cfg := attributes_GetAttributeCfgElem(attribute_name);
 	return cfg.Script;
 endfunction
+
+/*
+ * attributes_GetSkillStats(attribute_name)
+ *
+ * Purpose
+ * Retrieves a dictionary from the attribute's config elem
+ * Key is the stat name, inside is an array containing the settings for it.
+ * dict["StatName"] => array{gain chance, award points dice}
+ *
+ * Parameters
+ * attribute_name:	Name of the skill to retrieve stat settings for.
+ *
+ * Return value
+ * Returns a dictionary.
+ *
+ */
+function attributes_GetSkillStats(attribute_name)
+	var cfg_elem := attributes_GetAttributeCfgElem(attribute_name);
+	var stat_entries := GetConfigStringDictionary(cfg_elem, "StatCheck");
+	foreach textline in (stat_entries)
+		textline := SplitWords(textline);
+		sleepms(2);
+	endforeach
+	
+	return stat_entries;
+endfunction

Modified: trunk/096/pkg/systems/attributes/include/stats.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-24 22:25:19 UTC (rev 222)
+++ trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-24 22:27:01 UTC (rev 223)
@@ -11,7 +11,7 @@
 use uo;
 
 /*
- * AF_GetStat(mobile, stat_name)
+ * attributes_GetStat(mobile, stat_name)
  *
  * Purpose
  * Retrieves the base value of the stat plus its mod value.
@@ -24,12 +24,12 @@
  * Returns an integer.
  *
  */
-function AF_GetStat(who, stat_name)
-	return AF_GetTrueStat(who, stat_name)+AF_GetStatMod(who, stat_name);
+function attributes_GetStat(who, stat_name)
+	return attributes_GetTrueStat(who, stat_name)+attributes_GetStatMod(who, stat_name);
 endfunction
 
 /*
- * AF_GetTrueStat(mobile, stat_name)
+ * attributes_GetTrueStat(mobile, stat_name)
  *
  * Purpose
  * Retrieves the base value of the stat and turns it into a usable number.
@@ -42,12 +42,12 @@
  * Returns a double.
  *
  */
-function AF_GetTrueStat(who, stat_name)
+function attributes_GetTrueStat(who, stat_name)
 	return CDbl(GetAttributeBaseValue(who, stat_name)) / 10.0;
 endfunction
 
 /*
- * AF_GetStatMod(mobile, stat_name)
+ * attributes_GetStatMod(mobile, stat_name)
  *
  * Purpose
  * Retrieves the base value of the stat mod and turns it into a usable number.
@@ -60,16 +60,16 @@
  * Returns a double.
  *
  */
-function AF_GetStatMod(who, stat_name)
+function attributes_GetStatMod(who, stat_name)
 	return CDbl(GetAttributeTemporaryMod(who, stat_name)) / 10.0;
 endfunction
 
 /*
- * AF_SetTrueStat(mobile, stat_name, points)
+ * attributes_SetTrueStat(mobile, stat_name, points)
  *
  * Purpose
  * Sets the value of the stat.
- * Example: AF_SetTrueStat(mobile, "strength", 44.5)
+ * Example: attributes_SetTrueStat(mobile, "strength", 44.5)
  *
  * Parameters
  * mobile:	Mobile reference to set the points on.
@@ -80,16 +80,16 @@
  * Returns a double.
  *
  */
-function AF_SetTrueStat(mobile, stat_name, points)
+function attributes_SetTrueStat(mobile, stat_name, points)
 	SetAttributeBaseValue(mobile, stat_name, CInt(CDbl(points) * 10.0));
 endfunction
 
 /*
- * AF_SetStatMod(mobile, stat_name, points)
+ * attributes_SetStatMod(mobile, stat_name, points)
  *
  * Purpose
  * Sets the modifier value for the stat.
- * Example: AF_SetStatMod(mobile, "strength", -15.3)
+ * Example: attributes_SetStatMod(mobile, "strength", -15.3)
  *
  * Parameters
  * mobile:	Mobile reference to set the modifier points on.
@@ -100,6 +100,6 @@
  * Returns a double.
  *
  */
-function AF_SetStatMod(mobile, stat_name, points)
+function attributes_SetStatMod(mobile, stat_name, points)
 	SetAttributeTemporaryMod(mobile, stat_name, CInt(CDbl(points) * 10.0));
 endfunction

Modified: trunk/096/pkg/systems/attributes/include/vitals.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-24 22:25:19 UTC (rev 222)
+++ trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-24 22:27:01 UTC (rev 223)
@@ -13,7 +13,7 @@
 use cfgfile;
 
 /*
- * AF_GetVitalCfgElem(vital)
+ * attributes_GetVitalCfgElem(vital)
  *
  * Purpose
  * Retrieves a config elem for an vital in vitals.cfg
@@ -25,22 +25,22 @@
  * Returns a config file elem.
  *
  */
-function AF_GetVitalCfgElem(vital)
+function attributes_GetVitalCfgElem(vital)
 	var cfg := ReadConfigFile(":attributes:vitals");
 	if ( cfg.errortext )
-		SysLog("Error::AF_GetVitalCfgElem() - Unable to open vitals.cfg ->"+cfg.errortext);
+		SysLog("Error::attributes_GetVitalCfgElem() - Unable to open vitals.cfg ->"+cfg.errortext);
 	endif
 	
 	var cfg_elem := cfg[vital];
 	if ( cfg_elem.errortext )
-		SysLog("Error::AF_GetVitalsCfgElem() - unable to find cfg elem ["+vital+"] ->"+cfg_elem.errortext);
+		SysLog("Error::attributes_GetVitalsCfgElem() - unable to find cfg elem ["+vital+"] ->"+cfg_elem.errortext);
 	endif
 	
 	return cfg_elem;
 endfunction
 
 /*
- * AF_GetVital(mobile, vital_name)
+ * attributes_GetVital(mobile, vital_name)
  *
  * Purpose
  * Retrieves the number of vital points a mobile has.
@@ -53,12 +53,12 @@
  * Returns a double.
  *
  */
-function AF_GetVital(mobile, vital_name)
+function attributes_GetVital(mobile, vital_name)
 	return (GetVital(mobile, vital_name) / 100);
 endfunction
 
 /*
- * AF_GetVital(mobile, vital_name)
+ * attributes_GetVital(mobile, vital_name)
  *
  * Purpose
  * Retrieves the maximum number of vital points a mobile can have.
@@ -71,12 +71,12 @@
  * Returns an integer.
  *
  */
-function AF_GetVitalMaximumValue(mobile, vital_name)
+function attributes_GetVitalMaximumValue(mobile, vital_name)
 	return GetVitalMaximumValue(mobile, vital_name);
 endfunction
 
 /*
- * AF_GetVitalRegenRate(mobile, vital_name)
+ * attributes_GetVitalRegenRate(mobile, vital_name)
  *
  * Purpose
  * Retrieves the regen rate of a vital on a mobile.
@@ -89,12 +89,12 @@
  * Returns an integer.
  *
  */
-function AF_GetVitalRegenRate(mobile, vital_name)
+function attributes_GetVitalRegenRate(mobile, vital_name)
 	return GetVitalRegenRate(mobile, vital_name);
 endfunction
 
 /*
- * AF_SetVital(mobile, vital_name, points)
+ * attributes_SetVital(mobile, vital_name, points)
  *
  * Purpose
  * Sets vital points on a mobile.
@@ -108,12 +108,12 @@
  * Returns result of the SetVital() core function.
  *
  */
-function AF_SetVital(mobile, vital_name, amount)
+function attributes_SetVital(mobile, vital_name, amount)
 	return SetVital(mobile, vital_name, CInt(CDbl(amount)*100.0));
 endfunction
 
 /*
- * AF_RefreshVitals(mobile)
+ * attributes_RefreshVitals(mobile)
  *
  * Purpose
  * Sets all vitals on a mobile to their maximum values.
@@ -125,10 +125,10 @@
  * Returns 1
  *
  */
-function AF_RefreshVitals(mobile)
+function attributes_RefreshVitals(mobile)
 	var vital_cfg := ReadConfigFile(":attributes:vitals");
 	foreach elem_name in GetConfigStringKeys(vital_cfg)
-		AF_SetVital(mobile, elem_name, AF_GetVitalMaximumValue(mobile, elem_name));
+		attributes_SetVital(mobile, elem_name, attributes_GetVitalMaximumValue(mobile, elem_name));
 		sleepms(2);
 	endforeach
 



From austin at berlios.de  Sun Sep 25 00:29:13 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 00:29:13 +0200
Subject: [Poldistro-svn] r224 - in trunk/096/pkg/systems/attributes: commands/test config hooks include
Message-ID: <200509242229.j8OMTDaP010213@sheep.berlios.de>

Author: austin
Date: 2005-09-25 00:29:13 +0200 (Sun, 25 Sep 2005)
New Revision: 224

Added:
   trunk/096/pkg/systems/attributes/config/settings.cfg
Modified:
   trunk/096/pkg/systems/attributes/commands/test/attribconvert.src
   trunk/096/pkg/systems/attributes/hooks/vitalInit.src
   trunk/096/pkg/systems/attributes/include/attributeConstants.inc
   trunk/096/pkg/systems/attributes/include/regen.inc
Log:


Modified: trunk/096/pkg/systems/attributes/commands/test/attribconvert.src
===================================================================
--- trunk/096/pkg/systems/attributes/commands/test/attribconvert.src	2005-09-24 22:27:01 UTC (rev 223)
+++ trunk/096/pkg/systems/attributes/commands/test/attribconvert.src	2005-09-24 22:29:13 UTC (rev 224)
@@ -9,8 +9,8 @@
 		SendSysMessage(who, "Error - no skillID or attribute name was sent.");
 		return;
 	elseif ( Len(input) <= 2 )
-		SendSysMessage(who, "SkillID ["+input+"] points to attribute "+AF_IDToAttributeName(input));
+		SendSysMessage(who, "SkillID ["+input+"] points to attribute "+attributes_IDToAttributeName(input));
 	else
-		SendSysMessage(who, "Attribute ["+input+"] points to skillID "+AF_AttributeNameToSkillID(input));
+		SendSysMessage(who, "Attribute ["+input+"] points to skillID "+attributes_AttributeNameToSkillID(input));
 	endif
 endprogram

Added: trunk/096/pkg/systems/attributes/config/settings.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-24 22:27:01 UTC (rev 223)
+++ trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-24 22:29:13 UTC (rev 224)
@@ -0,0 +1,14 @@
+Elem Vitals
+{
+	# Base stat regenerating rates in points per minute.
+	HitsRegenRate       20
+	ManaRegenRate       10
+	StamRegenRate       25	
+}
+
+Elem Skills
+{
+	AlwaysGainUntil	10.0	// Always award a part of the points when the base skill is lower than this.
+	MinChance	0	// Min % of success.
+	MaxChance	100	// Max % of success.
+}
\ No newline at end of file

Modified: trunk/096/pkg/systems/attributes/hooks/vitalInit.src
===================================================================
--- trunk/096/pkg/systems/attributes/hooks/vitalInit.src	2005-09-24 22:27:01 UTC (rev 223)
+++ trunk/096/pkg/systems/attributes/hooks/vitalInit.src	2005-09-24 22:29:13 UTC (rev 224)
@@ -25,7 +25,7 @@
 // Hit Point Functions
 // *****
 exported function GetHitsRegenRate(mobile)
-	return 1200 + AF_GetVitalRegenRateMod(mobile, "hits");
+	return 1200 + attributes_GetVitalRegenRateMod(mobile, "hits");
 endfunction
 
 exported function GetHitsMaximumValue(mobile)
@@ -41,7 +41,7 @@
 // Mana Functions
 // *****
 exported function GetManaRegenRate(mobile)
-	return 1200 + AF_GetVitalRegenRateMod(mobile, "mana");
+	return 1200 + attributes_GetVitalRegenRateMod(mobile, "mana");
 endfunction
 
 exported function GetManaMaximumValue(mobile)
@@ -57,7 +57,7 @@
 // Stamina Functions
 // *****
 exported function GetStaminaRegenRate(mobile)
-	return 1200 + AF_GetVitalRegenRateMod(mobile, "stamina");
+	return 1200 + attributes_GetVitalRegenRateMod(mobile, "stamina");
 endfunction
 
 exported function GetStaminaMaximumValue(mobile)

Modified: trunk/096/pkg/systems/attributes/include/attributeConstants.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributeConstants.inc	2005-09-24 22:27:01 UTC (rev 223)
+++ trunk/096/pkg/systems/attributes/include/attributeConstants.inc	2005-09-24 22:29:13 UTC (rev 224)
@@ -27,7 +27,7 @@
 	ATTRIBUTE_PARRY                     := "Parry",
 	ATTRIBUTE_BEGGING                   := "Begging",
 	ATTRIBUTE_BLACKSMITHY               := "Blacksmithy",
-	ATTRIBUTE_BOWCRAFT_FLETCHING        := "BowcraftFletching",
+	ATTRIBUTE_BOWCRattributes_T_FLETCHING        := "Bowcrattributes_tFletching",
 	ATTRIBUTE_PEACEMAKING               := "Peacemaking",
 	ATTRIBUTE_CAMPING                   := "Camping",
 	ATTRIBUTE_CARPENTRY                 := "Carpentry",

Modified: trunk/096/pkg/systems/attributes/include/regen.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-24 22:27:01 UTC (rev 223)
+++ trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-24 22:29:13 UTC (rev 224)
@@ -11,7 +11,7 @@
 use uo;
 
 /*
- * AF_SetVitalRegenRate(mobile, vital_name, number)
+ * attributes_SetVitalRegenRate(mobile, vital_name, number)
  *
  * Purpose
  * Sets the regeneration rate modifier for an attribute.
@@ -26,11 +26,11 @@
  * Returns 1
  *
  */
-function AF_SetVitalRegenRateMod(mobile, vital_name, number)
+function attributes_SetVitalRegenRateMod(mobile, vital_name, number)
 	vital_name := Lower(vital_name);
 	number := CInt(number);
 	
-	var regen_prop := AF_LoadVitalRegenRateProp(mobile);
+	var regen_prop := attributes_LoadVitalRegenRateProp(mobile);
 		
 	if ( number == 0 )
 		// Remove keys with no modifier
@@ -39,12 +39,12 @@
 		regen_prop[vital_name] := CInt(number);
 	endif
 	
-	AF_SaveVitalRegenRateProp(mobile, regen_prop);
+	attributes_SaveVitalRegenRateProp(mobile, regen_prop);
 	return 1;
 endfunction
 
 /*
- * AF_GetVitalRegenRateMod(mobile, vital_name)
+ * attributes_GetVitalRegenRateMod(mobile, vital_name)
  *
  * Purpose
  * Gets the regeneration rate modifier for a vital.
@@ -57,15 +57,15 @@
  * Returns an integer.
  *
  */
-function AF_GetVitalRegenRateMod(mobile, vital_name)
+function attributes_GetVitalRegenRateMod(mobile, vital_name)
 	vital_name := Lower(vital_name);
 	
-	var regen_prop := AF_LoadVitalRegenRateProp(mobile);
+	var regen_prop := attributes_LoadVitalRegenRateProp(mobile);
 	return CInt(regen_prop[vital_name]);
 endfunction
 
 /*
- * AF_LoadVitalRegenRateProp(mobile)
+ * attributes_LoadVitalRegenRateProp(mobile)
  *
  * Purpose
  * Loads the dictionary of regeneration settings from a mobile.
@@ -77,7 +77,7 @@
  * Returns a dictionary
  *
  */
-function AF_LoadVitalRegenRateProp(mobile)
+function attributes_LoadVitalRegenRateProp(mobile)
 	var regen_prop := GetObjProperty(mobile, "%RegenRates%");
 	if ( Lower(TypeOf(regen_prop)) != "dictionary" )
 		regen_prop := dictionary;
@@ -87,7 +87,7 @@
 endfunction
 
 /*
- * AF_SaveVitalRegenRateProp(mobile, regen_prop)
+ * attributes_SaveVitalRegenRateProp(mobile, regen_prop)
  *
  * Purpose
  * Saves the dictionary of regeneration settings on a mobile.
@@ -100,7 +100,7 @@
  * Returns the result of saving the property.
  *
  */
-function AF_SaveVitalRegenRateProp(mobile, byref regen_prop)
+function attributes_SaveVitalRegenRateProp(mobile, byref regen_prop)
 	if ( Lower(TypeOf(regen_prop)) != "dictionary" )
 		return error{"errortext":="Regen prop must be a dictionary."};
 	endif



From austin at berlios.de  Sun Sep 25 01:00:44 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 01:00:44 +0200
Subject: [Poldistro-svn] r225 - trunk/096/pkg/config/config
Message-ID: <200509242300.j8ON0i3a002683@sheep.berlios.de>

Author: austin
Date: 2005-09-25 01:00:20 +0200 (Sun, 25 Sep 2005)
New Revision: 225

Modified:
   trunk/096/pkg/config/config/shardconfig.cfg
Log:
Moved vital regen settings to attributes/config/settings.cfg

Modified: trunk/096/pkg/config/config/shardconfig.cfg
===================================================================
--- trunk/096/pkg/config/config/shardconfig.cfg	2005-09-24 22:29:13 UTC (rev 224)
+++ trunk/096/pkg/config/config/shardconfig.cfg	2005-09-24 23:00:20 UTC (rev 225)
@@ -15,11 +15,6 @@
 	# Offset from GMT
 	TimeZone            1
 
-	# Base stat regenerating rates in points per minute
-	HitsRegenRate       20
-	ManaRegenRate       10
-	StamRegenRate       25
-
 	# Time between saves in minutes, time of announcement before save in minutes
 	SaveTime            60
 	SaveAnnounce        2



From austin at berlios.de  Sun Sep 25 01:30:17 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 01:30:17 +0200
Subject: [Poldistro-svn] r226 - trunk/096/scripts
Message-ID: <200509242330.j8ONUHjR018279@sheep.berlios.de>

Author: austin
Date: 2005-09-25 01:30:08 +0200 (Sun, 25 Sep 2005)
New Revision: 226

Modified:
   trunk/096/scripts/ecompile.cfg
Log:
Disables dependancy generating (.dep files) - theyre annoying for right now.

Modified: trunk/096/scripts/ecompile.cfg
===================================================================
--- trunk/096/scripts/ecompile.cfg	2005-09-24 23:00:20 UTC (rev 225)
+++ trunk/096/scripts/ecompile.cfg	2005-09-24 23:30:08 UTC (rev 226)
@@ -37,5 +37,5 @@
 UpdateOnlyOnAutoCompile		1
 OnlyCompileUpdatedScripts	1
 DisplaySummary				1
-GenerateDependencyInfo		1
+GenerateDependencyInfo		0
 DisplayUpToDateScripts		0



From austin at berlios.de  Sun Sep 25 01:48:32 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 01:48:32 +0200
Subject: [Poldistro-svn] r227 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509242348.j8ONmWqq027250@sheep.berlios.de>

Author: austin
Date: 2005-09-25 01:48:12 +0200 (Sun, 25 Sep 2005)
New Revision: 227

Added:
   trunk/096/pkg/systems/attributes/include/settings.inc
Modified:
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
Log:


Added: trunk/096/pkg/systems/attributes/include/settings.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/settings.inc	2005-09-24 23:30:08 UTC (rev 226)
+++ trunk/096/pkg/systems/attributes/include/settings.inc	2005-09-24 23:48:12 UTC (rev 227)
@@ -0,0 +1,54 @@
+use uo;
+use os;
+use cfgfile;
+
+/*
+ * AP_GetSettingsCfgFile(engine_name)
+ *
+ * Purpose
+ * Reads in :attributes:configs/settings.cfg
+ *
+ * Parameters
+ *
+ * Return value
+ * A config file reference.
+ *
+ */
+function AP_GetSettingsCfgFile()
+	var cfg := ReadConfigFile(":attributes:config/settings");
+
+	if ( cfg.errortext )
+		SysLog("Error::AP_GetSettingsCfgFile() - Unable to open [:attributes:config/settings.cfg] ->"+cfg.errortext);
+	endif
+
+	return cfg;
+endfunction
+
+/*
+ * AP_GetSettingsCfgElem(elem_name, cfg_file)
+ *
+ * Purpose
+ * Retrieves an elem from a config file. 
+ *
+ * Parameters
+ * elem_name:	A string matching the elem name to be retrieved.
+ * cfg_file:	Optional parameter - reference to a config already read in by AP_GetSettingsCfgFile()
+ *
+ * Return value
+ * A config file elem reference.
+ *
+ */
+function AP_GetSettingsCfgElem(elem_name, byref cfg_file:=0)
+	if ( !cfg_file )
+		cfg_file := AP_GetSettingsCfgFile();
+	endif
+	
+	var elem := cfg_file[elem_name];
+
+	if ( elem.errortext )
+		SysLog("Error::AP_GetSettingsCfgElem() - Unable to find elem ["+elem_name+"] ->"+elem.errortext);
+	endif
+
+	return elem;
+endfunction
+

Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-24 23:30:08 UTC (rev 226)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-24 23:48:12 UTC (rev 227)
@@ -18,8 +18,7 @@
 const ADV_SKILL		:= 1;
 const ADV_STATS		:= 2;
 const ADV_ALL		:= ADV_SKILL+ADV_STATS; // 3
-//Set to 4 because if it was 0, it would default to ADV_ALL.
-const ADV_DISABLE	:= 4;
+const ADV_DISABLE	:= 4; // 4 - because if flags is 0, we want the default to be ADV_ALL.
 
 var g_skill_debug	:= 0;
 



From austin at berlios.de  Sun Sep 25 02:00:02 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 02:00:02 +0200
Subject: [Poldistro-svn] r228 - in trunk/096/pkg/systems/attributes: commands/test config hooks include
Message-ID: <200509250000.j8P002V7000376@sheep.berlios.de>

Author: austin
Date: 2005-09-25 01:59:50 +0200 (Sun, 25 Sep 2005)
New Revision: 228

Modified:
   trunk/096/pkg/systems/attributes/commands/test/attribconvert.src
   trunk/096/pkg/systems/attributes/config/settings.cfg
   trunk/096/pkg/systems/attributes/hooks/vitalInit.src
   trunk/096/pkg/systems/attributes/include/attributeConstants.inc
   trunk/096/pkg/systems/attributes/include/attributes.inc
   trunk/096/pkg/systems/attributes/include/attributes_ex.inc
   trunk/096/pkg/systems/attributes/include/regen.inc
   trunk/096/pkg/systems/attributes/include/skills.inc
   trunk/096/pkg/systems/attributes/include/stats.inc
   trunk/096/pkg/systems/attributes/include/vitals.inc
Log:
Working on using settings.cfg  :-D
Newbie friendly.. probably need to cache some stuff in a datafile for faster access.

Modified: trunk/096/pkg/systems/attributes/commands/test/attribconvert.src
===================================================================
--- trunk/096/pkg/systems/attributes/commands/test/attribconvert.src	2005-09-24 23:48:12 UTC (rev 227)
+++ trunk/096/pkg/systems/attributes/commands/test/attribconvert.src	2005-09-24 23:59:50 UTC (rev 228)
@@ -2,15 +2,15 @@
 use os;
 
 include ":attributes:include/attributeConstants";
-include ":attributes:include/attributes_ex";
+include ":attributes:include/AP_ex";
 
 program command_AttribConvert(who, input)
 	if ( !input )
 		SendSysMessage(who, "Error - no skillID or attribute name was sent.");
 		return;
 	elseif ( Len(input) <= 2 )
-		SendSysMessage(who, "SkillID ["+input+"] points to attribute "+attributes_IDToAttributeName(input));
+		SendSysMessage(who, "SkillID ["+input+"] points to attribute "+AP_IDToAttributeName(input));
 	else
-		SendSysMessage(who, "Attribute ["+input+"] points to skillID "+attributes_AttributeNameToSkillID(input));
+		SendSysMessage(who, "Attribute ["+input+"] points to skillID "+AP_AttributeNameToSkillID(input));
 	endif
 endprogram

Modified: trunk/096/pkg/systems/attributes/config/settings.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-24 23:48:12 UTC (rev 227)
+++ trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-24 23:59:50 UTC (rev 228)
@@ -1,14 +1,28 @@
-Elem Vitals
+Elem Regen
 {
 	# Base stat regenerating rates in points per minute.
-	HitsRegenRate       20
-	ManaRegenRate       10
-	StamRegenRate       25	
+	Hits		20
+	Mana		10
+	Stamina		25	
 }
 
 Elem Skills
 {
-	AlwaysGainUntil	10.0	// Always award a part of the points when the base skill is lower than this.
-	MinChance	0	// Min % of success.
-	MaxChance	100	// Max % of success.
-}
\ No newline at end of file
+	FreeGainUntil	10.0	// Always award a part of the points when the base skill is lower than this.
+	MinChance		0		// Min % of success.
+	MaxChance		100		// Max % of success.
+	
+	// Maximum value of all skills combined.
+	TotalCap		7000.0
+}
+
+Elem Stats
+{
+	// Maximum value of all stats combined.
+	TotalCap			225.0
+	
+	// Individual stat caps - highest they are allowed to go.
+	Strength		100.0
+	Dexterity		100.0
+	Intelligence	100.0
+}

Modified: trunk/096/pkg/systems/attributes/hooks/vitalInit.src
===================================================================
--- trunk/096/pkg/systems/attributes/hooks/vitalInit.src	2005-09-24 23:48:12 UTC (rev 227)
+++ trunk/096/pkg/systems/attributes/hooks/vitalInit.src	2005-09-24 23:59:50 UTC (rev 228)
@@ -11,6 +11,7 @@
 use util;
 
 include ":attributes:include/attributes";
+include ":attributes:include/settings";
 include ":ai_brain:include/npcUtil";
 include ":config:include/config";
 
@@ -19,13 +20,13 @@
 	return 1;
 endprogram
 
-
-
 // *****
 // Hit Point Functions
 // *****
 exported function GetHitsRegenRate(mobile)
-	return 1200 + attributes_GetVitalRegenRateMod(mobile, "hits");
+	var base_regen := CInt(AP_GetSettingsCfgElem("Regen").Hits) * 100;
+
+	return base_regen + AP_GetVitalRegenRateMod(mobile, "hits");
 endfunction
 
 exported function GetHitsMaximumValue(mobile)
@@ -41,7 +42,9 @@
 // Mana Functions
 // *****
 exported function GetManaRegenRate(mobile)
-	return 1200 + attributes_GetVitalRegenRateMod(mobile, "mana");
+	var base_regen := CInt(AP_GetSettingsCfgElem("Regen").Mana) * 100;
+	
+	return base_regen + AP_GetVitalRegenRateMod(mobile, "mana");
 endfunction
 
 exported function GetManaMaximumValue(mobile)
@@ -57,7 +60,9 @@
 // Stamina Functions
 // *****
 exported function GetStaminaRegenRate(mobile)
-	return 1200 + attributes_GetVitalRegenRateMod(mobile, "stamina");
+	var base_regen := CInt(AP_GetSettingsCfgElem("Regen").Stamina) * 100;
+	
+	return base_regen + AP_GetVitalRegenRateMod(mobile, "stamina");
 endfunction
 
 exported function GetStaminaMaximumValue(mobile)
@@ -76,7 +81,7 @@
 	if ( !mobile.npctemplate )
 		return 0;
 	endif
-	
+
 	var value := 0;
 
 	// CProp used if NPC had dice settings - so they dont change over and over.

Modified: trunk/096/pkg/systems/attributes/include/attributeConstants.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributeConstants.inc	2005-09-24 23:48:12 UTC (rev 227)
+++ trunk/096/pkg/systems/attributes/include/attributeConstants.inc	2005-09-24 23:59:50 UTC (rev 228)
@@ -27,7 +27,7 @@
 	ATTRIBUTE_PARRY                     := "Parry",
 	ATTRIBUTE_BEGGING                   := "Begging",
 	ATTRIBUTE_BLACKSMITHY               := "Blacksmithy",
-	ATTRIBUTE_BOWCRattributes_T_FLETCHING        := "Bowcrattributes_tFletching",
+	ATTRIBUTE_BOWCRAP_T_FLETCHING        := "BowcrAP_tFletching",
 	ATTRIBUTE_PEACEMAKING               := "Peacemaking",
 	ATTRIBUTE_CAMPING                   := "Camping",
 	ATTRIBUTE_CARPENTRY                 := "Carpentry",

Modified: trunk/096/pkg/systems/attributes/include/attributes.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-24 23:48:12 UTC (rev 227)
+++ trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-24 23:59:50 UTC (rev 228)
@@ -18,7 +18,7 @@
 include ":attributes:include/vitals";
 
 /*
- * attributes_GetAttributeCfgElem(attribute)
+ * AP_GetAttributeCfgElem(attribute)
  *
  * Purpose
  * Retrieves a config elem for an attribute in attributes.cfg
@@ -30,22 +30,22 @@
  * Returns a config file elem.
  *
  */
-function attributes_GetAttributeCfgElem(attribute)
+function AP_GetAttributeCfgElem(attribute)
 	var cfg := ReadConfigFile(":attributes:attributes");
 	if ( cfg.errortext )
-		SysLog("Error::attributes_GetAttributeCfgElem() - Unable to open attributes.cfg ->"+cfg.errortext);
+		SysLog("Error::AP_GetAttributeCfgElem() - Unable to open attributes.cfg ->"+cfg.errortext);
 	endif
 	
 	var cfg_elem := cfg[attribute];
 	if ( cfg_elem.errortext )
-		SysLog("Error::attributes_GetAttributeCfgElem() - unable to find cfg elem ["+attribute+"] ->"+cfg_elem.errortext);
+		SysLog("Error::AP_GetAttributeCfgElem() - unable to find cfg elem ["+attribute+"] ->"+cfg_elem.errortext);
 	endif
 	
 	return cfg_elem;
 endfunction
 
 /*
- * attributes_ListAttributesByType(type)
+ * AP_ListAttributesByType(type)
  *
  * Purpose
  * Gets the name of all attributes of a certain type.
@@ -57,7 +57,7 @@
  * Returns an array
  *
  */
-function attributes_ListAttributesByType(type)
+function AP_ListAttributesByType(type)
 	type := Lower(type);
 	
 	var list := array;

Modified: trunk/096/pkg/systems/attributes/include/attributes_ex.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes_ex.inc	2005-09-24 23:48:12 UTC (rev 227)
+++ trunk/096/pkg/systems/attributes/include/attributes_ex.inc	2005-09-24 23:59:50 UTC (rev 228)
@@ -1,6 +1,6 @@
 /*===============================================================
 * Current Version
-* ATTRIBUTES_EX.INC - v1.0
+* AP_EX.INC - v1.0
 * Updated 9/20/2005 11:42AM
 *
 * -- Revision v1.0 --
@@ -11,7 +11,7 @@
 include ":attributes:include/attributes";
 
 /*
- * attributes_SkillIDToAttributeName(skill_number)
+ * AP_SkillIDToAttributeName(skill_number)
  *
  * Purpose
  * Gets the name of the attribute that is associated with a skill number.
@@ -24,22 +24,22 @@
  * Returns a string.
  *
  */
-function attributes_IDToAttributeName(skill_number)
+function AP_IDToAttributeName(skill_number)
 	var skills_cfg := ReadConfigFile(":attributes:uoskills");
 	if ( skills_cfg.errortext )
-		SysLog("Error::attributes_IDToAttributeName() - Unable to open :attributes:uoskills.cfg ->"+skills_cfg.errortext);
+		SysLog("Error::AP_IDToAttributeName() - Unable to open :attributes:uoskills.cfg ->"+skills_cfg.errortext);
 	endif
 	
 	var cfg_elem := skills_cfg[skill_number];
 	if ( cfg_elem.errortext )
-		SysLog("Error::attributes_IDToAttributeName() - unable to find cfg elem ["+skill_number+"] ->"+cfg_elem.errortext);
+		SysLog("Error::AP_IDToAttributeName() - unable to find cfg elem ["+skill_number+"] ->"+cfg_elem.errortext);
 	endif
 	
 	return cfg_elem.Attribute;
 endfunction
 
 /*
- * attributes_AttributeNameToSkillID(attribute_name)
+ * AP_AttributeNameToSkillID(attribute_name)
  *
  * Purpose
  * Gets the skill number (ID) that an attribute name is associated with.
@@ -52,8 +52,8 @@
  * Returns an integer.
  *
  */
-function attributes_AttributeNameToSkillID(attribute_name)
-	var cfg_elem := attributes_GetAttributeCfgElem(attribute_name);
+function AP_AttributeNameToSkillID(attribute_name)
+	var cfg_elem := AP_GetAttributeCfgElem(attribute_name);
 	
 	return cfg_elem.SkillId;
 endfunction
\ No newline at end of file

Modified: trunk/096/pkg/systems/attributes/include/regen.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-24 23:48:12 UTC (rev 227)
+++ trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-24 23:59:50 UTC (rev 228)
@@ -11,11 +11,11 @@
 use uo;
 
 /*
- * attributes_SetVitalRegenRate(mobile, vital_name, number)
+ * AP_SetVitalRegenRate(mobile, vital_name, number)
  *
  * Purpose
  * Sets the regeneration rate modifier for an attribute.
- * Base value is 1200 (unless you changed it)
+ * Base values are in settings.cfg (multiply by 100)
  *
  * Parameters
  * mobile:	Mobile reference to set the modifier on.
@@ -26,11 +26,11 @@
  * Returns 1
  *
  */
-function attributes_SetVitalRegenRateMod(mobile, vital_name, number)
+function AP_SetVitalRegenRateMod(mobile, vital_name, number)
 	vital_name := Lower(vital_name);
 	number := CInt(number);
 	
-	var regen_prop := attributes_LoadVitalRegenRateProp(mobile);
+	var regen_prop := AP_LoadVitalRegenRateProp(mobile);
 		
 	if ( number == 0 )
 		// Remove keys with no modifier
@@ -39,12 +39,12 @@
 		regen_prop[vital_name] := CInt(number);
 	endif
 	
-	attributes_SaveVitalRegenRateProp(mobile, regen_prop);
+	AP_SaveVitalRegenRateProp(mobile, regen_prop);
 	return 1;
 endfunction
 
 /*
- * attributes_GetVitalRegenRateMod(mobile, vital_name)
+ * AP_GetVitalRegenRateMod(mobile, vital_name)
  *
  * Purpose
  * Gets the regeneration rate modifier for a vital.
@@ -57,15 +57,15 @@
  * Returns an integer.
  *
  */
-function attributes_GetVitalRegenRateMod(mobile, vital_name)
+function AP_GetVitalRegenRateMod(mobile, vital_name)
 	vital_name := Lower(vital_name);
 	
-	var regen_prop := attributes_LoadVitalRegenRateProp(mobile);
+	var regen_prop := AP_LoadVitalRegenRateProp(mobile);
 	return CInt(regen_prop[vital_name]);
 endfunction
 
 /*
- * attributes_LoadVitalRegenRateProp(mobile)
+ * AP_LoadVitalRegenRateProp(mobile)
  *
  * Purpose
  * Loads the dictionary of regeneration settings from a mobile.
@@ -77,7 +77,7 @@
  * Returns a dictionary
  *
  */
-function attributes_LoadVitalRegenRateProp(mobile)
+function AP_LoadVitalRegenRateProp(mobile)
 	var regen_prop := GetObjProperty(mobile, "%RegenRates%");
 	if ( Lower(TypeOf(regen_prop)) != "dictionary" )
 		regen_prop := dictionary;
@@ -87,7 +87,7 @@
 endfunction
 
 /*
- * attributes_SaveVitalRegenRateProp(mobile, regen_prop)
+ * AP_SaveVitalRegenRateProp(mobile, regen_prop)
  *
  * Purpose
  * Saves the dictionary of regeneration settings on a mobile.
@@ -100,7 +100,7 @@
  * Returns the result of saving the property.
  *
  */
-function attributes_SaveVitalRegenRateProp(mobile, byref regen_prop)
+function AP_SaveVitalRegenRateProp(mobile, byref regen_prop)
 	if ( Lower(TypeOf(regen_prop)) != "dictionary" )
 		return error{"errortext":="Regen prop must be a dictionary."};
 	endif

Modified: trunk/096/pkg/systems/attributes/include/skills.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-24 23:48:12 UTC (rev 227)
+++ trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-24 23:59:50 UTC (rev 228)
@@ -11,7 +11,7 @@
 use uo;
 
 /*
- * attributes_GetSkill(mobile, skill_name)
+ * AP_GetSkill(mobile, skill_name)
  *
  * Purpose
  * Retrieves the base value of the skill plus its mod value.
@@ -24,12 +24,12 @@
  * Returns an integer.
  *
  */
-function attributes_GetSkill(who, skill_name)
-	return attributes_GetTrueSkill(who, skill_name)+attributes_GetSkillMod(who, skill_name);
+function AP_GetSkill(who, skill_name)
+	return AP_GetTrueSkill(who, skill_name)+AP_GetSkillMod(who, skill_name);
 endfunction
 
 /*
- * attributes_GetTrueSkill(mobile, skill_name)
+ * AP_GetTrueSkill(mobile, skill_name)
  *
  * Purpose
  * Retrieves the base value of the skill and turns it into a usable number.
@@ -42,12 +42,12 @@
  * Returns a double.
  *
  */
-function attributes_GetTrueSkill(who, skill_name)
+function AP_GetTrueSkill(who, skill_name)
 	return CDbl(GetAttributeBaseValue(who, skill_name)) / 10.0;
 endfunction
 
 /*
- * attributes_GetSkillMod(mobile, skill_name)
+ * AP_GetSkillMod(mobile, skill_name)
  *
  * Purpose
  * Retrieves the base value of the skill mod and turns it into a usable number.
@@ -60,16 +60,16 @@
  * Returns a double.
  *
  */
-function attributes_GetSkillMod(who, skill_name)
+function AP_GetSkillMod(who, skill_name)
 	return CDbl(GetAttributeTemporaryMod(who, skill_name)) / 10.0;
 endfunction
 
 /*
- * attributes_SetTrueSkill(mobile, skill_name, points)
+ * AP_SetTrueSkill(mobile, skill_name, points)
  *
  * Purpose
  * Sets the value of the skill.
- * Example: attributes_SetTrueSkill(mobile, "strength", 44.5)
+ * Example: AP_SetTrueSkill(mobile, "strength", 44.5)
  *
  * Parameters
  * mobile:	Mobile reference to set the points on.
@@ -80,16 +80,16 @@
  * Returns a double.
  *
  */
-function attributes_SetTrueSkill(mobile, skill_name, points)
+function AP_SetTrueSkill(mobile, skill_name, points)
 	SetAttributeBaseValue(mobile, skill_name, CInt(CDbl(points) * 10.0));
 endfunction
 
 /*
- * attributes_SetSkillMod(mobile, skill_name, points)
+ * AP_SetSkillMod(mobile, skill_name, points)
  *
  * Purpose
  * Sets the modifier value for the skill.
- * Example: attributes_SetSkillMod(mobile, "strength", -15.3)
+ * Example: AP_SetSkillMod(mobile, "strength", -15.3)
  *
  * Parameters
  * mobile:	Mobile reference to set the modifier points on.
@@ -100,12 +100,12 @@
  * Returns a double.
  *
  */
-function attributes_SetSkillMod(mobile, skill_name, points)
+function AP_SetSkillMod(mobile, skill_name, points)
 	SetAttributeTemporaryMod(mobile, skill_name, CInt(CDbl(points) * 10.0));
 endfunction
 
 /*
- * attributes_SetSkillScript(attribute_name)
+ * AP_SetSkillScript(attribute_name)
  *
  * Purpose
  * Gets the script that a skill uses.
@@ -117,13 +117,13 @@
  * Returns a string.
  *
  */
-function attributes_GetSkillScript(attribute_name)
-	var cfg := attributes_GetAttributeCfgElem(attribute_name);
+function AP_GetSkillScript(attribute_name)
+	var cfg := AP_GetAttributeCfgElem(attribute_name);
 	return cfg.Script;
 endfunction
 
 /*
- * attributes_GetSkillStats(attribute_name)
+ * AP_GetSkillStats(attribute_name)
  *
  * Purpose
  * Retrieves a dictionary from the attribute's config elem
@@ -137,8 +137,8 @@
  * Returns a dictionary.
  *
  */
-function attributes_GetSkillStats(attribute_name)
-	var cfg_elem := attributes_GetAttributeCfgElem(attribute_name);
+function AP_GetSkillStats(attribute_name)
+	var cfg_elem := AP_GetAttributeCfgElem(attribute_name);
 	var stat_entries := GetConfigStringDictionary(cfg_elem, "StatCheck");
 	foreach textline in (stat_entries)
 		textline := SplitWords(textline);

Modified: trunk/096/pkg/systems/attributes/include/stats.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-24 23:48:12 UTC (rev 227)
+++ trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-24 23:59:50 UTC (rev 228)
@@ -11,7 +11,7 @@
 use uo;
 
 /*
- * attributes_GetStat(mobile, stat_name)
+ * AP_GetStat(mobile, stat_name)
  *
  * Purpose
  * Retrieves the base value of the stat plus its mod value.
@@ -24,12 +24,12 @@
  * Returns an integer.
  *
  */
-function attributes_GetStat(who, stat_name)
-	return attributes_GetTrueStat(who, stat_name)+attributes_GetStatMod(who, stat_name);
+function AP_GetStat(who, stat_name)
+	return AP_GetTrueStat(who, stat_name)+AP_GetStatMod(who, stat_name);
 endfunction
 
 /*
- * attributes_GetTrueStat(mobile, stat_name)
+ * AP_GetTrueStat(mobile, stat_name)
  *
  * Purpose
  * Retrieves the base value of the stat and turns it into a usable number.
@@ -42,12 +42,12 @@
  * Returns a double.
  *
  */
-function attributes_GetTrueStat(who, stat_name)
+function AP_GetTrueStat(who, stat_name)
 	return CDbl(GetAttributeBaseValue(who, stat_name)) / 10.0;
 endfunction
 
 /*
- * attributes_GetStatMod(mobile, stat_name)
+ * AP_GetStatMod(mobile, stat_name)
  *
  * Purpose
  * Retrieves the base value of the stat mod and turns it into a usable number.
@@ -60,16 +60,16 @@
  * Returns a double.
  *
  */
-function attributes_GetStatMod(who, stat_name)
+function AP_GetStatMod(who, stat_name)
 	return CDbl(GetAttributeTemporaryMod(who, stat_name)) / 10.0;
 endfunction
 
 /*
- * attributes_SetTrueStat(mobile, stat_name, points)
+ * AP_SetTrueStat(mobile, stat_name, points)
  *
  * Purpose
  * Sets the value of the stat.
- * Example: attributes_SetTrueStat(mobile, "strength", 44.5)
+ * Example: AP_SetTrueStat(mobile, "strength", 44.5)
  *
  * Parameters
  * mobile:	Mobile reference to set the points on.
@@ -80,16 +80,16 @@
  * Returns a double.
  *
  */
-function attributes_SetTrueStat(mobile, stat_name, points)
+function AP_SetTrueStat(mobile, stat_name, points)
 	SetAttributeBaseValue(mobile, stat_name, CInt(CDbl(points) * 10.0));
 endfunction
 
 /*
- * attributes_SetStatMod(mobile, stat_name, points)
+ * AP_SetStatMod(mobile, stat_name, points)
  *
  * Purpose
  * Sets the modifier value for the stat.
- * Example: attributes_SetStatMod(mobile, "strength", -15.3)
+ * Example: AP_SetStatMod(mobile, "strength", -15.3)
  *
  * Parameters
  * mobile:	Mobile reference to set the modifier points on.
@@ -100,6 +100,6 @@
  * Returns a double.
  *
  */
-function attributes_SetStatMod(mobile, stat_name, points)
+function AP_SetStatMod(mobile, stat_name, points)
 	SetAttributeTemporaryMod(mobile, stat_name, CInt(CDbl(points) * 10.0));
 endfunction

Modified: trunk/096/pkg/systems/attributes/include/vitals.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-24 23:48:12 UTC (rev 227)
+++ trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-24 23:59:50 UTC (rev 228)
@@ -13,7 +13,7 @@
 use cfgfile;
 
 /*
- * attributes_GetVitalCfgElem(vital)
+ * AP_GetVitalCfgElem(vital)
  *
  * Purpose
  * Retrieves a config elem for an vital in vitals.cfg
@@ -25,22 +25,22 @@
  * Returns a config file elem.
  *
  */
-function attributes_GetVitalCfgElem(vital)
+function AP_GetVitalCfgElem(vital)
 	var cfg := ReadConfigFile(":attributes:vitals");
 	if ( cfg.errortext )
-		SysLog("Error::attributes_GetVitalCfgElem() - Unable to open vitals.cfg ->"+cfg.errortext);
+		SysLog("Error::AP_GetVitalCfgElem() - Unable to open vitals.cfg ->"+cfg.errortext);
 	endif
 	
 	var cfg_elem := cfg[vital];
 	if ( cfg_elem.errortext )
-		SysLog("Error::attributes_GetVitalsCfgElem() - unable to find cfg elem ["+vital+"] ->"+cfg_elem.errortext);
+		SysLog("Error::AP_GetVitalsCfgElem() - unable to find cfg elem ["+vital+"] ->"+cfg_elem.errortext);
 	endif
 	
 	return cfg_elem;
 endfunction
 
 /*
- * attributes_GetVital(mobile, vital_name)
+ * AP_GetVital(mobile, vital_name)
  *
  * Purpose
  * Retrieves the number of vital points a mobile has.
@@ -53,12 +53,12 @@
  * Returns a double.
  *
  */
-function attributes_GetVital(mobile, vital_name)
+function AP_GetVital(mobile, vital_name)
 	return (GetVital(mobile, vital_name) / 100);
 endfunction
 
 /*
- * attributes_GetVital(mobile, vital_name)
+ * AP_GetVital(mobile, vital_name)
  *
  * Purpose
  * Retrieves the maximum number of vital points a mobile can have.
@@ -71,12 +71,12 @@
  * Returns an integer.
  *
  */
-function attributes_GetVitalMaximumValue(mobile, vital_name)
+function AP_GetVitalMaximumValue(mobile, vital_name)
 	return GetVitalMaximumValue(mobile, vital_name);
 endfunction
 
 /*
- * attributes_GetVitalRegenRate(mobile, vital_name)
+ * AP_GetVitalRegenRate(mobile, vital_name)
  *
  * Purpose
  * Retrieves the regen rate of a vital on a mobile.
@@ -89,12 +89,12 @@
  * Returns an integer.
  *
  */
-function attributes_GetVitalRegenRate(mobile, vital_name)
+function AP_GetVitalRegenRate(mobile, vital_name)
 	return GetVitalRegenRate(mobile, vital_name);
 endfunction
 
 /*
- * attributes_SetVital(mobile, vital_name, points)
+ * AP_SetVital(mobile, vital_name, points)
  *
  * Purpose
  * Sets vital points on a mobile.
@@ -108,12 +108,12 @@
  * Returns result of the SetVital() core function.
  *
  */
-function attributes_SetVital(mobile, vital_name, amount)
+function AP_SetVital(mobile, vital_name, amount)
 	return SetVital(mobile, vital_name, CInt(CDbl(amount)*100.0));
 endfunction
 
 /*
- * attributes_RefreshVitals(mobile)
+ * AP_RefreshVitals(mobile)
  *
  * Purpose
  * Sets all vitals on a mobile to their maximum values.
@@ -125,10 +125,10 @@
  * Returns 1
  *
  */
-function attributes_RefreshVitals(mobile)
+function AP_RefreshVitals(mobile)
 	var vital_cfg := ReadConfigFile(":attributes:vitals");
 	foreach elem_name in GetConfigStringKeys(vital_cfg)
-		attributes_SetVital(mobile, elem_name, attributes_GetVitalMaximumValue(mobile, elem_name));
+		AP_SetVital(mobile, elem_name, AP_GetVitalMaximumValue(mobile, elem_name));
 		sleepms(2);
 	endforeach
 



From austin at berlios.de  Sun Sep 25 03:37:27 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 03:37:27 +0200
Subject: [Poldistro-svn] r229 - in trunk/096/pkg/systems/attributes: config include
Message-ID: <200509250137.j8P1bRLh017839@sheep.berlios.de>

Author: austin
Date: 2005-09-25 03:37:26 +0200 (Sun, 25 Sep 2005)
New Revision: 229

Modified:
   trunk/096/pkg/systems/attributes/config/settings.cfg
   trunk/096/pkg/systems/attributes/include/attributes.inc
   trunk/096/pkg/systems/attributes/include/regen.inc
   trunk/096/pkg/systems/attributes/include/skills.inc
   trunk/096/pkg/systems/attributes/include/stats.inc
   trunk/096/pkg/systems/attributes/include/vitals.inc
Log:
Added CheckSkillCap() and CheckStatCap()

Modified: trunk/096/pkg/systems/attributes/config/settings.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-24 23:59:50 UTC (rev 228)
+++ trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-25 01:37:26 UTC (rev 229)
@@ -1,9 +1,9 @@
 Elem Regen
 {
 	# Base stat regenerating rates in points per minute.
-	Hits		20
-	Mana		10
-	Stamina		25	
+	Hits			20
+	Mana			10
+	Stamina			25	
 }
 
 Elem Skills
@@ -19,7 +19,7 @@
 Elem Stats
 {
 	// Maximum value of all stats combined.
-	TotalCap			225.0
+	TotalCap		225.0
 	
 	// Individual stat caps - highest they are allowed to go.
 	Strength		100.0

Modified: trunk/096/pkg/systems/attributes/include/attributes.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-24 23:59:50 UTC (rev 228)
+++ trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-25 01:37:26 UTC (rev 229)
@@ -13,6 +13,7 @@
 use cfgfile;
 
 include ":attributes:include/regen";
+include ":attributes:include/settings";
 include ":attributes:include/skills";
 include ":attributes:include/stats";
 include ":attributes:include/vitals";
@@ -57,13 +58,18 @@
  * Returns an array
  *
  */
-function AP_ListAttributesByType(type)
+function AP_ListAttributesByType(type:="")
+	var cfg_file := ReadConfigFile(":attributes:attributes");
+	
+	if ( !type )
+		return GetConfigStringKeys(cfg_file);
+	endif
+	
 	type := Lower(type);
-	
 	var list := array;
-	var cfg := ReadConfigFile(":attributes:attributes");
-	foreach elem_name in ( GetConfigStringKeys(cfg) )
-		var elem_info := cfg[elem_name];
+
+	foreach elem_name in ( GetConfigStringKeys(cfg_file) )
+		var elem_info := cfg_file[elem_name];
 		if ( Lower(elem_info.AttributeType) == type )
 			list.append(array);
 		endif

Modified: trunk/096/pkg/systems/attributes/include/regen.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-24 23:59:50 UTC (rev 228)
+++ trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-25 01:37:26 UTC (rev 229)
@@ -91,6 +91,7 @@
  *
  * Purpose
  * Saves the dictionary of regeneration settings on a mobile.
+ * Updates the regeneration rate on the mobile.
  *
  * Parameters
  * mobile:	Mobile reference to save the regen information on.
@@ -105,7 +106,10 @@
 		return error{"errortext":="Regen prop must be a dictionary."};
 	endif
 	
-	RecalcVitals(mobile);
+	var result := SetObjProperty(mobile, "%RegenRates%", regen_prop);
+	if ( result != error )
+		RecalcVitals(mobile);
+	endif
 	
-	return SetObjProperty(mobile, "%RegenRates%", regen_prop);
+	return result;
 endfunction
\ No newline at end of file

Modified: trunk/096/pkg/systems/attributes/include/skills.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-24 23:59:50 UTC (rev 228)
+++ trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-25 01:37:26 UTC (rev 229)
@@ -147,3 +147,35 @@
 	
 	return stat_entries;
 endfunction
+
+/*
+ * AP_CheckSkillCap(mobile, skill_name)
+ *
+ * Purpose
+ * Checks if a skill is greater than or equal to its maximum value in settings.cfg
+ * If no skill_name is passed, it will check the totals.
+ *
+ * Parameters
+ * mobile:		Mobile to check the skills on
+ * stat_name:	Optional parameter - name of the skill to check.
+ *
+ * Return value
+ * Returns 1 if skill(s) >= to the cap
+ *
+ */
+function AP_CheckSkillCap(mobile, skill_name:="")
+	var cfg_elem := AP_GetSettingsCfgElem("Skills");
+	
+	if ( skill_name )
+		var cap := GetConfigReal(cfg_elem, skill_name);
+		return ( AP_GetTrueSkill(mobile, skill_name) >= cap );
+	else
+		var total := 0.0;
+		foreach attribute_name in ( AP_ListAttributesByType("Skill") )
+			total := total + AP_GetTrueSkill(mobile, attribute_name);
+			sleepms(2);
+		endforeach
+		
+		return ( total >= GetConfigReal(cfg_elem, "TotalCap") );
+	endif
+endfunction

Modified: trunk/096/pkg/systems/attributes/include/stats.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-24 23:59:50 UTC (rev 228)
+++ trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-25 01:37:26 UTC (rev 229)
@@ -17,7 +17,7 @@
  * Retrieves the base value of the stat plus its mod value.
  *
  * Parameters
- * mobile:	Mobile reference to retrieve the points from.
+ * mobile:		Mobile reference to retrieve the points from.
  * stat_name:	Name of the stat to retrieve the points for.
  *
  * Return value
@@ -35,7 +35,7 @@
  * Retrieves the base value of the stat and turns it into a usable number.
  *
  * Parameters
- * mobile:	Mobile reference to retrieve the points from.
+ * mobile:		Mobile reference to retrieve the points from.
  * stat_name:	Name of the stat to retrieve the points for.
  *
  * Return value
@@ -53,7 +53,7 @@
  * Retrieves the base value of the stat mod and turns it into a usable number.
  *
  * Parameters
- * mobile:	Mobile reference to retrieve the points from.
+ * mobile:		Mobile reference to retrieve the points from.
  * stat_name:	Name of the stat to retrieve the modifier points for.
  *
  * Return value
@@ -72,9 +72,9 @@
  * Example: AP_SetTrueStat(mobile, "strength", 44.5)
  *
  * Parameters
- * mobile:	Mobile reference to set the points on.
+ * mobile:		Mobile reference to set the points on.
  * stat_name:	Name of the stat to set the points on.
- * points:	Number of points to set the stat at.
+ * points:		Number of points to set the stat at.
  *
  * Return value
  * Returns a double.
@@ -89,12 +89,12 @@
  *
  * Purpose
  * Sets the modifier value for the stat.
- * Example: AP_SetStatMod(mobile, "strength", -15.3)
+ * Example: 	AP_SetStatMod(mobile, "strength", -15.3)
  *
  * Parameters
- * mobile:	Mobile reference to set the modifier points on.
+ * mobile:		Mobile reference to set the modifier points on.
  * stat_name:	Name of the stat to set the modifier points on.
- * points:	Number of points to set the modifier stat at.
+ * points:		Number of points to set the modifier stat at.
  *
  * Return value
  * Returns a double.
@@ -103,3 +103,35 @@
 function AP_SetStatMod(mobile, stat_name, points)
 	SetAttributeTemporaryMod(mobile, stat_name, CInt(CDbl(points) * 10.0));
 endfunction
+
+/*
+ * AP_CheckStatCap(mobile, stat_name)
+ *
+ * Purpose
+ * Checks if a stat is greater than or equal to its maximum value in settings.cfg
+ * If no stat_name is passed, it will check the totals.
+ *
+ * Parameters
+ * mobile:		Mobile to check the stats on
+ * stat_name:	Optional parameter - name of the stat to check.
+ *
+ * Return value
+ * Returns 1 if the stat is >= to the cap
+ *
+ */
+function AP_CheckStatCap(mobile, stat_name:="")
+	var cfg_elem := AP_GetSettingsCfgElem("Stats");
+	
+	if ( stat_name )
+		var cap := GetConfigReal(cfg_elem, stat_name);
+		return ( AP_GetTrueStat(mobile, stat_name) >= cap );
+	else
+		var total := 0.0;
+		foreach attribute_name in ( AP_ListAttributesByType("Stat") )
+			total := total + AP_GetTrueStat(mobile, attribute_name);
+			sleepms(2);
+		endforeach
+		
+		return ( total >= GetConfigReal(cfg_elem, "TotalCap") );
+	endif
+endfunction

Modified: trunk/096/pkg/systems/attributes/include/vitals.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-24 23:59:50 UTC (rev 228)
+++ trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-25 01:37:26 UTC (rev 229)
@@ -12,6 +12,26 @@
 use os;
 use cfgfile;
 
+/* AP_GetVitalsCfgFile()
+ * 
+ * Purpose
+ * Loads vitals.cfg
+ *
+ * Parameters
+ *
+ * Return value
+ * Config file
+ *
+ */
+function AP_GetVitalsCfgFile()
+	var cfg := ReadConfigFile(":attributes:vitals");
+	if ( cfg.errortext )
+		SysLog("Error::AP_GetVitalsCfgFile() - Unable to open vitals.cfg ->"+cfg.errortext);
+	endif
+
+	return cfg;
+endfunction
+
 /*
  * AP_GetVitalCfgElem(vital)
  *
@@ -26,12 +46,8 @@
  *
  */
 function AP_GetVitalCfgElem(vital)
-	var cfg := ReadConfigFile(":attributes:vitals");
-	if ( cfg.errortext )
-		SysLog("Error::AP_GetVitalCfgElem() - Unable to open vitals.cfg ->"+cfg.errortext);
-	endif
-	
-	var cfg_elem := cfg[vital];
+	var cfg_file := AP_GetVitalsCfgFile();
+	var cfg_elem := cfg_file[vital];
 	if ( cfg_elem.errortext )
 		SysLog("Error::AP_GetVitalsCfgElem() - unable to find cfg elem ["+vital+"] ->"+cfg_elem.errortext);
 	endif
@@ -40,6 +56,22 @@
 endfunction
 
 /*
+ * AP_GetVitalNames()
+ *
+ * Purpose
+ * Retrieves a list of all vitals in vitals.cfg
+ *
+ * Parameters
+ *
+ * Return value
+ * Returns an array of strings
+ *
+ */
+function AP_GetVitalNames()
+	return GetConfigStringKeys(AP_GetVitalsCfgFile());
+endfunction
+
+/*
  * AP_GetVital(mobile, vital_name)
  *
  * Purpose
@@ -79,7 +111,7 @@
  * AP_GetVitalRegenRate(mobile, vital_name)
  *
  * Purpose
- * Retrieves the regen rate of a vital on a mobile.
+ * Retrieves the (base + mod) regen rate of a vital on a mobile.
  *
  * Parameters
  * mobile:	Mobile reference to check.



From austin at berlios.de  Sun Sep 25 03:58:05 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 03:58:05 +0200
Subject: [Poldistro-svn] r230 - in trunk/096/pkg/systems/attributes: hooks include
Message-ID: <200509250158.j8P1w5iV020188@sheep.berlios.de>

Author: austin
Date: 2005-09-25 03:58:04 +0200 (Sun, 25 Sep 2005)
New Revision: 230

Modified:
   trunk/096/pkg/systems/attributes/hooks/vitalInit.src
   trunk/096/pkg/systems/attributes/include/attributes.inc
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
   trunk/096/pkg/systems/attributes/include/skills.inc
   trunk/096/pkg/systems/attributes/include/stats.inc
   trunk/096/pkg/systems/attributes/include/vitals.inc
Log:


Modified: trunk/096/pkg/systems/attributes/hooks/vitalInit.src
===================================================================
--- trunk/096/pkg/systems/attributes/hooks/vitalInit.src	2005-09-25 01:37:26 UTC (rev 229)
+++ trunk/096/pkg/systems/attributes/hooks/vitalInit.src	2005-09-25 01:58:04 UTC (rev 230)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * regenRates.src
-* Updated 9/20/2005 12:20PM
+* Updated 9/24/2005 6:52PM
 *
 * -- Revision v1.0 --
 * Austin:

Modified: trunk/096/pkg/systems/attributes/include/attributes.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-25 01:37:26 UTC (rev 229)
+++ trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-25 01:58:04 UTC (rev 230)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * ATTRIBUTES.INC - v1.0
-* Updated 9/20/2005 10:30AM
+* Updated 9/24/2005 6:52PM
 *
 * -- Revision v1.0 --
 * Austin:
@@ -18,28 +18,48 @@
 include ":attributes:include/stats";
 include ":attributes:include/vitals";
 
+/* AP_GetAttributesCfgFile()
+ * 
+ * Purpose
+ * Loads attributes.cfg
+ *
+ * Parameters
+ *
+ * Return value
+ * Config file
+ *
+ */
+function AP_GetAttributesCfgFile()
+	var cfg_file := ReadConfigFile(":attributes:attributes");
+	if ( cfg_file.errortext )
+		SysLog("Error::AP_GetAttributesCfgFile() - Unable to open attributes.cfg ->"+cfg_file.errortext);
+	endif
+
+	return cfg_file;
+endfunction
+
 /*
- * AP_GetAttributeCfgElem(attribute)
+ * AP_GetAttributeCfgElem(attribute_name, cfg_file)
  *
  * Purpose
- * Retrieves a config elem for an attribute in attributes.cfg
+ * Retrieves a config elem for an vital in attributes.cfg
  *
  * Parameters
- * attribute:	Name of the attribute to get the elem of.
+ * attribute_name:	Name of the attribute to get the elem of.
+ * cfg_file:		Optional parameter - reference to a config already read in.
  *
  * Return value
  * Returns a config file elem.
  *
  */
-function AP_GetAttributeCfgElem(attribute)
-	var cfg := ReadConfigFile(":attributes:attributes");
-	if ( cfg.errortext )
-		SysLog("Error::AP_GetAttributeCfgElem() - Unable to open attributes.cfg ->"+cfg.errortext);
+function AP_GetAttributeCfgElem(attribute_name, byref cfg_file:=0)
+	if ( !cfg_file )
+		cfg_file := AP_GetAttributesCfgFile();
 	endif
 	
-	var cfg_elem := cfg[attribute];
+	var cfg_elem := cfg_file[attribute_name];
 	if ( cfg_elem.errortext )
-		SysLog("Error::AP_GetAttributeCfgElem() - unable to find cfg elem ["+attribute+"] ->"+cfg_elem.errortext);
+		SysLog("Error::AP_GetAttributeCfgElem() - unable to find cfg elem ["+attribute_name+"] ->"+cfg_elem.errortext);
 	endif
 	
 	return cfg_elem;

Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-25 01:37:26 UTC (rev 229)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-25 01:58:04 UTC (rev 230)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * SKILLCHECK.INC - v1.0
-* Updated 9/24/2005 12:34AM
+* Updated 9/24/2005 6:52PM
 *
 * -- Revision v1.0 --
 * Austin:

Modified: trunk/096/pkg/systems/attributes/include/skills.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-25 01:37:26 UTC (rev 229)
+++ trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-25 01:58:04 UTC (rev 230)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * SKILLS.INC - v1.0
-* Updated 9/20/2005 2:20PM
+* Updated 9/24/2005 6:52PM
 *
 * -- Revision v1.0 --
 * Austin:

Modified: trunk/096/pkg/systems/attributes/include/stats.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-25 01:37:26 UTC (rev 229)
+++ trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-25 01:58:04 UTC (rev 230)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * STATS.INC - v1.0
-* Updated 9/20/2005 2:20PM
+* Updated 9/24/2005 6:52PM
 *
 * -- Revision v1.0 --
 * Austin:

Modified: trunk/096/pkg/systems/attributes/include/vitals.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-25 01:37:26 UTC (rev 229)
+++ trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-25 01:58:04 UTC (rev 230)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * VITALS.INC - v1.0
-* Updated 9/20/2005 2:04PM
+* Updated 9/24/2005 6:52PM
 *
 * -- Revision v1.0 --
 * Austin:
@@ -24,32 +24,36 @@
  *
  */
 function AP_GetVitalsCfgFile()
-	var cfg := ReadConfigFile(":attributes:vitals");
-	if ( cfg.errortext )
-		SysLog("Error::AP_GetVitalsCfgFile() - Unable to open vitals.cfg ->"+cfg.errortext);
+	var cfg_file := ReadConfigFile(":attributes:vitals");
+	if ( cfg_file.errortext )
+		SysLog("Error::AP_GetVitalsCfgFile() - Unable to open vitals.cfg ->"+cfg_file.errortext);
 	endif
 
-	return cfg;
+	return cfg_file;
 endfunction
 
 /*
- * AP_GetVitalCfgElem(vital)
+ * AP_GetVitalCfgElem(vital_name, cfg_file)
  *
  * Purpose
  * Retrieves a config elem for an vital in vitals.cfg
  *
  * Parameters
- * attribute:	Name of the vital to get the elem of.
+ * vital_name:	Name of the vital to get the elem of.
+ * cfg_file:	Optional parameter - reference to a config already read in.
  *
  * Return value
  * Returns a config file elem.
  *
  */
-function AP_GetVitalCfgElem(vital)
-	var cfg_file := AP_GetVitalsCfgFile();
-	var cfg_elem := cfg_file[vital];
+function AP_GetVitalCfgElem(vital_name, byref cfg_file:=0)
+	if ( !cfg_file )
+		cfg_file := AP_GetVitalsCfgFile();
+	endif
+	
+	var cfg_elem := cfg_file[vital_name];
 	if ( cfg_elem.errortext )
-		SysLog("Error::AP_GetVitalsCfgElem() - unable to find cfg elem ["+vital+"] ->"+cfg_elem.errortext);
+		SysLog("Error::AP_GetVitalsCfgElem() - unable to find cfg elem ["+vital_name+"] ->"+cfg_elem.errortext);
 	endif
 	
 	return cfg_elem;
@@ -78,7 +82,7 @@
  * Retrieves the number of vital points a mobile has.
  *
  * Parameters
- * mobile:	Mobile reference to retrieve the points from.
+ * mobile:		Mobile reference to retrieve the points from.
  * vital_name:	Name of the vital to retrieve the points for.
  *
  * Return value
@@ -86,7 +90,7 @@
  *
  */
 function AP_GetVital(mobile, vital_name)
-	return (GetVital(mobile, vital_name) / 100);
+	return CDbl(GetVital(mobile, vital_name)) / 100.0;
 endfunction
 
 /*
@@ -96,7 +100,7 @@
  * Retrieves the maximum number of vital points a mobile can have.
  *
  * Parameters
- * mobile:	Mobile reference to check.
+ * mobile:		Mobile reference to check.
  * vital_name:	Name of the vital to retrieve the max. points for.
  *
  * Return value
@@ -104,7 +108,7 @@
  *
  */
 function AP_GetVitalMaximumValue(mobile, vital_name)
-	return GetVitalMaximumValue(mobile, vital_name);
+	return CDbl(GetVitalMaximumValue(mobile, vital_name)) / 100.0;
 endfunction
 
 /*



From austin at berlios.de  Sun Sep 25 04:03:33 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 04:03:33 +0200
Subject: [Poldistro-svn] r231 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509250203.j8P23XGa020720@sheep.berlios.de>

Author: austin
Date: 2005-09-25 04:03:26 +0200 (Sun, 25 Sep 2005)
New Revision: 231

Modified:
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
Log:
Added function header for the use of the skill check function.

Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-25 01:58:04 UTC (rev 230)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-25 02:03:26 UTC (rev 231)
@@ -22,6 +22,24 @@
 
 var g_skill_debug	:= 0;
 
+
+/*
+ * SkillCheck(mobile, attrib_name, difficulty, award_points, advance_flags)
+ *
+ * Purpose
+ * Performs a skill check on an attribute and performs skill and stat advancements.
+ * <= 0 means the skill check failed > 0 means it was successful.
+ *
+ * Parameters
+ * mobile:			Mobile reference to do the skill check for.
+ * attribute_name:	Name of the attribute to perform the check on.
+ * award_points:	Determines the amount of (if any) skill gain.
+ * advance_flags:	Controls the turning on/off of stat and skill advancements for the check.
+ *
+ * Return value
+ * Returns > 0 if the skill check was successful
+ *
+ */
 function SkillCheck(mobile, attrib_name, difficulty, award_points:=0, advance_flags:=ADV_ALL)
 	if ( mobile.dead )
 		SendSysMessageEX(mobile, "You can't use skills while dead.");
@@ -39,5 +57,6 @@
 	// Global skill-debug ( for SkillDbgMsg() )
 	g_debug := (GetObjProperty(mobile,"SkillDebug") != error);
 	
+	return 1;
 endfunction
 



From austin at berlios.de  Sun Sep 25 04:09:29 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 04:09:29 +0200
Subject: [Poldistro-svn] r232 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509250209.j8P29Ttn021483@sheep.berlios.de>

Author: austin
Date: 2005-09-25 04:09:28 +0200 (Sun, 25 Sep 2005)
New Revision: 232

Modified:
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
Log:
Fixed a few things :-P

Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-25 02:03:26 UTC (rev 231)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-25 02:09:28 UTC (rev 232)
@@ -42,20 +42,20 @@
  */
 function SkillCheck(mobile, attrib_name, difficulty, award_points:=0, advance_flags:=ADV_ALL)
 	if ( mobile.dead )
-		SendSysMessageEX(mobile, "You can't use skills while dead.");
+		SendSysMessage(mobile, "You can't use skills while dead.");
 		return -100;
 	elseif ( GetObjProperty(mobile, "DisableSkills") )
-		SendSysMessageEX(mobile, "Your skills are disabled.");
+		SendSysMessage(mobile, "Your skills are disabled.");
 		return -100;
 	elseif ( GetObjProperty(mobile, "NoGains") )
-		advance := ADV_DISABLE;
+		advance_flags := ADV_DISABLE;
 	endif
 	
-	var advance_skill := advance & ADV_SKILL;
-	var advance_stats := advance & ADV_STATS;
+	var advance_skill := advance_flags & ADV_SKILL;
+	var advance_stats := advance_flags & ADV_STATS;
 	
 	// Global skill-debug ( for SkillDbgMsg() )
-	g_debug := (GetObjProperty(mobile,"SkillDebug") != error);
+	g_skill_debug := (GetObjProperty(mobile,"SkillDebug") != error);
 	
 	return 1;
 endfunction



From muaddiblsd at berlios.de  Sun Sep 25 07:35:33 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Sun, 25 Sep 2005 07:35:33 +0200
Subject: [Poldistro-svn] r233 - in trunk/096/pkg/skills: hiding stealth
Message-ID: <200509250535.j8P5ZXnj018318@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-25 07:35:23 +0200 (Sun, 25 Sep 2005)
New Revision: 233

Modified:
   trunk/096/pkg/skills/hiding/hiding.src
   trunk/096/pkg/skills/stealth/stealth.src
Log:


Modified: trunk/096/pkg/skills/hiding/hiding.src
===================================================================
--- trunk/096/pkg/skills/hiding/hiding.src	2005-09-25 02:09:28 UTC (rev 232)
+++ trunk/096/pkg/skills/hiding/hiding.src	2005-09-25 05:35:23 UTC (rev 233)
@@ -1,51 +1,67 @@
+////////////////////////////////////////////////////////////////////////////////////////////////////
+//
+//  name:    hiding.src - Skill Script
+//  version: 1.0
+//  author:  Distro
+//
+//  Purpose: Follows OSI methodology for the hiding skill with a bit of customness. If player
+//		is in war mode, it kicks them out of it before going on. The distances are not OSI
+//		specific however, but thrown in as seen fit.
+//
+////////////////////////////////////////////////////////////////////////////////////////////////////
 use uo;
+use util;
 
 include "include/client";
-include "include/attributes";
-include "include/skillPoints";
+include ":attributes:include/attributeConstants";
+include ":attributes:include/attributes";
+include ":attributes:include/skillCheck";
 
-program skill_hide(who)
-  EraseObjProperty(who, "IsMeditating");
-  EraseObjProperty(who, "HealTimer");
-  var thepoints := CInt(GetEffectiveSkill(who, SKILLID_HIDING) + 10);
-  if(thepoints < 20)
-    thepoints := 20;
-  endif
-  if(who.warmode)
-    PrintTextAbovePrivate(who, "You cannot hide while in war mode.", who);
-    return 0;
-  endif
-  var range := getwhoange(GetEffectiveSkill(who, SKILLID_HIDING));
-  var bystanders := ListHostiles(who, range, LH_FLAG_LOS);
-  if(len(bystanders) > 0)
-    PrintTextAbovePrivate(who, "You cannot hide as there are hostiles in view!", who);
-    return 0;
-  endif
-  if(CheckSkill(who, SKILLID_HIDING, -1, thepoints))
-    who.hidden := 1;
-    PrintTextAbovePrivate(who, "You have hidden yourself well.", who);
-  else
-    PrintTextAbovePrivate(who, "You can't seem to hide here.", who);
-    who.hidden := 0;
-  endif
+program skill_Hide(who)
+
+	EraseObjProperty(who, "IsMeditating");
+	EraseObjProperty(who, "HealTimer");
+	var thepoints := CInt(AP_GetSkill(who, ATTRIBUTE_HIDING) + 10);
+	if( thepoints < 20 )
+		thepoints := 20;
+	endif
+	if( who.warmode )
+		who.SetWarMode(0);
+	endif
+	var my_Range := my_HideRange(AP_GetSkill(who, ATTRIBUTE_HIDING));
+	var my_Attackers := ListHostiles(who, my_Range, LH_FLAG_LOS);
+	if( my_Attackers.size() > 0 )
+		PrintTextAbovePrivate(who, "You cannot hide as there are hostiles in view!", who);
+		return 0;
+	endif
+	if( SkillCheck(who, ATTRIBUTE_HIDING, -1, thepoints) > 0 )
+		who.hidden := 1;
+		PrintTextAbovePrivate(who, "You have hidden yourself well.", who);
+	else
+		PrintTextAbovePrivate(who, "You can't seem to hide here.", who);
+		who.hidden := 0;
+	endif
+
 endprogram
 
-function getwhoange( skill )
-  if( skill >= 100 )
-    return 4;
-  elseif( skill >= 90 )
-    return 5;
-  elseif( skill >= 80 )
-    return 6;
-  elseif( skill >= 70 )
-    return 7;
-  elseif( skill >= 60 )
-    return 8;
-  elseif( skill >= 50 )
-    return 9;
-  elseif( skill >= 30 )
-    return 10;
-  else
-    return 15;
-  endif
+function my_HideRange( skill )
+
+	if( skill >= 100 )
+		return 4;
+	elseif( skill >= 90 )
+		return 5;
+	elseif( skill >= 80 )
+		return 6;
+	elseif( skill >= 70 )
+		return 7;
+	elseif( skill >= 60 )
+		return 8;
+	elseif( skill >= 50 )
+		return 9;
+	elseif( skill >= 30 )
+		return 10;
+	else
+		return 15;
+	endif
+
 endfunction
\ No newline at end of file

Modified: trunk/096/pkg/skills/stealth/stealth.src
===================================================================
--- trunk/096/pkg/skills/stealth/stealth.src	2005-09-25 02:09:28 UTC (rev 232)
+++ trunk/096/pkg/skills/stealth/stealth.src	2005-09-25 05:35:23 UTC (rev 233)
@@ -1,3 +1,15 @@
+////////////////////////////////////////////////////////////////////////////////////////////////////
+//
+//  name:    stealth.src - Skill Script
+//  version: 1.0
+//  author:  Distro
+//
+//  Purpose: Follows OSI methodology for the Stealthing skill with a bit of customness. If player
+//		has at least 80 skill in hiding, they can stealth when hidden. If they have 80 hiding
+//		and at least 80 stealth, they can try to hide and stealth in one step. Hiding script
+//		is fired if they succeed in attempt to stealth, with over 80 hiding and stealth.
+//
+////////////////////////////////////////////////////////////////////////////////////////////////////
 use uo;
 use util;
 
@@ -2,30 +14,51 @@
 include "include/client";
-include "include/attributes";
+include ":attributes:include/attributeConstants";
+include ":attributes:include/attributes";
+include ":attributes:include/skillCheck";
 
-program skill_stealth( who )
-  EraseObjProperty(who, "IsMeditating");
-  EraseObjProperty(who, "HealTimer");
-  if(GetEffectiveSkill(who, SKILLID_HIDING) < 80)
-    PrintTextAbovePrivate( who, "You are not good enough at Hiding to do that.", who );
-    return;
-  endif
-  if(!who.hidden)
-    PrintTextAbovePrivate( who, "You must be hidden to use stealth.", who );
-    return;
-  endif
-  var mount := GetEquipmentByLayer(who, 25 );
-  if(mount)
-    who.hidden := 0;
-    PrintTextAbovePrivate( who, "You can't stealth while riding a horse!", who );
-    return;
-  endif
-  var skill := GetEffectiveSkill(who, SKILLID_STEALTH);
-  if(CheckSkill(who, SKILLID_STEALTH, -1, skill))
-    skill := (skill / 10);
-    who.stealthsteps := skill + RandomInt(skill);
-    PrintTextAbovePrivate( who, "You are now moving stealthily.", who );
-  else
-    who.hidden := 0;
-    PrintTextAbovePrivate( who, "You have revealed yourself!", who );
-  endif
+program skill_Stealth( who )
+
+	EraseObjProperty(who, "IsMeditating");
+	EraseObjProperty(who, "HealTimer");
+
+	if( AP_GetSkill(who, ATTRIBUTE_HIDING) < 80 )
+		PrintTextAbovePrivate( who, "You are not good enough at Hiding to do that.", who );
+		return 0;
+	endif
+	if( (!who.hidden) && (AP_GetSkill(who, ATTRIBUTE_STEALTH) < 80) )
+		PrintTextAbovePrivate( who, "You must be hidden to use stealth", who );
+		return 0;
+	endif
+	var mount := GetEquipmentByLayer(who, 25 );
+	if(mount)
+		who.hidden := 0;
+		PrintTextAbovePrivate( who, "You can't stealth while riding a horse!", who );
+		return 0;
+	endif
+
+	var my_Skill := AP_GetSkill(who, ATTRIBUTE_STEALTH) / 10;
+	if(SkillCheck(who, SKILLID_STEALTH, -1, (my_Skill*10)) > 0)
+		if( !who.hidden )
+			// Used RSTC because it runs the script in critical mode, thus
+			// ensuring the hiding attempt completes before the stealth
+			// script continues.
+			Run_Script_To_Completion(":hiding:hiding", who);
+			if ( !who.hidden )
+				SendSysMessage(who, "You must be hidden to stealth.");
+				return 0;
+			endif
+		endif
+		who.stealthsteps := my_Skill + RandomInt(my_Skill);
+		PrintTextAbovePrivate( who, "You are now moving stealthily.", who );
+		return 1;
+	else
+		if( who.hidden )
+			who.hidden := 0;
+			PrintTextAbovePrivate( who, "You have revealed yourself!", who );
+		else
+			PrintTextAbovePrivate( who, "You fail to move stealthily!", who );
+		endif
+		return 0;
+	endif
+
 endprogram
\ No newline at end of file



From panosl at berlios.de  Sun Sep 25 10:34:04 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Sun, 25 Sep 2005 10:34:04 +0200
Subject: [Poldistro-svn] r234 - in trunk/096/scripts: . include
Message-ID: <200509250834.j8P8Y4DM031885@sheep.berlios.de>

Author: panosl
Date: 2005-09-25 10:34:03 +0200 (Sun, 25 Sep 2005)
New Revision: 234

Modified:
   trunk/096/scripts/ecompile.cfg
   trunk/096/scripts/include/arrays.inc
   trunk/096/scripts/include/sound.inc
   trunk/096/scripts/include/time.inc
   trunk/096/scripts/start.src
Log:
Testing keywords system for SVN

Modified: trunk/096/scripts/ecompile.cfg
===================================================================
--- trunk/096/scripts/ecompile.cfg	2005-09-25 05:35:23 UTC (rev 233)
+++ trunk/096/scripts/ecompile.cfg	2005-09-25 08:34:03 UTC (rev 234)
@@ -1,6 +1,7 @@
-##
-## ecompile.cfg: must be in the same directory as ecompile.exe
-##
+# $Id$
+#
+# ecompile.cfg: must be in the same directory as ecompile.exe
+#
 
 #
 # ModuleDirectory: Location of *.em files

Modified: trunk/096/scripts/include/arrays.inc
===================================================================
--- trunk/096/scripts/include/arrays.inc	2005-09-25 05:35:23 UTC (rev 233)
+++ trunk/096/scripts/include/arrays.inc	2005-09-25 08:34:03 UTC (rev 234)
@@ -1,28 +1,27 @@
-//////////////////////////////////////////////////////////////////////////
-//
-// Arrays.inc
-//
-// Contains some useful functions for arrays.
-//
-// Originally uploaded by Shilohen.
-// One function added by Madman Across the Water.
-//
-//////////////////////////////////////////////////////////////////////////
-
+/** $Id$
+ *
+ * Purpose
+ * Provide various functions for array handling.
+ *
+ */
 use basic;
 use os;
 use uo;
 
 
-////////////////////////////////////////////////////////////////
-// Function	GetIndex(byref the_array, byref to_find)
-// Parameters	the_array containing the element
-//		what to find
-// Return	the element's index if found, error otherwise.
-// Errortext	<Element not found>
-////////////////////////////////////////////////////////////////
-function GetIndex( byref the_array, byref to_find )
-
+/**
+ * GetIndex(byref the_array, byref to_find)
+ *
+ * Parameters	the_array containing the element
+ *		what to find
+ * 
+ * Errortext	<Element not found>.
+ *
+ * Return
+ * the element's index if found, error otherwise
+ *
+ */
+function GetIndex(byref the_array, byref to_find)
 	var max := the_array.Size();
 	if( !max )
 		var ret := error;
@@ -67,16 +66,21 @@
 endfunction
 
 
-////////////////////////////////////////////////////////////////
-// Function	InsertElementInSortedArray(byref the_array, byref to_find)
-// Parameters	the_array containing the element
-//		what to insert
-// Return	non-zero if the element could be insert, error otherwise.
-// Errortext	<Element <element> already exist in the array>
-//		<Couldn't insert element <element>>
-// Goal		Insert an element at the good index, must be the only one
-//		instance of that element in the array, no dupe allowed.
-////////////////////////////////////////////////////////////////
+/**
+ * InsertElementInSortedArray(byref the_array, byref to_find)
+ *
+ * Parameters	the_array containing the element
+ *		what to insert
+ * Errortext	<Element <element> already exist in the array>
+ *		<Couldn't insert element <element>>
+ * Purpose
+ * Insert an element at the good index, must be the only one
+ * instance of that element in the array, no dupe allowed.
+ *
+ * Return
+ * non-zero if the element could be insert, error otherwise.
+ *
+ */
 function InsertInSortedArray( byref the_array, byref element )
 
 	var max := the_array.Size();
@@ -119,13 +123,18 @@
 endfunction
 
 
-////////////////////////////////////////////////////////////////
-// Function	RemoveElement(byref the_array, byref element)
-// Parameters	the_array containing the element
-//		the element to remove
-// Return	1 is the elment was successfully removed
-//		An error otherwise
-////////////////////////////////////////////////////////////////
+/**
+ * RemoveElement(byref the_array, byref element)
+ *
+ * Parameters
+ * the_array:	containing the element
+ * element:	the element to remove
+ *
+ * Return
+ * 1 is the elment was successfully removed
+ * An error otherwise
+ *
+ */
 function RemoveElement( byref the_array, byref element )
 
 	var index := GetIndex( the_array, element );
@@ -138,12 +147,19 @@
 endfunction
 
 
-////////////////////////////////////////////////////////////////
-// Function	SortArray(byref the_array)
-// Parameters	the_array to sort
-// Return	1 if the sorting was success, 0 otherwise.
-// Goal		Sort the array, even array of uobject.
-////////////////////////////////////////////////////////////////
+/**
+ * SortArray(byref the_array)
+ *
+ * Purpose
+ * Sort the array, even array of uobject.
+ *
+ * Parameters
+ * the_array:	to sort
+ *
+ * Return
+ * 1 if the sorting was success, 0 otherwise.
+ *
+ */
 function SortArray( byref the_array )
 
 	var length := the_array.Size();
@@ -172,13 +188,17 @@
 	
 endfunction
 
-//Fill_array
-// you don't want to send this non-integers. Error checking isn't at the moment.
-// This function is handed start and end numbers, and increments. If you send it
-// (1,5,1), for instance, it will return an array {1,2,3,4,5}. (5,1,-2) will return
-// {5,3,1}. (1,5,3) will return {1,4}.
-// Added by Madman Across the Water
 
+/**
+ * fill_array(starts, ends, incr := 1)
+ *
+ * you don't want to send this non-integers. Error checking isn't at the moment.
+ * This function is handed start and end numbers, and increments. If you send it
+ * (1,5,1), for instance, it will return an array {1,2,3,4,5}. (5,1,-2) will return
+ * {5,3,1}. (1,5,3) will return {1,4}.
+ * Added by Madman Across the Water
+ *
+ */
 function fill_array(starts, ends, incr := 1)
 
 	var newarray := array;
@@ -208,4 +228,3 @@
 	
 	return 0;
 endfunction
-

Modified: trunk/096/scripts/include/sound.inc
===================================================================
--- trunk/096/scripts/include/sound.inc	2005-09-25 05:35:23 UTC (rev 233)
+++ trunk/096/scripts/include/sound.inc	2005-09-25 08:34:03 UTC (rev 234)
@@ -1,3 +1,7 @@
+/* $Id$
+ *
+ */
+
 enum SFX_BASE
 	SFX_1     :=  0x0001, // forest
 	SFX_2     :=  0x0002, // forest

Modified: trunk/096/scripts/include/time.inc
===================================================================
--- trunk/096/scripts/include/time.inc	2005-09-25 05:35:23 UTC (rev 233)
+++ trunk/096/scripts/include/time.inc	2005-09-25 08:34:03 UTC (rev 234)
@@ -36,8 +36,6 @@
 /*
  * GetMonthName(month)
  *
- * Author: Folko
- *
  * Purpose
  * Returns the name of the month
  *
@@ -61,8 +59,6 @@
 /*
  * GetMonthLength(month, year)
  *
- * Author: Folko
- *
  * Purpose
  * Returns the length of the month in days
  *
@@ -90,8 +86,6 @@
 /*
  * IsLeap(year)
  *
- * Author: Folko
- *
  * Purpose
  * Returns whether a year is a leap year or not.
  *
@@ -111,8 +105,6 @@
 /*
  * GetTime()
  *
- * Author: Folko
- *
  * Purpose
  * Returns current UNIX time stamp.
  *
@@ -131,8 +123,6 @@
 /*
  * GetTimeStruct(time)
  *
- * Author: Folko
- *
  * Purpose
  * Returns current time as struct.
  *
@@ -219,8 +209,6 @@
 /*
  * FormatTime(ts, format)
  *
- * Author:  Folko
- *
  * Purpose
  * Returns a formatted time string.
  *
@@ -259,8 +247,6 @@
 /*
  * AddTimeStamp(what)
  *
- * Author: Folko
- *
  * Purpose
  * Adds a timestamp to a string.
  *

Modified: trunk/096/scripts/start.src
===================================================================
--- trunk/096/scripts/start.src	2005-09-25 05:35:23 UTC (rev 233)
+++ trunk/096/scripts/start.src	2005-09-25 08:34:03 UTC (rev 234)
@@ -17,6 +17,7 @@
 include "include/utility";
 include "include/teleporters";
 
+
 program StartServer()
 	Log(LOG_MAIN, "Server started.");
 	if (!start_script(":scheduler:scheduler"))



From panosl at berlios.de  Sun Sep 25 10:50:13 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Sun, 25 Sep 2005 10:50:13 +0200
Subject: [Poldistro-svn] r235 - in trunk/096/pkg/commands: config include
Message-ID: <200509250850.j8P8oDqW000634@sheep.berlios.de>

Author: panosl
Date: 2005-09-25 10:50:11 +0200 (Sun, 25 Sep 2005)
New Revision: 235

Added:
   trunk/096/pkg/commands/include/goAdd.inc
   trunk/096/pkg/commands/include/goEdit.inc
   trunk/096/pkg/commands/include/goGumps.inc
   trunk/096/pkg/commands/include/goTemplate.inc
   trunk/096/pkg/commands/include/goText.inc
Removed:
   trunk/096/pkg/commands/include/go-add.inc
   trunk/096/pkg/commands/include/go-edit.inc
   trunk/096/pkg/commands/include/go-gumps.inc
   trunk/096/pkg/commands/include/go-template.inc
   trunk/096/pkg/commands/include/go-text.inc
Modified:
   trunk/096/pkg/commands/config/icp.cfg
Log:
Converting to the distro standards, probably will not compile.

Modified: trunk/096/pkg/commands/config/icp.cfg
===================================================================
--- trunk/096/pkg/commands/config/icp.cfg	2005-09-25 08:34:03 UTC (rev 234)
+++ trunk/096/pkg/commands/config/icp.cfg	2005-09-25 08:50:11 UTC (rev 235)
@@ -1,15 +1,20 @@
+# $Id$
+#
+#
+
+
 ICP Register
 {
-        Name            Text Commands
-        Version         1.0
-        Description     Main Package for Text Commands.
+	Name            Text Commands
+	Version         1.0
+	Description     Main Package for Text Commands.
 
-        Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+	Creator         Distro Team
+	C_Email         pol-distro-support at sourceforge.net
 
-        Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+	Maintainer      Distro Team
+	M_Email         pol-distro-support at sourceforge.net
 
-        //TextCmd       cmdlevel path
-        TextCmd         2 :commands:seer/go
+	//TextCmd       cmdlevel path
+	TextCmd         2 :commands:seer/go
 }

Deleted: trunk/096/pkg/commands/include/go-add.inc
===================================================================
--- trunk/096/pkg/commands/include/go-add.inc	2005-09-25 08:34:03 UTC (rev 234)
+++ trunk/096/pkg/commands/include/go-add.inc	2005-09-25 08:50:11 UTC (rev 235)
@@ -1,198 +0,0 @@
-function Go_AddNewLocation(who, public:=1)
-
-	SendSysMessage(who, "Click where you want the new Go Location to go to.");
-	var targ := TargetCoordinates(who);
-
-	if (!targ)
-		SendSysMessage(who, "Cancelled");
-		return 0;
-	endif
-
-	var name := RequestInput(who, who.backpack, "What do you want to call this go location?");
-
-	if ( !name )
-		SendSysMessage(who, "Cancelled");
-		return 0;
-	endif
-
-	if( public )
-		go_prop_base := go_elem.GetProp("base_Distro");
-		if ( go_prop_base.Exists(lower(name)) )
-			GumpPrompt(who, "You already have a public go location named ["+name+"]");
-			return 0;
-		endif
-		Go_SetLocation("base_Distro", who, name, targ.realm, targ.x, targ.y, targ.z);
-		GumpPrompt(who, "New public go location added: ["+name+"]");
-	else
-		go_prop := go_elem.GetProp(who.acctname);
-		if ( go_prop.Exists(lower(name)) )
-			GumpPrompt(who, "You already have a private go location named ["+name+"]");
-			return 0;
-		endif
-		Go_SetLocation(who.acctname, who, name, targ.realm, targ.x, targ.y, targ.z);
-		GumpPrompt(who, "New private go location added: ["+name+"]");
-	endif
-
-	return 0;
-
-endfunction
-
-function Go_CopyLocation(who, public:=1)
-
-	var gump;
-	if( public )
-		gump := Go_RetrieveGump("CopyIndex", "base_Distro");
-		num_keys := go_keys_base.size();
-	else
-		gump := Go_RetrieveGump("CopyIndex", who.acctname);
-		num_keys := go_keys.size();
-	endif
-
-	if  ( !gump )
-		if( public )
-			gump := Go_LocationCopyGump(1);
-			Go_SaveGump("CopyIndex", gump, "base_Distro");
-		else
-			gump := Go_LocationCopyGump(0);
-			Go_SaveGump("CopyIndex", gump, who.acctname);
-		endif
-	endif
-
-	var input := GFSendGump(who, gump);
-	input := input[0];
-
-	if(input)
-		var send_Location := 0;
-		if( public )
-			send_Location := go_prop_base[lower(go_keys_base[input])];
-		else
-			send_Location := go_prop[lower(go_keys[input])];
-		endif
-		if ( send_Location )
-			if( public )
-				go_prop_base := go_elem.GetProp("base_Distro");
-				if ( go_prop.Exists(lower(send_Location.Name)) )
-					GumpPrompt(who, "You already have a private go location named ["+send_Location.Name+"]");
-					return 0;
-				endif
-				Go_SetLocation(who.acctname, who, send_Location.Name, send_Location.Realm, send_Location.X, send_Location.Y, send_Location.Z);
-				GumpPrompt(who, "Copied [" + send_Location.Name + "] to your private menu.");
-			else
-				go_prop := go_elem.GetProp(who.acctname);
-				if ( go_prop_base.Exists(lower(send_Location.Name)) )
-					GumpPrompt(who, "You already have a public go location named ["+send_Location.Name+"]");
-					return 0;
-				endif
-				Go_SetLocation("base_Distro", who, send_Location.Name, send_Location.Realm, send_Location.X, send_Location.Y, send_Location.Z);
-				GumpPrompt(who, "Copied [" + send_Location.Name + "] to the public menu.");
-			endif
-			return 0;
-		else
-			GumpPrompt(who, "Location [" + send_Location.Name + "] does not exist.");
-			Go_RefreshMyGumps(who);
-			return 0;
-		endif
-	else
-		SendSysMessage(who, "Copying Cancelled");
-		Go_RefreshMyGumps(who);
-		return 0;
-	endif
-
-	return 0;
-
-endfunction
-
-function Go_SetLocation(gump_Type, who, name, realm, x, y, z)
-
-	if( !realm )
-		realm := who.realm;
-	endif
-
-	z := GetMapInfo(x, y, realm).z;
-
-	var temp := dictionary;
-	temp.+Name := lower(name);
-	temp.+Realm := lower(realm);
-	temp.+X := x;
-	temp.+Y := y;
-	temp.+Z := z;
-	case(gump_Type)
-		"base_Distro": go_prop_base[lower(name)] := temp;
-			       go_elem.SetProp(gump_Type, go_prop_base);
-		default:       go_prop[lower(name)] := temp;
-                               go_elem.SetProp(gump_Type, go_prop);
-	endcase
-	Go_RefreshMyGumps(who);
-
-	return 0;
-
-endfunction
-
-function Go_LocationCopyGump(public:=1)
-
-	var gump := GFCreateGump();
-	GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
-	GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
-	if( public )
-		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
-	else
-		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
-	endif
-	GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
-	GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
-	GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
-	GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Copy");
-	GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
-
-	GFPage(gump, 1);
-
-	var y_loc := 85;
-	var page_num := 1;
-	var counter := 1;
-	var line_num := 0;
-
-	if( public )
-		go_keys_base.sort();
-		foreach place in ( go_keys_base )
-			GFTextLine(gump,  25, y_loc, 2100, go_prop_base[place].Name);
-			GFTextLine(gump, 175, y_loc, 2100, go_prop_base[place].Realm);
-			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
-
-			counter := counter + 1;
-			line_num := line_num+1;
-			y_loc := y_loc + 20;
-			if ( line_num >= 18 && line_num < num_keys )
-				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
-				page_num := page_num + 1;
-				GFPage(gump, page_num);
-				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
-				y_loc := 85;
-				line_num := 0;
-			endif
-			sleepms(2);
-		endforeach
-	else
-		go_keys.sort();
-		foreach place in ( go_keys )
-			GFTextLine(gump,  25, y_loc, 2100, go_prop[place].Name);
-			GFTextLine(gump, 175, y_loc, 2100, go_prop[place].Realm);
-			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
-
-			counter := counter + 1;
-			line_num := line_num+1;
-			y_loc := y_loc + 20;
-			if ( line_num >= 18 && line_num < num_keys )
-				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
-				page_num := page_num + 1;
-				GFPage(gump, page_num);
-				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
-				y_loc := 85;
-				line_num := 0;
-			endif
-			sleepms(2);
-		endforeach
-	endif
-
-	return gump;
-
-endfunction
\ No newline at end of file

Deleted: trunk/096/pkg/commands/include/go-edit.inc
===================================================================
--- trunk/096/pkg/commands/include/go-edit.inc	2005-09-25 08:34:03 UTC (rev 234)
+++ trunk/096/pkg/commands/include/go-edit.inc	2005-09-25 08:50:11 UTC (rev 235)
@@ -1,197 +0,0 @@
-function Go_EditSendLocation(who, public:=1)
-
-	var gump;
-	if( public )
-		gump := Go_SelectEditGump(1);
-		num_keys := go_keys_base.size();
-	else
-		gump := Go_SelectEditGump(0);
-		num_keys := go_keys.size();
-	endif
-
-	var input := GFSendGump(who, gump);
-        input := input[0];
-
-        if(input)
-		var send_Location;
-		if( public )
-			send_Location := go_prop_base[lower(go_keys_base[input])];
-		else
-			send_Location := go_prop[lower(go_keys[input])];
-		endif
-                if ( send_Location )
-			var edit_gump;
-			if( public )
-				edit_gump := Go_EditLocationGump(send_Location);
-			else
-				edit_gump := Go_EditLocationGump(send_Location, 0);
-			endif
-                        var edit_input := GFSendGump(who, edit_gump);
-
-                        if ( edit_input[edit_update] )
-                                edit_name := GFExtractData(edit_input, edit_name);
-                                xg_pos := CInt(GFExtractData(edit_input, xg_pos));
-                                yg_pos := CInt(GFExtractData(edit_input, yg_pos));
-                                zg_pos := CInt(GFExtractData(edit_input, zg_pos));
-
-                                if ( !edit_name )
-                                        GumpPrompt(who, "Cancelled - No name entered");
-                                        return 0;
-                                elseif ( lower(edit_name) != send_Location.Name )
-					if( public )
-						if ( go_prop_base.Exists( Lower(edit_name) ) )
-							GumpPrompt(who, "Cancelled - location already exists with the name ["+edit_name+"]");
-							return 0;
-						endif
-					else
-						if ( go_prop.Exists( Lower(edit_name) ) )
-							GumpPrompt(who, "Cancelled - location already exists with the name ["+edit_name+"]");
-							return 0;
-						endif
-					endif
-                                endif
-
-                                var original_Realm := send_Location.Realm;
-				if( public )
-					go_prop_base.erase(lower(send_Location.Name));
-					go_elem.SetProp("base_Distro", go_prop_base);
-					Go_SetLocation("base_Distro", who, edit_name, original_Realm, xg_pos, yg_pos, zg_pos);
-				else
-					go_prop.erase(lower(send_Location.Name));
-					go_elem.SetProp(who.acctname, go_prop);
-					Go_SetLocation(who.acctname, who, edit_name, original_Realm, xg_pos, yg_pos, zg_pos);
-				endif
-                                SendSysMessage(who, "Updated ["+edit_name+"]");
-                                Go_RefreshMyGumps(who);
-                        elseif ( edit_input[edit_delete] )
-                                SendSysMessage(who, "Deleted [" + send_Location.Name + "]");
-				if( public )
-					go_prop_base.erase(lower(send_Location.Name));
-					go_elem.SetProp("base_Distro", go_prop_base);
-				else
-					go_prop.erase(lower(send_Location.Name));
-					go_elem.SetProp(who.acctname, go_prop);
-				endif
-                                Go_RefreshMyGumps(who);
-                        else
-                                SendSysMessage(who, "Cancelled");
-                        endif
-                else
-                        GumpPrompt(who, "Location [" + send_Location.Name + "] does not exist.");
-                        return 0;
-                endif
-        else
-                SendSysMessage(who, "Editing Cancelled");
-                return 0;
-        endif
-
-        return 0;
-
-endfunction
-
-function Go_SelectEditGump(public)
-
-	var gump := GFCreateGump();
-	GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
-	GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
-	if( public )
-		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
-	else
-		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
-	endif
-        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
-        GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
-        GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
-        GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Edit");
-        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
-
-
-        GFPage(gump, 1);
-
-        var y_loc := 85;
-        var page_num := 1;
-        var counter := 1;
-        var line_num := 0;
-
-	if( public )
-		go_keys_base.sort();
-		foreach place in ( go_keys_base )
-			GFTextLine(gump,  25, y_loc, 2100, go_prop_base[place].Name);
-			GFTextLine(gump, 175, y_loc, 2100, go_prop_base[place].Realm);
-			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
-
-			counter := counter + 1;
-			line_num := line_num+1;
-			y_loc := y_loc + 20;
-			if ( line_num >= 18 && line_num < num_keys )
-				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
-				page_num := page_num + 1;
-				GFPage(gump, page_num);
-				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
-				y_loc := 85;
-				line_num := 0;
-			endif
-			sleepms(2);
-		endforeach
-	else
-		go_keys.sort();
-		foreach place in ( go_keys )
-			GFTextLine(gump,  25, y_loc, 2100, go_prop[place].Name);
-			GFTextLine(gump, 175, y_loc, 2100, go_prop[place].Realm);
-			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
-
-			counter := counter + 1;
-			line_num := line_num+1;
-			y_loc := y_loc + 20;
-			if ( line_num >= 18 && line_num < num_keys )
-				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
-				page_num := page_num + 1;
-				GFPage(gump, page_num);
-				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
-				y_loc := 85;
-				line_num := 0;
-			endif
-			sleepms(2);
-		endforeach
-	endif
-
-        return gump;
-
-endfunction
-
-function Go_EditLocationGump(send_Location, public:=1)
-
-        var gump := GFCreateGump();
-        GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
-        GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
-	if(public)
-		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
-	else
-		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
-	endif
-        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
-        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
-        edit_update := GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, UPDATE_BUTTON);
-        GFHTMLArea(gump,  57, 480, 40, 20, "<basefont color=#7FFFD4>Update");
-        edit_delete := GFAddButton(gump, 100, 477, 4005, 4007, GF_CLOSE_BTN, DELETE_BUTTON);
-        GFHTMLArea(gump,  132, 480, 40, 20, "<basefont color=#7FFFD4>Delete");
-
-        GFTextLine(gump, 20, 120, 2100, "Name");
-        GFResizePic(gump, 120, 117, 2620, 180, 30);
-        edit_name := GFTextEntry(gump, 130, 122, 160, 25, 2100, send_Location.Name);
-
-        GFTextLine(gump, 20, 143, 2100, "X Coordinate");
-        GFResizePic(gump, 120, 140, 2620, 100, 30);
-        xg_pos := GFTextEntry(gump, 130, 145, 80, 25, 2100, send_Location.X);
-
-        GFTextLine(gump, 20, 166, 2100, "Y Coordinate");
-        GFResizePic(gump, 120, 163, 2620, 100, 30);
-        yg_pos := GFTextEntry(gump, 130, 168, 80, 25, 2100, send_Location.Y);
-
-        GFTextLine(gump, 20, 189, 2100, "Z Coordinate");
-        GFResizePic(gump, 120, 186, 2620, 100, 30);
-        zg_pos := GFTextEntry(gump, 130, 191, 80, 25, 2100, send_Location.Z);
-
-        return gump;
-
-endfunction
\ No newline at end of file

Deleted: trunk/096/pkg/commands/include/go-gumps.inc
===================================================================
--- trunk/096/pkg/commands/include/go-gumps.inc	2005-09-25 08:34:03 UTC (rev 234)
+++ trunk/096/pkg/commands/include/go-gumps.inc	2005-09-25 08:50:11 UTC (rev 235)
@@ -1,207 +0,0 @@
-// Gump backgrounds - Used in various functions - easier to use globally.
-var BKGND_SILVERTRIM := GFCfgConst("Defaults", "BackGround");
-var BKGND_DARK_STONE := GFCfgConst("Defaults", "ForeGround");
-
-
-function Go_LocationIndex(who, gump_Type:="base_Distro")
-
-        var gump := Go_RetrieveGump("LocationIndex", gump_Type);
-        if(gump_Type == "base_Distro")
-                num_keys := go_keys_base.size();
-        else
-                num_keys := go_keys.size();
-        endif
-        if  ( !gump )
-                if(gump_Type == "base_Distro")
-                        gump := Go_LocationIndexGump(1);
-                else
-                        gump := Go_LocationIndexGump(0);
-                endif
-                Go_SaveGump("LocationIndex", gump, gump_Type);
-        endif
-
-        var input := GFSendGump(who, gump);
-        input := input[0];
-
-        case(input)
-          0: SendSysMessage(who, "Closed");
-             return 0;
-          ADD_NEW_PUBLIC:     Go_AddNewLocation(who, 1);
-                              return 0;
-          ADD_NEW_PRIVATE:    Go_AddNewLocation(who, 0);
-                              return 0;
-          COPY_PUBLIC_ITEM:   Go_CopyLocation(who, 1);
-                              return 0;
-          COPY_PRIVATE_ITEM:  Go_CopyLocation(who, 0);
-                              return 0;
-          EDIT_PUBLIC_ITEM:   print("Edit Public"); Go_EditSendLocation(who, 1);
-                              return 0;
-          EDIT_PRIVATE_ITEM:  Go_EditSendLocation(who, 0);
-                              return 0;
-          SHOW_PUBLIC_INDEX:  SetObjProperty(who, "#Go_Gump", 1);
-                              Go_LocationIndex(who);
-                              return 0;
-          SHOW_PRIVATE_INDEX: SetObjProperty(who, "#Go_Gump", 2);
-                              Go_LocationIndex(who, who.acctname);
-                              return 0;
-          default:
-        endcase
-
-        if(input)
-                var send_Location;
-                var moved := who;
-                if ( input <= num_keys )
-                        case(gump_Type)
-                          "base_Distro": send_Location := go_prop_base[lower(go_keys_base[input])];
-                          default:       send_Location := go_prop[lower(go_keys[input])];
-                        endcase
-                        SendSysMessage(who, "Who do you want to send to " + send_Location.Name);
-                        moved := target(who);
-                        if (!moved)
-                                return 0;
-                        endif
-                else
-                        input := input - num_keys;
-                        case(gump_Type)
-                          "base_Distro": send_Location  := go_prop_base[lower(go_keys_base[input])];
-                          default:       send_Location := go_prop[lower(go_keys[input])];
-                        endcase
-                endif
-
-                if ( send_Location )
-                        var move;
-                        SendSysMessage(who, "Going to [" + send_Location.Name + "]");
-                        if( moved.realm == send_Location.Realm )
-                                if ( moved.IsA(POLCLASS_ITEM) )
-                                        move := MoveItemToLocation(moved, CInt(send_Location.X), CInt(send_Location.Y), CInt(send_Location.Z), MOVEITEM_FORCELOCATION);
-                                else
-                                        move := MoveCharacterToLocation(moved, CInt(send_Location.X), CInt(send_Location.Y), CInt(send_Location.Z), MOVECHAR_FORCELOCATION);
-                                endif
-                        else
-                                move := MoveObjectToRealm( who, send_Location.Realm, send_Location.X, send_Location.Y, send_Location.Z, MOVECHAR_FORCELOCATION );
-                        endif
-
-                        if ( TypeOf(move) != "Integer" )
-                                GumpPrompt(who, "Error moving: X[" + send_Location.X +"] Y[" + send_Location.Y + "] Z[" + send_Location.Z + "]");
-                        endif
-                else
-                        GumpPrompt(who, "Location [" + send_Location.Name + "] does not exist.");
-                endif
-        endif
-
-        return 0;
-
-endfunction
-
-function Go_LocationIndexGump(public:=1)
-
-	var gump := GFCreateGump();
-	GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
-	GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
-	if( public )
-		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
-	else
-		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
-	endif
-	GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
-	GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
-	GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
-	GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Send");
-	GFHTMLArea(gump, 345, 60, 150, 20, "<basefont color=#7FFFD4>Goto");
-	GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
-	if( public )
-		GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, ADD_NEW_PUBLIC);
-		GFHTMLArea(gump,  57, 480, 30, 20, "<basefont color=#7FFFD4>Add");
-		GFAddButton(gump, 100, 477, 4005, 4007, GF_CLOSE_BTN, COPY_PUBLIC_ITEM);
-		GFHTMLArea(gump,  132, 480, 30, 20, "<basefont color=#7FFFD4>Copy");
-		GFAddButton(gump, 175, 477, 4008, 4010, GF_CLOSE_BTN, EDIT_PUBLIC_ITEM);
-		GFHTMLArea(gump,  207, 480, 30, 20, "<basefont color=#7FFFD4>Edit");
-		GFAddButton(gump, 250, 477, 4008, 4010, GF_CLOSE_BTN, SHOW_PRIVATE_INDEX);
-		GFHTMLArea(gump,  282, 480, 100, 20, "<basefont color=#7FFFD4>Public Menu");
-	else
-		GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, ADD_NEW_PRIVATE);
-		GFHTMLArea(gump,  57, 480, 30, 20, "<basefont color=#7FFFD4>Add");
-		GFAddButton(gump, 100, 477, 4005, 4007, GF_CLOSE_BTN, COPY_PRIVATE_ITEM);
-		GFHTMLArea(gump,  132, 480, 30, 20, "<basefont color=#7FFFD4>Copy");
-		GFAddButton(gump, 175, 477, 4008, 4010, GF_CLOSE_BTN, EDIT_PRIVATE_ITEM);
-		GFHTMLArea(gump,  207, 480, 30, 20, "<basefont color=#7FFFD4>Edit");
-		GFAddButton(gump, 250, 477, 4008, 4010, GF_CLOSE_BTN, SHOW_PUBLIC_INDEX);
-		GFHTMLArea(gump,  282, 480, 100, 20, "<basefont color=#7FFFD4>Public Menu");
-	endif
-
-	GFPage(gump, 1);
-
-	var y_loc := 85;
-	var page_num := 1;
-	var counter := 1;
-	var line_num := 0;
-
-	if( public )
-		go_keys_base.sort();
-		foreach place in ( go_keys_base )
-			GFTextLine(gump,  25, y_loc, 2100, go_prop_base[place].Name);
-			GFTextLine(gump, 175, y_loc, 2100, go_prop_base[place].Realm);
-			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
-			GFAddButton(gump, 350, y_loc+3, 2117, 2118, GF_CLOSE_BTN, (num_keys+counter));
-
-			counter := counter + 1;
-			line_num := line_num+1;
-			y_loc := y_loc + 20;
-			if ( line_num >= 18 && line_num < num_keys )
-				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
-				page_num := page_num + 1;
-				GFPage(gump, page_num);
-				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
-				y_loc := 85;
-				line_num := 0;
-			endif
-			sleepms(2);
-		endforeach
-	else
-		go_keys.sort();
-		foreach place in ( go_keys )
-			GFTextLine(gump,  25, y_loc, 2100, go_prop[place].Name);
-			GFTextLine(gump, 175, y_loc, 2100, go_prop[place].Realm);
-			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
-			GFAddButton(gump, 350, y_loc+3, 2117, 2118, GF_CLOSE_BTN, (num_keys+counter));
-
-			counter := counter + 1;
-			line_num := line_num+1;
-			y_loc := y_loc + 20;
-			if ( line_num >= 18 && line_num < num_keys )
-				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
-				page_num := page_num + 1;
-				GFPage(gump, page_num);
-				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
-				y_loc := 85;
-				line_num := 0;
-			endif
-			sleepms(2);
-		endforeach
-	endif
-
-        return gump;
-
-
-endfunction
-
-function Go_RetrieveGump(elem_name, prop_name:="base_Distro")
-
-        var elem := DFFindElement(go_data_gumps, elem_name);
-        return (elem.GetProp(prop_name));
-
-endfunction
-
-function Go_SaveGump(elem_name, gump, prop_name:="base_Distro")
-
-        var elem := DFFindElement(go_data_gumps, elem_name, DF_CREATE);
-        return (elem.SetProp(prop_name, gump));
-
-endfunction
-
-function Go_RefreshGump(elem_name, prop_name:="base_Distro")
-
-        var elem := DFFindElement(go_data_gumps, elem_name);
-        return (elem.EraseProp(prop_name));
-
-endfunction
\ No newline at end of file

Deleted: trunk/096/pkg/commands/include/go-template.inc
===================================================================
--- trunk/096/pkg/commands/include/go-template.inc	2005-09-25 08:34:03 UTC (rev 234)
+++ trunk/096/pkg/commands/include/go-template.inc	2005-09-25 08:50:11 UTC (rev 235)
@@ -1,36 +0,0 @@
-function Go_CheckInit(who)
-
-        if ( !go_prop_base )
-                SendSysMessage(who, "Creating initial go list dictionary...");
-                var oldlocs := ReadConfigFile("::golocs");
-                var MaxLocs := GetConfigMaxIntKey(oldlocs);
-                go_prop_base := dictionary;
-                for i:=1 to MaxLocs
-                        // Open files and set veriables
-                        var dest := oldlocs[i];
-                        Go_SetLocation("base_Distro", who, dest.name, dest.realm, dest.x, dest.y, dest.z);
-                        sleepms(2);
-                endfor
-
-                go_prop_base := go_elem.GetProp("base_Distro");
-                go_keys_base := go_prop_base.keys();
-                Go_RefreshGump("LocationIndex", "base_Distro");
-        endif
-
-        return 0;
-
-endfunction
-
-function Go_RefreshMyGumps(who)
-
-        var elem := DFFindElement(go_data_gumps, "LocationIndex");
-        elem.EraseProp("base_Distro");
-        elem.EraseProp(who.acctname);
-
-        elem := DFFindElement(go_data_gumps, "CopyIndex");
-        elem.EraseProp("base_Distro");
-        elem.EraseProp(who.acctname);
-
-        return 1;
-
-endfunction
\ No newline at end of file

Deleted: trunk/096/pkg/commands/include/go-text.inc
===================================================================
--- trunk/096/pkg/commands/include/go-text.inc	2005-09-25 08:34:03 UTC (rev 234)
+++ trunk/096/pkg/commands/include/go-text.inc	2005-09-25 08:50:11 UTC (rev 235)
@@ -1,141 +0,0 @@
-function Go_Parse_Text(who, text)
-
-        if( !text )
-                return 0;
-        endif
-
-        var params := SplitWords(text);
-
-        case( lower(params[1]) )
-          "refresh": return Go_RefreshMyGumps(who);
-          "xyz":     return Go_GoXYZ(who, params);
-          default:   return Go_FindLocationByText(who, params);
-        endcase
-
-        return 0;
-
-endfunction
-
-function Go_GoXYZ(who, params)
-
-        var num_params := len(params);
-
-        case(num_params)
-          1:
-          2: SendSysMessage(who, "Error. Insufficient data supplied. \".go xyz x y [z] [string realm name]\"");
-          3: params[4] := GetMapInfo( CInt(params[1]), CInt(params[2]), who.realm ).z;
-             params[5] := who.realm;
-          4: params[5] := who.realm;
-          default:
-        endcase
-
-        if( Realms().Exists( lower(params[5])) )
-                if( who.realm == lower(params[5]) )
-                        return ( MoveCharacterToLocation( who, CInt(params[2]), CInt(params[3]), CInt(params[4]), MOVECHAR_FORCELOCATION ) );
-                else
-                        return ( MoveObjectToRealm( who, lower(params[5]), CInt(params[2]), CInt(params[3]), CInt(params[4]), MOVECHAR_FORCELOCATION ) );
-                endif
-        else
-                GumpPrompt(who, "Invalid Realm name in xyz!");
-                return 1;
-        endif
-
-        return 1;
-
-endfunction
-
-function Go_FindLocationByText(who, params)
-
-        case( lower(params[params.size()]) )
-          "private": Go_ByPrivateLocation(who, params);
-          "public":  Go_ByPublicLocation(who, params);
-          default:   Go_ByDefaultLocation(who, params);
-        endcase
-
-        return 1;
-
-endfunction
-
-function Go_ByPrivateLocation(who, params)
-
-        if(go_prop.Exists( lower(params[1]) ) )
-                var temp := go_prop[lower(params[1])];
-                SendSysMessage(who, "Going to private location [" + params[1] + "]");
-                var move;
-                if( who.realm == temp.Realm )
-                        move := MoveCharacterToLocation(who, CInt(temp.X), CInt(temp.Y), CInt(temp.Z), MOVECHAR_FORCELOCATION);
-                else
-                        move := MoveObjectToRealm( who, temp.Realm, temp.X, temp.Y, temp.Z, MOVECHAR_FORCELOCATION );
-                endif
-                if ( TypeOf(move) != "Integer" )
-                        GumpPrompt(who, "Error moving: X[" + temp.X +"] Y[" + temp.Y + "] Z[" + temp.Z + "]");
-                        return 0;
-                endif
-        else
-                GumpPrompt(who, "Private Location [" + params[1] + "] does not exist.");
-                return 0;
-        endif
-
-        return 0;
-
-endfunction
-
-function Go_ByPublicLocation(who, params)
-
-        if(go_prop_base.Exists( lower(params[1]) ) )
-                var temp := go_prop_base[lower(params[1])];
-                SendSysMessage(who, "Going to public location [" + params[1] + "]");
-                var move;
-                if( who.realm == temp.Realm )
-                        move := MoveCharacterToLocation(who, CInt(temp.X), CInt(temp.Y), CInt(temp.Z), MOVECHAR_FORCELOCATION);
-                else
-                        move := MoveObjectToRealm( who, temp.Realm, temp.X, temp.Y, temp.Z, MOVECHAR_FORCELOCATION );
-                endif
-                if ( TypeOf(move) != "Integer" )
-                        GumpPrompt(who, "Error moving: X[" + temp.X +"] Y[" + temp.Y + "] Z[" + temp.Z + "]");
-                        return 0;
-                endif
-        else
-                GumpPrompt(who, "Public Location [" + params[1] + "] does not exist.");
-                return 0;
-        endif
-
-        return 0;
-
-endfunction
-
-function Go_ByDefaultLocation(who, params)
-
-        if(go_prop.Exists( lower(params[1]) ) )
-                var temp := go_prop[lower(params[1])];
-                SendSysMessage(who, "Going to private location [" + params[1] + "]");
-                var move;
-                if( who.realm == temp.Realm )
-                        move := MoveCharacterToLocation(who, CInt(temp.X), CInt(temp.Y), CInt(temp.Z), MOVECHAR_FORCELOCATION);
-                else
-                        move := MoveObjectToRealm( who, temp.Realm, temp.X, temp.Y, temp.Z, MOVECHAR_FORCELOCATION );
-                endif
-                if ( TypeOf(move) != "Integer" )
-                        GumpPrompt(who, "Error moving: X[" + temp.X +"] Y[" + temp.Y + "] Z[" + temp.Z + "]");
-                        return 0;
-                endif
-        elseif(go_prop_base.Exists( lower(params[1]) ) )
-                var temp := go_prop_base[lower(params[1])];
-                SendSysMessage(who, "Going to public location[" + params[1] + "]");
-                var move;
-                if( who.realm == temp.Realm )
-                        move := MoveCharacterToLocation(who, CInt(temp.X), CInt(temp.Y), CInt(temp.Z), MOVECHAR_FORCELOCATION);
-                else
-                        move := MoveObjectToRealm( who, temp.Realm, temp.X, temp.Y, temp.Z, MOVECHAR_FORCELOCATION );
-                endif
-                if ( TypeOf(move) != "Integer" )
-                        GumpPrompt(who, "Error moving: X[" + temp.X +"] Y[" + temp.Y + "] Z[" + temp.Z + "]");
-                        return 0;
-                endif
-        else
-                GumpPrompt(who, "Location [" + params[1] + "] does not exist.");
-                return 0;
-        endif
-
-
-endfunction

Copied: trunk/096/pkg/commands/include/goAdd.inc (from rev 234, trunk/096/pkg/commands/include/go-add.inc)
===================================================================
--- trunk/096/pkg/commands/include/go-add.inc	2005-09-25 08:34:03 UTC (rev 234)
+++ trunk/096/pkg/commands/include/goAdd.inc	2005-09-25 08:50:11 UTC (rev 235)
@@ -0,0 +1,203 @@
+/* $Id$
+ *
+ */
+
+
+function Go_AddNewLocation(who, public:=1)
+
+	SendSysMessage(who, "Click where you want the new Go Location to go to.");
+	var targ := TargetCoordinates(who);
+
+	if (!targ)
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	endif
+
+	var name := RequestInput(who, who.backpack, "What do you want to call this go location?");
+
+	if ( !name )
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	endif
+
+	if( public )
+		go_prop_base := go_elem.GetProp("base_Distro");
+		if ( go_prop_base.Exists(lower(name)) )
+			GumpPrompt(who, "You already have a public go location named ["+name+"]");
+			return 0;
+		endif
+		Go_SetLocation("base_Distro", who, name, targ.realm, targ.x, targ.y, targ.z);
+		GumpPrompt(who, "New public go location added: ["+name+"]");
+	else
+		go_prop := go_elem.GetProp(who.acctname);
+		if ( go_prop.Exists(lower(name)) )
+			GumpPrompt(who, "You already have a private go location named ["+name+"]");
+			return 0;
+		endif
+		Go_SetLocation(who.acctname, who, name, targ.realm, targ.x, targ.y, targ.z);
+		GumpPrompt(who, "New private go location added: ["+name+"]");
+	endif
+
+	return 0;
+
+endfunction
+
+function Go_CopyLocation(who, public:=1)
+
+	var gump;
+	if( public )
+		gump := Go_RetrieveGump("CopyIndex", "base_Distro");
+		num_keys := go_keys_base.size();
+	else
+		gump := Go_RetrieveGump("CopyIndex", who.acctname);
+		num_keys := go_keys.size();
+	endif
+
+	if  ( !gump )
+		if( public )
+			gump := Go_LocationCopyGump(1);
+			Go_SaveGump("CopyIndex", gump, "base_Distro");
+		else
+			gump := Go_LocationCopyGump(0);
+			Go_SaveGump("CopyIndex", gump, who.acctname);
+		endif
+	endif
+
+	var input := GFSendGump(who, gump);
+	input := input[0];
+
+	if(input)
+		var send_Location := 0;
+		if( public )
+			send_Location := go_prop_base[lower(go_keys_base[input])];
+		else
+			send_Location := go_prop[lower(go_keys[input])];
+		endif
+		if ( send_Location )
+			if( public )
+				go_prop_base := go_elem.GetProp("base_Distro");
+				if ( go_prop.Exists(lower(send_Location.Name)) )
+					GumpPrompt(who, "You already have a private go location named ["+send_Location.Name+"]");
+					return 0;
+				endif
+				Go_SetLocation(who.acctname, who, send_Location.Name, send_Location.Realm, send_Location.X, send_Location.Y, send_Location.Z);
+				GumpPrompt(who, "Copied [" + send_Location.Name + "] to your private menu.");
+			else
+				go_prop := go_elem.GetProp(who.acctname);
+				if ( go_prop_base.Exists(lower(send_Location.Name)) )
+					GumpPrompt(who, "You already have a public go location named ["+send_Location.Name+"]");
+					return 0;
+				endif
+				Go_SetLocation("base_Distro", who, send_Location.Name, send_Location.Realm, send_Location.X, send_Location.Y, send_Location.Z);
+				GumpPrompt(who, "Copied [" + send_Location.Name + "] to the public menu.");
+			endif
+			return 0;
+		else
+			GumpPrompt(who, "Location [" + send_Location.Name + "] does not exist.");
+			Go_RefreshMyGumps(who);
+			return 0;
+		endif
+	else
+		SendSysMessage(who, "Copying Cancelled");
+		Go_RefreshMyGumps(who);
+		return 0;
+	endif
+
+	return 0;
+
+endfunction
+
+function Go_SetLocation(gump_Type, who, name, realm, x, y, z)
+
+	if( !realm )
+		realm := who.realm;
+	endif
+
+	z := GetMapInfo(x, y, realm).z;
+
+	var temp := dictionary;
+	temp.+Name := lower(name);
+	temp.+Realm := lower(realm);
+	temp.+X := x;
+	temp.+Y := y;
+	temp.+Z := z;
+	case(gump_Type)
+		"base_Distro": go_prop_base[lower(name)] := temp;
+			       go_elem.SetProp(gump_Type, go_prop_base);
+		default:       go_prop[lower(name)] := temp;
+                               go_elem.SetProp(gump_Type, go_prop);
+	endcase
+	Go_RefreshMyGumps(who);
+
+	return 0;
+
+endfunction
+
+function Go_LocationCopyGump(public:=1)
+
+	var gump := GFCreateGump();
+	GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
+	GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
+	if( public )
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
+	else
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
+	endif
+	GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
+	GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
+	GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
+	GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Copy");
+	GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
+
+	GFPage(gump, 1);
+
+	var y_loc := 85;
+	var page_num := 1;
+	var counter := 1;
+	var line_num := 0;
+
+	if( public )
+		go_keys_base.sort();
+		foreach place in ( go_keys_base )
+			GFTextLine(gump,  25, y_loc, 2100, go_prop_base[place].Name);
+			GFTextLine(gump, 175, y_loc, 2100, go_prop_base[place].Realm);
+			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+
+			counter := counter + 1;
+			line_num := line_num+1;
+			y_loc := y_loc + 20;
+			if ( line_num >= 18 && line_num < num_keys )
+				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+				page_num := page_num + 1;
+				GFPage(gump, page_num);
+				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+				y_loc := 85;
+				line_num := 0;
+			endif
+			sleepms(2);
+		endforeach
+	else
+		go_keys.sort();
+		foreach place in ( go_keys )
+			GFTextLine(gump,  25, y_loc, 2100, go_prop[place].Name);
+			GFTextLine(gump, 175, y_loc, 2100, go_prop[place].Realm);
+			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+
+			counter := counter + 1;
+			line_num := line_num+1;
+			y_loc := y_loc + 20;
+			if ( line_num >= 18 && line_num < num_keys )
+				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+				page_num := page_num + 1;
+				GFPage(gump, page_num);
+				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+				y_loc := 85;
+				line_num := 0;
+			endif
+			sleepms(2);
+		endforeach
+	endif
+
+	return gump;
+
+endfunction
\ No newline at end of file

Copied: trunk/096/pkg/commands/include/goEdit.inc (from rev 234, trunk/096/pkg/commands/include/go-edit.inc)
===================================================================
--- trunk/096/pkg/commands/include/go-edit.inc	2005-09-25 08:34:03 UTC (rev 234)
+++ trunk/096/pkg/commands/include/goEdit.inc	2005-09-25 08:50:11 UTC (rev 235)
@@ -0,0 +1,201 @@
+/* $Id$
+ *
+ */
+
+
+function Go_EditSendLocation(who, public:=1)
+	var gump;
+	if( public )
+		gump := Go_SelectEditGump(1);
+		num_keys := go_keys_base.size();
+	else
+		gump := Go_SelectEditGump(0);
+		num_keys := go_keys.size();
+	endif
+
+	var input := GFSendGump(who, gump);
+        input := input[0];
+
+        if(input)
+		var send_Location;
+		if( public )
+			send_Location := go_prop_base[lower(go_keys_base[input])];
+		else
+			send_Location := go_prop[lower(go_keys[input])];
+		endif
+                if ( send_Location )
+			var edit_gump;
+			if( public )
+				edit_gump := Go_EditLocationGump(send_Location);
+			else
+				edit_gump := Go_EditLocationGump(send_Location, 0);
+			endif
+                        var edit_input := GFSendGump(who, edit_gump);
+
+                        if ( edit_input[edit_update] )
+                                edit_name := GFExtractData(edit_input, edit_name);
+                                xg_pos := CInt(GFExtractData(edit_input, xg_pos));
+                                yg_pos := CInt(GFExtractData(edit_input, yg_pos));
+                                zg_pos := CInt(GFExtractData(edit_input, zg_pos));
+
+                                if ( !edit_name )
+                                        GumpPrompt(who, "Cancelled - No name entered");
+                                        return 0;
+                                elseif ( lower(edit_name) != send_Location.Name )
+					if( public )
+						if ( go_prop_base.Exists( Lower(edit_name) ) )
+							GumpPrompt(who, "Cancelled - location already exists with the name ["+edit_name+"]");
+							return 0;
+						endif
+					else
+						if ( go_prop.Exists( Lower(edit_name) ) )
+							GumpPrompt(who, "Cancelled - location already exists with the name ["+edit_name+"]");
+							return 0;
+						endif
+					endif
+                                endif
+
+                                var original_Realm := send_Location.Realm;
+				if( public )
+					go_prop_base.erase(lower(send_Location.Name));
+					go_elem.SetProp("base_Distro", go_prop_base);
+					Go_SetLocation("base_Distro", who, edit_name, original_Realm, xg_pos, yg_pos, zg_pos);
+				else
+					go_prop.erase(lower(send_Location.Name));
+					go_elem.SetProp(who.acctname, go_prop);
+					Go_SetLocation(who.acctname, who, edit_name, original_Realm, xg_pos, yg_pos, zg_pos);
+				endif
+                                SendSysMessage(who, "Updated ["+edit_name+"]");
+                                Go_RefreshMyGumps(who);
+                        elseif ( edit_input[edit_delete] )
+                                SendSysMessage(who, "Deleted [" + send_Location.Name + "]");
+				if( public )
+					go_prop_base.erase(lower(send_Location.Name));
+					go_elem.SetProp("base_Distro", go_prop_base);
+				else
+					go_prop.erase(lower(send_Location.Name));
+					go_elem.SetProp(who.acctname, go_prop);
+				endif
+                                Go_RefreshMyGumps(who);
+                        else
+                                SendSysMessage(who, "Cancelled");
+                        endif
+                else
+                        GumpPrompt(who, "Location [" + send_Location.Name + "] does not exist.");
+                        return 0;
+                endif
+        else
+                SendSysMessage(who, "Editing Cancelled");
+                return 0;
+        endif
+
+        return 0;
+
+endfunction
+
+
+function Go_SelectEditGump(public)
+
+	var gump := GFCreateGump();
+	GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
+	GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
+	if( public )
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
+	else
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
+	endif
+        GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
+        GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
+        GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
+        GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Edit");
+        GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
+
+
+        GFPage(gump, 1);
+
+        var y_loc := 85;
+        var page_num := 1;
+        var counter := 1;
+        var line_num := 0;
+
+	if( public )
+		go_keys_base.sort();
+		foreach place in ( go_keys_base )
+			GFTextLine(gump,  25, y_loc, 2100, go_prop_base[place].Name);
+			GFTextLine(gump, 175, y_loc, 2100, go_prop_base[place].Realm);
+			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+
+			counter := counter + 1;
+			line_num := line_num+1;
+			y_loc := y_loc + 20;
+			if ( line_num >= 18 && line_num < num_keys )
+				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+				page_num := page_num + 1;
+				GFPage(gump, page_num);
+				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+				y_loc := 85;
+				line_num := 0;
+			endif
+			sleepms(2);
+		endforeach
+	else
+		go_keys.sort();
+		foreach place in ( go_keys )
+			GFTextLine(gump,  25, y_loc, 2100, go_prop[place].Name);
+			GFTextLine(gump, 175, y_loc, 2100, go_prop[place].Realm);
+			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+
+			counter := counter + 1;
+			line_num := line_num+1;
+			y_loc := y_loc + 20;
+			if ( line_num >= 18 && line_num < num_keys )
+				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+				page_num := page_num + 1;
+				GFPage(gump, page_num);
+				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+				y_loc := 85;
+				line_num := 0;
+			endif
+			sleepms(2);
+		endforeach
+	endif
+
+        return gump;
+
+endfunction
+
+
+function Go_EditLocationGump(send_Location, public:=1)
+	var gump := GFCreateGump();
+	GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
+	GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
+	if (public)
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
+	else
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
+	endif
+	GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
+	GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
+	edit_update := GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, UPDATE_BUTTON);
+	GFHTMLArea(gump,  57, 480, 40, 20, "<basefont color=#7FFFD4>Update");
+	edit_delete := GFAddButton(gump, 100, 477, 4005, 4007, GF_CLOSE_BTN, DELETE_BUTTON);
+	GFHTMLArea(gump,  132, 480, 40, 20, "<basefont color=#7FFFD4>Delete");
+
+	GFTextLine(gump, 20, 120, 2100, "Name");
+	GFResizePic(gump, 120, 117, 2620, 180, 30);
+	edit_name := GFTextEntry(gump, 130, 122, 160, 25, 2100, send_Location.Name);
+
+	GFTextLine(gump, 20, 143, 2100, "X Coordinate");
+	GFResizePic(gump, 120, 140, 2620, 100, 30);
+	xg_pos := GFTextEntry(gump, 130, 145, 80, 25, 2100, send_Location.X);
+
+	GFTextLine(gump, 20, 166, 2100, "Y Coordinate");
+	GFResizePic(gump, 120, 163, 2620, 100, 30);
+	yg_pos := GFTextEntry(gump, 130, 168, 80, 25, 2100, send_Location.Y);
+
+	GFTextLine(gump, 20, 189, 2100, "Z Coordinate");
+	GFResizePic(gump, 120, 186, 2620, 100, 30);
+	zg_pos := GFTextEntry(gump, 130, 191, 80, 25, 2100, send_Location.Z);
+
+	return gump;
+endfunction
\ No newline at end of file

Copied: trunk/096/pkg/commands/include/goGumps.inc (from rev 234, trunk/096/pkg/commands/include/go-gumps.inc)
===================================================================
--- trunk/096/pkg/commands/include/go-gumps.inc	2005-09-25 08:34:03 UTC (rev 234)
+++ trunk/096/pkg/commands/include/goGumps.inc	2005-09-25 08:50:11 UTC (rev 235)
@@ -0,0 +1,210 @@
+/* $Id$
+ *
+ */
+// Gump backgrounds - Used in various functions - easier to use globally.
+var BKGND_SILVERTRIM := GFCfgConst("Defaults", "BackGround");
+var BKGND_DARK_STONE := GFCfgConst("Defaults", "ForeGround");
+
+
+function Go_LocationIndex(who, gump_Type:="base_Distro")
+
+        var gump := Go_RetrieveGump("LocationIndex", gump_Type);
+        if(gump_Type == "base_Distro")
+                num_keys := go_keys_base.size();
+        else
+                num_keys := go_keys.size();
+        endif
+        if  ( !gump )
+                if(gump_Type == "base_Distro")
+                        gump := Go_LocationIndexGump(1);
+                else
+                        gump := Go_LocationIndexGump(0);
+                endif
+                Go_SaveGump("LocationIndex", gump, gump_Type);
+        endif
+
+        var input := GFSendGump(who, gump);
+        input := input[0];
+
+        case(input)
+          0: SendSysMessage(who, "Closed");
+             return 0;
+          ADD_NEW_PUBLIC:     Go_AddNewLocation(who, 1);
+                              return 0;
+          ADD_NEW_PRIVATE:    Go_AddNewLocation(who, 0);
+                              return 0;
+          COPY_PUBLIC_ITEM:   Go_CopyLocation(who, 1);
+                              return 0;
+          COPY_PRIVATE_ITEM:  Go_CopyLocation(who, 0);
+                              return 0;
+          EDIT_PUBLIC_ITEM:   print("Edit Public"); Go_EditSendLocation(who, 1);
+                              return 0;
+          EDIT_PRIVATE_ITEM:  Go_EditSendLocation(who, 0);
+                              return 0;
+          SHOW_PUBLIC_INDEX:  SetObjProperty(who, "#Go_Gump", 1);
+                              Go_LocationIndex(who);
+                              return 0;
+          SHOW_PRIVATE_INDEX: SetObjProperty(who, "#Go_Gump", 2);
+                              Go_LocationIndex(who, who.acctname);
+                              return 0;
+          default:
+        endcase
+
+        if(input)
+                var send_Location;
+                var moved := who;
+                if ( input <= num_keys )
+                        case(gump_Type)
+                          "base_Distro": send_Location := go_prop_base[lower(go_keys_base[input])];
+                          default:       send_Location := go_prop[lower(go_keys[input])];
+                        endcase
+                        SendSysMessage(who, "Who do you want to send to " + send_Location.Name);
+                        moved := target(who);
+                        if (!moved)
+                                return 0;
+                        endif
+                else
+                        input := input - num_keys;
+                        case(gump_Type)
+                          "base_Distro": send_Location  := go_prop_base[lower(go_keys_base[input])];
+                          default:       send_Location := go_prop[lower(go_keys[input])];
+                        endcase
+                endif
+
+                if ( send_Location )
+                        var move;
+                        SendSysMessage(who, "Going to [" + send_Location.Name + "]");
+                        if( moved.realm == send_Location.Realm )
+                                if ( moved.IsA(POLCLASS_ITEM) )
+                                        move := MoveItemToLocation(moved, CInt(send_Location.X), CInt(send_Location.Y), CInt(send_Location.Z), MOVEITEM_FORCELOCATION);
+                                else
+                                        move := MoveCharacterToLocation(moved, CInt(send_Location.X), CInt(send_Location.Y), CInt(send_Location.Z), MOVECHAR_FORCELOCATION);
+                                endif
+                        else
+                                move := MoveObjectToRealm( who, send_Location.Realm, send_Location.X, send_Location.Y, send_Location.Z, MOVECHAR_FORCELOCATION );
+                        endif
+
+                        if ( TypeOf(move) != "Integer" )
+                                GumpPrompt(who, "Error moving: X[" + send_Location.X +"] Y[" + send_Location.Y + "] Z[" + send_Location.Z + "]");
+                        endif
+                else
+                        GumpPrompt(who, "Location [" + send_Location.Name + "] does not exist.");
+                endif
+        endif
+
+        return 0;
+
+endfunction
+
+function Go_LocationIndexGump(public:=1)
+
+	var gump := GFCreateGump();
+	GFResizePic(gump, 0, 0, BKGND_SILVERTRIM, 400, 520);
+	GFResizePic(gump, 15, 15, BKGND_DARK_STONE, 370, 35);
+	if( public )
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Public)</center>");
+	else
+		GFHTMLArea(gump,  15, 20, 370, 20, "<basefont color=#7FFFD4><center>Go To Locations (Private)</center>");
+	endif
+	GFResizePic(gump, 15, 55, BKGND_DARK_STONE, 370, 410);
+	GFHTMLArea(gump,  25, 60, 150, 20, "<basefont color=#7FFFD4>Name");
+	GFHTMLArea(gump, 175, 60, 150, 20, "<basefont color=#7FFFD4>Realm");
+	GFHTMLArea(gump, 295, 60, 150, 20, "<basefont color=#7FFFD4>Send");
+	GFHTMLArea(gump, 345, 60, 150, 20, "<basefont color=#7FFFD4>Goto");
+	GFResizePic(gump, 15, 470, BKGND_DARK_STONE, 370, 35);
+	if( public )
+		GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, ADD_NEW_PUBLIC);
+		GFHTMLArea(gump,  57, 480, 30, 20, "<basefont color=#7FFFD4>Add");
+		GFAddButton(gump, 100, 477, 4005, 4007, GF_CLOSE_BTN, COPY_PUBLIC_ITEM);
+		GFHTMLArea(gump,  132, 480, 30, 20, "<basefont color=#7FFFD4>Copy");
+		GFAddButton(gump, 175, 477, 4008, 4010, GF_CLOSE_BTN, EDIT_PUBLIC_ITEM);
+		GFHTMLArea(gump,  207, 480, 30, 20, "<basefont color=#7FFFD4>Edit");
+		GFAddButton(gump, 250, 477, 4008, 4010, GF_CLOSE_BTN, SHOW_PRIVATE_INDEX);
+		GFHTMLArea(gump,  282, 480, 100, 20, "<basefont color=#7FFFD4>Public Menu");
+	else
+		GFAddButton(gump, 25, 477, 4008, 4010, GF_CLOSE_BTN, ADD_NEW_PRIVATE);
+		GFHTMLArea(gump,  57, 480, 30, 20, "<basefont color=#7FFFD4>Add");
+		GFAddButton(gump, 100, 477, 4005, 4007, GF_CLOSE_BTN, COPY_PRIVATE_ITEM);
+		GFHTMLArea(gump,  132, 480, 30, 20, "<basefont color=#7FFFD4>Copy");
+		GFAddButton(gump, 175, 477, 4008, 4010, GF_CLOSE_BTN, EDIT_PRIVATE_ITEM);
+		GFHTMLArea(gump,  207, 480, 30, 20, "<basefont color=#7FFFD4>Edit");
+		GFAddButton(gump, 250, 477, 4008, 4010, GF_CLOSE_BTN, SHOW_PUBLIC_INDEX);
+		GFHTMLArea(gump,  282, 480, 100, 20, "<basefont color=#7FFFD4>Public Menu");
+	endif
+
+	GFPage(gump, 1);
+
+	var y_loc := 85;
+	var page_num := 1;
+	var counter := 1;
+	var line_num := 0;
+
+	if( public )
+		go_keys_base.sort();
+		foreach place in ( go_keys_base )
+			GFTextLine(gump,  25, y_loc, 2100, go_prop_base[place].Name);
+			GFTextLine(gump, 175, y_loc, 2100, go_prop_base[place].Realm);
+			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+			GFAddButton(gump, 350, y_loc+3, 2117, 2118, GF_CLOSE_BTN, (num_keys+counter));
+
+			counter := counter + 1;
+			line_num := line_num+1;
+			y_loc := y_loc + 20;
+			if ( line_num >= 18 && line_num < num_keys )
+				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+				page_num := page_num + 1;
+				GFPage(gump, page_num);
+				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+				y_loc := 85;
+				line_num := 0;
+			endif
+			sleepms(2);
+		endforeach
+	else
+		go_keys.sort();
+		foreach place in ( go_keys )
+			GFTextLine(gump,  25, y_loc, 2100, go_prop[place].Name);
+			GFTextLine(gump, 175, y_loc, 2100, go_prop[place].Realm);
+			GFAddButton(gump, 300, y_loc+3, 2117, 2118, GF_CLOSE_BTN, counter);
+			GFAddButton(gump, 350, y_loc+3, 2117, 2118, GF_CLOSE_BTN, (num_keys+counter));
+
+			counter := counter + 1;
+			line_num := line_num+1;
+			y_loc := y_loc + 20;
+			if ( line_num >= 18 && line_num < num_keys )
+				GFAddButton(gump, 370, 435, 2706, 2707, GF_PAGE_BTN, page_num+1);
+				page_num := page_num + 1;
+				GFPage(gump, page_num);
+				GFAddButton(gump, 370,  85, 2704, 2705, GF_PAGE_BTN, page_num-1);
+				y_loc := 85;
+				line_num := 0;
+			endif
+			sleepms(2);
+		endforeach
+	endif
+
+        return gump;
+
+
+endfunction
+
+function Go_RetrieveGump(elem_name, prop_name:="base_Distro")
+
+        var elem := DFFindElement(go_data_gumps, elem_name);
+        return (elem.GetProp(prop_name));
+
+endfunction
+
+function Go_SaveGump(elem_name, gump, prop_name:="base_Distro")
+
+        var elem := DFFindElement(go_data_gumps, elem_name, DF_CREATE);
+        return (elem.SetProp(prop_name, gump));
+
+endfunction
+
+function Go_RefreshGump(elem_name, prop_name:="base_Distro")
+
+        var elem := DFFindElement(go_data_gumps, elem_name);
+        return (elem.EraseProp(prop_name));
+
+endfunction
\ No newline at end of file

Copied: trunk/096/pkg/commands/include/goTemplate.inc (from rev 234, trunk/096/pkg/commands/include/go-template.inc)
===================================================================
--- trunk/096/pkg/commands/include/go-template.inc	2005-09-25 08:34:03 UTC (rev 234)
+++ trunk/096/pkg/commands/include/goTemplate.inc	2005-09-25 08:50:11 UTC (rev 235)
@@ -0,0 +1,41 @@
+/* $Id$
+ *
+ */
+
+
+function Go_CheckInit(who)
+
+        if ( !go_prop_base )
+                SendSysMessage(who, "Creating initial go list dictionary...");
+                var oldlocs := ReadConfigFile("::golocs");
+                var MaxLocs := GetConfigMaxIntKey(oldlocs);
+                go_prop_base := dictionary;
+                for i:=1 to MaxLocs
+                        // Open files and set veriables
+                        var dest := oldlocs[i];
+                        Go_SetLocation("base_Distro", who, dest.name, dest.realm, dest.x, dest.y, dest.z);
+                        sleepms(2);
+                endfor
+
+                go_prop_base := go_elem.GetProp("base_Distro");
+                go_keys_base := go_prop_base.keys();
+                Go_RefreshGump("LocationIndex", "base_Distro");
+        endif
+
+        return 0;
+
+endfunction
+
+function Go_RefreshMyGumps(who)
+
+        var elem := DFFindElement(go_data_gumps, "LocationIndex");
+        elem.EraseProp("base_Distro");
+        elem.EraseProp(who.acctname);
+
+        elem := DFFindElement(go_data_gumps, "CopyIndex");
+        elem.EraseProp("base_Distro");
+        elem.EraseProp(who.acctname);
+
+        return 1;
+
+endfunction
\ No newline at end of file

Copied: trunk/096/pkg/commands/include/goText.inc (from rev 234, trunk/096/pkg/commands/include/go-text.inc)
===================================================================
--- trunk/096/pkg/commands/include/go-text.inc	2005-09-25 08:34:03 UTC (rev 234)
+++ trunk/096/pkg/commands/include/goText.inc	2005-09-25 08:50:11 UTC (rev 235)
@@ -0,0 +1,141 @@
+/* $Id$
+ *
+ */
+
+
+function Go_Parse_Text(who, text)
+	if (!text)
+		return 0;
+        endif
+
+	var params := SplitWords(text);
+
+	case (lower(params[1]))
+		"refresh": return Go_RefreshMyGumps(who);
+		"xyz":     return Go_GoXYZ(who, params);
+		default:   return Go_FindLocationByText(who, params);
+	endcase
+
+	return 0;
+endfunction
+
+
+function Go_GoXYZ(who, params)
+	var num_params := len(params);
+
+	case (num_params)
+		1:
+		2: SendSysMessage(who, "Error. Insufficient data supplied. \".go xyz x y [z] [string realm name]\"");
+		3: params[4] := GetMapInfo( CInt(params[1]), CInt(params[2]), who.realm ).z;
+		params[5] := who.realm;
+		4: params[5] := who.realm;
+		default:
+	endcase
+
+	if (Realms().Exists(lower(params[5])))
+		if (who.realm == lower(params[5]))
+			return (MoveCharacterToLocation(who, CInt(params[2]), CInt(params[3]), CInt(params[4]), MOVECHAR_FORCELOCATION));
+		else
+			return (MoveObjectToRealm(who, lower(params[5]), CInt(params[2]), CInt(params[3]), CInt(params[4]), MOVECHAR_FORCELOCATION));
+                endif
+	else
+		GumpPrompt(who, "Invalid Realm name in xyz!");
+		return 1;
+	endif
+
+	return 1;
+endfunction
+
+
+function Go_FindLocationByText(who, params)
+	case (lower(params[params.size()]))
+		"private": Go_ByPrivateLocation(who, params);
+		"public":  Go_ByPublicLocation(who, params);
+		default:   Go_ByDefaultLocation(who, params);
+	endcase
+
+	return 1;
+endfunction
+
+function Go_ByPrivateLocation(who, params)
+
+        if(go_prop.Exists( lower(params[1]) ) )
+                var temp := go_prop[lower(params[1])];
+                SendSysMessage(who, "Going to private location [" + params[1] + "]");
+                var move;
+                if( who.realm == temp.Realm )
+                        move := MoveCharacterToLocation(who, CInt(temp.X), CInt(temp.Y), CInt(temp.Z), MOVECHAR_FORCELOCATION);
+                else
+                        move := MoveObjectToRealm( who, temp.Realm, temp.X, temp.Y, temp.Z, MOVECHAR_FORCELOCATION );
+                endif
+                if ( TypeOf(move) != "Integer" )
+                        GumpPrompt(who, "Error moving: X[" + temp.X +"] Y[" + temp.Y + "] Z[" + temp.Z + "]");
+                        return 0;
+                endif
+        else
+                GumpPrompt(who, "Private Location [" + params[1] + "] does not exist.");
+                return 0;
+        endif
+
+        return 0;
+
+endfunction
+
+
+function Go_ByPublicLocation(who, params)
+
+        if(go_prop_base.Exists( lower(params[1]) ) )
+                var temp := go_prop_base[lower(params[1])];
+                SendSysMessage(who, "Going to public location [" + params[1] + "]");
+                var move;
+                if( who.realm == temp.Realm )
+                        move := MoveCharacterToLocation(who, CInt(temp.X), CInt(temp.Y), CInt(temp.Z), MOVECHAR_FORCELOCATION);
+                else
+                        move := MoveObjectToRealm( who, temp.Realm, temp.X, temp.Y, temp.Z, MOVECHAR_FORCELOCATION );
+                endif
+                if ( TypeOf(move) != "Integer" )
+                        GumpPrompt(who, "Error moving: X[" + temp.X +"] Y[" + temp.Y + "] Z[" + temp.Z + "]");
+                        return 0;
+                endif
+        else
+                GumpPrompt(who, "Public Location [" + params[1] + "] does not exist.");
+                return 0;
+        endif
+
+        return 0;
+
+endfunction
+
+
+function Go_ByDefaultLocation(who, params)
+        if (go_prop.Exists( lower(params[1]) ) )
+		var temp := go_prop[lower(params[1])];
+		SendSysMessage(who, "Going to private location [" + params[1] + "]");
+		var move;
+                if (who.realm == temp.Realm)
+                        move := MoveCharacterToLocation(who, CInt(temp.X), CInt(temp.Y), CInt(temp.Z), MOVECHAR_FORCELOCATION);
+                else
+                        move := MoveObjectToRealm( who, temp.Realm, temp.X, temp.Y, temp.Z, MOVECHAR_FORCELOCATION );
+                endif
+                if ( TypeOf(move) != "Integer" )
+                        GumpPrompt(who, "Error moving: X[" + temp.X +"] Y[" + temp.Y + "] Z[" + temp.Z + "]");
+                        return 0;
+                endif
+        elseif(go_prop_base.Exists( lower(params[1]) ) )
+                var temp := go_prop_base[lower(params[1])];
+                SendSysMessage(who, "Going to public location[" + params[1] + "]");
+                var move;
+                if( who.realm == temp.Realm )
+                        move := MoveCharacterToLocation(who, CInt(temp.X), CInt(temp.Y), CInt(temp.Z), MOVECHAR_FORCELOCATION);
+                else
+                        move := MoveObjectToRealm( who, temp.Realm, temp.X, temp.Y, temp.Z, MOVECHAR_FORCELOCATION );
+                endif
+                if ( TypeOf(move) != "Integer" )
+                        GumpPrompt(who, "Error moving: X[" + temp.X +"] Y[" + temp.Y + "] Z[" + temp.Z + "]");
+                        return 0;
+                endif
+        else
+                GumpPrompt(who, "Location [" + params[1] + "] does not exist.");
+                return 0;
+        endif
+endfunction



From austin at berlios.de  Sun Sep 25 12:40:32 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 12:40:32 +0200
Subject: [Poldistro-svn] r237 - in trunk/096/pkg/systems/attributes: . config include startup
Message-ID: <200509251040.j8PAeW92025986@sheep.berlios.de>

Author: austin
Date: 2005-09-25 12:40:30 +0200 (Sun, 25 Sep 2005)
New Revision: 237

Added:
   trunk/096/pkg/systems/attributes/config/icp.cfg
   trunk/096/pkg/systems/attributes/start.src
   trunk/096/pkg/systems/attributes/startup/
   trunk/096/pkg/systems/attributes/startup/attributeCache.src
Modified:
   trunk/096/pkg/systems/attributes/include/attributes.inc
Log:
Support for attribute cache - Makes ListAttributesByTye() tons faster.

Added: trunk/096/pkg/systems/attributes/config/icp.cfg
===================================================================

Modified: trunk/096/pkg/systems/attributes/include/attributes.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-25 09:06:19 UTC (rev 236)
+++ trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-25 10:40:30 UTC (rev 237)
@@ -12,11 +12,12 @@
 use os;
 use cfgfile;
 
-include ":attributes:include/regen";
-include ":attributes:include/settings";
-include ":attributes:include/skills";
-include ":attributes:include/stats";
-include ":attributes:include/vitals";
+include ":attributes:regen";
+include ":attributes:settings";
+include ":attributes:skills";
+include ":attributes:stats";
+include ":attributes:vitals";
+include ":datafile:datafile";
 
 /* AP_GetAttributesCfgFile()
  * 
@@ -42,7 +43,7 @@
  * AP_GetAttributeCfgElem(attribute_name, cfg_file)
  *
  * Purpose
- * Retrieves a config elem for an vital in attributes.cfg
+ * Retrieves a config elem for an attribute in attributes.cfg
  *
  * Parameters
  * attribute_name:	Name of the attribute to get the elem of.
@@ -65,7 +66,51 @@
 	return cfg_elem;
 endfunction
 
+/* AP_GetAttributesCfgFile()
+ * 
+ * Purpose
+ * Loads the attributes datafile.
+ *
+ * Parameters
+ *
+ * Return value
+ * Config file
+ *
+ */
+function AP_GetAttributesDataFile()
+	var data_file := DFOpenDataFile(":attributes:attributes");
+	if ( data_file.errortext )
+		SysLog("Error::AP_GetAttributesDataFile() - Unable to open attributes.txt ->"+data_file.errortext);
+	endif
+
+	return data_file;
+endfunction
+
 /*
+ * AP_GetAttributeDataElem(attribute_name, cfg_file)
+ *
+ * Purpose
+ * Retrieves a datafile elem from the attributes package.
+ *
+ * Parameters
+ * attribute_name:	Name of the elem to retrieve.
+ *
+ * Return value
+ * Returns a datafile elem.
+ *
+ */
+function AP_GetAttributeDataElem(elem_name)
+	var data_file := AP_GetAttributesDataFile();
+	var data_elem := DFFindElement(data_file, elem_name, DF_CREATE);
+	
+	if ( data_elem.errortext )
+		SysLog("Error::AP_GetAttributeDataElem() - unable to find elem ["+elem_name+"] ->"+data_elem.errortext);
+	endif
+	
+	return data_elem;
+endfunction
+
+/*
  * AP_ListAttributesByType(type)
  *
  * Purpose
@@ -79,22 +124,12 @@
  *
  */
 function AP_ListAttributesByType(type:="")
-	var cfg_file := ReadConfigFile(":attributes:attributes");
-	
 	if ( !type )
+		var cfg_file := ReadConfigFile(":attributes:attributes");
 		return GetConfigStringKeys(cfg_file);
 	endif
 	
 	type := Lower(type);
-	var list := array;
-
-	foreach elem_name in ( GetConfigStringKeys(cfg_file) )
-		var elem_info := cfg_file[elem_name];
-		if ( Lower(elem_info.AttributeType) == type )
-			list.append(array);
-		endif
-		sleepms(2);
-	endforeach
-	
-	return list;
+	var data_elem := AP_GetAttributeDataElem("Categories");
+	return data_elem.GetProp(type);
 endfunction

Added: trunk/096/pkg/systems/attributes/start.src
===================================================================
--- trunk/096/pkg/systems/attributes/start.src	2005-09-25 09:06:19 UTC (rev 236)
+++ trunk/096/pkg/systems/attributes/start.src	2005-09-25 10:40:30 UTC (rev 237)
@@ -0,0 +1,8 @@
+use os;
+
+var script := start_script(":attributes:startup/attributeCache");
+if ( script.errortext )
+	SysLog(script.errortext);
+else
+	Print("Starting attributes setup... OK.");
+endif

Added: trunk/096/pkg/systems/attributes/startup/attributeCache.src
===================================================================
--- trunk/096/pkg/systems/attributes/startup/attributeCache.src	2005-09-25 09:06:19 UTC (rev 236)
+++ trunk/096/pkg/systems/attributes/startup/attributeCache.src	2005-09-25 10:40:30 UTC (rev 237)
@@ -0,0 +1,35 @@
+
+use uo;
+use os;
+
+include ":attributes:attributes";
+
+
+Program attributeCache()
+	var data_elem := AP_GetAttributeDataElem("Categories");
+	
+	// Clear out old cache
+	foreach prop_name in ( DFGetElemProps(data_elem) )
+		data_elem.EraseProp(prop_name);
+		sleepms(2);
+	endforeach
+	
+	var cfg_file := AP_GetAttributesCfgFile();
+	foreach elem_name in ( GetConfigStringKeys(cfg_file) )
+		var cfg_elem := AP_GetAttributeCfgElem(elem_name, cfg_file);
+		var type_name := cfg_elem.AttributeType;
+		
+		var type_list := data_elem.GetProp(type_name);
+		if ( !type_list )
+			type_list := array;
+		endif
+		
+		type_list.append(elem_name);
+		
+		data_elem.SetProp(type_name, type_list);
+	endforeach
+	
+	return 1;
+endprogram
+	
+



From austin at berlios.de  Sun Sep 25 16:20:06 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 16:20:06 +0200
Subject: [Poldistro-svn] r238 - trunk/096
Message-ID: <200509251420.j8PEK6w0015998@sheep.berlios.de>

Author: austin
Date: 2005-09-25 16:20:06 +0200 (Sun, 25 Sep 2005)
New Revision: 238

Modified:
   trunk/096/CoreChanges-096.txt
Log:


Modified: trunk/096/CoreChanges-096.txt
===================================================================
--- trunk/096/CoreChanges-096.txt	2005-09-25 10:40:30 UTC (rev 237)
+++ trunk/096/CoreChanges-096.txt	2005-09-25 14:20:06 UTC (rev 238)
@@ -1,4 +1,16 @@
 -- POL096 --
+09-23 Shinigami
+        Added : uo::SendStatus( character ) - to send full Status Packet to support Extensions
+                like Resistances, if you add'em via Packet Hook. Use SendStatus to update'em.
+
+09-17 Shinigami
+        Fixed : Crash if Name of Items or Mobiles was to long and you've clicked'em
+
+09-16 Shinigami
+        Added : pol.log will show last running Script and it's Program Counter
+                (you can use eCompile LST-file (Switch: -l) to get the Source Line)
+        Added : Linux: pol.log will show Backtrace (as same as STDERR)
+
 09-15 Austin
         Added : mobile.connected - To determine if the character is actively connected to the game.
                 Is set to 1 before logon/reconnect scripts are run and 0 right before logofftest is run.



From austin at berlios.de  Sun Sep 25 16:26:25 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 16:26:25 +0200
Subject: [Poldistro-svn] r239 - in trunk/096/pkg/mobiles: . AIBrain
Message-ID: <200509251426.j8PEQPcd016613@sheep.berlios.de>

Author: austin
Date: 2005-09-25 16:26:24 +0200 (Sun, 25 Sep 2005)
New Revision: 239

Added:
   trunk/096/pkg/mobiles/AIBrain/
Removed:
   trunk/096/pkg/mobiles/ai_brain/
Modified:
   trunk/096/pkg/mobiles/AIBrain/pkg.cfg
Log:
Renamed AI package to make the distro happy?

Copied: trunk/096/pkg/mobiles/AIBrain (from rev 236, trunk/096/pkg/mobiles/ai_brain)

Modified: trunk/096/pkg/mobiles/AIBrain/pkg.cfg
===================================================================
--- trunk/096/pkg/mobiles/ai_brain/pkg.cfg	2005-09-25 09:06:19 UTC (rev 236)
+++ trunk/096/pkg/mobiles/AIBrain/pkg.cfg	2005-09-25 14:26:24 UTC (rev 239)
@@ -1,5 +1,5 @@
 Enabled		1
-Name		ai_brain
+Name		AIBrain
 
 Version		5.0
 



From austin at berlios.de  Sun Sep 25 16:31:43 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 16:31:43 +0200
Subject: [Poldistro-svn] r240 - in trunk/096/pkg/mobiles: . brainAI brainAI/commands/gm brainAI/commands/test brainAI/complete/testnpc brainAI/include
Message-ID: <200509251431.j8PEVhBf017113@sheep.berlios.de>

Author: austin
Date: 2005-09-25 16:31:42 +0200 (Sun, 25 Sep 2005)
New Revision: 240

Added:
   trunk/096/pkg/mobiles/brainAI/
Removed:
   trunk/096/pkg/mobiles/AIBrain/
Modified:
   trunk/096/pkg/mobiles/brainAI/brain.src
   trunk/096/pkg/mobiles/brainAI/commands/gm/createnpc.src
   trunk/096/pkg/mobiles/brainAI/commands/gm/npcsleep.src
   trunk/096/pkg/mobiles/brainAI/commands/gm/puttosleep.src
   trunk/096/pkg/mobiles/brainAI/commands/gm/resetnpcs.src
   trunk/096/pkg/mobiles/brainAI/commands/test/cfgtest.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/combat.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/cycle.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/disengaged.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/doubleClick.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/enteredArea.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/goneCriminal.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/itemGiven.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/leftArea.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/listen.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/lookAround.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/restart.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/shouldWatch.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/sleep.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/virtual.src
   trunk/096/pkg/mobiles/brainAI/include/npcCommands.inc
   trunk/096/pkg/mobiles/brainAI/include/npcInit.inc
   trunk/096/pkg/mobiles/brainAI/include/npcNerves.inc
   trunk/096/pkg/mobiles/brainAI/include/npcSettings.inc
   trunk/096/pkg/mobiles/brainAI/include/npcWatchList.inc
   trunk/096/pkg/mobiles/brainAI/npcdesc.cfg
Log:
Final name for the damned thing.!

Copied: trunk/096/pkg/mobiles/brainAI (from rev 239, trunk/096/pkg/mobiles/AIBrain)

Modified: trunk/096/pkg/mobiles/brainAI/brain.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/brain.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/brain.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -18,17 +18,17 @@
 use polsys;
 
 include "include/sysEvent";
-include ":ai_brain:include/braincore/error";
-include ":ai_brain:include/braincore/cycleScript";
-include ":ai_brain:include/braincore/eventProcessor";
-include ":ai_brain:include/braincore/movement";
-include ":ai_brain:include/braincore/setup";
-include ":ai_brain:include/braincore/sleep";
-include ":ai_brain:include/eventid";
-include ":ai_brain:include/npcCommands";
-include ":ai_brain:include/npcNerves";
-include ":ai_brain:include/npcSettings";
-include ":ai_brain:include/npcUtil";
+include ":brainAI:include/braincore/error";
+include ":brainAI:include/braincore/cycleScript";
+include ":brainAI:include/braincore/eventProcessor";
+include ":brainAI:include/braincore/movement";
+include ":brainAI:include/braincore/setup";
+include ":brainAI:include/braincore/sleep";
+include ":brainAI:include/eventid";
+include ":brainAI:include/npcCommands";
+include ":brainAI:include/npcNerves";
+include ":brainAI:include/npcSettings";
+include ":brainAI:include/npcUtil";
 
 //
 // * Global variables

Modified: trunk/096/pkg/mobiles/brainAI/commands/gm/createnpc.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/commands/gm/createnpc.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/commands/gm/createnpc.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -2,7 +2,7 @@
 use os;
 use polsys;
 
-include ":ai_brain:include/npcUtil";
+include ":brainAI:include/npcUtil";
 include ":datafile:include/datafile";
 include ":gumps:include/gumps";
 include ":gumps:include/gumps_ex";
@@ -10,7 +10,7 @@
 const UNCACHE_BTN	:= 0xF000000;
 const DEFAULT_CATEGORY	:= "None";
 
-var g_datafile := DFOpenDataFile(":ai_brain:createnpc", DF_CREATE);
+var g_datafile := DFOpenDataFile(":brainAI:createnpc", DF_CREATE);
 
 program command_CreateNPC(who, template)
 	if ( !template )

Modified: trunk/096/pkg/mobiles/brainAI/commands/gm/npcsleep.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/commands/gm/npcsleep.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/commands/gm/npcsleep.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -4,7 +4,7 @@
 use polsys;
 
 include ":gumps:include/requestgump";
-include ":ai_brain:include/npcCommands";
+include ":brainAI:include/npcCommands";
 
 program PutEveryNPCToSleep(who)
 	var realm_name := RequestGump(who, "Enter the realm name to put npcs to sleep on.", "", who.realm);

Modified: trunk/096/pkg/mobiles/brainAI/commands/gm/puttosleep.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/commands/gm/puttosleep.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/commands/gm/puttosleep.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -2,7 +2,7 @@
 use uo;
 use os;
 
-include ":ai_brain:npcCommands";
+include ":brainAI:npcCommands";
 include "include/messages";
 include "include/localization";
 

Modified: trunk/096/pkg/mobiles/brainAI/commands/gm/resetnpcs.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/commands/gm/resetnpcs.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/commands/gm/resetnpcs.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -3,7 +3,7 @@
 use os;
 use polsys;
 
-include ":ai_brain:include/npcCommands";
+include ":brainAI:include/npcCommands";
 include ":gumps:include/requestgump";
 
 program ResetAllNPCs(who)

Modified: trunk/096/pkg/mobiles/brainAI/commands/test/cfgtest.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/commands/test/cfgtest.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/commands/test/cfgtest.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -2,8 +2,8 @@
 use os;
 use cfgfile;
 
-include ":ai_brain:include/npcSettings";
-include ":ai_brain:include/npcUtil";
+include ":brainAI:include/npcSettings";
+include ":brainAI:include/npcUtil";
 
 unload_scripts("");
 

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/combat.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/complete/testnpc/combat.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/combat.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -1,8 +1,8 @@
 use uo;
 use os;
 
-include ":ai_brain:include/npcNerves";
-include ":ai_brain:include/npcCommands";
+include ":brainAI:include/npcNerves";
+include ":brainAI:include/npcCommands";
 include "include/attributes";
 
 program BrainNerve(params)

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/cycle.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/complete/testnpc/cycle.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/cycle.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -1,8 +1,8 @@
 use uo;
 use os;
 
-include ":ai_brain:include/npcNerves";
-include ":ai_brain:include/npcCommands";
+include ":brainAI:include/npcNerves";
+include ":brainAI:include/npcCommands";
 
 program BrainCriticalScript(params)
 	//var npc		:= params[1];

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/disengaged.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/complete/testnpc/disengaged.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/disengaged.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -1,8 +1,8 @@
 use uo;
 use os;
 
-include ":ai_brain:include/npcNerves";
-include ":ai_brain:include/npcCommands";
+include ":brainAI:include/npcNerves";
+include ":brainAI:include/npcCommands";
 
 program BrainNerve(params)
 	var npc		:= params[1];

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/doubleClick.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/complete/testnpc/doubleClick.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/doubleClick.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -1,8 +1,8 @@
 use uo;
 use os;
 
-include ":ai_brain:include/npcNerves";
-include ":ai_brain:include/npcCommands";
+include ":brainAI:include/npcNerves";
+include ":brainAI:include/npcCommands";
 
 program BrainNerve(params)
 	var npc		:= params[1];

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/enteredArea.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/complete/testnpc/enteredArea.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/enteredArea.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -1,9 +1,9 @@
 use uo;
 use os;
 
-include ":ai_brain:include/npcNerves";
-include ":ai_brain:include/npcCommands";
-include ":ai_brain:include/npcWatchList";
+include ":brainAI:include/npcNerves";
+include ":brainAI:include/npcCommands";
+include ":brainAI:include/npcWatchList";
 
 program BrainNerve(params)
 	var npc		:= params[1];

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/goneCriminal.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/complete/testnpc/goneCriminal.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/goneCriminal.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -1,8 +1,8 @@
 use uo;
 use os;
 
-include ":ai_brain:include/npcNerves";
-include ":ai_brain:include/npcCommands";
+include ":brainAI:include/npcNerves";
+include ":brainAI:include/npcCommands";
 
 program BrainNerve(params)
 	var npc		:= params[1];

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/itemGiven.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/complete/testnpc/itemGiven.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/itemGiven.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -1,8 +1,8 @@
 use uo;
 use os;
 
-include ":ai_brain:include/npcNerves";
-include ":ai_brain:include/npcCommands";
+include ":brainAI:include/npcNerves";
+include ":brainAI:include/npcCommands";
 
 program BrainNerve(params)
 	var npc		:= params[1];

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/leftArea.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/complete/testnpc/leftArea.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/leftArea.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -1,9 +1,9 @@
 use uo;
 use os;
 
-include ":ai_brain:include/npcNerves";
-include ":ai_brain:include/npcCommands";
-include ":ai_brain:include/npcWatchList";
+include ":brainAI:include/npcNerves";
+include ":brainAI:include/npcCommands";
+include ":brainAI:include/npcWatchList";
 
 program BrainNerve(params)
 	var npc		:= params[1];

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/listen.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/complete/testnpc/listen.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/listen.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -1,9 +1,9 @@
 use uo;
 use os;
 
-include ":ai_brain:include/eventid";
-include ":ai_brain:include/npcNerves";
-include ":ai_brain:include/npcCommands";
+include ":brainAI:include/eventid";
+include ":brainAI:include/npcNerves";
+include ":brainAI:include/npcCommands";
 
 program BrainNerve(params)
 	var npc		:= params[1];

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/lookAround.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/complete/testnpc/lookAround.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/lookAround.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -2,9 +2,9 @@
 use os;
 use util;
 
-include ":ai_brain:include/npcNerves";
-include ":ai_brain:include/npcCommands";
-include ":ai_brain:include/npcWatchList";
+include ":brainAI:include/npcNerves";
+include ":brainAI:include/npcCommands";
+include ":brainAI:include/npcWatchList";
 
 program BrainNerve(params)
 	var npc		:= params[1];

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/restart.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/complete/testnpc/restart.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/restart.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -1,8 +1,8 @@
 use uo;
 use os;
 
-include ":ai_brain:include/npcNerves";
-include ":ai_brain:include/npcCommands";
+include ":brainAI:include/npcNerves";
+include ":brainAI:include/npcCommands";
 
 program BrainNerve(params)
 	var npc		:= params[1];

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/shouldWatch.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/complete/testnpc/shouldWatch.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/shouldWatch.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -2,9 +2,9 @@
 use os;
 use util;
 
-include ":ai_brain:include/npcNerves";
-include ":ai_brain:include/npcCommands";
-include ":ai_brain:include/npcWatchList";
+include ":brainAI:include/npcNerves";
+include ":brainAI:include/npcCommands";
+include ":brainAI:include/npcWatchList";
 
 program BrainCriticalScript(params)
 	//var npc := params[1];

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/sleep.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/complete/testnpc/sleep.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/sleep.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -1,8 +1,8 @@
 use uo;
 use os;
 
-include ":ai_brain:include/npcNerves";
-include ":ai_brain:include/npcCommands";
+include ":brainAI:include/npcNerves";
+include ":brainAI:include/npcCommands";
 
 program BrainNerve(params)
 	var npc		:= params[1];

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/virtual.src
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/complete/testnpc/virtual.src	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/virtual.src	2005-09-25 14:31:42 UTC (rev 240)
@@ -1,8 +1,8 @@
 use uo;
 use os;
 
-include ":ai_brain:include/npcNerves";
-include ":ai_brain:include/npcCommands";
+include ":brainAI:include/npcNerves";
+include ":brainAI:include/npcCommands";
 
 program BrainNerve(params)
 	var npc		:= params[1];

Modified: trunk/096/pkg/mobiles/brainAI/include/npcCommands.inc
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/include/npcCommands.inc	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/include/npcCommands.inc	2005-09-25 14:31:42 UTC (rev 240)
@@ -12,7 +12,7 @@
 use os;
 
 include "include/sysEvent";
-include ":ai_brain:include/eventid";
+include ":brainAI:include/eventid";
 
 /////////////////////////////////////////////////////////////////
 // * Function List *

Modified: trunk/096/pkg/mobiles/brainAI/include/npcInit.inc
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/include/npcInit.inc	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/include/npcInit.inc	2005-09-25 14:31:42 UTC (rev 240)
@@ -12,8 +12,8 @@
 use util;
 use cfgfile;
 
-include ":ai_brain:include/npcUtil";
-include ":ai_brain:include/npcError";
+include ":brainAI:include/npcUtil";
+include ":brainAI:include/npcError";
 
 /*
  * NPC_GiveBackPack(mobile)

Modified: trunk/096/pkg/mobiles/brainAI/include/npcNerves.inc
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/include/npcNerves.inc	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/include/npcNerves.inc	2005-09-25 14:31:42 UTC (rev 240)
@@ -11,7 +11,7 @@
 use uo;
 use os;
 
-include ":ai_brain:include/npcError";
+include ":brainAI:include/npcError";
 
 /////////////////////////////////////////////////////////////////
 // * Function List *

Modified: trunk/096/pkg/mobiles/brainAI/include/npcSettings.inc
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/include/npcSettings.inc	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/include/npcSettings.inc	2005-09-25 14:31:42 UTC (rev 240)
@@ -12,7 +12,7 @@
 use os;
 use cfgfile;
 
-include ":ai_brain:include/npcUtil";
+include ":brainAI:include/npcUtil";
 
 /*
  * NPC_DefaultSettings(settings:=0)

Modified: trunk/096/pkg/mobiles/brainAI/include/npcWatchList.inc
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/include/npcWatchList.inc	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/include/npcWatchList.inc	2005-09-25 14:31:42 UTC (rev 240)
@@ -11,7 +11,7 @@
 use uo;
 use os;
 
-include ":ai_brain:include/npcError";
+include ":brainAI:include/npcError";
 
 /////////////////////////////////////////////////////////////////
 // * Function List *

Modified: trunk/096/pkg/mobiles/brainAI/npcdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/AIBrain/npcdesc.cfg	2005-09-25 14:26:24 UTC (rev 239)
+++ trunk/096/pkg/mobiles/brainAI/npcdesc.cfg	2005-09-25 14:31:42 UTC (rev 240)
@@ -1,7 +1,7 @@
 NPCTemplate TestNPC
 {
 	Name		<Test NPC>
-	Script		:ai_brain:brain
+	Script		:brainAI:brain
 	ObjType		0x190
 	Color		0
 	TrueColor	0



From austin at berlios.de  Sun Sep 25 16:32:33 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 16:32:33 +0200
Subject: [Poldistro-svn] r241 - trunk/096/pkg/mobiles/brainAI
Message-ID: <200509251432.j8PEWXpi017165@sheep.berlios.de>

Author: austin
Date: 2005-09-25 16:32:33 +0200 (Sun, 25 Sep 2005)
New Revision: 241

Modified:
   trunk/096/pkg/mobiles/brainAI/pkg.cfg
Log:


Modified: trunk/096/pkg/mobiles/brainAI/pkg.cfg
===================================================================
--- trunk/096/pkg/mobiles/brainAI/pkg.cfg	2005-09-25 14:31:42 UTC (rev 240)
+++ trunk/096/pkg/mobiles/brainAI/pkg.cfg	2005-09-25 14:32:33 UTC (rev 241)
@@ -1,5 +1,5 @@
 Enabled		1
-Name		AIBrain
+Name		brainAI
 
 Version		5.0
 



From austin at berlios.de  Sun Sep 25 16:38:37 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 16:38:37 +0200
Subject: [Poldistro-svn] r242 - trunk/096/pkg/mobiles/brainAI/include/braincore
Message-ID: <200509251438.j8PEcbGB017949@sheep.berlios.de>

Author: austin
Date: 2005-09-25 16:38:36 +0200 (Sun, 25 Sep 2005)
New Revision: 242

Modified:
   trunk/096/pkg/mobiles/brainAI/include/braincore/sleep.inc
Log:
Will make it so the npc cant go to sleep is the lookaround nerve is running.

Modified: trunk/096/pkg/mobiles/brainAI/include/braincore/sleep.inc
===================================================================
--- trunk/096/pkg/mobiles/brainAI/include/braincore/sleep.inc	2005-09-25 14:32:33 UTC (rev 241)
+++ trunk/096/pkg/mobiles/brainAI/include/braincore/sleep.inc	2005-09-25 14:38:36 UTC (rev 242)
@@ -76,13 +76,16 @@
  */
 function ShouldSleep()
 	if ( sleep_mode )
-		//Already asleep
+		// Already asleep.
 		return 0;
 	elseif ( Events_Waiting() )
-		//Events are waiting to process.
+		// Events are waiting to process.
 		return 0;
+	elseif ( GetNerveProcess(npc, "LookAround") )
+		// Look around script is currently running.
+		return 0;
 	elseif ( idle_ticks < g_settings["IdleTicks"] )
-		//Not enough idle ticks have gone by yet.
+		// Not enough idle ticks have gone by yet.
 		return 0;
 	endif
 	



From austin at berlios.de  Sun Sep 25 16:42:28 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 16:42:28 +0200
Subject: [Poldistro-svn] r243 - trunk/096/pkg/systems/attributes/hooks
Message-ID: <200509251442.j8PEgSuc018806@sheep.berlios.de>

Author: austin
Date: 2005-09-25 16:42:28 +0200 (Sun, 25 Sep 2005)
New Revision: 243

Modified:
   trunk/096/pkg/systems/attributes/hooks/vitalInit.src
Log:
Adjusted for the  brainAI name change

Modified: trunk/096/pkg/systems/attributes/hooks/vitalInit.src
===================================================================
--- trunk/096/pkg/systems/attributes/hooks/vitalInit.src	2005-09-25 14:38:36 UTC (rev 242)
+++ trunk/096/pkg/systems/attributes/hooks/vitalInit.src	2005-09-25 14:42:28 UTC (rev 243)
@@ -11,9 +11,7 @@
 use util;
 
 include ":attributes:include/attributes";
-include ":attributes:include/settings";
-include ":ai_brain:include/npcUtil";
-include ":config:include/config";
+include ":brainAI:include/npcUtil";
 
 program Install()
 	print("INSTALLED: Exported Vital - RegenRate and MaxValue functions... ok.");



From austin at berlios.de  Sun Sep 25 16:50:23 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 16:50:23 +0200
Subject: [Poldistro-svn] r244 - in trunk/096/pkg/mobiles/brainAI: complete/testnpc include
Message-ID: <200509251450.j8PEoNea019503@sheep.berlios.de>

Author: austin
Date: 2005-09-25 16:50:23 +0200 (Sun, 25 Sep 2005)
New Revision: 244

Modified:
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/enteredArea.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/lookAround.src
   trunk/096/pkg/mobiles/brainAI/include/eventid.inc
Log:
Better handling of LookAround scripts.

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/enteredArea.src
===================================================================
--- trunk/096/pkg/mobiles/brainAI/complete/testnpc/enteredArea.src	2005-09-25 14:42:28 UTC (rev 243)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/enteredArea.src	2005-09-25 14:50:23 UTC (rev 244)
@@ -39,6 +39,12 @@
 			AI_WakeUp(npc);
 			AI_Speak(npc, "Ive added you to my watch list "+source.name);
 			
+			if ( scripts["LookAround"] )
+				if ( !GetNerveProcess(npc, "LookAround") )
+					AI_WakeUp(npc);
+				endif
+			endif
+			
 			return 1;
 		endif
 	endif

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/lookAround.src
===================================================================
--- trunk/096/pkg/mobiles/brainAI/complete/testnpc/lookAround.src	2005-09-25 14:42:28 UTC (rev 243)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/lookAround.src	2005-09-25 14:50:23 UTC (rev 244)
@@ -16,9 +16,9 @@
 	while ( npc )
 		if ( !npc.opponent )
 			if ( NPC_LoadWatchList(npc).size() < 1 )
-				AI_Sleep(npc);
+				// No need to look around any longer. We're all alone :(
+				return;
 			else
-				AI_WakeUp(npc);
 				FindOpponent(npc, settings, scripts);
 			endif
 		endif

Modified: trunk/096/pkg/mobiles/brainAI/include/eventid.inc
===================================================================
--- trunk/096/pkg/mobiles/brainAI/include/eventid.inc	2005-09-25 14:42:28 UTC (rev 243)
+++ trunk/096/pkg/mobiles/brainAI/include/eventid.inc	2005-09-25 14:50:23 UTC (rev 244)
@@ -11,60 +11,60 @@
 //
 // * Custom brain AI event IDs
 //
-const NPCEVENT_MOVE				:= 0xA00003;	// Has NEMOVE_* helper constants
-const NPCEVENT_OPPONENT				:= 0xA00004;	// Set New Opponent (.source)
-const NPCEVENT_SPEAK				:= 0xA00005;	// Speak (.text)
-const NPCEVENT_TURN				:= 0xA00006;	// Turn towards or away from an object
-const NPCEVENT_WARMODE				:= 0xA00007;	// Set WarMode state (.value=0|1)
-const NPCEVENT_ATTACK				:= 0xA0000A;	// Tell the npc to attack something
-const NPCEVENT_MOVE_XY				:= 0xA0000B;	// Tell the NPC to move to coordinates
-const NPCEVENT_TURN_XY				:= 0xA0000C;	// Tell the NPC to turn towards coordinates
-const NPCEVENT_WANDER				:= 0xA0000D;	// Tell the npc to wander
+CONST NPCEVENT_MOVE				:= 0xA00003;	// Has NEMOVE_* helper CONSTants
+CONST NPCEVENT_OPPONENT				:= 0xA00004;	// Set New Opponent (.source)
+CONST NPCEVENT_SPEAK				:= 0xA00005;	// Speak (.text)
+CONST NPCEVENT_TURN				:= 0xA00006;	// Turn towards or away from an object
+CONST NPCEVENT_WARMODE				:= 0xA00007;	// Set WarMode state (.value=0|1)
+CONST NPCEVENT_ATTACK				:= 0xA0000A;	// Tell the npc to attack something
+CONST NPCEVENT_MOVE_XY				:= 0xA0000B;	// Tell the NPC to move to coordinates
+CONST NPCEVENT_TURN_XY				:= 0xA0000C;	// Tell the NPC to turn towards coordinates
+CONST NPCEVENT_WANDER				:= 0xA0000D;	// Tell the npc to wander
 
-const NPCEVENT_ENDNERVE				:= 0xA0000F;	// Tell the brain to stop a nerve.
-const NPCEVENT_STARTNERVE			:= 0xA00010;	// Tell the brain to start a nerve.
-const NPCEVENT_DONE				:= 0xA00011;	// Brain tells a nerve that its instruction is done.
+CONST NPCEVENT_ENDNERVE				:= 0xA0000F;	// Tell the brain to stop a nerve.
+CONST NPCEVENT_STARTNERVE			:= 0xA00010;	// Tell the brain to start a nerve.
+CONST NPCEVENT_DONE				:= 0xA00011;	// Brain tells a nerve that its instruction is done.
 
-const NPCEVENT_SLEEP				:= 0xA00012;	// Tell the brain to go to sleep.
-const NPCEVENT_WAKEUP				:= 0xA00013;	// Tell the brain to wake up.
+CONST NPCEVENT_SLEEP				:= 0xA00012;	// Tell the brain to go to sleep.
+CONST NPCEVENT_WAKEUP				:= 0xA00013;	// Tell the brain to wake up.
 
-const NPCEVENT_FWDNERVE				:= 0xA00014;	// Tell the brain to forward an event to a nerve.
+CONST NPCEVENT_FWDNERVE				:= 0xA00014;	// Tell the brain to forward an event to a nerve.
 
 //
-// * NPCEVENT_MOVE helper constants (.source = object)
+// * NPCEVENT_MOVE helper CONSTants (.source = object)
 //
-const NEMOVE_WALK				:= 1;	// .speed (default)
-const NEMOVE_RUN				:= 2;	// .speed
-const NEMOVE_TOWARD 				:= 1;	// .direction (default)
-const NEMOVE_AWAY				:= 2;	// .direction
+CONST NEMOVE_WALK				:= 1;	// .speed (default)
+CONST NEMOVE_RUN				:= 2;	// .speed
+CONST NEMOVE_TOWARD 				:= 1;	// .direction (default)
+CONST NEMOVE_AWAY				:= 2;	// .direction
 
 //
-// * NE_TURN helper constants
+// * NE_TURN helper CONSTants
 //
-const NETURN_TOWARD				:= 1;
-const NETURN_AWAY				:= 2;
+CONST NETURN_TOWARD				:= 1;
+CONST NETURN_AWAY				:= 2;
 
 //
 // * AWAKEN CONSTANTS
 // 
-const WAKEUP					:= 0;
-const NOWAKE					:= 1;
+CONST WAKEUP					:= 0;
+CONST NOWAKE					:= 1;
 
 //
 // * CLEAR THOUGHT CONSTANTS
 //
-const CLR_BRAIN					:= 1;
-const CLR_NERVE					:= 2;
-const CLR_BOTH					:= 3;
+CONST CLR_BRAIN					:= 1;
+CONST CLR_NERVE					:= 2;
+CONST CLR_BOTH					:= 3;
 
 //
-//* NPC.EM constants (only brain can access npc.em)
+//* NPC.EM CONSTants (only brain can access npc.em)
 //
-// Constants for texttype flags in the AI_Speak() function
-const SPEAK_TEXTTYPE_DEFAULT			:= "default";
-const SPEAK_TEXTTYPE_WHISPER			:= "whisper";
-const SPEAK_TEXTTYPE_YELL			:= "yell";
+// CONSTants for texttype flags in the AI_Speak() function
+CONST SPEAK_TEXTTYPE_DEFAULT			:= "default";
+CONST SPEAK_TEXTTYPE_WHISPER			:= "whisper";
+CONST SPEAK_TEXTTYPE_YELL			:= "yell";
 
-// Constants for doevent flag in AI_Speak() function
-const SPEAK_DOEVENT_DISABLE			:= 0x0;
-const SPEAK_DOEVENT_ENABLE			:= 0x1;
+// CONSTants for doevent flag in AI_Speak() function
+CONST SPEAK_DOEVENT_DISABLE			:= 0x0;
+CONST SPEAK_DOEVENT_ENABLE			:= 0x1;



From austin at berlios.de  Sun Sep 25 17:46:59 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 17:46:59 +0200
Subject: [Poldistro-svn] r245 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509251546.j8PFkxaA023781@sheep.berlios.de>

Author: austin
Date: 2005-09-25 17:46:59 +0200 (Sun, 25 Sep 2005)
New Revision: 245

Modified:
   trunk/096/pkg/systems/attributes/include/attributeConstants.inc
Log:
Fixed vitals enum

Modified: trunk/096/pkg/systems/attributes/include/attributeConstants.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributeConstants.inc	2005-09-25 14:50:23 UTC (rev 244)
+++ trunk/096/pkg/systems/attributes/include/attributeConstants.inc	2005-09-25 15:46:59 UTC (rev 245)
@@ -1,4 +1,4 @@
-/* $Id: attributes.inc,v 1.5 2004/05/02 12:20:56 melanius Exp $
+/* $Id$
  *
  * Purpose
  * Provide various functions and constants for the attribute system.
@@ -7,9 +7,9 @@
 use uo;
 
 enum VITALS
-	VITAL_HITS         := "HitsRegeneration",
-	VITAL_MANA         := "ManaRegeneration",
-	VITAL_STAMINA      := "StaminaRegeneration"
+	VITAL_HITS         := "Hits",
+	VITAL_MANA         := "Mana",
+	VITAL_STAMINA      := "Stamina"
 endenum
 
 enum ATTRIBUTE_STATS
@@ -27,7 +27,7 @@
 	ATTRIBUTE_PARRY                     := "Parry",
 	ATTRIBUTE_BEGGING                   := "Begging",
 	ATTRIBUTE_BLACKSMITHY               := "Blacksmithy",
-	ATTRIBUTE_BOWCRAP_T_FLETCHING        := "BowcrAP_tFletching",
+	ATTRIBUTE_BOWCRAP_T_FLETCHING       := "BowcraftFletching",
 	ATTRIBUTE_PEACEMAKING               := "Peacemaking",
 	ATTRIBUTE_CAMPING                   := "Camping",
 	ATTRIBUTE_CARPENTRY                 := "Carpentry",



From austin at berlios.de  Sun Sep 25 18:01:46 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 18:01:46 +0200
Subject: [Poldistro-svn] r246 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509251601.j8PG1k5a025525@sheep.berlios.de>

Author: austin
Date: 2005-09-25 18:01:46 +0200 (Sun, 25 Sep 2005)
New Revision: 246

Modified:
   trunk/096/pkg/systems/attributes/include/vitals.inc
Log:
Added AP_ConsumeVital()

Modified: trunk/096/pkg/systems/attributes/include/vitals.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-25 15:46:59 UTC (rev 245)
+++ trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-25 16:01:46 UTC (rev 246)
@@ -149,6 +149,34 @@
 endfunction
 
 /*
+ * AP_ConsumeVital(mobile, vital_name, points)
+ *
+ * Purpose
+ * Attempts to remove points from a vital.
+ *
+ * Parameters
+ * mobile:	Mobile reference to consume the vital on.
+ * vital_name:	Name of the vital to consume.
+ * points:	Number of points to attempt to consume.
+ *
+ * Return value
+ * Returns 1 on success
+ *
+ */
+function AP_ConsumeVital(mobile, vital_name, points)
+	points := CDbl(points);
+	var cur_amount := GetVital(mobile, vital_name);
+	
+	if ( points > cur_amount )
+		return error{"errortext":="Insufficient points - unable to consume."};
+	else
+		cur_amount := cur_amount-points;
+		SetVital(mobile, vital_name, cur_amount);
+		return 1;
+	endif
+endfunction
+
+/*
  * AP_RefreshVitals(mobile)
  *
  * Purpose



From austin at berlios.de  Sun Sep 25 18:12:53 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 18:12:53 +0200
Subject: [Poldistro-svn] r247 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509251612.j8PGCrLP026382@sheep.berlios.de>

Author: austin
Date: 2005-09-25 18:12:53 +0200 (Sun, 25 Sep 2005)
New Revision: 247

Modified:
   trunk/096/pkg/systems/attributes/include/vitals.inc
Log:
Fixed for Muad :-P

Modified: trunk/096/pkg/systems/attributes/include/vitals.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-25 16:01:46 UTC (rev 246)
+++ trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-25 16:12:53 UTC (rev 247)
@@ -165,13 +165,13 @@
  */
 function AP_ConsumeVital(mobile, vital_name, points)
 	points := CDbl(points);
-	var cur_amount := GetVital(mobile, vital_name);
+	var cur_amount := AP_GetVital(mobile, vital_name);
 	
 	if ( points > cur_amount )
 		return error{"errortext":="Insufficient points - unable to consume."};
 	else
 		cur_amount := cur_amount-points;
-		SetVital(mobile, vital_name, cur_amount);
+		AP_SetVital(mobile, vital_name, cur_amount);
 		return 1;
 	endif
 endfunction



From austin at berlios.de  Sun Sep 25 18:46:09 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 18:46:09 +0200
Subject: [Poldistro-svn] r252 - trunk/096/pkg/mobiles/brainAI/config
Message-ID: <200509251646.j8PGk90j015617@sheep.berlios.de>

Author: austin
Date: 2005-09-25 18:46:07 +0200 (Sun, 25 Sep 2005)
New Revision: 252

Added:
   trunk/096/pkg/mobiles/brainAI/config/equipGroups.cfg
   trunk/096/pkg/mobiles/brainAI/config/equipIndex.cfg
Log:
Config files to support random yet stylish npc equipment.

Added: trunk/096/pkg/mobiles/brainAI/config/equipGroups.cfg
===================================================================
--- trunk/096/pkg/mobiles/brainAI/config/equipGroups.cfg	2005-09-25 16:37:12 UTC (rev 251)
+++ trunk/096/pkg/mobiles/brainAI/config/equipGroups.cfg	2005-09-25 16:46:07 UTC (rev 252)
@@ -0,0 +1,78 @@
+Elem	Feet
+{
+	Item	sandals
+	Item	shoes
+	Item	kneeboots
+	Item	thighboots
+}
+
+Elem	Head
+{
+	Item	Bandana
+	Item	SkullCap
+	Item	FloppyHat
+	Item	WideBrimHat
+	Item	Cap
+	Item	TallStrawHat
+	Item	StrawHat
+	Item	FeatheredHat
+	Item	TricorneHat
+
+	Female	Bonnet
+}
+
+Elem	Shirt
+{
+	Item	Shirt
+	Item	FancyShirt
+}
+
+Elem	Pants
+{
+	Item	ShortPants
+	Item	LongPants
+}
+
+Elem	ArmorChest_1
+{
+	Item	LeatherTunic
+	Item	StuddedTunic
+	Item	RingmailTunic
+}
+Elem	ArmorArms_1
+{
+	Item	LeatherSleeves
+	Item	StuddedSleeves
+	Item	RingmailSleeves
+}
+Elem	ArmorGloves_1
+{
+	Item	LeatherGloves
+	Item	StuddedGloves
+	Item	RingmailGloves
+}
+Elem	ArmorNeck_1
+{
+	Item	LeatherGorget
+	Item	StuddedGorget
+}
+Elem	ArmorLegs_1
+{
+	Item	LeatherLeggings
+	Item	StuddedLeggings
+	Item	RingmailLeggings
+}
+
+Elem	ForestGoblinFighter
+{
+	Item	WarAxe
+	Item	Bow
+	Item	ShortBow
+	Item	Club
+	Item	LargeBattleAxe
+	Item	TwoHandedAxe
+	Item	BattleAxe
+	Item	Axe
+	Item	Spear
+	Item	WarFork
+}
\ No newline at end of file

Added: trunk/096/pkg/mobiles/brainAI/config/equipIndex.cfg
===================================================================
--- trunk/096/pkg/mobiles/brainAI/config/equipIndex.cfg	2005-09-25 16:37:12 UTC (rev 251)
+++ trunk/096/pkg/mobiles/brainAI/config/equipIndex.cfg	2005-09-25 16:46:07 UTC (rev 252)
@@ -0,0 +1,8 @@
+
+Elem	Villager_1
+{
+	Equip	Head	10
+	Equip	Shirt	100
+	Equip	Pants	100
+	Equip	Feet	100
+}



From austin at berlios.de  Sun Sep 25 23:22:51 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 23:22:51 +0200
Subject: [Poldistro-svn] r253 - trunk/096/pkg/mobiles/brainAI/include
Message-ID: <200509252122.j8PLMpKT003127@sheep.berlios.de>

Author: austin
Date: 2005-09-25 23:22:50 +0200 (Sun, 25 Sep 2005)
New Revision: 253

Modified:
   trunk/096/pkg/mobiles/brainAI/include/npcInit.inc
Log:
Support for random equipment setups.

Modified: trunk/096/pkg/mobiles/brainAI/include/npcInit.inc
===================================================================
--- trunk/096/pkg/mobiles/brainAI/include/npcInit.inc	2005-09-25 16:46:07 UTC (rev 252)
+++ trunk/096/pkg/mobiles/brainAI/include/npcInit.inc	2005-09-25 21:22:50 UTC (rev 253)
@@ -15,8 +15,32 @@
 include ":brainAI:include/npcUtil";
 include ":brainAI:include/npcError";
 
+
+/////////////////////////////////////////////////////////////////
+// * Function List *
+//
+// NPC_SetupAmmo(mobile)
+// NPC_SetupBackPack(mobile)
+// NPC_SetupEquipment(mobile, elem_name:=0)
+// NPC_SetupName(mobile, name_elem:=0)
+// 
+/////////////////////////////////////////////////////////////////
+// * Internal/Private Function List *
+// 
+/////////////////////////////////////////////////////////////////
+// * Global Variables *
+//
+// Constants for NPC_SetupRandomEquipment()
+CONST EQUIP_NOGENDER	:= 0x0;	// Items suited for both genders
+CONST EQUIP_MALE	:= 0x1; // Use male-only items (do any exist?)
+CONST EQUIP_FEMALE	:= 0x2; // Use female-only items
+const EQUIP_BOTHGENDER	:= 0x3; // Cross-dresser
+// 
+/////////////////////////////////////////////////////////////////
+
+
 /*
- * NPC_GiveBackPack(mobile)
+ * NPC_SetupBackPack(mobile)
  *
  * Purpose
  * Creates a backpack and places it on an npc. If it can't equip it, it removes it.
@@ -28,7 +52,7 @@
  * Returns an item reference on success or if there already is one.
  *
  */
-function NPC_GiveBackPack(mobile)
+function NPC_SetupBackPack(mobile)
 	if ( !mobile.backpack )
 		var backpack := CreateItemAtLocation(mobile.x, mobile.y, mobile.z, "BackPack", 1);
 		var result := EquipItem(mobile, backpack);
@@ -61,7 +85,6 @@
 	
 	if ( npc_elem.MissileWeapon )
 		var weapon := CreateItemAtLocation(mobile.x, mobile.y, mobile.z, npc_elem.MissileWeapon, 1, mobile.realm);
-		weapon.newbie := 1;
 		if ( !EquipItem(mobile, weapon) )
 			DestroyItem(weapon);
 		endif
@@ -73,8 +96,8 @@
 			if ( !ammo )
 				return ammo; // Will return an error with .errortext
 			endif
-			
 			ammo.newbie := 1;
+						
 			return 1;
 		endif
 	else
@@ -95,7 +118,7 @@
  * Parameters
  * mobile:	The mobile to place equipment onto
  * elem_name:	Name of the equipment template to use.
- *		If no name is set, it will use the EquipTemplate line in the npc's template.
+ *		If no name is set, it will use the 'EquipTemplate' line in the npc's template.
  *
  * Return value
  * Returns 1 or error
@@ -110,7 +133,7 @@
 	endif
 	
 	if ( !elem_name )
-		return NPC_GiveBackPack(mobile);
+		return NPC_SetupBackPack(mobile);
 	elseif ( !equip_cfg[elem_name] )
 		var errmsg := error{"errortext":="Error::NPC_SetupEquipment() - There is no elem ["+elem_name+"] in '::equip.cfg'"};
 		PrintTextAbove(mobile, errmsg);
@@ -121,8 +144,74 @@
 	
 	return 0;
 endfunction
+
+/* 
+ * NPC_SetupRandomEquipment(mobile, elem_name)
+ *
+ * Purpose
+ * Equips an NPC randomy-yet-still-fashionably. 
+ *
+ * Parameters
+ * mobile:	The mobile to place equipment onto
+ * elem_name:	Name of the equipment template to use.
+ *		If no name is set, it will use the 'EquipTemplate' line in the npc's template.
+ * flags:	Flags to control which lines to use in equipGroups.cfg
+ *		EQUIP_NOGENDER		- 'Item' lines that work for both genders (this list is used with all flags).
+ *		EQUIP_MALE		- 'Male' lines for male-only equipment.
+ *		EQUIP_FEMALE		- 'Female' lines for female-only equipment.
+ *		EQUIP_BOTHGENDER	- Uses all entries to allow for cross dressing npcs.
+ *
+ * Return value
+ * Returns 1 or error
+ *
+ */
+function NPC_SetupRandomEquipment(mobile, elem_name:=0, flags:=EQUIP_NOGENDER)
+	var index_cfg := ReadConfigFile(":brainAI:config/equipIndex");
+	var group_cfg := ReadConfigFile(":brainAI:config/equipGroups");
+	if ( index_cfg.errortext )
+		return error{"errortext":="Error - Could not open equipIndex.cfg -> "+index_cfg.errortext};
+	elseif ( group_cfg.errortext )
+		return error{"errortext":="Error - Could not open equipGroups.cfg -> "+group_cfg.errortext};
+	elseif ( !elem_name )
+		var npc_elem := NPC_GetNPCConfig(mobile);
+		elem_name := npc_elem.EquipTemplate;
+	endif
+	var index_elem := index_cfg[elem_Name];
+	if ( !index_elem )
+		return error{"errortext":="Error - equipIndex.cfg elem ["+index_elem+"] does not exist."};
+	endif
 	
+	foreach entry in ( GetConfigStringDictionary(index_elem, "Equip") )
+		if ( RandomInt(100)+1 <= entry )
+			var group_elem := index_cfg[_entry_iter];
+			if ( !group_elem )
+				PrintTextAbove(mobile, "Error - equipGroups.cfg elem ["+group_elem+"] does not exist.");
+				continue;
+			endif
+			
+			var item_list := GetConfigStringArray(group_elem, "Item");
+			if ( flags & EQUIP_MALE )
+				item_list := GetConfigStringArray(group_elem, "Male");
+			endif
+			if ( flags & EQUIP_FEMALE )
+				item_list := GetConfigStringArray(group_elem, "Female");
+			endif
+			
+			var item := item_list[RandomDiceRoll(item_list.Size())+1];
+			item := CreateItemAtLocation(mobile.x, mobile.y, mobile.z, item, 1);
+			if ( item.errortext )
+				PrintTextAbove(mobile, "Unable to create ["+item+"] ->"+item.errortext);
+			elseif ( !EquipItem(mobile, item) )
+				PrintTextAbove(mobile, "Unable to equip - "+item.desc+" - destroying.");
+				DestroyItem(item);
+			endif
+		endif
+		sleepms(2);
+	endforeach
 	
+	return 1;
+endfunction
+
 /*
  * NPC_SetupName(mobile, name_elem)
  * 
@@ -138,7 +227,6 @@
  * Returns 1 or error
  *
  */
- 
 function NPC_SetupName(mobile, name_elem:=0)
 	if ( !mobile.name["<random>"] )
 		return 1;
@@ -155,13 +243,13 @@
 		var temp := error;
 		temp.+errortext := "There is no elem ["+name_elem+"] in NAMES.CFG";
 		
-		NPC_ErrorSysLog(moble, "Error::NPC_SetupName() - "+temp.errortext);
+		NPC_ErrorSysLog(mobile, "Error::NPC_SetupName() - "+temp.errortext);
 		PrintTextAbove(mobile, temp.errortext);
 		return temp;
 	endif
 	
 	var name_list := GetConfigStringArray(npc_names[name_elem], "Name");
-	if ( name_list.size() < 1 )
+	if ( name_list.Size() < 1 )
 		var temp := error{"errortext":="No names were found in the ["+name_elem+"] elem for names.cfg"};
 	
 		SysLog("Error::NPC_SetupName() - "+temp.errortext);
@@ -172,7 +260,7 @@
 	
 	var my_name := mobile.name;
 	while ( my_name["<random>"] )
-		var replacement := name_list[RandomInt(name_list.size())+1];
+		var replacement := name_list[RandomInt(name_list.Size())+1];
 		my_name["<random>"] := replacement;
 		sleepms(2);
 	endwhile
@@ -181,4 +269,3 @@
 	
 	return 1;
 endfunction
-



From austin at berlios.de  Sun Sep 25 23:24:56 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 23:24:56 +0200
Subject: [Poldistro-svn] r254 - trunk/096/pkg/mobiles/brainAI/config
Message-ID: <200509252124.j8PLOu6F003341@sheep.berlios.de>

Author: austin
Date: 2005-09-25 23:24:55 +0200 (Sun, 25 Sep 2005)
New Revision: 254

Modified:
   trunk/096/pkg/mobiles/brainAI/config/equipGroups.cfg
   trunk/096/pkg/mobiles/brainAI/config/equipIndex.cfg
Log:
Support for random equipment.

Modified: trunk/096/pkg/mobiles/brainAI/config/equipGroups.cfg
===================================================================
--- trunk/096/pkg/mobiles/brainAI/config/equipGroups.cfg	2005-09-25 21:22:50 UTC (rev 253)
+++ trunk/096/pkg/mobiles/brainAI/config/equipGroups.cfg	2005-09-25 21:24:55 UTC (rev 254)
@@ -1,3 +1,15 @@
+#
+# Elem	<Group Name>
+# {
+# 	Item	<Item Name>	- Unisex item
+#
+#	Male	<Item Name>	- Male-only item
+#
+#	Female	<Item Name>	- Female-only item
+# }
+#
+#
+
 Elem	Feet
 {
 	Item	sandals

Modified: trunk/096/pkg/mobiles/brainAI/config/equipIndex.cfg
===================================================================
--- trunk/096/pkg/mobiles/brainAI/config/equipIndex.cfg	2005-09-25 21:22:50 UTC (rev 253)
+++ trunk/096/pkg/mobiles/brainAI/config/equipIndex.cfg	2005-09-25 21:24:55 UTC (rev 254)
@@ -1,4 +1,12 @@
+#
+# Elem	<Index Name>
+# {
+# 	Equip	<Group Name>	<% chance of using>
+# }
+#
+#
 
+
 Elem	Villager_1
 {
 	Equip	Head	10



From austin at berlios.de  Sun Sep 25 23:26:18 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 23:26:18 +0200
Subject: [Poldistro-svn] r255 - trunk/096/pkg/mobiles/brainAI/include
Message-ID: <200509252126.j8PLQIu3003531@sheep.berlios.de>

Author: austin
Date: 2005-09-25 23:26:18 +0200 (Sun, 25 Sep 2005)
New Revision: 255

Modified:
   trunk/096/pkg/mobiles/brainAI/include/npcInit.inc
Log:


Modified: trunk/096/pkg/mobiles/brainAI/include/npcInit.inc
===================================================================
--- trunk/096/pkg/mobiles/brainAI/include/npcInit.inc	2005-09-25 21:24:55 UTC (rev 254)
+++ trunk/096/pkg/mobiles/brainAI/include/npcInit.inc	2005-09-25 21:26:18 UTC (rev 255)
@@ -1,7 +1,7 @@
 /*===============================================================
 * Current Version
 * NPCUTIL.INC - v1.0
-* Updated 9/4/2005 3:43PM
+* Updated 9/25/2005 2:26PM
 *
 * -- Revision v1.0 --
 * Austin:
@@ -18,11 +18,12 @@
 
 /////////////////////////////////////////////////////////////////
 // * Function List *
-//
+// 
 // NPC_SetupAmmo(mobile)
 // NPC_SetupBackPack(mobile)
 // NPC_SetupEquipment(mobile, elem_name:=0)
 // NPC_SetupName(mobile, name_elem:=0)
+// NPC_SetupRandomEquipment(mobile, elem_name:=0, flags:=EQUIP_NOGENDER)
 // 
 /////////////////////////////////////////////////////////////////
 // * Internal/Private Function List *



From austin at berlios.de  Sun Sep 25 23:31:04 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Sun, 25 Sep 2005 23:31:04 +0200
Subject: [Poldistro-svn] r256 - trunk/096/pkg/mobiles/brainAI/include
Message-ID: <200509252131.j8PLV4ZV003885@sheep.berlios.de>

Author: austin
Date: 2005-09-25 23:31:04 +0200 (Sun, 25 Sep 2005)
New Revision: 256

Modified:
   trunk/096/pkg/mobiles/brainAI/include/npcInit.inc
Log:
Few minor adjustments :)

Modified: trunk/096/pkg/mobiles/brainAI/include/npcInit.inc
===================================================================
--- trunk/096/pkg/mobiles/brainAI/include/npcInit.inc	2005-09-25 21:26:18 UTC (rev 255)
+++ trunk/096/pkg/mobiles/brainAI/include/npcInit.inc	2005-09-25 21:31:04 UTC (rev 256)
@@ -222,7 +222,7 @@
  * Parameters
  * mobile:	The mobile to do a name check on.
  * name_elem:	Name elem in names.cfg to use
- *		If no name is set, it will use the NameList line in the npc's template.
+ *		If no name is set, it will use the 'NameList' line in the npc's template.
  *
  * Return value
  * Returns 1 or error



From austin at berlios.de  Mon Sep 26 00:21:34 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Mon, 26 Sep 2005 00:21:34 +0200
Subject: [Poldistro-svn] r257 - trunk/096/pkg/mobiles/brainAI/config
Message-ID: <200509252221.j8PMLYmE008978@sheep.berlios.de>

Author: austin
Date: 2005-09-26 00:21:34 +0200 (Mon, 26 Sep 2005)
New Revision: 257

Modified:
   trunk/096/pkg/mobiles/brainAI/config/hatelist.cfg
Log:


Modified: trunk/096/pkg/mobiles/brainAI/config/hatelist.cfg
===================================================================
--- trunk/096/pkg/mobiles/brainAI/config/hatelist.cfg	2005-09-25 21:31:04 UTC (rev 256)
+++ trunk/096/pkg/mobiles/brainAI/config/hatelist.cfg	2005-09-25 22:21:34 UTC (rev 257)
@@ -1,10 +1,17 @@
 HateList Dog
 {
-	Hates	cat
-	Hates	bird
-	Hates	chicken
+	Hates	cats
+	Hates	birds
+	Hates	horses
+	Hates	cows
+	Hates	deer
 }
 
 HateList Wolf
 {
-	Hates	C
\ No newline at end of file
+	Hates	cats
+	Hates	birds
+	Hates	horses
+	Hates	cows
+	Hates	deer
+}



From austin at berlios.de  Mon Sep 26 05:04:26 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Mon, 26 Sep 2005 05:04:26 +0200
Subject: [Poldistro-svn] r258 - trunk/096/scripts/include
Message-ID: <200509260304.j8Q34Q7U005498@sheep.berlios.de>

Author: austin
Date: 2005-09-26 05:04:22 +0200 (Mon, 26 Sep 2005)
New Revision: 258

Removed:
   trunk/096/scripts/include/skillPoints.inc
Log:
Include file not needed / not used.

Deleted: trunk/096/scripts/include/skillPoints.inc
===================================================================
--- trunk/096/scripts/include/skillPoints.inc	2005-09-25 22:21:34 UTC (rev 257)
+++ trunk/096/scripts/include/skillPoints.inc	2005-09-26 03:04:22 UTC (rev 258)
@@ -1,15 +0,0 @@
-use cfgfile;
-
-function get_default_points(skillid)
-        var cfg := ReadConfigFile("skills");
-
-        var default_points := cfg[skillid].default_points;
-       
-        if (!default_points)
-                return 0;
-        else
-                return default_points;
-
-        endif
-
-endfunction
\ No newline at end of file



From panosl at berlios.de  Mon Sep 26 10:25:48 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Mon, 26 Sep 2005 10:25:48 +0200
Subject: [Poldistro-svn] r259 - in trunk/096/pkg: commands config config/config items/bulletinboard items/bulletinboard/config systems/attributes systems/bank systems/storage utils/control utils/datafile utils/gumps utils/saver utils/scheduler utils/scheduler/include utils/utilsdate
Message-ID: <200509260825.j8Q8Pml6019246@sheep.berlios.de>

Author: panosl
Date: 2005-09-26 10:25:45 +0200 (Mon, 26 Sep 2005)
New Revision: 259

Modified:
   trunk/096/pkg/commands/pkg.cfg
   trunk/096/pkg/config/config/icp.cfg
   trunk/096/pkg/config/pkg.cfg
   trunk/096/pkg/items/bulletinboard/config/itemdesc.cfg
   trunk/096/pkg/items/bulletinboard/destroyboard.src
   trunk/096/pkg/items/bulletinboard/itemdesc.cfg
   trunk/096/pkg/items/bulletinboard/pkg.cfg
   trunk/096/pkg/systems/attributes/attributes.cfg
   trunk/096/pkg/systems/attributes/pkg.cfg
   trunk/096/pkg/systems/attributes/skills.cfg
   trunk/096/pkg/systems/attributes/uoclient.cfg
   trunk/096/pkg/systems/bank/pkg.cfg
   trunk/096/pkg/systems/storage/pkg.cfg
   trunk/096/pkg/utils/control/checkpackages.src
   trunk/096/pkg/utils/control/pkg.cfg
   trunk/096/pkg/utils/control/start.src
   trunk/096/pkg/utils/datafile/pkg.cfg
   trunk/096/pkg/utils/gumps/pkg.cfg
   trunk/096/pkg/utils/saver/pkg.cfg
   trunk/096/pkg/utils/scheduler/include/scheduler.inc
   trunk/096/pkg/utils/scheduler/pkg.cfg
   trunk/096/pkg/utils/utilsdate/pkg.cfg
Log:


Modified: trunk/096/pkg/commands/pkg.cfg
===================================================================
--- trunk/096/pkg/commands/pkg.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/commands/pkg.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,6 +1,8 @@
-Enabled 1
-Name commands
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0
-CoreRequired 96
\ No newline at end of file
+Enabled		1
+Name		commands
+Version		1.0
+
+CoreRequired	96
+
+Maintainer	Distro Team
+Email		distro at polserver.com

Modified: trunk/096/pkg/config/config/icp.cfg
===================================================================
--- trunk/096/pkg/config/config/icp.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/config/config/icp.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -8,6 +8,6 @@
         Creator         Hesinde-Team
         C_Email         hesinde at elitecoder.net
 
-        Maintainer      Hesinde-Team
-        M_Email         hesinde at elitecoder.net
+        Maintainer      Distro Team
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/config/pkg.cfg
===================================================================
--- trunk/096/pkg/config/pkg.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/config/pkg.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,7 +1,12 @@
-# $Id: pkg.cfg,v 1.2 2004/05/02 11:02:23 folko Exp $
+# $Id$
 Enabled         1
 Name            config
-Maintainer      Hesinde-Team
-Email           hesinde at elitecoder.net
+Version         1.0
+
 CoreRequired    96
-Version         1.0
+
+Creator		Hesinde-Team
+Email		hesinde at elitecoder.net
+
+Maintainer	Distro Team
+Email		distro at polserver.com
\ No newline at end of file

Modified: trunk/096/pkg/items/bulletinboard/config/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/bulletinboard/config/itemdesc.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/items/bulletinboard/config/itemdesc.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,3 +1,4 @@
+# $Id$
 Item 0x1E5E
 {
 	Name		BulletinBoard
@@ -5,6 +6,7 @@
 	Script		bulletinboard
 	DestroyScript	destroyboard
 }
+
 Item 0x1E5F
 {
 	Name		BulletinBoard2

Modified: trunk/096/pkg/items/bulletinboard/destroyboard.src
===================================================================
--- trunk/096/pkg/items/bulletinboard/destroyboard.src	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/items/bulletinboard/destroyboard.src	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,3 +1,6 @@
+/* $Id$
+ *
+ */
 use uo;
 
 include ":datafile:datafile";
@@ -2,2 +5,3 @@
 
+
 program DestroyBoard(board)

Modified: trunk/096/pkg/items/bulletinboard/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/bulletinboard/itemdesc.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/items/bulletinboard/itemdesc.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -5,6 +5,7 @@
 	Script		bulletinboard
 	DestroyScript	destroyboard
 }
+
 Item 0x1E5F
 {
 	Name		BulletinBoard2

Modified: trunk/096/pkg/items/bulletinboard/pkg.cfg
===================================================================
--- trunk/096/pkg/items/bulletinboard/pkg.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/items/bulletinboard/pkg.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,6 +1,11 @@
 Enabled         1
 Name            bulletinboard
+Version         1.0
+
+CoreRequired    92
+
 Creator         Austin Heilman
 Email           Austin at tsse.net
-Version         1.0
-CoreRequired    92
\ No newline at end of file
+
+Maintainer	Distro Team
+Email		distro at polserver.com
\ No newline at end of file

Modified: trunk/096/pkg/systems/attributes/attributes.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/systems/attributes/attributes.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,4 +1,4 @@
-# $Id: attributes.cfg,v 1.1 2004/03/16 14:05:46 folko Exp $
+# $Id$
 #
 # Purpose:
 # Defines Attribute names and aliases
@@ -23,12 +23,10 @@
 # The function is called when UO.EM RecalVitals is called.
 #
 
-///////////////////////////////////////
-//
-// ** BASIC STATS **
-//
-///////////////////////////////////////
 
+#
+# ** BASIC STATS **
+#
 Attribute Strength
 {
 	AttributeType	Stat
@@ -44,12 +42,10 @@
 	AttributeType	Stat
 }
 
-///////////////////////////////////////
-//
-// ** SKILLS **
-//
-///////////////////////////////////////
 
+#
+# ** SKILLS **
+#
 Attribute Alchemy
 {
 	AttributeType	Skill

Modified: trunk/096/pkg/systems/attributes/pkg.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/pkg.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/systems/attributes/pkg.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,13 +1,13 @@
 Enabled		1
 Name		attributes
-
 Version		1.0
 
 CoreRequired	96
 
 Creator		Austin Heilman
 Email		Austin at tsse.net
+
 Maintainer	Distro Team
-Email		pol-distro-support at sourceforge.net
+Email		distro at polserver.com
 
 #Conflicts none
\ No newline at end of file

Modified: trunk/096/pkg/systems/attributes/skills.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/skills.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/systems/attributes/skills.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,38 +1,37 @@
- /////////////////////////////////////////////////////////////////////////////
-//
-//  SKILLS.CFG:     Skill Definitions
-//
-//  USED BY:	System
-//
-//  TODO:	   tune delays, define stat advancement data for all skills
-//
-//  The following can be defined for a Skill:
-//
-//      Name	Skill name [will be used to read/write data files]
-//      SkillId     0-[max skill]
-//      Script      Script to run when skill is clicked in skills window
-//      Delay       Number of seconds skills cannot be used after this one
-//      Unhides     Using this skill unhides user if hidden (default: 1)
-//      StrAdv      Strength advancement definition
-//      IntAdv      Intelligence advancement definition
-//      DexAdv      Dexterity advancement definition
-//
-//  Format of StrAdv, IntAdv, DexAdv:
-//      StrAdv [chance] [points]
-//      StrAdv 10 1d4
-//      StrAdv 50 1
-//      StrAdv 2.5 1d3+2
-//
-//      chance is a floating point percentage, from 0.0 to 100.0
-//
-/////////////////////////////////////////////////////////////////////////////
-//
-// *** NOTICE ***
-//
-// As of POL 094, this file is only used to start up a skill Script when a
-// client uses one.
-//
-/////////////////////////////////////////////////////////////////////////////
+# $Id$
+#
+#  SKILLS.CFG:     Skill Definitions
+#
+#  USED BY:	System
+#
+#  TODO:	   tune delays, define stat advancement data for all skills
+#
+#  The following can be defined for a Skill:
+#
+#      Name	Skill name [will be used to read/write data files]
+#      SkillId     0-[max skill]
+#      Script      Script to run when skill is clicked in skills window
+#      Delay       Number of seconds skills cannot be used after this one
+#      Unhides     Using this skill unhides user if hidden (default: 1)
+#      StrAdv      Strength advancement definition
+#      IntAdv      Intelligence advancement definition
+#      DexAdv      Dexterity advancement definition
+#
+#  Format of StrAdv, IntAdv, DexAdv:
+#      StrAdv [chance] [points]
+#      StrAdv 10 1d4
+#      StrAdv 50 1
+#      StrAdv 2.5 1d3+2
+#
+#      chance is a floating point percentage, from 0.0 to 100.0
+#
+#
+# *** NOTICE ***
+#
+# As of POL 094, this file is only used to start up a skill Script when a
+# client uses one.
+#
+#
 
 Skill 0
 {

Modified: trunk/096/pkg/systems/attributes/uoclient.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/uoclient.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/systems/attributes/uoclient.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,4 +1,4 @@
-# $$
+# $Id$
 #
 # Purpose:
 # Maps vital and attribute names onto UO Client idioms for character status.

Modified: trunk/096/pkg/systems/bank/pkg.cfg
===================================================================
--- trunk/096/pkg/systems/bank/pkg.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/systems/bank/pkg.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,6 +1,6 @@
 Enabled		1
 Name		bank
-Maintainer	Distro Team
-Email		pol-distro-support at sourceforge.net
 Version		1.0
 
+Maintainer	Distro Team
+Email		distro at polserver.com

Modified: trunk/096/pkg/systems/storage/pkg.cfg
===================================================================
--- trunk/096/pkg/systems/storage/pkg.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/systems/storage/pkg.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,6 +1,5 @@
 Enabled		1
 Name		storage
-
 Version		1.2
 
 CoreRequired	95
@@ -8,7 +7,7 @@
 Creator		Austin Heilman
 Email		Austin at tsse.net
 
-Maintainer	POL Distro Team
+Maintainer	Distro Team
 Email		distro at polserver.com
 
 #Conflicts none
\ No newline at end of file

Modified: trunk/096/pkg/utils/control/checkpackages.src
===================================================================
--- trunk/096/pkg/utils/control/checkpackages.src	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/utils/control/checkpackages.src	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,3 +1,6 @@
+/* $Id$
+ *
+ */
 use uo;
 use os;
 use cfgfile;
@@ -10,6 +13,7 @@
 set_priority(255);
 set_script_option(SCRIPTOPT_NO_RUNAWAY, 1);
 
+
 program CheckPackages()
 	var pkg_info := DFOpenDataFile(":control:packages", DF_CREATE);
 	var pkg_gumps := DFOpenDataFile(":control:gumps", DF_CREATE);
@@ -68,6 +72,7 @@
 	Print("[CONTROL] Finished setting up packages.");
 endprogram
 
+
 /*
  * GetCfgValue(byref cfg_elem, value)
  *

Modified: trunk/096/pkg/utils/control/pkg.cfg
===================================================================
--- trunk/096/pkg/utils/control/pkg.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/utils/control/pkg.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,6 +1,6 @@
+# $Id$
 Enabled		1
 Name		control
-
 Version		2.4
 
 CoreRequired	95

Modified: trunk/096/pkg/utils/control/start.src
===================================================================
--- trunk/096/pkg/utils/control/start.src	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/utils/control/start.src	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,3 +1,6 @@
+/* $Id$
+ *
+ */
 use os;
 
 var script := start_script("checkpackages");

Modified: trunk/096/pkg/utils/datafile/pkg.cfg
===================================================================
--- trunk/096/pkg/utils/datafile/pkg.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/utils/datafile/pkg.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,6 +1,5 @@
 Enabled		1
 Name		datafile
-
 Version		2.0
 
 CoreRequired	92

Modified: trunk/096/pkg/utils/gumps/pkg.cfg
===================================================================
--- trunk/096/pkg/utils/gumps/pkg.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/utils/gumps/pkg.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -7,8 +7,8 @@
 Creator		Melanius and Austin
 Email		Austin at tsse.net
 
-Maintainer	Austin Heilman
-Email		Austin at tsse.net
+Maintainer	Distro Team
+Email		distro at polserver.com
 
 #Requires none
 #Conflicts none

Modified: trunk/096/pkg/utils/saver/pkg.cfg
===================================================================
--- trunk/096/pkg/utils/saver/pkg.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/utils/saver/pkg.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,7 +1,8 @@
-# $Id: pkg.cfg,v 1.2 2004/05/02 11:02:23 folko Exp $
+# $Id$
 Enabled         1
 Name            saver
-Maintainer      Hesinde-Team
-Email           hesinde at elitecoder.net
+
+Maintainer      Distro Team
+Email           distro at polserver.com
 CoreRequired    96
 Version         1.0

Modified: trunk/096/pkg/utils/scheduler/include/scheduler.inc
===================================================================
--- trunk/096/pkg/utils/scheduler/include/scheduler.inc	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/utils/scheduler/include/scheduler.inc	2005-09-26 08:25:45 UTC (rev 259)
@@ -44,8 +44,6 @@
 /*
  * Wait(what)
  *
- * Author: Folko
- *
  * Purpose
  * Waits for a signal.
  *
@@ -67,8 +65,6 @@
 /*
  * Send(what)
  *
- * Author: Folko
- *
  * Purpose
  * Send a signal to the scheduler.
  *

Modified: trunk/096/pkg/utils/scheduler/pkg.cfg
===================================================================
--- trunk/096/pkg/utils/scheduler/pkg.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/utils/scheduler/pkg.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,7 +1,12 @@
 # $Id$
-Enabled         1
-Name            scheduler
-Maintainer      Hesinde-Team
-Email           hesinde at elitecoder.net
-CoreRequired    96
-Version         1.0
+Enabled		1
+Name		scheduler
+Version		1.0
+
+Creator		Hesinde-Team
+Email		hesinde at elitecoder.net
+
+Maintainer	Distro Team
+Email		distro at polserver.com
+
+CoreRequired	96

Modified: trunk/096/pkg/utils/utilsdate/pkg.cfg
===================================================================
--- trunk/096/pkg/utils/utilsdate/pkg.cfg	2005-09-26 03:04:22 UTC (rev 258)
+++ trunk/096/pkg/utils/utilsdate/pkg.cfg	2005-09-26 08:25:45 UTC (rev 259)
@@ -1,8 +1,9 @@
-Enabled 1
-Name utilsdate
-Version 1.0
+# $Id$
+Enabled		1
+Name		utilsdate
+Version		1.0
 
-CoreRequired 95
+Maintainer	bluecavenet
+Email		mintus at bluecave.net
 
-Maintainer bluecavenet
-Email  mintus at bluecave.net
+CoreRequired	95



From muaddiblsd at berlios.de  Mon Sep 26 16:02:50 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Mon, 26 Sep 2005 16:02:50 +0200
Subject: [Poldistro-svn] r260 - trunk/096/pkg/systems/attributes
Message-ID: <200509261402.j8QE2oXe007036@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-26 16:02:50 +0200 (Mon, 26 Sep 2005)
New Revision: 260

Modified:
   trunk/096/pkg/systems/attributes/skills.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/skills.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/skills.cfg	2005-09-26 08:25:45 UTC (rev 259)
+++ trunk/096/pkg/systems/attributes/skills.cfg	2005-09-26 14:02:50 UTC (rev 260)
@@ -423,14 +423,14 @@
 
 Skill 32
 {
-	Name	    SpiritSpeak
-	SkillId	 32
-	Script	  :spiritspeak:spiritSpeak
-	Delay	   10
-	IntAdv	  100 1d4+20
+	Name		SpiritSpeak
+	SkillId	 	32
+	Script	  	:spiritspeak:spiritSpeak
+	Delay	   	2
+	IntAdv	  	100 1d4+20
 	default_points  50
-	title	   Medium
-	Unhides	 1
+	title	   	Medium
+	Unhides	 	1
 	DropStat	str dex
 }
 



From panosl at berlios.de  Sun Sep 25 11:07:23 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Sun, 25 Sep 2005 11:07:23 +0200
Subject: [Poldistro-svn] r236 - in trunk/096: . batchfiles config data docs misc pkg/commands pkg/commands/admin pkg/commands/config pkg/commands/coun pkg/commands/gm pkg/commands/include pkg/commands/player pkg/commands/seer pkg/commands/test pkg/config pkg/config/config pkg/config/include pkg/expansions/aos pkg/expansions/aos/config pkg/expansions/aos/skills/chivalry pkg/expansions/aos/skills/chivalry/config pkg/expansions/aos/skills/focus pkg/expansions/aos/skills/focus/config pkg/expansions/aos/skills/necromancy pkg/expansions/aos/skills/necromancy/config pkg/expansions/lbr pkg/expansions/lbr/config pkg/expansions/uor pkg/expansions/uor/config pkg/items/bountyboard pkg/items/bountyboard/config pkg/items/bulletinboard pkg/items/bulletinboard/config pkg/items/commcrystals pkg/items/commcrystals/config pkg/items/corpses pkg/items/corpses/config pkg/items/decorations pkg/items/decorations/config pkg/items/doors pkg/items/dyes pkg/items/food pkg/items/guildstone pkg/items/guildstone/command/!
 player pkg/items/interiordecoratortool pkg/items/lighting pkg/items/magic pkg/items/moongates pkg/items/repaircontract pkg/items/runebook pkg/items/sysbook pkg/items/sysbook/command/admin pkg/items/sysbook/command/seer pkg/items/training pkg/items/traps pkg/items/trash pkg/items/treasuremap pkg/items/usestuff pkg/items/wands pkg/mobiles/ai_brain pkg/mobiles/ai_brain/commands/gm pkg/mobiles/ai_brain/commands/test pkg/mobiles/ai_brain/complete/testnpc pkg/mobiles/ai_brain/config pkg/mobiles/ai_brain/include pkg/mobiles/ai_brain/include/braincore pkg/mobiles/animaltrainer pkg/mobiles/barber pkg/mobiles/npcutils pkg/mobiles/playervendor pkg/other/gmtools pkg/other/gmtools/commands/gm pkg/other/hooks pkg/other/motd pkg/other/motd/commands/player pkg/other/motd/docs pkg/skills/alchemy pkg/skills/alchemy/config pkg/skills/anatomy pkg/skills/anatomy/config pkg/skills/animallore pkg/skills/animallore/config pkg/skills/armslore pkg/skills/armslore/config pkg/skills/begging pkg/skills!
 /begging/config pkg/skills/blacksmithy pkg/skills/blacksmithy/!
 config p
Message-ID: <200509250907.j8P97NVW002027@sheep.berlios.de>

Author: panosl
Date: 2005-09-25 11:06:19 +0200 (Sun, 25 Sep 2005)
New Revision: 236

Modified:
   trunk/096/CoreChanges-096.txt
   trunk/096/TODO.txt
   trunk/096/batchfiles/cleanup.bat
   trunk/096/batchfiles/ecompile.bat
   trunk/096/batchfiles/loopPOL.bat
   trunk/096/batchfiles/pol.bat
   trunk/096/batchfiles/realmgen.bat
   trunk/096/config/animxlate.cfg
   trunk/096/config/armrdesc.cfg
   trunk/096/config/armrzone.cfg
   trunk/096/config/bannedips.cfg
   trunk/096/config/boats.cfg
   trunk/096/config/bookstorage.cfg
   trunk/096/config/circles.cfg
   trunk/096/config/cloths.cfg
   trunk/096/config/cmds.cfg
   trunk/096/config/colors.cfg
   trunk/096/config/combat.cfg
   trunk/096/config/console.cfg
   trunk/096/config/days.cfg
   trunk/096/config/equip.cfg
   trunk/096/config/equip2.cfg
   trunk/096/config/fileaccess.cfg
   trunk/096/config/golocs.cfg
   trunk/096/config/gzone.cfg
   trunk/096/config/innlocation.cfg
   trunk/096/config/insertsound.cfg
   trunk/096/config/itemdesc.cfg
   trunk/096/config/landtiles.cfg
   trunk/096/config/lootgroup.cfg
   trunk/096/config/menus.cfg
   trunk/096/config/movecost.cfg
   trunk/096/config/mrcspawn.cfg
   trunk/096/config/multis.cfg
   trunk/096/config/names.cfg
   trunk/096/config/nlootgroup.cfg
   trunk/096/config/npcdesc.cfg
   trunk/096/config/npcequip.cfg
   trunk/096/config/repsys.cfg
   trunk/096/config/resourceList.cfg
   trunk/096/config/servers.cfg
   trunk/096/config/servspecopt.cfg
   trunk/096/config/sets.cfg
   trunk/096/config/skills.cfg
   trunk/096/config/spawngroups.cfg
   trunk/096/config/spawnregions.cfg
   trunk/096/config/speechgroup.cfg
   trunk/096/config/spells.cfg
   trunk/096/config/stacking.cfg
   trunk/096/config/starteqp.cfg
   trunk/096/config/startloc.cfg
   trunk/096/config/teleporters.cfg
   trunk/096/config/tiles.cfg
   trunk/096/config/use_stuff.cfg
   trunk/096/config/watch.cfg
   trunk/096/config/wepndesc.cfg
   trunk/096/data/accounts.txt
   trunk/096/data/datastore.txt
   trunk/096/data/guilds.txt
   trunk/096/data/items.txt
   trunk/096/data/multis.txt
   trunk/096/data/npcequip.txt
   trunk/096/data/npcs.txt
   trunk/096/data/objects.txt
   trunk/096/data/pcequip.txt
   trunk/096/data/pcs.txt
   trunk/096/data/permitems.txt
   trunk/096/data/pol.txt
   trunk/096/data/resource.txt
   trunk/096/data/storage.txt
   trunk/096/distro-changelog.txt
   trunk/096/docs/basicem.html
   trunk/096/docs/boatem.html
   trunk/096/docs/builtintextcmds.html
   trunk/096/docs/cfgfileem.html
   trunk/096/docs/commands.txt
   trunk/096/docs/configfiles.html
   trunk/096/docs/datafileem.html
   trunk/096/docs/escriptguide.html
   trunk/096/docs/events.html
   trunk/096/docs/fileem.html
   trunk/096/docs/gumps.html
   trunk/096/docs/httpem.html
   trunk/096/docs/index.html
   trunk/096/docs/mathem.html
   trunk/096/docs/naming.txt
   trunk/096/docs/nodes.txt
   trunk/096/docs/npcem.html
   trunk/096/docs/objref.html
   trunk/096/docs/osem.html
   trunk/096/docs/performance.html
   trunk/096/docs/picture_gump_finish_1.png
   trunk/096/docs/polsysem.html
   trunk/096/docs/privilages.html
   trunk/096/docs/scripting.txt
   trunk/096/docs/scripttypes.html
   trunk/096/docs/unicodeem.html
   trunk/096/docs/uoem.html
   trunk/096/docs/utilem.html
   trunk/096/misc/world.dor.dat
   trunk/096/pkg/commands/admin/addbook.src
   trunk/096/pkg/commands/admin/booklock.src
   trunk/096/pkg/commands/admin/critterpurge.src
   trunk/096/pkg/commands/admin/dyehair.src
   trunk/096/pkg/commands/admin/forgive.src
   trunk/096/pkg/commands/admin/grantpriv.src
   trunk/096/pkg/commands/admin/gzone.src
   trunk/096/pkg/commands/admin/newAccount.src
   trunk/096/pkg/commands/admin/nodewipe.src
   trunk/096/pkg/commands/admin/release.src
   trunk/096/pkg/commands/admin/restart.src
   trunk/096/pkg/commands/admin/restartall.src
   trunk/096/pkg/commands/admin/revokepriv.src
   trunk/096/pkg/commands/admin/setcmdlevel.src
   trunk/096/pkg/commands/admin/setmurder.src
   trunk/096/pkg/commands/admin/storebook.src
   trunk/096/pkg/commands/admin/unloadcfg.src
   trunk/096/pkg/commands/config/icp.cfg
   trunk/096/pkg/commands/coun/conceal.src
   trunk/096/pkg/commands/coun/counpage.src
   trunk/096/pkg/commands/coun/disable.src
   trunk/096/pkg/commands/coun/enable.src
   trunk/096/pkg/commands/coun/fetch.src
   trunk/096/pkg/commands/coun/gmbcast.src
   trunk/096/pkg/commands/coun/goto.src
   trunk/096/pkg/commands/coun/mtele.src
   trunk/096/pkg/commands/coun/nsight.src
   trunk/096/pkg/commands/coun/reveal.src
   trunk/096/pkg/commands/coun/tele.src
   trunk/096/pkg/commands/coun/time.src
   trunk/096/pkg/commands/gm/action.src
   trunk/096/pkg/commands/gm/addset.src
   trunk/096/pkg/commands/gm/addtele.src
   trunk/096/pkg/commands/gm/attack.src
   trunk/096/pkg/commands/gm/bow.src
   trunk/096/pkg/commands/gm/crim.src
   trunk/096/pkg/commands/gm/d.src
   trunk/096/pkg/commands/gm/destroy.src
   trunk/096/pkg/commands/gm/destroyboat.src
   trunk/096/pkg/commands/gm/destroymulti.src
   trunk/096/pkg/commands/gm/dmany.src
   trunk/096/pkg/commands/gm/e.src
   trunk/096/pkg/commands/gm/ekill.src
   trunk/096/pkg/commands/gm/equip.src
   trunk/096/pkg/commands/gm/eraseglobal.src
   trunk/096/pkg/commands/gm/eraseobjproperty.src
   trunk/096/pkg/commands/gm/freeze.src
   trunk/096/pkg/commands/gm/getCProp.src
   trunk/096/pkg/commands/gm/getglobal.src
   trunk/096/pkg/commands/gm/getprop.src
   trunk/096/pkg/commands/gm/getscript.src
   trunk/096/pkg/commands/gm/getstatic.src
   trunk/096/pkg/commands/gm/getusescript.src
   trunk/096/pkg/commands/gm/gmpage.src
   trunk/096/pkg/commands/gm/goserial.src
   trunk/096/pkg/commands/gm/ident.src
   trunk/096/pkg/commands/gm/info.src
   trunk/096/pkg/commands/gm/ip.src
   trunk/096/pkg/commands/gm/iteminfo.src
   trunk/096/pkg/commands/gm/jump.src
   trunk/096/pkg/commands/gm/kick.src
   trunk/096/pkg/commands/gm/kill.src
   trunk/096/pkg/commands/gm/lkill.src
   trunk/096/pkg/commands/gm/lock.src
   trunk/096/pkg/commands/gm/makekey.src
   trunk/096/pkg/commands/gm/makeregs.src
   trunk/096/pkg/commands/gm/makeset.src
   trunk/096/pkg/commands/gm/maketele.src
   trunk/096/pkg/commands/gm/mdestroy.src
   trunk/096/pkg/commands/gm/meplayer.src
   trunk/096/pkg/commands/gm/mflip.src
   trunk/096/pkg/commands/gm/moveitem.src
   trunk/096/pkg/commands/gm/movetocont.src
   trunk/096/pkg/commands/gm/myform.src
   trunk/096/pkg/commands/gm/powerdown.src
   trunk/096/pkg/commands/gm/powerup.src
   trunk/096/pkg/commands/gm/privedit.src
   trunk/096/pkg/commands/gm/propedit.src
   trunk/096/pkg/commands/gm/recreate.src
   trunk/096/pkg/commands/gm/rekey.src
   trunk/096/pkg/commands/gm/relock.src
   trunk/096/pkg/commands/gm/res.src
   trunk/096/pkg/commands/gm/resme.src
   trunk/096/pkg/commands/gm/seehidden.src
   trunk/096/pkg/commands/gm/setglobal.src
   trunk/096/pkg/commands/gm/setmovable.src
   trunk/096/pkg/commands/gm/setobjproperty.src
   trunk/096/pkg/commands/gm/setprop.src
   trunk/096/pkg/commands/gm/setscript.src
   trunk/096/pkg/commands/gm/setskill.src
   trunk/096/pkg/commands/gm/settextprop.src
   trunk/096/pkg/commands/gm/setusescript.src
   trunk/096/pkg/commands/gm/sfx.src
   trunk/096/pkg/commands/gm/shave.src
   trunk/096/pkg/commands/gm/showstats.src
   trunk/096/pkg/commands/gm/spellbook.src
   trunk/096/pkg/commands/gm/squelch.src
   trunk/096/pkg/commands/gm/strip.src
   trunk/096/pkg/commands/gm/summon.inc
   trunk/096/pkg/commands/gm/summon.src
   trunk/096/pkg/commands/gm/tame.src
   trunk/096/pkg/commands/gm/thaw.src
   trunk/096/pkg/commands/gm/thawme.src
   trunk/096/pkg/commands/gm/tile.src
   trunk/096/pkg/commands/gm/unlock.src
   trunk/096/pkg/commands/gm/unlockradius.src
   trunk/096/pkg/commands/gm/whereship.src
   trunk/096/pkg/commands/gm/wipebank.src
   trunk/096/pkg/commands/gm/writequip.src
   trunk/096/pkg/commands/include/goAdd.inc
   trunk/096/pkg/commands/include/goEdit.inc
   trunk/096/pkg/commands/include/goGumps.inc
   trunk/096/pkg/commands/include/goTemplate.inc
   trunk/096/pkg/commands/include/goText.inc
   trunk/096/pkg/commands/pkg.cfg
   trunk/096/pkg/commands/player/consider.src
   trunk/096/pkg/commands/player/flip.src
   trunk/096/pkg/commands/player/help.src
   trunk/096/pkg/commands/player/help.txt
   trunk/096/pkg/commands/player/msg.src
   trunk/096/pkg/commands/player/resign.src
   trunk/096/pkg/commands/seer/bank.src
   trunk/096/pkg/commands/seer/bcast.src
   trunk/096/pkg/commands/seer/bcastas.src
   trunk/096/pkg/commands/seer/copylook.src
   trunk/096/pkg/commands/seer/create.src
   trunk/096/pkg/commands/seer/createat.src
   trunk/096/pkg/commands/seer/createlightsource.src
   trunk/096/pkg/commands/seer/createnpc.src
   trunk/096/pkg/commands/seer/createstack.src
   trunk/096/pkg/commands/seer/createstackat.src
   trunk/096/pkg/commands/seer/cx.src
   trunk/096/pkg/commands/seer/cy.src
   trunk/096/pkg/commands/seer/cz.src
   trunk/096/pkg/commands/seer/darken.src
   trunk/096/pkg/commands/seer/darttrap.src
   trunk/096/pkg/commands/seer/dupe.src
   trunk/096/pkg/commands/seer/explosiontrap.src
   trunk/096/pkg/commands/seer/gm.src
   trunk/096/pkg/commands/seer/go.src
   trunk/096/pkg/commands/seer/hideme.src
   trunk/096/pkg/commands/seer/lockdown.src
   trunk/096/pkg/commands/seer/lockradius.src
   trunk/096/pkg/commands/seer/lognotify.src
   trunk/096/pkg/commands/seer/mark.src
   trunk/096/pkg/commands/seer/mcx.src
   trunk/096/pkg/commands/seer/mcy.src
   trunk/096/pkg/commands/seer/mcz.src
   trunk/096/pkg/commands/seer/mpx.src
   trunk/096/pkg/commands/seer/mpy.src
   trunk/096/pkg/commands/seer/mpz.src
   trunk/096/pkg/commands/seer/mteleto.src
   trunk/096/pkg/commands/seer/music.src
   trunk/096/pkg/commands/seer/openpack.src
   trunk/096/pkg/commands/seer/poisontrap.src
   trunk/096/pkg/commands/seer/px.src
   trunk/096/pkg/commands/seer/py.src
   trunk/096/pkg/commands/seer/pz.src
   trunk/096/pkg/commands/seer/recall.src
   trunk/096/pkg/commands/seer/refreshme.src
   trunk/096/pkg/commands/seer/rename.src
   trunk/096/pkg/commands/seer/sayabove.src
   trunk/096/pkg/commands/seer/sayabovepvt.src
   trunk/096/pkg/commands/seer/setAnchor.src
   trunk/096/pkg/commands/seer/setintproperty.src
   trunk/096/pkg/commands/seer/setlight.src
   trunk/096/pkg/commands/seer/teleto.src
   trunk/096/pkg/commands/seer/where.src
   trunk/096/pkg/commands/test/clock.src
   trunk/096/pkg/commands/test/firestorm.src
   trunk/096/pkg/commands/test/generatespawnfiles.src
   trunk/096/pkg/commands/test/getmapinfo.src
   trunk/096/pkg/commands/test/getobjprop.src
   trunk/096/pkg/commands/test/getregionstring.src
   trunk/096/pkg/commands/test/itemcount.src
   trunk/096/pkg/commands/test/killmods.src
   trunk/096/pkg/commands/test/killpid.src
   trunk/096/pkg/commands/test/landtile.src
   trunk/096/pkg/commands/test/makemap.src
   trunk/096/pkg/commands/test/openit.src
   trunk/096/pkg/commands/test/props.src
   trunk/096/pkg/commands/test/setescript.src
   trunk/096/pkg/commands/test/setuscript.src
   trunk/096/pkg/commands/test/smember.src
   trunk/096/pkg/commands/test/startscript.src
   trunk/096/pkg/commands/test/worldheight.src
   trunk/096/pkg/config/config/icp.cfg
   trunk/096/pkg/config/config/shardconfig.cfg
   trunk/096/pkg/config/include/config.inc
   trunk/096/pkg/config/pkg.cfg
   trunk/096/pkg/config/uoclient.cfg
   trunk/096/pkg/expansions/aos/config/icp.cfg
   trunk/096/pkg/expansions/aos/pkg.cfg
   trunk/096/pkg/expansions/aos/skills/chivalry/config/icp.cfg
   trunk/096/pkg/expansions/aos/skills/chivalry/pkg.cfg
   trunk/096/pkg/expansions/aos/skills/focus/config/icp.cfg
   trunk/096/pkg/expansions/aos/skills/focus/pkg.cfg
   trunk/096/pkg/expansions/aos/skills/necromancy/config/icp.cfg
   trunk/096/pkg/expansions/aos/skills/necromancy/pkg.cfg
   trunk/096/pkg/expansions/lbr/config/icp.cfg
   trunk/096/pkg/expansions/lbr/pkg.cfg
   trunk/096/pkg/expansions/uor/config/icp.cfg
   trunk/096/pkg/expansions/uor/pkg.cfg
   trunk/096/pkg/items/bountyboard/bounty.src
   trunk/096/pkg/items/bountyboard/bountyWatcher.src
   trunk/096/pkg/items/bountyboard/bountyboard.src
   trunk/096/pkg/items/bountyboard/collectBounty.src
   trunk/096/pkg/items/bountyboard/config/icp.cfg
   trunk/096/pkg/items/bountyboard/config/itemdesc.cfg
   trunk/096/pkg/items/bountyboard/pkg.cfg
   trunk/096/pkg/items/bountyboard/readme.txt
   trunk/096/pkg/items/bountyboard/start.src
   trunk/096/pkg/items/bulletinboard/bulletinboard.src
   trunk/096/pkg/items/bulletinboard/config/icp.cfg
   trunk/096/pkg/items/bulletinboard/config/itemdesc.cfg
   trunk/096/pkg/items/bulletinboard/destroyboard.src
   trunk/096/pkg/items/bulletinboard/itemdesc.cfg
   trunk/096/pkg/items/bulletinboard/pkg.cfg
   trunk/096/pkg/items/commcrystals/commCrystal.src
   trunk/096/pkg/items/commcrystals/config/icp.cfg
   trunk/096/pkg/items/commcrystals/crystalControl.src
   trunk/096/pkg/items/commcrystals/itemdesc.cfg
   trunk/096/pkg/items/commcrystals/pkg.cfg
   trunk/096/pkg/items/corpses/boneControl.src
   trunk/096/pkg/items/corpses/config/icp.cfg
   trunk/096/pkg/items/corpses/corpseControl.src
   trunk/096/pkg/items/corpses/corpseFunctions.inc
   trunk/096/pkg/items/corpses/itemdesc.cfg
   trunk/096/pkg/items/corpses/pkg.cfg
   trunk/096/pkg/items/decorations/config/icp.cfg
   trunk/096/pkg/items/decorations/itemdesc.cfg
   trunk/096/pkg/items/decorations/pkg.cfg
   trunk/096/pkg/items/doors/closeDoor.src
   trunk/096/pkg/items/doors/door.cfg
   trunk/096/pkg/items/doors/door.src
   trunk/096/pkg/items/doors/doors.inc
   trunk/096/pkg/items/doors/itemdesc.cfg
   trunk/096/pkg/items/doors/openDoor.src
   trunk/096/pkg/items/doors/pkg.cfg
   trunk/096/pkg/items/doors/setFlow.src
   trunk/096/pkg/items/dyes/dyeBan.src
   trunk/096/pkg/items/dyes/dyeable.src
   trunk/096/pkg/items/dyes/furniture.src
   trunk/096/pkg/items/dyes/itemdesc.cfg
   trunk/096/pkg/items/dyes/pkg.cfg
   trunk/096/pkg/items/dyes/useDyes.src
   trunk/096/pkg/items/food/drink.src
   trunk/096/pkg/items/food/eat.src
   trunk/096/pkg/items/food/food.cfg
   trunk/096/pkg/items/food/hunger.src
   trunk/096/pkg/items/food/itemdesc.cfg
   trunk/096/pkg/items/food/logon.src
   trunk/096/pkg/items/food/pkg.cfg
   trunk/096/pkg/items/guildstone/command/player/c.src
   trunk/096/pkg/items/guildstone/command/player/gc.src
   trunk/096/pkg/items/guildstone/guildControl.src
   trunk/096/pkg/items/guildstone/guildData.inc
   trunk/096/pkg/items/guildstone/guildDeed.src
   trunk/096/pkg/items/guildstone/guildDestroy.src
   trunk/096/pkg/items/guildstone/guildManager.src
   trunk/096/pkg/items/guildstone/guildMethods.src
   trunk/096/pkg/items/guildstone/guildMove.src
   trunk/096/pkg/items/guildstone/guildStone.src
   trunk/096/pkg/items/guildstone/itemdesc.cfg
   trunk/096/pkg/items/guildstone/pkg.cfg
   trunk/096/pkg/items/guildstone/start.src
   trunk/096/pkg/items/interiordecoratortool/interiordecorator.src
   trunk/096/pkg/items/interiordecoratortool/itemdesc.cfg
   trunk/096/pkg/items/interiordecoratortool/pkg.cfg
   trunk/096/pkg/items/lighting/change.src
   trunk/096/pkg/items/lighting/itemdesc.cfg
   trunk/096/pkg/items/lighting/pkg.cfg
   trunk/096/pkg/items/magic/chargedSpellItem.src
   trunk/096/pkg/items/magic/getSpellID.inc
   trunk/096/pkg/items/magic/itemdesc.cfg
   trunk/096/pkg/items/magic/pkg.cfg
   trunk/096/pkg/items/magic/scroll.src
   trunk/096/pkg/items/moongates/itemdesc.cfg
   trunk/096/pkg/items/moongates/moongate.cfg
   trunk/096/pkg/items/moongates/moongates.inc
   trunk/096/pkg/items/moongates/pkg.cfg
   trunk/096/pkg/items/moongates/start.src
   trunk/096/pkg/items/moongates/systemMoongate.src
   trunk/096/pkg/items/repaircontract/itemdesc.cfg
   trunk/096/pkg/items/repaircontract/pkg.cfg
   trunk/096/pkg/items/repaircontract/repairDeed.src
   trunk/096/pkg/items/runebook/customSpells.inc
   trunk/096/pkg/items/runebook/itemdesc.cfg
   trunk/096/pkg/items/runebook/pkg.cfg
   trunk/096/pkg/items/runebook/runeInsert.src
   trunk/096/pkg/items/runebook/runebook.src
   trunk/096/pkg/items/sysbook/command/admin/bookSpawnTest.src
   trunk/096/pkg/items/sysbook/command/admin/bookSweep.src
   trunk/096/pkg/items/sysbook/command/admin/shelfclear.src
   trunk/096/pkg/items/sysbook/command/seer/bookLock.src
   trunk/096/pkg/items/sysbook/command/seer/setBook.src
   trunk/096/pkg/items/sysbook/command/seer/shelfe.src
   trunk/096/pkg/items/sysbook/command/seer/shelfs.src
   trunk/096/pkg/items/sysbook/itemdesc.cfg
   trunk/096/pkg/items/sysbook/openBook.src
   trunk/096/pkg/items/sysbook/pkg.cfg
   trunk/096/pkg/items/sysbook/readOnly.src
   trunk/096/pkg/items/sysbook/shelfStock.src
   trunk/096/pkg/items/sysbook/start.src
   trunk/096/pkg/items/sysbook/writable.src
   trunk/096/pkg/items/sysbook/zulubooks.cfg
   trunk/096/pkg/items/training/archeryButte.src
   trunk/096/pkg/items/training/dummyPickpocket.src
   trunk/096/pkg/items/training/dummyTraining.src
   trunk/096/pkg/items/training/itemdesc.cfg
   trunk/096/pkg/items/training/pkg.cfg
   trunk/096/pkg/items/traps/hiddenTrap.src
   trunk/096/pkg/items/traps/itemdesc.cfg
   trunk/096/pkg/items/traps/pkg.cfg
   trunk/096/pkg/items/traps/poisonTrapTriggered.src
   trunk/096/pkg/items/traps/traps.src
   trunk/096/pkg/items/trash/itemdesc.cfg
   trunk/096/pkg/items/trash/pkg.cfg
   trunk/096/pkg/items/trash/trash.src
   trunk/096/pkg/items/trash/trashControl.src
   trunk/096/pkg/items/trash/trashDeed.src
   trunk/096/pkg/items/trash/trashInsert.src
   trunk/096/pkg/items/trash/trashRemove.src
   trunk/096/pkg/items/treasuremap/decodeMap.src
   trunk/096/pkg/items/treasuremap/guardians.cfg
   trunk/096/pkg/items/treasuremap/itemdesc.cfg
   trunk/096/pkg/items/treasuremap/pkg.cfg
   trunk/096/pkg/items/treasuremap/treasure.cfg
   trunk/096/pkg/items/usestuff/pkg.cfg
   trunk/096/pkg/items/usestuff/useStuff.src
   trunk/096/pkg/items/wands/getSpellID.inc
   trunk/096/pkg/items/wands/magicWands.src
   trunk/096/pkg/items/wands/pkg.cfg
   trunk/096/pkg/mobiles/ai_brain/brain.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/cmassacre.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/makeswarm.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/massacre.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/npcsleep.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/removenpc.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/restartnpc.src
   trunk/096/pkg/mobiles/ai_brain/commands/gm/sendevent.src
   trunk/096/pkg/mobiles/ai_brain/commands/test/cfgtest.src
   trunk/096/pkg/mobiles/ai_brain/commands/test/unloadNPCDescs.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/cycle.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/goneCriminal.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/restart.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/shouldWatch.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src
   trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src
   trunk/096/pkg/mobiles/ai_brain/config/hatelist.cfg
   trunk/096/pkg/mobiles/ai_brain/config/icp.cfg
   trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
   trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc
   trunk/096/pkg/mobiles/ai_brain/include/eventid.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcError.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
   trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc
   trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
   trunk/096/pkg/mobiles/ai_brain/pkg.cfg
   trunk/096/pkg/mobiles/animaltrainer/itemdesc.cfg
   trunk/096/pkg/mobiles/animaltrainer/pkg.cfg
   trunk/096/pkg/mobiles/barber/hairDye.src
   trunk/096/pkg/mobiles/barber/itemdesc.cfg
   trunk/096/pkg/mobiles/barber/pkg.cfg
   trunk/096/pkg/mobiles/npcutils/NPCBackpacks.inc
   trunk/096/pkg/mobiles/npcutils/NPCCast.inc
   trunk/096/pkg/mobiles/npcutils/NPCKeeper.src
   trunk/096/pkg/mobiles/npcutils/NPCUtil.inc
   trunk/096/pkg/mobiles/npcutils/anchors.inc
   trunk/096/pkg/mobiles/npcutils/animal.inc
   trunk/096/pkg/mobiles/npcutils/pkg.cfg
   trunk/096/pkg/mobiles/npcutils/randName.inc
   trunk/096/pkg/mobiles/npcutils/randNameUtil.inc
   trunk/096/pkg/mobiles/npcutils/speech.inc
   trunk/096/pkg/mobiles/npcutils/trainSkill.inc
   trunk/096/pkg/mobiles/npcutils/vetement.inc
   trunk/096/pkg/mobiles/playervendor/itemdesc.cfg
   trunk/096/pkg/mobiles/playervendor/payCounter.src
   trunk/096/pkg/mobiles/playervendor/pkg.cfg
   trunk/096/pkg/other/gmtools/accountLayout.inc
   trunk/096/pkg/other/gmtools/accts.cfg
   trunk/096/pkg/other/gmtools/addGoLoc.src
   trunk/096/pkg/other/gmtools/campSpawner.src
   trunk/096/pkg/other/gmtools/commands/gm/campspawner.src
   trunk/096/pkg/other/gmtools/commands/gm/chestspawner.src
   trunk/096/pkg/other/gmtools/commands/gm/gmtools.src
   trunk/096/pkg/other/gmtools/commands/gm/hide.src
   trunk/096/pkg/other/gmtools/commands/gm/jailkeeper.src
   trunk/096/pkg/other/gmtools/cursed.src
   trunk/096/pkg/other/gmtools/go.src
   trunk/096/pkg/other/gmtools/goLayout.inc
   trunk/096/pkg/other/gmtools/golocs.cfg
   trunk/096/pkg/other/gmtools/gotoLayout.inc
   trunk/096/pkg/other/gmtools/greyItem.src
   trunk/096/pkg/other/gmtools/guardians.cfg
   trunk/096/pkg/other/gmtools/healstone.src
   trunk/096/pkg/other/gmtools/infernoTrap.src
   trunk/096/pkg/other/gmtools/info.inc
   trunk/096/pkg/other/gmtools/itemAddSet.src
   trunk/096/pkg/other/gmtools/itemGo.src
   trunk/096/pkg/other/gmtools/itemdesc.cfg
   trunk/096/pkg/other/gmtools/jailkeeper.src
   trunk/096/pkg/other/gmtools/layout.inc
   trunk/096/pkg/other/gmtools/lever.src
   trunk/096/pkg/other/gmtools/lightingItem.src
   trunk/096/pkg/other/gmtools/mailkeeper.src
   trunk/096/pkg/other/gmtools/makeHidden.src
   trunk/096/pkg/other/gmtools/makeTel.src
   trunk/096/pkg/other/gmtools/pkg.cfg
   trunk/096/pkg/other/gmtools/spawnTest.src
   trunk/096/pkg/other/gmtools/spawnerLayout.inc
   trunk/096/pkg/other/gmtools/start.src
   trunk/096/pkg/other/gmtools/summonNPC.src
   trunk/096/pkg/other/gmtools/toggleOps.src
   trunk/096/pkg/other/gmtools/toolTraps.src
   trunk/096/pkg/other/hooks/attributeCore.src
   trunk/096/pkg/other/hooks/attributes.cfg
   trunk/096/pkg/other/hooks/checkskill.cfg
   trunk/096/pkg/other/hooks/newCombat.src
   trunk/096/pkg/other/hooks/newParry.src
   trunk/096/pkg/other/hooks/pkg.cfg
   trunk/096/pkg/other/hooks/regen.src
   trunk/096/pkg/other/hooks/shilSkill.src
   trunk/096/pkg/other/hooks/skillsdef.cfg
   trunk/096/pkg/other/hooks/syshook.cfg
   trunk/096/pkg/other/hooks/titleCheck.src
   trunk/096/pkg/other/hooks/uoclient.cfg
   trunk/096/pkg/other/hooks/uoskills.cfg
   trunk/096/pkg/other/hooks/vitals.cfg
   trunk/096/pkg/other/motd/commands/player/motd.src
   trunk/096/pkg/other/motd/commands/player/motd.txt
   trunk/096/pkg/other/motd/docs/README.TXT
   trunk/096/pkg/other/motd/logon.src
   trunk/096/pkg/other/motd/motdConfig.inc
   trunk/096/pkg/other/motd/pkg.cfg
   trunk/096/pkg/other/motd/reconnect.src
   trunk/096/pkg/other/motd/utilsGumps.inc
   trunk/096/pkg/skills/alchemy/alchemy.cfg
   trunk/096/pkg/skills/alchemy/alchemy.src
   trunk/096/pkg/skills/alchemy/blackPotion.src
   trunk/096/pkg/skills/alchemy/bluePotion.src
   trunk/096/pkg/skills/alchemy/config/icp.cfg
   trunk/096/pkg/skills/alchemy/drinkPotion.inc
   trunk/096/pkg/skills/alchemy/exploder.src
   trunk/096/pkg/skills/alchemy/explosionPotion.src
   trunk/096/pkg/skills/alchemy/explosionTimer.src
   trunk/096/pkg/skills/alchemy/greenPotion.src
   trunk/096/pkg/skills/alchemy/itemdesc.cfg
   trunk/096/pkg/skills/alchemy/orangePotion.src
   trunk/096/pkg/skills/alchemy/pkg.cfg
   trunk/096/pkg/skills/alchemy/potion.inc
   trunk/096/pkg/skills/alchemy/potionInsert.src
   trunk/096/pkg/skills/alchemy/potionKeg.src
   trunk/096/pkg/skills/alchemy/potionKegs.inc
   trunk/096/pkg/skills/alchemy/redPotion.src
   trunk/096/pkg/skills/alchemy/whitePotion.src
   trunk/096/pkg/skills/alchemy/yellowPotion.src
   trunk/096/pkg/skills/anatomy/anatomy.src
   trunk/096/pkg/skills/anatomy/config/icp.cfg
   trunk/096/pkg/skills/anatomy/pkg.cfg
   trunk/096/pkg/skills/animallore/animalLore.src
   trunk/096/pkg/skills/animallore/config/icp.cfg
   trunk/096/pkg/skills/animallore/pkg.cfg
   trunk/096/pkg/skills/armslore/armsLore.src
   trunk/096/pkg/skills/armslore/config/icp.cfg
   trunk/096/pkg/skills/armslore/pkg.cfg
   trunk/096/pkg/skills/begging/begging.inc
   trunk/096/pkg/skills/begging/begging.src
   trunk/096/pkg/skills/begging/config/icp.cfg
   trunk/096/pkg/skills/begging/pkg.cfg
   trunk/096/pkg/skills/blacksmithy/blacksmithy.cfg
   trunk/096/pkg/skills/blacksmithy/config/icp.cfg
   trunk/096/pkg/skills/blacksmithy/itemdesc.cfg
   trunk/096/pkg/skills/blacksmithy/makeBlacksmithItems.src
   trunk/096/pkg/skills/blacksmithy/pkg.cfg
   trunk/096/pkg/skills/bowcraft/bowcraft.cfg
   trunk/096/pkg/skills/bowcraft/bowcraftFunctions.inc
   trunk/096/pkg/skills/bowcraft/config/icp.cfg
   trunk/096/pkg/skills/bowcraft/fletch.src
   trunk/096/pkg/skills/bowcraft/itemdesc.cfg
   trunk/096/pkg/skills/bowcraft/pkg.cfg
   trunk/096/pkg/skills/camping/bedroll.src
   trunk/096/pkg/skills/camping/camping.src
   trunk/096/pkg/skills/camping/config/icp.cfg
   trunk/096/pkg/skills/camping/itemdesc.cfg
   trunk/096/pkg/skills/camping/pkg.cfg
   trunk/096/pkg/skills/carpentry/buildKeg.src
   trunk/096/pkg/skills/carpentry/carpentry.cfg
   trunk/096/pkg/skills/carpentry/carpentry.src
   trunk/096/pkg/skills/carpentry/carpentryDeed.src
   trunk/096/pkg/skills/carpentry/config/icp.cfg
   trunk/096/pkg/skills/carpentry/itemdesc.cfg
   trunk/096/pkg/skills/carpentry/loomDeed.src
   trunk/096/pkg/skills/carpentry/ovenDeed.src
   trunk/096/pkg/skills/carpentry/pkg.cfg
   trunk/096/pkg/skills/cartography/cartography.src
   trunk/096/pkg/skills/cartography/config/icp.cfg
   trunk/096/pkg/skills/cartography/itemdesc.cfg
   trunk/096/pkg/skills/cartography/makeMap.src
   trunk/096/pkg/skills/cartography/pkg.cfg
   trunk/096/pkg/skills/cooking/config/icp.cfg
   trunk/096/pkg/skills/cooking/cooking.cfg
   trunk/096/pkg/skills/cooking/cooking.src
   trunk/096/pkg/skills/cooking/fillPitcher.src
   trunk/096/pkg/skills/cooking/itemdesc.cfg
   trunk/096/pkg/skills/cooking/pkg.cfg
   trunk/096/pkg/skills/cooking/use_stuff.cfg
   trunk/096/pkg/skills/detecthidden/config/icp.cfg
   trunk/096/pkg/skills/detecthidden/detectHidden.src
   trunk/096/pkg/skills/detecthidden/pkg.cfg
   trunk/096/pkg/skills/evalint/config/icp.cfg
   trunk/096/pkg/skills/evalint/evalInt.src
   trunk/096/pkg/skills/evalint/pkg.cfg
   trunk/096/pkg/skills/fishing/SOSBottle.src
   trunk/096/pkg/skills/fishing/SOSMessage.src
   trunk/096/pkg/skills/fishing/config/icp.cfg
   trunk/096/pkg/skills/fishing/fishing.src
   trunk/096/pkg/skills/fishing/fishingFunctions.inc
   trunk/096/pkg/skills/fishing/itemdesc.cfg
   trunk/096/pkg/skills/fishing/magicFish.src
   trunk/096/pkg/skills/fishing/pkg.cfg
   trunk/096/pkg/skills/fishing/sosarea.cfg
   trunk/096/pkg/skills/forensicevaluation/config/icp.cfg
   trunk/096/pkg/skills/forensicevaluation/evidence.src
   trunk/096/pkg/skills/forensicevaluation/forensic.src
   trunk/096/pkg/skills/forensicevaluation/itemdesc.cfg
   trunk/096/pkg/skills/forensicevaluation/pkg.cfg
   trunk/096/pkg/skills/healing/config/icp.cfg
   trunk/096/pkg/skills/healing/healing.cfg
   trunk/096/pkg/skills/healing/healing.src
   trunk/096/pkg/skills/healing/itemdesc.cfg
   trunk/096/pkg/skills/healing/pkg.cfg
   trunk/096/pkg/skills/herding/config/icp.cfg
   trunk/096/pkg/skills/herding/herd.src
   trunk/096/pkg/skills/herding/pkg.cfg
   trunk/096/pkg/skills/hiding/config/icp.cfg
   trunk/096/pkg/skills/hiding/hiding.src
   trunk/096/pkg/skills/hiding/pkg.cfg
   trunk/096/pkg/skills/inscription/config/icp.cfg
   trunk/096/pkg/skills/inscription/inscription.cfg
   trunk/096/pkg/skills/inscription/inscription.src
   trunk/096/pkg/skills/inscription/pkg.cfg
   trunk/096/pkg/skills/itemid/config/icp.cfg
   trunk/096/pkg/skills/itemid/itemID.src
   trunk/096/pkg/skills/itemid/pkg.cfg
   trunk/096/pkg/skills/lockpicking/config/icp.cfg
   trunk/096/pkg/skills/lockpicking/itemdesc.cfg
   trunk/096/pkg/skills/lockpicking/lockpicking.src
   trunk/096/pkg/skills/lockpicking/pkg.cfg
   trunk/096/pkg/skills/lumberjacking/config/icp.cfg
   trunk/096/pkg/skills/lumberjacking/lumberjacking.src
   trunk/096/pkg/skills/lumberjacking/pkg.cfg
   trunk/096/pkg/skills/magery/agility.src
   trunk/096/pkg/skills/magery/archCure.src
   trunk/096/pkg/skills/magery/archProt.src
   trunk/096/pkg/skills/magery/bladeSpirit.src
   trunk/096/pkg/skills/magery/bless.src
   trunk/096/pkg/skills/magery/chainLightning.src
   trunk/096/pkg/skills/magery/clumsy.src
   trunk/096/pkg/skills/magery/config/icp.cfg
   trunk/096/pkg/skills/magery/createFood.src
   trunk/096/pkg/skills/magery/cunning.src
   trunk/096/pkg/skills/magery/cure.src
   trunk/096/pkg/skills/magery/curse.src
   trunk/096/pkg/skills/magery/dispel.src
   trunk/096/pkg/skills/magery/dispelField.src
   trunk/096/pkg/skills/magery/eBolt.src
   trunk/096/pkg/skills/magery/earthquake.src
   trunk/096/pkg/skills/magery/energyField.src
   trunk/096/pkg/skills/magery/explosion.src
   trunk/096/pkg/skills/magery/feeblemind.src
   trunk/096/pkg/skills/magery/fireField.src
   trunk/096/pkg/skills/magery/fireball.src
   trunk/096/pkg/skills/magery/flameStrike.src.temp
   trunk/096/pkg/skills/magery/gHeal.src
   trunk/096/pkg/skills/magery/gate.src
   trunk/096/pkg/skills/magery/harm.src
   trunk/096/pkg/skills/magery/heal.src
   trunk/096/pkg/skills/magery/incognito.cfg
   trunk/096/pkg/skills/magery/incognito.src
   trunk/096/pkg/skills/magery/invisibility.src
   trunk/096/pkg/skills/magery/lightning.src
   trunk/096/pkg/skills/magery/magicArrow.src
   trunk/096/pkg/skills/magery/magicLock.src
   trunk/096/pkg/skills/magery/magicTrap.src
   trunk/096/pkg/skills/magery/magicUntrap.src
   trunk/096/pkg/skills/magery/magiccircles.cfg
   trunk/096/pkg/skills/magery/manaDrain.src
   trunk/096/pkg/skills/magery/manaVamp.src
   trunk/096/pkg/skills/magery/mark.src
   trunk/096/pkg/skills/magery/massCurse.src
   trunk/096/pkg/skills/magery/massDispel.src
   trunk/096/pkg/skills/magery/meteorSwarm.src
   trunk/096/pkg/skills/magery/mindBlast.src
   trunk/096/pkg/skills/magery/nightSight.src
   trunk/096/pkg/skills/magery/pField.src
   trunk/096/pkg/skills/magery/paraField.src
   trunk/096/pkg/skills/magery/paralyze.src
   trunk/096/pkg/skills/magery/pkg.cfg
   trunk/096/pkg/skills/magery/poison.src
   trunk/096/pkg/skills/magery/poisonDamage.src
   trunk/096/pkg/skills/magery/poisonField.src
   trunk/096/pkg/skills/magery/polymorph.src
   trunk/096/pkg/skills/magery/protection.src
   trunk/096/pkg/skills/magery/reactiveArmor.src
   trunk/096/pkg/skills/magery/recall.src
   trunk/096/pkg/skills/magery/reflect.inc
   trunk/096/pkg/skills/magery/reflect.src
   trunk/096/pkg/skills/magery/resurrect.src
   trunk/096/pkg/skills/magery/reveal.src
   trunk/096/pkg/skills/magery/spells.cfg
   trunk/096/pkg/skills/magery/strength.src
   trunk/096/pkg/skills/magery/summon.inc
   trunk/096/pkg/skills/magery/summonAir.src
   trunk/096/pkg/skills/magery/summonCreature.src
   trunk/096/pkg/skills/magery/summonDaemon.src
   trunk/096/pkg/skills/magery/summonEarth.src
   trunk/096/pkg/skills/magery/summonFire.src
   trunk/096/pkg/skills/magery/summonWater.src
   trunk/096/pkg/skills/magery/telekinesis.src
   trunk/096/pkg/skills/magery/teleport.src
   trunk/096/pkg/skills/magery/unlock.src
   trunk/096/pkg/skills/magery/vortex.src
   trunk/096/pkg/skills/magery/wallOfStone.src
   trunk/096/pkg/skills/magery/weaken.src
   trunk/096/pkg/skills/meditation/config/icp.cfg
   trunk/096/pkg/skills/meditation/medCheck.src
   trunk/096/pkg/skills/meditation/meditation.src
   trunk/096/pkg/skills/meditation/pkg.cfg
   trunk/096/pkg/skills/mining/config/icp.cfg
   trunk/096/pkg/skills/mining/itemdesc.cfg
   trunk/096/pkg/skills/mining/logon.src
   trunk/096/pkg/skills/mining/mining.src
   trunk/096/pkg/skills/mining/oreCore.src
   trunk/096/pkg/skills/mining/pkg.cfg
   trunk/096/pkg/skills/mining/resmelt.src
   trunk/096/pkg/skills/mining/smelting.src
   trunk/096/pkg/skills/mining/start.src
   trunk/096/pkg/skills/musicianship/config/icp.cfg
   trunk/096/pkg/skills/musicianship/entice.src
   trunk/096/pkg/skills/musicianship/enticedAI.src
   trunk/096/pkg/skills/musicianship/itemdesc.cfg
   trunk/096/pkg/skills/musicianship/musicianship.src
   trunk/096/pkg/skills/musicianship/peacemaking.src
   trunk/096/pkg/skills/musicianship/pkg.cfg
   trunk/096/pkg/skills/musicianship/provocation.src
   trunk/096/pkg/skills/poisoning/config/icp.cfg
   trunk/096/pkg/skills/poisoning/pkg.cfg
   trunk/096/pkg/skills/poisoning/poisoning.src
   trunk/096/pkg/skills/removetrap/config/icp.cfg
   trunk/096/pkg/skills/removetrap/pkg.cfg
   trunk/096/pkg/skills/removetrap/removeTrap.src
   trunk/096/pkg/skills/spiritspeak/config/icp.cfg
   trunk/096/pkg/skills/spiritspeak/pkg.cfg
   trunk/096/pkg/skills/spiritspeak/spiritSpeak.src
   trunk/096/pkg/skills/stealing/config/icp.cfg
   trunk/096/pkg/skills/stealing/pkg.cfg
   trunk/096/pkg/skills/stealing/stealing.src
   trunk/096/pkg/skills/stealth/config/icp.cfg
   trunk/096/pkg/skills/stealth/pkg.cfg
   trunk/096/pkg/skills/stealth/stealth.src
   trunk/096/pkg/skills/tailoring/config/icp.cfg
   trunk/096/pkg/skills/tailoring/itemdesc.cfg
   trunk/096/pkg/skills/tailoring/leather.cfg
   trunk/096/pkg/skills/tailoring/makeClothItems.src
   trunk/096/pkg/skills/tailoring/pkg.cfg
   trunk/096/pkg/skills/tailoring/scissors.cfg
   trunk/096/pkg/skills/tailoring/scissors.src
   trunk/096/pkg/skills/tailoring/spinning.src
   trunk/096/pkg/skills/tailoring/tailor.src
   trunk/096/pkg/skills/tailoring/tailoring.cfg
   trunk/096/pkg/skills/tailoring/tailoring.src
   trunk/096/pkg/skills/tailoring/tailoringFunctions.inc
   trunk/096/pkg/skills/taming/config/icp.cfg
   trunk/096/pkg/skills/taming/happyCounter.src
   trunk/096/pkg/skills/taming/pkg.cfg
   trunk/096/pkg/skills/taming/stableCounter.src
   trunk/096/pkg/skills/taming/taming.src
   trunk/096/pkg/skills/tasteid/config/icp.cfg
   trunk/096/pkg/skills/tasteid/pkg.cfg
   trunk/096/pkg/skills/tasteid/tasteID.src
   trunk/096/pkg/skills/tinkering/config/icp.cfg
   trunk/096/pkg/skills/tinkering/itemdesc.cfg
   trunk/096/pkg/skills/tinkering/makeComplexItem.src
   trunk/096/pkg/skills/tinkering/pkg.cfg
   trunk/096/pkg/skills/tinkering/time.src
   trunk/096/pkg/skills/tinkering/tinker.cfg
   trunk/096/pkg/skills/tinkering/tinkerTraps.src
   trunk/096/pkg/skills/tinkering/tinkering.inc
   trunk/096/pkg/skills/tinkering/tinkering.src
   trunk/096/pkg/skills/tracking/config/icp.cfg
   trunk/096/pkg/skills/tracking/pkg.cfg
   trunk/096/pkg/skills/tracking/tracking.cfg
   trunk/096/pkg/skills/tracking/tracking.src
   trunk/096/pkg/skills/veterinary/config/icp.cfg
   trunk/096/pkg/skills/veterinary/healing.cfg
   trunk/096/pkg/skills/veterinary/pkg.cfg
   trunk/096/pkg/skills/veterinary/vet.src
   trunk/096/pkg/systems/attributes/attributes.cfg
   trunk/096/pkg/systems/attributes/commands/test/attribconvert.src
   trunk/096/pkg/systems/attributes/config/settings.cfg
   trunk/096/pkg/systems/attributes/hooks/vitalInit.src
   trunk/096/pkg/systems/attributes/include/attributeConstants.inc
   trunk/096/pkg/systems/attributes/include/attributes.inc
   trunk/096/pkg/systems/attributes/include/attributes_ex.inc
   trunk/096/pkg/systems/attributes/include/regen.inc
   trunk/096/pkg/systems/attributes/include/settings.inc
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
   trunk/096/pkg/systems/attributes/include/skills.inc
   trunk/096/pkg/systems/attributes/include/stats.inc
   trunk/096/pkg/systems/attributes/include/vitals.inc
   trunk/096/pkg/systems/attributes/pkg.cfg
   trunk/096/pkg/systems/attributes/skills.cfg
   trunk/096/pkg/systems/attributes/uoclient.cfg
   trunk/096/pkg/systems/attributes/uoskills.cfg
   trunk/096/pkg/systems/attributes/vitals.cfg
   trunk/096/pkg/systems/bank/bank.inc
   trunk/096/pkg/systems/bank/pkg.cfg
   trunk/096/pkg/systems/bank/start.src
   trunk/096/pkg/systems/boat/boat.src
   trunk/096/pkg/systems/boat/itemdesc.cfg
   trunk/096/pkg/systems/boat/pkg.cfg
   trunk/096/pkg/systems/boat/plank.src
   trunk/096/pkg/systems/boat/plankControl.src
   trunk/096/pkg/systems/boat/plankUtil.inc
   trunk/096/pkg/systems/boat/plankWalk.src
   trunk/096/pkg/systems/boat/shipDeed.src
   trunk/096/pkg/systems/boat/tillerman.src
   trunk/096/pkg/systems/combat/bewitchedHit.src
   trunk/096/pkg/systems/combat/bladeSpiritHit.src
   trunk/096/pkg/systems/combat/bladed.src
   trunk/096/pkg/systems/combat/chargeUpkeep.src
   trunk/096/pkg/systems/combat/deathrobe.src
   trunk/096/pkg/systems/combat/destroy.src
   trunk/096/pkg/systems/combat/earthElemental.src
   trunk/096/pkg/systems/combat/equip.inc
   trunk/096/pkg/systems/combat/equip.src
   trunk/096/pkg/systems/combat/hitScriptInc.inc
   trunk/096/pkg/systems/combat/itemControl.src
   trunk/096/pkg/systems/combat/itemdesc.cfg
   trunk/096/pkg/systems/combat/maceHit.src
   trunk/096/pkg/systems/combat/magicarmor.cfg
   trunk/096/pkg/systems/combat/magiccloth.cfg
   trunk/096/pkg/systems/combat/magicweaps.cfg
   trunk/096/pkg/systems/combat/mainHitScript.src
   trunk/096/pkg/systems/combat/mobPoisonHit.src
   trunk/096/pkg/systems/combat/pkg.cfg
   trunk/096/pkg/systems/combat/poisonHit.src
   trunk/096/pkg/systems/combat/reactiveArmorHit.src
   trunk/096/pkg/systems/combat/setWeaponHit.src
   trunk/096/pkg/systems/combat/silverHit.src
   trunk/096/pkg/systems/combat/unequip.src
   trunk/096/pkg/systems/combat/vortexHit.src
   trunk/096/pkg/systems/combat/wrestleControl.src
   trunk/096/pkg/systems/combat/wrestlingHitScript.src
   trunk/096/pkg/systems/daynight/dayNight.src
   trunk/096/pkg/systems/daynight/itemdesc.cfg
   trunk/096/pkg/systems/daynight/moonlight.inc
   trunk/096/pkg/systems/daynight/pkg.cfg
   trunk/096/pkg/systems/daynight/snowRain.src
   trunk/096/pkg/systems/daynight/spyglass.src
   trunk/096/pkg/systems/daynight/start.src
   trunk/096/pkg/systems/daynight/wEffect.src
   trunk/096/pkg/systems/daynight/weather.inc
   trunk/096/pkg/systems/daynight/weather.src
   trunk/096/pkg/systems/housing/changeOwner.src
   trunk/096/pkg/systems/housing/houseBanning.src
   trunk/096/pkg/systems/housing/houseDeed.src
   trunk/096/pkg/systems/housing/itemdesc.cfg
   trunk/096/pkg/systems/housing/pkg.cfg
   trunk/096/pkg/systems/housing/secureCont.src
   trunk/096/pkg/systems/housing/sign.src
   trunk/096/pkg/systems/housing/signControl.src
   trunk/096/pkg/systems/merchantnodes/commands/admin/grabnodes.src
   trunk/096/pkg/systems/merchantnodes/commands/admin/seednode.src
   trunk/096/pkg/systems/merchantnodes/commands/gm/createnode.src
   trunk/096/pkg/systems/merchantnodes/commands/gm/nodemanager.src
   trunk/096/pkg/systems/merchantnodes/commands/gm/resetstock.src
   trunk/096/pkg/systems/merchantnodes/guardNode.src
   trunk/096/pkg/systems/merchantnodes/guardNodeControl.src
   trunk/096/pkg/systems/merchantnodes/itemdesc.cfg
   trunk/096/pkg/systems/merchantnodes/merchantNode.src
   trunk/096/pkg/systems/merchantnodes/merchantNodeControl.src
   trunk/096/pkg/systems/merchantnodes/merchantNodeDestroy.src
   trunk/096/pkg/systems/merchantnodes/pkg.cfg
   trunk/096/pkg/systems/merchantnodes/restock.src
   trunk/096/pkg/systems/nature/commands/gm/desolation.src
   trunk/096/pkg/systems/nature/commands/gm/resetcalendar.src
   trunk/096/pkg/systems/nature/commands/gm/setday.src
   trunk/096/pkg/systems/nature/commands/gm/setmonth.src
   trunk/096/pkg/systems/nature/commands/gm/setyear.src
   trunk/096/pkg/systems/nature/commands/player/lookup.src
   trunk/096/pkg/systems/nature/commands/seer/localthunderstorm.src
   trunk/096/pkg/systems/nature/commands/seer/setlight.inc
   trunk/096/pkg/systems/nature/commands/seer/setlocallight.src
   trunk/096/pkg/systems/nature/commands/seer/setweather.src
   trunk/096/pkg/systems/nature/config/nature.cfg
   trunk/096/pkg/systems/nature/dayNight.src
   trunk/096/pkg/systems/nature/docs/changes.txt
   trunk/096/pkg/systems/nature/docs/readme.txt
   trunk/096/pkg/systems/nature/include/nature.inc
   trunk/096/pkg/systems/nature/logon.src
   trunk/096/pkg/systems/nature/moons.src
   trunk/096/pkg/systems/nature/pkg.cfg
   trunk/096/pkg/systems/nature/setLight.src
   trunk/096/pkg/systems/nature/setup.src
   trunk/096/pkg/systems/nature/snowRain.src
   trunk/096/pkg/systems/nature/start.src
   trunk/096/pkg/systems/nature/thunderstorm.src
   trunk/096/pkg/systems/nature/weather.src
   trunk/096/pkg/systems/nature/wind.src
   trunk/096/pkg/systems/perfmon/pkg.cfg
   trunk/096/pkg/systems/perfmon/recBandwidth.src
   trunk/096/pkg/systems/perfmon/start.src
   trunk/096/pkg/systems/poisonwatcher/commands/gm/curepoison.src
   trunk/096/pkg/systems/poisonwatcher/commands/gm/curespecific.src
   trunk/096/pkg/systems/poisonwatcher/commands/gm/givepoison.src
   trunk/096/pkg/systems/poisonwatcher/commands/gm/listpoisons.src
   trunk/096/pkg/systems/poisonwatcher/commands/gm/listpoisonsbytype.src
   trunk/096/pkg/systems/poisonwatcher/logon.src
   trunk/096/pkg/systems/poisonwatcher/pkg.cfg
   trunk/096/pkg/systems/poisonwatcher/poisons.cfg
   trunk/096/pkg/systems/poisonwatcher/poisons.inc
   trunk/096/pkg/systems/poisonwatcher/poisonscripts/defaultPoison.src
   trunk/096/pkg/systems/poisonwatcher/poisonwatcher.src
   trunk/096/pkg/systems/poisonwatcher/reconnect.src
   trunk/096/pkg/systems/pushthrough/pkg.cfg
   trunk/096/pkg/systems/pushthrough/pushhook.src
   trunk/096/pkg/systems/pushthrough/syshook.cfg
   trunk/096/pkg/systems/spawnsystem/config/firstrun.cfg
   trunk/096/pkg/systems/spawnsystem/config/icp.cfg
   trunk/096/pkg/systems/spawnsystem/config/settings.cfg
   trunk/096/pkg/systems/spawnsystem/engines/item/settings.cfg
   trunk/096/pkg/systems/spawnsystem/engines/item/spawncycle.src
   trunk/096/pkg/systems/spawnsystem/engines/npc/settings.cfg
   trunk/096/pkg/systems/spawnsystem/engines/npc/spawncycle.src
   trunk/096/pkg/systems/spawnsystem/engines/prox/settings.cfg
   trunk/096/pkg/systems/spawnsystem/engines/prox/spawncycle.src
   trunk/096/pkg/systems/spawnsystem/include/commontasks.inc
   trunk/096/pkg/systems/spawnsystem/include/engines.inc
   trunk/096/pkg/systems/spawnsystem/include/errors.inc
   trunk/096/pkg/systems/spawnsystem/include/events.inc
   trunk/096/pkg/systems/spawnsystem/include/groups.inc
   trunk/096/pkg/systems/spawnsystem/include/realms.inc
   trunk/096/pkg/systems/spawnsystem/include/regions.inc
   trunk/096/pkg/systems/spawnsystem/include/settings.inc
   trunk/096/pkg/systems/spawnsystem/include/spawnerUtil.inc
   trunk/096/pkg/systems/spawnsystem/initializer/firstrun.src
   trunk/096/pkg/systems/spawnsystem/pkg.cfg
   trunk/096/pkg/systems/spawnsystem/spawnsystem.src
   trunk/096/pkg/systems/spawnsystem/start.src
   trunk/096/pkg/systems/spawnsystem/textcmd/gm/spawner.src
   trunk/096/pkg/systems/spawnsystem/www/spawncontrol.src
   trunk/096/pkg/systems/spellcasting/pkg.cfg
   trunk/096/pkg/systems/spellcasting/spellcast.src
   trunk/096/pkg/systems/spellcasting/spellcastFunctions.inc
   trunk/096/pkg/systems/stafflist/pkg.cfg
   trunk/096/pkg/systems/stafflist/staffList.src
   trunk/096/pkg/systems/stafflist/start.src
   trunk/096/pkg/systems/storage/include/storage.inc
   trunk/096/pkg/systems/storage/pkg.cfg
   trunk/096/pkg/systems/timer/pkg.cfg
   trunk/096/pkg/systems/timer/start.src
   trunk/096/pkg/systems/timer/timers.src
   trunk/096/pkg/utils/control/checkpackages.src
   trunk/096/pkg/utils/control/commands/coun/control.src
   trunk/096/pkg/utils/control/config/icp.cfg
   trunk/096/pkg/utils/control/docs/changes.txt
   trunk/096/pkg/utils/control/docs/readme.txt
   trunk/096/pkg/utils/control/include/icp-commands.inc
   trunk/096/pkg/utils/control/include/icp-generalinfo.inc
   trunk/096/pkg/utils/control/include/icp-gumps.inc
   trunk/096/pkg/utils/control/include/icp-index.inc
   trunk/096/pkg/utils/control/include/icp-itemdesc.inc
   trunk/096/pkg/utils/control/include/icp-pkgpanel.inc
   trunk/096/pkg/utils/control/include/icp-scripts.inc
   trunk/096/pkg/utils/control/include/icp-util.inc
   trunk/096/pkg/utils/control/pkg.cfg
   trunk/096/pkg/utils/control/start.src
   trunk/096/pkg/utils/datafile/config/icp.cfg
   trunk/096/pkg/utils/datafile/include/datafile.inc
   trunk/096/pkg/utils/datafile/pkg.cfg
   trunk/096/pkg/utils/gumps/commands/admin/gumpprompt.src
   trunk/096/pkg/utils/gumps/commands/admin/requestgump.src
   trunk/096/pkg/utils/gumps/commands/admin/resizepic.src
   trunk/096/pkg/utils/gumps/commands/admin/samplegump.src
   trunk/096/pkg/utils/gumps/commands/admin/yesno.src
   trunk/096/pkg/utils/gumps/config/GumpInfo.cfg
   trunk/096/pkg/utils/gumps/config/icp.cfg
   trunk/096/pkg/utils/gumps/docs/License.txt
   trunk/096/pkg/utils/gumps/docs/changes.txt
   trunk/096/pkg/utils/gumps/docs/readme.txt
   trunk/096/pkg/utils/gumps/include/gumpprompt.inc
   trunk/096/pkg/utils/gumps/include/gumps.inc
   trunk/096/pkg/utils/gumps/include/gumps_ex.inc
   trunk/096/pkg/utils/gumps/include/old/old-gumps.inc
   trunk/096/pkg/utils/gumps/include/requestgump.inc
   trunk/096/pkg/utils/gumps/include/yesno.inc
   trunk/096/pkg/utils/gumps/pkg.cfg
   trunk/096/pkg/utils/saver/autoload.cfg
   trunk/096/pkg/utils/saver/commands/coun/savenow.src
   trunk/096/pkg/utils/saver/commands/coun/savenow.txt
   trunk/096/pkg/utils/saver/include/saver.inc
   trunk/096/pkg/utils/saver/pkg.cfg
   trunk/096/pkg/utils/saver/saver.src
   trunk/096/pkg/utils/scheduler/include/scheduler.inc
   trunk/096/pkg/utils/scheduler/pkg.cfg
   trunk/096/pkg/utils/scheduler/scheduler.src
   trunk/096/pkg/utils/servperf/config/icp.cfg
   trunk/096/pkg/utils/servperf/pkg.cfg
   trunk/096/pkg/utils/servperf/recbandwidth.src
   trunk/096/pkg/utils/servperf/start.src
   trunk/096/pkg/utils/servperf/www/all_scripts.asp
   trunk/096/pkg/utils/servperf/www/bandwidth.asp
   trunk/096/pkg/utils/servperf/www/header.inc
   trunk/096/pkg/utils/servperf/www/index.asp
   trunk/096/pkg/utils/servperf/www/iostats.asp
   trunk/096/pkg/utils/servperf/www/long_running_scripts.asp
   trunk/096/pkg/utils/servperf/www/npcgroup.asp
   trunk/096/pkg/utils/servperf/www/running_scripts.asp
   trunk/096/pkg/utils/servperf/www/script_profiles.asp
   trunk/096/pkg/utils/servperf/www/scriptex.asp
   trunk/096/pkg/utils/servperf/www/storage.asp
   trunk/096/pkg/utils/servperf/www/storagearea.asp
   trunk/096/pkg/utils/unicodeutils/pkg.cfg
   trunk/096/pkg/utils/unicodeutils/unicode.inc
   trunk/096/pkg/utils/unicodeutils/utilsUnicode.inc
   trunk/096/pkg/utils/utilsdate/constsDate.inc
   trunk/096/pkg/utils/utilsdate/pkg.cfg
   trunk/096/pkg/utils/utilsdate/utilsDate.inc
   trunk/096/pkg/utils/utilsdate/utilsStrings.inc
   trunk/096/pol.cfg
   trunk/096/regions/fish.cfg
   trunk/096/regions/light.cfg
   trunk/096/regions/ore.cfg
   trunk/096/regions/regions.cfg
   trunk/096/regions/resource.cfg
   trunk/096/regions/weather.cfg
   trunk/096/regions/wood.cfg
   trunk/096/scripts/ai/animal.src
   trunk/096/scripts/ai/appraiser.src
   trunk/096/scripts/ai/banker.src
   trunk/096/scripts/ai/barber.src
   trunk/096/scripts/ai/barker.src
   trunk/096/scripts/ai/battleMage.src
   trunk/096/scripts/ai/bladeSpirit.src
   trunk/096/scripts/ai/bucsBanker.src
   trunk/096/scripts/ai/bucsTownHealer.src
   trunk/096/scripts/ai/cat.src
   trunk/096/scripts/ai/chicken.src
   trunk/096/scripts/ai/combat/animalCombatEvent.inc
   trunk/096/scripts/ai/combat/bladeCombatEvent.inc
   trunk/096/scripts/ai/combat/bladeFight.inc
   trunk/096/scripts/ai/combat/defaultCombatEvent.inc
   trunk/096/scripts/ai/combat/fight.inc
   trunk/096/scripts/ai/combat/fireCombatEvent.inc
   trunk/096/scripts/ai/combat/healerCombatEvent.inc
   trunk/096/scripts/ai/combat/immobileFight.inc
   trunk/096/scripts/ai/combat/packFight.inc
   trunk/096/scripts/ai/combat/packFireCombatEvent.inc
   trunk/096/scripts/ai/combat/poisonCombatEvent.inc
   trunk/096/scripts/ai/combat/slimeCombatEvent.inc
   trunk/096/scripts/ai/combat/spellCombatEvent.inc
   trunk/096/scripts/ai/combat/spellFireEvent.inc
   trunk/096/scripts/ai/combat/spiderCombatEvent.inc
   trunk/096/scripts/ai/combat/vortexCombatEvent.inc
   trunk/096/scripts/ai/combat/warriorcombatevent.inc
   trunk/096/scripts/ai/cow.src
   trunk/096/scripts/ai/crier.src
   trunk/096/scripts/ai/davesHealer.src
   trunk/096/scripts/ai/dumbKillPCs.src
   trunk/096/scripts/ai/employed.src
   trunk/096/scripts/ai/entranced.src
   trunk/096/scripts/ai/escortee.src
   trunk/096/scripts/ai/firebreather.src
   trunk/096/scripts/ai/goodCaster.src
   trunk/096/scripts/ai/helpPCs.src
   trunk/096/scripts/ai/immobile.src
   trunk/096/scripts/ai/immobileSpell.src
   trunk/096/scripts/ai/killAny.src
   trunk/096/scripts/ai/killPCs.src
   trunk/096/scripts/ai/main/closeDistance.inc
   trunk/096/scripts/ai/main/defaultNonCombatEvent.inc
   trunk/096/scripts/ai/main/killPCsLoop.inc
   trunk/096/scripts/ai/main/loot.inc
   trunk/096/scripts/ai/main/mainLoop.inc
   trunk/096/scripts/ai/main/mainLoopAnimal.inc
   trunk/096/scripts/ai/main/mainLoopBarker.inc
   trunk/096/scripts/ai/main/mainLoopBladeSpirit.inc
   trunk/096/scripts/ai/main/mainLoopCat.inc
   trunk/096/scripts/ai/main/mainLoopChicken.inc
   trunk/096/scripts/ai/main/mainLoopCow.inc
   trunk/096/scripts/ai/main/mainLoopCrier.inc
   trunk/096/scripts/ai/main/mainLoopGood.inc
   trunk/096/scripts/ai/main/mainLoopImmobile.inc
   trunk/096/scripts/ai/main/mainLoopKillAny.inc
   trunk/096/scripts/ai/main/mainLoopMeek.inc
   trunk/096/scripts/ai/main/mainLoopQuestie.inc
   trunk/096/scripts/ai/main/mainLoopSheep.inc
   trunk/096/scripts/ai/main/mainLoopSlime.inc
   trunk/096/scripts/ai/main/mainLoopWolf.inc
   trunk/096/scripts/ai/main/meanLoop.inc
   trunk/096/scripts/ai/main/packKillPCsLoop.inc
   trunk/096/scripts/ai/main/setup.inc
   trunk/096/scripts/ai/main/sleepMode.inc
   trunk/096/scripts/ai/main/sleepModeCow.inc
   trunk/096/scripts/ai/main/sleepModeSheep.inc
   trunk/096/scripts/ai/meek.src
   trunk/096/scripts/ai/merchant.src
   trunk/096/scripts/ai/packFirebreather.src
   trunk/096/scripts/ai/person.src
   trunk/096/scripts/ai/pirate.src
   trunk/096/scripts/ai/playerMerchant.src
   trunk/096/scripts/ai/poisonElemental.src
   trunk/096/scripts/ai/poisonKillPCs.src
   trunk/096/scripts/ai/setup/animalSetup.inc
   trunk/096/scripts/ai/setup/archerSetup.inc
   trunk/096/scripts/ai/setup/crierSetup.inc
   trunk/096/scripts/ai/setup/killPCsSetup.inc
   trunk/096/scripts/ai/setup/setup.inc
   trunk/096/scripts/ai/setup/sheepSetup.inc
   trunk/096/scripts/ai/setup/spellSetup.inc
   trunk/096/scripts/ai/sheep.src
   trunk/096/scripts/ai/slime.src
   trunk/096/scripts/ai/spellFire.src
   trunk/096/scripts/ai/spellKillPCs.src
   trunk/096/scripts/ai/spiders.src
   trunk/096/scripts/ai/stablemaster.src
   trunk/096/scripts/ai/tamed.src
   trunk/096/scripts/ai/townGuard.src
   trunk/096/scripts/ai/townHealer.src
   trunk/096/scripts/ai/townPerson.src
   trunk/096/scripts/ai/undead.src
   trunk/096/scripts/ai/undeadKillPCs.src
   trunk/096/scripts/ai/vortexAI.src
   trunk/096/scripts/ai/wolf.src
   trunk/096/scripts/ai/worker.src
   trunk/096/scripts/console/NPCCount.src
   trunk/096/scripts/console/about.src
   trunk/096/scripts/console/itemCount.src
   trunk/096/scripts/console/online.src
   trunk/096/scripts/console/reloadConfig.src
   trunk/096/scripts/console/removeChars.src
   trunk/096/scripts/console/save.src
   trunk/096/scripts/console/shutdown.src
   trunk/096/scripts/console/time.src
   trunk/096/scripts/control/backpackRemove.src
   trunk/096/scripts/control/bookInsert.src
   trunk/096/scripts/control/bookRemove.src
   trunk/096/scripts/control/canInsert.src
   trunk/096/scripts/control/canRemove.src
   trunk/096/scripts/control/fireControl.src
   trunk/096/scripts/control/makeHitScript.src
   trunk/096/scripts/control/noRemove.src
   trunk/096/scripts/control/onInsert.src
   trunk/096/scripts/control/onRemove.src
   trunk/096/scripts/control/paraControl.src
   trunk/096/scripts/control/poisonControl.src
   trunk/096/scripts/control/shelfInsert.src
   trunk/096/scripts/control/shelfRemove.src
   trunk/096/scripts/control/spiderWebControl.src
   trunk/096/scripts/doRes.src
   trunk/096/scripts/ecompile.cfg
   trunk/096/scripts/ecompile.cfg.example
   trunk/096/scripts/include/arrays.inc
   trunk/096/scripts/include/attributes.inc
   trunk/096/scripts/include/bard.inc
   trunk/096/scripts/include/bitwise.inc
   trunk/096/scripts/include/bounty.inc
   trunk/096/scripts/include/canAccess.inc
   trunk/096/scripts/include/client.inc
   trunk/096/scripts/include/clock.inc
   trunk/096/scripts/include/coords.inc
   trunk/096/scripts/include/dist.inc
   trunk/096/scripts/include/eventID.inc
   trunk/096/scripts/include/exception.inc
   trunk/096/scripts/include/fields.inc
   trunk/096/scripts/include/findCity.inc
   trunk/096/scripts/include/firewall.inc
   trunk/096/scripts/include/guildFunctions.inc
   trunk/096/scripts/include/gumpUtil.inc
   trunk/096/scripts/include/help.inc
   trunk/096/scripts/include/innCheck.inc
   trunk/096/scripts/include/insertSound.inc
   trunk/096/scripts/include/isValidLoc.inc
   trunk/096/scripts/include/localization.inc
   trunk/096/scripts/include/log.inc
   trunk/096/scripts/include/magic.inc
   trunk/096/scripts/include/math.inc
   trunk/096/scripts/include/messages.inc
   trunk/096/scripts/include/mobileID.inc
   trunk/096/scripts/include/mrcSpawn.inc
   trunk/096/scripts/include/myUtil.inc
   trunk/096/scripts/include/noto.inc
   trunk/096/scripts/include/objtype.inc
   trunk/096/scripts/include/packets.inc
   trunk/096/scripts/include/properties.inc
   trunk/096/scripts/include/recallRune.inc
   trunk/096/scripts/include/reportMurder.inc
   trunk/096/scripts/include/res.inc
   trunk/096/scripts/include/resPenalty.inc
   trunk/096/scripts/include/scripts.inc
   trunk/096/scripts/include/selChar.inc
   trunk/096/scripts/include/skillLists.inc
   trunk/096/scripts/include/skillPoints.inc
   trunk/096/scripts/include/snooping.inc
   trunk/096/scripts/include/sorting.inc
   trunk/096/scripts/include/sound.inc
   trunk/096/scripts/include/spellAttack.inc
   trunk/096/scripts/include/spellRestrictions.inc
   trunk/096/scripts/include/startEqp.inc
   trunk/096/scripts/include/statMod.inc
   trunk/096/scripts/include/std.inc
   trunk/096/scripts/include/string.inc
   trunk/096/scripts/include/stringArrays.inc
   trunk/096/scripts/include/sysEvent.inc
   trunk/096/scripts/include/teleporters.inc
   trunk/096/scripts/include/tempMod.inc
   trunk/096/scripts/include/tileEffects.inc
   trunk/096/scripts/include/time.inc
   trunk/096/scripts/include/toolWear.inc
   trunk/096/scripts/include/utility.inc
   trunk/096/scripts/include/webPage.inc
   trunk/096/scripts/include/yesNo.inc
   trunk/096/scripts/itemRes.src
   trunk/096/scripts/items/coords.src
   trunk/096/scripts/items/dungTele.src
   trunk/096/scripts/items/fireTrap.src
   trunk/096/scripts/items/fires.src
   trunk/096/scripts/items/key.src
   trunk/096/scripts/items/makeDTele.src
   trunk/096/scripts/items/moongate.src
   trunk/096/scripts/items/pickLock.src
   trunk/096/scripts/items/poisonField.src
   trunk/096/scripts/items/resField.src
   trunk/096/scripts/items/rune.src
   trunk/096/scripts/items/telescope.src
   trunk/096/scripts/items/vendorDeed.src
   trunk/096/scripts/items/walkOn.src
   trunk/096/scripts/items/walkOnParaField.src
   trunk/096/scripts/misc/boat.src
   trunk/096/scripts/misc/chrdeath.src
   trunk/096/scripts/misc/dblclickself.src
   trunk/096/scripts/misc/death.src
   trunk/096/scripts/misc/decay.src
   trunk/096/scripts/misc/demod.src
   trunk/096/scripts/misc/help.src
   trunk/096/scripts/misc/idle.src
   trunk/096/scripts/misc/logoff.src
   trunk/096/scripts/misc/logofftest.src
   trunk/096/scripts/misc/logon.src
   trunk/096/scripts/misc/namechecker.src
   trunk/096/scripts/misc/oncreate.src
   trunk/096/scripts/misc/ondelete.src
   trunk/096/scripts/misc/reconnect.src
   trunk/096/scripts/misc/runalways.src
   trunk/096/scripts/misc/skillwin.src
   trunk/096/scripts/misc/unmod.src
   trunk/096/scripts/storageWipe.src
   trunk/096/scripts/testFile.esc
   trunk/096/scripts/util/conflicts.inc
   trunk/096/scripts/util/creature.inc
   trunk/096/scripts/util/homeTurf.inc
   trunk/096/scripts/util/key.inc
   trunk/096/scripts/util/lookForTroubleAI.inc
   trunk/096/scripts/util/loot.inc
   trunk/096/scripts/util/repair.inc
   trunk/096/scripts/util/spawn.inc
   trunk/096/scripts/www/index.htm
   trunk/096/scripts/www/online.src
   trunk/096/scripts/www/running_scripts.src
   trunk/096/scripts/www/serverstats.src
   trunk/096/scripts/www/servperf/bandwidth.asp
   trunk/096/scripts/www/servperf/header.inc
   trunk/096/scripts/www/servperf/index.asp
   trunk/096/scripts/www/servperf/long_running_scripts.asp
   trunk/096/scripts/www/servperf/npcgroup.asp
   trunk/096/scripts/www/servperf/running_scripts.asp
   trunk/096/scripts/www/servperf/script_profiles.asp
   trunk/096/starthere.bat
Log:



Property changes on: trunk/096/CoreChanges-096.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/TODO.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/batchfiles/cleanup.bat
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/batchfiles/ecompile.bat
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/batchfiles/loopPOL.bat
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/batchfiles/pol.bat
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/batchfiles/realmgen.bat
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/animxlate.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/armrdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/armrzone.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/bannedips.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/boats.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/bookstorage.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/circles.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/cloths.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/cmds.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/colors.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/combat.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/console.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/days.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/equip.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/equip2.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/fileaccess.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/golocs.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/gzone.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/innlocation.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/insertsound.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/landtiles.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/lootgroup.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/menus.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/movecost.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/mrcspawn.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/multis.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/names.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/nlootgroup.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/npcdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/npcequip.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/repsys.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/resourceList.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/servers.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/servspecopt.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/sets.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/skills.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/spawngroups.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/spawnregions.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/speechgroup.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/spells.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/stacking.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/starteqp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/startloc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/teleporters.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/tiles.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/use_stuff.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/watch.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/config/wepndesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/data/accounts.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/data/datastore.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/data/guilds.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/data/items.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/data/multis.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/data/npcequip.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/data/npcs.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/data/objects.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/data/pcequip.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/data/pcs.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/data/permitems.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/data/pol.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/data/resource.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/data/storage.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/distro-changelog.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/basicem.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/boatem.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/builtintextcmds.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/cfgfileem.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/commands.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/configfiles.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/datafileem.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/escriptguide.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/events.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/fileem.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/gumps.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/httpem.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/index.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/mathem.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/naming.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/nodes.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/npcem.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/objref.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/osem.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/performance.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/picture_gump_finish_1.png
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/polsysem.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/privilages.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/scripting.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/scripttypes.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/unicodeem.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/uoem.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/docs/utilem.html
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/misc/world.dor.dat
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/addbook.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/booklock.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/critterpurge.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/dyehair.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/forgive.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/grantpriv.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/gzone.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/newAccount.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/nodewipe.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/release.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/restart.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/restartall.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/revokepriv.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/setcmdlevel.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/setmurder.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/storebook.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/admin/unloadcfg.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/coun/conceal.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/coun/counpage.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/coun/disable.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/coun/enable.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/coun/fetch.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/coun/gmbcast.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/coun/goto.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/coun/mtele.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/coun/nsight.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/coun/reveal.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/coun/tele.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/coun/time.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/action.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/addset.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/addtele.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/attack.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/bow.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/crim.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/d.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/destroy.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/destroyboat.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/destroymulti.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/dmany.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/e.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/ekill.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/equip.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/eraseglobal.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/eraseobjproperty.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/freeze.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/getCProp.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/getglobal.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/getprop.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/getscript.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/getstatic.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/getusescript.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/gmpage.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/goserial.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/ident.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/info.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/ip.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/iteminfo.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/jump.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/kick.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/kill.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/lkill.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/lock.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/makekey.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/makeregs.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/makeset.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/maketele.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/mdestroy.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/meplayer.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/mflip.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/moveitem.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/movetocont.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/myform.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/powerdown.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/powerup.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/privedit.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/propedit.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/recreate.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/rekey.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/relock.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/res.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/resme.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/seehidden.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/setglobal.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/setmovable.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/setobjproperty.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/setprop.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/setscript.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/setskill.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/settextprop.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/setusescript.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/sfx.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/shave.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/showstats.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/spellbook.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/squelch.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/strip.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/summon.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/summon.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/tame.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/thaw.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/thawme.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/tile.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/unlock.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/unlockradius.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/whereship.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/wipebank.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/gm/writequip.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/include/goAdd.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/include/goEdit.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/include/goGumps.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/include/goTemplate.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/include/goText.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/player/consider.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/player/flip.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/player/help.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/player/help.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/player/msg.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/player/resign.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/bank.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/bcast.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/bcastas.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/copylook.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/create.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/createat.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/createlightsource.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/createnpc.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/createstack.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/createstackat.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/cx.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/cy.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/cz.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/darken.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/darttrap.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/dupe.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/explosiontrap.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/gm.src
___________________________________________________________________
Name: svn:keywords
   + Id

Modified: trunk/096/pkg/commands/seer/go.src
===================================================================
--- trunk/096/pkg/commands/seer/go.src	2005-09-25 08:50:11 UTC (rev 235)
+++ trunk/096/pkg/commands/seer/go.src	2005-09-25 09:06:19 UTC (rev 236)
@@ -38,11 +38,11 @@
 include ":gumps:include/gumps";
 include ":gumps:include/gumps_ex";
 include ":gumps:include/yesno";
-include ":commands:include/go-add";
-include ":commands:include/go-edit";
-include ":commands:include/go-text";
-include ":commands:include/go-gumps";
-include ":commands:include/go-template";
+include ":commands:include/goAdd";
+include ":commands:include/goEdit";
+include ":commands:include/goText";
+include ":commands:include/goGumps";
+include ":commands:include/goTemplate";
 
 CONST ADD_NEW_PUBLIC      := 0x20001;
 CONST ADD_NEW_PRIVATE     := 0x20002;


Property changes on: trunk/096/pkg/commands/seer/go.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/hideme.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/lockdown.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/lockradius.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/lognotify.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/mark.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/mcx.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/mcy.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/mcz.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/mpx.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/mpy.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/mpz.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/mteleto.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/music.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/openpack.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/poisontrap.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/px.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/py.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/pz.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/recall.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/refreshme.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/rename.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/sayabove.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/sayabovepvt.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/setAnchor.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/setintproperty.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/setlight.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/teleto.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/seer/where.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/clock.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/firestorm.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/generatespawnfiles.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/getmapinfo.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/getobjprop.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/getregionstring.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/itemcount.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/killmods.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/killpid.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/landtile.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/makemap.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/openit.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/props.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/setescript.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/setuscript.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/smember.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/startscript.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/commands/test/worldheight.src
___________________________________________________________________
Name: svn:keywords
   + Id

Modified: trunk/096/pkg/config/config/icp.cfg
===================================================================
--- trunk/096/pkg/config/config/icp.cfg	2005-09-25 08:50:11 UTC (rev 235)
+++ trunk/096/pkg/config/config/icp.cfg	2005-09-25 09:06:19 UTC (rev 236)
@@ -1,3 +1,4 @@
+# $Id$
 ICP Register
 {
         Name            Shard Config


Property changes on: trunk/096/pkg/config/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id

Modified: trunk/096/pkg/config/config/shardconfig.cfg
===================================================================
--- trunk/096/pkg/config/config/shardconfig.cfg	2005-09-25 08:50:11 UTC (rev 235)
+++ trunk/096/pkg/config/config/shardconfig.cfg	2005-09-25 09:06:19 UTC (rev 236)
@@ -1,4 +1,4 @@
-# $folko$
+# $Id$
 #
 # Purpose
 # Configure various shard behaviours


Property changes on: trunk/096/pkg/config/config/shardconfig.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/config/include/config.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/config/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/config/uoclient.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/expansions/aos/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/expansions/aos/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/expansions/aos/skills/chivalry/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/expansions/aos/skills/chivalry/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/expansions/aos/skills/focus/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/expansions/aos/skills/focus/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/expansions/aos/skills/necromancy/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/expansions/aos/skills/necromancy/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/expansions/lbr/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/expansions/lbr/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/expansions/uor/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/expansions/uor/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/bountyboard/bounty.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/bountyboard/bountyWatcher.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/bountyboard/bountyboard.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/bountyboard/collectBounty.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/bountyboard/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/bountyboard/config/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/bountyboard/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/bountyboard/readme.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/bountyboard/start.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/bulletinboard/bulletinboard.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/bulletinboard/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/bulletinboard/config/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/bulletinboard/destroyboard.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/bulletinboard/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/bulletinboard/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/commcrystals/commCrystal.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/commcrystals/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/commcrystals/crystalControl.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/commcrystals/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/commcrystals/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/corpses/boneControl.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/corpses/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/corpses/corpseControl.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/corpses/corpseFunctions.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/corpses/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/corpses/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/decorations/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/decorations/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/decorations/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/doors/closeDoor.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/doors/door.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/doors/door.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/doors/doors.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/doors/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/doors/openDoor.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/doors/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/doors/setFlow.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/dyes/dyeBan.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/dyes/dyeable.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/dyes/furniture.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/dyes/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/dyes/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/dyes/useDyes.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/food/drink.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/food/eat.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/food/food.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/food/hunger.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/food/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/food/logon.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/food/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/guildstone/command/player/c.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/guildstone/command/player/gc.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/guildstone/guildControl.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/guildstone/guildData.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/guildstone/guildDeed.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/guildstone/guildDestroy.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/guildstone/guildManager.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/guildstone/guildMethods.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/guildstone/guildMove.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/guildstone/guildStone.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/guildstone/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/guildstone/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/guildstone/start.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/interiordecoratortool/interiordecorator.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/interiordecoratortool/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/interiordecoratortool/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/lighting/change.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/lighting/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/lighting/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/magic/chargedSpellItem.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/magic/getSpellID.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/magic/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/magic/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/magic/scroll.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/moongates/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/moongates/moongate.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/moongates/moongates.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/moongates/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/moongates/start.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/moongates/systemMoongate.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/repaircontract/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/repaircontract/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/repaircontract/repairDeed.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/runebook/customSpells.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/runebook/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/runebook/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/runebook/runeInsert.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/runebook/runebook.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/sysbook/command/admin/bookSpawnTest.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/sysbook/command/admin/bookSweep.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/sysbook/command/admin/shelfclear.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/sysbook/command/seer/bookLock.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/sysbook/command/seer/setBook.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/sysbook/command/seer/shelfe.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/sysbook/command/seer/shelfs.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/sysbook/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/sysbook/openBook.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/sysbook/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/sysbook/readOnly.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/sysbook/shelfStock.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/sysbook/start.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/sysbook/writable.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/sysbook/zulubooks.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/training/archeryButte.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/training/dummyPickpocket.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/training/dummyTraining.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/training/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/training/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/traps/hiddenTrap.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/traps/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/traps/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/traps/poisonTrapTriggered.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/traps/traps.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/trash/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/trash/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/trash/trash.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/trash/trashControl.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/trash/trashDeed.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/trash/trashInsert.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/trash/trashRemove.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/treasuremap/decodeMap.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/treasuremap/guardians.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/treasuremap/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/treasuremap/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/treasuremap/treasure.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/usestuff/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/usestuff/useStuff.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/wands/getSpellID.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/wands/magicWands.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/items/wands/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/brain.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/commands/gm/attack.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/commands/gm/cmassacre.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/commands/gm/createnpc.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/commands/gm/makeswarm.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/commands/gm/massacre.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/commands/gm/npcsleep.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/commands/gm/npcwipe.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/commands/gm/puttosleep.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/commands/gm/removenpc.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/commands/gm/resetnpcs.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/commands/gm/restartnpc.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/commands/gm/sendevent.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/commands/test/cfgtest.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/commands/test/unloadNPCDescs.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/combat.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/cycle.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/disengaged.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/doubleClick.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/enteredArea.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/goneCriminal.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/itemGiven.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/leftArea.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/listen.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/lookAround.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/restart.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/shouldWatch.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/sleep.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/complete/testnpc/virtual.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/config/hatelist.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/include/braincore/cycleScript.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/include/braincore/error.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/include/braincore/eventProcessor.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/include/braincore/movement.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/include/braincore/setup.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/include/braincore/sleep.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/include/eventid.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/include/npcCommands.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/include/npcError.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/include/npcInit.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/include/npcNerves.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/include/npcSettings.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/include/npcUtil.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/include/npcWatchList.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/npcdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/ai_brain/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/animaltrainer/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/animaltrainer/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/barber/hairDye.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/barber/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/barber/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/npcutils/NPCBackpacks.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/npcutils/NPCCast.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/npcutils/NPCKeeper.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/npcutils/NPCUtil.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/npcutils/anchors.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/npcutils/animal.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/npcutils/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/npcutils/randName.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/npcutils/randNameUtil.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/npcutils/speech.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/npcutils/trainSkill.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/npcutils/vetement.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/playervendor/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/playervendor/payCounter.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/mobiles/playervendor/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/accountLayout.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/accts.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/addGoLoc.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/campSpawner.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/commands/gm/campspawner.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/commands/gm/chestspawner.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/commands/gm/gmtools.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/commands/gm/hide.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/commands/gm/jailkeeper.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/cursed.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/go.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/goLayout.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/golocs.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/gotoLayout.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/greyItem.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/guardians.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/healstone.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/infernoTrap.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/info.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/itemAddSet.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/itemGo.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/jailkeeper.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/layout.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/lever.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/lightingItem.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/mailkeeper.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/makeHidden.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/makeTel.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/spawnTest.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/spawnerLayout.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/start.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/summonNPC.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/toggleOps.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/gmtools/toolTraps.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/hooks/attributeCore.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/hooks/attributes.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/hooks/checkskill.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/hooks/newCombat.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/hooks/newParry.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/hooks/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/hooks/regen.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/hooks/shilSkill.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/hooks/skillsdef.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/hooks/syshook.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/hooks/titleCheck.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/hooks/uoclient.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/hooks/uoskills.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/hooks/vitals.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/motd/commands/player/motd.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/motd/commands/player/motd.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/motd/docs/README.TXT
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/motd/logon.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/motd/motdConfig.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/motd/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/motd/reconnect.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/other/motd/utilsGumps.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/alchemy.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/alchemy.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/blackPotion.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/bluePotion.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/drinkPotion.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/exploder.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/explosionPotion.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/explosionTimer.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/greenPotion.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/orangePotion.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/potion.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/potionInsert.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/potionKeg.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/potionKegs.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/redPotion.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/whitePotion.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/alchemy/yellowPotion.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/anatomy/anatomy.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/anatomy/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/anatomy/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/animallore/animalLore.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/animallore/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/animallore/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/armslore/armsLore.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/armslore/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/armslore/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/begging/begging.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/begging/begging.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/begging/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/begging/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/blacksmithy/blacksmithy.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/blacksmithy/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/blacksmithy/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/blacksmithy/makeBlacksmithItems.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/blacksmithy/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/bowcraft/bowcraft.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/bowcraft/bowcraftFunctions.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/bowcraft/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/bowcraft/fletch.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/bowcraft/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/bowcraft/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/camping/bedroll.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/camping/camping.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/camping/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/camping/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/camping/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/carpentry/buildKeg.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/carpentry/carpentry.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/carpentry/carpentry.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/carpentry/carpentryDeed.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/carpentry/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/carpentry/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/carpentry/loomDeed.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/carpentry/ovenDeed.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/carpentry/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/cartography/cartography.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/cartography/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/cartography/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/cartography/makeMap.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/cartography/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/cooking/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/cooking/cooking.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/cooking/cooking.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/cooking/fillPitcher.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/cooking/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/cooking/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/cooking/use_stuff.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/detecthidden/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/detecthidden/detectHidden.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/detecthidden/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/evalint/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/evalint/evalInt.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/evalint/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/fishing/SOSBottle.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/fishing/SOSMessage.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/fishing/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/fishing/fishing.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/fishing/fishingFunctions.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/fishing/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/fishing/magicFish.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/fishing/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/fishing/sosarea.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/forensicevaluation/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/forensicevaluation/evidence.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/forensicevaluation/forensic.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/forensicevaluation/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/forensicevaluation/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/healing/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/healing/healing.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/healing/healing.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/healing/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/healing/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/herding/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/herding/herd.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/herding/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/hiding/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/hiding/hiding.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/hiding/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/inscription/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/inscription/inscription.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/inscription/inscription.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/inscription/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/itemid/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/itemid/itemID.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/itemid/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/lockpicking/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/lockpicking/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/lockpicking/lockpicking.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/lockpicking/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/lumberjacking/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/lumberjacking/lumberjacking.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/lumberjacking/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/agility.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/archCure.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/archProt.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/bladeSpirit.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/bless.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/chainLightning.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/clumsy.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/createFood.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/cunning.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/cure.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/curse.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/dispel.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/dispelField.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/eBolt.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/earthquake.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/energyField.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/explosion.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/feeblemind.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/fireField.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/fireball.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/flameStrike.src.temp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/gHeal.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/gate.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/harm.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/heal.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/incognito.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/incognito.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/invisibility.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/lightning.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/magicArrow.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/magicLock.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/magicTrap.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/magicUntrap.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/magiccircles.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/manaDrain.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/manaVamp.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/mark.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/massCurse.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/massDispel.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/meteorSwarm.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/mindBlast.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/nightSight.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/pField.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/paraField.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/paralyze.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/poison.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/poisonDamage.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/poisonField.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/polymorph.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/protection.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/reactiveArmor.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/recall.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/reflect.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/reflect.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/resurrect.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/reveal.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/spells.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/strength.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/summon.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/summonAir.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/summonCreature.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/summonDaemon.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/summonEarth.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/summonFire.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/summonWater.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/telekinesis.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/teleport.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/unlock.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/vortex.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/wallOfStone.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/magery/weaken.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/meditation/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/meditation/medCheck.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/meditation/meditation.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/meditation/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/mining/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/mining/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/mining/logon.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/mining/mining.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/mining/oreCore.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/mining/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/mining/resmelt.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/mining/smelting.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/mining/start.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/musicianship/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/musicianship/entice.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/musicianship/enticedAI.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/musicianship/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/musicianship/musicianship.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/musicianship/peacemaking.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/musicianship/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/musicianship/provocation.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/poisoning/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/poisoning/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/poisoning/poisoning.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/removetrap/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/removetrap/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/removetrap/removeTrap.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/spiritspeak/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/spiritspeak/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/spiritspeak/spiritSpeak.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/stealing/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/stealing/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/stealing/stealing.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/stealth/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/stealth/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/stealth/stealth.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tailoring/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tailoring/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tailoring/leather.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tailoring/makeClothItems.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tailoring/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tailoring/scissors.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tailoring/scissors.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tailoring/spinning.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tailoring/tailor.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tailoring/tailoring.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tailoring/tailoring.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tailoring/tailoringFunctions.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/taming/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/taming/happyCounter.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/taming/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/taming/stableCounter.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/taming/taming.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tasteid/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tasteid/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tasteid/tasteID.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tinkering/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tinkering/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tinkering/makeComplexItem.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tinkering/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tinkering/time.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tinkering/tinker.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tinkering/tinkerTraps.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tinkering/tinkering.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tinkering/tinkering.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tracking/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tracking/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tracking/tracking.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/tracking/tracking.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/veterinary/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/veterinary/healing.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/veterinary/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/skills/veterinary/vet.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/attributes.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/commands/test/attribconvert.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/config/settings.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/hooks/vitalInit.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/include/attributeConstants.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/include/attributes.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/include/attributes_ex.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/include/regen.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/include/settings.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/include/skillCheck.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/include/skills.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/include/stats.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/include/vitals.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/skills.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/uoclient.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/uoskills.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/attributes/vitals.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/bank/bank.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/bank/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/bank/start.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/boat/boat.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/boat/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/boat/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/boat/plank.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/boat/plankControl.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/boat/plankUtil.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/boat/plankWalk.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/boat/shipDeed.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/boat/tillerman.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/bewitchedHit.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/bladeSpiritHit.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/bladed.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/chargeUpkeep.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/deathrobe.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/destroy.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/earthElemental.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/equip.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/equip.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/hitScriptInc.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/itemControl.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/maceHit.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/magicarmor.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/magiccloth.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/magicweaps.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/mainHitScript.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/mobPoisonHit.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/poisonHit.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/reactiveArmorHit.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/setWeaponHit.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/silverHit.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/unequip.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/vortexHit.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/wrestleControl.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/combat/wrestlingHitScript.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/daynight/dayNight.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/daynight/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/daynight/moonlight.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/daynight/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/daynight/snowRain.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/daynight/spyglass.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/daynight/start.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/daynight/wEffect.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/daynight/weather.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/daynight/weather.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/housing/changeOwner.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/housing/houseBanning.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/housing/houseDeed.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/housing/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/housing/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/housing/secureCont.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/housing/sign.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/housing/signControl.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/merchantnodes/commands/admin/grabnodes.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/merchantnodes/commands/admin/seednode.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/merchantnodes/commands/gm/createnode.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/merchantnodes/commands/gm/nodemanager.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/merchantnodes/commands/gm/resetstock.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/merchantnodes/guardNode.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/merchantnodes/guardNodeControl.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/merchantnodes/itemdesc.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/merchantnodes/merchantNode.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/merchantnodes/merchantNodeControl.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/merchantnodes/merchantNodeDestroy.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/merchantnodes/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/merchantnodes/restock.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/commands/gm/desolation.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/commands/gm/resetcalendar.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/commands/gm/setday.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/commands/gm/setmonth.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/commands/gm/setyear.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/commands/player/lookup.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/commands/seer/localthunderstorm.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/commands/seer/setlight.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/commands/seer/setlocallight.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/commands/seer/setweather.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/config/nature.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/dayNight.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/docs/changes.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/docs/readme.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/include/nature.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/logon.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/moons.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/setLight.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/setup.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/snowRain.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/start.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/thunderstorm.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/weather.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/nature/wind.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/perfmon/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/perfmon/recBandwidth.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/perfmon/start.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/poisonwatcher/commands/gm/curepoison.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/poisonwatcher/commands/gm/curespecific.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/poisonwatcher/commands/gm/givepoison.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/poisonwatcher/commands/gm/listpoisons.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/poisonwatcher/commands/gm/listpoisonsbytype.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/poisonwatcher/logon.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/poisonwatcher/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/poisonwatcher/poisons.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/poisonwatcher/poisons.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/poisonwatcher/poisonscripts/defaultPoison.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/poisonwatcher/poisonwatcher.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/poisonwatcher/reconnect.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/pushthrough/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/pushthrough/pushhook.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/pushthrough/syshook.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/config/firstrun.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/config/settings.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/engines/item/settings.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/engines/item/spawncycle.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/engines/npc/settings.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/engines/npc/spawncycle.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/engines/prox/settings.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/engines/prox/spawncycle.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/include/commontasks.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/include/engines.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/include/errors.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/include/events.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/include/groups.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/include/realms.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/include/regions.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/include/settings.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/include/spawnerUtil.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/initializer/firstrun.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/spawnsystem.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/start.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/textcmd/gm/spawner.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spawnsystem/www/spawncontrol.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spellcasting/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spellcasting/spellcast.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/spellcasting/spellcastFunctions.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/stafflist/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/stafflist/staffList.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/stafflist/start.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/storage/include/storage.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/storage/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/timer/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/timer/start.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/systems/timer/timers.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/control/checkpackages.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/control/commands/coun/control.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/control/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/control/docs/changes.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/control/docs/readme.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/control/include/icp-commands.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/control/include/icp-generalinfo.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/control/include/icp-gumps.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/control/include/icp-index.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/control/include/icp-itemdesc.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/control/include/icp-pkgpanel.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/control/include/icp-scripts.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/control/include/icp-util.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/control/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/control/start.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/datafile/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/datafile/include/datafile.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/datafile/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/commands/admin/gumpprompt.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/commands/admin/requestgump.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/commands/admin/resizepic.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/commands/admin/samplegump.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/commands/admin/yesno.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/config/GumpInfo.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/docs/License.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/docs/changes.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/docs/readme.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/include/gumpprompt.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/include/gumps.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/include/gumps_ex.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/include/old/old-gumps.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/include/requestgump.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/include/yesno.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/gumps/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/saver/autoload.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/saver/commands/coun/savenow.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/saver/commands/coun/savenow.txt
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/saver/include/saver.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/saver/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/saver/saver.src
___________________________________________________________________
Name: svn:keywords
   + Id

Modified: trunk/096/pkg/utils/scheduler/include/scheduler.inc
===================================================================
--- trunk/096/pkg/utils/scheduler/include/scheduler.inc	2005-09-25 08:50:11 UTC (rev 235)
+++ trunk/096/pkg/utils/scheduler/include/scheduler.inc	2005-09-25 09:06:19 UTC (rev 236)
@@ -1,4 +1,4 @@
-/* $Id: scheduler.inc,v 1.1 2004/03/16 14:05:46 folko Exp $
+/* $Id$
  *
  * Purpose
  * Provide various functions and constants for the automatic script loader / scheduler


Property changes on: trunk/096/pkg/utils/scheduler/include/scheduler.inc
___________________________________________________________________
Name: svn:keywords
   + Id

Modified: trunk/096/pkg/utils/scheduler/pkg.cfg
===================================================================
--- trunk/096/pkg/utils/scheduler/pkg.cfg	2005-09-25 08:50:11 UTC (rev 235)
+++ trunk/096/pkg/utils/scheduler/pkg.cfg	2005-09-25 09:06:19 UTC (rev 236)
@@ -1,4 +1,4 @@
-# $Id: pkg.cfg,v 1.2 2004/05/02 11:02:23 folko Exp $
+# $Id$
 Enabled         1
 Name            scheduler
 Maintainer      Hesinde-Team


Property changes on: trunk/096/pkg/utils/scheduler/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id

Modified: trunk/096/pkg/utils/scheduler/scheduler.src
===================================================================
--- trunk/096/pkg/utils/scheduler/scheduler.src	2005-09-25 08:50:11 UTC (rev 235)
+++ trunk/096/pkg/utils/scheduler/scheduler.src	2005-09-25 09:06:19 UTC (rev 236)
@@ -1,4 +1,4 @@
-/* $Id: scheduler.src,v 1.1 2004/03/16 14:05:46 folko Exp $
+/* $Id$
  *
  * Purpose
  * This script is called by the main start script.


Property changes on: trunk/096/pkg/utils/scheduler/scheduler.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/config/icp.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/recbandwidth.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/start.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/www/all_scripts.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/www/bandwidth.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/www/header.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/www/index.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/www/iostats.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/www/long_running_scripts.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/www/npcgroup.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/www/running_scripts.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/www/script_profiles.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/www/scriptex.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/www/storage.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/servperf/www/storagearea.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/unicodeutils/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/unicodeutils/unicode.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/unicodeutils/utilsUnicode.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/utilsdate/constsDate.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/utilsdate/pkg.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/utilsdate/utilsDate.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pkg/utils/utilsdate/utilsStrings.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/pol.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/regions/fish.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/regions/light.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/regions/ore.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/regions/regions.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/regions/resource.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/regions/weather.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/regions/wood.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/animal.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/appraiser.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/banker.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/barber.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/barker.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/battleMage.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/bladeSpirit.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/bucsBanker.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/bucsTownHealer.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/cat.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/chicken.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/animalCombatEvent.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/bladeCombatEvent.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/bladeFight.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/defaultCombatEvent.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/fight.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/fireCombatEvent.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/healerCombatEvent.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/immobileFight.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/packFight.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/packFireCombatEvent.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/poisonCombatEvent.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/slimeCombatEvent.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/spellCombatEvent.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/spellFireEvent.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/spiderCombatEvent.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/vortexCombatEvent.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/combat/warriorcombatevent.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/cow.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/crier.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/davesHealer.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/dumbKillPCs.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/employed.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/entranced.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/escortee.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/firebreather.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/goodCaster.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/helpPCs.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/immobile.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/immobileSpell.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/killAny.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/killPCs.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/closeDistance.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/defaultNonCombatEvent.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/killPCsLoop.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/loot.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoop.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoopAnimal.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoopBarker.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoopBladeSpirit.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoopCat.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoopChicken.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoopCow.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoopCrier.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoopGood.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoopImmobile.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoopKillAny.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoopMeek.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoopQuestie.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoopSheep.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoopSlime.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/mainLoopWolf.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/meanLoop.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/packKillPCsLoop.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/setup.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/sleepMode.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/sleepModeCow.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/main/sleepModeSheep.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/meek.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/merchant.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/packFirebreather.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/person.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/pirate.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/playerMerchant.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/poisonElemental.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/poisonKillPCs.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/setup/animalSetup.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/setup/archerSetup.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/setup/crierSetup.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/setup/killPCsSetup.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/setup/setup.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/setup/sheepSetup.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/setup/spellSetup.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/sheep.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/slime.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/spellFire.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/spellKillPCs.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/spiders.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/stablemaster.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/tamed.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/townGuard.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/townHealer.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/townPerson.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/undead.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/undeadKillPCs.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/vortexAI.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/wolf.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ai/worker.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/console/NPCCount.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/console/about.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/console/itemCount.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/console/online.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/console/reloadConfig.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/console/removeChars.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/console/save.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/console/shutdown.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/console/time.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/control/backpackRemove.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/control/bookInsert.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/control/bookRemove.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/control/canInsert.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/control/canRemove.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/control/fireControl.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/control/makeHitScript.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/control/noRemove.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/control/onInsert.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/control/onRemove.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/control/paraControl.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/control/poisonControl.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/control/shelfInsert.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/control/shelfRemove.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/control/spiderWebControl.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/doRes.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ecompile.cfg
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/ecompile.cfg.example
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/arrays.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/attributes.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/bard.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/bitwise.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/bounty.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/canAccess.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/client.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/clock.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/coords.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/dist.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/eventID.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/exception.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/fields.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/findCity.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/firewall.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/guildFunctions.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/gumpUtil.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/help.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/innCheck.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/insertSound.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/isValidLoc.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/localization.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/log.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/magic.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/math.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/messages.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/mobileID.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/mrcSpawn.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/myUtil.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/noto.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/objtype.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/packets.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/properties.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/recallRune.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/reportMurder.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/res.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/resPenalty.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/scripts.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/selChar.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/skillLists.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/skillPoints.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/snooping.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/sorting.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/sound.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/spellAttack.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/spellRestrictions.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/startEqp.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/statMod.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/std.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/string.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/stringArrays.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/sysEvent.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/teleporters.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/tempMod.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/tileEffects.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/time.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/toolWear.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/utility.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/webPage.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/include/yesNo.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/itemRes.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/items/coords.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/items/dungTele.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/items/fireTrap.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/items/fires.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/items/key.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/items/makeDTele.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/items/moongate.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/items/pickLock.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/items/poisonField.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/items/resField.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/items/rune.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/items/telescope.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/items/vendorDeed.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/items/walkOn.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/items/walkOnParaField.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/boat.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/chrdeath.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/dblclickself.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/death.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/decay.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/demod.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/help.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/idle.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/logoff.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/logofftest.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/logon.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/namechecker.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/oncreate.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/ondelete.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/reconnect.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/runalways.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/skillwin.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/misc/unmod.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/storageWipe.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/testFile.esc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/util/conflicts.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/util/creature.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/util/homeTurf.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/util/key.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/util/lookForTroubleAI.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/util/loot.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/util/repair.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/util/spawn.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/www/index.htm
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/www/online.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/www/running_scripts.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/www/serverstats.src
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/www/servperf/bandwidth.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/www/servperf/header.inc
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/www/servperf/index.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/www/servperf/long_running_scripts.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/www/servperf/npcgroup.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/www/servperf/running_scripts.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/scripts/www/servperf/script_profiles.asp
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/096/starthere.bat
___________________________________________________________________
Name: svn:keywords
   + Id



From muaddiblsd at berlios.de  Tue Sep 27 16:11:14 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Tue, 27 Sep 2005 16:11:14 +0200
Subject: [Poldistro-svn] r261 - in trunk/096/pkg/systems: . crafting crafting/config
Message-ID: <200509271411.j8REBEME017413@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-27 16:11:12 +0200 (Tue, 27 Sep 2005)
New Revision: 261

Added:
   trunk/096/pkg/systems/crafting/
   trunk/096/pkg/systems/crafting/config/
   trunk/096/pkg/systems/crafting/config/craftConfig.cfg
   trunk/096/pkg/systems/crafting/config/icp.cfg
   trunk/096/pkg/systems/crafting/config/resourceList.cfg
   trunk/096/pkg/systems/crafting/pkg.cfg
Log:
introduction of crafting package. Base cfgs and pkg directory.

Added: trunk/096/pkg/systems/crafting/config/craftConfig.cfg
===================================================================
--- trunk/096/pkg/systems/crafting/config/craftConfig.cfg	2005-09-26 14:02:50 UTC (rev 260)
+++ trunk/096/pkg/systems/crafting/config/craftConfig.cfg	2005-09-27 14:11:12 UTC (rev 261)
@@ -0,0 +1,201 @@
+######################################################################################
+#
+# Crafting Setup	Global Settings for crafting
+# {
+#	MaxAmount	Max Amount allowed to be crafted in a row from gump's amount entry
+#	DefaultAmount	Default amount in the text box when first using a skill
+#	RetainColor	0/1 for Off/On if skills allow retaining color of material
+#	Info		0/1 for Off/On if skills give the Info button for items
+#	MakeLast	0/1 for Off/On if skills give the Make Last button
+#	Resmelt		0/1 for Off/On if skills allow resmelting from crafting gump
+# }
+#
+######################################################################################
+#
+# Crafting Skills	List of all the names in the crafting system.
+# {
+#	Skill	alchemy
+#       Skill   blacksmithy
+#       Skill   carpentry
+#       Skill   cartography
+#	Skill	cooking
+#	Skill	fletching
+#	Skill	inscription
+#	Skill	tailoring
+#	Skill	tinkering
+# }
+#
+######################################################################################
+#
+# Crafting alchemy	Exists for EACH skill in skill list above. Settings per skill
+# {
+#	Name		Name you want. Must match what is sent by skill to gump command.
+#	Attribute	The Attribute it uses from Attributes.cfg
+#	CraftDelay	The delay between each loop while crafting items
+#	CraftAnim	The animation (0 if none) to play during each loop
+#	Repair		0/1 Off/On for giving the Repair button in gump
+#	Smelt		0/1 Off/On for giving the Resmelt button in gump
+#	MakersMark	0/1 Off/On for giving the Add Makers Mark button
+#	RetainColor	0/1 Off/On for giving Retain Color button
+#	MenuFile	String path of the location of the menu file
+#	ExceptionalName	The string to use when exceptional items are crafted. Example below.
+# }
+#
+# Exceptional Name Example: "an agapite helmet [exceptionalname crafter's name]"
+#			    "an agapite helmet [crafted by crafter's name]"
+#			    "an agapite helmet [crafted by Joe]"
+#
+# The exceptional name string, is prepended before the crafter's name in the brackets "[]".
+#
+######################################################################################
+
+Crafting Setup
+{
+	MaxAmount	10
+	DefaultAmount	1
+	RetainColor	1
+	Info		1
+	MakeLast	1
+	Resmelt		1
+}
+
+Crafting Skills
+{
+	Skill	alchemy
+        Skill   blacksmithy
+        Skill   carpentry
+        Skill   cartography
+	Skill	cooking
+	Skill	fletching
+	Skill	inscription
+	Skill	tailoring
+	Skill	tinkering
+}
+
+Crafting alchemy
+{
+	Name		alchemy
+	Attribute	alchemy
+	CraftDelay	2
+	CraftLoops	0
+	CraftAnim	0
+	Repair		0
+	Smelt		0
+	MakersMark	0
+	RetainColor	0
+	ExceptionalName	brewed by
+}
+
+Crafting blacksmithy
+{
+	Name		blacksmithy
+	Attribute	blacksmithy
+	CraftDelay	2
+	CraftLoops	0
+	CraftAnim	0
+	Repair		1
+	Smelt		1
+	MakersMark	1
+	RetainColor	1
+	MenuFile	:blacksmithy:SmithMenu
+	ExceptionalName	crafted by
+}
+
+Crafting carpentry
+{
+	Name		carpentry
+	Attribute	carpentry
+	CraftDelay	2
+	CraftLoops	0
+	CraftAnim	0
+	Repair		1
+	Smelt		0
+	MakersMark	1
+	RetainColor	1
+	ExceptionalName	crafted by
+}
+
+Crafting cartography
+{
+	Name		cartography
+	Attribute	cartography
+	CraftDelay	2
+	CraftLoops	0
+	CraftAnim	0
+	Repair		0
+	Smelt		0
+	MakersMark	0
+	RetainColor	0
+	ExceptionalName	drawn by
+}
+
+Crafting cooking
+{
+	Name		cooking
+	Attribute	cooking
+	CraftDelay	2
+	CraftLoops	0
+	CraftAnim	0
+	Repair		0
+	Smelt		0
+	MakersMark	1
+	RetainColor	0
+	ExceptionalName	cooked by
+}
+
+Crafting fletching
+{
+	Name		fletching
+	Attribute	fletching
+	CraftDelay	2
+	CraftLoops	0
+	CraftAnim	0
+	Repair		1
+	Smelt		0
+	MakersMark	1
+	RetainColor	1
+	ExceptionalName	fletched by
+}
+
+Crafting inscription
+{
+	Name		inscription
+	Attribute	inscription
+	CraftDelay	2
+	CraftLoops	0
+	CraftAnim	0
+	Repair		0
+	Smelt		0
+	MakersMark	0
+	RetainColor	0
+	ExceptionalName	scribed by
+}
+
+Crafting tailoring
+{
+	Name		tailoring
+	Attribute	tailoring
+	CraftDelay	2
+	CraftLoops	0
+	CraftAnim	0
+	Repair		1
+	Smelt		0
+	MakersMark	1
+	RetainColor	1
+	ExceptionalName	tailored by
+}
+
+Crafting tinkering
+{
+	Name		tinkering
+	Attribute	tinkering
+	CraftDelay	2
+	CraftLoops	0
+	CraftAnim	0
+	Repair		1
+	Smelt		0
+	MakersMark	1
+	RetainColor	1
+	ExceptionalName	tinkered by
+}
+

Added: trunk/096/pkg/systems/crafting/config/icp.cfg
===================================================================
--- trunk/096/pkg/systems/crafting/config/icp.cfg	2005-09-26 14:02:50 UTC (rev 260)
+++ trunk/096/pkg/systems/crafting/config/icp.cfg	2005-09-27 14:11:12 UTC (rev 261)
@@ -0,0 +1,14 @@
+ICP Register
+{
+        Name            Crafting Base
+        Version         1.0
+        Description     Main packaged include files for the Crafting Backbone.
+
+        Creator         MuadDib
+        C_Email         muaddib at lostsoulsshard.org
+
+        Maintainer      Distro Team
+        M_Email         pol-distro-support at sourceforge.net
+
+        //TextCmd       cmdlevel path
+}

Added: trunk/096/pkg/systems/crafting/config/resourceList.cfg
===================================================================
--- trunk/096/pkg/systems/crafting/config/resourceList.cfg	2005-09-26 14:02:50 UTC (rev 260)
+++ trunk/096/pkg/systems/crafting/config/resourceList.cfg	2005-09-27 14:11:12 UTC (rev 261)
@@ -0,0 +1,316 @@
+// Metals/Ingots
+
+Resource 0x6309
+{
+    Name        iron
+    Color       0
+    Power       0
+    WPower      0
+    Skill       0
+    Type        Metal
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0x630a
+{
+    Name        dull copper
+    Color       0x8415
+    Power       0
+    WPower      0
+    Skill       65
+    Type        Metal
+    Quality     0 6 10
+    Ptmod       5
+}
+
+Resource 0x630b
+{
+    Name        shadow
+    Color       0x8455
+    Power       0
+    WPower      0
+    Skill       70
+    Type        Metal
+    Quality     1 2 10
+    Ptmod       5
+}
+
+Resource 0x630c
+{
+    Name        copper
+    Color       0x845e
+    Power       COPPER
+    WPower      0
+    Skill       75
+    Type        Metal
+    Quality     1 1 40
+    Ptmod       10
+}
+
+Resource 0x630d
+{
+    Name        bronze
+    Color       0x86b2
+    Power       0
+    WPower      0
+    Skill       80
+    Type        Metal
+    Quality     3 3 40
+    Ptmod       10
+}
+
+Resource 0x630e
+{
+    Name        golden
+    Color       0x88a6
+    Power       0
+    WPower      0
+    Skill       85
+    Type        Metal
+    Quality     5 1 50
+    Ptmod       15
+}
+
+Resource 0x630f
+{
+    Name        agapite
+    Color       0x83ea
+    Power       0
+    WPower      0
+    Skill       90
+    Type        Metal
+    Quality     7 2 50
+    Ptmod       15
+}
+
+Resource 0x6310
+{
+    Name        verite
+    Color       0x889f
+    Power       0
+    WPower      0
+    Skill       97
+    Type        Metal
+    Quality     7 3 50
+    Ptmod       20
+}
+
+Resource 0x6311
+{
+    Name        valorite
+    Color       0x8539
+    Power       0
+    WPower      0
+    Skill       100
+    Type        Metal
+    Quality     9 4 50
+    Ptmod       25
+}
+
+// Wood/Logs/Boards
+
+Resource 0x1bdd
+{
+    Name        plain
+    Color       0
+    Power       0
+    WPower      0
+    Skill       0
+    Type        Wood
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0x1bd7
+{
+    Name        plain
+    Color       0
+    Power       0
+    WPower      0
+    Skill       0
+    Type        Wood
+    Quality     0 0 0
+    Ptmod       0
+}
+
+// Cloth
+
+Resource 0x1766
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0x1767
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0x1768
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf95
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf96
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf97
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf98
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf99
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf9a
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf9b
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0xf9c
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Cloth
+    Quality     0 0 0
+    Ptmod       0
+}
+
+
+// Leather
+
+Resource 0x1078
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Leather
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0x1079
+{
+    Name        plain
+    Color       0
+    Power       0
+    Skill       0
+    Type        Leather
+    Quality     0 0 0
+    Ptmod       0
+}
+
+Resource 0x702e
+{
+    Name	spined
+    Color	1337
+    Skill       65
+    Power       0
+    Type        Leather
+    Quality     0 5 0
+    Ptmod       17
+}
+
+Resource 0x7030
+{
+    Name	horned
+    Color       1653
+    Power       0
+    Skill       90
+    Type        Leather
+    Quality     0 2 0
+    Ptmod       25
+}
+
+Resource 0x702f
+{
+    Name	barbed
+    Color       1425
+    Power       0
+    Skill       70
+    Type        Leather
+    Quality     0 2 0
+    Ptmod       20
+}

Added: trunk/096/pkg/systems/crafting/pkg.cfg
===================================================================
--- trunk/096/pkg/systems/crafting/pkg.cfg	2005-09-26 14:02:50 UTC (rev 260)
+++ trunk/096/pkg/systems/crafting/pkg.cfg	2005-09-27 14:11:12 UTC (rev 261)
@@ -0,0 +1,13 @@
+Enabled		1
+Name		crafting
+
+Version		1.0
+
+CoreRequired	96
+
+Creator		MuadDib
+Email		muaddib at lostsoulsshard.org
+Maintainer	Distro Team
+Email		pol-distro-support at sourceforge.net
+
+#Conflicts none
\ No newline at end of file



From muaddiblsd at berlios.de  Tue Sep 27 16:14:08 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Tue, 27 Sep 2005 16:14:08 +0200
Subject: [Poldistro-svn] r262 - trunk/096/config
Message-ID: <200509271414.j8REE8ef017939@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-27 16:14:08 +0200 (Tue, 27 Sep 2005)
New Revision: 262

Removed:
   trunk/096/config/resourceList.cfg
Log:


Deleted: trunk/096/config/resourceList.cfg
===================================================================
--- trunk/096/config/resourceList.cfg	2005-09-27 14:11:12 UTC (rev 261)
+++ trunk/096/config/resourceList.cfg	2005-09-27 14:14:08 UTC (rev 262)
@@ -1,316 +0,0 @@
-// Metals/Ingots
-
-Resource 0x6309
-{
-    Name        iron
-    Color       0
-    Power       0
-    WPower      0
-    Skill       0
-    Type        Metal
-    Quality     0 0 0
-    Ptmod       0
-}
-
-Resource 0x630a
-{
-    Name        dull copper
-    Color       0x8415
-    Power       0
-    WPower      0
-    Skill       65
-    Type        Metal
-    Quality     0 6 10
-    Ptmod       5
-}
-
-Resource 0x630b
-{
-    Name        shadow
-    Color       0x8455
-    Power       0
-    WPower      0
-    Skill       70
-    Type        Metal
-    Quality     1 2 10
-    Ptmod       5
-}
-
-Resource 0x630c
-{
-    Name        copper
-    Color       0x845e
-    Power       COPPER
-    WPower      0
-    Skill       75
-    Type        Metal
-    Quality     1 1 40
-    Ptmod       10
-}
-
-Resource 0x630d
-{
-    Name        bronze
-    Color       0x86b2
-    Power       0
-    WPower      0
-    Skill       80
-    Type        Metal
-    Quality     3 3 40
-    Ptmod       10
-}
-
-Resource 0x630e
-{
-    Name        golden
-    Color       0x88a6
-    Power       0
-    WPower      0
-    Skill       85
-    Type        Metal
-    Quality     5 1 50
-    Ptmod       15
-}
-
-Resource 0x630f
-{
-    Name        agapite
-    Color       0x83ea
-    Power       0
-    WPower      0
-    Skill       90
-    Type        Metal
-    Quality     7 2 50
-    Ptmod       15
-}
-
-Resource 0x6310
-{
-    Name        verite
-    Color       0x889f
-    Power       0
-    WPower      0
-    Skill       97
-    Type        Metal
-    Quality     7 3 50
-    Ptmod       20
-}
-
-Resource 0x6311
-{
-    Name        valorite
-    Color       0x8539
-    Power       0
-    WPower      0
-    Skill       100
-    Type        Metal
-    Quality     9 4 50
-    Ptmod       25
-}
-
-// Wood/Logs/Boards
-
-Resource 0x1bdd
-{
-    Name        plain
-    Color       0
-    Power       0
-    WPower      0
-    Skill       0
-    Type        Wood
-    Quality     0 0 0
-    Ptmod       0
-}
-
-Resource 0x1bd7
-{
-    Name        plain
-    Color       0
-    Power       0
-    WPower      0
-    Skill       0
-    Type        Wood
-    Quality     0 0 0
-    Ptmod       0
-}
-
-// Cloth
-
-Resource 0x1766
-{
-    Name        plain
-    Color       0
-    Power       0
-    Skill       0
-    Type        Cloth
-    Quality     0 0 0
-    Ptmod       0
-}
-
-Resource 0x1767
-{
-    Name        plain
-    Color       0
-    Power       0
-    Skill       0
-    Type        Cloth
-    Quality     0 0 0
-    Ptmod       0
-}
-
-Resource 0x1768
-{
-    Name        plain
-    Color       0
-    Power       0
-    Skill       0
-    Type        Cloth
-    Quality     0 0 0
-    Ptmod       0
-}
-
-Resource 0xf95
-{
-    Name        plain
-    Color       0
-    Power       0
-    Skill       0
-    Type        Cloth
-    Quality     0 0 0
-    Ptmod       0
-}
-
-Resource 0xf96
-{
-    Name        plain
-    Color       0
-    Power       0
-    Skill       0
-    Type        Cloth
-    Quality     0 0 0
-    Ptmod       0
-}
-
-Resource 0xf97
-{
-    Name        plain
-    Color       0
-    Power       0
-    Skill       0
-    Type        Cloth
-    Quality     0 0 0
-    Ptmod       0
-}
-
-Resource 0xf98
-{
-    Name        plain
-    Color       0
-    Power       0
-    Skill       0
-    Type        Cloth
-    Quality     0 0 0
-    Ptmod       0
-}
-
-Resource 0xf99
-{
-    Name        plain
-    Color       0
-    Power       0
-    Skill       0
-    Type        Cloth
-    Quality     0 0 0
-    Ptmod       0
-}
-
-Resource 0xf9a
-{
-    Name        plain
-    Color       0
-    Power       0
-    Skill       0
-    Type        Cloth
-    Quality     0 0 0
-    Ptmod       0
-}
-
-Resource 0xf9b
-{
-    Name        plain
-    Color       0
-    Power       0
-    Skill       0
-    Type        Cloth
-    Quality     0 0 0
-    Ptmod       0
-}
-
-Resource 0xf9c
-{
-    Name        plain
-    Color       0
-    Power       0
-    Skill       0
-    Type        Cloth
-    Quality     0 0 0
-    Ptmod       0
-}
-
-
-// Leather
-
-Resource 0x1078
-{
-    Name        plain
-    Color       0
-    Power       0
-    Skill       0
-    Type        Leather
-    Quality     0 0 0
-    Ptmod       0
-}
-
-Resource 0x1079
-{
-    Name        plain
-    Color       0
-    Power       0
-    Skill       0
-    Type        Leather
-    Quality     0 0 0
-    Ptmod       0
-}
-
-Resource 0x702e
-{
-    Name	spined
-    Color	1337
-    Skill       65
-    Power       0
-    Type        Leather
-    Quality     0 5 0
-    Ptmod       17
-}
-
-Resource 0x7030
-{
-    Name	horned
-    Color       1653
-    Power       0
-    Skill       90
-    Type        Leather
-    Quality     0 2 0
-    Ptmod       25
-}
-
-Resource 0x702f
-{
-    Name	barbed
-    Color       1425
-    Power       0
-    Skill       70
-    Type        Leather
-    Quality     0 2 0
-    Ptmod       20
-}



From austin at berlios.de  Tue Sep 27 23:53:23 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 27 Sep 2005 23:53:23 +0200
Subject: [Poldistro-svn] r263 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509272153.j8RLrNPK024606@sheep.berlios.de>

Author: austin
Date: 2005-09-27 23:53:22 +0200 (Tue, 27 Sep 2005)
New Revision: 263

Modified:
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
Log:
$id$ test

Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-27 14:14:08 UTC (rev 262)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-27 21:53:22 UTC (rev 263)
@@ -1,3 +1,5 @@
+// $Id$
+
 /*===============================================================
 * Current Version
 * SKILLCHECK.INC - v1.0
@@ -13,8 +15,10 @@
 use util;
 use cfgfile;
 
-include ":attributes:include/attributes";
+include ":attributes:attributes";
+include ":attributes:settings";
 
+
 const ADV_SKILL		:= 1;
 const ADV_STATS		:= 2;
 const ADV_ALL		:= ADV_SKILL+ADV_STATS; // 3
@@ -31,7 +35,7 @@
  * <= 0 means the skill check failed > 0 means it was successful.
  *
  * Parameters
- * mobile:			Mobile reference to do the skill check for.
+ * mobile:		Mobile reference to do the skill check for.
  * attribute_name:	Name of the attribute to perform the check on.
  * award_points:	Determines the amount of (if any) skill gain.
  * advance_flags:	Controls the turning on/off of stat and skill advancements for the check.
@@ -60,3 +64,27 @@
 	return 1;
 endfunction
 
+/*
+ * SkillDbgMsg(mobile, message)
+ *
+ * Purpose
+ * Checks to see if it should send a skill debug message to a mobile.
+ *
+ * Parameters
+ * mobile:	Mobile to send the messages to.
+ * message:	Debug message.
+ *
+ * Return value
+ * Returns 1
+ *
+ */
+function SkillDbgMsg(mobile, message)
+	if ( g_skill_debug )
+		SendSysMessage(who, "Skill Debug: "+message);
+	endif
+	
+	return 1;
+endfunction
+
+
+//Cdbl(Pow(2.0, Cint(basevalue/100))* 10.24);
\ No newline at end of file



From austin at berlios.de  Tue Sep 27 23:55:43 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Tue, 27 Sep 2005 23:55:43 +0200
Subject: [Poldistro-svn] r264 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509272155.j8RLthrx025373@sheep.berlios.de>

Author: austin
Date: 2005-09-27 23:55:42 +0200 (Tue, 27 Sep 2005)
New Revision: 264

Modified:
   trunk/096/pkg/systems/attributes/include/attributes.inc
   trunk/096/pkg/systems/attributes/include/attributes_ex.inc
   trunk/096/pkg/systems/attributes/include/regen.inc
   trunk/096/pkg/systems/attributes/include/settings.inc
   trunk/096/pkg/systems/attributes/include/skills.inc
   trunk/096/pkg/systems/attributes/include/stats.inc
   trunk/096/pkg/systems/attributes/include/vitals.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/attributes.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-27 21:53:22 UTC (rev 263)
+++ trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-27 21:55:42 UTC (rev 264)
@@ -1,3 +1,5 @@
+//$Id$
+
 /*===============================================================
 * Current Version
 * ATTRIBUTES.INC - v1.0

Modified: trunk/096/pkg/systems/attributes/include/attributes_ex.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes_ex.inc	2005-09-27 21:53:22 UTC (rev 263)
+++ trunk/096/pkg/systems/attributes/include/attributes_ex.inc	2005-09-27 21:55:42 UTC (rev 264)
@@ -1,6 +1,8 @@
+//$Id$
+
 /*===============================================================
 * Current Version
-* AP_EX.INC - v1.0
+* ATTRIBUTES_EX.INC - v1.0
 * Updated 9/20/2005 11:42AM
 *
 * -- Revision v1.0 --

Modified: trunk/096/pkg/systems/attributes/include/regen.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-27 21:53:22 UTC (rev 263)
+++ trunk/096/pkg/systems/attributes/include/regen.inc	2005-09-27 21:55:42 UTC (rev 264)
@@ -1,3 +1,5 @@
+//$Id$
+
 /*===============================================================
 * Current Version
 * REGEN.INC - v1.0

Modified: trunk/096/pkg/systems/attributes/include/settings.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/settings.inc	2005-09-27 21:53:22 UTC (rev 263)
+++ trunk/096/pkg/systems/attributes/include/settings.inc	2005-09-27 21:55:42 UTC (rev 264)
@@ -1,3 +1,15 @@
+//$Id$
+
+/*===============================================================
+* Current Version
+* SETTINGS.INC - v1.0
+* Updated 9/27/2005 2:54PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
 use uo;
 use os;
 use cfgfile;

Modified: trunk/096/pkg/systems/attributes/include/skills.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-27 21:53:22 UTC (rev 263)
+++ trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-27 21:55:42 UTC (rev 264)
@@ -1,3 +1,5 @@
+//$Id$
+
 /*===============================================================
 * Current Version
 * SKILLS.INC - v1.0

Modified: trunk/096/pkg/systems/attributes/include/stats.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-27 21:53:22 UTC (rev 263)
+++ trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-27 21:55:42 UTC (rev 264)
@@ -1,3 +1,5 @@
+//$Id$
+
 /*===============================================================
 * Current Version
 * STATS.INC - v1.0

Modified: trunk/096/pkg/systems/attributes/include/vitals.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-27 21:53:22 UTC (rev 263)
+++ trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-27 21:55:42 UTC (rev 264)
@@ -1,3 +1,5 @@
+//$Id$
+
 /*===============================================================
 * Current Version
 * VITALS.INC - v1.0
@@ -12,6 +14,8 @@
 use os;
 use cfgfile;
 
+include ":attributes:attributes";
+
 /* AP_GetVitalsCfgFile()
  * 
  * Purpose



From austin at berlios.de  Wed Sep 28 20:07:56 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 20:07:56 +0200
Subject: [Poldistro-svn] r265 - trunk/096/pkg/skills/fishing
Message-ID: <200509281807.j8SI7udm022237@sheep.berlios.de>

Author: austin
Date: 2005-09-28 20:07:56 +0200 (Wed, 28 Sep 2005)
New Revision: 265

Modified:
   trunk/096/pkg/skills/fishing/itemdesc.cfg
Log:
Removed SOSContainer - Isnt really needed.

Modified: trunk/096/pkg/skills/fishing/itemdesc.cfg
===================================================================
--- trunk/096/pkg/skills/fishing/itemdesc.cfg	2005-09-27 21:55:42 UTC (rev 264)
+++ trunk/096/pkg/skills/fishing/itemdesc.cfg	2005-09-28 18:07:56 UTC (rev 265)
@@ -218,27 +218,6 @@
 Cprop miscprop2 i1800
 }
 
-Container 0x9E40
-{
-    Name                soschest
-    desc                metal chest
-    graphic             0xe40
-    Gump                0x004A
-    MinX                44
-    MaxX                143
-    MinY                65
-    MaxY                140
-    RequiresAttention   0
-    movable             1
-    MaxItems            125
-    MaxWeight           400
-    weight              5
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
 Item 0x0EA4 // painting
 {
    Name paiting1



From austin at berlios.de  Wed Sep 28 20:10:27 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 20:10:27 +0200
Subject: [Poldistro-svn] r266 - trunk/096/pkg/systems/boat
Message-ID: <200509281810.j8SIARkV022525@sheep.berlios.de>

Author: austin
Date: 2005-09-28 20:10:27 +0200 (Wed, 28 Sep 2005)
New Revision: 266

Modified:
   trunk/096/pkg/systems/boat/itemdesc.cfg
Log:
hold container moved to containers package

Modified: trunk/096/pkg/systems/boat/itemdesc.cfg
===================================================================
--- trunk/096/pkg/systems/boat/itemdesc.cfg	2005-09-28 18:07:56 UTC (rev 265)
+++ trunk/096/pkg/systems/boat/itemdesc.cfg	2005-09-28 18:10:27 UTC (rev 266)
@@ -166,17 +166,3 @@
     WalkOnScript        plankWalk
     ControlScript       plankControl
 }
-
-Container 0xF013
-{
-    Name                Hold
-    Graphic             1
-    Gump                0x004C
-    MinX                40
-    MaxX                60
-    MinY                20
-    MaxY                80
-    RequiresAttention   0
-    MaxItems            125
-    MaxWeight           400
-}
\ No newline at end of file



From austin at berlios.de  Wed Sep 28 20:14:10 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 20:14:10 +0200
Subject: [Poldistro-svn] r267 - trunk/096/pkg/items
Message-ID: <200509281814.j8SIEAxj022916@sheep.berlios.de>

Author: austin
Date: 2005-09-28 20:14:10 +0200 (Wed, 28 Sep 2005)
New Revision: 267

Removed:
   trunk/096/pkg/items/corpses/
Log:
Corpse being moved to containers package.



From austin at berlios.de  Wed Sep 28 20:20:15 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 20:20:15 +0200
Subject: [Poldistro-svn] r268 - trunk/096/config
Message-ID: <200509281820.j8SIKFAb023435@sheep.berlios.de>

Author: austin
Date: 2005-09-28 20:20:15 +0200 (Wed, 28 Sep 2005)
New Revision: 268

Modified:
   trunk/096/config/itemdesc.cfg
Log:


Modified: trunk/096/config/itemdesc.cfg
===================================================================
--- trunk/096/config/itemdesc.cfg	2005-09-28 18:14:10 UTC (rev 267)
+++ trunk/096/config/itemdesc.cfg	2005-09-28 18:20:15 UTC (rev 268)
@@ -1064,30 +1064,7 @@
 /////////////////////////////////////////////////////////////////////////////
 //              ObjTypes 0xF000 - 0xFFFF - Reserved by System              //
 /////////////////////////////////////////////////////////////////////////////
-Container 0xFF01
-{
-    Name                SecureTradeContainer
-    graphic             0x1E5E
-    Gump                0x003C
-    MinX                0
-    MaxX                66
-    MinY                0
-    MaxY                33
-    Weight              0
-}
 
-Container 0xFF02
-{
-	Name				WornItemsContainer
-	graphic 1
-    Gump                0x003C
-    MinX                0
-    MaxX                66
-    MinY                0
-    MaxY                33
-    Weight              0
-}
-
 Item 0x3967
 {
     Name                parafield1



From austin at berlios.de  Wed Sep 28 20:21:00 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 20:21:00 +0200
Subject: [Poldistro-svn] r269 - in trunk/096/pkg/items: . containers containers/corpse
Message-ID: <200509281821.j8SIL0Iv023580@sheep.berlios.de>

Author: austin
Date: 2005-09-28 20:20:59 +0200 (Wed, 28 Sep 2005)
New Revision: 269

Added:
   trunk/096/pkg/items/containers/
   trunk/096/pkg/items/containers/commands/
   trunk/096/pkg/items/containers/config/
   trunk/096/pkg/items/containers/corpse/
   trunk/096/pkg/items/containers/corpse/boneControl.ecl
   trunk/096/pkg/items/containers/corpse/boneControl.src
   trunk/096/pkg/items/containers/corpse/corpseControl.ecl
   trunk/096/pkg/items/containers/corpse/corpseControl.src
   trunk/096/pkg/items/containers/corpse/corpseFunctions.inc
   trunk/096/pkg/items/containers/corpse/methods.ecl
   trunk/096/pkg/items/containers/corpse/methods.src
   trunk/096/pkg/items/containers/include/
   trunk/096/pkg/items/containers/itemdesc.cfg
   trunk/096/pkg/items/containers/pkg.cfg
Log:


Added: trunk/096/pkg/items/containers/corpse/boneControl.ecl
===================================================================
(Binary files differ)


Property changes on: trunk/096/pkg/items/containers/corpse/boneControl.ecl
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/096/pkg/items/containers/corpse/boneControl.src
===================================================================
--- trunk/096/pkg/items/containers/corpse/boneControl.src	2005-09-28 18:20:15 UTC (rev 268)
+++ trunk/096/pkg/items/containers/corpse/boneControl.src	2005-09-28 18:20:59 UTC (rev 269)
@@ -0,0 +1,9 @@
+use uo;
+use os;
+
+program boneControl(corpse)
+
+        sleep(300);
+        DestroyItem(corpse);
+
+endprogram

Added: trunk/096/pkg/items/containers/corpse/corpseControl.ecl
===================================================================
(Binary files differ)


Property changes on: trunk/096/pkg/items/containers/corpse/corpseControl.ecl
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/096/pkg/items/containers/corpse/corpseControl.src
===================================================================
--- trunk/096/pkg/items/containers/corpse/corpseControl.src	2005-09-28 18:20:15 UTC (rev 268)
+++ trunk/096/pkg/items/containers/corpse/corpseControl.src	2005-09-28 18:20:59 UTC (rev 269)
@@ -0,0 +1,37 @@
+use uo;
+use os;
+use util;
+
+program corpseControl(corpse)
+
+	sleep(300);
+	if(!corpse)
+		return 0;
+	endif
+	if(GetObjProperty(corpse, "npctemplate"))
+		DestroyItem(corpse);
+		return 0;
+	else
+		var beardlist := {0x203e, 0x203f, 0x2040, 0x2041, 0x204b, 0x204c, 0x204d };
+		var hairlist  := {0x2044, 0x2045, 0x2046, 0x2047, 0x2048, 0x2049, 0x204a, 0x203b, 0x203c, 0x203d };
+		var bonearray := array(0xed2, 0xed1, 0xed0, 0xecf, 0xece, 0xecd, 0xecc, 0xecb, 0xeca);
+		var bones := CreateItemAtLocation(corpse.x, corpse.y, corpse.z, bonearray[RandomInt(9)+1], 1, corpse.realm);
+		var newname := corpse.name["A corpse of "] := "";
+		bones.name := "remains of " + newname;
+		foreach thing in EnumerateItemsInContainer(corpse)
+			if((thing.objtype in beardlist) || (thing.objtype in hairlist))
+				DestroyItem(thing);
+			elseif(thing.movable == 0)
+				DestroyItem(thing);
+			else
+				MoveItemToContainer(thing, bones);
+				thing.decayAt := ReadGameClock() + 600;
+			endif
+		endforeach
+		DestroyItem(corpse);
+		start_script("boneControl", bones);
+	endif
+
+	return 0;
+
+endprogram
\ No newline at end of file

Added: trunk/096/pkg/items/containers/corpse/corpseFunctions.inc
===================================================================
--- trunk/096/pkg/items/containers/corpse/corpseFunctions.inc	2005-09-28 18:20:15 UTC (rev 268)
+++ trunk/096/pkg/items/containers/corpse/corpseFunctions.inc	2005-09-28 18:20:59 UTC (rev 269)
@@ -0,0 +1,114 @@
+
+function Carve_Corpse(who, cadaver)
+
+         Detach();
+	if((!Accessible(who, cadaver)) or (!CheckLineOfSight(who, cadaver)))
+		SendSysMessage(who, "You cannot use that.");
+		return 0;
+	endif
+	if(Distance(who, cadaver) > 2)
+		SendSysMessage(who, "You are not close enough.");
+		return 0;
+	endif
+
+	var c_type := cadaver.corpsetype;
+	if(GetObjProperty(cadaver, "cut") == "1")
+		SendSysMessage( who, "You cannot get any more from this corpse." );
+		foreach thing in EnumerateItemsInContainer(cadaver)
+			MoveItemToLocation(thing, cadaver.x, cadaver.y, cadaver.z, MOVEITEM_FORCELOCATION);
+		endforeach
+		DestroyItem(cadaver);
+	elseif((c_type == 400) || (c_type == 401))
+		var beardlist := {0x203e, 0x203f, 0x2040, 0x2041, 0x204b, 0x204c, 0x204d };
+		var hairlist  := {0x2044, 0x2045, 0x2046, 0x2047, 0x2048, 0x2049, 0x204a, 0x203b, 0x203c, 0x203d };
+		foreach thing in EnumerateItemsInContainer(cadaver)
+			if((thing.objtype in hairlist) or (thing.objtype in beardlist))
+				DestroyItem(thing);
+			else
+				MoveItemToLocation(thing, cadaver.x, cadaver.y, cadaver.z, MOVEITEM_FORCELOCATION);
+			endif
+		endforeach
+		var partsarray := {};
+		var part;
+		part := CreateItemAtLocation(cadaver.x-1, cadaver.y, cadaver.z, 0x1da0, 1, cadaver.realm);
+		partsarray.append(part);
+		SetObjProperty(part, "serial", GetObjProperty(cadaver, "serial"));
+		var aname := cadaver.name;
+		aname["A corpse of"] := "";
+		part.name := "The head of " + aname;
+		part := CreateItemAtLocation(cadaver.x-1, cadaver.y, cadaver.z, 0x1da1, 1, cadaver.realm);
+		partsarray.append(part);
+		part := CreateItemAtLocation(cadaver.x-1, cadaver.y+1, cadaver.z, 0x1da2, 1, cadaver.realm);
+		partsarray.append(part);
+		part := CreateItemAtLocation(cadaver.x+1, cadaver.y, cadaver.z, 0x1da3, 1, cadaver.realm);
+		partsarray.append(part);
+		part := CreateItemAtLocation(cadaver.x+1, cadaver.y+1, cadaver.z, 0x1da4, 1, cadaver.realm);
+		partsarray.append(part);
+		part := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, 0x1d9f, 1, cadaver.realm);
+		partsarray.append(part);
+		var blood := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, 0x122a, 1, cadaver.realm);
+		blood.movable := 0;
+		DestroyItem(cadaver);
+		sleep(40);
+		foreach thing in partsarray
+			if(!thing.container)
+				DestroyItem(thing);
+			endif
+		endforeach
+		sleep(20);
+		DestroyItem(blood);
+	else
+		if(c_type == 223)
+			CreateItemInContainer(cadaver, 0x9f1, 2);
+			SendSysMessage(who, "You place the items on the corpse.");
+			var theblood := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, UOBJ_BLOOD, 1, cadaver.realm);
+			sleep(30);
+			DestroyItem(cadaver);
+			sleep(30);
+			DestroyItem(theblood);
+			return 0;
+		endif
+		var conf := ReadConfigFile(":*:npcdesc");
+		var tmplate := GetObjProperty(cadaver, "npctemplate");
+		if(!tmplate)
+			SendSysMessage(who, "You cut the corpse, but fail to find anything useful.", 3, 40);
+			var theblood := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, UOBJ_BLOOD, 1, cadaver.realm);
+			sleep(30);
+			DestroyItem(cadaver);
+			sleep(30);
+			DestroyItem(theblood);
+			return 0;
+		else
+			SetObjProperty(cadaver, "cut","1");
+			var corpseitm := conf[tmplate]."corpseitm";
+			var corpseamt := conf[tmplate]."corpseamt";
+			print("I: " + corpseitm);
+			print("A: " + corpseamt);
+			if(!corpseitm)
+				print("error");
+				var theblood := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, UOBJ_BLOOD, 1, cadaver.realm);
+				sleep(30);
+				DestroyItem(cadaver);
+				sleep(30);
+				DestroyItem(theblood);
+				return 0;
+			endif
+			var i := 1;
+			corpseitm := SplitWords(corpseitm);
+			corpseamt := SplitWords(corpseamt);
+			foreach thing in corpseitm
+				CreateItemInContainer(cadaver, thing, Cint(corpseamt[i]));
+				i := i + 1;
+			endforeach
+			SendSysMessage(who, "You place the items on the corpse.");
+			var theblood := CreateItemAtLocation(cadaver.x, cadaver.y, cadaver.z, UOBJ_BLOOD, 1, cadaver.realm);
+			sleep(30);
+			DestroyItem(cadaver);
+			sleep(30);
+			DestroyItem(theblood);
+		endif
+	endif
+
+	return 0;
+
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/items/containers/corpse/methods.ecl
===================================================================
(Binary files differ)


Property changes on: trunk/096/pkg/items/containers/corpse/methods.ecl
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/096/pkg/items/containers/corpse/methods.src
===================================================================
--- trunk/096/pkg/items/containers/corpse/methods.src	2005-09-28 18:20:15 UTC (rev 268)
+++ trunk/096/pkg/items/containers/corpse/methods.src	2005-09-28 18:20:59 UTC (rev 269)
@@ -0,0 +1,50 @@
+use uo;
+use util;
+use os;
+
+program Install()
+	return 1;
+endprogram
+
+exported function Gibbify(corpse, range:=10)
+	var piece_list := array
+	{
+		0x1DAD, //Torso
+		0x1DB2, //Left Leg
+		0x1DB1, //Right Leg
+		0x1DB0, //Left Arm
+		0x1DAF, //Right Arm
+		0x1CEE, //Liver
+		0x1CED, //Heart
+		0x1CF0  //Brain
+	};
+	
+	foreach objtype in (piece_list)
+		var item := CreateItemAtLocation(corpse.x, corpse.y, corpse.z, objtype, 1);
+		
+		var newx, newy;
+		var num_tries := 0;
+
+		MOVE_LOOP:
+		repeat
+			newx := RandomInt(range)-CInt(range/2);
+			newy := RandomInt(range)-CInt(range/2);
+
+			newx := newx+corpse.x;
+			newy := newy+corpse.y;
+
+			num_tries := num_tries+1;
+			if ( num_tries > 30 )
+				num_tries := 0;
+				newx := corpse.x;
+				newy := corpse.y;
+				break MOVE_LOOP;
+			endif
+
+		until ( CheckLosAt(corpse, newx, newy, corpse.z) );
+		
+		MoveItemToLocation(item, newx, newy, corpse.z, MOVEITEM_FORCELOCATION);
+	endforeach
+	
+	DestroyItem(corpse);
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/items/containers/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/containers/itemdesc.cfg	2005-09-28 18:20:15 UTC (rev 268)
+++ trunk/096/pkg/items/containers/itemdesc.cfg	2005-09-28 18:20:59 UTC (rev 269)
@@ -0,0 +1,75 @@
+Container 0xF013
+{
+	//Ship Hold
+	Name			Hold
+	Desc			ship's hold%%
+	Graphic			1
+
+	Gump			0x4C
+	MinX			40
+	MaxX			60
+	MinY			20
+	MaxY			80
+	MaxItems		125
+
+	RequiresAttention	0
+	Lockable		1
+	
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+#--=[ System Containers ]=----------
+
+Container 0x2006
+{
+	Name			Corpse
+	Gump			0x9
+
+	MinX			20
+	MaxX			80
+	MinY			85
+	MaxY			165
+	
+	MaxItems		0
+	MaxWeight		0
+
+	RequiresAttention	0
+	DecayOnMultis		1
+
+	ControlScript		corpse/corpseControl
+	MethodScript		corpse/methods
+}
+
+Container 0xFF01
+{
+	Name			SecureTradeContainer
+	Graphic			0x1E5E
+	Weight			0
+
+	Gump			0x3C
+	MinX			0
+	MaxX			66
+	MinY			0
+	MaxY			33
+	MaxItems		500
+	MaxWeight		0
+}
+
+Container 0xFF02
+{
+	Name			WornItemsContainer
+	Desc			WornItemsContainer
+	graphic			0x2
+	Gump			0x3C
+	MinX			0
+	MaxX			66
+	MinY			0
+	MaxY			33
+	Weight			0
+	
+	MaxItems		65535
+	Maxweight		65535
+}

Added: trunk/096/pkg/items/containers/pkg.cfg
===================================================================
--- trunk/096/pkg/items/containers/pkg.cfg	2005-09-28 18:20:15 UTC (rev 268)
+++ trunk/096/pkg/items/containers/pkg.cfg	2005-09-28 18:20:59 UTC (rev 269)
@@ -0,0 +1,13 @@
+Enabled		1
+Name		containers
+
+Version		1.0
+
+CoreRequired	96
+
+Creator		Austin Heilman
+Email		Austin at tsse.net
+Maintainer	Austin Heilman
+Email		Austin at tsse.net
+
+#Conflicts none



From austin at berlios.de  Wed Sep 28 20:43:38 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 20:43:38 +0200
Subject: [Poldistro-svn] r270 - trunk/096/pkg/systems
Message-ID: <200509281843.j8SIhc8f025707@sheep.berlios.de>

Author: austin
Date: 2005-09-28 20:43:37 +0200 (Wed, 28 Sep 2005)
New Revision: 270

Removed:
   trunk/096/pkg/systems/storage/
Log:
Storage system's include file being moved to containers package.



From austin at berlios.de  Wed Sep 28 20:44:22 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 20:44:22 +0200
Subject: [Poldistro-svn] r271 - in trunk/096/pkg/items/containers: . include
Message-ID: <200509281844.j8SIiMJx025809@sheep.berlios.de>

Author: austin
Date: 2005-09-28 20:44:22 +0200 (Wed, 28 Sep 2005)
New Revision: 271

Added:
   trunk/096/pkg/items/containers/include/storage.inc
Modified:
   trunk/096/pkg/items/containers/itemdesc.cfg
Log:


Added: trunk/096/pkg/items/containers/include/storage.inc
===================================================================
--- trunk/096/pkg/items/containers/include/storage.inc	2005-09-28 18:43:37 UTC (rev 270)
+++ trunk/096/pkg/items/containers/include/storage.inc	2005-09-28 18:44:22 UTC (rev 271)
@@ -0,0 +1,187 @@
+// Bank.inc
+// By Austin Heilman
+//
+// Created 10/22/2001 11:31PM
+// Updated 10/24/2003 5:13PM
+//
+// Somewhere, define a container for banks with the item name
+// "BankBox" so you dont need to deal with object type numbers here
+// plus making a custom container makes it easy to change the bank box
+// graphic, container gump and item limits.
+//
+
+use uo;
+use os;
+use polsys;
+
+//Set the 'box_type' variable to the object name of the container type
+//you want to be used for bank boxes. Example 'pouch' 'metalchest' etc.
+//This is only used when a new bank box is created. It can be changed on
+//the fly inside of a script for when you want to use specific container
+//types for special storage areas. Ideally, you should make a object type
+//with the name 'BankBox' to better control the number of items that can
+//be put in the storage container.
+var box_type		:= "BankBox";
+
+//Toggles the bank related debug messages on and off.
+var storage_debug_mode	:= 1;
+
+
+
+/*
+ * GetBox(who, string)
+ *
+ * Purpose
+ *
+ * Parameters
+ * who: reference to the mobile whos container we want to view
+ * bank_name: the container that belongs to the mobile referenced.
+ *
+ * Return Value
+ * The bank box of who, for the bank_name passed.
+ */
+function GetBox(who, bank_name)
+
+	if ((!bank_name) || (bank_name == error))
+		bank_name := "Global";
+	endif
+
+	RegisterBank(bank_name);
+
+	var bank := FindStorageArea(bank_name);
+	if ( !bank )
+		CreateStorageArea(bank_name);
+		bank := FindStorageArea(bank_name);
+	endif
+
+	//Find a box by serial because a mobile's name can change
+	//but a serial never does :)
+	var box_name := "Bankbox for " + hex(who.serial);
+
+	var bank_box := FindRootItemInStorageArea(bank, box_name);
+	if ( !bank_box )
+		set_critical(1);
+		var new_box := CreateRootItemInStorageArea(bank, box_name, box_type);
+		if ( new_box.errortext )
+			return new_box;
+		endif
+		
+		bank_box := FindRootItemInStorageArea(bank, box_name);
+
+		if ( who.acctname )
+			//Makes the storage file a little easier to read by storing
+			//a person's account name and character name on the box.
+			var temp := dictionary;
+			temp["Name"] := who.name;
+			temp["Account"] := who.acctname;
+			SetObjProperty(bank_box, "Info", temp);
+		endif
+		set_critical(0);
+	endif
+
+	return bank_box;
+endfunction
+
+
+function HasBankBox(who, bank_name)
+	if ( (!bank_name) || (bank_name == error) )
+		bank_name := "Global";
+	endif
+	
+	var bank := FindStorageArea(bank_name);
+	var box_name := "Bankbox for " + hex(who.serial);
+	var bank_box := FindRootItemInStorageArea(bank, box_name);
+	
+	if ( bank_box )
+		return 1;
+	else
+		return 0;
+	endif
+endfunction
+
+
+// *DestroyBox(mobile, string)
+//
+// Used to remove a mobile's bank box and everything inside of it.
+// When someone deletes a character, pol does not do this automatically
+// so you may want to use this function with GetBankNames() to clear them.
+//
+function DestroyBox(who, bank_name)
+	if ( (!bank_name) || (bank_name == error) )
+		bank_name := "Global";
+	endif
+
+	var bank := FindStorageArea(bank_name);
+	var box_name := "Bankbox for " + hex(who.serial);
+
+	BankDbgMsg("Removed bank box [" + bank_name + "] for [" + who.name + "]");
+
+	return DestroyRootItemInStorageArea(bank, box_name);
+endfunction
+
+
+// * RegisterBank(string)
+//
+// Registers the bank name in a global property called "banks".
+// Used to keep track of what banks exist in the world.
+//
+// This is only run the first time a storage area is used.
+//
+function RegisterBank(bank_name)
+	return;
+	
+	if ( (!bank_name) || (bank_name == error) )
+		return 0;
+	endif
+
+	set_critical(1);
+	var all_banks := GetBankNames();
+	if ( !(bank_name in all_banks) )
+		BankDbgMsg("Registering bank " + bank_name);
+		all_banks.append(bank_name);
+		SetGlobalProperty("banks", all_banks);
+	endif
+	set_critical(0);
+endfunction
+
+
+// * GetBankNames()
+//
+// Returns an array of all storage area names.
+//
+function GetBankNames()
+	/*
+	var all_banks := GetGlobalProperty("banks");
+	if (!all_banks)
+		all_banks := array;
+		SetGlobalProperty("banks", all_banks);
+	endif
+	return all_banks;
+	*/
+	// Note... for now I am having it use the StorageAreas()
+	// function in polsys.em. It works kind of funny though.
+	// It returns an array of the region names, but if you do
+	// TypeOf() on the region name, you get <RegionName> like,
+	// <Global> <Britain> <Minoc> etc. back. For now I convert them
+	// to a string which works. I am not really sure what Syzygy has
+	// planned for this function, but if its changed to work as I have
+	// a feeling it was intended to work, this foreach will still work.
+	// You can uncomment the global property usage above, and comment
+	// the loop below though if any problems arise. Until I am certain
+	// as to how Syzygy wants to make this function work, I am leaving
+	// the global property tracking of bank region names in.
+	var temp := array;
+	foreach key in StorageAreas()
+		temp.append(Cstr(key));
+		sleepms(2);
+	endforeach
+	
+	return temp;
+endfunction
+
+
+function BankDbgMsg(text)
+	if ( storage_debug_mode )
+		SysLog(text);
+	endif
+endfunction
\ No newline at end of file

Modified: trunk/096/pkg/items/containers/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/containers/itemdesc.cfg	2005-09-28 18:43:37 UTC (rev 270)
+++ trunk/096/pkg/items/containers/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
@@ -1,3 +1,849 @@
+//--=[ Small Boxes]=--------------
+
+Container 0x9A8
+{
+	Name			StrongBox
+	Desc			strong box%es%
+
+	Gump			0x4B
+	MinX			40
+	MaxX			60
+	MinY			20
+	MaxY			80
+	MaxItems		20
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		1
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xE80
+{
+	Name			StrongBox2
+	Desc			strong box%es%
+
+	Gump			0x4B
+	MinX			40
+	MaxX			60
+	MinY			20
+	MaxY			80
+	MaxItems		20
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		1
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0x9AA
+{
+	Name			WoodenBox
+	Desc			wooden box%es%
+
+	Gump			0x43
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		15
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xE7D
+{
+	Name			WoodenBox2
+	Desc			wooden box%es%
+
+	Gump			0x43
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		15
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+//--=[ Leather ]=-----------------
+
+Container 0x9B0
+{
+	Name			Pouch
+	Desc			pouch%es%
+
+	Gump			0x40
+	MinX			20
+	MaxX			60
+	MinY			20
+	MaxY			60
+	MaxItems		5
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xE79
+{
+	Name			Pouch2
+	Desc			pouch%es%
+
+	Gump			0x40
+	MinX			20
+	MaxX			60
+	MinY			20
+	MaxY			60
+	MaxItems		5
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0x9B2
+{
+	Name			Backpack
+	Desc			back pack
+
+	Gump			0x3C
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		5000
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	CanDye			1
+	Lockable		0
+
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xE75
+{
+	//Note: This is the backpack the core equips by default.
+	Name			Backpack2
+	Desc			back pack
+
+	Gump			0x3C
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		5000
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	CanDye			1
+	Lockable		0
+
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xE76
+{
+	Name			Bag
+	Desc			bag
+
+	Gump			0x3D
+	MinX			40
+	MaxX			60
+	MinY			20
+	MaxY			80
+	MaxItems		50
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+//--=[ Chests ]=------------------
+
+Container 0x9AB
+{
+	Name			SilverChest1
+	Desc			silver chest
+
+	Gump			0x4A
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		100
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		1
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xE7C
+{
+	Name			SilverChest2
+	Desc			silver chest
+
+	Gump			0x4A
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		100
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		1
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xE41
+{
+	Name			MetalChest
+	Desc			metal chest
+
+	Gump			0x42
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		100
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		1
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xE40
+{
+	Name			MetalChest2
+	Desc			metal chest
+
+	Gump			0x42
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		100
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		1
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xE43
+{
+	Name			WoodenChest
+	Desc			wooden chest
+
+	Gump			0x49
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		100
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		1
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xE42
+{
+	Name			WoodenChest2
+	Desc			wooden chest
+
+	Gump			0x49
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		100
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		1
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+//--=[ Crates ]=------------------
+
+Container 0x9A9
+{
+	Name			SmallCrate
+	Desc			small crate
+
+	Gump			0x44
+	MinX			40
+	MaxX			60
+	MinY			0
+	MaxY			60
+	MaxItems		25
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		1
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xE7E
+{
+	Name			SmallCrate2
+	Desc			small crate
+
+	Gump			0x44
+	MinX			40
+	MaxX			60
+	MinY			0
+	MaxY			60
+	MaxItems		25
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		1
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xE3F
+{
+	Name			MediumCrate
+	Desc			medium crate
+
+	Gump			0x44
+	MinX			40
+	MaxX			60
+	MinY			0
+	MaxY			60
+	MaxItems		50
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		1
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xE3E
+{
+	Name			MediumCrate2
+	Desc			medium crate
+
+	Gump			0x44
+	MinX			40
+	MaxX			60
+	MinY			0
+	MaxY			60
+	MaxItems		50
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		1
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xE3D
+{
+	Name			LargeCrate
+	Desc			large crate
+
+	Gump			0x44
+	MinX			40
+	MaxX			60
+	MinY			0
+	MaxY			60
+	MaxItems		75
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		1
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xE3C
+{
+	Name			LargeCrate2
+	Desc			large crate
+
+	Gump			0x44
+	MinX			40
+	MaxX			60
+	MinY			0
+	MaxY			60
+	MaxItems		75
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		1
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+//--=[ Baskets ]=-----------------
+
+Container 0xE7A
+{
+	Name			picnicbasket
+	Desc			picnic basket
+
+	Gump			0x3F
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		10
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0x9B1
+{
+	Name			basket
+	Desc			basket
+
+	Gump			0x41
+	MinX			40
+	MaxX			60
+	MinY			20
+	MaxY			80
+	MaxItems		10
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+//--=[ Barrels ]=-------------------
+
+Container 0xE77
+{
+	Name			OpenBarrel
+	Desc			barrel
+	Graphic			3707
+
+	Gump			0x3E
+
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		100
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xFAE
+{
+	Name			Barrel
+	Desc			barrel
+	Graphic			4014
+
+	Gump			0x3E
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		100
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+//--=[ Furniture ]=-----------------
+
+Container 0xA2C
+{
+	Name			ChestOfDrawers
+	Desc			chest of drawers%%
+
+	Gump			0x51
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		25
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+Container 0xA34
+{
+	Name			ChestOfDrawers2
+	Desc			chest of drawers%%
+
+	Gump			0x51
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		25
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xA30
+{
+	Name			ChestOfDrawers3
+	Desc			chest of drawers%%
+
+	Gump			0x48
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		25
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+Container 0xA38
+{
+	Name			ChestOfDrawers4
+	Desc			chest of drawers%%
+
+	Gump			0x48
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		25
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+}
+
+Container 0xA4D
+{
+	Name			Armoire
+	Desc			armoire
+
+	Gump			0x4E
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		25
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+
+	OpenGraphic		2636
+	CloseGraphic		2637
+}
+Container 0xA51
+{
+	Name			Armoire2
+	Desc			armoire
+
+	Gump			0x4E
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		25
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+
+	OpenGraphic		2640
+	CloseGraphic		2641
+}
+
+Container 0xA4F
+{
+	Name			Armoire3
+	Desc			armoire
+
+	Gump			0x4F
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		25
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+
+	OpenGraphic		2638
+	CloseGraphic		2639
+}
+Container 0xA53
+{
+	Name			Armoire4
+	Desc			armoire
+
+	Gump			0x4F
+	MinX			44
+	MaxX			143
+	MinY			65
+	MaxY			140
+	MaxItems		25
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanRemoveScript		CanRemove
+	CanInsertScript		CanInsert
+	DestroyScript		CanDestroy
+
+	OpenGraphic		2642
+	CloseGraphic		2643
+}
+
+//--=[ Book Shelves ]=--------------
+
+Container 0xA9D
+{
+	Name			BookShelf
+	Desc			book shelf
+
+	Gump			0x4D
+	MinX			40
+	MaxX			125
+	MinY			10
+	MaxY			65
+	MaxItems		25
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanInsertScript		bookshelf/CanInsert
+	CanRemoveScript		bookshelf/CanRemove
+	OnInsertScript		bookshelf/OnInsert
+	OnRemoveScript		bookshelf/OnRemove
+
+	EmptyGraphic		2717
+	FilledGraphic		2712
+	FilledGraphic		2711
+	FilledGraphic		2715
+}
+Container 0xA9E
+{
+	Name			BookShelf2
+	Desc			book shelf
+
+	Gump			0x4D
+	MinX			40
+	MaxX			125
+	MinY			10
+	MaxY			65
+	MaxItems		25
+	MaxWeight		0
+
+	RequiresAttention	0
+	Movable			1
+	Lockable		0
+
+	Script			open
+	CanInsertScript		bookshelf/CanInsert
+	CanRemoveScript		bookshelf/CanRemove
+	OnInsertScript		bookshelf/OnInsert
+	OnRemoveScript		bookshelf/OnRemove
+
+	EmptyGraphic		2718
+	FilledGraphic		2713
+	FilledGraphic		2714
+	FilledGraphic		2716
+}
+
+#--=[ System Containers ]=----------
+
 Container 0xF013
 {
 	//Ship Hold
@@ -21,8 +867,6 @@
 	DestroyScript		CanDestroy
 }
 
-#--=[ System Containers ]=----------
-
 Container 0x2006
 {
 	Name			Corpse



From muaddiblsd at berlios.de  Wed Sep 28 20:50:59 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Wed, 28 Sep 2005 20:50:59 +0200
Subject: [Poldistro-svn] r272 - in trunk/096: config pkg/items/decorations pkg/items/doors pkg/items/dyes pkg/items/lighting pkg/items/sysbook pkg/mobiles/barber pkg/skills/alchemy pkg/skills/blacksmithy pkg/skills/bowcraft pkg/skills/camping pkg/skills/carpentry pkg/skills/cooking pkg/skills/fishing pkg/skills/healing pkg/skills/hiding pkg/skills/mining pkg/skills/musicianship pkg/skills/spiritspeak pkg/skills/stealth pkg/skills/tailoring pkg/systems/crafting/config pkg/systems/housing
Message-ID: <200509281850.j8SIox9A026700@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-28 20:50:51 +0200 (Wed, 28 Sep 2005)
New Revision: 272

Modified:
   trunk/096/config/itemdesc.cfg
   trunk/096/pkg/items/decorations/itemdesc.cfg
   trunk/096/pkg/items/doors/itemdesc.cfg
   trunk/096/pkg/items/dyes/itemdesc.cfg
   trunk/096/pkg/items/lighting/itemdesc.cfg
   trunk/096/pkg/items/sysbook/itemdesc.cfg
   trunk/096/pkg/mobiles/barber/itemdesc.cfg
   trunk/096/pkg/skills/alchemy/itemdesc.cfg
   trunk/096/pkg/skills/blacksmithy/itemdesc.cfg
   trunk/096/pkg/skills/bowcraft/itemdesc.cfg
   trunk/096/pkg/skills/camping/itemdesc.cfg
   trunk/096/pkg/skills/carpentry/itemdesc.cfg
   trunk/096/pkg/skills/cooking/itemdesc.cfg
   trunk/096/pkg/skills/fishing/itemdesc.cfg
   trunk/096/pkg/skills/healing/itemdesc.cfg
   trunk/096/pkg/skills/hiding/hiding.src
   trunk/096/pkg/skills/mining/itemdesc.cfg
   trunk/096/pkg/skills/musicianship/itemdesc.cfg
   trunk/096/pkg/skills/spiritspeak/spiritSpeak.src
   trunk/096/pkg/skills/stealth/stealth.src
   trunk/096/pkg/skills/tailoring/itemdesc.cfg
   trunk/096/pkg/systems/crafting/config/craftConfig.cfg
   trunk/096/pkg/systems/crafting/config/resourceList.cfg
   trunk/096/pkg/systems/housing/itemdesc.cfg
Log:
Updating "Item 0x0" in itemdesc.cfg to "Item 0x" to resolve issues with checking item.objtype vs itemdesc entries.

Modified: trunk/096/config/itemdesc.cfg
===================================================================
--- trunk/096/config/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/config/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,3 +1,5 @@
+# //$Id$
+
 /////////////////////////////////////////////////////////////////////////////
 //
 //  ITEMDESC.CFG - Item Definitions

Modified: trunk/096/pkg/items/decorations/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/decorations/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/items/decorations/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,32 +1,34 @@
-Item 0x0E46 // empty jars
+# //$Id$
+
+Item 0xE46 # empty jars
 {
 	Name		emptyjars1
 	VendorSellsFor  200
 	VendorBuysFor   75
 }
 
-Item 0x0EE4 // W spiderweb
+Item 0xEE4 # W spiderweb
 {
 	Name 		spiderweb1
 	VendorSellsFor  200
 	VendorBuysFor   75
 }
 
-Item 0x0EE3 // N spiderweb
+Item 0xEE3 # N spiderweb
 {
 	Name 		spiderweb2
 	VendorSellsFor  200
 	VendorBuysFor   75
 }
 
-Item 0x154D // water barrel
+Item 0x154D # water barrel
 {
 	Name 		waterbarrel
 	VendorSellsFor  280
 	VendorBuysFor   130
 }
 
-Item 0x1852 // scales2
+Item 0x1852 # scales2
 {
 	Name 		scales2
 	VendorSellsFor  200

Modified: trunk/096/pkg/items/doors/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/doors/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/items/doors/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,4 +1,6 @@
-Door 0x0675
+# //$Id$
+
+Door 0x675
 {
     xmod -1
     ymod +1
@@ -6,7 +8,7 @@
     doortype metal
 }
 
-Door 0x0677
+Door 0x677
 {
     xmod +1
     ymod +1
@@ -14,7 +16,7 @@
     doortype metal
 }
 
-Door 0x067d
+Door 0x67d
 {
     xmod +1
     ymod +1
@@ -22,7 +24,7 @@
     doortype metal
 }
 
-Door 0x067f
+Door 0x67f
 {
     xmod +1
     ymod -1
@@ -30,7 +32,7 @@
     doortype metal
 }
 
-Door 0x06c5
+Door 0x6c5
 {
     xmod -1
     ymod +1
@@ -38,7 +40,7 @@
     doortype metal
 }
 
-Door 0x06c7
+Door 0x6c7
 {
     xmod +1
     ymod +1
@@ -46,7 +48,7 @@
     doortype metal
 }
 
-Door 0x06cd
+Door 0x6cd
 {
     xmod +1
     ymod +1
@@ -54,7 +56,7 @@
     doortype metal
 }
 
-Door 0x06cf
+Door 0x6cf
 {
     xmod +1
     ymod -1
@@ -62,7 +64,7 @@
     doortype metal
 }
 
-Door 0x0685
+Door 0x685
 {
     xmod -1
     ymod +1
@@ -70,7 +72,7 @@
     doortype metal
 }
 
-Door 0x0687
+Door 0x687
 {
     xmod +1
     ymod +1
@@ -78,7 +80,7 @@
     doortype metal
 }
 
-Door 0x068d
+Door 0x68d
 {
     xmod +1
     ymod +1
@@ -86,7 +88,7 @@
     doortype metal
 }
 
-Door 0x068f
+Door 0x68f
 {
     xmod +1
     ymod -1
@@ -94,7 +96,7 @@
     doortype metal
 }
 
-Door 0x06a5
+Door 0x6a5
 {
     xmod -1
     ymod +1
@@ -102,7 +104,7 @@
     doortype wood
 }
 
-Door 0x06a7
+Door 0x6a7
 {
     xmod +1
     ymod +1
@@ -110,7 +112,7 @@
     doortype wood
 }
 
-Door 0x06ad
+Door 0x6ad
 {
     xmod +1
     ymod +1
@@ -118,7 +120,7 @@
     doortype wood
 }
 
-Door 0x06af
+Door 0x6af
 {
     xmod +1
     ymod -1
@@ -126,7 +128,7 @@
     doortype wood
 }
 
-Door 0x06b5
+Door 0x6b5
 {
     xmod -1
     ymod +1
@@ -134,7 +136,7 @@
     doortype wood
 }
 
-Door 0x06b7
+Door 0x6b7
 {
     xmod +1
     ymod +1
@@ -142,7 +144,7 @@
     doortype wood
 }
 
-Door 0x06bd
+Door 0x6bd
 {
     xmod +1
     ymod +1
@@ -150,7 +152,7 @@
     doortype wood
 }
 
-Door 0x06bf
+Door 0x6bf
 {
     xmod +1
     ymod -1
@@ -158,7 +160,7 @@
     doortype wood
 }
 
-Door 0x06d5
+Door 0x6d5
 {
     xmod -1
     ymod +1
@@ -166,7 +168,7 @@
     doortype wood
 }
 
-Door 0x06d7
+Door 0x6d7
 {
     xmod +1
     ymod +1
@@ -174,7 +176,7 @@
     doortype wood
 }
 
-Door 0x06dd
+Door 0x6dd
 {
     xmod +1
     ymod +1
@@ -182,7 +184,7 @@
     doortype wood
 }
 
-Door 0x06df
+Door 0x6df
 {
     xmod +1
     ymod -1
@@ -190,7 +192,7 @@
     doortype wood
 }
 
-Door 0x06e5
+Door 0x6e5
 {
     xmod -1
     ymod +1
@@ -198,7 +200,7 @@
     doortype wood
 }
 
-Door 0x06e7
+Door 0x6e7
 {
     xmod +1
     ymod +1
@@ -206,7 +208,7 @@
     doortype wood
 }
 
-Door 0x06ed
+Door 0x6ed
 {
     xmod +1
     ymod +1
@@ -214,7 +216,7 @@
     doortype wood
 }
 
-Door 0x06ef
+Door 0x6ef
 {
     xmod +1
     ymod -1
@@ -222,7 +224,7 @@
     doortype wood
 }
 
-Door 0x0695
+Door 0x695
 {
     xmod -1
     ymod +1
@@ -230,7 +232,7 @@
     doortype wood
 }
 
-Door 0x0697
+Door 0x697
 {
     xmod +1
     ymod +1
@@ -238,7 +240,7 @@
     doortype wood
 }
 
-Door 0x069d
+Door 0x69d
 {
     xmod +1
     ymod +1
@@ -246,7 +248,7 @@
     doortype wood
 }
 
-Door 0x069f
+Door 0x69f
 {
     xmod +1
     ymod -1
@@ -254,7 +256,7 @@
     doortype wood
 }
 
-Door 0x067B
+Door 0x67B
 {
     xmod +1
     ymod -1
@@ -262,7 +264,7 @@
     doortype metal
 }
 
-Door 0x06ab
+Door 0x6ab
 {
     xmod +1
     ymod -1
@@ -270,7 +272,7 @@
     doortype wood
 }
 
-Door 0x0825
+Door 0x825
 {
     xmod 0
     ymod -1
@@ -278,7 +280,7 @@
     doortype metal
 }
 
-Door 0x0827
+Door 0x827
 {
     xmod 0
     ymod -1
@@ -286,7 +288,7 @@
     doortype metal
 }
 
-Door 0x082d
+Door 0x82d
 {
     xmod -1
     ymod 0
@@ -294,7 +296,7 @@
     doortype metal
 }
 
-Door 0x082f
+Door 0x82f
 {
     xmod -1
     ymod 0
@@ -302,7 +304,7 @@
     doortype metal
 }
 
-Door 0x0829
+Door 0x829
 {
     xmod 0
     ymod 0
@@ -310,7 +312,7 @@
     doortype metal
 }
 
-Door 0x082c
+Door 0x82c
 {
     xmod +1
     ymod +1
@@ -318,7 +320,7 @@
     doortype metal
 }
 
-Door 0x0826
+Door 0x826
 {
     xmod +1
     ymod +1
@@ -326,7 +328,7 @@
     doortype metal
 }
 
-Door 0x082a
+Door 0x82a
 {
     xmod +1
     ymod -1
@@ -334,7 +336,7 @@
     doortype metal
 }
 
-Door 0x084d
+Door 0x84d
 {
     xmod 0
     ymod -1
@@ -342,7 +344,7 @@
     doortype metal
 }
 
-Door 0x084f
+Door 0x84f
 {
     xmod 0
     ymod -1
@@ -350,7 +352,7 @@
     doortype metal
 }
 
-Door 0x0851
+Door 0x851
 {
     xmod 0
     ymod 0
@@ -358,7 +360,7 @@
     doortype metal
 }
 
-Door 0x0854
+Door 0x854
 {
     xmod 0
     ymod +1
@@ -366,7 +368,7 @@
     doortype metal
 }
 
-Door 0x0859
+Door 0x859
 {
     xmod 0
     ymod +1
@@ -374,7 +376,7 @@
     doortype metal
 }
 
-Door 0x0852
+Door 0x852
 {
     xmod +1
     ymod -1
@@ -382,7 +384,7 @@
     doortype metal
 }
 
-Door 0x084c
+Door 0x84c
 {
     xmod -1
     ymod +1
@@ -390,7 +392,7 @@
     doortype metal
 }
 
-Door 0x0857
+Door 0x857
 {
     xmod -1
     ymod 0
@@ -398,7 +400,7 @@
     doortype metal
 }
 
-Door 0x0839
+Door 0x839
 {
     xmod -1
     ymod +1
@@ -406,7 +408,7 @@
     doortype wood
 }
 
-Door 0x083d
+Door 0x83d
 {
     xmod -1
     ymod 0
@@ -414,7 +416,7 @@
     doortype wood
 }
 
-Door 0x083b
+Door 0x83b
 {
     xmod +1
     ymod +1
@@ -422,7 +424,7 @@
     doortype wood
 }
 
-Door 0x083f
+Door 0x83f
 {
     xmod +1
     ymod -1
@@ -430,7 +432,7 @@
     doortype wood
 }
 
-Door 0x0843
+Door 0x843
 {
     xmod +1
     ymod -1
@@ -438,7 +440,7 @@
     doortype wood
 }
 
-Door 0x0847
+Door 0x847
 {
     xmod 0
     ymod -1
@@ -446,7 +448,7 @@
     doortype wood
 }
 
-Door 0x0841
+Door 0x841
 {
     xmod +1
     ymod +1
@@ -454,7 +456,7 @@
     doortype wood
 }
 
-Door 0x0845
+Door 0x845
 {
     xmod 0
     ymod 0
@@ -463,7 +465,7 @@
 }
 
 
-Door 0x0866
+Door 0x866
 {
     xmod -1
     ymod +1
@@ -471,7 +473,7 @@
     doortype wood
 }
 
-Door 0x086a
+Door 0x86a
 {
     xmod -1
     ymod 0
@@ -479,7 +481,7 @@
     doortype wood
 }
 
-Door 0x0868
+Door 0x868
 {
     xmod +1
     ymod +1
@@ -487,7 +489,7 @@
     doortype wood
 }
 
-Door 0x086c
+Door 0x86c
 {
     xmod +1
     ymod -1
@@ -495,7 +497,7 @@
     doortype wood
 }
 
-Door 0x0870
+Door 0x870
 {
     xmod +1
     ymod -1
@@ -503,7 +505,7 @@
     doortype wood
 }
 
-Door 0x0874
+Door 0x874
 {
     xmod 0
     ymod -1
@@ -511,7 +513,7 @@
     doortype wood
 }
 
-Door 0x086e
+Door 0x86e
 {
     xmod +1
     ymod +1
@@ -519,7 +521,7 @@
     doortype wood
 }
 
-Door 0x0872
+Door 0x872
 {
     xmod 0
     ymod 0
@@ -527,7 +529,7 @@
     doortype wood
 }
 
-Door 0x06a9
+Door 0x6a9
 {
     xmod -1
     ymod 0
@@ -535,7 +537,7 @@
     doortype wood
 }
 
-Door 0x00F1
+Door 0x0F1
 {
     Name    BlueThickStoneSecretSSW
     xmod    -1
@@ -544,7 +546,7 @@
     doortype stone
 }
 
-Door 0x00EA
+Door 0x0EA
 {
     Name    BlueThickStoneSecretSSE
     xmod    +1
@@ -553,7 +555,7 @@
     doortype stone
 }
 
-Door 0x00EC
+Door 0x0EC
 {
     Name    BlueThickStoneSecretSNW
     xmod    -1
@@ -562,7 +564,7 @@
     doortype stone
 }
 
-Door 0x00EE
+Door 0x0EE
 {
     Name    BlueThickStoneSecretSNE
     xmod    +1
@@ -571,7 +573,7 @@
     doortype stone
 }
 
-Door 0x00F0
+Door 0x0F0
 {
     Name    BlueThickStoneSecretESE
     xmod    +1
@@ -580,7 +582,7 @@
     doortype stone
 }
 
-Door 0x00F2
+Door 0x0F2
 {
     Name    BlueThickStoneSecretENE
     xmod    +1
@@ -589,7 +591,7 @@
     doortype stone
 }
 
-Door 0x00F4
+Door 0x0F4
 {
     Name    BlueThickStoneSecretESW
     xmod    0
@@ -598,7 +600,7 @@
     doortype stone
 }
 
-Door 0x00F6
+Door 0x0F6
 {
     Name    BlueThickStoneSecretENW
     xmod    0
@@ -607,7 +609,7 @@
     doortype stone
 }
 
-Door 0x031D
+Door 0x31D
 {
     Name    DarkThinStoneSecretSSW
     xmod    -1
@@ -616,7 +618,7 @@
     doortype stone
 }
 
-Door 0x0316
+Door 0x316
 {
     Name    DarkThinStoneSecretSSE
     xmod    +1
@@ -625,7 +627,7 @@
     doortype stone
 }
 
-Door 0x0318
+Door 0x318
 {
     Name    DarkThinStoneSecretSNW
     xmod    -1
@@ -634,7 +636,7 @@
     doortype stone
 }
 
-Door 0x031A
+Door 0x31A
 {
     Name    DarkThinStoneSecretSNE
     xmod    +1
@@ -643,7 +645,7 @@
     doortype stone
 }
 
-Door 0x031C
+Door 0x31C
 {
     Name    DarkThinStoneSecretESE
     xmod    +1
@@ -652,7 +654,7 @@
     doortype stone
 }
 
-Door 0x031E
+Door 0x31E
 {
     Name    DarkThinStoneSecretENE
     xmod    +1
@@ -661,7 +663,7 @@
     doortype stone
 }
 
-Door 0x0320
+Door 0x320
 {
     Name    DarkThinStoneSecretESW
     xmod    0
@@ -670,7 +672,7 @@
     doortype stone
 }
 
-Door 0x0322
+Door 0x322
 {
     Name    DarkThinStoneSecretENW
     xmod    0
@@ -679,7 +681,7 @@
     doortype stone
 }
 
-Door 0x0324
+Door 0x324
 {
     Name    DarkThickStoneSecretSSW
     xmod    -1
@@ -688,7 +690,7 @@
     doortype stone
 }
 
-Door 0x0326
+Door 0x326
 {
     Name    DarkThickStoneSecretSSE
     xmod    +1
@@ -697,7 +699,7 @@
     doortype stone
 }
 
-Door 0x0328
+Door 0x328
 {
     Name    DarkThickStoneSecretSNW
     xmod    -1
@@ -706,7 +708,7 @@
     doortype stone
 }
 
-Door 0x032A
+Door 0x32A
 {
     Name    DarkThickStoneSecretSNE
     xmod    +1
@@ -715,7 +717,7 @@
     doortype stone
 }
 
-Door 0x032C
+Door 0x32C
 {
     Name    DarkThickStoneSecretESE
     xmod    +1
@@ -724,7 +726,7 @@
     doortype stone
 }
 
-Door 0x032E
+Door 0x32E
 {
     Name    DarkThickStoneSecretENE
     xmod    +1
@@ -733,7 +735,7 @@
     doortype stone
 }
 
-Door 0x0330
+Door 0x330
 {
     Name    DarkThickStoneSecretESW
     xmod    0
@@ -742,7 +744,7 @@
     doortype stone
 }
 
-Door 0x0332
+Door 0x332
 {
     Name    DarkThickStoneSecretENW
     xmod    0
@@ -751,7 +753,7 @@
     doortype stone
 }
 
-Door 0x0334
+Door 0x334
 {
     Name    DarkWoodSecretSSW
     xmod    -1
@@ -760,7 +762,7 @@
     doortype Wood
 }
 
-Door 0x0336
+Door 0x336
 {
     Name    DarkWoodSecretSSE
     xmod    +1
@@ -769,7 +771,7 @@
     doortype Wood
 }
 
-Door 0x0338
+Door 0x338
 {
     Name    DarkWoodSecretSNW
     xmod    -1
@@ -778,7 +780,7 @@
     doortype Wood
 }
 
-Door 0x033A
+Door 0x33A
 {
     Name    DarkWoodSecretSNE
     xmod    +1
@@ -787,7 +789,7 @@
     doortype Wood
 }
 
-Door 0x033C
+Door 0x33C
 {
     Name    DarkWoodSecretESE
     xmod    +1
@@ -796,7 +798,7 @@
     doortype Wood
 }
 
-Door 0x033E
+Door 0x33E
 {
     Name    DarkWoodSecretENE
     xmod    +1
@@ -805,7 +807,7 @@
     doortype Wood
 }
 
-Door 0x0340
+Door 0x340
 {
     Name    DarkWoodSecretESW
     xmod    0
@@ -814,7 +816,7 @@
     doortype Wood
 }
 
-Door 0x0342
+Door 0x342
 {
     Name    DarkWoodSecretENW
     xmod    0
@@ -823,7 +825,7 @@
     doortype Wood
 }
 
-Door 0x0344
+Door 0x344
 {
     Name    LightWoodSecretSSW
     xmod    -1
@@ -832,7 +834,7 @@
     doortype Wood
 }
 
-Door 0x0346
+Door 0x346
 {
     Name    LightWoodSecretSSE
     xmod    +1
@@ -841,7 +843,7 @@
     doortype Wood
 }
 
-Door 0x0348
+Door 0x348
 {
     Name    LightWoodSecretSNW
     xmod    -1
@@ -850,7 +852,7 @@
     doortype Wood
 }
 
-Door 0x034A
+Door 0x34A
 {
     Name    LightWoodSecretSNE
     xmod    +1
@@ -859,7 +861,7 @@
     doortype Wood
 }
 
-Door 0x034C
+Door 0x34C
 {
     Name    LightWoodSecretESE
     xmod    +1
@@ -868,7 +870,7 @@
     doortype Wood
 }
 
-Door 0x034E
+Door 0x34E
 {
     Name    LightWoodSecretENE
     xmod    +1
@@ -877,7 +879,7 @@
     doortype Wood
 }
 
-Door 0x0350
+Door 0x350
 {
     Name    LightWoodSecretESW
     xmod    0
@@ -886,7 +888,7 @@
     doortype Wood
 }
 
-Door 0x0352
+Door 0x352
 {
     Name    LightWoodSecretENW
     xmod    0
@@ -895,7 +897,7 @@
     doortype Wood
 }
 
-Door 0x0354
+Door 0x354
 {
     Name    LightThickStoneSecretSSW
     xmod    -1
@@ -904,7 +906,7 @@
     doortype stone
 }
 
-Door 0x0356
+Door 0x356
 {
     Name    LightThickStoneSecretSSE
     xmod    +1
@@ -913,7 +915,7 @@
     doortype stone
 }
 
-Door 0x0358
+Door 0x358
 {
     Name    LightThickStoneSecretSNW
     xmod    -1
@@ -922,7 +924,7 @@
     doortype stone
 }
 
-Door 0x035A
+Door 0x35A
 {
     Name    LightThickStoneSecretSNE
     xmod    +1
@@ -931,7 +933,7 @@
     doortype stone
 }
 
-Door 0x035C
+Door 0x35C
 {
     Name    LightThickStoneSecretESE
     xmod    +1
@@ -940,7 +942,7 @@
     doortype stone
 }
 
-Door 0x035E
+Door 0x35E
 {
     Name    LightThickStoneSecretENE
     xmod    +1
@@ -949,7 +951,7 @@
     doortype stone
 }
 
-Door 0x0360
+Door 0x360
 {
     Name    LightThickStoneSecretESW
     xmod    0
@@ -958,7 +960,7 @@
     doortype stone
 }
 
-Door 0x0362
+Door 0x362
 {
     Name    LightThickStoneSecretENW
     xmod    0

Modified: trunk/096/pkg/items/dyes/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/dyes/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/items/dyes/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,10 +1,12 @@
-Item 0x0FA9
+# //$Id$
+
+Item 0xFA9
 {
     Name            dyes
     script          useDyes
     VendorSellsFor  20
 }
-Item 0x0FAB
+Item 0xFAB
 {
     Name            dyetub
     script          dyeable

Modified: trunk/096/pkg/items/lighting/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/lighting/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/items/lighting/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,14 +1,15 @@
-//
-// created by Zulu  zuluhotel at home.com
-// made Jan 15, 2000 - updated Jan 20, 2000
-//
-// thanks to Helldrige boum0 at frankiz.polytechnique.fr for his updates
-//
-//   Cprop change     i#	(decimal)
-//   Cprop changesnd  i#	(decimal)
-//   Cprop originsnd  i#	(decimal)
-//   Cprop staff  i#		(1-4)
-//
+# //$Id$
+#
+# created by Zulu  zuluhotel at home.com
+# made Jan 15, 2000 - updated Jan 20, 2000
+#
+# thanks to Helldrige boum0 at frankiz.polytechnique.fr for his updates
+#
+#   Cprop change     i#	(decimal)
+#   Cprop changesnd  i#	(decimal)
+#   Cprop originsnd  i#	(decimal)
+#   Cprop staff  i#		(1-4)
+#
 
 Item 0x0e2d
 {//unlit

Modified: trunk/096/pkg/items/sysbook/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/sysbook/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/items/sysbook/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,3 +1,5 @@
+# //$Id$
+
 Item 0xfef
 {
     ObjtypeName     book1
@@ -601,7 +603,7 @@
     RequiresAttention 1
 }
 
-Item 0x0ff3
+Item 0xff3
 {
     Graphic 0x0ff3
     ObjtypeName smallopenbook
@@ -613,7 +615,7 @@
     weight 1/2
     RequiresAttention 1
 }
-Item 0x0ff4
+Item 0xff4
 {
     Graphic 0x0ff4
     ObjtypeName bigopenbook

Modified: trunk/096/pkg/mobiles/barber/itemdesc.cfg
===================================================================
--- trunk/096/pkg/mobiles/barber/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/mobiles/barber/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,5 +1,6 @@
+# //$Id$
 
-Item 0x0e27
+Item 0xe27
 {
     name hairdye
 	desc Bottle of Hair Dye
@@ -9,7 +10,7 @@
 	weight 2
 }
 
-Item 0x0eff
+Item 0xeff
 {
     name hairdye2
 	desc Bottle of Hair Dye

Modified: trunk/096/pkg/skills/alchemy/itemdesc.cfg
===================================================================
--- trunk/096/pkg/skills/alchemy/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/skills/alchemy/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,4 +1,6 @@
-Item 0x0e9b
+# //$Id$
+
+Item 0xe9b
 {
      Name            Mortar
      Script          alchemy
@@ -6,14 +8,14 @@
      VendorBuysFor   4
 }
 
-Item 0x0F0E
+Item 0xF0E
 {
     Name             EmptyBottle
     VendorSellsFor   3
     VendorBuysFor    1
 }
 
-item 0xDC01
+Item 0xDC01
 {
      name            LesserHeal
      desc            lesser heal potion
@@ -23,7 +25,7 @@
      script          yellowPotion
 }
 
-item 0xDC02
+Item 0xDC02
 {
      name            HealPotion
      desc            heal potion
@@ -33,7 +35,7 @@
      script          yellowPotion
 }
 
-item 0xDC03
+Item 0xDC03
 {
      name            GreaterHeal
      desc            greater heal potion

Modified: trunk/096/pkg/skills/blacksmithy/itemdesc.cfg
===================================================================
--- trunk/096/pkg/skills/blacksmithy/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/skills/blacksmithy/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,11 +1,13 @@
-Item 0x0eed
+# //$Id$
+
+Item 0xeed
 {
     Name            GoldCoin
     desc            gold coin%s%
     InsertNoise     sound_gold1in
 }
 
-Item 0x0fbb
+Item 0xfbb
 {
     Name            tongs
     Script          :blacksmithy:makeBlacksmithItems
@@ -13,10 +15,10 @@
     VendorBuysFor   12
 }
 
-Item 0x0fbc
+Item 0xfbc
 {
     Name            tongs2
     Script          :blacksmithy:makeBlacksmithItems
     VendorSellsFor  24
     VendorBuysFor   12
-}
\ No newline at end of file
+}

Modified: trunk/096/pkg/skills/bowcraft/itemdesc.cfg
===================================================================
--- trunk/096/pkg/skills/bowcraft/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/skills/bowcraft/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,3 +1,4 @@
+# //$Id$
 
 Item 0x1BD4
 {

Modified: trunk/096/pkg/skills/camping/itemdesc.cfg
===================================================================
--- trunk/096/pkg/skills/camping/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/skills/camping/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,16 +1,18 @@
-Item 0x0de1
+# //$Id$
+
+Item 0xde1
 {
     Name            kindling
     Script          camping
 }
 
-Item 0x0de2
+Item 0xde2
 {
     Name            kindling2
     Script          camping
 }
 
-Item 0x0a58
+Item 0xa58
 {
     Name            bedroll1
     Script          bedroll
@@ -18,7 +20,7 @@
     VendorBuysFor   22
 }
 
-Item 0x0a59
+Item 0xa59
 {
     Name            bedroll2
     Script          bedroll

Modified: trunk/096/pkg/skills/carpentry/itemdesc.cfg
===================================================================
--- trunk/096/pkg/skills/carpentry/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/skills/carpentry/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,3 +1,5 @@
+# //$Id$
+
 Item  0x1034
 {
     Name                Saw
@@ -97,7 +99,7 @@
     Weight		        2
 }
 
-Item 0x0b2c
+Item 0xb2c
 {
     Name                Bench
     VendorSellsFor      28
@@ -106,7 +108,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b2d
+Item 0xb2d
 {
     Name                Bench2
     VendorSellsFor      28
@@ -115,7 +117,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b5d
+Item 0xb5d
 {
     Name                poorchair
     VendorSellsFor      39
@@ -124,7 +126,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b5a
+Item 0xb5a
 {
     Name                poorchair2
     VendorSellsFor      39
@@ -133,7 +135,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b5c
+Item 0xb5c
 {
     Name                poorchair3
     VendorSellsFor      39
@@ -142,7 +144,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b5b
+Item 0xb5b
 {
     Name                poorchair4
     VendorSellsFor      39
@@ -151,7 +153,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b56
+Item 0xb56
 {
     Name                Chair
     VendorSellsFor      28
@@ -160,7 +162,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b57
+Item 0xb57
 {
     Name                Chair2
     VendorSellsFor      28
@@ -169,7 +171,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b58
+Item 0xb58
 {
     Name                Chair3
     VendorSellsFor      28
@@ -178,7 +180,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b59
+Item 0xb59
 {
     Name                Chair4
     VendorSellsFor      28
@@ -187,7 +189,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b2e
+Item 0xb2e
 {
     Name                woodthrone
     VendorSellsFor      60
@@ -196,7 +198,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b2f
+Item 0xb2f
 {
     Name                woodthrone2
     VendorSellsFor      60
@@ -205,7 +207,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b32
+Item 0xb32
 {
     Name                throne
     VendorSellsFor      90
@@ -214,7 +216,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b33
+Item 0xb33
 {
     Name                throne2
     VendorSellsFor      90
@@ -224,7 +226,7 @@
 }
 
 
-Item 0x0b53
+Item 0xb53
 {
     Name                Cushioned Chair
     VendorSellsFor      28
@@ -233,7 +235,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0a2a
+Item 0xa2a
 {
     Name                Stool
     VendorSellsFor      24
@@ -242,7 +244,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b5e
+Item 0xb5e
 {
     Name                Stool2
     VendorSellsFor      24
@@ -251,7 +253,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b4f
+Item 0xb4f
 {
     Name                vesperchair
     VendorSellsFor      51
@@ -260,7 +262,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b4e
+Item 0xb4e
 {
     Name                vesperchair2
     VendorSellsFor      51
@@ -269,7 +271,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b50
+Item 0xb50
 {
     Name                vesperchair3
     VendorSellsFor      51
@@ -278,7 +280,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b51
+Item 0xb51
 {
     Name                vesperchair4
     VendorSellsFor      51
@@ -808,7 +810,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b3a
+Item 0xb3a
 {
     Name                smallcounter
     VendorSellsFor      45
@@ -817,7 +819,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b3f
+Item 0xb3f
 {
     Name                largecounter
     VendorSellsFor      66
@@ -827,7 +829,7 @@
     movable             1
 }
 
-Item 0x0b7d
+Item 0xb7d
 {
     Name                yewtable
     Desc                yew table
@@ -837,7 +839,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b90
+Item 0xb90
 {
     Name                yewtable2
     Desc                yew table
@@ -847,7 +849,7 @@
     Cprop furniture     i1
 }
 
-Item 0x0b7c
+Item 0xb7c
 {
     Name                table
     VendorSellsFor      75
@@ -856,7 +858,7 @@
     Cprop furniture     i1
 }
 
- Item 0x0b8f
+ Item 0xb8f
 {
     Name                table2
     VendorSellsFor      75

Modified: trunk/096/pkg/skills/cooking/itemdesc.cfg
===================================================================
--- trunk/096/pkg/skills/cooking/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/skills/cooking/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,4 +1,6 @@
-Item 0x09f1
+# //$Id$
+
+Item 0x9f1
 {
 	Name		RawRibs
 	Script		cooking
@@ -7,7 +9,7 @@
 	Weight		1
 }
 
-Item 0x097a
+Item 0x97a
 {
 	Name		RawFishSteak
 	Script		cooking
@@ -16,7 +18,7 @@
 	Weight	1/10
 }
 
-Item 0x09b9
+Item 0x9b9
 {
 	Name		RawBird
 	Script		cooking
@@ -25,7 +27,7 @@
 	Weight		1/10
 }
 
-Item 0x09ba
+Item 0x9ba
 {
 	Name		RawBird2
 	Script		cooking
@@ -57,7 +59,7 @@
 	Weight		1
 }
 
-Item 0x09ec
+Item 0x9ec
 {
 	Name		Honey
 	Script		:usestuff:useStuff
@@ -102,7 +104,7 @@
 	Weight		5
 }
 
-Item 0x0c6a
+Item 0xc6a
 {
 	Name		pumpkin
 	Script		:usestuff:useStuff
@@ -111,7 +113,7 @@
 	Weight		1
 }
 
-Item 0x0c6b
+Item 0xc6b
 {
 	Name		pumpkin2
 	Script		:usestuff:useStuff
@@ -120,7 +122,7 @@
 	Weight		1
 }
 
-Item 0x0c6c
+Item 0xc6c
 {
 	Name		pumpkin3
 	Script		:usestuff:useStuff
@@ -208,7 +210,7 @@
 	VendorBuysFor	1
 }
 
-Item 0x097f
+Item 0x97f
 {
 	Name		fryingpan
 	Script		cooking
@@ -216,7 +218,7 @@
 	VendorBuysFor	1
 }
 
-Item 0x09a7
+Item 0x9a7
 {
 	Name		emptypitcher
 	Script		fillPitcher
@@ -397,7 +399,7 @@
     VendorSellsFor  0
 }
 
-Item 0x09b5
+Item 0x9b5
 {
 	Name		egg
 	Script		cooking

Modified: trunk/096/pkg/skills/fishing/itemdesc.cfg
===================================================================
--- trunk/096/pkg/skills/fishing/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/skills/fishing/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,4 +1,6 @@
-Item 0x0dbf
+# //$Id$
+
+Item 0xdbf
 {
     Name            FishingPole
     Script          fishing
@@ -6,54 +8,54 @@
     VendorBuysFor   7
 }
 
-Item 0x09cc
+Item 0x9cc
 {
         Name fish1
         vendorsellsfor 8
         vendorbuysfor 4
 }
 
-item 0x09cd
+Item 0x9cd
 {
         Name fish2
         vendorsellsfor 8
         vendorbuysfor 4
 }
-item 0x09ce
+Item 0x9ce
 {
         Name fish3
         vendorsellsfor 8
         vendorbuysfor 4
 }
-item 0x09cf
+Item 0x9cf
 {
         Name fish4
         vendorsellsfor 8
         vendorbuysfor 4
 }
 
-item 0x0dd6
+Item 0xdd6
 {
         Name fish5
         vendorsellsfor 8
         vendorbuysfor 4
 }
 
-item 0x0dd7
+Item 0xdd7
 {
         Name fish6
         vendorsellsfor 8
         vendorbuysfor 4
 }
 
-item 0x0dd8
+Item 0xdd8
 {
         Name fish7
         vendorsellsfor 8
         vendorbuysfor 4
 }
 
-item 0x0dd9
+Item 0xdd9
 {
         Name fish8
         vendorsellsfor 8
@@ -218,7 +220,7 @@
 Cprop miscprop2 i1800
 }
 
-Item 0x0EA4 // painting
+Item 0xEA4 // painting
 {
    Name paiting1
    desc painting
@@ -226,7 +228,7 @@
    VendorBuysFor   225
 }
 
-Item 0x0EA8 // painting
+Item 0xEA8 // painting
 {
    Name paiting2
    desc painting
@@ -234,7 +236,7 @@
    VendorBuysFor   225
 }
 
-Item 0x0EA7 // painting
+Item 0xEA7 // painting
 {
    Name painting3
    desc painting
@@ -242,7 +244,7 @@
    VendorBuysFor   225
 }
 
-Item 0x0E9F // painting
+Item 0xE9F // painting
 {
    Name painting4
    desc painting
@@ -250,7 +252,7 @@
    VendorBuysFor   75
 }
 
-Item 0x0EA0 // painting
+Item 0xEA0 // painting
 {
    Name painting5
    desc painting
@@ -258,7 +260,7 @@
    VendorBuysFor   75
 }
 
-Item 0x0EA3 // painting
+Item 0xEA3 // painting
 {
    Name painting6
    desc painting
@@ -266,7 +268,7 @@
    VendorBuysFor   225
 }
 
-Item 0x0EA6 // painting
+Item 0xEA6 // painting
 {
    Name painting7
    desc painting
@@ -274,7 +276,7 @@
    VendorBuysFor   225
 }
 
-Item 0x0EE7 // painting
+Item 0xEE7 // painting
 {
    Name painting8
    desc painting
@@ -282,7 +284,7 @@
    VendorBuysFor   75
 }
 
-Item 0x0EC9 // painting
+Item 0xEC9 // painting
 {
    Name painting9
    desc painting

Modified: trunk/096/pkg/skills/healing/itemdesc.cfg
===================================================================
--- trunk/096/pkg/skills/healing/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/skills/healing/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,4 +1,6 @@
-Item 0x0e21
+# //$Id$
+
+Item 0xe21
 {
     Name            bandages
     Script          healing

Modified: trunk/096/pkg/skills/hiding/hiding.src
===================================================================
--- trunk/096/pkg/skills/hiding/hiding.src	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/skills/hiding/hiding.src	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,3 +1,5 @@
+// //$Id$
+
 ////////////////////////////////////////////////////////////////////////////////////////////////////
 //
 //  name:    hiding.src - Skill Script

Modified: trunk/096/pkg/skills/mining/itemdesc.cfg
===================================================================
--- trunk/096/pkg/skills/mining/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/skills/mining/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,4 +1,6 @@
-Item 0x0f39
+# //$Id$
+
+Item 0xf39
 {
     Name            Shovel
     Script          mining

Modified: trunk/096/pkg/skills/musicianship/itemdesc.cfg
===================================================================
--- trunk/096/pkg/skills/musicianship/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/skills/musicianship/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,4 +1,6 @@
-Item 0x0eb1
+# //$Id$
+
+Item 0xeb1
 {
     Name            standingharp
     script          musicianship
@@ -6,7 +8,7 @@
     VendorBuysFor   30
     weight          5
 }
-Item 0x0eb2
+Item 0xeb2
 {
     Name            harp
     script          musicianship
@@ -14,7 +16,7 @@
     VendorBuysFor   10
     weight          2
 }
-Item 0x0eb3
+Item 0xeb3
 {
     Name            lute
     script          musicianship
@@ -22,7 +24,7 @@
     VendorBuysFor   15
     weight          2
 }
-Item 0x0eb4
+Item 0xeb4
 {
     Name            lute2
     script          musicianship
@@ -30,7 +32,7 @@
     VendorBuysFor   15
     weight          2
 }
-Item 0x0e9c
+Item 0xe9c
 {
     Name            Drum
     script          musicianship
@@ -38,7 +40,7 @@
     VendorBuysFor   20
     weight          3
 }
-Item 0x0e9d
+Item 0xe9d
 {
     Name            Tambourine
     script          musicianship
@@ -46,7 +48,7 @@
     VendorBuysFor   25
     weight          1
 }
-Item 0x0e9e
+Item 0xe9e
 {
     Name            Tambourine2
     script          musicianship

Modified: trunk/096/pkg/skills/spiritspeak/spiritSpeak.src
===================================================================
--- trunk/096/pkg/skills/spiritspeak/spiritSpeak.src	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/skills/spiritspeak/spiritSpeak.src	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,3 +1,5 @@
+// //$Id$
+
 ////////////////////////////////////////////////////////////////////////////////////////////////////
 //
 //  name:    spiritSpeak.src - Skill Script

Modified: trunk/096/pkg/skills/stealth/stealth.src
===================================================================
--- trunk/096/pkg/skills/stealth/stealth.src	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/skills/stealth/stealth.src	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,3 +1,5 @@
+// //$Id$
+
 ////////////////////////////////////////////////////////////////////////////////////////////////////
 //
 //  name:    stealth.src - Skill Script

Modified: trunk/096/pkg/skills/tailoring/itemdesc.cfg
===================================================================
--- trunk/096/pkg/skills/tailoring/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/skills/tailoring/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,3 +1,5 @@
+# //$Id$
+
 Armor 0x1718
 {
     Name            wizardhat
@@ -45,7 +47,7 @@
     controlscript   :combat:itemControl
     destroyscript   :combat:destroy
 }
-Item 0x0F9D
+Item 0xF9D
 {
     Name            SewingKit
     Script          makeClothItems
@@ -475,7 +477,7 @@
     VendorBuysFor   7
 }
 
-Item 0x0FA0
+Item 0xFA0
 {
     Name    Thread1
     Script  tailoring
@@ -483,7 +485,7 @@
     VendorBuysFor   7
 }
 
-Item 0x0fa1
+Item 0xfa1
 {
     Name    Thread2
     script  tailoring
@@ -491,7 +493,7 @@
     VendorBuysFor   7
 }
 
-Item 0x0f9e
+Item 0xf9e
 {
     Name Scissors
     script scissors
@@ -505,7 +507,7 @@
     desc            pile%s% of wool
     Weight          1
     script          spinning
-    graphic         0x0df8
+    graphic         0xdf8
     VendorSellsFor  30
     VendorBuysFor   15
 }

Modified: trunk/096/pkg/systems/crafting/config/craftConfig.cfg
===================================================================
--- trunk/096/pkg/systems/crafting/config/craftConfig.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/systems/crafting/config/craftConfig.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,3 +1,5 @@
+# //$Id$
+
 ######################################################################################
 #
 # Crafting Setup	Global Settings for crafting
@@ -4,7 +6,6 @@
 # {
 #	MaxAmount	Max Amount allowed to be crafted in a row from gump's amount entry
 #	DefaultAmount	Default amount in the text box when first using a skill
-#	RetainColor	0/1 for Off/On if skills allow retaining color of material
 #	Info		0/1 for Off/On if skills give the Info button for items
 #	MakeLast	0/1 for Off/On if skills give the Make Last button
 #	Resmelt		0/1 for Off/On if skills allow resmelting from crafting gump
@@ -53,7 +54,6 @@
 {
 	MaxAmount	10
 	DefaultAmount	1
-	RetainColor	1
 	Info		1
 	MakeLast	1
 	Resmelt		1
@@ -83,6 +83,7 @@
 	Smelt		0
 	MakersMark	0
 	RetainColor	0
+	MenuFile	:alchemy:AlchMenu
 	ExceptionalName	brewed by
 }
 
@@ -112,6 +113,7 @@
 	Smelt		0
 	MakersMark	1
 	RetainColor	1
+	MenuFile	:carpentry:CarpMenu
 	ExceptionalName	crafted by
 }
 
@@ -126,6 +128,7 @@
 	Smelt		0
 	MakersMark	0
 	RetainColor	0
+	MenuFile	:cartography:CartMenu
 	ExceptionalName	drawn by
 }
 

Modified: trunk/096/pkg/systems/crafting/config/resourceList.cfg
===================================================================
--- trunk/096/pkg/systems/crafting/config/resourceList.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/systems/crafting/config/resourceList.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,5 +1,6 @@
-// Metals/Ingots
+# //$Id$
 
+# Metals/Ingots
 Resource 0x6309
 {
     Name        iron
@@ -108,7 +109,7 @@
     Ptmod       25
 }
 
-// Wood/Logs/Boards
+# Wood/Logs/Boards
 
 Resource 0x1bdd
 {
@@ -134,7 +135,7 @@
     Ptmod       0
 }
 
-// Cloth
+# Cloth
 
 Resource 0x1766
 {
@@ -258,7 +259,7 @@
 }
 
 
-// Leather
+# Leather
 
 Resource 0x1078
 {

Modified: trunk/096/pkg/systems/housing/itemdesc.cfg
===================================================================
--- trunk/096/pkg/systems/housing/itemdesc.cfg	2005-09-28 18:44:22 UTC (rev 271)
+++ trunk/096/pkg/systems/housing/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
@@ -1,4 +1,6 @@
-Item 0x0bd1
+# //$Id$
+
+Item 0xbd1
 {
     Name             brasssign1
     Script           sign
@@ -8,7 +10,7 @@
     UseRequiresLOS   0
 }
 
-Item 0x0bd2
+Item 0xbd2
 {
     Name             brasssign
     Script           sign
@@ -18,7 +20,7 @@
     UseRequiresLOS   0
 }
 
-Item 0x0bcf
+Item 0xbcf
 {
     Name             woodensign1
     Script           sign
@@ -28,7 +30,7 @@
     UseRequiresLOS   0
 }
 
-Item 0x0bd0
+Item 0xbd0
 {
     Name             woodensign
     Script           sign
@@ -208,97 +210,97 @@
     cprop numlockdowns i86
     cprop numsecure  i4
 }
-Item 0x602D 
-{ 
-    Name             smalltowerdeed 
-    Desc             deed to a small tower 
-    Graphic          0x14F0 
-    Script           houseDeed 
-    newbie           1 
-    VendorSellsFor   80000 
-    VendorBuysFor    35000 
-    HouseObjType     smalltowerhouse 
-    cprop numlockdowns i35 
-    cprop numsecure  i2 
-} 
-Item 0x602E 
-{ 
-    Name             smallmarbleshopdeed 
-    Desc             deed to a small marble shop 
-    Graphic          0x14F0 
-    Script           houseDeed 
-    newbie           1 
-    VendorSellsFor   80000 
-    VendorBuysFor    35000 
-    HouseObjType     smallmarbleshophouse 
-    cprop numlockdowns i25 
-    cprop numsecure  i1 
-} 
-Item 0x602F 
-{ 
-    Name             smallstoneshopdeed 
-    Desc             deed to a small stone shop 
-    Graphic          0x14F0 
-    Script           houseDeed 
-    newbie           1 
-    VendorSellsFor   80000 
-    VendorBuysFor    35000 
-    HouseObjType     smallstoneshophouse 
-    cprop numlockdowns i25 
-    cprop numsecure  i1 
-} 
-Item 0x6030 
-{ 
-    Name             largemarblehousedeed 
-    Desc             deed to a large marble house 
-    Graphic          0x14F0 
-    Script           houseDeed 
-    newbie           1 
-    VendorSellsFor   153000 
-    VendorBuysFor    76500 
-    HouseObjType     largemarblehouse 
-    cprop numlockdowns i86 
-    cprop numsecure  i4 
-} 
-Item 0x6031 
-{ 
-    Name             logcabindeed 
-    Desc             deed to a log cabin 
-    Graphic          0x14F0 
-    Script           houseDeed 
-    newbie           1 
-    VendorSellsFor   145000 
-    VendorBuysFor    72000 
-    HouseObjType     logcabin 
-    cprop numlockdowns i86 
-    cprop numsecure  i3 
-} 
-Item 0x6032 
-{ 
-    Name             sandstonepatiohousedeed 
-    Desc             deed to a sandstone patio house 
-    Graphic          0x14F0 
-    Script           houseDeed 
-    newbie           1 
-    VendorSellsFor   125000 
-    VendorBuysFor    52000 
-    HouseObjType     sandstonepatiohouse 
-    cprop numlockdowns i66 
-    cprop numsecure  i2 
-} 
-Item 0x6033 
-{ 
-    Name             twostoryvilladeed 
-    Desc             deed to a two story villa 
-    Graphic          0x14F0 
-    Script           houseDeed 
-    newbie           1 
-    VendorSellsFor   145000 
-    VendorBuysFor    72000 
-    HouseObjType     twostoryvilla 
-    cprop numlockdowns i86 
-    cprop numsecure  i3 
+Item 0x602D
+{
+    Name             smalltowerdeed
+    Desc             deed to a small tower
+    Graphic          0x14F0
+    Script           houseDeed
+    newbie           1
+    VendorSellsFor   80000
+    VendorBuysFor    35000
+    HouseObjType     smalltowerhouse
+    cprop numlockdowns i35
+    cprop numsecure  i2
 }
+Item 0x602E
+{
+    Name             smallmarbleshopdeed
+    Desc             deed to a small marble shop
+    Graphic          0x14F0
+    Script           houseDeed
+    newbie           1
+    VendorSellsFor   80000
+    VendorBuysFor    35000
+    HouseObjType     smallmarbleshophouse
+    cprop numlockdowns i25
+    cprop numsecure  i1
+}
+Item 0x602F
+{
+    Name             smallstoneshopdeed
+    Desc             deed to a small stone shop
+    Graphic          0x14F0
+    Script           houseDeed
+    newbie           1
+    VendorSellsFor   80000
+    VendorBuysFor    35000
+    HouseObjType     smallstoneshophouse
+    cprop numlockdowns i25
+    cprop numsecure  i1
+}
+Item 0x6030
+{
+    Name             largemarblehousedeed
+    Desc             deed to a large marble house
+    Graphic          0x14F0
+    Script           houseDeed
+    newbie           1
+    VendorSellsFor   153000
+    VendorBuysFor    76500
+    HouseObjType     largemarblehouse
+    cprop numlockdowns i86
+    cprop numsecure  i4
+}
+Item 0x6031
+{
+    Name             logcabindeed
+    Desc             deed to a log cabin
+    Graphic          0x14F0
+    Script           houseDeed
+    newbie           1
+    VendorSellsFor   145000
+    VendorBuysFor    72000
+    HouseObjType     logcabin
+    cprop numlockdowns i86
+    cprop numsecure  i3
+}
+Item 0x6032
+{
+    Name             sandstonepatiohousedeed
+    Desc             deed to a sandstone patio house
+    Graphic          0x14F0
+    Script           houseDeed
+    newbie           1
+    VendorSellsFor   125000
+    VendorBuysFor    52000
+    HouseObjType     sandstonepatiohouse
+    cprop numlockdowns i66
+    cprop numsecure  i2
+}
+Item 0x6033
+{
+    Name             twostoryvilladeed
+    Desc             deed to a two story villa
+    Graphic          0x14F0
+    Script           houseDeed
+    newbie           1
+    VendorSellsFor   145000
+    VendorBuysFor    72000
+    HouseObjType     twostoryvilla
+    cprop numlockdowns i86
+    cprop numsecure  i3
+}
 
 Item 0x14ef
 {
@@ -421,62 +423,62 @@
     OldObjtype       0x4068
 }
 
-House 0x6074 
-{ 
-    Name             smalltowerhouse 
-    WalkOnScript     houseBanning 
-    Graphic          0x4098 
-    MultiID          0x98 
-    OldObjtype       0x4098 
-} 
-House 0x6075 
-{ 
-    Name             smallmarbleshophouse 
-    WalkOnScript     houseBanning 
-    Graphic          0x40A2 
-    MultiID          0xA2 
-    OldObjtype       0x40A2 
-} 
-House 0x6076 
-{ 
-    Name             smallstoneshophouse 
-    WalkOnScript     houseBanning 
-    Graphic          0x40A0 
-    MultiID          0xA0 
-    OldObjtype       0x40A0 
-} 
-House 0x6077 
-{ 
-    Name             largemarblehouse 
-    WalkOnScript     houseBanning 
-    Graphic          0x4096 
-    MultiID          0x96 
-    OldObjtype       0x4096 
-} 
-House 0x6078 
-{ 
-    Name             logcabin 
-    WalkOnScript     houseBanning 
-    Graphic          0x409A 
-    MultiID          0x9A 
-    OldObjtype       0x409A 
-} 
-House 0x6079 
-{ 
-    Name             sandstonepatiohouse 
-    WalkOnScript     houseBanning 
-    Graphic          0x409C 
-    MultiID          0x9C 
-    OldObjtype       0x409C 
-} 
-House 0x607A 
-{ 
-    Name             twostoryvilla 
-    WalkOnScript     houseBanning 
-    Graphic          0x409E 
-    MultiID          0x9E 
-    OldObjtype       0x409E 
-} 
+House 0x6074
+{
+    Name             smalltowerhouse
+    WalkOnScript     houseBanning
+    Graphic          0x4098
+    MultiID          0x98
+    OldObjtype       0x4098
+}
+House 0x6075
+{
+    Name             smallmarbleshophouse
+    WalkOnScript     houseBanning
+    Graphic          0x40A2
+    MultiID          0xA2
+    OldObjtype       0x40A2
+}
+House 0x6076
+{
+    Name             smallstoneshophouse
+    WalkOnScript     houseBanning
+    Graphic          0x40A0
+    MultiID          0xA0
+    OldObjtype       0x40A0
+}
+House 0x6077
+{
+    Name             largemarblehouse
+    WalkOnScript     houseBanning
+    Graphic          0x4096
+    MultiID          0x96
+    OldObjtype       0x4096
+}
+House 0x6078
+{
+    Name             logcabin
+    WalkOnScript     houseBanning
+    Graphic          0x409A
+    MultiID          0x9A
+    OldObjtype       0x409A
+}
+House 0x6079
+{
+    Name             sandstonepatiohouse
+    WalkOnScript     houseBanning
+    Graphic          0x409C
+    MultiID          0x9C
+    OldObjtype       0x409C
+}
+House 0x607A
+{
+    Name             twostoryvilla
+    WalkOnScript     houseBanning
+    Graphic          0x409E
+    MultiID          0x9E
+    OldObjtype       0x409E
+}
 
 Item 0x9999
 {



From austin at berlios.de  Wed Sep 28 21:04:35 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 21:04:35 +0200
Subject: [Poldistro-svn] r273 - trunk/096/pkg/skills/carpentry
Message-ID: <200509281904.j8SJ4ZiZ028761@sheep.berlios.de>

Author: austin
Date: 2005-09-28 21:04:35 +0200 (Wed, 28 Sep 2005)
New Revision: 273

Modified:
   trunk/096/pkg/skills/carpentry/itemdesc.cfg
Log:
Container entries deleted. New entries in containers package.

Modified: trunk/096/pkg/skills/carpentry/itemdesc.cfg
===================================================================
--- trunk/096/pkg/skills/carpentry/itemdesc.cfg	2005-09-28 18:50:51 UTC (rev 272)
+++ trunk/096/pkg/skills/carpentry/itemdesc.cfg	2005-09-28 19:04:35 UTC (rev 273)
@@ -289,516 +289,6 @@
     Cprop furniture     i1
 }
 
-Container 0xa4f
-{
-    Name                armoir
-    Gump                0x004f
-    MinX                20
-    MaxX                80
-    MinY                10
-    MaxY                150
-    VendorSellsFor      105
-    VendorBuysFor       52
-    Weight		        7
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0xa53
-{
-    Name                armoir2
-    Gump                0x004f
-    MinX                20
-    MaxX                80
-    MinY                10
-    MaxY                150
-    VendorSellsFor      105
-    VendorBuysFor       52
-    Weight		        7
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0xa4d
-{
-    Name                cherryarmoir
-    Gump                0x004e
-    MinX                20
-    MaxX                80
-    MinY                10
-    MaxY                150
-    VendorSellsFor      105
-    VendorBuysFor       52
-    Weight		        7
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0xa51
-{
-    Name                cherryarmoir2
-    Gump                0x004e
-    MinX                20
-    MaxX                80
-    MinY                10
-    MaxY                150
-    VendorSellsFor      105
-    VendorBuysFor       52
-    Weight		        7
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0xa2c
-{
-    Name                dresser
-    Gump                0x0051
-    MinX                10
-    MaxX                120
-    MinY                10
-    MaxY                90
-    VendorSellsFor      60
-    VendorBuysFor       30
-    Weight		        5
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0xa34
-{
-    Name                dresser2
-    Gump                0x0051
-    MinX                10
-    MaxX                120
-    MinY                10
-    MaxY                90
-    VendorSellsFor      60
-    VendorBuysFor       30
-    Weight		        5
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0xa30
-{
-    Name                cherrydresser
-    Gump                0x0048
-    MinX                10
-    MaxX                120
-    MinY                10
-    MaxY                90
-    VendorSellsFor      60
-    VendorBuysFor       30
-    Weight		        5
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0xa38
-{
-    Name                cherrydresser2
-    Gump                0x0048
-    MinX                10
-    MaxX                120
-    MinY                10
-    MaxY                90
-    VendorSellsFor      60
-    VendorBuysFor       30
-    Weight		        5
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0xa97
-{
-    Name                bookshelf
-    Gump                0x004d
-    MinX                40
-    MaxX                120
-    MinY                10
-    MaxY                60
-    VendorSellsFor      75
-    VendorBuysFor       38
-    Weight		        10
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0xa98
-{
-    Name                bookshelf2
-    Gump                0x004d
-    MinX                40
-    MaxX                120
-    MinY                10
-    MaxY                60
-    VendorSellsFor      75
-    VendorBuysFor       38
-    Weight		        10
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0xa99
-{
-    Name                bookshelf3
-    Gump                0x004d
-    MinX                40
-    MaxX                120
-    MinY                10
-    MaxY                60
-    VendorSellsFor      75
-    VendorBuysFor       38
-    Weight		        10
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0xa9a
-{
-    Name                bookshelf4
-    Gump                0x004d
-    MinX                40
-    MaxX                120
-    MinY                10
-    MaxY                60
-    VendorSellsFor      75
-    VendorBuysFor       38
-    Weight		        10
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0xa9b
-{
-    Name                bookshelf5
-    Gump                0x004d
-    MinX                40
-    MaxX                120
-    MinY                10
-    MaxY                60
-    VendorSellsFor      75
-    VendorBuysFor       38
-    Weight		        10
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0xa9c
-{
-    Name                bookshelf6
-    Gump                0x004d
-    MinX                40
-    MaxX                120
-    MinY                10
-    MaxY                60
-    VendorSellsFor      75
-    VendorBuysFor       38
-    Weight		        10
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0xa9d
-{
-    Name                shelf
-    Gump                0x004d
-    MinX                40
-    MaxX                120
-    MinY                10
-    MaxY                60
-    VendorSellsFor      70
-    VendorBuysFor       30
-    Weight		        5
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::shelfInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::shelfRemove
-}
-
-Container 0xa9e
-{
-    Name                shelf2
-    Gump                0x004d
-    MinX                40
-    MaxX                120
-    MinY                10
-    MaxY                60
-    VendorSellsFor      70
-    VendorBuysFor       30
-    Weight		        5
-    movable             1
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0x09aa
-{
-    Name                WoodenBox
-    VendorSellsFor      39
-    VendorBuysFor       19
-    Weight		        1
-    movable             1
-    Gump                0x0043
-    MinX                44
-    MaxX                143
-    MinY                65
-    MaxY                140
-    RequiresAttention   0
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0x0E80
-{
-    Name                strongBox
-    VendorSellsFor      39
-    VendorBuysFor       19
-    Weight		        1
-    Gump                0x004B
-    MinX                40
-    MaxX                60
-    MinY                20
-    MaxY                80
-    RequiresAttention   0
-    movable             1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0x0e42
-{
-    Name                WoodenChest
-    VendorSellsFor      60
-    VendorBuysFor       30
-    Weight		        5
-    movable             1
-    Gump                0x0049
-    MinX                44
-    MaxX                143
-    MinY                65
-    MaxY                140
-    RequiresAttention   0
-    Cprop furniture     i1
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0x0e43
-{
-    Name                TentChest
-    VendorSellsFor      60
-    VendorBuysFor       30
-    Weight		        5
-    movable             1
-    Gump                0x0049
-    MinX                44
-    MaxX                143
-    MinY                65
-    MaxY                140
-    Cprop furniture     i1
-    RequiresAttention   0
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0x09a9
-{
-    Name                SmallCrate
-    VendorSellsFor      24
-    VendorBuysFor       12
-    Weight		        2
-    movable             1
-    Gump                0x0044
-    MinX                44
-    MaxX                143
-    MinY                65
-    MaxY                140
-    Cprop furniture     i1
-    RequiresAttention   0
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0x0e3f
-{
-    Name                MediumCrate
-    VendorSellsFor      30
-    VendorBuysFor       15
-    Weight		        4
-    movable             1
-    Gump                0x0044
-    MinX                44
-    MaxX                143
-    MinY                65
-    MaxY                140
-    Cprop furniture     i1
-    RequiresAttention   0
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0x0e3c
-{
-    Name                LargeCrate
-    VendorSellsFor      60
-    VendorBuysFor       30
-    Weight		        6
-    movable             1
-    Gump                0x0044
-    MinX                44
-    MaxX                143
-    MinY                65
-    MaxY                140
-    Cprop furniture     i1
-    RequiresAttention   0
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0x0E77
-{
-    Name                Barrel
-    VendorSellsFor      45
-    VendorBuysFor       22
-    Weight		        3
-    movable             1
-    Gump                0x003E
-    MinX                40
-    MaxX                60
-    MinY                20
-    MaxY                80
-    RequiresAttention   0
-    MaxItems            125
-    MaxWeight           400
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
 Item 0xe7f
 {
     Name                keg
@@ -858,7 +348,7 @@
     Cprop furniture     i1
 }
 
- Item 0xb8f
+Item 0xb8f
 {
     Name                table2
     VendorSellsFor      75



From austin at berlios.de  Wed Sep 28 21:07:32 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 21:07:32 +0200
Subject: [Poldistro-svn] r274 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509281907.j8SJ7Wmp028981@sheep.berlios.de>

Author: austin
Date: 2005-09-28 21:07:32 +0200 (Wed, 28 Sep 2005)
New Revision: 274

Modified:
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
   trunk/096/pkg/systems/attributes/include/vitals.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-28 19:04:35 UTC (rev 273)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-28 19:07:32 UTC (rev 274)
@@ -18,7 +18,6 @@
 include ":attributes:attributes";
 include ":attributes:settings";
 
-
 const ADV_SKILL		:= 1;
 const ADV_STATS		:= 2;
 const ADV_ALL		:= ADV_SKILL+ADV_STATS; // 3

Modified: trunk/096/pkg/systems/attributes/include/vitals.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-28 19:04:35 UTC (rev 273)
+++ trunk/096/pkg/systems/attributes/include/vitals.inc	2005-09-28 19:07:32 UTC (rev 274)
@@ -14,8 +14,6 @@
 use os;
 use cfgfile;
 
-include ":attributes:attributes";
-
 /* AP_GetVitalsCfgFile()
  * 
  * Purpose



From austin at berlios.de  Wed Sep 28 21:08:23 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 21:08:23 +0200
Subject: [Poldistro-svn] r275 - trunk/096/pkg/items/containers
Message-ID: <200509281908.j8SJ8Np3029107@sheep.berlios.de>

Author: austin
Date: 2005-09-28 21:08:23 +0200 (Wed, 28 Sep 2005)
New Revision: 275

Modified:
   trunk/096/pkg/items/containers/itemdesc.cfg
Log:


Modified: trunk/096/pkg/items/containers/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/containers/itemdesc.cfg	2005-09-28 19:07:32 UTC (rev 274)
+++ trunk/096/pkg/items/containers/itemdesc.cfg	2005-09-28 19:08:23 UTC (rev 275)
@@ -1,5 +1,6 @@
-//--=[ Small Boxes]=--------------
+#$Id$
 
+#--=[ Small Boxes]=--------------
 Container 0x9A8
 {
 	Name			StrongBox
@@ -92,7 +93,7 @@
 	DestroyScript		CanDestroy
 }
 
-//--=[ Leather ]=-----------------
+#--=[ Leather ]=-----------------
 
 Container 0x9B0
 {
@@ -187,31 +188,8 @@
 	DestroyScript		CanDestroy
 }
 
-Container 0xE76
-{
-	Name			Bag
-	Desc			bag
+#--=[ Chests ]=------------------
 
-	Gump			0x3D
-	MinX			40
-	MaxX			60
-	MinY			20
-	MaxY			80
-	MaxItems		50
-	MaxWeight		0
-
-	RequiresAttention	0
-	Movable			1
-	Lockable		0
-
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
-}
-
-//--=[ Chests ]=------------------
-
 Container 0x9AB
 {
 	Name			SilverChest1
@@ -350,7 +328,7 @@
 	DestroyScript		CanDestroy
 }
 
-//--=[ Crates ]=------------------
+#--=[ Crates ]=------------------
 
 Container 0x9A9
 {
@@ -490,7 +468,7 @@
 	DestroyScript		CanDestroy
 }
 
-//--=[ Baskets ]=-----------------
+#--=[ Baskets ]=-----------------
 
 Container 0xE7A
 {
@@ -538,7 +516,7 @@
 	DestroyScript		CanDestroy
 }
 
-//--=[ Barrels ]=-------------------
+#--=[ Barrels ]=-------------------
 
 Container 0xE77
 {
@@ -589,7 +567,7 @@
 	DestroyScript		CanDestroy
 }
 
-//--=[ Furniture ]=-----------------
+#--=[ Furniture ]=-----------------
 
 Container 0xA2C
 {
@@ -683,7 +661,7 @@
 
 Container 0xA4D
 {
-	Name			Armoire
+	Name			CherryArmoire
 	Desc			armoire
 
 	Gump			0x4E
@@ -708,7 +686,7 @@
 }
 Container 0xA51
 {
-	Name			Armoire2
+	Name			CherryArmoire2
 	Desc			armoire
 
 	Gump			0x4E
@@ -783,7 +761,7 @@
 	CloseGraphic		2643
 }
 
-//--=[ Book Shelves ]=--------------
+#--=[ Book Shelves ]=--------------
 
 Container 0xA9D
 {



From austin at berlios.de  Wed Sep 28 21:13:07 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 21:13:07 +0200
Subject: [Poldistro-svn] r276 - trunk/096/pkg/items/containers
Message-ID: <200509281913.j8SJD7rW029819@sheep.berlios.de>

Author: austin
Date: 2005-09-28 21:13:06 +0200 (Wed, 28 Sep 2005)
New Revision: 276

Modified:
   trunk/096/pkg/items/containers/itemdesc.cfg
Log:
id tags!

Modified: trunk/096/pkg/items/containers/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/containers/itemdesc.cfg	2005-09-28 19:08:23 UTC (rev 275)
+++ trunk/096/pkg/items/containers/itemdesc.cfg	2005-09-28 19:13:06 UTC (rev 276)
@@ -18,10 +18,10 @@
 	Movable			1
 	Lockable		1
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xE80
@@ -41,10 +41,10 @@
 	Movable			1
 	Lockable		1
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0x9AA
@@ -64,10 +64,10 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xE7D
@@ -87,10 +87,10 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 #--=[ Leather ]=-----------------
@@ -112,10 +112,10 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xE79
@@ -135,10 +135,10 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0x9B2
@@ -159,9 +159,9 @@
 	CanDye			1
 	Lockable		0
 
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xE75
@@ -183,9 +183,9 @@
 	CanDye			1
 	Lockable		0
 
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 #--=[ Chests ]=------------------
@@ -207,10 +207,10 @@
 	Movable			1
 	Lockable		1
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xE7C
@@ -230,10 +230,10 @@
 	Movable			1
 	Lockable		1
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xE41
@@ -253,10 +253,10 @@
 	Movable			1
 	Lockable		1
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xE40
@@ -276,10 +276,10 @@
 	Movable			1
 	Lockable		1
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xE43
@@ -299,10 +299,10 @@
 	Movable			1
 	Lockable		1
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xE42
@@ -322,10 +322,10 @@
 	Movable			1
 	Lockable		1
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 #--=[ Crates ]=------------------
@@ -347,10 +347,10 @@
 	Movable			1
 	Lockable		1
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xE7E
@@ -370,10 +370,10 @@
 	Movable			1
 	Lockable		1
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xE3F
@@ -393,10 +393,10 @@
 	Movable			1
 	Lockable		1
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xE3E
@@ -416,10 +416,10 @@
 	Movable			1
 	Lockable		1
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xE3D
@@ -439,10 +439,10 @@
 	Movable			1
 	Lockable		1
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xE3C
@@ -462,10 +462,10 @@
 	Movable			1
 	Lockable		1
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 #--=[ Baskets ]=-----------------
@@ -487,10 +487,10 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0x9B1
@@ -510,17 +510,17 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 #--=[ Barrels ]=-------------------
 
 Container 0xE77
 {
-	Name			OpenBarrel
+	Name			container/openBarrel
 	Desc			barrel
 	Graphic			3707
 
@@ -537,10 +537,10 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xFAE
@@ -561,10 +561,10 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 #--=[ Furniture ]=-----------------
@@ -586,10 +586,10 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 Container 0xA34
 {
@@ -608,10 +608,10 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xA30
@@ -631,10 +631,10 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 Container 0xA38
 {
@@ -653,10 +653,10 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0xA4D
@@ -676,12 +676,12 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 
-	OpenGraphic		2636
+	container/openGraphic		2636
 	CloseGraphic		2637
 }
 Container 0xA51
@@ -701,12 +701,12 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 
-	OpenGraphic		2640
+	container/openGraphic		2640
 	CloseGraphic		2641
 }
 
@@ -727,12 +727,12 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 
-	OpenGraphic		2638
+	container/openGraphic		2638
 	CloseGraphic		2639
 }
 Container 0xA53
@@ -752,12 +752,12 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 
-	OpenGraphic		2642
+	container/openGraphic		2642
 	CloseGraphic		2643
 }
 
@@ -780,7 +780,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
+	Script			container/open
 	CanInsertScript		bookshelf/CanInsert
 	CanRemoveScript		bookshelf/CanRemove
 	OnInsertScript		bookshelf/OnInsert
@@ -808,7 +808,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			open
+	Script			container/open
 	CanInsertScript		bookshelf/CanInsert
 	CanRemoveScript		bookshelf/CanRemove
 	OnInsertScript		bookshelf/OnInsert
@@ -839,10 +839,10 @@
 	RequiresAttention	0
 	Lockable		1
 	
-	Script			open
-	CanRemoveScript		CanRemove
-	CanInsertScript		CanInsert
-	DestroyScript		CanDestroy
+	Script			container/open
+	CanRemoveScript		container/CanRemove
+	CanInsertScript		container/CanInsert
+	DestroyScript		container/CanDestroy
 }
 
 Container 0x2006



From austin at berlios.de  Wed Sep 28 21:19:22 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 21:19:22 +0200
Subject: [Poldistro-svn] r277 - trunk/096/pkg/items/containers/include
Message-ID: <200509281919.j8SJJM04030550@sheep.berlios.de>

Author: austin
Date: 2005-09-28 21:19:21 +0200 (Wed, 28 Sep 2005)
New Revision: 277

Added:
   trunk/096/pkg/items/containers/include/checks.inc
Log:


Added: trunk/096/pkg/items/containers/include/checks.inc
===================================================================
--- trunk/096/pkg/items/containers/include/checks.inc	2005-09-28 19:13:06 UTC (rev 276)
+++ trunk/096/pkg/items/containers/include/checks.inc	2005-09-28 19:19:21 UTC (rev 277)
@@ -0,0 +1,39 @@
+//$Id$
+
+/*===============================================================
+* Current Version
+* CHECKS.INC - v1.0
+* Updated 9/28/2005 12:15PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+/*
+ * CP_RootContainerLocked(object)
+ *
+ * Purpose
+ * Determines if any containers the object is in are locked.
+ *
+ * Parameters
+ * Object:	Object to check the containers of.
+ *
+ * Return value
+ * Returns 1 if a locked container is found.
+ *
+ */
+function CP_RootContainerLocked(object)
+	var temp := object;
+	while ( temp.container )
+		if ( (temp.container).locked )
+			return 1;
+		else 
+			// Move onto checking the next container.
+			temp := temp.container;
+		endif
+		sleepms(2);
+	endwhile
+	
+	return 0;
+endfunction
\ No newline at end of file



From muaddiblsd at berlios.de  Wed Sep 28 21:20:43 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Wed, 28 Sep 2005 21:20:43 +0200
Subject: [Poldistro-svn] r278 - in trunk/096: pkg/commands/gm pkg/mobiles/brainAI/complete/testnpc pkg/skills/camping pkg/skills/detecthidden pkg/skills/fishing pkg/skills/herding pkg/skills/itemid pkg/skills/magery pkg/skills/musicianship pkg/skills/removetrap pkg/skills/stealth pkg/skills/tasteid pkg/skills/tinkering pkg/skills/tracking scripts/control scripts/items
Message-ID: <200509281920.j8SJKhpT030646@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-28 21:20:39 +0200 (Wed, 28 Sep 2005)
New Revision: 278

Modified:
   trunk/096/pkg/commands/gm/attack.src
   trunk/096/pkg/mobiles/brainAI/complete/testnpc/combat.src
   trunk/096/pkg/skills/camping/camping.src
   trunk/096/pkg/skills/detecthidden/detectHidden.src
   trunk/096/pkg/skills/fishing/SOSBottle.src
   trunk/096/pkg/skills/fishing/fishing.src
   trunk/096/pkg/skills/herding/herd.src
   trunk/096/pkg/skills/itemid/itemID.src
   trunk/096/pkg/skills/magery/magicUntrap.src
   trunk/096/pkg/skills/magery/unlock.src
   trunk/096/pkg/skills/musicianship/entice.src
   trunk/096/pkg/skills/musicianship/musicianship.src
   trunk/096/pkg/skills/musicianship/provocation.src
   trunk/096/pkg/skills/removetrap/removeTrap.src
   trunk/096/pkg/skills/stealth/stealth.src
   trunk/096/pkg/skills/tasteid/tasteID.src
   trunk/096/pkg/skills/tinkering/tinkering.src
   trunk/096/pkg/skills/tracking/tracking.src
   trunk/096/scripts/control/fireControl.src
   trunk/096/scripts/items/fires.src
Log:
Updates for the removed include "include/SkillPoints" file

Modified: trunk/096/pkg/commands/gm/attack.src
===================================================================
--- trunk/096/pkg/commands/gm/attack.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/commands/gm/attack.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use uo;
 use util;
 
@@ -3,5 +5,4 @@
 include "include/client";
 include "include/objtype";
-include "include/skillPoints";
 include "include/bard";
 include "include/eventID";

Modified: trunk/096/pkg/mobiles/brainAI/complete/testnpc/combat.src
===================================================================
--- trunk/096/pkg/mobiles/brainAI/complete/testnpc/combat.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/mobiles/brainAI/complete/testnpc/combat.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use uo;
 use os;
 
@@ -3,5 +5,5 @@
 include ":brainAI:include/npcNerves";
 include ":brainAI:include/npcCommands";
-include ":attributes:/attributes";
+include ":attributes:attributes";
 
 program BrainNerve(params)
@@ -18,7 +20,7 @@
 
 	var opponent := event.source;
 	var flee_mode := 0;
-	
+
 	AI_SetOpponent(npc, opponent);
 
 	while ( npc )

Modified: trunk/096/pkg/skills/camping/camping.src
===================================================================
--- trunk/096/pkg/skills/camping/camping.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/camping/camping.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use uo;
 use util;
 use os;
@@ -5,7 +7,6 @@
 include "include/client";
 include "include/attributes";
 include "include/objtype";
-include "include/skillPoints";
 include "include/canAccess";
 
 program UseWood( who, wood )
@@ -34,8 +35,8 @@
 		PrintTextAbovePrivate( wood, "Put that on the ground first!", who );
 		return;
 	endif
-	
-	if(CheckSkill(who, SKILLID_CAMPING, -1, get_default_points(SKILLID_CAMPING)))
+
+	if(CheckSkill(who, SKILLID_CAMPING, -1, 50))
 		var x := wood.x;
 		var y := wood.y;
 		var z := wood.z;

Modified: trunk/096/pkg/skills/detecthidden/detectHidden.src
===================================================================
--- trunk/096/pkg/skills/detecthidden/detectHidden.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/detecthidden/detectHidden.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,16 @@
+// //$Id$
+
+////////////////////////////////////////////////////////////////////////////////////////////////////
+//
+//  name:    hiding.src - Skill Script
+//  version: 1.0
+//  author:  Distro
+//
+//  Purpose:
+//
+//
+//
+////////////////////////////////////////////////////////////////////////////////////////////////////
 use uo;
 use os;
 use util;
@@ -3,34 +16,33 @@
 use cfgfile;
 
-include "include/attributes";
+include ":attributes:attributeConstants";
+include ":attributes:attributes";
+include ":attributes:skillCheck";
 include "include/sound";
 include "include/tileEffects";
-include "include/skillPoints";
 include ":poisonwatcher:poisons";
 
+CONST TRAP := "hiddentrap";
+CONST CRITICAL_FAILURE := 1;
+
 var thepoints;
-var item_cfg;
+var item_cfg := ReadConfigFile( ":*:itemdesc" );
 
-const TRAP := "hiddentrap";
+program skill_DetectHidden(who)
 
-const CRITICAL_FAILURE := 1;
+	EraseObjProperty(who, "IsMeditating");
+	EraseObjProperty(who, "HealTimer");
+	thepoints := AP_GetSkill(who, ATTRIBUTE_DETECTING_HIDDEN) + 10;
 
-
-program detectHidden(who)
-  EraseObjProperty(who, "IsMeditating");
-  EraseObjProperty(who, "HealTimer");
-    thepoints := get_default_points(SKILLID_DETECTINGHIDDEN );
-    item_cfg := ReadConfigFile( "::itemdesc" );
-    SendSysMessage(who,"Target the location to search.");
-    var targ := TargetCoordinates( who );
-    var range := getDetectRange( GetEffectiveSkill( who, SKILLID_DETECTINGHIDDEN  ) );
-    var hiders := ListMobilesNearLocationEx( cint(targ.x), cint(targ.y), cint(targ.z), range, LISTEX_FLAG_HIDDEN, who.realm );
-    var items  := ListItemsNearLocation( cint(targ.x), cint(targ.y), cint(targ.z), range, who.realm );
-    var elem;
-    var data;
-    var prop;
-    var dtct;
-    var skil;
-    var foundany := 0;
+	SendSysMessage(who,"Target the location to search.");
+	var targ := TargetCoordinates( who );
+	var range := my_DetectRange( AP_GetSkill( who, ATTRIBUTE_DETECTING_HIDDEN  ) );
+	var hiders := ListMobilesNearLocationEx( cint(targ.x), cint(targ.y), cint(targ.z), range, LISTEX_FLAG_HIDDEN, who.realm );
+	var items  := ListItemsNearLocation( cint(targ.x), cint(targ.y), cint(targ.z), range, who.realm );
+	var elem;
+	var data;
+	var prop;
+	var dtct;
+	var foundany := 0;
     foreach mobile in hiders
       if( Found( who,  mobile) )
@@ -52,7 +64,7 @@
      var trapstrength := GetObjProperty(item,"trap_strength");
      thepoints := trapstrength *2;
 	 if( dtct )
-        if(CheckSkill( who, SKILLID_DETECTINGHIDDEN, -1, thepoints ))
+        if(SkillCheck( who, ATTRIBUTE_DETECTING_HIDDEN, -1, thepoints ))
 	      PrintTextAbovePrivate( item, "Trapped", who);
         else
           var results := RandomInt(9) + 1;
@@ -82,7 +94,7 @@
           endif
         endif
       elseif( data == TRAP)
-        if(CheckSkill( who, SKILLID_DETECTINGHIDDEN, -1, thepoints ))
+        if(SkillCheck( who, ATTRIBUTE_DETECTING_HIDDEN, -1, thepoints ))
 	      PrintTextAbovePrivate( item, "Trap", who );
           SetObjProperty( item, "trapped", 1 );
         else
@@ -117,7 +129,7 @@
           endif
         endif
      elseif( prop )
-        if(CheckSkill( who, SKILLID_DETECTINGHIDDEN, -1, thepoints ))
+        if(SkillCheck( who, ATTRIBUTE_DETECTING_HIDDEN, -1, thepoints ))
 	      PrintTextAbovePrivate( item, "Trapped", who);
 	      SetObjProperty( item, "trapped", 1 );
         else
@@ -169,15 +181,15 @@
 
 
 function Found( finder, hider ) //FIXME: should not be 100% certain to find a hider if your skill is greater
-  var hide_skill := GetEffectiveSkill( hider, SKILLID_HIDING );
-  if (CheckSkill( finder, SKILLID_DETECTINGHIDDEN, hide_skill, thepoints ) )
+  var hide_skill := AP_GetSkill( hider, ATTRIBUTE_HIDING );
+  if (SkillCheck( finder, ATTRIBUTE_DETECTING_HIDDEN, hide_skill, thepoints ) )
     return 1;
   else
     return 0;
   endif
 endfunction
 
-function getDetectRange( skill )
+function my_DetectRange( skill )
     if( skill >= 100 )
         return 10;
     elseif( skill >= 90 )

Modified: trunk/096/pkg/skills/fishing/SOSBottle.src
===================================================================
--- trunk/096/pkg/skills/fishing/SOSBottle.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/fishing/SOSBottle.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use uo;
 use cfgfile;
 use os;
@@ -6,7 +8,6 @@
 include "include/client";
 include "include/objtype";
 include "include/startEqp";
-include "include/skillPoints";
 include "include/dist";
 include "include/canAccess";
 

Modified: trunk/096/pkg/skills/fishing/fishing.src
===================================================================
--- trunk/096/pkg/skills/fishing/fishing.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/fishing/fishing.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use uo;
 use cfgfile;
 use os;
@@ -10,7 +12,6 @@
 include "include/math";
 include "include/objtype";
 include "include/startEqp";
-include "include/skillPoints";
 include "include/canAccess";
 include "include/toolWear";
 include "include/eventID";

Modified: trunk/096/pkg/skills/herding/herd.src
===================================================================
--- trunk/096/pkg/skills/herding/herd.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/herding/herd.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use os;
 use uo;
 use cfgfile;
@@ -5,7 +7,6 @@
 include "include/client";
 include "include/eventID";
 include "include/attributes";
-include "include/skillPoints";
 
 program herd(who)
         SendSysMessage(who, "What would you like to herd?");

Modified: trunk/096/pkg/skills/itemid/itemID.src
===================================================================
--- trunk/096/pkg/skills/itemid/itemID.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/itemid/itemID.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use uo;
 use os;
 use basic;
@@ -4,9 +6,7 @@
 use cfgfile;
 
 include "include/client";
-include "include/skillPoints";
 
-
 program do_itemid( who )
   EraseObjProperty(who, "IsMeditating");
   EraseObjProperty(who, "HealTimer");

Modified: trunk/096/pkg/skills/magery/magicUntrap.src
===================================================================
--- trunk/096/pkg/skills/magery/magicUntrap.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/magery/magicUntrap.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use os;
 use uo;
 use util;
@@ -5,9 +7,7 @@
 include "include/client";
 include "include/sound";
 include "include/attributes";
-include "include/skillPoints";
 
-
 program spell_magicUntrap(parms)
 	var caster := parms.caster;
 	var castOn := parms.castOn;

Modified: trunk/096/pkg/skills/magery/unlock.src
===================================================================
--- trunk/096/pkg/skills/magery/unlock.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/magery/unlock.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use os;
 use uo;
 use util;
@@ -4,9 +6,7 @@
 
 include "include/sound";
 include "include/client";
-include "include/skillPoints";
 
-
 program spell_unlock(parms)
   var caster := parms.caster;
   var castOn := parms.castOn;

Modified: trunk/096/pkg/skills/musicianship/entice.src
===================================================================
--- trunk/096/pkg/skills/musicianship/entice.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/musicianship/entice.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use uo;
 use os;
 use util;
@@ -4,7 +6,6 @@
 
 include "include/client";
 include "include/objtype";
-include "include/skillPoints";
 include "include/bard";
 include "include/eventID";
 

Modified: trunk/096/pkg/skills/musicianship/musicianship.src
===================================================================
--- trunk/096/pkg/skills/musicianship/musicianship.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/musicianship/musicianship.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use uo;
 use os;
 use util;
@@ -5,7 +7,6 @@
 include "include/client";
 include "include/attributes";
 include "include/objtype";
-include "include/skillPoints";
 include "include/canAccess";
 
 var config;

Modified: trunk/096/pkg/skills/musicianship/provocation.src
===================================================================
--- trunk/096/pkg/skills/musicianship/provocation.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/musicianship/provocation.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,4 @@
+// $Id$
 
 use uo;
 use os;
@@ -6,7 +7,6 @@
 
 include "include/client";
 include "include/objtype";
-include "include/skillPoints";
 include "include/bard";
 include "include/eventID";
 include "include/dist";
@@ -109,7 +109,7 @@
    PrintTextAbovePrivate(thetarg, "You enrage " + thetarg.name + "!", who);
     SendEvent(thetarg, ev);
   endif
-endprogram 
+endprogram
 
 function canProvoke(template)
   case( template )

Modified: trunk/096/pkg/skills/removetrap/removeTrap.src
===================================================================
--- trunk/096/pkg/skills/removetrap/removeTrap.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/removetrap/removeTrap.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use uo;
 use os;
 use util;
@@ -5,14 +7,13 @@
 include "include/client";
 include "include/sound";
 include "include/tileEffects";
-include "include/skillPoints";
 include "include/canAccess";
 
 
 program removeTrap(who)
   EraseObjProperty(who, "IsMeditating");
   EraseObjProperty(who, "HealTimer");
-  var thepoints := get_default_points(SKILLID_REMOVETRAP);
+  var thepoints := 50;
   SendSysMessage(who, "Select Target.");
   var item := Target(who);
   if(!item)

Modified: trunk/096/pkg/skills/stealth/stealth.src
===================================================================
--- trunk/096/pkg/skills/stealth/stealth.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/stealth/stealth.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -14,9 +14,9 @@
 ////////////////////////////////////////////////////////////////////////////////////////////////////
 use uo;
 
-include ":attributes:include/attributeConstants";
-include ":attributes:include/attributes";
-include ":attributes:include/skillCheck";
+include ":attributes:attributeConstants";
+include ":attributes:attributes";
+include ":attributes:skillCheck";
 
 program skill_Stealth( who )
 

Modified: trunk/096/pkg/skills/tasteid/tasteID.src
===================================================================
--- trunk/096/pkg/skills/tasteid/tasteID.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/tasteid/tasteID.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use uo;
 use cfgfile;
 
@@ -8,8 +10,6 @@
 const UOBJECT_FLASK_FULL := 0x1834;
 const UOBJECT_FLASK_HEATED := 0x1833;
 
-include "include/skillPoints";
-
 program do_tasteid(who)
   EraseObjProperty(who, "IsMeditating");
   EraseObjProperty(who, "HealTimer");

Modified: trunk/096/pkg/skills/tinkering/tinkering.src
===================================================================
--- trunk/096/pkg/skills/tinkering/tinkering.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/tinkering/tinkering.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use uo;
 use cfgfile;
 use os;
@@ -7,7 +9,6 @@
 include "include/client";
 include "include/sound";
 include "include/objtype";
-include "include/skillPoints";
 include "util/key";
 include "include/canAccess";
 include "include/toolWear";

Modified: trunk/096/pkg/skills/tracking/tracking.src
===================================================================
--- trunk/096/pkg/skills/tracking/tracking.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/pkg/skills/tracking/tracking.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use uo;
 use basic;
 use os;
@@ -5,7 +7,6 @@
 include "include/client";
 include "include/sound";
 include "include/attributes";
-include "include/skillPoints";
 
 
 program tracking(who)

Modified: trunk/096/scripts/control/fireControl.src
===================================================================
--- trunk/096/scripts/control/fireControl.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/scripts/control/fireControl.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,3 +1,5 @@
+// $Id$
+
 use uo;
 use util;
 use os;
@@ -2,3 +4,3 @@
 use cfgfile;
-include "include/skillPoints";
+
 include "include/attributes";

Modified: trunk/096/scripts/items/fires.src
===================================================================
--- trunk/096/scripts/items/fires.src	2005-09-28 19:19:21 UTC (rev 277)
+++ trunk/096/scripts/items/fires.src	2005-09-28 19:20:39 UTC (rev 278)
@@ -1,7 +1,8 @@
+// $Id$
+
 use uo;
 use cfgfile;
 
-include "include/skillPoints";
 include "include/attributes";
 include "include/spellRestrictions";
 include "include/client";



From muaddiblsd at berlios.de  Wed Sep 28 21:31:03 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Wed, 28 Sep 2005 21:31:03 +0200
Subject: [Poldistro-svn] r279 - in trunk/096/pkg: skills/herding skills/spiritspeak systems/combat systems/nature/commands/gm
Message-ID: <200509281931.j8SJV3JM031793@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-28 21:31:02 +0200 (Wed, 28 Sep 2005)
New Revision: 279

Modified:
   trunk/096/pkg/skills/herding/herd.src
   trunk/096/pkg/skills/spiritspeak/spiritSpeak.src
   trunk/096/pkg/systems/combat/bladed.src
   trunk/096/pkg/systems/nature/commands/gm/desolation.src
Log:
Fixes for some misc issues with moved/deleted includes.

Modified: trunk/096/pkg/skills/herding/herd.src
===================================================================
--- trunk/096/pkg/skills/herding/herd.src	2005-09-28 19:20:39 UTC (rev 278)
+++ trunk/096/pkg/skills/herding/herd.src	2005-09-28 19:31:02 UTC (rev 279)
@@ -45,7 +45,7 @@
                 SendSysMessage(who, "You can't herd that!");
                 return;
         endif
-	var thepoints := get_default_points(SKILLID_HERDING);
+	var thepoints := 50;
         if(CheckSkill(who, SKILLID_HERDING, herdskill, thepoints))
 
                 SendSysMessage(who, "Where do you want to move "+ npc.name +" to?");

Modified: trunk/096/pkg/skills/spiritspeak/spiritSpeak.src
===================================================================
--- trunk/096/pkg/skills/spiritspeak/spiritSpeak.src	2005-09-28 19:20:39 UTC (rev 278)
+++ trunk/096/pkg/skills/spiritspeak/spiritSpeak.src	2005-09-28 19:31:02 UTC (rev 279)
@@ -22,9 +22,9 @@
 use uo;
 use os;
 
-include ":attributes:include/attributeConstants";
-include ":attributes:include/attributes";
-include ":attributes:include/skillCheck";
+include ":attributes:attributeConstants";
+include ":attributes:attributes";
+include ":attributes:skillCheck";
 include "include/sound";
 
 CONST SS_RANGE   :=  3;

Modified: trunk/096/pkg/systems/combat/bladed.src
===================================================================
--- trunk/096/pkg/systems/combat/bladed.src	2005-09-28 19:20:39 UTC (rev 278)
+++ trunk/096/pkg/systems/combat/bladed.src	2005-09-28 19:31:02 UTC (rev 279)
@@ -1,3 +1,6 @@
+// //$Id$
+
+
 use cfgfile;
 use uo;
 use os;
@@ -15,7 +18,7 @@
 include ":bowcraft:bowcraftFunctions";
 include ":tailoring:tailoringFunctions";
 include ":fishing:fishingFunctions";
-include ":corpses:corpseFunctions";
+include ":containers:corpse/corpseFunctions";
 
 var bowcraftconfigfile := ReadConfigFile(":bowcraft:bowcraft");
 

Modified: trunk/096/pkg/systems/nature/commands/gm/desolation.src
===================================================================
--- trunk/096/pkg/systems/nature/commands/gm/desolation.src	2005-09-28 19:20:39 UTC (rev 278)
+++ trunk/096/pkg/systems/nature/commands/gm/desolation.src	2005-09-28 19:31:02 UTC (rev 279)
@@ -3,7 +3,7 @@
 use uo;
 use cfgfile;
 include "include/std";
-include "../../nature";
+include ":nature:nature";
 
 program desolation(who, text)
 
@@ -23,17 +23,17 @@
 	  UnloadConfigFile(cfg);
 
           case (calendar[MONTH])
-           
+
              3:
              4:
-             5: 
+             5:
                 if (seasons)
                      var everyone := EnumerateOnlineCharacters();
                      foreach dude in everyone
                          Season(dude, SEASON_SPRING);
                      endforeach
                 endif
-             6: 
+             6:
              7:
              8:
                 if (seasons)



From austin at berlios.de  Wed Sep 28 21:55:12 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 21:55:12 +0200
Subject: [Poldistro-svn] r280 - in trunk/096/pkg/items/containers: . container include
Message-ID: <200509281955.j8SJtC9P000544@sheep.berlios.de>

Author: austin
Date: 2005-09-28 21:55:11 +0200 (Wed, 28 Sep 2005)
New Revision: 280

Added:
   trunk/096/pkg/items/containers/container/
   trunk/096/pkg/items/containers/container/canDestroy.src
   trunk/096/pkg/items/containers/container/canInsert.src
   trunk/096/pkg/items/containers/container/canRemove.src
   trunk/096/pkg/items/containers/container/use.src
Modified:
   trunk/096/pkg/items/containers/include/checks.inc
   trunk/096/pkg/items/containers/itemdesc.cfg
Log:


Added: trunk/096/pkg/items/containers/container/canDestroy.src
===================================================================
--- trunk/096/pkg/items/containers/container/canDestroy.src	2005-09-28 19:31:02 UTC (rev 279)
+++ trunk/096/pkg/items/containers/container/canDestroy.src	2005-09-28 19:55:11 UTC (rev 280)
@@ -0,0 +1,5 @@
+// $Id$
+
+program canDestroy(container)
+	return 1;
+endprogram

Added: trunk/096/pkg/items/containers/container/canInsert.src
===================================================================
--- trunk/096/pkg/items/containers/container/canInsert.src	2005-09-28 19:31:02 UTC (rev 279)
+++ trunk/096/pkg/items/containers/container/canInsert.src	2005-09-28 19:55:11 UTC (rev 280)
@@ -0,0 +1,21 @@
+//$Id$
+
+use uo;
+
+include ":containers:checks";
+
+
+program CanInsert(mobile, container, item, move_type, insert_type, adding_item, existing_stack, amount_to_add)
+	if ( mobile.cmdlevel )
+		return 1;
+	elseif ( move_type == MOVETYPE_COREMOVE )
+		return 1;	
+	elseif ( CP_RootContainerLocked(item) )
+		SendSysMessage(mobile, "You can't insert items into locked containers.");
+		return 0;
+	endif
+		
+	//To-do 
+	//Play sound effect now that item is being added.
+	return 1;
+endprogram

Added: trunk/096/pkg/items/containers/container/canRemove.src
===================================================================
--- trunk/096/pkg/items/containers/container/canRemove.src	2005-09-28 19:31:02 UTC (rev 279)
+++ trunk/096/pkg/items/containers/container/canRemove.src	2005-09-28 19:55:11 UTC (rev 280)
@@ -0,0 +1,21 @@
+//$Id$
+
+use uo;
+
+include ":containers:checks";
+
+
+program CanRemove(mobile, container, item, move_type)
+	if ( mobile.cmdlevel )
+		return 1;
+	elseif ( move_type == MOVETYPE_COREMOVE )
+		return 1;	
+	elseif ( CP_RootContainerLocked(item) )
+		SendSysMessage(mobile, "You can't remove items from locked containers.");
+		return 0;
+	endif
+	
+	//To-do 
+	//Play sound effect now that item is being removed.
+	return 1;
+endprogram

Added: trunk/096/pkg/items/containers/container/use.src
===================================================================
--- trunk/096/pkg/items/containers/container/use.src	2005-09-28 19:31:02 UTC (rev 279)
+++ trunk/096/pkg/items/containers/container/use.src	2005-09-28 19:55:11 UTC (rev 280)
@@ -0,0 +1,27 @@
+//$Id$
+
+use uo;
+use os;
+use cfgfile;
+
+program useContainer(mobile, container)
+	var item_cfg := ReadConfigFile(":*:itemdesc");
+	item_cfg := item_cfg[container.graphic];
+	
+	if ( mobile.cmdlevel )
+		SendSysMessage(mobile, "Command level is present - container is skipping locks, traps, etc.");
+		SendViewContainer(mobile, container);
+	endif
+	
+	//To-do
+	//Check if mobile has a key for the container.
+	//Check if container is a treasure chest - generate loot.
+	
+	SendViewContainer(mobile, container);
+	
+	if ( (item_cfg.OpenGraphic) && (item_cfg.CloseGraphic) )
+		container.graphic := item_cfg.OpenGraphic;
+		sleep(2);
+		container.graphic := item_cfg.CloseGraphic;
+	endif
+endprogram

Modified: trunk/096/pkg/items/containers/include/checks.inc
===================================================================
--- trunk/096/pkg/items/containers/include/checks.inc	2005-09-28 19:31:02 UTC (rev 279)
+++ trunk/096/pkg/items/containers/include/checks.inc	2005-09-28 19:55:11 UTC (rev 280)
@@ -10,6 +10,9 @@
 *  Created include file
 ===============================================================*/
 
+use uo;
+use os;
+
 /*
  * CP_RootContainerLocked(object)
  *

Modified: trunk/096/pkg/items/containers/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/containers/itemdesc.cfg	2005-09-28 19:31:02 UTC (rev 279)
+++ trunk/096/pkg/items/containers/itemdesc.cfg	2005-09-28 19:55:11 UTC (rev 280)
@@ -18,7 +18,7 @@
 	Movable			1
 	Lockable		1
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -41,7 +41,7 @@
 	Movable			1
 	Lockable		1
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -64,7 +64,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -87,7 +87,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -112,7 +112,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -135,7 +135,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -207,7 +207,7 @@
 	Movable			1
 	Lockable		1
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -230,7 +230,7 @@
 	Movable			1
 	Lockable		1
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -253,7 +253,7 @@
 	Movable			1
 	Lockable		1
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -276,7 +276,7 @@
 	Movable			1
 	Lockable		1
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -299,7 +299,7 @@
 	Movable			1
 	Lockable		1
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -322,7 +322,7 @@
 	Movable			1
 	Lockable		1
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -347,7 +347,7 @@
 	Movable			1
 	Lockable		1
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -370,7 +370,7 @@
 	Movable			1
 	Lockable		1
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -393,7 +393,7 @@
 	Movable			1
 	Lockable		1
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -416,7 +416,7 @@
 	Movable			1
 	Lockable		1
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -439,7 +439,7 @@
 	Movable			1
 	Lockable		1
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -462,7 +462,7 @@
 	Movable			1
 	Lockable		1
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -487,7 +487,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -510,7 +510,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -520,7 +520,7 @@
 
 Container 0xE77
 {
-	Name			container/openBarrel
+	Name			container/useBarrel
 	Desc			barrel
 	Graphic			3707
 
@@ -537,7 +537,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -561,7 +561,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -586,7 +586,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -608,7 +608,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -631,7 +631,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -653,7 +653,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
@@ -676,12 +676,12 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
 
-	container/openGraphic		2636
+	container/useGraphic		2636
 	CloseGraphic		2637
 }
 Container 0xA51
@@ -701,12 +701,12 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
 
-	container/openGraphic		2640
+	container/useGraphic		2640
 	CloseGraphic		2641
 }
 
@@ -727,12 +727,12 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
 
-	container/openGraphic		2638
+	container/useGraphic		2638
 	CloseGraphic		2639
 }
 Container 0xA53
@@ -752,12 +752,12 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy
 
-	container/openGraphic		2642
+	container/useGraphic		2642
 	CloseGraphic		2643
 }
 
@@ -780,7 +780,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanInsertScript		bookshelf/CanInsert
 	CanRemoveScript		bookshelf/CanRemove
 	OnInsertScript		bookshelf/OnInsert
@@ -808,7 +808,7 @@
 	Movable			1
 	Lockable		0
 
-	Script			container/open
+	Script			container/use
 	CanInsertScript		bookshelf/CanInsert
 	CanRemoveScript		bookshelf/CanRemove
 	OnInsertScript		bookshelf/OnInsert
@@ -839,7 +839,7 @@
 	RequiresAttention	0
 	Lockable		1
 	
-	Script			container/open
+	Script			container/use
 	CanRemoveScript		container/CanRemove
 	CanInsertScript		container/CanInsert
 	DestroyScript		container/CanDestroy



From austin at berlios.de  Wed Sep 28 22:12:59 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 22:12:59 +0200
Subject: [Poldistro-svn] r281 - in trunk/096/pkg/items/containers: . bookshelf config
Message-ID: <200509282012.j8SKCxON002129@sheep.berlios.de>

Author: austin
Date: 2005-09-28 22:12:58 +0200 (Wed, 28 Sep 2005)
New Revision: 281

Added:
   trunk/096/pkg/items/containers/bookshelf/
   trunk/096/pkg/items/containers/bookshelf/canInsert.src
   trunk/096/pkg/items/containers/bookshelf/canRemove.src
   trunk/096/pkg/items/containers/bookshelf/onInsert.src
   trunk/096/pkg/items/containers/bookshelf/onRemove.src
   trunk/096/pkg/items/containers/config/bookshelf.cfg
Log:


Added: trunk/096/pkg/items/containers/bookshelf/canInsert.src
===================================================================
--- trunk/096/pkg/items/containers/bookshelf/canInsert.src	2005-09-28 19:55:11 UTC (rev 280)
+++ trunk/096/pkg/items/containers/bookshelf/canInsert.src	2005-09-28 20:12:58 UTC (rev 281)
@@ -0,0 +1,13 @@
+// $Id$
+
+use uo;
+use cfgfile;
+
+program CanInsert(mobile, container, movetype, insert_type, adding_item, existing_stack, amt_to_add)
+	if ( adding_item.IsBook() )
+		return 1;
+	else
+		SendSysMessage(mobile, "That is not a book.");
+		return 0;
+	endif
+endprogram
\ No newline at end of file

Added: trunk/096/pkg/items/containers/bookshelf/canRemove.src
===================================================================
--- trunk/096/pkg/items/containers/bookshelf/canRemove.src	2005-09-28 19:55:11 UTC (rev 280)
+++ trunk/096/pkg/items/containers/bookshelf/canRemove.src	2005-09-28 20:12:58 UTC (rev 281)
@@ -0,0 +1,7 @@
+// $Id$
+
+use uo;
+
+program canRemoveScript(mobile, container, item, move_type)
+	return 1;
+endprogram

Added: trunk/096/pkg/items/containers/bookshelf/onInsert.src
===================================================================
--- trunk/096/pkg/items/containers/bookshelf/onInsert.src	2005-09-28 19:55:11 UTC (rev 280)
+++ trunk/096/pkg/items/containers/bookshelf/onInsert.src	2005-09-28 20:12:58 UTC (rev 281)
@@ -0,0 +1,23 @@
+// $Id$
+
+use uo;
+use cfgfile;
+use util;
+use os;
+
+program OnInsert(who, container, movetype, insert_type, adding_item, existing_stack, amt_to_add)
+	var cfg := ReadConfigFile(":containers:config/bookshelf");
+	cfg := cfg[container.graphic];
+	
+	var num_items := EnumerateItemsInContainer(container).size();
+	if ( num_items > 0 )
+		//Duh, we know it is >0 since its an onInsert script, but its good to be safe.
+		var graphics := GetConfigStringArray(cfg, "FilledGraphic");
+		//Change the book shelf to a random compatable filled graphic.
+		//Ooo special effects.
+		var graphic := CInt(graphics[RandomInt(graphics.size())+1]);
+		container.graphic := graphic;
+	endif
+	
+	return 1;
+endprogram

Added: trunk/096/pkg/items/containers/bookshelf/onRemove.src
===================================================================
--- trunk/096/pkg/items/containers/bookshelf/onRemove.src	2005-09-28 19:55:11 UTC (rev 280)
+++ trunk/096/pkg/items/containers/bookshelf/onRemove.src	2005-09-28 20:12:58 UTC (rev 281)
@@ -0,0 +1,24 @@
+use uo;
+use cfgfile;
+use util;
+use os;
+
+program OnRemove(who, container, item, item_amount, movetype)
+	var shelf_cfg := ReadConfigFile(":containers:config/bookshelf");
+	shelf_cfg := shelf_cfg[container.graphic];
+	
+	var num_items := EnumerateItemsInContainer(container).size();
+	if ( num_items > 0 )
+		//There are still other books left in the shelf.
+		//Change the book shelf to a random compatable filled graphic.
+		//Ooo special effects.
+		var graphics := GetConfigStringArray(shelf_cfg, "FilledGraphic");
+		var graphic := CInt(graphics[RandomInt(graphics.size())+1]);
+		container.graphic := graphic;
+	else
+		//No more books left - set to an empty shelf graphic.
+		container.graphic := shelf_cfg.EmptyGraphic;
+	endif
+	
+	return 1;
+endprogram

Added: trunk/096/pkg/items/containers/config/bookshelf.cfg
===================================================================
--- trunk/096/pkg/items/containers/config/bookshelf.cfg	2005-09-28 19:55:11 UTC (rev 280)
+++ trunk/096/pkg/items/containers/config/bookshelf.cfg	2005-09-28 20:12:58 UTC (rev 281)
@@ -0,0 +1,57 @@
+Graphic	2717
+{
+	EmptyGraphic		2717
+	FilledGraphic		2711
+	FilledGraphic		2712
+	FilledGraphic		2715
+}
+Graphic 2711
+{
+	EmptyGraphic		2717
+	FilledGraphic		2711
+	FilledGraphic		2712
+	FilledGraphic		2715
+}
+Graphic	2712
+{
+	EmptyGraphic		2717
+	FilledGraphic		2711
+	FilledGraphic		2712
+	FilledGraphic		2715
+}
+Graphic	2715
+{
+	EmptyGraphic		2717
+	FilledGraphic		2711
+	FilledGraphic		2712
+	FilledGraphic		2715
+}
+
+Graphic 2718
+{
+	EmptyGraphic		2718
+	FilledGraphic		2713
+	FilledGraphic		2714
+	FilledGraphic		2716
+}
+Graphic	2713
+{
+	EmptyGraphic		2718
+	FilledGraphic		2713
+	FilledGraphic		2714
+	FilledGraphic		2716
+}
+Graphic 2714
+{
+	EmptyGraphic		2718
+	FilledGraphic		2713
+	FilledGraphic		2714
+	FilledGraphic		2716
+}
+Graphic 2716
+{
+	EmptyGraphic		2718
+	FilledGraphic		2713
+	FilledGraphic		2714
+	FilledGraphic		2716
+}



From austin at berlios.de  Wed Sep 28 22:14:18 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 22:14:18 +0200
Subject: [Poldistro-svn] r282 - trunk/096/pkg/items/containers/container
Message-ID: <200509282014.j8SKEIHl002204@sheep.berlios.de>

Author: austin
Date: 2005-09-28 22:14:18 +0200 (Wed, 28 Sep 2005)
New Revision: 282

Modified:
   trunk/096/pkg/items/containers/container/canInsert.src
   trunk/096/pkg/items/containers/container/canRemove.src
Log:


Modified: trunk/096/pkg/items/containers/container/canInsert.src
===================================================================
--- trunk/096/pkg/items/containers/container/canInsert.src	2005-09-28 20:12:58 UTC (rev 281)
+++ trunk/096/pkg/items/containers/container/canInsert.src	2005-09-28 20:14:18 UTC (rev 282)
@@ -5,7 +5,7 @@
 include ":containers:checks";
 
 
-program CanInsert(mobile, container, item, move_type, insert_type, adding_item, existing_stack, amount_to_add)
+program canInsert(mobile, container, item, move_type, insert_type, adding_item, existing_stack, amount_to_add)
 	if ( mobile.cmdlevel )
 		return 1;
 	elseif ( move_type == MOVETYPE_COREMOVE )

Modified: trunk/096/pkg/items/containers/container/canRemove.src
===================================================================
--- trunk/096/pkg/items/containers/container/canRemove.src	2005-09-28 20:12:58 UTC (rev 281)
+++ trunk/096/pkg/items/containers/container/canRemove.src	2005-09-28 20:14:18 UTC (rev 282)
@@ -5,7 +5,7 @@
 include ":containers:checks";
 
 
-program CanRemove(mobile, container, item, move_type)
+program canRemove(mobile, container, item, move_type)
 	if ( mobile.cmdlevel )
 		return 1;
 	elseif ( move_type == MOVETYPE_COREMOVE )



From austin at berlios.de  Wed Sep 28 22:17:31 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 22:17:31 +0200
Subject: [Poldistro-svn] r283 - trunk/096/config
Message-ID: <200509282017.j8SKHVXV002456@sheep.berlios.de>

Author: austin
Date: 2005-09-28 22:17:31 +0200 (Wed, 28 Sep 2005)
New Revision: 283

Modified:
   trunk/096/config/itemdesc.cfg
Log:


Modified: trunk/096/config/itemdesc.cfg
===================================================================
--- trunk/096/config/itemdesc.cfg	2005-09-28 20:14:18 UTC (rev 282)
+++ trunk/096/config/itemdesc.cfg	2005-09-28 20:17:31 UTC (rev 283)
@@ -60,25 +60,25 @@
 //
 /////////////////////////////////////////////////////////////////////////////
 
-Item 0x0002
+Item 0x002
 {
     Name                ank1a
     movable             0
 }
 
-Item 0x0003
+Item 0x003
 {
     Name                ank1b
     movable             0
 }
 
-Item 0x0004
+Item 0x004
 {
     Name                ank2a
     movable             0
 }
 
-Item 0x0005
+Item 0x005
 {
     Name                ank2b
     movable             0
@@ -128,7 +128,7 @@
     RequiresAttention   0
 }
 
-Spellbook 0x0EFA
+Spellbook 0xEFA
 {
     Name                Spellbook
     desc                spellbook
@@ -183,31 +183,12 @@
     canRemoveScript     noRemove
 }
 
-Container 0x0E40
+Container 0xa9f
 {
-    Name                MetalChest
-    desc                metal chest
-    Gump                0x004A
-    MinX                44
-    MaxX                143
-    MinY                65
-    MaxY                140
-    RequiresAttention   0
-    movable             1
-    MaxItems            125
-    weight              5
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0x0a9f
-{
     name                spawnshelf
     desc                bookcase
     graphic             0xa9c
-    Gump                0x004d
+    Gump                0x04d
     MinX                40
     MaxX                120
     MinY                10
@@ -223,9 +204,9 @@
 Container 0x966a
 {
     Name                vendorbag
-    graphic             0x0E79
+    graphic             0xE79
     desc                backpack
-    Gump                0x0042
+    Gump                0x042
     MinX                44
     MaxX                143
     MinY                65
@@ -244,9 +225,9 @@
 Container 0x966b
 {
     Name                packbag
-    graphic             0x0E75
+    graphic             0xE75
     desc                backpack
-    Gump                0x003C
+    Gump                0x03C
     MinX                44
     MaxX                143
     MinY                65
@@ -266,9 +247,9 @@
 Container 0x966c
 {
     Name                staffpack
-    graphic             0x0E75
+    graphic             0xE75
     desc                backpack
-    Gump                0x003C
+    Gump                0x03C
     MinX                44
     MaxX                143
     MinY                65
@@ -284,35 +265,11 @@
     OnRemoveScript      ::onRemove
 }
 
-Container 0x0E75
+Container 0xE76
 {
-    Name                Backpack
-    desc                backpack
-    Gump                0x003C
-    MinX                44
-    MaxX                143
-    MinY                65
-    MaxY                140
-    RequiresAttention   0
-    VendorSellsFor      18
-    VendorBuysFor       9
-    dyeable             1
-    MaxItems            125
-    MaxWeight           400
-    weight              1
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-    OnInsertNoise	sound_insertpack
-    unEquipScript	::backpackRemove
-}
-
-Container 0x0E76
-{
     Name                Bag
     desc                bag
-    Gump                0x003D
+    Gump                0x03D
     MinX                40
     MaxX                60
     MinY                20
@@ -331,48 +288,6 @@
     OnInsertNoise	sound_insertpack
 }
 
-Container 0x0E79
-{
-    Name                Pouch
-    desc                pouch
-    Gump                0x0040
-    MinX                44
-    MaxX                143
-    MinY                65
-    MaxY                140
-    RequiresAttention   0
-    VendorSellsFor      10
-    VendorBuysFor       5
-    movable             1
-    MaxItems            125
-    MaxWeight           400
-    weight              1
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
-Container 0x0E7C
-{
-    Name                SilverChest
-    desc                silver chest
-    Gump                0x004A
-    MinX                40
-    MaxX                60
-    MinY                20
-    MaxY                80
-    RequiresAttention   0
-    movable             1
-    MaxItems            125
-    MaxWeight           400
-    weight              5
-    CanInsertScript     ::canInsert
-    OnInsertScript      ::onInsert
-    CanRemoveScript     ::canRemove
-    OnRemoveScript      ::onRemove
-}
-
 Item 0x1BDD
 {
     Name                logs
@@ -424,11 +339,11 @@
     movable             1
 }
 
-Container 0x0a4e
+Container 0xa4e
 {
     Name                BrownArmoire
     desc                armoire
-    Gump                0x004f
+    Gump                0x04f
     MinX                44
     MaxX                143
     MinY                65
@@ -445,11 +360,11 @@
     OnRemoveScript      ::onRemove
 }
 
-Container 0x0a50
+Container 0xa50
 {
-    Name                CherryArmoire
+    Name                CherryArmoireOpened
     desc                cherry armoire
-    Gump                0x004e
+    Gump                0x04e
     MinX                44
     MaxX                143
     MinY                65
@@ -480,7 +395,7 @@
     Script              useStuff
 }
 
-Item 0x0E17
+Item 0xE17
 {
     Name                Cards
     desc                cards
@@ -501,7 +416,7 @@
     desc                torso
 }
 
-Item 0x0f3f
+Item 0xf3f
 {
     Name                arrow
     desc                arrow%s%
@@ -518,7 +433,7 @@
     VendorBuysFor       3
 }
 
-Item 0x0F6C
+Item 0xF6C
 {
     Name                bluemoongate
     Facing              2
@@ -527,7 +442,7 @@
     movable             0
 }
 
-Item 0x0dda
+Item 0xdda
 {
     Name                redmoongate
     Facing              2
@@ -671,7 +586,7 @@
     controlscript       poisonControl
 }
 
-Item 0x0F78
+Item 0xF78
 {
     Name                BatWing
     desc                bat wing%s%
@@ -679,7 +594,7 @@
     VendorSellsFor      10
     VendorBuysFor       5
 }
-Item 0x0F79
+Item 0xF79
 {
     Name                BlackMoor
     desc                blackmoor
@@ -687,7 +602,7 @@
     VendorSellsFor      10
     VendorBuysFor       5
 }
-Item 0x0F7A
+Item 0xF7A
 {
     Name                BlackPearl
     desc                black pearl
@@ -695,7 +610,7 @@
     VendorSellsFor      6
     VendorBuysFor       3
 }
-Item 0x0F7B
+Item 0xF7B
 {
     Name                BloodMoss
     desc                blood moss
@@ -703,7 +618,7 @@
     VendorSellsFor      6
     VendorBuysFor       3
 }
-Item 0x0F7c
+Item 0xF7c
 {
     Name                BloodSpawn
     desc                blood spawn%s%
@@ -711,7 +626,7 @@
     VendorSellsFor      10
     VendorBuysFor       5
 }
-Item 0x0F7D
+Item 0xF7D
 {
     Name                BloodReagent
     desc                blood reagent%s%
@@ -719,7 +634,7 @@
     VendorSellsFor      10
     VendorBuysFor       5
 }
-Item 0x0F7E
+Item 0xF7E
 {
     Name                Bone
     desc                bone%s%
@@ -727,7 +642,7 @@
     VendorSellsFor      10
     VendorBuysFor       5
 }
-Item 0x0F7F
+Item 0xF7F
 {
     Name                Brimstone
     desc                brimstone%s%
@@ -735,7 +650,7 @@
     VendorSellsFor      10
     VendorBuysFor       5
 }
-Item 0x0F80
+Item 0xF80
 {
     Name                daemonbone
     desc                daemon's bone%s%
@@ -744,7 +659,7 @@
     VendorBuysFor       5
 }
 
-Item 0x0F81
+Item 0xF81
 {
     Name                FertileDirt
     desc                fertile dirt
@@ -752,7 +667,7 @@
     VendorSellsFor      10
     VendorBuysFor       5
 }
-Item 0x0F82
+Item 0xF82
 {
     Name                DragonBlood
     desc                dragon's blood
@@ -760,7 +675,7 @@
     VendorSellsFor      10
     VendorBuysFor       5
 }
-Item 0x0F83
+Item 0xF83
 {
     Name                ExecutionersCap
     desc                executioner's cap%s%
@@ -768,7 +683,7 @@
     Vend    llsFor      10
     VendorBuysFor       5
 }
-Item 0x0F84
+Item 0xF84
 {
     Name                Garlic
     desc                garlic
@@ -776,7 +691,7 @@
     VendorSellsFor      3
     VendorBuysFor       1
 }
-Item 0x0F85
+Item 0xF85
 {
     Name                Ginseng
     desc                ginseng
@@ -784,7 +699,7 @@
     VendorSellsFor      3
     VendorBuysFor       1
 }
-Item 0x0F86
+Item 0xF86
 {
     Name                MandrakeRoot
     desc                mandrake root%s%
@@ -792,7 +707,7 @@
     VendorSellsFor      3
     VendorBuysFor       1
 }
-Item 0x0F87
+Item 0xF87
 {
     Name                EyeOfNewt
     desc                eye%s% of newt
@@ -800,7 +715,7 @@
     VendorSellsFor      10
     VendorBuysFor       5
 }
-Item 0x0F88
+Item 0xF88
 {
     Name                NightShade
     desc                nightshade%s%
@@ -808,7 +723,7 @@
     VendorSellsFor      3
     VendorBuysFor       1
 }
-Item 0x0F89
+Item 0xF89
 {
     Name                Obsidian
     desc                obsidian%s%
@@ -816,7 +731,7 @@
     VendorSellsFor      10
     VendorBuysFor       5
 }
-Item 0x0F8A
+Item 0xF8A
 {
     Name                PigIron
     desc                pig iron%s%
@@ -825,7 +740,7 @@
     VendorBuysFor       5
 }
 
-Item 0x0f8b
+Item 0xf8b
 {
 	Name		        Pumice
     desc                pumice
@@ -834,7 +749,7 @@
 	VendorBuysFor	    5
 }
 
-Item 0x0F8C
+Item 0xF8C
 {
     Name                SulphurousAsh
     desc                sulphurous ash
@@ -842,7 +757,7 @@
     VendorSellsFor      3
     VendorBuysFor       1
 }
-Item 0x0F8D
+Item 0xF8D
 {
     Name                SpiderSilk
     desc                spider's silk
@@ -850,7 +765,7 @@
     VendorSellsFor      3
     VendorBuysFor       1
 }
-Item 0x0F8E
+Item 0xF8E
 {
     Name                SerpentScale
     desc                serpent scale%s%
@@ -858,7 +773,7 @@
     VendorSellsFor      10
     VendorBuysFor       5
 }
-Item 0x0F8F
+Item 0xF8F
 {
     Name                VolcanicAsh
     desc                volcanic ash
@@ -866,7 +781,7 @@
     VendorSellsFor      10
     VendorBuysFor       5
 }
-Item 0x0F90
+Item 0xF90
 {
     Name                Deadwood
     desc                dead wood
@@ -874,7 +789,7 @@
     VendorSellsFor      10
     VendorBuysFor       5
 }
-Item 0x0F91
+Item 0xF91
 {
     Name                WormHeart
     desc                worm heart%s%
@@ -892,7 +807,7 @@
     movable             0
 }
 
-Item 0x0F0F
+Item 0xF0F
 {
     Name                starsapphire
     desc                star sapphire%s%
@@ -901,7 +816,7 @@
     VendorBuysFor       75
 }
 
-Item 0x0F10
+Item 0xF10
 {
     Name                emerald
     desc                emerald%s%
@@ -910,7 +825,7 @@
     VendorBuysFor       60
 }
 
-Item 0x0F11
+Item 0xF11
 {
     Name                sapphire
     desc                sapphire%s%
@@ -919,7 +834,7 @@
     VendorBuysFor       60
 }
 
-Item 0x0F13
+Item 0xF13
 {
     Name                ruby
     desc                rub%ies/y%
@@ -928,7 +843,7 @@
     VendorBuysFor       45
 }
 
-Item 0x0F15
+Item 0xF15
 {
     Name                citrine
     desc                citrine%s%
@@ -937,7 +852,7 @@
     VendorBuysFor       30
 }
 
-Item 0x0F16
+Item 0xF16
 {
     Name                amethyst
     desc                amethyst%s%
@@ -946,7 +861,7 @@
     VendorBuysFor       60
 }
 
-Item 0x0F18
+Item 0xF18
 {
     Name                tourmaline
     desc                tourmaline%s%
@@ -955,7 +870,7 @@
     VendorBuysFor       45
 }
 
-Item 0x0F25
+Item 0xF25
 {
     Name                amber
     desc                %pieces of% amber
@@ -964,7 +879,7 @@
     VendorBuysFor       30
 }
 
-Item 0x0F30
+Item 0xF30
 {
     Name                diamond
     desc                diamond%s%
@@ -975,7 +890,7 @@
 
 
 //Scrolls:
-Item 0x0E34
+Item 0xE34
 {
     Name                blankscroll
     desc                blank scroll%s%
@@ -1018,7 +933,7 @@
 Item 0x6008
 {
     Name                permmoongate
-    Graphic             0x0F6C
+    Graphic             0xF6C
     Facing              2
     WalkOnScript        moongate
     SaveOnExit          1
@@ -1119,7 +1034,7 @@
     VendorSellsFor      1500
 }
 
-item 0x0b46
+item 0xb46
 {
     name                smvase
     desc                small vase
@@ -1129,7 +1044,7 @@
     VendorBuysFor       25
 }
 
-item 0x0b48
+item 0xb48
 {
     name                smvase2
     desc                small vase
@@ -1139,7 +1054,7 @@
 VendorBuysFor           25
 }
 
-item 0x0b45
+item 0xb45
 {
     name                lvase
     desc                large vase
@@ -1148,7 +1063,7 @@
     VendorSellsFor      100
     VendorBuysFor       50
 }
-item 0x0b47
+item 0xb47
 {
     name                lvase2
     desc                large vase
@@ -1250,11 +1165,11 @@
     furniture           1
 }
 
-Container 0x0ed2
+Container 0xed2
 {
     Name                bones
     desc                bones
-    Gump                0x0009
+    Gump                0x009
     MinX                20
     MaxX                80
     MinY                85
@@ -1270,11 +1185,11 @@
     OnRemoveScript      ::onRemove
 }
 
-Container 0x0ed1
+Container 0xed1
 {
     Name                bones2
     desc                bones
-    Gump                0x0009
+    Gump                0x009
     MinX                20
     MaxX                80
     MinY                85
@@ -1290,11 +1205,11 @@
     OnRemoveScript      ::onRemove
 }
 
-Container 0x0ed0
+Container 0xed0
 {
     Name                bones3
     desc                bones
-    Gump                0x0009
+    Gump                0x009
     MinX                20
     MaxX                80
     MinY                85
@@ -1310,11 +1225,11 @@
     OnRemoveScript      ::onRemove
 }
 
-Container 0x0ecf
+Container 0xecf
 {
     Name                bones4
     desc                bones
-    Gump                0x0009
+    Gump                0x009
     MinX                20
     MaxX                80
     MinY                85
@@ -1330,11 +1245,11 @@
     OnRemoveScript      ::onRemove
 }
 
-Container 0x0ece
+Container 0xece
 {
     Name                bones5
     desc                bones
-    Gump                0x0009
+    Gump                0x009
     MinX                20
     MaxX                80
     MinY                85
@@ -1350,11 +1265,11 @@
     OnRemoveScript      ::onRemove
 }
 
-Container 0x0ecd
+Container 0xecd
 {
     Name                bones6
     desc                bones
-    Gump                0x0009
+    Gump                0x009
     MinX                20
     MaxX                80
     MinY                85
@@ -1370,11 +1285,11 @@
     OnRemoveScript      ::onRemove
 }
 
-Container 0x0ecc
+Container 0xecc
 {
     Name                bones7
     desc                bones
-    Gump                0x0009
+    Gump                0x009
     MinX                20
     MaxX                80
     MinY                85
@@ -1390,11 +1305,11 @@
     OnRemoveScript      ::onRemove
 }
 
-Container 0x0ecb
+Container 0xecb
 {
     Name                bones8
     desc                bones
-    Gump                0x0009
+    Gump                0x009
     MinX                20
     MaxX                80
     MinY                85
@@ -1410,11 +1325,11 @@
     OnRemoveScript      ::onRemove
 }
 
-Container 0x0eca
+Container 0xeca
 {
     Name                bones9
     desc                bones
-    Gump                0x0009
+    Gump                0x009
     MinX                20
     MaxX                80
     MinY                85



From austin at berlios.de  Wed Sep 28 22:23:03 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 22:23:03 +0200
Subject: [Poldistro-svn] r284 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509282023.j8SKN3KG002972@sheep.berlios.de>

Author: austin
Date: 2005-09-28 22:23:02 +0200 (Wed, 28 Sep 2005)
New Revision: 284

Modified:
   trunk/096/pkg/systems/attributes/include/attributes.inc
Log:
Forgot to use DF_CREATE which caused a but in attributeCache.src

Modified: trunk/096/pkg/systems/attributes/include/attributes.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-28 20:17:31 UTC (rev 283)
+++ trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-28 20:23:02 UTC (rev 284)
@@ -80,7 +80,7 @@
  *
  */
 function AP_GetAttributesDataFile()
-	var data_file := DFOpenDataFile(":attributes:attributes");
+	var data_file := DFOpenDataFile(":attributes:attributes", DF_CREATE);
 	if ( data_file.errortext )
 		SysLog("Error::AP_GetAttributesDataFile() - Unable to open attributes.txt ->"+data_file.errortext);
 	endif



From austin at berlios.de  Wed Sep 28 22:23:31 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 22:23:31 +0200
Subject: [Poldistro-svn] r285 - trunk/096/pkg/systems/attributes/startup
Message-ID: <200509282023.j8SKNVql003028@sheep.berlios.de>

Author: austin
Date: 2005-09-28 22:23:30 +0200 (Wed, 28 Sep 2005)
New Revision: 285

Modified:
   trunk/096/pkg/systems/attributes/startup/attributeCache.src
Log:


Modified: trunk/096/pkg/systems/attributes/startup/attributeCache.src
===================================================================
--- trunk/096/pkg/systems/attributes/startup/attributeCache.src	2005-09-28 20:23:02 UTC (rev 284)
+++ trunk/096/pkg/systems/attributes/startup/attributeCache.src	2005-09-28 20:23:30 UTC (rev 285)
@@ -1,3 +1,4 @@
+// $Id$
 
 use uo;
 use os;



From austin at berlios.de  Wed Sep 28 22:25:39 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 22:25:39 +0200
Subject: [Poldistro-svn] r286 - trunk/096/pkg/systems/attributes/startup
Message-ID: <200509282025.j8SKPdBc003251@sheep.berlios.de>

Author: austin
Date: 2005-09-28 22:25:39 +0200 (Wed, 28 Sep 2005)
New Revision: 286

Modified:
   trunk/096/pkg/systems/attributes/startup/attributeCache.src
Log:


Modified: trunk/096/pkg/systems/attributes/startup/attributeCache.src
===================================================================
--- trunk/096/pkg/systems/attributes/startup/attributeCache.src	2005-09-28 20:23:30 UTC (rev 285)
+++ trunk/096/pkg/systems/attributes/startup/attributeCache.src	2005-09-28 20:25:39 UTC (rev 286)
@@ -19,6 +19,9 @@
 	foreach elem_name in ( GetConfigStringKeys(cfg_file) )
 		var cfg_elem := AP_GetAttributeCfgElem(elem_name, cfg_file);
 		var type_name := cfg_elem.AttributeType;
+		if ( !type_name )
+			type_name := "Unknown";
+		endif
 		
 		var type_list := data_elem.GetProp(type_name);
 		if ( !type_list )



From muaddiblsd at berlios.de  Wed Sep 28 22:26:20 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Wed, 28 Sep 2005 22:26:20 +0200
Subject: [Poldistro-svn] r287 - in trunk/096/pkg: items/bulletinboard items/dyes items/food items/runebook mobiles/npcutils skills/hiding
Message-ID: <200509282026.j8SKQKv7003395@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-28 22:26:16 +0200 (Wed, 28 Sep 2005)
New Revision: 287

Modified:
   trunk/096/pkg/items/bulletinboard/bulletinboard.src
   trunk/096/pkg/items/dyes/dyeBan.src
   trunk/096/pkg/items/dyes/useDyes.src
   trunk/096/pkg/items/food/eat.src
   trunk/096/pkg/items/runebook/runeInsert.src
   trunk/096/pkg/mobiles/npcutils/NPCKeeper.src
   trunk/096/pkg/mobiles/npcutils/vetement.inc
   trunk/096/pkg/skills/hiding/hiding.src
Log:


Modified: trunk/096/pkg/items/bulletinboard/bulletinboard.src
===================================================================
--- trunk/096/pkg/items/bulletinboard/bulletinboard.src	2005-09-28 20:25:39 UTC (rev 286)
+++ trunk/096/pkg/items/bulletinboard/bulletinboard.src	2005-09-28 20:26:16 UTC (rev 287)
@@ -1,3 +1,5 @@
+// //$Id$
+
 /////////////////////////////////////////
 // 2.0
 //
@@ -37,27 +39,27 @@
 	repeat
 		board_data_file := DFOpenDataFile("MessageBoards", DF_CREATE);
 		board_elem := DFFindElement(board_data_file, hex(board.serial), DF_CREATE);
-	
+
 		GFInitGump();
-	
+
 		GFButtonPage(40, 195, 0x1B6B, 0x1B6B, 500);
 		GFGumpPic(20, 20, 0x87A);
 		GFTextMid(260, 57, 0, GF_STDCOLOR, "Message Board");
-	
+
 		BoardIndex(board);
-	
+
 		var subject := "", msg_lines := array;
 		NewPost(who, subject, msg_lines);
-	
+
 		input := GFSendGump(who);
 		if ( !GetObjProperty(who, "#Online") )
 			//If the player goes offline, terminate the script.
 			exit;
 		endif
-			
+
 		if ( input[ADD_POST_BTN] )
 			subject := GFExtractData(subject.keyid, input);
-			
+
 			//Take the 'lines' from the post and put them into 1 string.
 			var msg_string := "";
 			foreach line in msg_lines
@@ -67,8 +69,8 @@
 				endif
 				sleepms(5);
 			endforeach
-			
-			var post_num := CInt(board_elem.GetProp("NextPost"));					
+
+			var post_num := CInt(board_elem.GetProp("NextPost"));
 			var new_num := CInt(board_elem.GetProp("NextPost"))+1;
 			if (new_num > 50)
 				//Were on post 50, reset the counter.
@@ -79,7 +81,7 @@
 			post_info.+Name := who.name;
 			post_info.+Subject := Subject;
 			post_info.+Message := msg_string;
-		
+
 			board_elem.SetProp(hex(post_num), post_info);
 		elseif ( input[0] >= DELETE_BTN )
 			var temp := CInt(input[0]-DELETE_BTN);
@@ -87,10 +89,11 @@
 		endif
 	until (input[0] <= 2);
 	//Right click closes the gump.
-	
+
 endprogram
 
 function BoardIndex(board)
+	board := board;
 	var y_pos := 180;
 	var page_num := 1;
 	var post_page_num := 1000;
@@ -102,19 +105,19 @@
 			var name := board_elem.GetProp(postnum).Name;
 			var subject := board_elem.GetProp(postnum).Subject;
 			var message := board_elem.GetProp(postnum).Message;
-			
+
 			GFPage(page_num);
 			GFButtonPage(135, y_pos+3, 0xFC1, 0xFC1, post_page_num);
 			GFTextLine(155, y_pos, GF_STDCOLOR, subject);
 			y_pos := y_pos+20;
-			
+
 			GFPage(post_page_num);
-						
+
 			var msg := "<basefont color=#111111>"
 				+"From: "+name+"<br>"
 				+"Subject: "+subject+"<br>"
 				+"Message:<br>";
-					
+
 			if ( TypeOf(message) == "Array" )
 				foreach line in message
 					msg := msg+line+" ";
@@ -124,18 +127,18 @@
 				msg := msg+" "+message;
 			endif
 			GFHTMLArea(130, 180, 263, 160, 0, 1, msg);
-			
+
 			post_page_num := post_page_num+1;
-			
+
 			GFButtonPage(135, 367, 0x15E3, 0x15E7, page_num);
 			GFTextLine(155, 365, GF_STDCOLOR, "Index");
-			
+
 			GFTextLine(350, 364, GF_STDCOLOR, "Delete");
 			GFButtonID(395, 367, 2117, 2118, 1, (CInt(postnum)+DELETE_BTN));
-			
+
 			counter := counter+1;
 			total := total+1;
-				
+
 			if ( counter > 8 && total < (prop_list.size()-1) )
 				GFPage(page_num);
 				//Down arrow
@@ -154,24 +157,24 @@
 
 function NewPost(who, byref subject, byref msg_lines)
 	GFPage(500);
-	
+
 	GFTextLine(130, 180, GF_STDCOLOR, "From: " + who.name);
 	GFTextLine(130, 200, GF_STDCOLOR, "Subject: ");
 	subject := GFTextEntry(193, 200, 105, 20, GF_STDCOLOR, "New Message");
-	
+
 	GFTextLine(130, 230, GF_STDCOLOR, "Message:");
-	
+
 	var i;
 	var y_pos := 250;
 	//Five message lines.
 	for (i:=0; i < 5; i:=i+1)
 		msg_lines.append(GFTextEntry(130, y_pos, 255, 20, GF_STDCOLOR));
-		y_pos := y_pos+20;	
+		y_pos := y_pos+20;
 	endfor
-	
+
 	GFButtonPage(135, 367, 0x15E3, 0x15E7, 1);
 	GFTextLine(155, 365, GF_STDCOLOR, "Index");
-	
+
 	GFTextLine(355, 364, GF_STDCOLOR, "Post");
 	GFButtonID(395, 367, 2117, 2118, 1, ADD_POST_BTN);
 endfunction

Modified: trunk/096/pkg/items/dyes/dyeBan.src
===================================================================
--- trunk/096/pkg/items/dyes/dyeBan.src	2005-09-28 20:25:39 UTC (rev 286)
+++ trunk/096/pkg/items/dyes/dyeBan.src	2005-09-28 20:26:16 UTC (rev 287)
@@ -1,3 +1,5 @@
+// //$Id$
+
 use uo;
 use os;
 
@@ -8,7 +10,7 @@
   var act := who.acct;
   act.ban();
   act.setprop("deleteme", 1);
-  var x, i;
+  var i;
   WipeBankBox(act.GetCharacter(1));
     foreach thing in ListEquippedItems(act.GetCharacter(1))
       MoveItemToContainer(thing, act.GetCharacter(1).backpack);

Modified: trunk/096/pkg/items/dyes/useDyes.src
===================================================================
--- trunk/096/pkg/items/dyes/useDyes.src	2005-09-28 20:25:39 UTC (rev 286)
+++ trunk/096/pkg/items/dyes/useDyes.src	2005-09-28 20:26:16 UTC (rev 287)
@@ -1,3 +1,5 @@
+// //$Id$
+
 use uo;
 use os;
 
@@ -30,7 +32,6 @@
   endif
   var color := SelectColor(who, dyetub);
   if( color > 1001 )
-    var account := who.acct;
     SendSysMessage( who, "Bug abusers aren't tolerated here." );
     who.frozen := 1;
     SendSysMessage(who, "You have been banned for exploiting.");

Modified: trunk/096/pkg/items/food/eat.src
===================================================================
--- trunk/096/pkg/items/food/eat.src	2005-09-28 20:25:39 UTC (rev 286)
+++ trunk/096/pkg/items/food/eat.src	2005-09-28 20:26:16 UTC (rev 287)
@@ -1,3 +1,5 @@
+// //$Id$
+
 use uo;
 use os;
 use util;
@@ -23,9 +25,9 @@
     SendSysMessage(who, "Someone is doing something with that.");
     return;
   endif
-  
+
   var foodcfg := ReadConfigFile(":*:itemdesc");
-  var retval, themsg;
+  var themsg;
   var poison := CInt(GetObjProperty(food, "poison_level"));
   var foodvalue := foodcfg[food.objtype].foodvalue;
   var hunger := CInt(GetObjProperty(who, "hunger"));
@@ -41,7 +43,7 @@
     case (RandomInt(3) + 1)
       1: PlaySoundEffect(who, 0x3b);
       2: PlaySoundEffect(who, 0x3c);
-      3: PlaySoundEffect(who, 0x3d); 
+      3: PlaySoundEffect(who, 0x3d);
     endcase
     PerformAction(who, ANIM_EAT);
     SetStamina(who, GetStamina(who) +(RandomInt(5)+foodvalue));
@@ -50,16 +52,16 @@
     endif
     hunger := hunger - foodvalue;
     case (hunger)
-      0:  
+      0:
       1:  themsg := "You manage to eat the food, but you are stuffed.";
-      2:  
+      2:
       3:  themsg := "You feel quite full after consuming the food.";
-      4:  
-      5:  
-      6:  
+      4:
+      5:
+      6:
       7:  themsg := "After eating the food you feel much less hungry.";
-      8:  
-      9:  
+      8:
+      9:
       10: themsg := "You eat the food but are still extremely hungry.";
     endcase
     if (hunger < 0)
@@ -70,10 +72,10 @@
     case (hunger)
       0:  SetStaminaRegenRate(who, 1000);
       1:  SetStaminaRegenRate(who, 1300);
-      2:  
-      3:  
-      4:  
-      5:  
+      2:
+      3:
+      4:
+      5:
       6:  SetStaminaRegenRate(who, 1200);
       7:  SetStaminaRegenRate(who, 1000);
       8:  SetStaminaRegenRate(who, 800);

Modified: trunk/096/pkg/items/runebook/runeInsert.src
===================================================================
--- trunk/096/pkg/items/runebook/runeInsert.src	2005-09-28 20:25:39 UTC (rev 286)
+++ trunk/096/pkg/items/runebook/runeInsert.src	2005-09-28 20:26:16 UTC (rev 287)
@@ -1,3 +1,5 @@
+// //$Id$
+
 use uo;
 use os;
 
@@ -5,102 +7,118 @@
 
 program on_insert(who, book, movetype, inserttype, item, existing_stack, amt);
 
-  var vendorserial := GetObjProperty(book,"Vendor");
-  if(vendorserial)
-    SendSysMessage(who, "You cannot insert runes while that is on a vendor.");
-    MoveItemToContainer(item, who.backpack);
-    return;
-  endif
-  if(book.movable == 0)
-    SendSysMessage(who, "You cannot do that while the book is locked down.");
-    MoveItemToContainer(item, who.backpack);
-    return 0;
-  elseif (!can_access(who, book) || !can_access(who, item))
-    MoveItemToContainer(item, who.backpack);
-    SendSysMessage(who, "You can't add that when the book is in use.");
-    return;
-  else
-    if(item.objtype == 0x1f14)
-      AddRune(who, book, item);
-    elseif(item.objtype == 0x1f4c);
-      rechargebook(who, book, item);
-    else
-      SendSysMessage(who, "You can't put that in a runebook.");
-      MoveItemToContainer(item, who.backpack);
-    endif
-  endif
+	// Next 4 lines used to fix the "unused variable" report
+	amt := amt;
+	existing_stack := existing_stack;
+	movetype := movetype;
+	inserttype := inserttype;
+
+	var vendorserial := GetObjProperty(book,"Vendor");
+	if(vendorserial)
+		SendSysMessage(who, "You cannot insert runes while that is on a vendor.");
+		MoveItemToContainer(item, who.backpack);
+		return;
+	endif
+	if(book.movable == 0)
+		SendSysMessage(who, "You cannot do that while the book is locked down.");
+		MoveItemToContainer(item, who.backpack);
+		return 0;
+	elseif (!can_access(who, book) || !can_access(who, item))
+		MoveItemToContainer(item, who.backpack);
+		SendSysMessage(who, "You can't add that when the book is in use.");
+		return;
+	else
+		if(item.objtype == 0x1f14)
+			AddRune(who, book, item);
+		elseif(item.objtype == 0x1f4c);
+			rechargebook(who, book, item);
+		else
+			SendSysMessage(who, "You can't put that in a runebook.");
+			MoveItemToContainer(item, who.backpack);
+		endif
+	endif
+
 endprogram
 
+
 function rechargebook(who, book, scrolls)
-  var charges    := CInt(GetObjProperty(book, "charges"));
-  var maxcharges := CInt(GetObjProperty(book, "maxcharges"));
-  var maxamount  := CInt(maxcharges - charges);
-  var amount     := CInt(scrolls.amount);
-  if(maxamount <= 0)
-      SendSysMessage(who, "This runebook is full.");
-      MoveItemToContainer(scrolls, who.backpack);
-      return;
-  elseif(amount >= maxamount)
-      var to_substract := maxamount;
-      if(SubtractAmount(scrolls, to_substract))
-          charges := maxcharges;
-      endif
-  elseif(DestroyItem(scrolls))
-      charges := charges + amount;
-  endif
-  if(scrolls && scrolls.amount)
-    MoveItemToContainer(scrolls, who.backpack);
-  endif
-  PlaySoundEffect(who, 0x1f1);
-  PlayObjectCenteredEffect(who, 0x375a, 7, 0x10);
-  SetObjProperty(book, "charges", charges);
-  SendSysMessage(who, "There's now " + charges + " charges in this runebook.");
-  UpdateName(book, charges);
+
+	var charges    := CInt(GetObjProperty(book, "charges"));
+	var maxcharges := CInt(GetObjProperty(book, "maxcharges"));
+	var maxamount  := CInt(maxcharges - charges);
+	var amount     := CInt(scrolls.amount);
+	if(maxamount <= 0)
+		SendSysMessage(who, "This runebook is full.");
+		MoveItemToContainer(scrolls, who.backpack);
+		return;
+	elseif(amount >= maxamount)
+		var to_substract := maxamount;
+		if(SubtractAmount(scrolls, to_substract))
+			charges := maxcharges;
+		endif
+	elseif(DestroyItem(scrolls))
+		charges := charges + amount;
+	endif
+	if(scrolls && scrolls.amount)
+		MoveItemToContainer(scrolls, who.backpack);
+	endif
+	PlaySoundEffect(who, 0x1f1);
+	PlayObjectCenteredEffect(who, 0x375a, 7, 0x10);
+	SetObjProperty(book, "charges", charges);
+	SendSysMessage(who, "There's now " + charges + " charges in this runebook.");
+	UpdateName(book, charges);
+
 endfunction
 
+
 function AddRune(who, book, rune)
-  var runedefs := GetObjProperty(book, "runedefs");
-  if(len(runedefs) >= 16)
-    SendSysMessage(who,"This book cannot hold any more runes.");
-    MoveItemToContainer(rune, who.backpack);
-    return;
-  endif
-  if(!ReserveItem(rune))
-    SendSysMessage(who,"cancelled");
-    MoveItemToContainer(rune, who.backpack);
-    return;
-  endif
-  if(!GetObjProperty(rune, "x"))
-    SendSysMessage(who,"You can only add marked runes.");
-    MoveItemToContainer(rune, who.backpack);
-    return;
-  endif
-  set_critical(1);
-  var x := GetObjProperty(rune, "x");
-  var y := GetObjProperty(rune, "y");
-  var z := GetObjProperty(rune, "z");
-  var rname := rune.desc - "A recall rune for";
-  var new_rune_struct := { rname, x, y, z };
-  if(!runedefs)
-    var new_runedefs := {new_rune_struct};
-    SetObjProperty(book, "runedefs", new_runedefs);
-  elseif(runedefs.size() == 32)
-    SendSysMessage(who, "That rune book is full.");
-    MoveItemToContainer(rune, who.backpack);
-    return;
-  else
-    runedefs.append(new_rune_struct);
-    SetObjProperty(book, "runedefs", runedefs);
-  endif
-  SendSysMessage(who, "You add the rune to the runebook.");
-  DestroyItem(rune);
-  set_critical(0);
+
+	var runedefs := GetObjProperty(book, "runedefs");
+	if(len(runedefs) >= 16)
+		SendSysMessage(who,"This book cannot hold any more runes.");
+		MoveItemToContainer(rune, who.backpack);
+		return;
+	endif
+	if(!ReserveItem(rune))
+		SendSysMessage(who,"cancelled");
+		MoveItemToContainer(rune, who.backpack);
+		return;
+	endif
+	if(!GetObjProperty(rune, "x"))
+		SendSysMessage(who,"You can only add marked runes.");
+		MoveItemToContainer(rune, who.backpack);
+		return;
+	endif
+	set_critical(1);
+	var x := GetObjProperty(rune, "x");
+	var y := GetObjProperty(rune, "y");
+	var z := GetObjProperty(rune, "z");
+	var rname := rune.desc - "A recall rune for";
+	var new_rune_struct := { rname, x, y, z };
+	if(!runedefs)
+		var new_runedefs := {new_rune_struct};
+		SetObjProperty(book, "runedefs", new_runedefs);
+	elseif(runedefs.size() == 32)
+		SendSysMessage(who, "That rune book is full.");
+		MoveItemToContainer(rune, who.backpack);
+		return;
+	else
+		runedefs.append(new_rune_struct);
+		SetObjProperty(book, "runedefs", runedefs);
+	endif
+	SendSysMessage(who, "You add the rune to the runebook.");
+	DestroyItem(rune);
+	set_critical(0);
+
 endfunction
 
+
 function UpdateName(runebook, charges)
-  var name := GetObjProperty(runebook, "name");
-  if(!name)
-    name := "Runebook";
-  endif
-  runebook.name := name + " [charges: " + charges + "]";
-endfunction 
\ No newline at end of file
+
+	var name := GetObjProperty(runebook, "name");
+	if(!name)
+		name := "Runebook";
+	endif
+	runebook.name := name + " [charges: " + charges + "]";
+
+endfunction
\ No newline at end of file

Modified: trunk/096/pkg/mobiles/npcutils/NPCKeeper.src
===================================================================
--- trunk/096/pkg/mobiles/npcutils/NPCKeeper.src	2005-09-28 20:25:39 UTC (rev 286)
+++ trunk/096/pkg/mobiles/npcutils/NPCKeeper.src	2005-09-28 20:26:16 UTC (rev 287)
@@ -1,3 +1,5 @@
+// //$Id$
+
 use uo;
 use os;
 
@@ -191,7 +193,7 @@
   if(colornum == 0)
     colornum := 1;
   endif
-  who.speech_color := CInt(colorarray[colornum]); 
+  who.speech_color := CInt(colorarray[colornum]);
 endprogram
 
 function Adjustment(who, type)

Modified: trunk/096/pkg/mobiles/npcutils/vetement.inc
===================================================================
--- trunk/096/pkg/mobiles/npcutils/vetement.inc	2005-09-28 20:25:39 UTC (rev 286)
+++ trunk/096/pkg/mobiles/npcutils/vetement.inc	2005-09-28 20:26:16 UTC (rev 287)
@@ -1,3 +1,5 @@
+// //$Id$
+
 use cfgfile;
 use os;
 use util;
@@ -85,7 +87,6 @@
       var itemg := FindConfigElem(vetements, objname);
       if(itemg)
         var str := GetConfigStringArray(itemg, "Item");
-        var str3;
         var newarray := {};
         var i := 1;
         var sex := "";

Modified: trunk/096/pkg/skills/hiding/hiding.src
===================================================================
--- trunk/096/pkg/skills/hiding/hiding.src	2005-09-28 20:25:39 UTC (rev 286)
+++ trunk/096/pkg/skills/hiding/hiding.src	2005-09-28 20:26:16 UTC (rev 287)
@@ -13,9 +13,9 @@
 ////////////////////////////////////////////////////////////////////////////////////////////////////
 use uo;
 
-include ":attributes:include/attributeConstants";
-include ":attributes:include/attributes";
-include ":attributes:include/skillCheck";
+include ":attributes:attributeConstants";
+include ":attributes:attributes";
+include ":attributes:skillCheck";
 
 program skill_Hide(who)
 



From austin at berlios.de  Wed Sep 28 23:14:00 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 23:14:00 +0200
Subject: [Poldistro-svn] r288 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509282114.j8SLE0f9007542@sheep.berlios.de>

Author: austin
Date: 2005-09-28 23:14:00 +0200 (Wed, 28 Sep 2005)
New Revision: 288

Modified:
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-28 20:26:16 UTC (rev 287)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-28 21:14:00 UTC (rev 288)
@@ -63,6 +63,25 @@
 	return 1;
 endfunction
 
+function CheckSkillAdvance(mobile, attribute, award_points)
+	if ( AP_CheckSkillCap(mobile, attribute) )
+		return error{"errortext":="Skill cap for attribute '"+attribute+"' already reached."};
+	elseif ( AP_CheckSkillCap(mobile) )
+		return error{"errortext":="Total skill cap already reached."};
+	endif
+	
+	var skill_amt := AP_GetTrueSkill(mobile, attribute);
+	var free_gain := CDbl(AP_GetSettingsCfgElem("Skills").FreeGainUntil);
+	if ( skill_amt < free_gain )
+		//Increase 0.1 if < free gain
+		AP_SetTrueSkill(mobile, attribute, skill_amt+0.1);
+	endif
+	
+	
+	return 1;
+endfunction
+	
+
 /*
  * SkillDbgMsg(mobile, message)
  *
@@ -79,7 +98,7 @@
  */
 function SkillDbgMsg(mobile, message)
 	if ( g_skill_debug )
-		SendSysMessage(who, "Skill Debug: "+message);
+		SendSysMessage(mobile, "Skill Debug: "+message);
 	endif
 	
 	return 1;



From austin at berlios.de  Wed Sep 28 23:14:23 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Wed, 28 Sep 2005 23:14:23 +0200
Subject: [Poldistro-svn] r289 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509282114.j8SLENg9007576@sheep.berlios.de>

Author: austin
Date: 2005-09-28 23:14:23 +0200 (Wed, 28 Sep 2005)
New Revision: 289

Modified:
   trunk/096/pkg/systems/attributes/include/skills.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/skills.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-28 21:14:00 UTC (rev 288)
+++ trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-28 21:14:23 UTC (rev 289)
@@ -169,8 +169,10 @@
 	var cfg_elem := AP_GetSettingsCfgElem("Skills");
 	
 	if ( skill_name )
-		var cap := GetConfigReal(cfg_elem, skill_name);
-		return ( AP_GetTrueSkill(mobile, skill_name) >= cap );
+		var cap_val := GetConfigReal(cfg_elem, skill_name);
+		if ( cap_val != error )
+			return ( AP_GetTrueSkill(mobile, skill_name) >= cap_val );
+		endif
 	else
 		var total := 0.0;
 		foreach attribute_name in ( AP_ListAttributesByType("Skill") )
@@ -178,6 +180,11 @@
 			sleepms(2);
 		endforeach
 		
-		return ( total >= GetConfigReal(cfg_elem, "TotalCap") );
+		var cap_val := GetConfigReal(cfg_elem, "TotalCap");
+		if ( cap_val != error )
+			return ( total >= cap_val );
+		endif
 	endif
+	
+	return 0;
 endfunction



From austin at berlios.de  Thu Sep 29 01:17:25 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 01:17:25 +0200
Subject: [Poldistro-svn] r290 - trunk/096/pkg/systems/attributes/config
Message-ID: <200509282317.j8SNHPLx015014@sheep.berlios.de>

Author: austin
Date: 2005-09-29 01:17:21 +0200 (Thu, 29 Sep 2005)
New Revision: 290

Modified:
   trunk/096/pkg/systems/attributes/config/settings.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/config/settings.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-28 21:14:23 UTC (rev 289)
+++ trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-28 23:17:21 UTC (rev 290)
@@ -1,3 +1,5 @@
+# $Id$
+
 Elem Regen
 {
 	# Base stat regenerating rates in points per minute.
@@ -8,12 +10,23 @@
 
 Elem Skills
 {
-	FreeGainUntil	10.0	// Always award a part of the points when the base skill is lower than this.
-	MinChance		0		// Min % of success.
-	MaxChance		100		// Max % of success.
+	// Always award a part of the points when the base skill is lower than this.
+	FreeGainUntil		10.0
 	
+	// Min % of success.
+	MinChance		0
+	// Max % of success.
+	MaxChance		100
+	
 	// Maximum value of all skills combined.
 	TotalCap		7000.0
+	// Highest a single skill can be.
+	SkillCap		100.0
+	
+	// Controls how fast skills gain
+	GainSpeed		1.0
+	// Number of seconds that muss pass after a gain to get another gain
+	GainWait		90
 }
 
 Elem Stats
@@ -21,8 +34,13 @@
 	// Maximum value of all stats combined.
 	TotalCap		225.0
 	
+	// Controls how fast stats advance
+	GainSpeed		1.0
+	// Number of seconds that muss pass after a gain to get another gain
+	GainWait		90
+	
 	// Individual stat caps - highest they are allowed to go.
 	Strength		100.0
 	Dexterity		100.0
-	Intelligence	100.0
+	Intelligence		100.0
 }



From austin at berlios.de  Thu Sep 29 01:19:10 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 01:19:10 +0200
Subject: [Poldistro-svn] r291 - trunk/096/pkg/systems/attributes/config
Message-ID: <200509282319.j8SNJAUa016196@sheep.berlios.de>

Author: austin
Date: 2005-09-29 01:19:06 +0200 (Thu, 29 Sep 2005)
New Revision: 291

Modified:
   trunk/096/pkg/systems/attributes/config/settings.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/config/settings.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-28 23:17:21 UTC (rev 290)
+++ trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-28 23:19:06 UTC (rev 291)
@@ -18,6 +18,9 @@
 	// Max % of success.
 	MaxChance		100
 	
+	// Max. success chance of "-1 Difficulty" skillcheck
+	MaxNeg1Chance		85.0
+	
 	// Maximum value of all skills combined.
 	TotalCap		7000.0
 	// Highest a single skill can be.



From austin at berlios.de  Thu Sep 29 02:01:53 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 02:01:53 +0200
Subject: [Poldistro-svn] r292 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509290001.j8T01rP9004361@sheep.berlios.de>

Author: austin
Date: 2005-09-29 02:01:24 +0200 (Thu, 29 Sep 2005)
New Revision: 292

Added:
   trunk/096/pkg/systems/attributes/include/advanceCheck.inc
   trunk/096/pkg/systems/attributes/include/statCheck.inc
Modified:
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
   trunk/096/pkg/systems/attributes/include/skills.inc
Log:


Added: trunk/096/pkg/systems/attributes/include/advanceCheck.inc
===================================================================

Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-28 23:19:06 UTC (rev 291)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 00:01:24 UTC (rev 292)
@@ -18,10 +18,10 @@
 include ":attributes:attributes";
 include ":attributes:settings";
 
-const ADV_SKILL		:= 1;
-const ADV_STATS		:= 2;
+const ADV_SKILL		:= 0x1;
+const ADV_STATS		:= 0x2;
 const ADV_ALL		:= ADV_SKILL+ADV_STATS; // 3
-const ADV_DISABLE	:= 4; // 4 - because if flags is 0, we want the default to be ADV_ALL.
+const ADV_DISABLE	:= 0x4; // 4 - because the default is ADV_ALL.
 
 var g_skill_debug	:= 0;
 
@@ -36,14 +36,14 @@
  * Parameters
  * mobile:		Mobile reference to do the skill check for.
  * attribute_name:	Name of the attribute to perform the check on.
- * award_points:	Determines the amount of (if any) skill gain.
+ * award_diff:		Advanced as if the difficulty were this value - defaults to difficulty.
  * advance_flags:	Controls the turning on/off of stat and skill advancements for the check.
  *
  * Return value
  * Returns > 0 if the skill check was successful
  *
  */
-function SkillCheck(mobile, attrib_name, difficulty, award_points:=0, advance_flags:=ADV_ALL)
+function SkillCheck(mobile, attrib_name, difficulty, award_diff:=0, advance_flags:=ADV_ALL)
 	if ( mobile.dead )
 		SendSysMessage(mobile, "You can't use skills while dead.");
 		return -100;
@@ -54,35 +54,56 @@
 		advance_flags := ADV_DISABLE;
 	endif
 	
-	var advance_skill := advance_flags & ADV_SKILL;
-	var advance_stats := advance_flags & ADV_STATS;
-	
 	// Global skill-debug ( for SkillDbgMsg() )
 	g_skill_debug := (GetObjProperty(mobile,"SkillDebug") != error);
 	
-	return 1;
-endfunction
-
-function CheckSkillAdvance(mobile, attribute, award_points)
-	if ( AP_CheckSkillCap(mobile, attribute) )
-		return error{"errortext":="Skill cap for attribute '"+attribute+"' already reached."};
-	elseif ( AP_CheckSkillCap(mobile) )
-		return error{"errortext":="Total skill cap already reached."};
+	var effective_skill := AP_GetTrueSkill(mobile, attrib_name);
+	
+	// Difficulty checks
+	if ( difficulty == -1 )
+		// -1 = Check skill against its self.
+		SkillDbgMsg(mobile, "Skill based check. Difficulty = -1");
+	else
+		difficulty := CDbl(difficulty);
 	endif
 	
-	var skill_amt := AP_GetTrueSkill(mobile, attribute);
-	var free_gain := CDbl(AP_GetSettingsCfgElem("Skills").FreeGainUntil);
-	if ( skill_amt < free_gain )
-		//Increase 0.1 if < free gain
-		AP_SetTrueSkill(mobile, attribute, skill_amt+0.1);
+	var pass_chance := CalcSuccessPercent(mobile, attrib_name, difficulty, effective_skill);
+	var check_roll := RandomInt(100)+1;
+	var pass_success := CInt(CDbl(pass_chance) - CDbl(check_roll))+1;
+	// Ensure skill- and stat-gain if it's a -1 skillcheck
+	if ( difficulty == -1 )
+		difficulty := effective_skill;
 	endif
+	if ( !award_diff )
+		award_diff := difficulty;
+	endif
 	
-	
 	return 1;
 endfunction
-	
 
 /*
+ * CalcSuccessPerfect(mobile, attrib_name, difficulty, effective_skill)
+ *
+ * Purpose
+ * Retrieves the percentage chance of success based on mobile's skill and the difficulty.
+ *
+ * Parameters
+ *
+ * Return value
+ * Returns 1
+ *
+ */
+function CalcSuccessPercent(mobile, attrib_name, difficulty, effective_skill)
+	return 1;
+endfunction
+
+
+function CheckSkillAdvance(mobile, attrib_name, award_difficulty, pass_chance, pass_success)
+	return 1;
+endfunction
+
+
+/*
  * SkillDbgMsg(mobile, message)
  *
  * Purpose
@@ -104,5 +125,28 @@
 	return 1;
 endfunction
 
+/*
 
-//Cdbl(Pow(2.0, Cint(basevalue/100))* 10.24);
\ No newline at end of file
+function CheckSkillAdvance(mobile, attribute, award_points)
+	if ( AP_CheckSkillCap(mobile, attribute) )
+		return error{"errortext":="Skill cap for attribute '"+attribute+"' already reached."};
+	elseif ( AP_CheckSkillCap(mobile) )
+		return error{"errortext":="Total skill cap already reached."};
+	endif
+	
+	var skill_amt := AP_GetTrueSkill(mobile, attribute);
+	var free_gain := CDbl(AP_GetSettingsCfgElem("Skills").FreeGainUntil);
+	if ( skill_amt < free_gain )
+		//Increase 0.1 if < free gain
+		AP_SetTrueSkill(mobile, attribute, skill_amt+0.1);
+	endif
+	
+	if(points != 0)
+      		points  := points * ((1000-temp_chance) / 1000);
+    	endif
+    	
+	return 1;
+endfunction
+		
+//Cdbl(Pow(2.0, Cint(basevalue/100))* 10.24);
+*/

Modified: trunk/096/pkg/systems/attributes/include/skills.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-28 23:19:06 UTC (rev 291)
+++ trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-29 00:01:24 UTC (rev 292)
@@ -169,7 +169,12 @@
 	var cfg_elem := AP_GetSettingsCfgElem("Skills");
 	
 	if ( skill_name )
+		// Check if the specific skill has a cap set for it.
 		var cap_val := GetConfigReal(cfg_elem, skill_name);
+		if ( !cap_val )
+			cap_val := GetConfigReal(cfg_elem, "SkillCap");
+		endif
+		
 		if ( cap_val != error )
 			return ( AP_GetTrueSkill(mobile, skill_name) >= cap_val );
 		endif

Added: trunk/096/pkg/systems/attributes/include/statCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/statCheck.inc	2005-09-28 23:19:06 UTC (rev 291)
+++ trunk/096/pkg/systems/attributes/include/statCheck.inc	2005-09-29 00:01:24 UTC (rev 292)
@@ -0,0 +1,73 @@
+// $Id$
+
+/*===============================================================
+* Current Version
+* STATCHECK.INC - v1.0
+* Updated 9/28/2005 3:48PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+function CheckStatAdvancement(mobile, stat_name)
+	// Get the stat and work out the advancement chance (biased against max stat)
+	var stat_value := CDbl(GetTrueStat(mobile, stat_name));
+	var stat_cap := 6000.0;
+	if ( !mobile.npctemplate )
+		stat_cap := CDbl(GetStatCap(mobile, stat_name));
+		if ( stat_value >= stat_cap )
+			SkillDbgMsg(mobile, "stat_cap reached. No advance." );
+			return 0;
+		endif
+	endif
+
+	var stat_start := 0.0;
+	if ( !mobile.npctemplate )
+		stat_start := CDbl(GetStatStart(mobile, stat_name));
+	endif
+	var stat_diff := CDbl(stat_cap - stat_start);
+	var stat_left := CDbl(stat_cap - stat_value);
+
+	SkillDbgMsg(mobile, "Stat Start: "+CStr(stat_start));
+	SkillDbgMsg(mobile, "Stat Cap: "+CStr(stat_cap));
+	SkillDbgMsg(mobile, "Stat Diff: "+CStr(stat_diff));
+	SkillDbgMsg(mobile, "---");
+	SkillDbgMsg(mobile, "Stat Current: "+CStr(stat_value));
+	SkillDbgMsg(mobile, "Left to cap: "+CStr(stat_left)+" ->"+stat_cap+"-"+stat_value);
+
+	var chance := CDbl(stat_left * stat_mult / stat_diff);
+	if ( chance < 1.0 )
+		chance := 1.0;
+	endif
+
+	SkillDbgMsg(mobile, "Chance: "+CStr(chance));
+	SkillDbgMsg(mobile, "---");
+
+	var random := CDbl(RandomFloat(100.0));
+	SkillDbgMsg(mobile, "Check %age: "+CStr(random));
+	if ( random < chance )
+		var advance := CDbl(0.1 + (0.1 * CDbl(CInt(chance / 12.5))));
+		if ( advance > stat_left )
+			advance := stat_left;
+		elseif ( advance < 0.1 )
+			advance := 0.1;
+		endif
+
+		var temp := stat_value+advance;
+		while ( CInt(temp*10.0) == CInt(GetRawStat(mobile, stat_name)) )
+			//Makes sure you always go up atleast .1
+			temp := temp+0.1;
+			sleepms(10);
+		endwhile
+
+		SkillDbgMsg(mobile, "Passed. Advance "+stat_name+": " + CStr(advance));
+		SendSysMessageEX(mobile, "You gain a little " + stat_name + " from your actions.", SSM_HELPFUL);
+		SetTrueStat(mobile, stat_name, temp);
+
+		SetObjProperty(mobile, "#LastStatGain", ReadGameClock());
+		return 1;
+	endif
+	SkillDbgMsg(mobile, "Failed. No advance.");
+	return 0;
+endfunction
\ No newline at end of file



From austin at berlios.de  Thu Sep 29 02:02:53 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 02:02:53 +0200
Subject: [Poldistro-svn] r293 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509290002.j8T02rxM004674@sheep.berlios.de>

Author: austin
Date: 2005-09-29 02:02:39 +0200 (Thu, 29 Sep 2005)
New Revision: 293

Removed:
   trunk/096/pkg/systems/attributes/include/statCheck.inc
Log:


Deleted: trunk/096/pkg/systems/attributes/include/statCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/statCheck.inc	2005-09-29 00:01:24 UTC (rev 292)
+++ trunk/096/pkg/systems/attributes/include/statCheck.inc	2005-09-29 00:02:39 UTC (rev 293)
@@ -1,73 +0,0 @@
-// $Id$
-
-/*===============================================================
-* Current Version
-* STATCHECK.INC - v1.0
-* Updated 9/28/2005 3:48PM
-*
-* -- Revision v1.0 --
-* Austin:
-*  Created include file
-===============================================================*/
-
-function CheckStatAdvancement(mobile, stat_name)
-	// Get the stat and work out the advancement chance (biased against max stat)
-	var stat_value := CDbl(GetTrueStat(mobile, stat_name));
-	var stat_cap := 6000.0;
-	if ( !mobile.npctemplate )
-		stat_cap := CDbl(GetStatCap(mobile, stat_name));
-		if ( stat_value >= stat_cap )
-			SkillDbgMsg(mobile, "stat_cap reached. No advance." );
-			return 0;
-		endif
-	endif
-
-	var stat_start := 0.0;
-	if ( !mobile.npctemplate )
-		stat_start := CDbl(GetStatStart(mobile, stat_name));
-	endif
-	var stat_diff := CDbl(stat_cap - stat_start);
-	var stat_left := CDbl(stat_cap - stat_value);
-
-	SkillDbgMsg(mobile, "Stat Start: "+CStr(stat_start));
-	SkillDbgMsg(mobile, "Stat Cap: "+CStr(stat_cap));
-	SkillDbgMsg(mobile, "Stat Diff: "+CStr(stat_diff));
-	SkillDbgMsg(mobile, "---");
-	SkillDbgMsg(mobile, "Stat Current: "+CStr(stat_value));
-	SkillDbgMsg(mobile, "Left to cap: "+CStr(stat_left)+" ->"+stat_cap+"-"+stat_value);
-
-	var chance := CDbl(stat_left * stat_mult / stat_diff);
-	if ( chance < 1.0 )
-		chance := 1.0;
-	endif
-
-	SkillDbgMsg(mobile, "Chance: "+CStr(chance));
-	SkillDbgMsg(mobile, "---");
-
-	var random := CDbl(RandomFloat(100.0));
-	SkillDbgMsg(mobile, "Check %age: "+CStr(random));
-	if ( random < chance )
-		var advance := CDbl(0.1 + (0.1 * CDbl(CInt(chance / 12.5))));
-		if ( advance > stat_left )
-			advance := stat_left;
-		elseif ( advance < 0.1 )
-			advance := 0.1;
-		endif
-
-		var temp := stat_value+advance;
-		while ( CInt(temp*10.0) == CInt(GetRawStat(mobile, stat_name)) )
-			//Makes sure you always go up atleast .1
-			temp := temp+0.1;
-			sleepms(10);
-		endwhile
-
-		SkillDbgMsg(mobile, "Passed. Advance "+stat_name+": " + CStr(advance));
-		SendSysMessageEX(mobile, "You gain a little " + stat_name + " from your actions.", SSM_HELPFUL);
-		SetTrueStat(mobile, stat_name, temp);
-
-		SetObjProperty(mobile, "#LastStatGain", ReadGameClock());
-		return 1;
-	endif
-	SkillDbgMsg(mobile, "Failed. No advance.");
-	return 0;
-endfunction
\ No newline at end of file



From austin at berlios.de  Thu Sep 29 03:03:23 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 03:03:23 +0200
Subject: [Poldistro-svn] r294 - trunk/096/pkg/systems/attributes/config
Message-ID: <200509290103.j8T13Nu0017576@sheep.berlios.de>

Author: austin
Date: 2005-09-29 03:03:10 +0200 (Thu, 29 Sep 2005)
New Revision: 294

Modified:
   trunk/096/pkg/systems/attributes/config/settings.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/config/settings.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-29 00:02:39 UTC (rev 293)
+++ trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-29 01:03:10 UTC (rev 294)
@@ -13,6 +13,12 @@
 	// Always award a part of the points when the base skill is lower than this.
 	FreeGainUntil		10.0
 	
+	// Difficulty vs. Skill comparisons to control gain
+	// Too easy to gain any skill
+	TooEasy			-15
+	// Too hard to have a successful skill check
+	TooHard			+15
+	
 	// Min % of success.
 	MinChance		0
 	// Max % of success.



From austin at berlios.de  Thu Sep 29 03:06:35 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 03:06:35 +0200
Subject: [Poldistro-svn] r295 - trunk/096/pkg/systems/attributes/config
Message-ID: <200509290106.j8T16Z7u027063@sheep.berlios.de>

Author: austin
Date: 2005-09-29 03:06:33 +0200 (Thu, 29 Sep 2005)
New Revision: 295

Modified:
   trunk/096/pkg/systems/attributes/config/settings.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/config/settings.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-29 01:03:10 UTC (rev 294)
+++ trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-29 01:06:33 UTC (rev 295)
@@ -2,7 +2,7 @@
 
 Elem Regen
 {
-	# Base stat regenerating rates in points per minute.
+	# Base stat regenerating rates in points per minute. (int)
 	Hits			20
 	Mana			10
 	Stamina			25	
@@ -10,45 +10,45 @@
 
 Elem Skills
 {
-	// Always award a part of the points when the base skill is lower than this.
+	// Always award a part of the points when the base skill is lower than this. (double)
 	FreeGainUntil		10.0
 	
 	// Difficulty vs. Skill comparisons to control gain
-	// Too easy to gain any skill
-	TooEasy			-15
-	// Too hard to have a successful skill check
-	TooHard			+15
+	// Too easy to gain any skill (double)
+	TooEasy			-15.0
+	// Too hard to have a successful skill check (double)
+	TooHard			+15.0
 	
-	// Min % of success.
+	// Min % of success. (int)
 	MinChance		0
-	// Max % of success.
+	// Max % of success. (int)
 	MaxChance		100
 	
-	// Max. success chance of "-1 Difficulty" skillcheck
+	// Max. success chance of "-1 Difficulty" skillcheck (double)
 	MaxNeg1Chance		85.0
 	
-	// Maximum value of all skills combined.
+	// Maximum value of all skills combined. (double)
 	TotalCap		7000.0
-	// Highest a single skill can be.
+	// Highest a single skill can be. (double)
 	SkillCap		100.0
 	
-	// Controls how fast skills gain
+	// Controls how fast skills gain. (double)
 	GainSpeed		1.0
-	// Number of seconds that muss pass after a gain to get another gain
+	// Number of seconds that muss pass after a gain to get another gain (int)
 	GainWait		90
 }
 
 Elem Stats
 {
-	// Maximum value of all stats combined.
+	// Maximum value of all stats combined. (double)
 	TotalCap		225.0
 	
-	// Controls how fast stats advance
+	// Controls how fast stats advance (double)
 	GainSpeed		1.0
-	// Number of seconds that muss pass after a gain to get another gain
+	// Number of seconds that muss pass after a gain to get another gain (int)
 	GainWait		90
 	
-	// Individual stat caps - highest they are allowed to go.
+	// Individual stat caps - highest they are allowed to go. (double)
 	Strength		100.0
 	Dexterity		100.0
 	Intelligence		100.0



From austin at berlios.de  Thu Sep 29 03:16:06 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 03:16:06 +0200
Subject: [Poldistro-svn] r296 - trunk/096/pkg/systems/attributes/config
Message-ID: <200509290116.j8T1G6Qt028780@sheep.berlios.de>

Author: austin
Date: 2005-09-29 03:15:58 +0200 (Thu, 29 Sep 2005)
New Revision: 296

Modified:
   trunk/096/pkg/systems/attributes/config/settings.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/config/settings.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-29 01:06:33 UTC (rev 295)
+++ trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-29 01:15:58 UTC (rev 296)
@@ -10,45 +10,45 @@
 
 Elem Skills
 {
-	// Always award a part of the points when the base skill is lower than this. (double)
+	# Always award a part of the points when the base skill is lower than this. (double)
 	FreeGainUntil		10.0
 	
-	// Difficulty vs. Skill comparisons to control gain
-	// Too easy to gain any skill (double)
+	# Difficulty vs. Skill comparisons to control gain
+	# Too easy to gain any skill (double)
 	TooEasy			-15.0
-	// Too hard to have a successful skill check (double)
+	# Too hard to have a successful skill check (double)
 	TooHard			+15.0
 	
-	// Min % of success. (int)
+	# Min % of success. (int)
 	MinChance		0
-	// Max % of success. (int)
+	# Max % of success. (int)
 	MaxChance		100
 	
-	// Max. success chance of "-1 Difficulty" skillcheck (double)
+	# Max. success chance of "-1 Difficulty" skillcheck (double)
 	MaxNeg1Chance		85.0
 	
-	// Maximum value of all skills combined. (double)
+	# Maximum value of all skills combined. (double)
 	TotalCap		7000.0
-	// Highest a single skill can be. (double)
+	# Highest a single skill can be. (double)
 	SkillCap		100.0
 	
-	// Controls how fast skills gain. (double)
+	# Controls how fast skills gain. (double)
 	GainSpeed		1.0
-	// Number of seconds that muss pass after a gain to get another gain (int)
+	# Number of seconds that muss pass after a gain to get another gain (int)
 	GainWait		90
 }
 
 Elem Stats
 {
-	// Maximum value of all stats combined. (double)
+	# Maximum value of all stats combined. (double)
 	TotalCap		225.0
 	
-	// Controls how fast stats advance (double)
+	# Controls how fast stats advance (double)
 	GainSpeed		1.0
-	// Number of seconds that muss pass after a gain to get another gain (int)
+	# Number of seconds that muss pass after a gain to get another gain (int)
 	GainWait		90
 	
-	// Individual stat caps - highest they are allowed to go. (double)
+	# Individual stat caps - highest they are allowed to go. (double)
 	Strength		100.0
 	Dexterity		100.0
 	Intelligence		100.0



From austin at berlios.de  Thu Sep 29 03:23:29 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 03:23:29 +0200
Subject: [Poldistro-svn] r297 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509290123.j8T1NTJP030348@sheep.berlios.de>

Author: austin
Date: 2005-09-29 03:23:26 +0200 (Thu, 29 Sep 2005)
New Revision: 297

Modified:
   trunk/096/pkg/systems/attributes/include/advanceCheck.inc
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
   trunk/096/pkg/systems/attributes/include/skills.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/advanceCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/advanceCheck.inc	2005-09-29 01:15:58 UTC (rev 296)
+++ trunk/096/pkg/systems/attributes/include/advanceCheck.inc	2005-09-29 01:23:26 UTC (rev 297)
@@ -0,0 +1,25 @@
+// $Id$
+
+/*===============================================================
+* Current Version
+* SKILLCHECK.INC - v1.0
+* Updated 9/24/2005 6:52PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use uo;
+use os;
+
+include ":attributes:attributes";
+/*
+function CheckStatAdvancement(mobile, stat_name)
+	return 1;
+endfunction
+
+function CheckSkillAdvance(mobile, skill_name, award_difficulty, pass_chance, pass_success)
+	return 1;
+endfunction
+*/
\ No newline at end of file

Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 01:15:58 UTC (rev 296)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 01:23:26 UTC (rev 297)
@@ -16,7 +16,7 @@
 use cfgfile;
 
 include ":attributes:attributes";
-include ":attributes:settings";
+include ":attributes:advanceCheck";
 
 const ADV_SKILL		:= 0x1;
 const ADV_STATS		:= 0x2;
@@ -71,6 +71,7 @@
 	var check_roll := RandomInt(100)+1;
 	var pass_success := CInt(CDbl(pass_chance) - CDbl(check_roll))+1;
 	// Ensure skill- and stat-gain if it's a -1 skillcheck
+	// Do this AFTER the CalcSuccessPercent() call so '-1' isn't messed up
 	if ( difficulty == -1 )
 		difficulty := effective_skill;
 	endif
@@ -78,7 +79,27 @@
 		award_diff := difficulty;
 	endif
 	
-	return 1;
+	SkillDbgMsg(mobile, "--");
+	SkillDbgMsg(mobile, "Difficulty: "+CStr(difficulty)+"% (Award: "+CStr(award_diff)+")");
+	SkillDbgMsg(mobile, "Effective Skill: "+CStr(effective_skill)+"%");
+	SkillDbgMsg(mobile, "Success Chance: "+CStr(pass_chance)+"%");
+	SkillDbgMsg(mobile, "Check Roll: "+CStr(check_roll));
+	SkillDbgMsg(mobile, "Success: "+CStr(pass_success));
+	SkillDbgMsg(mobile, "---");
+	
+	if ( !(advance_flags & ADV_SKILL) )
+		SkillDbgMsg(mobile, "Skill advance disabled.");
+	else
+		//CheckSkillAdvance();
+	endif
+		
+	if ( !(advance_flags & ADV_STATS) )
+		SkillDbgMsg(mobile, "Stat advancement disabled.");
+	else
+		//AdvanceStatsForSkill();
+	endif
+	
+	return pass_success;
 endfunction
 
 /*
@@ -94,15 +115,23 @@
  *
  */
 function CalcSuccessPercent(mobile, attrib_name, difficulty, effective_skill)
-	return 1;
+	var settings := AP_GetSettingsCfgElem("Skills");
+	if ( difficulty == -1 )
+		var max_skill := AP_GetSkillCap(attrib_name);
+		var neg1chance := CDbl(settings.MaxNeg1Chance);
+		
+		return CInt(neg1chance * effective_skill / max_skill);
+	elseif ( (effective_skill + CDbl(settings.TooHard)) < difficulty )
+		SkillDbgMsg(mobile, "Too hard.");
+		return 0;
+	elseif ( (effective_skill + Cdbl(settings.TooEasy)) > difficulty )
+		SkillDbgMsg(mobile, "Too easy.");
+		return 100;
+	else
+		return (50 + ((effective_skill - difficulty) * 2.5));
+	endif
 endfunction
 
-
-function CheckSkillAdvance(mobile, attrib_name, award_difficulty, pass_chance, pass_success)
-	return 1;
-endfunction
-
-
 /*
  * SkillDbgMsg(mobile, message)
  *

Modified: trunk/096/pkg/systems/attributes/include/skills.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-29 01:15:58 UTC (rev 296)
+++ trunk/096/pkg/systems/attributes/include/skills.inc	2005-09-29 01:23:26 UTC (rev 297)
@@ -151,6 +151,33 @@
 endfunction
 
 /*
+ * AP_GetSkillCap(skill_name)
+ *
+ * Purpose
+ * Gets the number a skill caps at.
+ *
+ * Parameters
+ * skill_name: Name of the skill to check
+ *
+ * Return value
+ * Returns a number or error
+ *
+ */
+function AP_GetSkillCap(skill_name)
+	var cfg_elem := AP_GetSettingsCfgElem("Skills");
+	
+	// Check if there is a cap for that particular skill.
+	var cap_val := GetConfigReal(cfg_elem, skill_name);
+	
+	if ( !cap_val )
+		// No skill specific cap so get the general one.
+		cap_val := GetConfigReal(cfg_elem, "SkillCap");
+	endif
+	
+	return cap_val;
+endfunction
+ 
+/*
  * AP_CheckSkillCap(mobile, skill_name)
  *
  * Purpose
@@ -158,7 +185,7 @@
  * If no skill_name is passed, it will check the totals.
  *
  * Parameters
- * mobile:		Mobile to check the skills on
+ * mobile:	Mobile to check the skills on
  * stat_name:	Optional parameter - name of the skill to check.
  *
  * Return value
@@ -169,11 +196,7 @@
 	var cfg_elem := AP_GetSettingsCfgElem("Skills");
 	
 	if ( skill_name )
-		// Check if the specific skill has a cap set for it.
-		var cap_val := GetConfigReal(cfg_elem, skill_name);
-		if ( !cap_val )
-			cap_val := GetConfigReal(cfg_elem, "SkillCap");
-		endif
+		var cap_val := AP_GetSkillCap(skill_name);
 		
 		if ( cap_val != error )
 			return ( AP_GetTrueSkill(mobile, skill_name) >= cap_val );



From austin at berlios.de  Thu Sep 29 04:45:50 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 04:45:50 +0200
Subject: [Poldistro-svn] r298 - trunk/096/pkg/systems/attributes/config
Message-ID: <200509290245.j8T2jotj001931@sheep.berlios.de>

Author: austin
Date: 2005-09-29 04:45:49 +0200 (Thu, 29 Sep 2005)
New Revision: 298

Modified:
   trunk/096/pkg/systems/attributes/config/settings.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/config/settings.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-29 01:23:26 UTC (rev 297)
+++ trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-29 02:45:49 UTC (rev 298)
@@ -27,14 +27,14 @@
 	# Max. success chance of "-1 Difficulty" skillcheck (double)
 	MaxNeg1Chance		85.0
 	
-	# Maximum value of all skills combined. (double)
+	# When all skill values combined reach this number, advancement stops. (double)
 	TotalCap		7000.0
-	# Highest a single skill can be. (double)
+	# Highest an individual skill will advance to. (double)
 	SkillCap		100.0
 	
 	# Controls how fast skills gain. (double)
 	GainSpeed		1.0
-	# Number of seconds that muss pass after a gain to get another gain (int)
+	# Number of seconds that must pass after a gain to get another gain (int)
 	GainWait		90
 }
 



From austin at berlios.de  Thu Sep 29 04:47:43 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 04:47:43 +0200
Subject: [Poldistro-svn] r299 - trunk/096/pkg/systems/attributes/config
Message-ID: <200509290247.j8T2lh4A002263@sheep.berlios.de>

Author: austin
Date: 2005-09-29 04:47:41 +0200 (Thu, 29 Sep 2005)
New Revision: 299

Modified:
   trunk/096/pkg/systems/attributes/config/settings.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/config/settings.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-29 02:45:49 UTC (rev 298)
+++ trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-29 02:47:41 UTC (rev 299)
@@ -28,6 +28,7 @@
 	MaxNeg1Chance		85.0
 	
 	# When all skill values combined reach this number, advancement stops. (double)
+	# This value represents tenths (0.1 = 1 point, 5.0 = 50 points, 2000.5 = 200.5 points, etc.)
 	TotalCap		7000.0
 	# Highest an individual skill will advance to. (double)
 	SkillCap		100.0



From austin at berlios.de  Thu Sep 29 04:51:50 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 04:51:50 +0200
Subject: [Poldistro-svn] r300 - trunk/096/pkg/systems/attributes/config
Message-ID: <200509290251.j8T2pojR003653@sheep.berlios.de>

Author: austin
Date: 2005-09-29 04:51:48 +0200 (Thu, 29 Sep 2005)
New Revision: 300

Modified:
   trunk/096/pkg/systems/attributes/config/settings.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/config/settings.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-29 02:47:41 UTC (rev 299)
+++ trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-29 02:51:48 UTC (rev 300)
@@ -28,7 +28,7 @@
 	MaxNeg1Chance		85.0
 	
 	# When all skill values combined reach this number, advancement stops. (double)
-	# This value represents tenths (0.1 = 1 point, 5.0 = 50 points, 2000.5 = 200.5 points, etc.)
+	# This value represents tenths (0.1 = 1.0 point, 5.0 = 50.0 points, 200.5 = 2000.5 points, etc.)
 	TotalCap		7000.0
 	# Highest an individual skill will advance to. (double)
 	SkillCap		100.0



From austin at berlios.de  Thu Sep 29 04:58:46 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 04:58:46 +0200
Subject: [Poldistro-svn] r301 - trunk/096/pkg/systems/attributes/config
Message-ID: <200509290258.j8T2wkNZ004572@sheep.berlios.de>

Author: austin
Date: 2005-09-29 04:58:41 +0200 (Thu, 29 Sep 2005)
New Revision: 301

Modified:
   trunk/096/pkg/systems/attributes/config/settings.cfg
Log:


Modified: trunk/096/pkg/systems/attributes/config/settings.cfg
===================================================================
--- trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-29 02:51:48 UTC (rev 300)
+++ trunk/096/pkg/systems/attributes/config/settings.cfg	2005-09-29 02:58:41 UTC (rev 301)
@@ -28,8 +28,7 @@
 	MaxNeg1Chance		85.0
 	
 	# When all skill values combined reach this number, advancement stops. (double)
-	# This value represents tenths (0.1 = 1.0 point, 5.0 = 50.0 points, 200.5 = 2000.5 points, etc.)
-	TotalCap		7000.0
+	TotalCap		700.0
 	# Highest an individual skill will advance to. (double)
 	SkillCap		100.0
 	



From austin at berlios.de  Thu Sep 29 05:31:05 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 05:31:05 +0200
Subject: [Poldistro-svn] r302 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509290331.j8T3V5Gn012151@sheep.berlios.de>

Author: austin
Date: 2005-09-29 05:31:02 +0200 (Thu, 29 Sep 2005)
New Revision: 302

Modified:
   trunk/096/pkg/systems/attributes/include/advanceCheck.inc
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/advanceCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/advanceCheck.inc	2005-09-29 02:58:41 UTC (rev 301)
+++ trunk/096/pkg/systems/attributes/include/advanceCheck.inc	2005-09-29 03:31:02 UTC (rev 302)
@@ -2,8 +2,8 @@
 
 /*===============================================================
 * Current Version
-* SKILLCHECK.INC - v1.0
-* Updated 9/24/2005 6:52PM
+* ADVANCECHECK.INC - v1.0
+* Updated 9/28/2005 8:29PM
 *
 * -- Revision v1.0 --
 * Austin:
@@ -12,14 +12,111 @@
 
 use uo;
 use os;
+use util;
 
 include ":attributes:attributes";
-/*
-function CheckStatAdvancement(mobile, stat_name)
-	return 1;
+
+//function CheckStatAdvancement(mobile, stat_name)
+//	return 1;
+//endfunction
+
+function CheckSkillAdvance(mobile, skill_name, award_diff, pass_chance, pass_success)
+	if ( pass_success < 0 )
+		SkillDbgMsg(mobile, "No skill advancement - skill check was not successful.");
+		return 0;
+	elseif ( AP_CheckSkillCap(mobile, skill_name) )
+		SkillDbgMsg(mobile, "Skill cap for attribute '"+skill_name+"' already reached.");
+		return 0;
+	elseif ( AP_CheckSkillCap(mobile) )
+		SkillDbgMsg(mobile, "Total skill cap already reached.");
+		return 0;
+	endif
+	
+	var skill_cap := AP_GetSkillCap(skill_name);
+	var true_skill := AP_GetTrueSkill(mobile, skill_name);
+	var limit_left := CDbl(skill_cap - true_skill);
+	var adv_check := RandomInt(100)+1;
+	
+	var settings := AP_GetSettingsCfgElem("Skills");
+	var multiplier := CDbl(settings.GainSpeed);
+			
+	if ( true_skill < CDbl(settings.FreeGainUntil) )
+		SkillDbgMsg(mobile, "Skill is < "+CDbl(settings.FreeGainUntil)+". Allowing for advancement");
+	elseif ( true_skill+Cdbl(settings.TooEasy) > award_diff )
+		// Was it too easy? If so, return.
+		SkillDbgMsg(mobile, "No challenge. No advance. True skill ("+true_skill+"-20) > "+award_diff);
+		return 0;
+	elseif ( adv_check <= pass_chance )
+		SkillDbgMsg(mobile, "Passed advance check: +"+CStr(pass_chance - adv_check)+"%");
+	else
+		SkillDbgMsg(mobile, "Did not pass skill advance check.");
+		return 0;
+	endif
+	
+	SkillDbgMsg(mobile, "Skill Cap: "+CStr(skill_cap)+"%");
+	SkillDbgMsg(mobile, "Left to cap: "+CStr(limit_left)+" ->"+skill_cap+"-"+true_skill);
+	SkillDbgMsg(mobile, "Multiplier: "+CStr(multiplier));
+	
+	var int_chance := AP_GetStat(mobile, "Intelligence") / 2.0;
+	var task_chance := (100.0 - award_diff) / 2.0;
+	var chance := CInt((int_chance + task_chance) * multiplier);
+
+	SkillDbgMsg(mobile, "INT gives "+CStr(int_chance)+"%");
+	SkillDbgMsg(mobile, "Task gives "+CStr(task_chance)+"%");
+	SkillDbgMsg(mobile, "Multiplier on "+CStr(int_chance+task_chance)+" gives "+CStr(chance));
+	SkillDbgMsg(mobile, "---");
+	
+	var check_roll := RandomInt(100);
+	SkillDbgMsg(mobile, "Check %age: "+CStr(check_roll));
+	if ( check_roll < chance )
+		var advance := 0.1;
+		if ( award_diff > true_skill )
+			advance := CDbl(0.1 * (1.0 + CInt((award_diff - true_skill) / 5.0)));
+		endif
+		if ( advance > limit_left )
+			advance := limit_left;
+		elseif ( advance < 0.1 )
+			advance := 0.1;
+		endif
+		
+		SkillDbgMsg(mobile, "Passed. Advance "+skill_name+": " + CStr(advance));
+		
+		var temp := true_skill+advance;
+		while ( CInt(temp*10.0) == CInt(GetAttributeBaseValue(mobile, skill_name)) )
+			// Kludge for an old core precision bug.
+			// Makes sure it always goes up atleast 0.1.
+			temp := temp+0.1;
+			sleepms(10);
+		endwhile
+		AP_SetTrueSkill(mobile, skill_name, temp);
+		
+		return 1;
+	endif
+	
+	SkillDbgMsg(mobile, "Failed advancement check. No advance.");
+	
+	return 0;
 endfunction
 
-function CheckSkillAdvance(mobile, skill_name, award_difficulty, pass_chance, pass_success)
+/*
+function CheckSkillAdvance(mobile, attribute, award_points)
+	if ( AP_CheckSkillCap(mobile, attribute) )
+		return error{"errortext":="Skill cap for attribute '"+attribute+"' already reached."};
+	elseif ( AP_CheckSkillCap(mobile) )
+		return error{"errortext":="Total skill cap already reached."};
+	endif
+	
+	var skill_amt := AP_GetTrueSkill(mobile, attribute);
+	var free_gain := CDbl(AP_GetSettingsCfgElem("Skills").FreeGainUntil);
+	if ( skill_amt < free_gain )
+		//Increase 0.1 if < free gain
+		AP_SetTrueSkill(mobile, attribute, skill_amt+0.1);
+	endif
+	
+	if(points != 0)
+      		points  := points * ((1000-temp_chance) / 1000);
+    	endif
+    	
 	return 1;
 endfunction
 */
\ No newline at end of file

Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 02:58:41 UTC (rev 301)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 03:31:02 UTC (rev 302)
@@ -25,7 +25,6 @@
 
 var g_skill_debug	:= 0;
 
-
 /*
  * SkillCheck(mobile, attrib_name, difficulty, award_points, advance_flags)
  *
@@ -90,7 +89,7 @@
 	if ( !(advance_flags & ADV_SKILL) )
 		SkillDbgMsg(mobile, "Skill advance disabled.");
 	else
-		//CheckSkillAdvance();
+		CheckSkillAdvance(mobile, attrib_name, award_diff, pass_chance, pass_success);
 	endif
 		
 	if ( !(advance_flags & ADV_STATS) )
@@ -153,29 +152,3 @@
 	
 	return 1;
 endfunction
-
-/*
-
-function CheckSkillAdvance(mobile, attribute, award_points)
-	if ( AP_CheckSkillCap(mobile, attribute) )
-		return error{"errortext":="Skill cap for attribute '"+attribute+"' already reached."};
-	elseif ( AP_CheckSkillCap(mobile) )
-		return error{"errortext":="Total skill cap already reached."};
-	endif
-	
-	var skill_amt := AP_GetTrueSkill(mobile, attribute);
-	var free_gain := CDbl(AP_GetSettingsCfgElem("Skills").FreeGainUntil);
-	if ( skill_amt < free_gain )
-		//Increase 0.1 if < free gain
-		AP_SetTrueSkill(mobile, attribute, skill_amt+0.1);
-	endif
-	
-	if(points != 0)
-      		points  := points * ((1000-temp_chance) / 1000);
-    	endif
-    	
-	return 1;
-endfunction
-		
-//Cdbl(Pow(2.0, Cint(basevalue/100))* 10.24);
-*/



From austin at berlios.de  Thu Sep 29 05:48:07 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 05:48:07 +0200
Subject: [Poldistro-svn] r303 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509290348.j8T3m7Qn015489@sheep.berlios.de>

Author: austin
Date: 2005-09-29 05:48:07 +0200 (Thu, 29 Sep 2005)
New Revision: 303

Modified:
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 03:31:02 UTC (rev 302)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 03:48:07 UTC (rev 303)
@@ -115,11 +115,13 @@
  */
 function CalcSuccessPercent(mobile, attrib_name, difficulty, effective_skill)
 	var settings := AP_GetSettingsCfgElem("Skills");
+	
+	var percent := 0;
 	if ( difficulty == -1 )
 		var max_skill := AP_GetSkillCap(attrib_name);
 		var neg1chance := CDbl(settings.MaxNeg1Chance);
 		
-		return CInt(neg1chance * effective_skill / max_skill);
+		percent := CInt(neg1chance * effective_skill / max_skill);
 	elseif ( (effective_skill + CDbl(settings.TooHard)) < difficulty )
 		SkillDbgMsg(mobile, "Too hard.");
 		return 0;
@@ -127,8 +129,16 @@
 		SkillDbgMsg(mobile, "Too easy.");
 		return 100;
 	else
-		return (50 + ((effective_skill - difficulty) * 2.5));
+		percent := CInt(50.0 + ((effective_skill - difficulty) * 2.5));
 	endif
+	
+	if ( percent < settings.MinChance )
+		percent := settings.MinChance;
+	elseif ( percent > settings.MaxChance )
+		percent := settings.MaxChance;
+	endif
+	
+	return percent;
 endfunction
 
 /*



From austin at berlios.de  Thu Sep 29 05:49:53 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 05:49:53 +0200
Subject: [Poldistro-svn] r304 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509290349.j8T3nrQP015949@sheep.berlios.de>

Author: austin
Date: 2005-09-29 05:49:51 +0200 (Thu, 29 Sep 2005)
New Revision: 304

Modified:
   trunk/096/pkg/systems/attributes/include/advanceCheck.inc
   trunk/096/pkg/systems/attributes/include/attributes.inc
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/advanceCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/advanceCheck.inc	2005-09-29 03:48:07 UTC (rev 303)
+++ trunk/096/pkg/systems/attributes/include/advanceCheck.inc	2005-09-29 03:49:51 UTC (rev 304)
@@ -14,8 +14,6 @@
 use os;
 use util;
 
-include ":attributes:attributes";
-
 //function CheckStatAdvancement(mobile, stat_name)
 //	return 1;
 //endfunction

Modified: trunk/096/pkg/systems/attributes/include/attributes.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-29 03:48:07 UTC (rev 303)
+++ trunk/096/pkg/systems/attributes/include/attributes.inc	2005-09-29 03:49:51 UTC (rev 304)
@@ -19,6 +19,8 @@
 include ":attributes:skills";
 include ":attributes:stats";
 include ":attributes:vitals";
+include ":attributes:skillCheck";
+include ":attributes:advanceCheck";
 include ":datafile:datafile";
 
 /* AP_GetAttributesCfgFile()

Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 03:48:07 UTC (rev 303)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 03:49:51 UTC (rev 304)
@@ -15,9 +15,6 @@
 use util;
 use cfgfile;
 
-include ":attributes:attributes";
-include ":attributes:advanceCheck";
-
 const ADV_SKILL		:= 0x1;
 const ADV_STATS		:= 0x2;
 const ADV_ALL		:= ADV_SKILL+ADV_STATS; // 3



From austin at berlios.de  Thu Sep 29 06:14:30 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 06:14:30 +0200
Subject: [Poldistro-svn] r305 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509290414.j8T4EUKM021079@sheep.berlios.de>

Author: austin
Date: 2005-09-29 06:14:29 +0200 (Thu, 29 Sep 2005)
New Revision: 305

Modified:
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 03:49:51 UTC (rev 304)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 04:14:29 UTC (rev 305)
@@ -119,12 +119,12 @@
 		var neg1chance := CDbl(settings.MaxNeg1Chance);
 		
 		percent := CInt(neg1chance * effective_skill / max_skill);
-	elseif ( (effective_skill + CDbl(settings.TooHard)) < difficulty )
+	elseif ( DifficultyTooHard(effective_skill, difficulty) )
 		SkillDbgMsg(mobile, "Too hard.");
-		return 0;
-	elseif ( (effective_skill + Cdbl(settings.TooEasy)) > difficulty )
+		percent := 0;
+	elseif ( DifficultyTooEasy(effective_skill, difficulty) )
 		SkillDbgMsg(mobile, "Too easy.");
-		return 100;
+		percent := 100;
 	else
 		percent := CInt(50.0 + ((effective_skill - difficulty) * 2.5));
 	endif
@@ -138,6 +138,16 @@
 	return percent;
 endfunction
 
+function DifficultyTooEasy(effective_skill, difficulty)
+	var settings := AP_GetSettingsCfgElem("Skills");
+	return ( (effective_skill + Cdbl(settings.TooEasy)) > difficulty );
+endfunction
+
+function DifficultyTooHard(effective_skill, difficulty)
+	var settings := AP_GetSettingsCfgElem("Skills");
+	return ( (effective_skill + CDbl(settings.TooHard)) < difficulty );
+endfunction
+
 /*
  * SkillDbgMsg(mobile, message)
  *



From austin at berlios.de  Thu Sep 29 06:29:55 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 06:29:55 +0200
Subject: [Poldistro-svn] r306 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509290429.j8T4Tt46025530@sheep.berlios.de>

Author: austin
Date: 2005-09-29 06:29:49 +0200 (Thu, 29 Sep 2005)
New Revision: 306

Modified:
   trunk/096/pkg/systems/attributes/include/advanceCheck.inc
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/advanceCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/advanceCheck.inc	2005-09-29 04:14:29 UTC (rev 305)
+++ trunk/096/pkg/systems/attributes/include/advanceCheck.inc	2005-09-29 04:29:49 UTC (rev 306)
@@ -40,8 +40,7 @@
 			
 	if ( true_skill < CDbl(settings.FreeGainUntil) )
 		SkillDbgMsg(mobile, "Skill is < "+CDbl(settings.FreeGainUntil)+". Allowing for advancement");
-	elseif ( true_skill+Cdbl(settings.TooEasy) > award_diff )
-		// Was it too easy? If so, return.
+	elseif (  DifficultyTooEasy(true_skill, award_diff) )
 		SkillDbgMsg(mobile, "No challenge. No advance. True skill ("+true_skill+"-20) > "+award_diff);
 		return 0;
 	elseif ( adv_check <= pass_chance )

Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 04:14:29 UTC (rev 305)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 04:29:49 UTC (rev 306)
@@ -65,7 +65,7 @@
 	
 	var pass_chance := CalcSuccessPercent(mobile, attrib_name, difficulty, effective_skill);
 	var check_roll := RandomInt(100)+1;
-	var pass_success := CInt(CDbl(pass_chance) - CDbl(check_roll))+1;
+	var pass_success := (pass_chance - check_roll)+1;
 	// Ensure skill- and stat-gain if it's a -1 skillcheck
 	// Do this AFTER the CalcSuccessPercent() call so '-1' isn't messed up
 	if ( difficulty == -1 )
@@ -130,9 +130,9 @@
 	endif
 	
 	if ( percent < settings.MinChance )
-		percent := settings.MinChance;
+		percent := CInt(settings.MinChance);
 	elseif ( percent > settings.MaxChance )
-		percent := settings.MaxChance;
+		percent := CInt(settings.MaxChance);
 	endif
 	
 	return percent;



From muaddiblsd at berlios.de  Thu Sep 29 07:07:44 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Thu, 29 Sep 2005 07:07:44 +0200
Subject: [Poldistro-svn] r307 - in trunk/096/pkg/skills: anatomy detecthidden evalint hiding spiritspeak stealth
Message-ID: <200509290507.j8T57igQ019640@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-29 07:07:29 +0200 (Thu, 29 Sep 2005)
New Revision: 307

Modified:
   trunk/096/pkg/skills/anatomy/anatomy.src
   trunk/096/pkg/skills/anatomy/pkg.cfg
   trunk/096/pkg/skills/detecthidden/detectHidden.src
   trunk/096/pkg/skills/detecthidden/pkg.cfg
   trunk/096/pkg/skills/evalint/evalInt.src
   trunk/096/pkg/skills/evalint/pkg.cfg
   trunk/096/pkg/skills/hiding/hiding.src
   trunk/096/pkg/skills/spiritspeak/spiritSpeak.src
   trunk/096/pkg/skills/stealth/stealth.src
Log:
Few skills updated for the new attribute system.

Modified: trunk/096/pkg/skills/anatomy/anatomy.src
===================================================================
--- trunk/096/pkg/skills/anatomy/anatomy.src	2005-09-29 04:29:49 UTC (rev 306)
+++ trunk/096/pkg/skills/anatomy/anatomy.src	2005-09-29 05:07:29 UTC (rev 307)
@@ -1,170 +1,178 @@
-//
-// Last updated: 26-11-03
-// Revised by Infusion (dcrofts at fastmail.com.au)
+// //$Id$
 
 use uo;
-use unicode;
 
-include "include/attributes";
+include ":attributes:attributeConstants";
+include ":attributes:attributes";
+include ":attributes:skillCheck";
 
-program Anatomy(who)
-  EraseObjProperty(who, "IsMeditating");
-  EraseObjProperty(who, "HealTimer");
-  SendSysMessageUC(who, CAscZ("Whom shall I examine?"), "ENG");
-  var subject := Target(who);
-  // target checks begin here
-  if(!subject)
-    return;
-  elseif(subject.serial == who.serial)
-    PrintTextAbovePrivateUC(who, CAscZ("You know yourself quite well enough already."), "ENG", who);
-    return;
-  elseif(subject.graphic == 0x2006)
-    SendSysMessageUC(who, CAscZ("Looks pretty dead to you."), "ENG");
-    return;
-  elseif(!subject.isA(POLCLASS_MOBILE))
-    SendSysMessageUC(who, CAscZ("That cannot be inspected."), "ENG");
-    return;
-  endif
-  // variables for sys messages
-  var streng := getStreng(GetStrength(subject), subject.graphic, subject.gender);
-  var dext := getDext(GetDexterity(subject), subject.graphic, subject.gender);
-  var endur := getEnd(CInt(CInt(GetStamina(subject))/CDbl(GetMaxStamina(subject))*100));
-  var skill := GetEffectiveSkill(who, SKILLID_ANATOMY);
-  // adjust succeed and fail msgs here
-  var strMsg, strFail;
-  if(subject.graphic != 0x190 && subject.graphic != 0x191)
-    strMsg := "That creature";
-    strFail := "that creature's physical characteristics.";
-  else
-    strMsg := subject.name;
-    if(upper(subject.name[len(subject.name)]) != "S" || lower(subject.name[len(subject.name)]) != "s" ) 
-      strFail := subject.name + "'s physical characteristics.";  
-    else 
-      strFail := subject.name + "' physical characteristics."; 
-    endif
-  endif
-  var pts := CInt(GetEffectiveSkill(who, SKILLID_ANATOMY) + 1) *3;
-  if (pts < 30) 
-    pts := 30;
-  endif
-  if(CheckSkill(who, SKILLID_ANATOMY, -1, pts))
-    PrintTextAbovePrivateUC(subject, CAscZ(strMsg + " looks " + streng + " and " + dext + "."), "ENG", who);
-    // player's anatomy skill equal/greater than 65 can get endurance info
-    if(skill >= 65)
-      PrintTextAbovePrivateUC(subject, CAscZ(strMsg + " is at " + endur + " endurance."), "ENG", who);
-    endif
-  else
-    PrintTextAbovePrivateUC(subject, CAscZ("You can not quite get a sense of " + strFail), "ENG", who);
-  endif
+program skill_Anatomy(who)
+
+	EraseObjProperty(who, "IsMeditating");
+	EraseObjProperty(who, "HealTimer");
+
+	SendSysMessage(who, "Whom shall I examine?");
+	var subject := Target(who);
+	// target checks begin here
+	if(!subject)
+		return 0;
+	elseif(subject.serial == who.serial)
+		PrintTextAbovePrivate(who, "You know yourself quite well enough already.", who);
+		return 0;
+	elseif(subject.graphic == 0x2006)
+		SendSysMessage(who, "Looks pretty dead to you.");
+		return 0;
+	elseif(!subject.isA(POLCLASS_MOBILE))
+		SendSysMessage(who, "That cannot be inspected.");
+		return 0;
+	endif
+
+	// variables for sys messages
+  	var streng := getStreng(AP_GetStat(subject, "Strength"), subject.graphic, subject.gender);
+	var dext := getDext(AP_GetStat(subject, "Dexterity"), subject.graphic, subject.gender);
+	var endur_percentage := CInt(CInt(AP_GetVital(subject, "Stamina"))/CDbl(AP_GetVitalMaximumValue(subject, "Stamina"))*100);
+	var endur := getEnd(endur_percentage);
+
+	// adjust succeed and fail msgs here
+	var strMsg, strFail;
+	if(subject.graphic != 0x190 && subject.graphic != 0x191)
+		strMsg := "That creature";
+		strFail := "that creature's physical characteristics.";
+	else
+		strMsg := subject.name;
+		if(upper(subject.name[len(subject.name)]) != "S" || lower(subject.name[len(subject.name)]) != "s" )
+			strFail := subject.name + "'s physical characteristics.";
+		else
+			strFail := subject.name + "' physical characteristics.";
+		endif
+	endif
+
+	if( SkillCheck(who, ATTRIBUTE_ANATOMY, -1) > 0 )
+		PrintTextAbovePrivate(subject, strMsg + " looks " + streng + " and " + dext + ".", who);
+		// player's anatomy skill equal/greater than 65 can get endurance info
+		var skill := AP_GetSkill(who, ATTRIBUTE_ANATOMY);
+		if(skill >= 65)
+			PrintTextAbovePrivate(subject, strMsg + " is at " + endur + " endurance.", who);
+		endif
+		return 1;
+	else
+		PrintTextAbovePrivate(subject, "You can not quite get a sense of " + strFail, who);
+		return 0;
+	endif
+
 endprogram
 
-// strength
+
 function getStreng(subject, graphic, gender)
-  // fix sys msgs
-  var strSuper, strType, strGender;
-  if(graphic != 0x190 && graphic != 0x191)
-    strSuper := "supernaturally";
-    strType := "creatures";
-    strGender := "it";
-  else
-    strSuper := "superhumanly";
-    strType := "people";
-    if(gender == 0)
-      strGender := "he";
-    elseif(gender == 1)
-      strGender := "she";
-    endif
-  endif
-  if(subject >= 100)
-    return strSuper + " strong";
-  elseif(subject >= 99)
-    return "like one of the strongest " + strType + " you have ever seen";
-  elseif(subject >= 89)
-    return "strong as an ox";
-  elseif(subject >= 79)
-    return "extraordinarily strong";
-  elseif(subject >= 69)
-    return "extremely strong";
-  elseif(subject >= 59)
-    return "very strong";
-  elseif(subject >= 49)
-    return "somewhat strong";
-  elseif(subject >= 39)
-    return "to be of normal strength";
-  elseif(subject >= 29)
-    return "somewhat weak";
-  elseif(subject >= 19)
-    return "rather feeble";
-  else
-    return "like " + strGender + " would have trouble lifting small objects";
-  endif
+
+	var strSuper, strType, strGender;
+	if(graphic != 0x190 && graphic != 0x191)
+		strSuper := "supernaturally";
+		strType := "creatures";
+		strGender := "it";
+	else
+		strSuper := "superhumanly";
+		strType := "people";
+		if(gender == 0)
+			strGender := "he";
+		elseif(gender == 1)
+			strGender := "she";
+		endif
+	endif
+	if(subject >= 100)
+		return strSuper + " strong";
+	elseif(subject >= 99)
+		return "like one of the strongest " + strType + " you have ever seen";
+	elseif(subject >= 89)
+		return "strong as an ox";
+	elseif(subject >= 79)
+		return "extraordinarily strong";
+	elseif(subject >= 69)
+		return "extremely strong";
+	elseif(subject >= 59)
+		return "very strong";
+	elseif(subject >= 49)
+		return "somewhat strong";
+	elseif(subject >= 39)
+		return "to be of normal strength";
+	elseif(subject >= 29)
+		return "somewhat weak";
+	elseif(subject >= 19)
+		return "rather feeble";
+	else
+		return "like " + strGender + " would have trouble lifting small objects";
+	endif
+
 endfunction
 
-// dexterity
+
 function getDext(subject, graphic, gender)
-  // fix sys msgs
-  var strSuper, strType, strGender;
-  if(graphic != 0x190 && graphic != 0x191)
-    strSuper := "supernaturally";
-    strType := "creatures";
-    strGender := "it";
-  else
-    strSuper := "superhumanly";
-    strType := "people";
-    if(gender == 0)
-      strGender := "he";
-    elseif(gender == 1)
-      strGender := "she";
-    endif
-  endif
-  if(subject >= 100)
-    return "also looks " + strSuper + " agile";
-  elseif(subject >= 99)
-    return "like one of the fastest " + strType + " you have ever seen";
-  elseif(subject >= 89)
-    return "moves like quicksilver";
-  elseif(subject >= 79)
-    return "extraordinarily agile";
-  elseif(subject >= 69)
-    return "extremely agile";
-  elseif(subject >= 59)
-    return "very agile";
-  elseif(subject >= 49)
-    return "somewhat agile";
-  elseif(subject >= 39)
-    return "moderately dextrous";
-  elseif(subject >= 29)
-    return "somewhat uncoordinated";
-  elseif(subject >= 19)
-    return "very clumsy";
-  else
-    return "like " + strGender + " can barely manage to stay standing";
-  endif
+
+	var strSuper, strType, strGender;
+	if(graphic != 0x190 && graphic != 0x191)
+		strSuper := "supernaturally";
+		strType := "creatures";
+		strGender := "it";
+	else
+		strSuper := "superhumanly";
+		strType := "people";
+		if(gender == 0)
+			strGender := "he";
+		elseif(gender == 1)
+			strGender := "she";
+		endif
+	endif
+	if(subject >= 100)
+		return "also looks " + strSuper + " agile";
+	elseif(subject >= 99)
+		return "like one of the fastest " + strType + " you have ever seen";
+	elseif(subject >= 89)
+		return "moves like quicksilver";
+	elseif(subject >= 79)
+		return "extraordinarily agile";
+	elseif(subject >= 69)
+		return "extremely agile";
+	elseif(subject >= 59)
+		return "very agile";
+	elseif(subject >= 49)
+		return "somewhat agile";
+	elseif(subject >= 39)
+		return "moderately dextrous";
+	elseif(subject >= 29)
+		return "somewhat uncoordinated";
+	elseif(subject >= 19)
+		return "very clumsy";
+	else
+		return "like " + strGender + " can barely manage to stay standing";
+	endif
+
 endfunction
 
-// endurance
+
 function getEnd(subject)
-  if(subject >= 100)
-    return "one-hundred percent";
-  elseif(subject >= 90)
-    return "ninety percent";
-  elseif(subject >= 80)
-    return "eighty percent";
-  elseif(subject >= 70)
-    return "seventy percent";
-  elseif(subject >= 60)
-    return "sixty percent";
-  elseif(subject >= 50)
-    return "fifty percent";
-  elseif(subject >= 40)
-    return "forty percent";
-  elseif(subject >= 30)
-    return "thirty percent";
-  elseif(subject >= 20)
-    return "twenty percent";
-  elseif(subject >= 10)
-    return "low";
-  else
-    return "very low";
-  endif
+
+	if(subject >= 100)
+		return "one-hundred percent";
+	elseif(subject >= 90)
+		return "ninety percent";
+	elseif(subject >= 80)
+		return "eighty percent";
+	elseif(subject >= 70)
+		return "seventy percent";
+	elseif(subject >= 60)
+		return "sixty percent";
+	elseif(subject >= 50)
+		return "fifty percent";
+	elseif(subject >= 40)
+		return "forty percent";
+	elseif(subject >= 30)
+		return "thirty percent";
+	elseif(subject >= 20)
+		return "twenty percent";
+	elseif(subject >= 10)
+		return "low";
+	else
+		return "very low";
+	endif
+
 endfunction
\ No newline at end of file

Modified: trunk/096/pkg/skills/anatomy/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/anatomy/pkg.cfg	2005-09-29 04:29:49 UTC (rev 306)
+++ trunk/096/pkg/skills/anatomy/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
@@ -1,6 +1,6 @@
 Enabled         1
 Name            anatomy
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.1
 CoreRequired    95

Modified: trunk/096/pkg/skills/detecthidden/detectHidden.src
===================================================================
--- trunk/096/pkg/skills/detecthidden/detectHidden.src	2005-09-29 04:29:49 UTC (rev 306)
+++ trunk/096/pkg/skills/detecthidden/detectHidden.src	2005-09-29 05:07:29 UTC (rev 307)
@@ -26,14 +26,12 @@
 CONST TRAP := "hiddentrap";
 CONST CRITICAL_FAILURE := 1;
 
-var thepoints;
 var item_cfg := ReadConfigFile( ":*:itemdesc" );
 
 program skill_DetectHidden(who)
 
 	EraseObjProperty(who, "IsMeditating");
 	EraseObjProperty(who, "HealTimer");
-	thepoints := AP_GetSkill(who, ATTRIBUTE_DETECTING_HIDDEN) + 10;
 
 	SendSysMessage(who,"Target the location to search.");
 	var targ := TargetCoordinates( who );
@@ -62,9 +60,8 @@
      prop := GetObjProperty(item,"trap_type");
 	 dtct := GetObjProperty(item, "trapped");
      var trapstrength := GetObjProperty(item,"trap_strength");
-     thepoints := trapstrength *2;
 	 if( dtct )
-        if(SkillCheck( who, ATTRIBUTE_DETECTING_HIDDEN, -1, thepoints ))
+        if(SkillCheck( who, ATTRIBUTE_DETECTING_HIDDEN, -1) > 0)
 	      PrintTextAbovePrivate( item, "Trapped", who);
         else
           var results := RandomInt(9) + 1;
@@ -94,7 +91,7 @@
           endif
         endif
       elseif( data == TRAP)
-        if(SkillCheck( who, ATTRIBUTE_DETECTING_HIDDEN, -1, thepoints ))
+        if(SkillCheck( who, ATTRIBUTE_DETECTING_HIDDEN, -1) > 0)
 	      PrintTextAbovePrivate( item, "Trap", who );
           SetObjProperty( item, "trapped", 1 );
         else
@@ -129,7 +126,7 @@
           endif
         endif
      elseif( prop )
-        if(SkillCheck( who, ATTRIBUTE_DETECTING_HIDDEN, -1, thepoints ))
+        if(SkillCheck( who, ATTRIBUTE_DETECTING_HIDDEN, -1) > 0 )
 	      PrintTextAbovePrivate( item, "Trapped", who);
 	      SetObjProperty( item, "trapped", 1 );
         else
@@ -182,7 +179,7 @@
 
 function Found( finder, hider ) //FIXME: should not be 100% certain to find a hider if your skill is greater
   var hide_skill := AP_GetSkill( hider, ATTRIBUTE_HIDING );
-  if (SkillCheck( finder, ATTRIBUTE_DETECTING_HIDDEN, hide_skill, thepoints ) )
+  if (SkillCheck( finder, ATTRIBUTE_DETECTING_HIDDEN, hide_skill) > 0)
     return 1;
   else
     return 0;

Modified: trunk/096/pkg/skills/detecthidden/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/detecthidden/pkg.cfg	2005-09-29 04:29:49 UTC (rev 306)
+++ trunk/096/pkg/skills/detecthidden/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
@@ -1,6 +1,6 @@
 Enabled         1
 Name            detecthidden
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0
 

Modified: trunk/096/pkg/skills/evalint/evalInt.src
===================================================================
--- trunk/096/pkg/skills/evalint/evalInt.src	2005-09-29 04:29:49 UTC (rev 306)
+++ trunk/096/pkg/skills/evalint/evalInt.src	2005-09-29 05:07:29 UTC (rev 307)
@@ -1,127 +1,133 @@
-//
-// Last updated: 26-11-03
-//
+// //$Id$
 
 use uo;
-use unicode;
 
-include "include/attributes";
+include ":attributes:attributeConstants";
+include ":attributes:attributes";
+include ":attributes:skillCheck";
 
-program EvaluatingIntelligence(who)
-  EraseObjProperty(who, "IsMeditating");
-  EraseObjProperty(who, "HealTimer");
-  SendSysMessageUC(who, CAscZ("What do you wish to evaluate?"), "ENG");
-  var subject := Target(who);
-  // target checks begin here
-  if(!subject)
-    return;
-  elseif(subject.serial == who.serial)
-    PrintTextAbovePrivateUC(who, CAscZ("You know your mental capabilities quite well enough already."), "ENG", who);
-    return;
-  elseif(subject.graphic == 0x2006)
-    SendSysMessageUC(who, CAscZ("Looks pretty dead to you."), "ENG");
-    return;
-  elseif(!subject.isA(POLCLASS_MOBILE))
-    SendSysMessageUC(who, CAscZ("That cannot be evaluated."), "ENG");
-    return;
-  endif
-  // variables for sys messages
-  var intell := getIntell(GetIntelligence(subject), subject.graphic, subject.gender);
-  var mentalStreng := getMentalStreng(CInt(CInt(GetMana(subject))/CDbl(GetMaxMana(subject))*100));
-  var skill := GetEffectiveSkill(who, SKILLID_EVALINT);
-  // adjust succeed and fail msgs here
-  var strMsg, strFail;
-  if(subject.graphic != 0x190 && subject.graphic != 0x191)
-    strMsg := "That creature";
-    strFail := "that creature's mental abilities.";
-  else
-    strMsg := subject.name;
-    if(upper(subject.name[len(subject.name)]) != "S" || lower(subject.name[len(subject.name)]) != "s" ) 
-      strFail := subject.name + "'s mental abilities.";  
-    else 
-      strFail := subject.name + "' mental abilities."; 
-    endif
-  endif
-  var pts := CInt(GetEffectiveSkill(who, SKILLID_EVALINT) + 1) *3;
-  if (pts < 30) 
-    pts := 30;
-  endif
-  if(CheckSkill(who, SKILLID_EVALINT, -1, pts))
-    PrintTextAbovePrivateUC(subject, CAscZ(strMsg + " looks " + intell + "." ), "ENG", who);	
-    // player's evalint skill equal/greater than 76 can get mental strength info
-    if(skill >= 76)
-      PrintTextAbovePrivateUC(subject, CAscZ(strMsg + " is at " + mentalStreng + " mental strength."), "ENG", who);
-    endif
-  else
-      PrintTextAbovePrivateUC(subject, CAscZ("You cannot judge " + strFail), "ENG", who);
-    endif
+program skill_EvaluatingIntelligence(who)
+
+	EraseObjProperty(who, "IsMeditating");
+	EraseObjProperty(who, "HealTimer");
+
+	SendSysMessage(who, "What do you wish to evaluate?");
+	var subject := Target(who);
+	// target checks begin here
+	if(!subject)
+		return 0;
+	elseif(subject.serial == who.serial)
+		PrintTextAbovePrivate(who, "You know your mental capabilities quite well enough already.", who);
+		return 0;
+	elseif(subject.graphic == 0x2006)
+		SendSysMessage(who, "Looks pretty dead to you.");
+		return 0;
+	elseif(!subject.isA(POLCLASS_MOBILE))
+		SendSysMessage(who, "That cannot be evaluated.");
+		return 0;
+	endif
+
+	// variables for sys messages
+	var intell := getIntell(AP_GetStat(subject, "Intelligence"), subject.graphic, subject.gender);
+	var mental_percentage := CInt(CInt(AP_GetVital(subject, "Mana"))/CDbl(AP_GetVitalMaximumValue(subject, "Mana"))*100);
+	var mentalStrength := getMentalStrength(mental_percentage);
+
+	// adjust succeed and fail msgs here
+	var strMsg, strFail;
+	if(subject.graphic != 0x190 && subject.graphic != 0x191)
+		strMsg := "That creature";
+		strFail := "that creature's mental abilities.";
+	else
+		strMsg := subject.name;
+		if(upper(subject.name[len(subject.name)]) != "S" || lower(subject.name[len(subject.name)]) != "s" )
+			strFail := subject.name + "'s mental abilities.";
+		else
+			strFail := subject.name + "' mental abilities.";
+		endif
+	endif
+	if(SkillCheck(who, ATTRIBUTE_EVALUATING_INTELLIGENCE, -1) > 0)
+		PrintTextAbovePrivate(subject, strMsg + " looks " + intell + ".", who);
+		// player's evalint skill equal/greater than 76 can get mental strength info
+		var skill := AP_GetSkill(who, ATTRIBUTE_EVALUATING_INTELLIGENCE);
+		if(skill >= 76)
+			PrintTextAbovePrivate(subject, strMsg + " is at " + mentalStrength + " mental strength.", who);
+		endif
+		return 1;
+	else
+		PrintTextAbovePrivate(subject, "You cannot judge " + strFail, who);
+		return 0;
+	endif
+
 endprogram
 
-// intelligence
+
 function getIntell(subject, graphic, gender)
-  // fix sys msgs
-  var strSuper, strGender;
-  if(graphic != 0x190 && graphic != 0x191)
-    strSuper := "supernaturally";
-    strGender := "it";
-  else
-    strSuper := "superhumanly";
-    if(gender == 0)
-      strGender := "he";
-    elseif(gender == 1)
-      strGender := "she";
-    endif
-  endif
-  if(subject >= 100)
-    return strSuper + " intelligent in a manner you cannot comprehend";
-  elseif(subject >= 99)
-    return "like a definite genius";
-  elseif(subject >= 89)
-    return "like a formidable intellect, well beyond even the extraordinary";
-  elseif(subject >= 79)
-    return "extraordinarily intelligent";
-  elseif(subject >= 69)
-    return "extremely intelligent";
-  elseif(subject >= 59)
-    return "very intelligent";
-  elseif(subject >= 49)
-    return "moderately intelligent";
-  elseif(subject >= 39)
-    return "about average";
-  elseif(subject >= 29)
-    return "not the brightest";
-  elseif(subject >= 19)
-    return "fairly stupid";
-  elseif(subject >= 9)
-    return "slightly less intelligent than a rock";
-  else
-    return "smarter than a rock, but dumber than a piece of wood";
-  endif
+
+	var strSuper, strGender;
+	if(graphic != 0x190 && graphic != 0x191)
+		strSuper := "supernaturally";
+		strGender := "it";
+	else
+		strSuper := "superhumanly";
+		if(gender == 0)
+			strGender := "he";
+		elseif(gender == 1)
+			strGender := "she";
+		endif
+	endif
+	if(subject >= 100)
+		return strSuper + " intelligent in a manner you cannot comprehend";
+	elseif(subject >= 99)
+		return "like a definite genius";
+	elseif(subject >= 89)
+		return "like a formidable intellect, well beyond even the extraordinary";
+	elseif(subject >= 79)
+		return "extraordinarily intelligent";
+	elseif(subject >= 69)
+		return "extremely intelligent";
+	elseif(subject >= 59)
+		return "very intelligent";
+	elseif(subject >= 49)
+		return "moderately intelligent";
+	elseif(subject >= 39)
+		return "about average";
+	elseif(subject >= 29)
+		return "not the brightest";
+	elseif(subject >= 19)
+		return "fairly stupid";
+	elseif(subject >= 9)
+		return "slightly less intelligent than a rock";
+	else
+		return "smarter than a rock, but dumber than a piece of wood";
+	endif
+
 endfunction
 
-// mental strength
-function getMentalStreng(subject)
-  if(subject >= 100)
-    return "one-hundred percent";
-  elseif(subject >= 90)
-    return "ninety percent";
-  elseif(subject >= 80)
-    return "eighty percent";
-  elseif(subject >= 70)
-    return "seventy percent";
-  elseif(subject >= 60)
-    return "sixty percent";
-  elseif(subject >= 50)
-    return "fifty percent";
-  elseif(subject >= 40)
-    return "forty percent";
-  elseif(subject >= 30)
-    return "thirty percent";
-  elseif(subject >= 20)
-    return "twenty percent";
-  elseif(subject >= 10)
-    return "low";
-  else
-    return "very low";
-  endif
+
+function getMentalStrength(subject)
+
+	if(subject >= 100)
+		return "one-hundred percent";
+	elseif(subject >= 90)
+		return "ninety percent";
+	elseif(subject >= 80)
+		return "eighty percent";
+	elseif(subject >= 70)
+		return "seventy percent";
+	elseif(subject >= 60)
+		return "sixty percent";
+	elseif(subject >= 50)
+		return "fifty percent";
+	elseif(subject >= 40)
+		return "forty percent";
+	elseif(subject >= 30)
+		return "thirty percent";
+	elseif(subject >= 20)
+		return "twenty percent";
+	elseif(subject >= 10)
+		return "low";
+	else
+		return "very low";
+	endif
+
 endfunction
\ No newline at end of file

Modified: trunk/096/pkg/skills/evalint/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/evalint/pkg.cfg	2005-09-29 04:29:49 UTC (rev 306)
+++ trunk/096/pkg/skills/evalint/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            evalint
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.1

Modified: trunk/096/pkg/skills/hiding/hiding.src
===================================================================
--- trunk/096/pkg/skills/hiding/hiding.src	2005-09-29 04:29:49 UTC (rev 306)
+++ trunk/096/pkg/skills/hiding/hiding.src	2005-09-29 05:07:29 UTC (rev 307)
@@ -21,10 +21,7 @@
 
 	EraseObjProperty(who, "IsMeditating");
 	EraseObjProperty(who, "HealTimer");
-	var thepoints := CInt(AP_GetSkill(who, ATTRIBUTE_HIDING) + 10);
-	if( thepoints < 20 )
-		thepoints := 20;
-	endif
+
 	if( who.warmode )
 		who.SetWarMode(0);
 	endif
@@ -34,11 +31,15 @@
 		PrintTextAbovePrivate(who, "You cannot hide as there are hostiles in view!", who);
 		return 0;
 	endif
-	if( SkillCheck(who, ATTRIBUTE_HIDING, -1, thepoints) > 0 )
+	if( SkillCheck(who, ATTRIBUTE_HIDING, -1) > 0 )
 		who.hidden := 1;
-		PrintTextAbovePrivate(who, "You have hidden yourself well.", who);
+		if( GetObjProperty(who, "#Stealth") != 1)
+			PrintTextAbovePrivate(who, "You have hidden yourself well.", who);
+		endif
 	else
-		PrintTextAbovePrivate(who, "You can't seem to hide here.", who);
+		if( GetObjProperty(who, "#Stealth") != 1)
+			PrintTextAbovePrivate(who, "You can't seem to hide here.", who);
+		endif
 		who.hidden := 0;
 	endif
 

Modified: trunk/096/pkg/skills/spiritspeak/spiritSpeak.src
===================================================================
--- trunk/096/pkg/skills/spiritspeak/spiritSpeak.src	2005-09-29 04:29:49 UTC (rev 306)
+++ trunk/096/pkg/skills/spiritspeak/spiritSpeak.src	2005-09-29 05:07:29 UTC (rev 307)
@@ -42,7 +42,7 @@
 	PlaySoundEffect(who, SFX_SKILL_SPIRITSPEAK);
 
 
-  	if(SkillCheck(who, ATTRIBUTE_SPIRIT_SPEAK, -1,  my_skill) > 0)
+  	if(SkillCheck(who, ATTRIBUTE_SPIRIT_SPEAK, -1) > 0)
 		foreach corpse in ListItemsNearLocationOfType( who.x, who.y, who.z, SS_RANGE, 0x2006 )
 			channelFromCorpse(who, corpse, my_skill);
 		endforeach

Modified: trunk/096/pkg/skills/stealth/stealth.src
===================================================================
--- trunk/096/pkg/skills/stealth/stealth.src	2005-09-29 04:29:49 UTC (rev 306)
+++ trunk/096/pkg/skills/stealth/stealth.src	2005-09-29 05:07:29 UTC (rev 307)
@@ -39,12 +39,14 @@
 	endif
 
 	var my_Skill := AP_GetSkill(who, ATTRIBUTE_STEALTH) / 10;
-	if(SkillCheck(who, ATTRIBUTE_STEALTH, -1, (my_Skill*10)) > 0)
+	if(SkillCheck(who, ATTRIBUTE_STEALTH, -1) > 0)
 		if( !who.hidden )
 			// Used RSTC because it runs the script in critical mode, thus
 			// ensuring the hiding attempt completes before the stealth
 			// script continues.
+			SetObjProperty(who, "#Stealth", 1);
 			Run_Script_To_Completion(":hiding:hiding", who);
+			EraseObjProperty(who, "#Stealth");
 			if ( !who.hidden )
 				SendSysMessage(who, "You must be hidden to stealth.");
 				return 0;



From muaddiblsd at berlios.de  Thu Sep 29 07:27:15 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Thu, 29 Sep 2005 07:27:15 +0200
Subject: [Poldistro-svn] r308 - in trunk/096/pkg/skills: alchemy alchemy/config anatomy/config animallore animallore/config armslore armslore/config begging begging/config blacksmithy blacksmithy/config bowcraft bowcraft/config camping camping/config carpentry carpentry/config cartography cartography/config cooking cooking/config detecthidden/config evalint/config fishing fishing/config forensicevaluation forensicevaluation/config healing healing/config herding herding/config hiding hiding/config inscription inscription/config itemid itemid/config lockpicking lockpicking/config lumberjacking lumberjacking/config magery magery/config meditation meditation/config mining mining/config musicianship musicianship/config poisoning poisoning/config removetrap removetrap/config spiritspeak spiritspeak/config stealing stealing/config stealth stealth/config tailoring tailoring/config taming taming/config tasteid tasteid/config tinkering tinkering/config tracking tracking/config veterinary veterinary/c!
 onfig
Message-ID: <200509290527.j8T5RFv9026503@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-29 07:26:53 +0200 (Thu, 29 Sep 2005)
New Revision: 308

Modified:
   trunk/096/pkg/skills/alchemy/config/icp.cfg
   trunk/096/pkg/skills/alchemy/pkg.cfg
   trunk/096/pkg/skills/anatomy/config/icp.cfg
   trunk/096/pkg/skills/animallore/config/icp.cfg
   trunk/096/pkg/skills/animallore/pkg.cfg
   trunk/096/pkg/skills/armslore/config/icp.cfg
   trunk/096/pkg/skills/armslore/pkg.cfg
   trunk/096/pkg/skills/begging/config/icp.cfg
   trunk/096/pkg/skills/begging/pkg.cfg
   trunk/096/pkg/skills/blacksmithy/config/icp.cfg
   trunk/096/pkg/skills/blacksmithy/pkg.cfg
   trunk/096/pkg/skills/bowcraft/config/icp.cfg
   trunk/096/pkg/skills/bowcraft/pkg.cfg
   trunk/096/pkg/skills/camping/config/icp.cfg
   trunk/096/pkg/skills/camping/pkg.cfg
   trunk/096/pkg/skills/carpentry/config/icp.cfg
   trunk/096/pkg/skills/carpentry/pkg.cfg
   trunk/096/pkg/skills/cartography/config/icp.cfg
   trunk/096/pkg/skills/cartography/pkg.cfg
   trunk/096/pkg/skills/cooking/config/icp.cfg
   trunk/096/pkg/skills/cooking/pkg.cfg
   trunk/096/pkg/skills/detecthidden/config/icp.cfg
   trunk/096/pkg/skills/evalint/config/icp.cfg
   trunk/096/pkg/skills/fishing/config/icp.cfg
   trunk/096/pkg/skills/fishing/pkg.cfg
   trunk/096/pkg/skills/forensicevaluation/config/icp.cfg
   trunk/096/pkg/skills/forensicevaluation/pkg.cfg
   trunk/096/pkg/skills/healing/config/icp.cfg
   trunk/096/pkg/skills/healing/pkg.cfg
   trunk/096/pkg/skills/herding/config/icp.cfg
   trunk/096/pkg/skills/herding/pkg.cfg
   trunk/096/pkg/skills/hiding/config/icp.cfg
   trunk/096/pkg/skills/hiding/pkg.cfg
   trunk/096/pkg/skills/inscription/config/icp.cfg
   trunk/096/pkg/skills/inscription/pkg.cfg
   trunk/096/pkg/skills/itemid/config/icp.cfg
   trunk/096/pkg/skills/itemid/pkg.cfg
   trunk/096/pkg/skills/lockpicking/config/icp.cfg
   trunk/096/pkg/skills/lockpicking/pkg.cfg
   trunk/096/pkg/skills/lumberjacking/config/icp.cfg
   trunk/096/pkg/skills/lumberjacking/pkg.cfg
   trunk/096/pkg/skills/magery/config/icp.cfg
   trunk/096/pkg/skills/magery/pkg.cfg
   trunk/096/pkg/skills/meditation/config/icp.cfg
   trunk/096/pkg/skills/meditation/pkg.cfg
   trunk/096/pkg/skills/mining/config/icp.cfg
   trunk/096/pkg/skills/mining/pkg.cfg
   trunk/096/pkg/skills/musicianship/config/icp.cfg
   trunk/096/pkg/skills/musicianship/pkg.cfg
   trunk/096/pkg/skills/poisoning/config/icp.cfg
   trunk/096/pkg/skills/poisoning/pkg.cfg
   trunk/096/pkg/skills/removetrap/config/icp.cfg
   trunk/096/pkg/skills/removetrap/pkg.cfg
   trunk/096/pkg/skills/spiritspeak/config/icp.cfg
   trunk/096/pkg/skills/spiritspeak/pkg.cfg
   trunk/096/pkg/skills/stealing/config/icp.cfg
   trunk/096/pkg/skills/stealing/pkg.cfg
   trunk/096/pkg/skills/stealth/config/icp.cfg
   trunk/096/pkg/skills/stealth/pkg.cfg
   trunk/096/pkg/skills/tailoring/config/icp.cfg
   trunk/096/pkg/skills/tailoring/pkg.cfg
   trunk/096/pkg/skills/taming/config/icp.cfg
   trunk/096/pkg/skills/taming/pkg.cfg
   trunk/096/pkg/skills/tasteid/config/icp.cfg
   trunk/096/pkg/skills/tasteid/pkg.cfg
   trunk/096/pkg/skills/tinkering/config/icp.cfg
   trunk/096/pkg/skills/tinkering/pkg.cfg
   trunk/096/pkg/skills/tracking/config/icp.cfg
   trunk/096/pkg/skills/tracking/pkg.cfg
   trunk/096/pkg/skills/veterinary/config/icp.cfg
   trunk/096/pkg/skills/veterinary/pkg.cfg
Log:
Updating email for distro at polserver.com

Modified: trunk/096/pkg/skills/alchemy/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/alchemy/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/alchemy/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Alchemy Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/alchemy/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/alchemy/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/alchemy/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            alchemy
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/anatomy/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/anatomy/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/anatomy/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Anatomy Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/animallore/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/animallore/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/animallore/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Animal Lore Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/animallore/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/animallore/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/animallore/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            animallore
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/armslore/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/armslore/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/armslore/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Arms Lore Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/armslore/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/armslore/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/armslore/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            armslore
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/begging/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/begging/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/begging/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Begging Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/begging/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/begging/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/begging/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -3,5 +3,5 @@
 CoreRequired    94
 Enabled         1
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 

Modified: trunk/096/pkg/skills/blacksmithy/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/blacksmithy/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/blacksmithy/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Blacksmithy Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/blacksmithy/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/blacksmithy/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/blacksmithy/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,6 +1,6 @@
 Enabled         1
 Name            blacksmithy
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0
 

Modified: trunk/096/pkg/skills/bowcraft/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/bowcraft/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/bowcraft/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Bowcraft Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/bowcraft/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/bowcraft/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/bowcraft/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            bowcraft
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/camping/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/camping/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/camping/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Camping Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/camping/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/camping/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/camping/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            camping
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/carpentry/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/carpentry/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/carpentry/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Carpentry Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/carpentry/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/carpentry/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/carpentry/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            carpentry
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/cartography/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/cartography/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/cartography/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Cartography Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/cartography/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/cartography/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/cartography/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,6 +1,6 @@
 Enabled         1
 Name            cartography
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0
 

Modified: trunk/096/pkg/skills/cooking/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/cooking/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/cooking/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Cooking Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/cooking/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/cooking/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/cooking/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            cooking
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.1

Modified: trunk/096/pkg/skills/detecthidden/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/detecthidden/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/detecthidden/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Detect Hidden Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/evalint/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/evalint/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/evalint/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Evaluating Intelligence Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/fishing/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/fishing/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/fishing/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Fishing Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/fishing/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/fishing/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/fishing/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            fishing
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0
\ No newline at end of file

Modified: trunk/096/pkg/skills/forensicevaluation/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/forensicevaluation/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/forensicevaluation/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Forensic Evaluation Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/forensicevaluation/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/forensicevaluation/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/forensicevaluation/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            forensicevaluation
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0
\ No newline at end of file

Modified: trunk/096/pkg/skills/healing/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/healing/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/healing/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Healing Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/healing/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/healing/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/healing/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            healing
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0
\ No newline at end of file

Modified: trunk/096/pkg/skills/herding/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/herding/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/herding/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Herding Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/herding/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/herding/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/herding/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            herding
 Maintainer      Distro Team
-E-Mail          pol-distro-support at sourceforge.net
+E-Mail          distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/hiding/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/hiding/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/hiding/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Hiding Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/hiding/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/hiding/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/hiding/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            hiding
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0
\ No newline at end of file

Modified: trunk/096/pkg/skills/inscription/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/inscription/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/inscription/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Inscription Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/inscription/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/inscription/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/inscription/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -2,5 +2,5 @@
 Name            inscription
 Requires        blacksmithy
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.1

Modified: trunk/096/pkg/skills/itemid/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/itemid/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/itemid/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Item ID Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/itemid/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/itemid/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/itemid/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            itemid
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/lockpicking/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/lockpicking/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/lockpicking/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Lockpicking Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/lockpicking/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/lockpicking/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/lockpicking/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,6 +1,6 @@
 Enabled         1
 Name            lockpicking
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0
 

Modified: trunk/096/pkg/skills/lumberjacking/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/lumberjacking/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/lumberjacking/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Lumberjacking Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/lumberjacking/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/lumberjacking/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/lumberjacking/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            lumberjacking
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0
\ No newline at end of file

Modified: trunk/096/pkg/skills/magery/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/magery/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/magery/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Magery Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/magery/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/magery/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/magery/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            magery
 maintainer      Distro Team
-email           pol-distro-support at sourceforge.net
+email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/meditation/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/meditation/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/meditation/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Meditation Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/meditation/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/meditation/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/meditation/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -2,4 +2,4 @@
 Name            meditation
 Version         1.0
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
\ No newline at end of file
+Email           distro at polserver.com
\ No newline at end of file

Modified: trunk/096/pkg/skills/mining/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/mining/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/mining/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Mining Skill and Ore Core
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/mining/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/mining/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/mining/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,6 +1,6 @@
 Enabled         1
 Name            mining
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0
 

Modified: trunk/096/pkg/skills/musicianship/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/musicianship/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/musicianship/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Musicianship, Provocation, Discordance, and Peacemaking Skills
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/musicianship/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/musicianship/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/musicianship/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,6 +1,6 @@
 Enabled         1
 Name            musicianship
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0
 

Modified: trunk/096/pkg/skills/poisoning/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/poisoning/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/poisoning/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Poisoning Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/poisoning/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/poisoning/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/poisoning/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            poisoning
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/removetrap/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/removetrap/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/removetrap/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Remove Trap Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/removetrap/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/removetrap/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/removetrap/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,6 +1,6 @@
 Enabled         1
 Name            removetrap
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0
 

Modified: trunk/096/pkg/skills/spiritspeak/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/spiritspeak/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/spiritspeak/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -8,5 +8,5 @@
         C_Email         muaddib at lostsoulsshard.org
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/spiritspeak/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/spiritspeak/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/spiritspeak/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -2,5 +2,5 @@
 Name            spiritspeak
 Creator		MuadDib
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/stealing/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/stealing/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/stealing/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Stealing Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/stealing/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/stealing/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/stealing/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            stealing
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/stealth/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/stealth/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/stealth/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Stealth Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/stealth/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/stealth/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/stealth/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            stealth
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/tailoring/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/tailoring/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/tailoring/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Tailoring Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/tailoring/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/tailoring/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/tailoring/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,6 +1,6 @@
 Enabled         1
 Name            tailoring
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0
 

Modified: trunk/096/pkg/skills/taming/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/taming/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/taming/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Taming Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/taming/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/taming/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/taming/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            taming
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/tasteid/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/tasteid/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/tasteid/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Taste ID Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/tasteid/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/tasteid/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/tasteid/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            tasteid
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/tinkering/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/tinkering/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/tinkering/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Tinkering Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/tinkering/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/tinkering/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/tinkering/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            tinkering
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/tracking/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/tracking/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/tracking/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Tracking Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/tracking/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/tracking/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/tracking/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            tracking
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0

Modified: trunk/096/pkg/skills/veterinary/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/veterinary/config/icp.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/veterinary/config/icp.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -5,8 +5,8 @@
         Description     Veterinary Skill
 
         Creator         Distro Team
-        C_Email         pol-distro-support at sourceforge.net
+        C_Email         distro at polserver.com
 
         Maintainer      Distro Team
-        M_Email         pol-distro-support at sourceforge.net
+        M_Email         distro at polserver.com
 }

Modified: trunk/096/pkg/skills/veterinary/pkg.cfg
===================================================================
--- trunk/096/pkg/skills/veterinary/pkg.cfg	2005-09-29 05:07:29 UTC (rev 307)
+++ trunk/096/pkg/skills/veterinary/pkg.cfg	2005-09-29 05:26:53 UTC (rev 308)
@@ -1,5 +1,5 @@
 Enabled         1
 Name            veterinary
 Maintainer      Distro Team
-Email           pol-distro-support at sourceforge.net
+Email           distro at polserver.com
 Version         1.0



From austin at berlios.de  Thu Sep 29 23:40:10 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 23:40:10 +0200
Subject: [Poldistro-svn] r309 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509292140.j8TLeAoh009675@sheep.berlios.de>

Author: austin
Date: 2005-09-29 23:40:09 +0200 (Thu, 29 Sep 2005)
New Revision: 309

Modified:
   trunk/096/pkg/systems/attributes/include/advanceCheck.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/advanceCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/advanceCheck.inc	2005-09-29 05:26:53 UTC (rev 308)
+++ trunk/096/pkg/systems/attributes/include/advanceCheck.inc	2005-09-29 21:40:09 UTC (rev 309)
@@ -14,10 +14,40 @@
 use os;
 use util;
 
-//function CheckStatAdvancement(mobile, stat_name)
-//	return 1;
-//endfunction
+function CheckStatsForSkill(mobile, skill_name)
+	var settings := AP_GetSettingsCfgElem("Stats");
+	
+	var next_check := CInt(GetObjProperty(mobile, "#LastStatGain"))+CInt(settings.GainWait);
+	if ( next_check > ReadGameClock() )
+		SkillDbgMsg(mobile, "Stat advance-wait timer has not yet expired.");
+		return 0;
+	endif
+	
+	var stat_mult := settings.GainSpeed;
+	foreach stat_entry in (AP_GetSkillStats(skill_name))
+		var stat_name := _stat_entry_iter;
+		var check_chance := stat_entry[1];
+		var stat_mult := RandomDiceRoll(stat_entry[2]);
+		
+		var roll := RandomInt(100)+1;
+		
+		if ( roll <= check_chance )
+			SkillDbgMsg(mobile, "("+roll+" < "+check_chance+"%) Checking stat "+stat_name);
+			CheckStatAdvancement(mobile, stat_name, stat_mult);
+		else
+			SkillDbgMsg(mobile, "("+roll+" > "+check_chance+"%) skipping stat check for "+stat_name);
+		endif
+		sleepms(10);
+	endforeach
+	
+	return 1;
+endfunction
 
+
+function CheckStatAdvancement(mobile, stat_name, stat_mult)
+		
+endfunction
+
 function CheckSkillAdvance(mobile, skill_name, award_diff, pass_chance, pass_success)
 	if ( pass_success < 0 )
 		SkillDbgMsg(mobile, "No skill advancement - skill check was not successful.");
@@ -94,26 +124,3 @@
 	
 	return 0;
 endfunction
-
-/*
-function CheckSkillAdvance(mobile, attribute, award_points)
-	if ( AP_CheckSkillCap(mobile, attribute) )
-		return error{"errortext":="Skill cap for attribute '"+attribute+"' already reached."};
-	elseif ( AP_CheckSkillCap(mobile) )
-		return error{"errortext":="Total skill cap already reached."};
-	endif
-	
-	var skill_amt := AP_GetTrueSkill(mobile, attribute);
-	var free_gain := CDbl(AP_GetSettingsCfgElem("Skills").FreeGainUntil);
-	if ( skill_amt < free_gain )
-		//Increase 0.1 if < free gain
-		AP_SetTrueSkill(mobile, attribute, skill_amt+0.1);
-	endif
-	
-	if(points != 0)
-      		points  := points * ((1000-temp_chance) / 1000);
-    	endif
-    	
-	return 1;
-endfunction
-*/
\ No newline at end of file



From austin at berlios.de  Thu Sep 29 23:57:50 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Thu, 29 Sep 2005 23:57:50 +0200
Subject: [Poldistro-svn] r310 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509292157.j8TLvoPp010634@sheep.berlios.de>

Author: austin
Date: 2005-09-29 23:57:49 +0200 (Thu, 29 Sep 2005)
New Revision: 310

Modified:
   trunk/096/pkg/systems/attributes/include/advanceCheck.inc
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
   trunk/096/pkg/systems/attributes/include/stats.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/advanceCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/advanceCheck.inc	2005-09-29 21:40:09 UTC (rev 309)
+++ trunk/096/pkg/systems/attributes/include/advanceCheck.inc	2005-09-29 21:57:49 UTC (rev 310)
@@ -23,11 +23,10 @@
 		return 0;
 	endif
 	
-	var stat_mult := settings.GainSpeed;
 	foreach stat_entry in (AP_GetSkillStats(skill_name))
 		var stat_name := _stat_entry_iter;
 		var check_chance := stat_entry[1];
-		var stat_mult := RandomDiceRoll(stat_entry[2]);
+		var stat_mult := CDbl(RandomDiceRoll(stat_entry[2]));
 		
 		var roll := RandomInt(100)+1;
 		
@@ -37,6 +36,7 @@
 		else
 			SkillDbgMsg(mobile, "("+roll+" > "+check_chance+"%) skipping stat check for "+stat_name);
 		endif
+		
 		sleepms(10);
 	endforeach
 	
@@ -45,7 +45,58 @@
 
 
 function CheckStatAdvancement(mobile, stat_name, stat_mult)
+	if ( AP_CheckStatCap(mobile, stat_name) )
+		SkillDbgMsg(mobile, "Stat cap for stat '"+stat_name+"' reached. No advance." );
+		return 0;
+	elseif ( AP_CheckStatCap(mobile) )
+		SkillDbgMsg(mobile, "Total stat cap reached. No advance." );
+		return 0;
+	endif
+	
+	var settings := AP_GetSettingsCfgElem("Stats");
+	var stat_cap := AP_GetStatCap(stat_name);
+	var stat_value := AP_GetTrueStat(mobile, stat_name);
+	var stat_left := stat_cap - stat_value; // Points until it is capped
+	stat_mult := stat_mult * CDbl(settings.GainSpeed);
+	
+	SkillDbgMsg(mobile, "Stat Cap: "+stat_cap);
+	SkillDbgMsg(mobile, "Stat Current: "+stat_value);
+	SkillDbgMsg(mobile, "Left to cap: "+stat_left+" ->"+stat_cap+"-"+stat_value);
+	
+	var chance := ((stat_left * stat_mult) / (stat_cap / 2));
+	if ( chance < 1.0 )
+		chance := 1.0;
+	endif
+	SkillDbgMsg(mobile, "Chance: "+chance);
+	SkillDbgMsg(mobile, "---");
+	var random := RandomFloat(100.0);
+	SkillDbgMsg(mobile, "Check %age: "+random);
+	
+	if ( random < chance )
+		var advance := CDbl(0.1 + (0.1 * CDbl(CInt(chance / 12.5))));
+		if ( advance > stat_left )
+			advance := stat_left;
+		elseif ( advance < 0.1 )
+			advance := 0.1;
+		endif
+
+		var temp := stat_value+advance;
+		while ( CInt(temp*10.0) == CInt(GetAttributeBaseValue(mobile, stat_name)) )
+			// Kludge for an old core precision bug.
+			// Makes sure it always goes up atleast 0.1.
+			temp := temp+0.1;
+			sleepms(10);
+		endwhile	
+
+		SkillDbgMsg(mobile, "Passed. Advance "+stat_name+": " + CStr(advance));
+		AP_SetTrueStat(mobile, stat_name, temp);
+		SetObjProperty(mobile, "#LastStatGain", ReadGameClock());
 		
+		return 1;
+	endif
+	
+	SkillDbgMsg(mobile, "Failed. No advance.");
+	return 0;
 endfunction
 
 function CheckSkillAdvance(mobile, skill_name, award_diff, pass_chance, pass_success)
@@ -74,27 +125,27 @@
 		SkillDbgMsg(mobile, "No challenge. No advance. True skill ("+true_skill+"-20) > "+award_diff);
 		return 0;
 	elseif ( adv_check <= pass_chance )
-		SkillDbgMsg(mobile, "Passed advance check: +"+CStr(pass_chance - adv_check)+"%");
+		SkillDbgMsg(mobile, "Passed advance check: +"+(pass_chance - adv_check)+"%");
 	else
 		SkillDbgMsg(mobile, "Did not pass skill advance check.");
 		return 0;
 	endif
 	
-	SkillDbgMsg(mobile, "Skill Cap: "+CStr(skill_cap)+"%");
-	SkillDbgMsg(mobile, "Left to cap: "+CStr(limit_left)+" ->"+skill_cap+"-"+true_skill);
-	SkillDbgMsg(mobile, "Multiplier: "+CStr(multiplier));
+	SkillDbgMsg(mobile, "Skill Cap: "+skill_cap+"%");
+	SkillDbgMsg(mobile, "Left to cap: "+limit_left+" ->"+skill_cap+"-"+true_skill);
+	SkillDbgMsg(mobile, "Multiplier: "+multiplier);
 	
 	var int_chance := AP_GetStat(mobile, "Intelligence") / 2.0;
 	var task_chance := (100.0 - award_diff) / 2.0;
 	var chance := CInt((int_chance + task_chance) * multiplier);
 
-	SkillDbgMsg(mobile, "INT gives "+CStr(int_chance)+"%");
-	SkillDbgMsg(mobile, "Task gives "+CStr(task_chance)+"%");
-	SkillDbgMsg(mobile, "Multiplier on "+CStr(int_chance+task_chance)+" gives "+CStr(chance));
+	SkillDbgMsg(mobile, "INT gives "+int_chance+"%");
+	SkillDbgMsg(mobile, "Task gives "+task_chance+"%");
+	SkillDbgMsg(mobile, "Multiplier on "+(int_chance+task_chance)+" gives "+chance);
 	SkillDbgMsg(mobile, "---");
 	
 	var check_roll := RandomInt(100);
-	SkillDbgMsg(mobile, "Check %age: "+CStr(check_roll));
+	SkillDbgMsg(mobile, "Check %age: "+check_roll);
 	if ( check_roll < chance )
 		var advance := 0.1;
 		if ( award_diff > true_skill )
@@ -106,7 +157,7 @@
 			advance := 0.1;
 		endif
 		
-		SkillDbgMsg(mobile, "Passed. Advance "+skill_name+": " + CStr(advance));
+		SkillDbgMsg(mobile, "Passed. Advance "+skill_name+": " + advance);
 		
 		var temp := true_skill+advance;
 		while ( CInt(temp*10.0) == CInt(GetAttributeBaseValue(mobile, skill_name)) )

Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 21:40:09 UTC (rev 309)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 21:57:49 UTC (rev 310)
@@ -76,11 +76,11 @@
 	endif
 	
 	SkillDbgMsg(mobile, "--");
-	SkillDbgMsg(mobile, "Difficulty: "+CStr(difficulty)+"% (Award: "+CStr(award_diff)+")");
-	SkillDbgMsg(mobile, "Effective Skill: "+CStr(effective_skill)+"%");
-	SkillDbgMsg(mobile, "Success Chance: "+CStr(pass_chance)+"%");
-	SkillDbgMsg(mobile, "Check Roll: "+CStr(check_roll));
-	SkillDbgMsg(mobile, "Success: "+CStr(pass_success));
+	SkillDbgMsg(mobile, "Difficulty: "+difficulty+"% (Award: "+award_diff+")");
+	SkillDbgMsg(mobile, "Effective Skill: "+effective_skill+"%");
+	SkillDbgMsg(mobile, "Success Chance: "+pass_chance+"%");
+	SkillDbgMsg(mobile, "Check Roll: "+check_roll);
+	SkillDbgMsg(mobile, "Success: "+pass_success);
 	SkillDbgMsg(mobile, "---");
 	
 	if ( !(advance_flags & ADV_SKILL) )

Modified: trunk/096/pkg/systems/attributes/include/stats.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-29 21:40:09 UTC (rev 309)
+++ trunk/096/pkg/systems/attributes/include/stats.inc	2005-09-29 21:57:49 UTC (rev 310)
@@ -107,6 +107,28 @@
 endfunction
 
 /*
+ * AP_GetStatCap(stat_name)
+ *
+ * Purpose
+ * Gets the number a stat caps at.
+ *
+ * Parameters
+ * stat_name: Name of the stat to check
+ *
+ * Return value
+ * Returns a number or error
+ *
+ */
+function AP_GetStatCap(skill_name)
+	var cfg_elem := AP_GetSettingsCfgElem("Stats");
+	
+	// Check if there is a cap for that particular skill.
+	var cap_val := GetConfigReal(cfg_elem, skill_name);
+		
+	return cap_val;
+endfunction
+
+/*
  * AP_CheckStatCap(mobile, stat_name)
  *
  * Purpose
@@ -125,7 +147,7 @@
 	var cfg_elem := AP_GetSettingsCfgElem("Stats");
 	
 	if ( stat_name )
-		var cap := GetConfigReal(cfg_elem, stat_name);
+		var cap := AP_GetStatCap(stat_name);
 		return ( AP_GetTrueStat(mobile, stat_name) >= cap );
 	else
 		var total := 0.0;



From austin at berlios.de  Fri Sep 30 00:09:23 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 00:09:23 +0200
Subject: [Poldistro-svn] r311 - trunk/096/pkg/systems/attributes/include
Message-ID: <200509292209.j8TM9NjL011842@sheep.berlios.de>

Author: austin
Date: 2005-09-30 00:09:23 +0200 (Fri, 30 Sep 2005)
New Revision: 311

Modified:
   trunk/096/pkg/systems/attributes/include/advanceCheck.inc
   trunk/096/pkg/systems/attributes/include/skillCheck.inc
Log:


Modified: trunk/096/pkg/systems/attributes/include/advanceCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/advanceCheck.inc	2005-09-29 21:57:49 UTC (rev 310)
+++ trunk/096/pkg/systems/attributes/include/advanceCheck.inc	2005-09-29 22:09:23 UTC (rev 311)
@@ -14,6 +14,20 @@
 use os;
 use util;
 
+/*
+ * CheckStatsForSkill(mobile, skill_name)
+ *
+ * Purpose
+ * Performs a stat check on all stats that are listed within a skill's attributes.cfg elem.
+ *
+ * Parameters
+ * mobile:	Mobile to do the stat checks on.
+ * skill_name:	Skill to get the stat advance list from.
+ *
+ * Return value
+ * Returns 1
+ *
+ */
 function CheckStatsForSkill(mobile, skill_name)
 	var settings := AP_GetSettingsCfgElem("Stats");
 	
@@ -43,7 +57,22 @@
 	return 1;
 endfunction
 
-
+/*
+ * CheckStatAdvancement(mobile, stat_name, stat_mult)
+ *
+ * Purpose
+ * Does an advancement check on a stat.
+ *
+ * Parameters
+ * mobile:	Mobile to do the stat advancement check on.
+ * stat_name:	Name of the stat to do the advancement check on.
+ * stat_mult:	Multiplier to effect the chance of a gain. 
+ *		(rolled dice from an attributes.cfg StatCheck entry)
+ *
+ * Return value
+ * Returns 1
+ *
+ */
 function CheckStatAdvancement(mobile, stat_name, stat_mult)
 	if ( AP_CheckStatCap(mobile, stat_name) )
 		SkillDbgMsg(mobile, "Stat cap for stat '"+stat_name+"' reached. No advance." );
@@ -99,11 +128,25 @@
 	return 0;
 endfunction
 
-function CheckSkillAdvance(mobile, skill_name, award_diff, pass_chance, pass_success)
-	if ( pass_success < 0 )
-		SkillDbgMsg(mobile, "No skill advancement - skill check was not successful.");
-		return 0;
-	elseif ( AP_CheckSkillCap(mobile, skill_name) )
+/*
+ * CheckSkillAdvance(mobile, stat_name, stat_mult)
+ *
+ * Purpose
+ * Does an advancement check on a stat.
+ *
+ * Parameters
+ * mobile:	Mobile to do the skill advancement check on.
+ * skill_name:	Name of the skill to check.
+ * award_diff:	Difficulty to use for advancement award.
+ * pass_chance:	Chance of getting a gain check.
+ * 
+ *
+ * Return value
+ * Returns 1
+ *
+ */
+function CheckSkillAdvance(mobile, skill_name, award_diff, pass_chance)
+	if ( AP_CheckSkillCap(mobile, skill_name) )
 		SkillDbgMsg(mobile, "Skill cap for attribute '"+skill_name+"' already reached.");
 		return 0;
 	elseif ( AP_CheckSkillCap(mobile) )

Modified: trunk/096/pkg/systems/attributes/include/skillCheck.inc
===================================================================
--- trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 21:57:49 UTC (rev 310)
+++ trunk/096/pkg/systems/attributes/include/skillCheck.inc	2005-09-29 22:09:23 UTC (rev 311)
@@ -86,7 +86,7 @@
 	if ( !(advance_flags & ADV_SKILL) )
 		SkillDbgMsg(mobile, "Skill advance disabled.");
 	else
-		CheckSkillAdvance(mobile, attrib_name, award_diff, pass_chance, pass_success);
+		CheckSkillAdvance(mobile, attrib_name, award_diff, pass_chance);
 	endif
 		
 	if ( !(advance_flags & ADV_STATS) )



From austin at berlios.de  Fri Sep 30 00:41:17 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 00:41:17 +0200
Subject: [Poldistro-svn] r312 - trunk/096/pkg/items/sysbook
Message-ID: <200509292241.j8TMfHXh028937@sheep.berlios.de>

Author: austin
Date: 2005-09-30 00:41:15 +0200 (Fri, 30 Sep 2005)
New Revision: 312

Removed:
   trunk/096/pkg/items/sysbook/command/
   trunk/096/pkg/items/sysbook/itemdesc.cfg
   trunk/096/pkg/items/sysbook/openBook.src
   trunk/096/pkg/items/sysbook/pkg.cfg
   trunk/096/pkg/items/sysbook/readOnly.src
   trunk/096/pkg/items/sysbook/shelfStock.src
   trunk/096/pkg/items/sysbook/start.src
   trunk/096/pkg/items/sysbook/writable.src
   trunk/096/pkg/items/sysbook/zulubooks.cfg
Log:
backed up old stuff - will rewrite package.

Deleted: trunk/096/pkg/items/sysbook/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/sysbook/itemdesc.cfg	2005-09-29 22:09:23 UTC (rev 311)
+++ trunk/096/pkg/items/sysbook/itemdesc.cfg	2005-09-29 22:41:15 UTC (rev 312)
@@ -1,629 +0,0 @@
-# //$Id$
-
-Item 0xfef
-{
-    ObjtypeName     book1
-    Graphic         0xff0
-    Script          openBook
-    MethodScript    writable
-    cprop           maxpages i32
-    VendorSellsFor  10
-    VendorBuysFor   5
-    weight          1
-    RequiresAttention 1
-}
-Item 0xff0
-{
-    Graphic         0x0ff1
-    ObjtypeName     book2
-    Script          openBook
-    MethodScript    writable
-    cprop           maxpages i32
-    VendorSellsFor  10
-    VendorBuysFor   5
-    weight          1
-    RequiresAttention 1
-}
-Item 0xff1
-{
-    Graphic         0x0ff2
-    ObjtypeName     book3
-    Script          openBook
-    MethodScript    writable
-    cprop           maxpages i32
-    VendorSellsFor  10
-    VendorBuysFor   5
-    weight          1
-    RequiresAttention 1
-}
-Item 0xff2
-{
-    Graphic         0x0ff2
-    ObjtypeName     book4
-    Script          openBook
-    MethodScript    writable
-    cprop           maxpages i32
-    VendorSellsFor  20
-    VendorBuysFor   9
-    weight          1
-    RequiresAttention 1
-}
-
-Item 0x7901
-{
-    ObjtypeName textbook1
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i1
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-//  OldObjtype 0x7021
-    RequiresAttention 1
-}
-Item 0x7902
-{
-    ObjtypeName textbook2
-    Graphic 0xff0
-    Newbie 1
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i2
-    VendorSellsFor 6
-    VendorBuysFor 3
-    RequiresAttention 1
-}
-Item 0x7903
-{
-    ObjtypeName textbook3
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i3
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7904
-{
-    ObjtypeName textbook4
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i4
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7905
-{
-    ObjtypeName textbook5
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i5
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7906
-{
-    ObjtypeName textbook6
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i6
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7907
-{
-    ObjtypeName textbook7
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i7
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7908
-{
-    ObjtypeName textbook8
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i8
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7909
-{
-    ObjtypeName textbook9
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i9
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x790a
-{
-    ObjtypeName textbook10
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i10
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x790b
-{
-    ObjtypeName textbook11
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i11
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x790c
-{
-    ObjtypeName textbook12
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i12
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x790d
-{
-    ObjtypeName textbook13
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i13
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x790e
-{
-    ObjtypeName textbook14
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i14
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x790f
-{
-    ObjtypeName textbook15
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i15
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7910
-{
-    ObjtypeName textbook16
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i16
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7911
-{
-    ObjtypeName textbook17
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i17
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7912
-{
-    ObjtypeName textbook18
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i18
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7913
-{
-    ObjtypeName textbook19
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i19
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7914
-{
-    ObjtypeName textbook20
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i20
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7915
-{
-    ObjtypeName textbook21
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i21
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7916
-{
-    ObjtypeName textbook22
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i22
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7917
-{
-    ObjtypeName textbook23
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i23
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7918
-{
-    ObjtypeName textbook24
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i24
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7919
-{
-    ObjtypeName textbook25
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i25
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x791A
-{
-    ObjtypeName textbook26
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i26
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x791B
-{
-    ObjtypeName textbook27
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i27
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x791C
-{
-    ObjtypeName textbook28
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i28
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x791D
-{
-    ObjtypeName textbook29
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i29
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x791E
-{
-    ObjtypeName textbook30
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i30
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x791F
-{
-    ObjtypeName textbook31
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i31
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7920
-{
-    ObjtypeName textbook32
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i32
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7921
-{
-    ObjtypeName textbook33
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i33
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7922
-{
-    ObjtypeName textbook34
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i34
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7923
-{
-    ObjtypeName textbook35
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i35
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7924
-{
-    ObjtypeName textbook36
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i36
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7925
-{
-    ObjtypeName textbook37
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i37
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7926
-{
-    ObjtypeName textbook38
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i38
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7927
-{
-    ObjtypeName textbook39
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i39
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7928
-{
-    ObjtypeName textbook40
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i40
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x7929
-{
-    ObjtypeName textbook41
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i41
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x792A
-{
-    ObjtypeName textbook42
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i42
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x792B
-{
-    ObjtypeName textbook43
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i43
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x792C
-{
-    ObjtypeName textbook44
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i44
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x792D
-{
-    ObjtypeName textbook45
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i45
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0x792E
-{
-    ObjtypeName textbook46
-    Graphic 0xff0
-    Script openBook
-    MethodScript readOnly
-    cprop bookid i46
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-
-Item 0xff3
-{
-    Graphic 0x0ff3
-    ObjtypeName smallopenbook
-    Script openBook
-    MethodScript writable
-    cprop maxpages i16
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
-Item 0xff4
-{
-    Graphic 0x0ff4
-    ObjtypeName bigopenbook
-    Script openBook
-    MethodScript writable
-    cprop maxpages i16
-    VendorSellsFor 20
-    VendorBuysFor 6
-    weight 1/2
-    RequiresAttention 1
-}
\ No newline at end of file

Deleted: trunk/096/pkg/items/sysbook/openBook.src
===================================================================
--- trunk/096/pkg/items/sysbook/openBook.src	2005-09-29 22:09:23 UTC (rev 311)
+++ trunk/096/pkg/items/sysbook/openBook.src	2005-09-29 22:41:15 UTC (rev 312)
@@ -1,5 +0,0 @@
-use uo;
-
-program openbook(chr,book)
-  /*var res :=*/ SendOpenBook( chr, book );
-endprogram

Deleted: trunk/096/pkg/items/sysbook/pkg.cfg
===================================================================
--- trunk/096/pkg/items/sysbook/pkg.cfg	2005-09-29 22:09:23 UTC (rev 311)
+++ trunk/096/pkg/items/sysbook/pkg.cfg	2005-09-29 22:41:15 UTC (rev 312)
@@ -1,5 +0,0 @@
-Name sysbook
-Enabled 1
-Maintainer Distro Team
-Email pol-distro-support at sourceforge.net
-Version 1.0

Deleted: trunk/096/pkg/items/sysbook/readOnly.src
===================================================================
--- trunk/096/pkg/items/sysbook/readOnly.src	2005-09-29 22:09:23 UTC (rev 311)
+++ trunk/096/pkg/items/sysbook/readOnly.src	2005-09-29 22:41:15 UTC (rev 312)
@@ -1,45 +0,0 @@
-use datafile;
-
-function GetBookElem(book)
-  var bookid := book.getprop("bookid");
-  var df := OpenDataFile("staticbooks");
-  return df.FindElement(bookid);
-endfunction
-
-exported function IsWritable(book)
-  book := book; // stops ecompile "not used" warning
-  return 0;
-endfunction
-
-exported function GetNumLines(book)
-  return GetBookElem(book).getprop("contents").size();
-endfunction
-
-exported function GetTitle(book)
-  return GetBookElem(book).getprop("title");
-endfunction
-
-exported function GetAuthor(book)
-  return GetBookElem(book).getprop("author");
-endfunction
-
-exported function GetLine(book, line)
-  var contents := GetBookElem(book).getprop("contents");
-  if(contents == error)
-    contents := array;
-  endif
-  if(line <= contents.size())
-    var text := contents[line];
-    if(text)
-      return text;
-    else
-      return "";
-    endif
-  else
-    return "";
-  endif
-endfunction
-
-program BookInterface()
-  return 1;
-endprogram
\ No newline at end of file

Deleted: trunk/096/pkg/items/sysbook/shelfStock.src
===================================================================
--- trunk/096/pkg/items/sysbook/shelfStock.src	2005-09-29 22:09:23 UTC (rev 311)
+++ trunk/096/pkg/items/sysbook/shelfStock.src	2005-09-29 22:41:15 UTC (rev 312)
@@ -1,90 +0,0 @@
-use uo;
-use os;
-use util;
-use datafile;
-
-program shelfstock();
-  var globalshelves;
-  var shelf;
-  sleep(300);
-  var newarray;
-  while(1)
-    newarray := {};
-    if(!GetGlobalProperty("BookSpawnPause"))
-      globalshelves := GetGlobalProperty("shelves");
-      foreach thing in globalshelves
-        shelf := SystemFindObjectBySerial(thing);
-        if(shelf)
-          newarray.append(thing);
-          addbooks(shelf);
-        endif
-        sleep(10);
-      endforeach
-      SetGlobalProperty("shelves", newarray);
-      sleep(3600);
-    else
-      print("Book Spawner is Paused.");
-      print("To unpause book spawner erase global property:");
-      print("BookSpawnPause");
-      sleep(60);
-    endif
-  endwhile
-endprogram
-
-function addbooks(bookcase)
-  var count := 0;
-  var books := EnumerateItemsInContainer(bookcase);
-  var max := GetObjProperty(bookcase, "MaxBooks");
-  if((!max) or (max > 7))
-    max := RandomDiceRoll("1d5+2");
-    SetObjProperty(bookcase, "MaxBooks", max);
-  endif
-  if(books.size()!= 0)
-    foreach book in books
-     if(book.objtype == 0xfef)
-        count := count + 1;
-      endif
-    endforeach
-  endif
-  while(count < max)
-    if((RandomInt(5) + 1) > 3)
-      SpecialBook(bookcase);
-    else
-      CreateItemInContainer(bookcase, 0xfef, 1);
-    endif
-    count := count + 1;
-  endwhile
-endfunction
-
-function SpecialBook(bookcase)
-  var book := CreateItemInContainer(bookcase, 0xfef, 1);
-  case(RandomInt(4)+1)
-    1: book.graphic := 4079;
-    2: book.graphic := 4080;
-    3: book.graphic := 4081;
-    4: book.graphic := 4082;
-  endcase
-  var rint := CInt(RandomInt(30) + 1);
-  var title := GetTitle(rint);
-  book.setprop("contents", GetContents(rint));
-  book.setprop("title",    title);
-  book.setprop("author",   GetAuthor(rint));
-  book.name := title;
-endfunction
-
-function GetBookElem(bookid)
-  var df := OpenDataFile("staticbooks");
-  return df.FindElement(bookid);
-endfunction
-
-function GetContents(rint)
-  return GetBookElem(rint).getprop("contents");
-endfunction
-
-function GetTitle(rint)
-  return GetBookElem(rint).getprop("title");
-endfunction
-
-function GetAuthor(rint)
-  return GetBookElem(rint).getprop("author");
-endfunction
\ No newline at end of file

Deleted: trunk/096/pkg/items/sysbook/start.src
===================================================================
--- trunk/096/pkg/items/sysbook/start.src	2005-09-29 22:09:23 UTC (rev 311)
+++ trunk/096/pkg/items/sysbook/start.src	2005-09-29 22:41:15 UTC (rev 312)
@@ -1,46 +0,0 @@
-use datafile;
-use cfgfile;
-use os;
-use uo;
-
-function BookExists(df, bookid)
-  return(df.FindElement(bookid) != error);
-endfunction
-
-function CreateBook(df, bookid, title, author, contents)
-  var elem := df.CreateElement(bookid);
-  elem.SetProp("author", author);
-  elem.SetProp("title", title);
-  elem.SetProp("contents", contents);
-endfunction
-
-program InitBookDatastore()
-  var i,j,pages,entry,title,author,counter,bookstr;
-  var books:= ReadConfigFile("zulubooks");
-  var thebooks:=GetConfigStringKeys(books);
-  var df := CreateDataFile("staticbooks", DF_KEYTYPE_INTEGER);
-  foreach bookitem in thebooks
-    bookitem:=CInt(bookitem);
-    if(!BookExists(df,bookitem))
-      counter:=1;
-      bookstr:={};
-      pages:=CInt(books[bookitem].pages);
-      title:=(books[bookitem].title);
-      author:=(books[bookitem].author);
-      for(i:=1;i<=pages;i:=i+1)
-        for(j:=1;j<=8;j:=j+1)
-          entry:=GetConfigString(books[bookitem], "p"+i+"l"+j);
-          if(!entry.errortext)
-            bookstr[counter]:=entry;
-          else
-            bookstr[counter]:=" ";
-          endif
-          counter:=counter+1;
-        endfor
-      endfor
-      CreateBook(df,bookitem,title,author,bookstr);
-    endif
-  endforeach
-  UnloadConfigFile("zulubooks");
-  start_script("shelfStock");
-endprogram
\ No newline at end of file

Deleted: trunk/096/pkg/items/sysbook/writable.src
===================================================================
--- trunk/096/pkg/items/sysbook/writable.src	2005-09-29 22:09:23 UTC (rev 311)
+++ trunk/096/pkg/items/sysbook/writable.src	2005-09-29 22:41:15 UTC (rev 312)
@@ -1,106 +0,0 @@
-use uo;
-use os;
-
-exported function IsWritable(book)
-  if(GetObjProperty(book, "NoWrite") || (book.movable == 0) || ((book.container).objtype == 0x0a9f))
-    return 0;
-  else
-    if(book.movable == 0)
-      return 0;
-    endif
-    return 1;
-  endif
-endfunction
-
-exported function GetNumLines(book)
-  return book.getprop("maxpages") * 8;
-endfunction
-
-exported function GetTitle(book)
-  var res := book.getprop("title");
-  if(res)
-    return res;
-  else
-    return "";
-  endif
-endfunction
-
-exported function SetTitle(book, title)
-  title := nettoie(title);
-
-  book.setprop("title", title);
-  book.name := title;
-endfunction
-
-exported function GetAuthor(book)
-  var res := book.getprop("author");
-  if(res)
-    return res;
-  else
-    return "";
-  endif
-endfunction
-
-exported function SetAuthor(book, author)
-  author := nettoie(author);
-
-  book.setprop("author", author);
-endfunction
-
-exported function GetContents(book)
-  var contents := book.getprop("contents");
-  if(contents == error)
-    contents := array;
-  endif
-  return contents;
-endfunction
-
-exported function GetLine(book, line)
-  var contents := book.getprop("contents");
-  if(contents == error)
-    contents := array;
-  endif
-  if(line <= contents.size())
-    var text := contents[line];
-    if(text)
-      return text;
-    else
-      return "";
-    endif
-  else
-    return "";
-  endif
-endfunction
-
-exported function SetLine(book, line, text)
-  var contents := book.getprop("contents");
-  if(contents == error)
-    contents := array;
-  endif
-  contents[ line ] := nettoie(text);
-  book.setprop("contents", contents);
-  return 1;
-endfunction
-
-function nettoie(chaine)
- var tabchaine := CascZ(chaine);
- var result := "";
- var i := 1;
- var bon := 1;
- 
- while (bon == 1)
-  var car := tabchaine[i];
-  if (car > 0)
-   result := result + Cchr(car);
-   i := i + 1;
-  else
-   bon := 0;
-  endif
- endwhile
- 
- return result;
-endfunction
-
-program BookInterface()
-  return 1;
-endprogram
\ No newline at end of file

Deleted: trunk/096/pkg/items/sysbook/zulubooks.cfg
===================================================================
--- trunk/096/pkg/items/sysbook/zulubooks.cfg	2005-09-29 22:09:23 UTC (rev 311)
+++ trunk/096/pkg/items/sysbook/zulubooks.cfg	2005-09-29 22:41:15 UTC (rev 312)
@@ -1,4173 +0,0 @@
-book 1
-{
-pages 3
-title Hitchhikers Guide to Zulu Hotel
-author Developer Zulu
-p1l1 Don't Panic
-p2l1 See Page 1
-p3l1 This is page 3 and the
-p3l2 end of this book.
-}
-book 2
-{
-pages 5
-title Guide to Zulu Hotel
-author Zulu Staff
-p1l1 Welcome to the new,
-p1l2 Zulu Shard. This book
-p1l3 will try to explain
-p1l4 some of the new
-p1l5 options and commands
-p1l6 that you have
-p1l7 access to.
-p2l1 .where - this will tell
-p2l2 your location
-p2l3 .msg - this will allow
-p2l4 you to send messages
-p2l5 .reply - this will
-p2l6 allow you to reply
-p2l7 .online - this will tell
-p2l8 you who is online
-p3l1 Commands
-p3l2 .arm - will allow you
-p3l3 to arm weapons
-p3l4 .disarm - will allow
-p3l5 you to remove weapons
-p3l6 .hungry - need to eat?
-p4l1 If you own a house, it
-p4l2 can decay. Make sure
-p4l3 you double click on
-p4l4 your house sign every
-p4l5 30 days. Check out
-p4l6 our website, we
-p4l7 have a new house
-p4l8 faq section.
-p5l1 To find out tricks
-p5l2 and tips check out our
-p5l3 inside zuluhotel
-p5l4 www.zuluhotel.com/
-p5l5 uo/inside/
-}
-book 3
-{
-pages 3
-title The Arrow and the Song
-author Longfellow
-p1l1 I shot an arrow into
-p1l2 the air,
-p1l3 It fell to earth,
-p1l4 I knew not where;
-p1l5 For, so swiftly it
-p1l6 flew, the sight
-p1l7 Could not follow in
-p2l1 its flight. I breathed
-p2l2 a song into the air,
-p2l3 It fell to earth, I
-p2l4 knew not where;
-p2l5 For who has sight so
-p2l6 keen and strong,
-p2l7 That it can follow the
-p2l8 flight of song?
-p3l1 Long, long afterward,
-p3l2 in an oak
-p3l3 I found the arrow,
-p3l4 still unbroke;
-p3l5 And the song, from
-p3l6 beginning to end,
-p3l7 I found again in the
-p3l8 heart of a friend.
-}
-book 4
-{
-pages 2
-title Mr. Meant-To
-author Ben Franklin
-p1l1 Mr. Meant-To has a
-p1l2 comrade, and his
-p1l3 name is Didn't-Do
-p1l4 Have you ever chanced
-p1l5 to meet them?
-p1l6 Did they ever call
-p1l7 on you?
-p2l1 These two fellows live
-p2l2 together. In the house
-p2l3 of Never-Win, and
-p2l4 I'm told that it
-p2l5 is haunted.
-p2l6 By the ghost of
-p2l7 Might-Have-Been.
-}
-book 5
-{
-pages 12
-title The Village Blacksmith
-author Longfellow
-p1l1 Under a spreading
-p1l2 chestnut tree
-p1l3 The village
-p1l4 smithy stands;
-p2l1 The smith, a mighty
-p2l2 man is he,
-p2l3 With large and
-p2l4 sinewy hands;
-p3l1 And the muscles of
-p3l2 his brawny arms
-p3l3 Are strong as
-p3l4 iron bands.
-p4l1 His hair is crisp,
-p4l2 and black, and long,
-p4l3 His face is like
-p4l4 the tan;
-p5l1 His brow is wet with
-p5l2 honest sweat,
-p5l3 He earns what e'er
-p5l4 he can,
-p6l1 And looks the whole
-p6l2 world in the face,
-p6l3 For he owes
-p6l4 not any man.
-p7l1 Week in, week out,
-p7l2 from morn till night,
-p7l3 You can hear his
-p7l4 bellows blow;
-p8l1 You can hear him
-p8l2 swing his heavy
-p8l3 sledge, With
-p8l4 measured beat
-p8l5 and slow,
-p9l1 Like a sexton ringing
-p9l2 the village bell,
-p9l3 When the evening
-p9l4 sun is low.
-p10l1 And children comming
-p10l2 home from school
-p10l3 Look in at the
-p10l4 open door;
-p11l1 They love to see
-p11l2 the flaming forge,
-p11l3 And hear the
-p11l4 bellows roar,
-p12l1 And catch the burning
-p12l2 sparks the fly
-p12l3 Like chaff from a
-p12l4 threshing floor.
-}
-book 6
-{
-pages 4
-title Great Men
-author Emerson
-p1l1 Not gold, but only
-p1l2 man can make
-p1l3 A people great
-p1l4 and strong;
-p2l1 Men who, for truth
-p2l2 and honor's sake,
-p2l3 Stand fast and
-p2l4 suffer long.
-p3l1 Brave men who work
-p3l2 while others sleep,
-p3l3 Who dare while
-p3l4 others fly --
-p4l1 They build a nation's
-p4l2 pillars deep
-p4l3 And lift them
-p4l4 to the sky.
-}
-book 7
-{
-pages 2
-title Men Wanted for Hazardous Journey
-author Ernest Chackleton
-p1l1 Small wages,
-p1l2 bitter cold,
-p1l3 long months of
-p1l4 complete darkness,
-p2l1 constant danger,
-p2l2 safe return doubtful.
-p2l3 Honor and recognition
-p2l4 in case of success.
-}
-book 8
-{
-pages 4
-title There was a lady loved a swine
-author Anonymous
-p1l1 There was a lady
-p1l2 loved a swine.
-p1l3 Honey, quoth she,
-p1l4 Pig-hog, wilt thou
-p1l5 be mine?
-p1l6 Hoogh, quoth he.
-p2l1 I'll build thee
-p2l2 a silver sty,
-p2l3 Honey, quoth she,
-p2l4 And in it thou
-p2l5 shalt lie.
-p2l6 Hoogh, quoth he.
-p3l1 Pinned with a
-p3l2 silver pin,
-p3l3 Honey, quote she,
-p3l4 That thou may go
-p3l5 out and in.
-p3l6 Hoogh, quoth he.
-p4l1 Wilt hou have me now,
-p4l2 honey? quoth she.
-p4l3 Speak or my
-p4l4 heartwill break.
-p4l5 Hoogh, quoth he.
-}
-book 9
-{
-pages 4
-title Great is my Envy of You
-author Francis Petrarch
-p1l1 Great is my envy of
-p1l2 you, earth, in
-p1l3 your greed
-p1l4 Folding her in
-p1l5 invisible embrace,
-p2l1 Denying me the look
-p2l2 of the sweet face
-p2l3 Where I found peace
-p2l4 from all my
-p2l5 strife at need!
-p3l1 Great is my envy of
-p3l2 heaven which can lead
-p3l3 And lock within
-p3l4 itself in avarice
-p4l1 That spirit from its
-p4l2 lovely biding-place
-p4l3 And leave so many
-p4l4 others here to bleed!
-}
-book 10
-{
-pages 4
-title The Prince
-author Machiavelli
-p1l1 Everybody knows
-p1l2 how laudable it is in
-p1l3 a prince to keep his
-p1l4 faith and to be an
-p1l5 honest man, not a
-p1l6 trickster.
-p2l1 Nevertheless, the
-p2l2 experience of our
-p2l3 times shows that the
-p2l4 princes who have done
-p2l5 great things are the
-p2l6 ones who have taken
-p2l7 little account of
-p2l8 their promises and
-p3l1 who have known how
-p3l2 to addle the brains
-p3l3 of men with craft.
-p4l1 In the end they have
-p4l2 conquered those who
-p4l3 have put their
-p4l4 reliance on
-p4l5 good faith.
-}
-book 11
-{
-pages 3
-title The Voice of Reason
-author Ayn Rand
-p1l1 If the good, the
-p1l2 virtuous, the morally
-p1l3 ideal is suffering
-p1l4 and self-sacrifice --
-p1l5 then, by that standard,
-p1l6 capitalism had to
-p1l7 be damned as evil.
-p2l1 Capitalism does not
-p2l2 tell men to suffer,
-p2l3 but to pursue enjoyment
-p2l4 and achievement, here,
-p2l5 on Earth -- capitalism
-p2l6 does not tell men to
-p2l7 serve and sacrifice,
-p2l8 but to produce and
-p3l1 profit...and above all,
-p3l2 capitalism does not
-p3l3 permist anyone to
-p3l4 expect or demand, to
-p3l5 give or to take
-p3l6 the unearned.
-}
-book 12
-{
-pages 2
-title Atlas Shrugged
-author Ayn Rand
-p1l1 You are not free to
-p1l2 escape from your
-p1l3 nature, from the fact
-p1l4 that reason is your
-p1l5 means of survival --
-p2l1 so that you,
-p2l2 who are a human being,
-p2l3 the question
-p2l4 to be or not to be'
-p2l5 is the question
-p2l6 'to think or not
-p2l7 to think.
-}
-book 13
-{
-pages 3
-title The Divine Comedy: Inferno, Canto I
-author Dante Alighieri
-p1l1 Midway in our life's
-p1l2 journey, I went astray
-p1l3 from the straight road
-p1l4 and woke to find myself
-p1l5 alone in a dark wood.
-p1l6 How shall I say
-p2l1 what a wood that was!
-p2l2 I never saw so drear,
-p2l3 so rank, so arduous
-p2l4 a wilderness!
-p2l5 Its very memory gives
-p2l6 a shape to fear.
-p3l1 Death could scarce be
-p3l2 more bitter than that
-p3l3 place! But since it
-p3l4 came to good, I
-p3l5 will recount all that
-p3l6 I found revealed there
-p3l7 by God's grace...
-}
-book 14
-{
-pages 9
-title Talking to Wisps
-author Yorick of Moonglow
-p1l1 This volume was
-p1l2 sponsored by
-p1l3 donations from Lord
-p1l4 Blackthorn, ever a
-p1l5 supporter of
-p1l6 understanding the
-p1l7 other sentient races
-p2l1 of Britannia.
-p2l2 Wisps are the most
-p2l3 intelligent of the
-p2l4 nonhuman races
-p2l5 inhabiting Britannia.
-p2l6 'Tis claimed by the
-p2l7 great sages that
-p2l8 someday we shall be
-p3l1 able to converse with
-p3l2 them openly in our
-p3l3 native
-p3l4 tongue--indeed, we
-p3l5 must hope that wisps
-p3l6 learn our language,
-p3l7 for it is not possible
-p3l8 for humans to
-p4l1 pronounce wispish!
-p4l2 The wispish
-p4l3 language seems to
-p4l4 only contain one
-p4l5 vowel, the letter Y.
-p4l6 However, the letters
-p4l7 W, C, M, and L seem
-p4l8 to be treated
-p5l1 grammatically as
-p5l2 vowels, and in
-p5l3 addition every letter
-p5l4 is followed by what
-p5l5 sounds to the human
-p5l6 ear like a glottal stop
-p5l7 It is possible that the
-p5l8 glottal stop is
-p6l1 considered a vowel
-p6l2 as well.
-p6l3 Wisps do make use
-p6l4 of what sound to us
-p6l5 like pitch and
-p6l6 emphasis shifts
-p6l7 similar to
-p6l8 exclamations and
-p7l1 questions. The average
-p7l2 word in wispish seems
-p7l3 to consist of three
-p7l4 phonemes and three
-p7l5 glottal stops, plus
-p7l6 possibly a pitch shift.
-p7l7 It often sounds like a
-p8l1 fire burning or
-p8l2 crackling. Some have
-p8l3 speculated that what
-p8l4 we are analyzing is
-p8l5 in fact nothing more
-p8l6 than the very air
-p8l7 crackling near the
-p8l8 wisp's glow, and not
-p9l1 language, but this is
-p9l2 of course unlikely...
-}
-book 15
-{
-pages 23
-title A Grammar of Orcish
-author Yorick of Yew
-p1l1 This volume, and
-p1l2 others in the series,
-p1l3 are sponsored by
-p1l4 donations from Lord
-p1l5 Blachthrone, always a
-p1l6 supporter of
-p1l7 understanding the
-p2l1 other sentient races
-p2l2 of Britannia -
-p2l3 The Orcish tongue
-p2l4 may fall unpleasingly
-p2l5 'pon the ear, yet it
-p2l6 has within it a
-p2l7 complex grammar oft
-p3l1 misunderstood by
-p3l2 those who merely
-p3l3 hear the few broken
-p3l4 words of English our
-p3l5 orcish brothers
-p3l6 manage without
-p3l7 education.
-p3l8 These are the basic
-p4l1 rules of orcish:
-p4l2 Orcish has five
-p4l3 tenses: present, past,
-p4l4 future imperfect,
-p4l5 present interjectional,
-p4l6 and prehensile.
-p4l7 Examples: gugroflu,
-p4l8 gugrofloog, gugrobo,
-p5l1 gugroglu!, gugrogug.
-p5l2 All transitive verbs
-p5l3 in the prehensile
-p5l4 tense end in ug.
-p5l5 Examples:
-p5l6 urgleighug,
-p5l7 biggugdaghgug,
-p5l8 curdakalmug.
-p6l1 All present
-p6l2 interjectional
-p6l3 conjugations start
-p6l4 with the letter G
-p6l5 unless the contain the
-p6l6 third declensive
-p6l7 accent of the letter U.
-p6l8 Examples:
-p7l1 ghothudunglug, but not
-p7l2 azhbuugub.
-p7l3 The past tense can
-p7l4 only refer to events
-p7l5 since the last meal,
-p7l6 but the prehensile
-p7l7 tense can refer to
-p7l8 any event within
-p8l1 reach.
-p8l2 The present tense
-p8l3 is conjugated like the
-p8l4 future imperfect
-p8l5 tense, when the
-p8l6 interrogative mode is
-p8l7 used by pitching the
-p8l8 sound a quarter-tone
-p9l1 higher.
-p9l2 Orcish hath no
-p9l3 concept of person, as
-p9l4 in first person, third
-p9l5 person, I, we, etc.
-p9l6 Orcish grammar
-p9l7 relies upon the three
-p9l8 cardinal rules of
-p10l1 accretion, prefixing,
-p10l2 and agglutination, in
-p10l3 addition to pitch. In
-p10l4 the former, phonemes
-p10l5 combine into larger
-p10l6 words which may
-p10l7 contain full phrasal
-p10l8 significance
-p11l1 In the second,
-p11l2 prefixing specific
-p11l3 phonetic sounds
-p11l4 changes the subject of
-p11l5 the sentence into
-p11l6 object, interrogative,
-p11l7 addressed individual,
-p11l8 or dinner.
-p12l1 Agglutination occurs
-p12l2 whenever four of the
-p12l3 same letter are
-p12l4 present in a word, in
-p12l5 which case, any two
-p12l6 of them may be
-p12l7 removed or slurred.
-p12l8 Pitch changes the
-p13l1 phoneme value of
-p13l2 individual syllables,
-p13l3 thus completely
-p13l4 altering what a word
-p13l5 may mean. The
-p13l6 classic example is
-p13l7 Aktgluthugrot
-p13l8 bigglogubuu
-p14l1 dargilgaglug lublublub
-p14l2 which can mean You
-p14l3 are such a pretty
-p14l4 girl, My mother ate
-p14l5 your primroses, or
-p14l6 Jellyfish nose paints
-p14l7 alms potato,
-p14l8 depending on pitch.
-p15l1 Orcish poetry often
-p15l2 relies upon repeating
-p15l3 the same phrase in
-p15l4 multiple pitches, even
-p15l5 changing pitch
-p15l6 midword. None of
-p15l7 this great art is
-p15l8 translatable.
-p16l1 The orcish language
-p16l2 uses the following
-p16l3 vowels: ab, ad, ag, akt
-p16l4 at, augh, auh, azh, e,
-p16l5 i, o, oo, u, uu. The
-p16l6 vowel sound a is not
-p16l7 recognized as a vowel
-p16l8 and does not exist in
-p17l1 their alphabet.
-p17l2 The orcish alphabet is
-p17l3 best learned using the
-p17l4 classic rhyme
-p17l5 repeated at 23
-p17l6 different pitches:
-p17l7 Lugnog ghu blat
-p17l8 suggaroglug,
-p18l1 Gaghbuu dakdar ab
-p18l2 highugbo,
-p18l3 Gothnogbuim ad
-p18l4 gilgubbugbuilug
-p18l5 Bilgeaugh thurggulg.
-p18l6 Translation of the
-p19l1 first pitch:
-p19l2 Eat food, the first
-p19l3 letter is ab,
-p19l4 Kill people, next
-p19l5 letter is ad,
-p19l6 I forget the rest
-p19l7 But augh is in there
-p19l8 somewhere!
-p20l1 What follows is a
-p20l2 complete phonetic
-p20l3 library of the orcish
-p20l4 language:
-p20l5 ab, ad, ag, akt, alm,
-p20l6 at, augh, auh, azh,
-p20l7 ba, ba, bag, bar, baz,
-p20l8 bid, bilge, bo, 
-p21l1 bog, bog, brui, bu,
-p21l2 buad, bug, bug, buil,
-p21l3 buim, bum, buo, buor,
-p21l4 buu, ca, car, clog,
-p21l5 cro, cuk, cur, da,
-p21l6 dagh, dagh, dak, dar,
-p21l7 deak, der, dil, dit,
-p21l8 dor, dre, dri,
-p22l1 dru, du, dud, duf,
-p22l2 dug, dug, duh, dun,
-p22l3 eag, eg, egg, eichel,
-p22l4 ek, ep, ewk, faugh,
-p22l5 fid, flu, fog, foo,
-p22l6 foz, fruk, fu, fub,
-p22l7 fud, fun, fup, fur,
-p22l8 gaa, gag, gagh, gan,
-p23l1 gar, gh, gha, ghat,
-p23l2 ghed, ghig, gho, ghu,
-p23l3 gig, gil, gka, glu,
-p23l4 glu, glug, gna, gno,
-p23l5 gnu, gol, gom, goth,
-p23l6 grunt, grut, gu, gub,
-p23l7 gub, gug, gug, gugh,
-p23l8 guk, guk.
-}
-book 16
-{
-pages 4
-title A Christmas Carole
-author Unknown
-p1l1 Slashing through
-p1l2 the Orcs.
-p1l3 With a good two-
-p1l4 handed blade. 
-p1l5 Over corpses we go
-p1l6 And through the gore
-p1l7 we wade
-p2l1 Mace on helmet rings
-p2l2 Making bodies fly
-p2l3 What fun to sing our
-p2l4 SLAYING song
-p2l5 And watch these
-p2l6 suckers die!
-p3l1 Chorus:
-p3l2 Oh, ring their bells
-p3l3 with swords and spells
-p3l4 Don't let 'em get away!
-p3l5 We're brave and bold
-p3l6 for fame and gold
-p3l7 We'll make a lot today!
-p4l1 Oh, ring their bells
-p4l2 with swords and spells
-p4l3 Don't let 'em get away!
-p4l4 We'll hack and slash
-p4l5 and blast and trash
-p4l6 And blow these
-p4l7 dudes away!
-}
-book 17
-{
-pages 16
-title Charge of the Light Brigade
-author Tennyson
-p1l1 Half a league,
-p1l2  half a league,
-p1l3 Half a leage onward,
-p1l4 All in the valley of
-p1l5  Death
-p1l6 Rode the six hundred.
-p2l1 Forward,
-p2l2 the Light Brigade!
-p2l3 Charge for the guns!
-p2l4  he said:
-p2l5 Into the valley of
-p2l6  Death
-p2l7 Rode the six hundred.
-p3l1 Forward,
-p3l2  the Light Brigade!
-p3l3 Was there a man
-p3l4  dismay'd?
-p3l5 Not tho'
-p3l6  the soldier knew
-p3l7 Someone had blunder'd:
-p4l1 Theirs not
-p4l2  to make reply,
-p4l3 Theirs not
-p4l4  to reason why,
-p4l5 Theirs but to do
-p4l6  and die:
-p4l7 Into the valley
-p4l8  of Death
-p5l1 Rode the six hundred.
-p5l2 Cannon to the
-p5l3  right of them,
-p5l4 Cannon to the
-p5l5  left of them,
-p5l6 Cannon in
-p5l7  front of them
-p5l8 Volley'd and thunder'd:
-p6l1 Storm'd at with
-p6l2  shot and shell
-p6l3 Boldly they
-p6l4  rode and well,
-p7l1 Into the jaws
-p7l2  of Death,
-p7l3 Into the mouth
-p7l4  of Hell
-p7l5 Rode the six hundred.
-p8l1 Flash'd all their
-p8l2  sabers bare,
-p8l3 Flash'd as they turn'd
-p8l4  in air
-p8l5 Sab'ring the
-p8l6  gunners there,
-p8l7 Charging an army
-p8l8  while
-p9l1 All the world wonder'd:
-p9l2 Plunged in the
-p9l3  battery smoke
-p10l1 Right thro' the
-p10l2  line they broke;
-p10l3 Cossack and Russian
-p10l4 Reel'd from the
-p10l5  saber stroke
-p11l1 Shatter'd and sunder'd.
-p11l2 Then they rode back,
-p11l3 but not
-p11l4 Not the six hundred.
-p12l1 Cannon to
-p12l2  the right of them,
-p12l3 Cannon to
-p12l4  the left of them,
-p12l5 Cannon behind them
-p12l6 Volley'd and thunder'd:
-p13l1 Storm'd at with
-p13l2  shot and shell,
-p13l3 While horse and hero
-p13l4  fell,
-p13l5 They that had
-p13l6  fought so well
-p14l1 Came through the
-p14l2  jaws of death
-p14l3 Back from the
-p14l4  mouth of hell,
-p14l5 All that was left
-p14l6  of them --
-p14l7 Left of six hundred.
-p15l1 When can
-p15l2  their glory fade?
-p15l3 Oh, the wild
-p15l4  charge they made!
-p15l5 All the world wonder'd.
-p16l1 Honor the
-p16l2  charge they made!
-p16l3 Honor the
-p16l4  Light Brigade --
-p16l5 Noble six hundred!
-}
-book 18
-{
-pages 14
-title A politic call to anarchy
-author Lord Blackthorne
-p1l1 Let it never be said
-p1l2 that I have aught as
-p1l3 quarrel with my liege
-p1l4 Lord British, for
-p1l5 indeed we be of the
-p1l6 best of friends,
-p1l7 sharing amicable
-p1l8 games of chess 'pon
-p2l1 winter's night and
-p2l2 talking at length into
-p2l3 the wee hours of the
-p2l4 issues that affect the
-p2l5 realm of Britannia.
-p2l6 Yet true friendship
-p2l7 doth not prevent true
-p2l8 philosophical
-p3l1 disagreement either.
-p3l2 While I view with
-p3l3 approval my lord's
-p3l4 affection for his
-p3l5 carefully crafted
-p3l6 philosophy of the
-p3l7 Eight Virtues,
-p3l8 wherein moral
-p4l1 behavior is
-p4l2 encouraged in the
-p4l3 populace, I view
-p4l4 with less approval the
-p4l5 expenditure of public
-p4l6 funds upon the
-p4l7 construction of
-p4l8 shrines to said
-p5l1 ideals. The issue is
-p5l2 not one of funds
-p5l3 however, but a
-p5l4 disagreement most
-p5l5 intellectual over
-p5l6 the proper way of
-p5l7 humankind in an
-p5l8 ethical sense. Surely
-p6l1 freedom of decision
-p6l2 must be regarded as
-p6l3 paramount in any
-p6l4 such moral decision?
-p6l5 Though none fail to
-p6l6 censure the
-p6l7 murderer, a subtler
-p6l8 question arises when
-p7l1 we ask if his behavior
-p7l2 would be ethical if he
-p7l3 were forced to it.
-p7l4 I say to thee, the
-p7l5 reader, quite flatly,
-p7l6 that no ethical system
-p7l7 shall have sway over me
-p7l8 unless it convinceth me
-p8l1 for that freely made
-p8l2 choice is to me
-p8l3 the sigh that the
-p8l4 system has validity.
-p8l5 Whereas the system of
-p8l6 Virtues that my liege
-p8l7 espouses is indeed a
-p8l8 compilation
-p9l1 of commonly approved
-p9l2 virtues, I approve of
-p9l3 it. Where it seeks to
-p9l4 control the populace
-p9l5 and restrict their
-p9l6 diversity and their
-p9l7 range of behaviors, I
-p9l8 quarrel with it. And
-p10l1 thus do I issue this
-p10l2 politic call to
-p10l3 anarchy, whilst humbly
-p10l4 begging forgivness of
-p10l5 Lord British for my
-p10l6 impertinence:,
-p10l7 Celebrate thy
-p10l8 differences. Take thy
-p11l1 actions according to
-p11l2 they own lights.
-p11l3 Question from what
-p11l4 source a law, a rule,
-p11l5 a judge and a virtue
-p11l6 may arise. 'Twere
-p11l7 possible (though I
-p11l8 suggest it not
-p12l1 seriously) that a
-p12l2 daemon planted the
-p12l3 seed of these Virtues
-p12l4 in my Lord British's
-p12l5 mind; 'twere possible
-p12l6 that the Shrines were
-p12l7 but a plan to destroy
-p12l8 this world. Thou canst
-p13l1 not know unless thou
-p13l2 questioneth, doubteth,
-p13l3 and in the end, unless
-p13l4 thou relyest upon
-p13l5 THYSELF and they
-p13l6 judgement. I offer
-p13l7 these words as mere
-p13l8 philosophical musings
-p14l1 for those who seek
-p14l2 enlightenment, for
-p14l3 'tis the issue that
-p14l4 hath occupied mine
-p14l5 interest and that of
-p14l6 Lord British for some
-p14l7 time now.
-}
-book 19
-{
-pages 20
-title Virtues
-author Lord British
-p1l1 Within this world live
-p1l2 people with many
-p1l3 different ideals and
-p1l4 this is good. Yet what
-p1l5 is it within the people
-p1l6 of our land that sorts
-p1l7 out the good from the
-p1l8 evil, the cherished
-p2l1 from the disdained?
-p2l2 Virtue, I say it is,
-p2l3 and virtue is the
-p2l4 logical outcome of a
-p2l5 people who wish to
-p2l6 live together in a
-p2l7 bonded society.
-p3l1 For without Virtues
-p3l2 as a code of conduct
-p3l3 which people maintain
-p3l4 in their relations with
-p3l5 each other, the fabric
-p3l6 of that society will
-p3l7 become weakened. For
-p3l8 a society to grow and
-p4l1 prosper for all, each
-p4l2 must grant the others
-p4l3 a common base of
-p4l4 consideration.
-p4l5 I call this base the
-p4l6 Virtues. For though
-p4l7 one person might gain
-p5l8 personal advantage by
-p5l1 breaching such a code,
-p5l2 the society as a whole
-p5l3 would suffer.
-p5l4 There are three
-p5l5 Principle Virtues that
-p5l6 should guide people to
-p5l7 enlightenment. These
-p5l8 are: Truth, Love and
-p6l1 Courage. From all the
-p6l2 infinite reasons one
-p6l3 may have to found an
-p6l4 action, such as greed
-p6l5 or charity, envy or
-p6l6 pity, the three
-p6l7 Principle Virtues
-p6l8 stand out.
-p7l1 In fact all other
-p7l2 virtues and vices can
-p7l3 be shown to be built
-p7l4 from these principles
-p7l5 and their opposite
-p7l6 corruption's of
-p7l7 Falsehood, Hatred and
-p7l8 Cowardice. These
-p8l1 three Principles can
-p8l2 be combined in eight
-p8l3 ways, which I will
-p8l4 call the eight virtues.
-p8l5 The eight virtues
-p8l6 which we should
-p8l7 build our society upon
-p8l8 follow.
-p9l1 Truth alone becomes
-p9l2 Honesty, for without
-p9l3 honesty between our
-p9l4 people, how can we
-p9l5 build the trust which
-p9l6 is needed to maximize
-p9l7 our successes.
-p9l8 Love alone becomes
-p10l1 compassion, for at
-p10l2 some time or another
-p10l3 all of us will need the
-p10l4 compassion of others,
-p10l5 and most likely
-p10l6 compassion will be
-p10l7 shown to those who
-p10l8 have shown it.
-p11l1 Courage alone
-p11l2 becomes Valor,
-p11l3 without valor our
-p11l4 people will never
-p11l5 reach into the
-p11l6 unknown or to the
-p11l7 risky and will never
-p11l8 achieve.
-p12l1 Truth tempered by
-p12l2 Love gives us Justice,
-p12l3 for only in loving
-p12l4 search for the truth
-p12l5 can one dispense fair
-p12l6 Justice, rather than
-p12l7 create a cold and
-p12l8 callous people.
-p13l1 Love and Courage
-p13l2 gives us Sacrifice,
-p13l3 for a people who love
-p13l4 each other will be
-p13l5 willing to make
-p13l6 personal sacrifices to
-p13l7 help others in need,
-p14l8 which one day, may be
-p14l1 needed in return.
-p14l2 Courage and Truth
-p14l3 give us Honor, great
-p14l4 knights know this
-p14l5 well, that chivalric
-p14l6 honor can be found by
-p14l7 adhering to this code
-p14l8 of conduct.
-p15l1 Combining Truth,
-p15l2 Love and Courage
-p15l3 suggest the virtue of
-p15l4 Spirituality the virtue
-p15l5 that causes one to be
-p15l6 introspective, to
-p15l7 wonder about ones
-p15l8 place in this world and
-p16l1 whether one's deeds
-p16l2 will be recorded as a
-p16l3 gift to the world or a
-p16l4 plague.
-p16l5 The final Virtue is
-p16l6 more complicated. For
-p16l7 the eighth combination
-p16l8 is that devoid of
-p17l1 Truth, Love or Courage
-p17l2 which can only exist
-p17l3 in a state of great
-p17l4 Pride, which of
-p17l5 course is not a virtue
-p17l6 at all. Perhaps this
-p17l7 trick of fate is a test
-p17l8 to see if one can
-p18l1 realize that the true
-p18l2 virtue is that of
-p18l3 Humility. I feel that
-p18l4 the people of Magincia
-p18l5 fail to see this to such
-p18l6 a degree that I would
-p18l7 not be surprised if
-p18l8 some ill fate awaited
-p19l1 their future.
-p19l2 Thus from the
-p19l3 infinite possibilities
-p19l4 which spawned the
-p19l5 Three Principles of
-p19l6 Truth, Love and
-p19l7 Courage, come the
-p19l8 Eight Virtues of
-p20l1 Honesty, Compassion,
-p20l2 Valor, Justice,
-p20l3 Sacrifice, Honor,
-p20l4 Spirituality and
-p20l5 Humility.
-}
-book 20
-{
-pages 14
-title On the diversity of our land
-author Lord Blackthorne
-p1l1 While I deplore the
-p1l2 depredations of the
-p1l3 misguided and
-p1l4 belligerent races
-p1l5 with which we
-p1l6 share our fair
-p1l7 Britannia and
-p1l8 alongside the populace
-p2l1 do mourn the needless
-p2l2 deaths that their
-p2l3 raids cause, I cannot
-p2l4 countenance the policy
-p2l5 of wholesale
-p2l6 slaughter of these
-p2l7 races that seems to be
-p2l8 the habity of our
-p3l1 soldierly element. Can
-p3l2 we not regard the
-p3l3 ratmen, lizard men,
-p3l4 and orcs are fellow
-p3l5 intelligent beings
-p3l6 with whom we share a
-p3l7 planet? Why must we
-p3l8 slay them on sight,
-p4l1 rather than attempt to
-p4l2 engage them in
-p4l3 dialogue? There is no
-p4l4 policy of shooting at
-p4l5 wisps when they
-p4l6 grace us with their
-p4l7 presence (not that an
-p4l8 arrow could do much
-p5l1 to pierce them!).
-p5l2 To view these
-p5l3 creatures as vermin
-p5l4 denies their obvious
-p5l5 intelligence and we
-p5l6 cannot underestimate
-p5l7 the repercussions that
-p5l8 their slaughter may
-p6l1 have. If we regard the
-p6l2 slaying of fellow
-p6l3 humans as a crime, so
-p6l4 must we regard the
-p6l5 killing of an orc.
-p6l6 At the same time,
-p6l7 should a lizardman
-p6l8 slay a human, whould
-p7l1 we not forgive their
-p7l2 ignorance and
-p7l3 foolishness? Let us
-p7l4 not surrender the
-p7l5 high moral ground by
-p7l6 descending to
-p7l7 bestiality.
-p8l8 Now, I say not that
-p8l1 we should fail to
-p8l2 defend ourselves in
-p8l3 case of attack, for
-p8l4 even amongst humans
-p8l5 we see war, we see
-p8l6 famine and we see
-p8l7 assault (though we
-p8l8 owe a debt of
-p9l1 gratitude to our Lord
-p9l2 British for preserving
-p9l3 us from the worst of
-p9l4 these!). However,
-p9l5 incursions such as the
-p9l6 recent tragedy which
-p9l7 cost us the life of
-p9l8 Japheth, Guildmaster
-p10l1 of Trinsic's Paladins,
-p10l2 are folly.
-p10l3 I had met Japheth,
-p10l4 and like all paladins,
-p10l5 he burned with an
-p10l6 inner fire. Yet though
-p10l7 I had the utmost
-p10l8 respect for him, none
-p11l1 could deny the hatred
-p11l2 that flashed in his
-p11l3 eyes the mere mention
-p11l4 of orcs. And thus he
-p11l5 carried his battle to
-p11l6 the orc camps and
-p11l7 died there, unable to
-p11l8 rise above his own
-p12l1 childhood experiences
-p12l2 depicted in his book,
-p12l3 The Burning of
-p12l4 Trinsic. 'Tis a shame
-p12l5 that even our
-p12l6 mightiest men fall
-p12l7 prey to this ignorance!
-p12l8 Are there not
-p13l1 legends of orcs
-p13l2 adopting human
-p13l3 children to raise as
-p13l4 their own? Tales of
-p13l5 complex societies built
-p13l6 underground by races
-p13l7 we regard as bestial?,
-p13l8 Let us not repeat the
-p14l1 mistake of Japheth of
-p14l2 the Paladins and let
-p14l3 us cease to persecute
-p14l4 the nonhuman races,
-p14l5 before we discover
-p14l6 that we are harming
-p14l7 ourselves in the
-p14l8 process.
-}
-book 21
-{
-pages 12
-title Beltran's guide to guilds
-author Beltran
-p1l1 This reference
-p1l2 work is intended
-p1l3 merely to serve as a
-p1l4 resource for those
-p1l5 curious as to the full
-p1l6 range of trades and
-p1l7 societies extant in
-p1l8 Britannia and nearby
-p2l1 nations. For each
-p2l2 trade or guild, their
-p2l3 blazon is given.
-p2l4 Armourer's Guild.
-p2l5 Gold bar above black
-p2l6 bar. Association of
-p2l7 Warriors. Blue cross
-p2l8 on a red field.
-p3l1 Barters' Guild. Green
-p3l2 and white stripes,
-p3l3 diagonal. Blacksmith's
-p3l4 Guild. Gold alongside
-p3l5 black. Federation of
-p3l6 Rogue and Beggars. Red
-p3l7 above black. Fighters
-p3l8 and Footmen. Blue
-p4l1 horizontal bar on red
-p4l2 field. Guild of
-p4l3 Archers. A gold swath
-p4l4 parting red and blue.
-p4l5 Guild of Armaments.
-p4l6 Swath of gold on black
-p4l7 field, gold accents.
-p4l8 Guild of Assassins.
-p5l1 Black and red 
-p5l2 quartered. Guild of
-p5l3 Barbars. Red and white
-p5l4 stripes. Guild of
-p5l5 Cavalry and Horse.
-p5l6 Vertical blue on a red
-p5l7 field. Guild of
-p5l8 Fishermen. Blue and
-p6l1 white, quartered.
-p6l2 Guild of Mages.
-p6l3 Purple and blue, in a
-p6l4 crossed pennant pattern.
-p6l5 Guild of Provisioners.
-p6l6 White bar above green
-p6l7 bar. Guild of Sorcery.
-p6l8 A field divided
-p7l1 diagonally in blue and
-p7l2 purple. Healer's Guild.
-p7l3 Gold swath dividing
-p7l4 green from purple,
-p7l5 gold accents.
-p7l6 Lord British's Healers
-p7l7 of Virtue. Golden ankh
-p7l8 on dark green. Masters
-p8l1 of Illusion. Blue and
-p8l2 purple checkers.
-p8l3 Merchant's Guild.
-p8l4 Gold coins on green
-p8l5 field. Mining
-p8l6 Cooperative. A gold
-p8l7 cross, quartering blue
-p8l8 and black. Order of
-p9l1 Engineers. Purple,
-p9l2 gold and blue
-p9l3 vertical. Sailors'
-p9l4 Maritime Association.
-p9l5 A white bar centered
-p9l6 on a blue field.
-p9l7 Seamen's Chapter.
-p9l8 Blue and white in a
-p10l1 crossed pennant
-p10l2 pattern. Society of
-p10l3 Cooks and Chefs. White
-p10l4 and red diagonal
-p10l5 fields checker on
-p10l6 green field. Society
-p10l7 of Shipwrights. White
-p10l8 diagonal above blue.
-p11l1 Society of Thieves.
-p11l2 Black and red diagonal
-p11l3 stripes. Society of
-p11l4 Weaponsmakers. Gold
-p11l5 diagonal above black.
-p11l6 Tailor's Hall. Purple
-p11l7 above gold above red.
-p11l8 The Bardic Collegium.
-p12l1 Purple and red
-p12l2 checkers on gold field.
-p12l3 Trader's Guild. White
-p12l4 bar centered down
-p12l5 green field.
-}
-book 22
-{
-pages 18
-title Classic tales of Vesper: Volume 1
-author Clarke's Printery
-p1l1 'Tis an Honor to
-p1l2 present to Thee these
-p1l3 Tales collected from
-p1l4 Ages Past. In this
-p1l5 Inaugural Volume, we
-p1l6 present this Verse oft
-p1l7 Recited as a Lullabye
-p1l8 for sleepy Children.
-p2l1 Preface by Guilhem
-p2l2 the Scholar,
-p2l3 The meaning of this
-p2l4 verse has oft been
-p2l5 discussed in halls of
-p2l6 scholarly sorts, for
-p2l7 its mysterious
-p2l8 singsongy melody is
-p3l1 oddly disturbing to
-p3l2 adult ears, though
-p3l3 children seem to find
-p3l4 it restful as they
-p3l5 sleep. Perhaps it is
-p3l6 but the remnant of a
-p3l7 longer ballad once
-p3l8 extant, for there are
-p4l1 internal indications
-p4l2 that it once told a
-p4l3 longer story about
-p4l4 ill-fated lovers and
-p4l5 a magical experiment
-p4l6 gone awry. However,
-p4l7 poetic license and the
-p4l8 folk process has
-p5l1 distorted the words
-p5l2 until now the locale
-p5l3 of? the tale is no
-p5l4 more than in the wind,
-p5l5 which while it serves
-p5l6 a pleasingly
-p5l7 metaphorical purpose,
-p5l8 fails to inform the
-p6l1 listener as to any real
-p6l2 locale!
-p6l3 Another possibility
-p6l4 is that this is some
-p6l5 form of creation myth
-p6l6 explaining the genesis
-p6l7 of the various
-p6l8 humanoid creatures
-p7l1 that roam the lands
-p7l2 of? Britannia. It does
-p7l3 not take a stretch of
-p7l4 the imagination to
-p7l5 name the middle
-p7l6 verse's girl becomes a
-p7l7 tree as a possible
-p7l8 explanation for the
-p8l1 reaper, for in the
-p8l2 area surrounding Minoc,
-p8l3 reapers are oft
-p8l4 referred to among the
-p8l5 lumber jacking
-p8l6 community as
-p8l7 widowmakers. That
-p8l8 these creatures are of
-p9l1 arcane origin is
-p9l2 assumed, but the
-p9l3 verse seems to imply a
-p9l4 long ago creator and
-p9l5 uses the antique
-p9l6 magickal terminology
-p9l7 of plaiting strands of
-p9l8 ether that is so often
-p10l1 found in ancient
-p10l2 texts. In addition,
-p10l3 the reference to
-p10l4 snakehills may
-p10l5 profitably be regarded
-p10l6 as a reference to an
-p10l7 actual location, such
-p10l8 as perhaps a local
-p11l1 term for the Serpent's
-p11l2 Spine.
-p11l3 A commoner
-p11l4 interpretation is that
-p11l5 like many nursery
-p11l6 rhymes, it is a simple
-p11l7 explanation for death,
-p11l8 wherein the wind
-p12l1 snatches up boys and
-p12l2 girls and when they
-p12l3 sleep in order to keep
-p12l4 the balance of the
-p12l5 world. Notable tales
-p12l6 have been written for
-p12l7 children of
-p12l8 adventures in the
-p13l1 Snakehills, which
-p13l2 are presumed to be an
-p13l3 Afterworld whence
-p13l4 the spirit lives on. A
-p13l5 grim lullabye, to be
-p13l6 sure, but no worse
-p13l7 than lest I die
-p13l8 before I wake surely.
-p14l1 In either case, 'tis
-p14l2 an old favorite herein
-p14l3 printed for the first
-p14l4 time for thy
-p14l5 enjoyment and
-p14l6 perusal!
-p14l7 In the Wind where the
-p14l8 Balance Is Whispered
-p15l1 in Hallways, In the
-p15l2 Wind where the Magic
-p15l3 Flows All through the
-p15l4 Night, There live Mages
-p15l5 With Robes make of
-p15l6 Whole Days, Reading
-p15l7 Books full of Doings
-p15l8 Printed on Light, In
-p16l1 the Wind where the
-p16l2 Lovers Are Crossed
-p16l3 under Shadows, Where
-p16l4 they Meet and are
-p16l5 Parted, By the Orders
-p16l6 of Fate, The Girl
-p16l7 becomes Tree and
-p16l8 thus becomes Widow,
-p17l1 The Boy becomes Earth
-p17l2 And Wanders Till Late,
-p17l3 In the Wind are the
-p17l4 Monster, First Born
-p17l5 First Created, When
-p17l6 Chanting and Ether,
-p17l7 Mix Meddling and Nigh,
-p17l8 Fear going to Wind
-p18l1 Fear Finding its
-p18l2 Plaitings, Go Not to
-p18l3 the Snakehills,
-p18l4 Lest you Care to Die
-}
-book 23
-{
-pages 18
-title Dimensional travel: A Monograph
-author Dryus Doost
-p1l1 'Tis beyond the
-p1l2 scope of this small
-p1l3 monograph to discuss
-p1l4 the details of
-p1l5 moongates and the
-p1l6 manners in which
-p1l7 they distort the
-p1l8 fabric of reality in
-p2l1 such a manner as to
-p2l2 permit the passage of
-p2l3 living flesh from place
-p2l4 to place, world to
-p2l5 world, or indeed from
-p2l6 dimension to
-p2l7 dimension.
-p2l8 Instead, allow me to
-p3l1 bring thy attention,
-p3l2 Gentle Reader, to the
-p3l3 curious
-p3l4 characteristics that
-p3l5 are shared by certain
-p3l6 individuals within our
-p3l7 realm.
-p3l8 Long has it been
-p4l1 known that the blue
-p4l2 moongate permits
-p4l3 travel from place to
-p4l4 place and none have
-p4l5 trouble in taking this
-p4l6 path. Yet 'tis also
-p4l7 known, albeit only to a
-p4l8 few, that certain
-p5l1 individuals are unable
-p5l2 to traverse the black
-p5l3 moongates that permit
-p5l4 travel from one
-p5l5 dimension to another.
-p5l6 The noted mage and
-p5l7 peer of our realm,
-p5l8 Lord Blackthorn, once
-p6l1 told me in conversation
-p6l2 that his arcane
-p6l3 research had indicated
-p6l4 that the issue was one
-p6l5 of conservation of
-p6l6 ether. To wit, given
-p6l7 the postulate that
-p6l8 matter within a given
-p7l1 dimension may be but
-p7l2 a cros-section of
-p7l3 ethereal matter that
-p7l4 exists in multiple
-p7l5 dimensions, it
-p7l6 becomes obvious that
-p7l7 said ethereal
-p7l8 structure cannot enter
-p8l1 dimensions in which
-p8l2 it is already present.
-p8l3 Imagine an
-p8l4 individual (and the
-p8l5 Lord Blackthorn
-p8l6 hinted that he was one
-p8l7 such) who exist
-p8l8 already in some form
-p9l1 in multiple
-p9l2 dimensions: said
-p9l3 individual would not
-p9l4 be able to cross into
-p9l5 another dimension
-p9l6 because HE IS
-p9l7 ALREADY THERE.
-p9l8 The implications of
-p10l1 this are staggering,
-p10l2 and merit further
-p10l3 study. 'Tis well
-p10l4 known by theorists in
-p10l5 the field that
-p10l6 divisions in the
-p10l7 ethereal structure of
-p10l8 an individual are
-p11l1 already implicit at
-p11l2 the temporal level, as
-p11l3 causality forces
-p11l4 divisions upon the
-p11l5 ether. This is the
-p11l6 basic operating
-p11l7 mechanism by which
-p11l8 white moongates
-p12l1 function, permitting
-p12l2 time travel.
-p12l3 As time travel is not
-p12l4 barred by the
-p12l5 presence of an earlier
-p12l6 self (though
-p12l7 encountering said
-p12l8 earlier self can prove
-p13l1 arcanely perilous),
-p13l2 there must be some
-p13l3 rigidity to the
-p13l4 ethereal structure that
-p13l5 bars multiple
-p13l6 instantiations
-p13l7 of structures from
-p13l8 manifesting within
-p14l1 the same context.
-p14l2 If one regards time
-p14l3 and causal bifurcation
-p14l4 as a web, perhaps the
-p14l5 appropriate analogy
-p14l6 for dimensional
-p14l7 matrices is that of a
-p14l8 crystalline structure
-p15l1 with rigid linkages.
-p15l2 The only way in
-p15l3 which an individual
-p15l4 such as Lord
-p15l5 Blackthorn, who
-p15l6 exists in multiple
-p15l7 dimensional matrices,
-p15l8 can cross worlds via a
-p16l1 black moongate, would
-p16l2 be for the entire
-p16l3 crystalline structure
-p16l4 of the dimension to
-p16l5 perfectly match the
-p16l6 ethereal resonance of
-p16l7 the destination
-p16l8 dimension.
-p17l1 The problem of
-p17l2 why certain
-p17l3 individuals are
-p17l4 already replicated in
-p17l5 multiple crystalline
-p17l6 matrices is one that I
-p17l7 fail to provide any
-p17l8 schema for in these
-p18l1 poor theories. It is
-p18l2 my fondest hope that
-p18l3 someday someone
-p18l4 shall conquer that
-p18l5 thorny problem and
-p18l6 enlighten the world.
-}
-book 24
-{
-pages 11
-title Treatise on alchemy
-author Felicia Heirophant
-p1l1 The alchemical arts
-p1l2 are notable for their
-p1l3 deceptive simplicity.
-p1l4 'Tis true that to our
-p1l5 best knowledge
-p1l6 currently, there are
-p1l7 but eight valid potions
-p1l8 that can be made
-p2l1 (though I emphasize
-p2l2 that new discoveries
-p2l3 may always await).
-p2l4 However, the delicate
-p2l5 balance of confecting
-p2l6 the potions is
-p2l7 difficult indeed and
-p2l8 requires great skill.
-p3l1 To give thee an
-p3l2 example of the
-p3l3 simpler potions that
-p3l4 can be created by
-p3l5 those well-versed in
-p3l6 the subtleties of
-p3l7 alchemy.
-p3l8 Black pearl, that
-p4l1 rare substance that is
-p4l2 oft found lying
-p4l3 unannounced upon the
-p4l4 surface of the ground,
-p4l5 when properly
-p4l6 crushed with mortar
-p4l7 and pestle, can yield
-p4l8 a fine powder. Said
-p5l1 powder in the proper
-p5l2 proportions when
-p5l3 mixed via the
-p5l4 alchemical arts can
-p5l5 yield a wonderfully
-p5l6 refreshing drink.
-p5l7 The revolting blood
-p5l8 moss so gingerly
-p6l1 scraped off
-p6l2 windowsills by
-p6l3 fastidious housewives
-p6l4 is but a tiny cousin to
-p6l5 the wilder version,
-p6l6 which when properly
-p6l7 prepared yields a
-p6l8 magical liquid that for
-p7l1 a time can make the
-p7l2 imbiber a more agile
-p7l3 and dextrous
-p7l4 individual.
-p7l5 However, beware of
-p7l6 the deadly nightshade,
-p7l7 for it yields a
-p7l8 deceptively
-p8l1 sweet-tasting poison
-p8l2 that can prove highly
-p8l3 fatal to the drinker,
-p8l4 and in fact is also
-p8l5 used by assassins to
-p8l6 coat their blades.
-p8l7 Fortunately, this
-p8l8 latter art of poisoning
-p9l1 is little known!
-p9l2 There is much to
-p9l3 reward the student of
-p9l4 alchemy, indeed. The
-p9l5 rumors of longtime
-p9l6 alchemists losing
-p9l7 their hair and
-p9l8 acquiring an
-p10l1 unhealthy pallor, not
-p10l2 to mention unsightly
-p10l3 blotches upon their
-p10l4 once-fair skin, are
-p10l5 unhappily, true. Yet
-p10l6 the joys of the mind
-p10l7 make up for the
-p10l8 complete loss of
-p11l1 interest that others
-p11l2 may have in thee as an
-p11l3 object of courtship,
-p11l4 and I have never
-p11l5 regretted that choice.
-p11l6 Honestly, truly. Not
-p11l7 once.
-}
-book 25
-{
-pages 9
-title Classic children tales: Volume one
-author Guilhem
-p1l1 Clarke's Printery is
-p1l2 Honored to Present
-p1l3 Tales from Ages Past!
-p1l4 Guilhem the Scholar
-p1l5 Shall End Each
-p1l6 Volume with Staid
-p1l7 Commentary.
-p1l8 THE RHYME, Dance in
-p2l1 the Star Chamber
-p2l2 And Dance in the Pit
-p2l3 And Eat of your
-p2l4 Entrees, In the Glass
-p2l5 House you Sit.
-p2l6 COMMENTARY
-p2l7 A common rhyme
-p2l8 for little babies,
-p3l1 'tis thought that this
-p3l2 little ditty is part
-p3l3 of the corpus of
-p3l4 legendary
-p3l5 tales regarding the
-p3l6 world before Sosaria
-p3l7 (see the wonderful
-p3l8 fables of Fabio the
-p4l1 Poor for fictionalized
-p4l2 versions of these
-p4l3 stories, also available
-p4l4 from this same
-p4l5 publisher). According
-p4l6 to these old tales,
-p4l7 which survive mostly
-p4l8 in the hills and remote
-p5l1 villages where Lord
-p5l2 British is as yet a
-p5l3 distant and mythical
-p5l4 ruler, the gods of old
-p5l5 (a fanciful notion!)
-p5l6 met to discuss the
-p5l7 progress of creating
-p5l8 the world in mystical
-p6l1 rooms. A simple
-p6l2 analysis reveals these
-p6l3 rooms to be mere
-p6l4 mythological
-p6l5 generalizations.
-p6l6 The Star Chamber
-p6l7 is clearly a reference
-p6l8 to the sky. The Pit
-p7l1 is certainly an
-p7l2 Underworld analogous
-p7l3 to the Snake hills of
-p7l4 other tales and the
-p7l5 Glass House is no
-p7l6 doubt the vantage point
-p7l7 from which the gods
-p7l8 observed their
-p8l1 creation. All is simple
-p8l2 when seen from this
-p8l3 perspective, leaving
-p8l4 only the mysterious
-p8l5 reference to dinners.
-p8l6 Oddly enough the
-p8l7 rhyme is universally
-p8l8 used only for
-p9l1 midnight feedings,
-p9l2 never during the day.
-}
-book 26
-{
-pages 9
-title Classic children tales Volume two
-author Guilhem
-p1l1 Clarke's Printery is
-p1l2 Honored to Present
-p1l3 Tales from Ages Past!
-p1l4 Guilhem the Scholar
-p1l5 Shall End Each
-p1l6 Volume with Staid
-p1l7 Commentary.
-p1l8 THE RHYME, Dance in
-p2l1 the Star Chamber
-p2l2 And Dance in the Pit
-p2l3 And Eat of your
-p2l4 Entrees, In the Glass
-p2l5 House you Sit.
-p2l6 COMMENTARY
-p2l7 A common rhyme
-p2l8 for little babies,
-p3l1 'tis thought that this
-p3l2 little ditty is part
-p3l3 of the corpus of
-p3l4 legendary tales
-p3l5 regarding the
-p3l6 world before Sosaria
-p3l7 (see the wonderful
-p3l8 fables of Fabio the
-p4l1 Poor for fictionalized
-p4l2 versions of these
-p4l3 stories, also available
-p4l4 from this same
-p4l5 publisher). According
-p4l6 to these old tales,
-p4l7 which survive mostly
-p4l8 in the hills and remote
-p5l1 villages where Lord
-p5l2 British is as yet a
-p5l3 distant and mythical
-p5l4 ruler, the gods of old
-p5l5 (a fanciful notion!)
-p5l6 met to discuss the
-p5l7 progress of creating
-p5l8 the world in mystical
-p6l1 rooms. A simple
-p6l2 analysis reveals these
-p6l3 rooms to be mere
-p6l4 mythological
-p6l5 generalizations.
-p6l6 The Star Chamber
-p6l7 is clearly a reference
-p6l8 to the sky. The Pit
-p7l1 is certainly an
-p7l2 Underworld analogous
-p7l3 to the Snake hills of
-p7l4 other tales and the
-p7l5 Glass House is no
-p7l6 doubt the vantage point
-p7l7 from which the gods
-p7l8 observed their
-p8l1 creation. All is simple
-p8l2 when seen from this
-p8l3 perspective, leaving
-p8l4 only the mysterious
-p8l5 reference to dinners.
-p8l6 Oddly enough the
-p8l7 rhyme is universally
-p8l8 used only for
-p9l1 midnight feedings,
-p9l2 never during the day.
-}
-book 27
-{
-pages 8
-title Talking to wisps
-author Heigel of Moonglow
-p1l1 This volume was
-p1l2 sponsored by
-p1l3 donations from Lord
-p1l4 Blackthorn, ever a
-p1l5 supporter of
-p1l6 understanding the
-p1l7 other sentient races of
-p1l8 Britannia.
-p2l1 Wisps are the most
-p2l2 intelligent of the
-p2l3 nonhuman races
-p2l4 inhabiting Britannia.
-p2l5 'Tis claimed by the
-p2l6 great sages that
-p2l7 someday we shall be
-p2l8 able to converse with
-p3l1 them openly in our
-p3l2 native tongue --
-p3l3 indeed, we must hope
-p3l4 that wisps learn our
-p3l5 language, for it is not
-p3l6 possible for humans
-p3l7 to pronounce wispish!
-p3l8 The wispish
-p4l1 language seems to only
-p4l2 contain one vowel, the
-p4l3 letter Y. However, the
-p4l4 letters W, C, M and L
-p4l5 seem to be treated
-p4l6 grammatically as
-p4l7 vowels and in addition
-p4l8 every letter is
-p5l1 followed by what
-p5l2 sounds to the human
-p5l3 ear like a glottal stop.
-p5l4 It is possible that the
-p5l5 glottal stop is
-p5l6 considered a vowel as
-p5l7 well.
-p5l8 Wisps do make use
-p6l1 of what sounds to us
-p6l2 like pitch and
-p6l3 emphasis shifts
-p6l4 similar to
-p6l5 exclamations and
-p6l6 questions.
-p6l7 The average word in
-p6l8 wispish seems to
-p7l1 consist of three
-p7l2 phonemes and three
-p7l3 glottal stops, plus
-p7l4 possibly a pitch shift.
-p7l5 It often sounds
-p7l6 burning or crackling.
-p7l7 Some have speculated
-p7l8 that what we are
-p8l1 analyzing is in fact
-p8l2 nothing more than the
-p8l3 very air crackling
-p8l4 near the wisp's glow,
-p8l5 and not language, but
-p8l6 this is of course
-p8l7 unlikely.
-}
-book 28
-{
-pages 18
-title Britannian flora: A casual guide
-author Herbert the Lost
-p1l1 Oft 'pon rambling
-p1l2 through the woods
-p1l3 avoiding bears have I
-p1l4 spotted some plant
-p1l5 whose like I have
-p1l6 never seen before and
-p1l7 concluding that I was
-p1l8 a blithering idiot for
-p2l1 failing to notice it
-p2l2 in the past. Equally
-p2l3 as oft have I
-p2l4 concluded
-p2l5 that I was a worse
-p2l6 idiot for not running
-p2l7 faster from the bear.
-p2l8 While not all my
-p3l1 readers may share
-p3l2 my proclivites for
-p3l3 tree-climbing, it
-p3l4 occurred to me that
-p3l5 mayhap mine
-p3l6 information might
-p3l7 serve some humble
-p3l8 purpose.
-p4l1 The two most
-p4l2 unique flower plants
-p4l3 in the Britannian
-p4l4 countryside are the
-p4l5 orfleur and the
-p4l6 whiteflower, also
-p4l7 called white horns.
-p4l8 The orfleur is
-p5l1 notable for its massive
-p5l2 orange-red blossoms,
-p5l3 which dwarf
-p5l4 marigolds like the sun
-p5l5 dwarfs you (sic)
-p5l6 common fireball spell.
-p5l7 The odor of said
-p5l8 blooms is best
-p6l1 described as
-p6l2 peppermint-apple,
-p6l3 with a dash of garlic.
-p6l4 'Tis a popular potted
-p6l5 plant despite, or
-p6l6 perhaps because of,
-p6l7 its exotic nature.
-p6l8 Whiteflowers
-p7l1 exude a subtle
-p7l2 fragrance not unlike
-p7l3 that of freshly
-p7l4 shaven wood mixed
-p7l5 with cool lemon ice.
-p7l6 Their tall stands
-p7l7 always droop with the
-p7l8 heavy weight of their
-p8l1 massive blooms, oft as
-p8l2 large as a child's head.
-p8l3 The flowers are so
-p8l4 large that one may
-p8l5 scoop out the pollen in
-p8l6 handfuls and during
-p8l7 the spring season
-p8l8 many a prank hath
-p9l1 been played by idle
-p9l2 boys 'pon their sisters
-p9l3 by dumping said
-p9l4 pollen into their
-p9l5 clothing drawers,
-p9l6 causing sneezes for
-p9l7 days.
-p9l8 The most
-p10l1 interesting native tree
-p10l2 to Britannia is the
-p10l3 spider tree. The
-p10l4 reason for its naming
-p10l5 is obscure, but may
-p10l6 have to do with the
-p10l7 twisted gray stalks
-p10l8 from which the
-p11l1 spherical canopy
-p11l2 sprouts. 'Tis
-p11l3 something of a
-p11l4 misnomer to term
-p11l5 these trunks as they
-p11l6 are spindly and
-p11l7 flexible. Spider trees
-p11l8 provide a fresh, piney
-p12l1 smell to a room and are
-p12l2 therefore often potted.
-p12l3 In jungle climes,
-p12l4 one finds the blade
-p12l5 plant, whose sharp
-p12l6 leaves oft collect
-p12l7 water for the thirsty
-p12l8 traveler, yet can draw
-p13l1 blood easily.
-p13l2 The deadliest plant,
-p13l3 if you can call a
-p13l4 fungus a plant, is the
-p13l5 Exploding Red Spotted
-p13l6 Toadstool. No pattern
-p13l7 can be discerned to its
-p13l8 habitats save malice,
-p14l1 for merely
-p14l2 approaching results in
-p14l3 the cap exploding with
-p14l4 powder, noxious gas,
-p14l5 and tiny painful
-p14l6 pellets flying in all
-p14l7 directions.
-p14l8 Unfortunately, 'tis
-p15l1 impossible to tell it
-p15l2 apart from the
-p15l3 Ordinary Red Spotted
-p15l4 Toadstool save through
-p15l5 experimentation.
-p15l6 Truly odd among the
-p15l7 varied flora of
-p15l8 Britannia, however,
-p16l1 are those which bear
-p16l2 names clearly alien to
-p16l3 our tongue. Among
-p16l4 these I name the
-p16l5 Tuscany pine (for I
-p16l6 have never seen a
-p16l7 region of this world
-p16l8 named Tuscany), the
-p17l1 o'hii tree, whose very
-p17l2 name sounds like some
-p17l3 tropical isle and the
-p17l4 welsh poppy, which
-p17l5 while different from
-p17l6 an ordinary poppy in
-p17l7 color and appearance,
-p17l8 is prefaced with the
-p18l1 odd word welsh,
-p18l2 which as far as I
-p18l3 know means to forgo
-p18l4 paying a debt.
-}
-book 29
-{
-pages 8
-title The ranking of trades
-author Lord Higginbotham
-p1l1 Whilst 'tis true that
-p1l2 within each trade, one
-p1l3 finds differing titles
-p1l4 and accolades granted
-p1l5 to the members of a
-p1l6 given guild,
-p1l7 nonetheless for the
-p1l8 betterment of trade
-p2l1 and understanding, we
-p2l2 must have a
-p2l3 commonality of titling.
-p2l4 For those who may
-p2l5 find themselves
-p2l6 ignorant of the finer
-p2l7 distinctions between a
-p2l8 three-knot member
-p3l1 of? the Sailors'
-p3l2 Maritime Association
-p3l3 and a second
-p3l4 thaumaturge, this
-p3l5 book shall serve as a
-p3l6 simple introduction to
-p3l7 the common cant used
-p3l8 when members of
-p4l1 differing guilds and
-p4l2 trade organizations
-p4l3 must trade with each
-p4l4 other and must
-p4l5 establish relative
-p4l6 credentials. Neophyte,
-p4l7 Has shown interest
-p4l8 in learning the craft
-p5l1 and some meager
-p5l2 talent. Novice,
-p5l3 Is practicing basic
-p5l4 skills but has not
-p5l5 been admitted to full
-p5l6 standing.
-p5l7 Apprentice, A student
-p5l8 of the discipline.
-p6l1 Journeyman, Warrented
-p6l2 to practice the
-p6l3 discipline under the
-p6l4 eyes of a tutor.
-p6l5 Expert, A full member
-p6l6 of the guild.
-p6l7 Adept, A member of the
-p6l8 guild qualified to
-p7l1 teach others.
-p7l2 Master, Acknowledged
-p7l3 as qualified to lead a
-p7l4 hall or business.
-p7l5 Grandmaster, Rarely a
-p7l6 permanent title,
-p7l7 granted in
-p7l8 common parlance to
-p8l1 those who have shown
-p8l2 extreme mastery of
-p8l3 their craft recently.
-}
-book 30
-{
-pages 16
-title The wild girl of the forest
-author Horace
-p1l1 Her name was
-p1l2 Leyla, she said and
-p1l3 her hair was braided
-p1l4 wild with creepers
-p1l5 and thorns. I marveled
-p1l6 that they did not hurt
-p1l7 her, but when I asked,
-p1l8 she but shrugged and
-p2l1 let her eyes roam once
-p2l2 more across the
-p2l3 woods. Though I had
-p2l4 my hands securely
-p2l5 fastened by her
-p2l6 ropes, I itched to
-p2l7 reach out and comb
-p2l8 that unruly golden
-p3l1 mane, dirtied and
-p3l2 leaf-ridden.
-p3l3 Her provenance,
-p3l4 she told me over
-p3l5 nights illuminated by
-p3l6 campfires, was once
-p3l7 the city of Trinsic.
-p3l8 She claimed to have
-p4l1 been kidnapped and
-p4l2 raised by orcs, which
-p4l3 I judged an unlikely
-p4l4 tale, for all know orcs
-p4l5 delight in eating the
-p4l6 meat of honest folk.
-p4l7 When I told her this,
-p4l8 she laughed a fey
-p5l1 laugh and gaily
-p5l2 admitted that honest
-p5l3 she was not, for oft
-p5l4 had she stolen folk
-p5l5 away from caravans
-p5l6 to loot their
-p5l7 possessions from an
-p5l8 unconscious body!
-p6l1 At this, I began to
-p6l2 fear for my life and
-p6l3 her smile seemed full
-p6l4 of teeth sharper than
-p6l5 a human ought to have,
-p6l6 for the tale of orcish
-p6l7 raising had struck
-p6l8 fear into the marrow
-p7l1 of my bones. Wil thou
-p7l2 eat me? I asked,
-p7l3 a-tremble, fearing
-p7l4 the answer.
-p7l5 And she cocked her
-p7l6 head at me, like a wild
-p7l7 animal facing a word
-p7l8 that it dost not
-p8l1 understand and the
-p8l2 fixity in her eyes
-p8l3 was a glimpse into the
-p8l4 deeper reaches of the
-p8l5 Abyss. But she
-p8l6 finally grunted and
-p8l7 said Nay, in a voice
-p8l8 that recalled to me a
-p9l1 child. Nay, she said,
-p9l2 for thou dost remind
-p9l3 me of a boy I knew
-p9l4 once, when I was a
-p9l5 girl who played in a
-p9l6 city of great sandstone
-p9l7 walls, before I was
-p9l8 taken. He had sandy
-p10l1 hair like thee and I
-p10l2 dreamt as a child of
-p10l3 holding his hand and
-p10l4 sharing flavored ice.
-p10l5 His name was
-p10l6 Japheth.
-p10l7 The next morning
-p10l8 she let me go, stripped
-p11l1 of my pouch and
-p11l2 clothes and bade me
-p11l3 run through the
-p11l4 woods and to fear
-p11l5 recapture, for surely
-p11l6 her heart would not
-p11l7 soften again. 'Twas a
-p11l8 fearful run and I
-p12l1 came to the road to
-p12l2 Yew with welts and
-p12l3 scratches run
-p12l4 rampant crost my
-p12l5 skin, but I did not see
-p12l6 her again.
-p12l7 Oft have I wondered
-p12l8 of the boy named
-p13l1 Japheth and whether
-p13l2 he remembers a girl
-p13l3 who lived in sandstone
-p13l4 walls. The only
-p13l5 Japheth I know is the
-p13l6 Guildmaster of
-p13l7 Paladins who died last
-p13l8 year warring amidst
-p14l1 the orcs and though
-p14l2 he had indeed sandy
-p14l3 hair, I cannot picture
-p14l4 him side by side with
-p14l5 a feral girl whose
-p14l6 tongue has tasted of
-p14l7 human flesh. Yet the
-p14l8 paths of fate are
-p15l1 strange indeed and I
-p15l2 suppose 'tis possible
-p15l3 that this paladin died
-p15l4 defending his
-p15l5 remembered lady's
-p15l6 honor, unknowingly
-p15l7 struck down by the
-p15l8 orc that she called
-p16l1 father.
-}
-book 31
-{
-pages 10
-title The tale of three tribes
-author Janet
-p1l1 The dungeon known
-p1l2 as Despise is in fact
-p1l3 not a dungeon as such,
-p1l4 but rather a large
-p1l5 natural cave.
-p1l6 Inhospitable and
-p1l7 unfriendly to visitors
-p1l8 it is filled with damp
-p2l1 spots where the
-p2l2 deadly Exploding Red
-p2l3 Spotted Toadstool
-p2l4 grows in abundance.
-p2l5 According to the
-p2l6 oldest of historical
-p2l7 texts, in days gone by
-p2l8 the cave was once the
-p3l1 home of three
-p3l2 separate tribes who
-p3l3 had come to an
-p3l4 accommodation with
-p3l5 each other. Oddly
-p3l6 enough, the three
-p3l7 tribes were of
-p3l8 dragons, lizard men,
-p4l1 and rat men. While
-p4l2 today few except
-p4l3 extremists associated
-p4l4 with Lord Blackthorn
-p4l5 regard these latter two
-p4l6 as being intelligent
-p4l7 beings, apparently
-p4l8 they have indeed
-p5l1 fallen from a more
-p5l2 evolved state over the
-p5l3 years.
-p5l4 'Tis said that these
-p5l5 three races did dwell
-p5l6 in relative harmony
-p5l7 within the vast cave,
-p5l8 building when they
-p6l1 required it and
-p6l2 trading amongst
-p6l3 themselves if needed.
-p6l4 But over time,
-p6l5 something happened,
-p6l6 and they were forced
-p6l7 to withdraw from
-p6l8 their society, until
-p7l1 today thou mayst find
-p7l2 individuals of each
-p7l3 species within the
-p7l4 dungeon, but never
-p7l5 again as a civilization.
-p7l6 'Tis also said that
-p7l7 someday the three
-p7l8 tribes may return to
-p8l1 Despise, to once again
-p8l2 inhabit it together.
-p8l3 Until then, nothing
-p8l4 remains as a token of
-p8l5 this save an oddly
-p8l6 intelligent skeleton
-p8l7 magically enchanted
-p8l8 that doth speak when
-p9l1 questions are asked
-p9l2 and from whom I
-p9l3 obtained these tales
-p9l4 one day, when I was
-p9l5 pursued by evil
-p9l6 monsters and fled into
-p9l7 his skeletal arms.
-p9l8 Fortunately, I
-p10l1 escaped and lived to
-p10l2 write it all down!
-}
-book 32
-{
-pages 24
-title The burning of Trinsic
-author Paladin Japheth
-p1l1 'Twas a sight to see,
-p1l2 the sunlight falling
-p1l3 lightly on the
-p1l4 sandstone walls of
-p1l5 Trinsic 'pon a morning
-p1l6 in spring.
-p1l7 Children ran along
-p1l8 the parapets and
-p2l1 walkways, their
-p2l2 laughter and running
-p2l3 providing music to the
-p2l4 daybreak, despite
-p2l5 their oft-ragged
-p2l6 clothing.
-p2l7 The guards who
-p2l8 maintained a vigilant
-p3l1 outlook from atop the
-p3l2 towers would smile
-p3l3 indulgently as
-p3l4 children slammed into
-p3l5 their armored legs and
-p3l6 brushed past them.
-p3l7 And I was one of
-p3l8 those young ones,
-p4l1 letting my joy rise up
-p4l2 to the skies.
-p4l3 Little did we all
-p4l4 know of the darker
-p4l5 days that would lie
-p4l6 ahead, for we were too
-p4l7 young.
-p4l8 Had we but gained
-p5l1 access to the quiet
-p5l2 coucils held in the
-p5l3 Paladin tower as it
-p5l4 faced the sea, councils
-p5l5 lit by candlelight and
-p5l6 worry, we would have
-p5l7 learned more of the
-p5l8 fears of imminent
-p6l1 attack from the
-p6l2 forest, where foul
-p6l3 creatures born of
-p6l4 dank caves and
-p6l5 darkness were
-p6l6 marauding ever more
-p6l7 often into the lands
-p6l8 around Trinsic's moat.
-p7l1 But we were
-p7l2 children! The parapets
-p7l3 and the moat were
-p7l4 places to play, not
-p7l5 stout defenses and
-p7l6 we gave no thought to
-p7l7 the necessities that
-p7l8 must have required
-p8l1 their construction.
-p8l2 We used to reach
-p8l3 the sheltered
-p8l4 orchards on the lee
-p8l5 side of the parapet
-p8l6 walls, where the
-p8l7 southern river cut
-p8l8 through the city, by
-p9l1 swimming across the
-p9l2 water.
-p9l3 The rich folk who
-p9l4 lived in the great
-p9l5 manses there would
-p9l6 shout from their
-p9l7 windows and shake
-p9l8 their fists, for we
-p10l1 would run through
-p10l2 their gardens and tear
-p10l3 up the delicate
-p10l4 foxgloves and
-p10l5 orfleurs with our
-p10l6 unshod dirty feet.
-p10l7 Then we would dive
-p10l8 into the water and
-p11l1 splash merrily to the
-p11l2 fruit trees.
-p11l3 The southern river
-p11l4 lazily slid under an
-p11l5 ungated arch in the
-p11l6 mighty wall and we
-p11l7 would lay on the
-p11l8 grassy bank and
-p12l1 watch it gurgle by the
-p12l2 lily pads.
-p12l3 That spring that
-p12l4 pleasant spot became
-p12l5 the doorway through
-p12l6 which our city of
-p12l7 Trinsic let in the
-p12l8 monstrous deformed
-p13l1 humanoids that
-p13l2 savaged us.
-p13l3 I lay upon that
-p13l4 grassy bank and
-p13l5 watched them wade
-p13l6 in, their coarse hair
-p13l7 wet and matted, algae
-p13l8 and muck festooning
-p14l1 their wild brows.
-p14l2 They caught sight of a
-p14l3 quicksilver girl with
-p14l4 bright blond hair and
-p14l5 lively eyes. Her name
-p14l6 was Leyla and that
-p14l7 spring I had held fond
-p14l8 dreams of holding her
-p15l1 hand and sharing
-p15l2 flavored ice while
-p15l3 dangling our feet off
-p15l4 the small bridge by
-p15l5 Smugglers Gate.
-p15l6 And I said nothing
-p15l7 when they caught
-p15l8 her and did not cry
-p16l1 out when they dragged
-p16l2 her off through that
-p16l3 breach in our wall,
-p16l4 and did not warn the
-p16l5 city when I saw the
-p16l6 helmeted orc captains
-p16l7 call the charge upon
-p16l8 the mansions.
-p17l1 Blame me not, for I
-p17l2 was but a child and
-p17l3 one who hid in the
-p17l4 branches of the peach
-p17l5 trees, all a-tremble
-p17l6 whilst I watched the
-p17l7 smoke rise from Sean
-p17l8 the tailor's and fire
-p18l1 lash out at the roof of
-p18l2 witchy Eleanor's
-p18l3 tavern.
-p18l4 To this day I have
-p18l5 had no word of Leyla,
-p18l6 and to this day the
-p18l7 smell of burning wood
-p18l8 can conjure terrible
-p19l1 dreams. Yet with the
-p19l2 eyes of adulthood, 'tis
-p19l3 possible to examine
-p19l4 the flaws in the
-p19l5 defense of Trinsic on
-p19l6 that fateful day and
-p19l7 the reasons why our
-p19l8 walls are now
-p20l1 double-thick and
-p20l2 why our buildings are
-p20l3 now built as
-p20l4 fortresses within a
-p20l5 somber fortified city.
-p20l6 While I can look out
-p20l7 from the top of the
-p20l8 new Paladin tower,
-p21l1 and spy the mighty
-p21l2 white sails across the
-p21l3 barrier island and
-p21l4 can descry the small
-p21l5 hollow south of the
-p21l6 city where gypsies
-p21l7 are wont to camp, I can
-p21l8 also envision the city
-p22l1 as it might be burning,
-p22l2 and I bless the bargain
-p22l3 we made: space for
-p22l4 safety, grace for
-p22l5 sturdiness and wood
-p22l6 for stone.
-p22l7 Whilst I live, I shall
-p22l8 not see Trinsic burn,
-p23l1 and no more cries of
-p23l2 little girls will haunt
-p23l3 the sleep of our fair
-p23l4 citizens.
-p23l5 This is mine oath,
-p23l6 as I live and breath.
-p23l7 -Japheth, Paladin
-p23l8 Guildmaster of the
-p24l1 City of Trinsic.
-}
-book 33
-{
-pages 9
-title The Fight
-author M. De La Garza
-p1l1 A cold autumn
-p1l2 morning with misty
-p1l3 fog secures a dozen
-p1l4 brave knights,
-p1l5 supplying hidden
-p1l6 shelter from prying
-p1l7 eyes deep in the
-p1l8 foothills of the
-p2l1 vibrant valley.
-p2l2 Dragons soar like
-p2l3 fierce warriors,
-p2l4 circling around and
-p2l5 around, then roaring
-p2l6 like thunder, rallying
-p2l7 all that listen. The
-p2l8 dragons land swiftly
-p3l1 beside the proud
-p3l2 warriors, bending
-p3l3 necks and extending
-p3l4 wings, lifting black
-p3l5 claws and allowing
-p3l6 valiant fighters to ride
-p3l7 forth and win an
-p3l8 arisen battle. The
-p4l1 increasing winds
-p4l2 silence the sounds of
-p4l3 combat and they
-p4l4 fight, standing their
-p4l5 ground like mothers
-p4l6 protecting their
-p4l7 children, bright
-p4l8 armor flashing as
-p5l1 each one falls.
-p5l2 A cold autumn's
-p5l3 evening with misty
-p5l4 fog cradles a dozen
-p5l5 battered corpses of
-p5l6 knights, creasing
-p5l7 them in currents of
-p5l8 winds that run deep in
-p6l1 the foothills of the
-p6l2 desolate valley.
-p6l3 Dragons glide like
-p6l4 silent angels, circling
-p6l5 around and around,
-p6l6 then calling like
-p6l7 banshees; keening
-p6l8 cries of mourning.
-p7l1 The dragons land
-p7l2 heavily beside the
-p7l3 peaceful bodies,
-p7l4 bending their necks
-p7l5 and extending wings,
-p7l6 lifting black claws
-p7l7 and pinching the
-p7l8 sacred ground and
-p8l1 new eternal home.
-p8l2 The dying winds
-p8l3 whistle among the
-p8l4 dead in somber
-p8l5 procession and they
-p8l6 lie, grasping weapons
-p8l7 to protect themselves
-p8l8 like knights still in
-p9l1 battle, shattered
-p9l2 armor shining like
-p9l3 newly born stars.
-}
-book 34
-{
-pages 16
-title A primer on arms
-author Martin
-p1l1 ABOUT THE AUTHOR:
-p1l2 Martin was, for most
-p1l3 of his life, the
-p1l4 Weaponsmaster of
-p1l5 Serpent's Hold, until
-p1l6 his death at 92, of an
-p1l7 overgrown bunion.
-p1l8 These are the basic
-p2l1 element to consider in
-p2l2 assessing a weapon of
-p2l3 which all warrior
-p2l4 who regard
-p2l5 themselves as more
-p2l6 than mere
-p2l7 mercenaries should be
-p2l8 aware. First and most
-p3l1 obvious is the amount
-p3l2 of damage that the
-p3l3 weapon may do against
-p3l4 unprotected flesh.
-p3l5 While 'tis this that
-p3l6 first attracts the
-p3l7 attention of the novice
-p3l8 'tis a deadly mistake
-p4l1 to regard it as the
-p4l2 sole value of a weapon.
-p4l3 While it may prove
-p4l4 devastating indeed as a
-p4l5 means of causing
-p4l6 damage, a weapon
-p4l7 must also serve as
-p4l8 stout shield when
-p5l1 engaged in combat.
-p5l2 Hence the second
-p5l3 issue to which to pay
-p5l4 attention is the amount
-p5l5 of protection that a
-p5l6 weapon may offer.
-p5l7 Pay close attention to
-p5l8 the guard on it, if it
-p6l1 be a blade, or the
-p6l2 stoutness of it's wood
-p6l3 if it is a polearm.
-p6l4 Oft related to this is
-p6l5 the wait of a weapon,
-p6l6 for a heavy weapon is
-p6l7 more difficult to
-p6l8 maneuver to block
-p7l1 with, though it may do
-p7l2 more damage to they
-p7l3 opponent. If a weapon
-p7l4 is too heavy for the
-p7l5 wielder to move it
-p7l6 freely, they should
-p7l7 choose another and not
-p7l8 attempt to prove their
-p8l1 prowess by the size
-p8l2 of their sword.
-p8l3 The reach of the
-p8l4 weapon both increase
-p8l5 its defensive ability,
-p8l6 and renders it more
-p8l7 useful in open spaces
-p8l8 as it allows attack
-p9l1 against the opponent
-p9l2 without the need to
-p9l3 close. But be aware of
-p9l4 the limitations of thy
-p9l5 weapon! For a weapon
-p9l6 with great reach may
-p9l7 be useless in close
-p9l8 quarter, for lack of
-p10l1 space to maneuver it.
-p10l2 Should that
-p10l3 dagger-wielding
-p10l4 enemy close on thee
-p10l5 and they halberd, 'tis
-p10l6 best to flee.
-p10l7 Lastly, a factor that
-p10l8 must always be
-p11l1 considered is the
-p11l2 condition of the
-p11l3 weapon. It might be a
-p11l4 wondrous magical
-p11l5 blade of surpassing
-p11l6 sharpness and it may
-p11l7 leap to block blows
-p11l8 with a mind of its
-p12l1 own. It also might be
-p12l2 of such flimsy
-p12l3 construction, or
-p12l4 damaged to such an
-p12l5 extent, that the first
-p12l6 time it clangs against
-p12l7 steel, 'twill shatter
-p12l8 into useless shards.
-p13l1 Seek ye a good
-p13l2 blacksmith should
-p13l3 they weapon become
-p13l4 damaged, but be aware
-p13l5 that their
-p13l6 ministrations may
-p13l7 simply make the
-p13l8 matter worse.
-p14l1 While mages of
-p14l2 some ability oft create
-p14l3 magical weapons
-p14l4 which enhance skill,
-p14l5 are preternaturally
-p14l6 sharp, or incinerate
-p14l7 the enemy as they
-p14l8 fall, to mind the
-p15l1 greatest gift that they
-p15l2 can grant a stout
-p15l3 sword is to make it
-p15l4 resistant to damage,
-p15l5 for they own skill can
-p15l6 make up the
-p15l7 difference. Except
-p15l8 for the fireball, but
-p16l1 if the corpse is
-p16l2 charred, then so will
-p16l3 be the possessions,
-p16l4 which maketh looting
-p16l5 difficult!
-}
-book 35
-{
-pages 12
-title Deceit: A dungeon of horrors
-author Mercenary Justin
-p1l1 My employers have
-p1l2 oft taken me into this
-p1l3 den of hideous
-p1l4 creatures and I
-p1l5 thought that it
-p1l6 behooved me to write
-p1l7 down what I know of
-p1l8 it, now that I am
-p2l1 retired from the life
-p2l2 of an adventurer for
-p2l3 hire.
-p2l4 Deceit was once a
-p2l5 temple to forgotten
-p2l6 powers of old. It was
-p2l7 taken over by mages
-p2l8 who eventually were
-p3l1 driven out by the
-p3l2 depredations of their
-p3l3 own evil lackeys.
-p3l4 However, many of the
-p3l5 magical traps and
-p3l6 devices that they
-p3l7 placed for their
-p3l8 defenses remain,
-p4l1 particularly those the
-p4l2 wizards used to
-p4l3 protect their
-p4l4 treasures.
-p4l5 The dungeon is
-p4l6 mystically linked by
-p4l7 crystal balls placed in
-p4l8 different locations.
-p5l1 These magical orbs do
-p5l2 transmit speech and
-p5l3 even have memory of
-p5l4 things that have been
-p5l5 said near them. No
-p5l6 doubt they once served
-p5l7 as a warning system.
-p5l8 Be wary of a
-p6l1 brazier that giveth
-p6l2 warning when
-p6l3 approached: thou canst
-p6l4 use it to summon
-p6l5 deadly creatures.
-p6l6 There be a
-p6l7 tantalizing chest,
-p6l8 undoubtedly full of
-p7l1 treasure, that cannot
-p7l2 be reached save past a
-p7l3 complex series of
-p7l4 pressure plates that
-p7l5 trigger deadly spikes.
-p7l6 As I never had
-p7l7 sufficient folk with
-p7l8 me to unlock the
-p8l1 puzzle, I never
-p8l2 obtained the riches
-p8l3 that awaited there.
-p8l4 Do not investigate
-p8l5 the iron maidens too
-p8l6 closely, for they make
-p8l7 suck you within them!
-p8l8 There is one place
-p9l1 where a deadly trap
-p9l2 can only be disarmed
-p9l3 by making use of a
-p9l4 statue that cleverly
-p9l5 conceals a lever.
-p9l6 Oft one encounters
-p9l7 the deadly exploding
-p9l8 toadstool; the ones in
-p10l1 Deceit are deadlier
-p10l2 than most, as they
-p10l3 explode continually.
-p10l4 Likewise, the very
-p10l5 pools of water and
-p10l6 slime on the floor may
-p10l7 poisen thee.
-p10l8 The most magical
-p11l1 device in the dungeon
-p11l2 is a mystical bridge
-p11l3 that can only be
-p11l4 triggered by a lever
-p11l5 embedded in the floor.
-p11l6 Be wary, however,
-p11l7 for the bridge thus
-p11l8 created doth burst
-p12l1 into flame when one
-p12l2 passeth across it!
-}
-book 36
-{
-pages 14
-title The bold stranger
-author Old Fabio the Poor
-p1l1 In a time before
-p1l2 time, the Gods that Be
-p1l3 assembled a group of
-p1l4 artisans, craftsmen
-p1l5 and lore masters (for,
-p1l6 yes, even in those
-p1l7 days, art existed) to
-p1l8 create the world of
-p2l1 Sosaria. To this group,
-p2l2 the gods gave a tiny
-p2l3 world, Rytabul, in
-p2l4 which to test their
-p2l5 works, to see if they
-p2l6 were of the quality
-p2l7 desired for the true
-p2l8 world in which they
-p3l1 would be placed. And
-p3l2 though the gods were
-p3l3 tight fisted with their
-p3l4 gold, this small crew
-p3l5 worked hard and long,
-p3l6 and were happy in
-p3l7 their tasks.
-p3l8 A small corner of
-p4l1 Rytabul had been
-p4l2 claimed by the artisan
-p4l3 Selrahc the Slow.
-p4l4 Though he was not the
-p4l5 fastest of the
-p4l6 assembled workers,
-p4l7 the gods smiled upon
-p4l8 his work, even
-p5l1 presenting him with a
-p5l2 mystic talisman
-p5l3 proclaiming his work
-p5l4 the best among the
-p5l5 newer artisans. And
-p5l6 so Selrahc went about
-p5l7 his business, creating
-p5l8 hundreds of designs
-p6l1 which would one day
-p6l2 add color and variety
-p6l3 to Sosaria.
-p6l4 One day a stranger
-p6l5 appeared to Selrahc.
-p6l6 His chest was bare
-p6l7 and he wore the
-p6l8 trousers of the
-p7l1 brightest green and
-p7l2 wherever he went,
-p7l3 plants grew in his
-p7l4 footsteps. This caused
-p7l5 Selrahc no end of
-p7l6 trouble, the stranger
-p7l7 always looking over
-p7l8 his shoulder and the
-p8l1 plants sprouting in
-p8l2 places Selrahc
-p8l3 required to ply his
-p8l4 art. And so Selrahc
-p8l5 approached the
-p8l6 stranger and bade him
-p8l7 speak. But this man in
-p8l8 green remained silent.
-p9l1 Selrahc pleaded with
-p9l2 the stranger to give
-p9l3 his name and would
-p9l4 he please leave
-p9l5 Selrahc to his work.
-p9l6 But this mysterious
-p9l7 stranger remained
-p9l8 mute.
-p10l1 This angered
-p10l2 Selrahc mightily. Who
-p10l3 was this silent man,
-p10l4 interfering with
-p10l5 tasks the gods
-p10l6 themselves had
-p10l7 entrusted to Selrahc?
-p10l8 In an attempt to
-p11l1 embarass this
-p11l2 interloper, Selrahc
-p11l3 stole his green
-p11l4 trousers, leaving him
-p11l5 naked and open to
-p11l6 comments about his
-p11l7 very manhood and
-p11l8 still the stranger
-p12l1 would not speak,
-p12l2 would not leave this
-p12l3 tiny corner of
-p12l4 Rytabul.
-p12l5 Vexed to his very
-p12l6 limits, Selrahc took
-p12l7 his war axe and smote
-p12l8 the silent one
-p13l1 mightily, again and
-p13l2 again, until the silent
-p13l3 stranger ran away,
-p13l4 having never said a
-p13l5 word and never
-p13l6 showed himself in
-p13l7 Rytabul again.
-p13l8 Thus endeth the
-p14l1 tale of the bold
-p14l2 stranger.
-}
-book 37
-{
-pages 18
-title The major trade associations
-author Pieter of Vesper
-p1l1 There are ten major
-p1l2 trade associations that
-p1l3 operate legitimately in
-p1l4 the lands of Britannia
-p1l5 and among its trading
-p1l6 partners. Many of
-p1l7 these guilds are
-p1l8 divided into local or
-p2l1 specialty subguilds,
-p2l2 who use the same
-p2l3 colors but vary the
-p2l4 heraldic pattern.
-p2l5 There are many
-p2l6 lesser trade
-p2l7 associations that have
-p2l8 closed membership,
-p3l1 and one can join only
-p3l2 by invitation.
-p3l3 Beltran's Guide to the
-p3l4 Guilds is the
-p3l5 definitive text on the
-p3l6 fulll range of guilds
-p3l7 and other associations
-p3l8 in Britannia and I
-p4l1 heartily recommend it.
-p4l2 In what follows I
-p4l3 have attempted to
-p4l4 bring together the
-p4l5 known information
-p4l6 regarding these
-p4l7 guilds. I offer thee
-p4l8 the name, typical
-p5l1 membership, heraldic
-p5l2 colors, known
-p5l3 specialty
-p5l4 organizaitons within
-p5l5 the larger guild and
-p5l6 any known
-p5l7 affiliations to other
-p5l8 guilds, which often
-p6l1 occur because of trade
-p6l2 reasons.
-p6l3 League of Rangers,
-p6l4 Members: rangers,
-p6l5 bowyers, animal
-p6l6 trainers, Colors:
-p6l7 Red, gold and blue,
-p6l8 The Guild of Arcane
-p7l1 Arts, Members:
-p7l2 alchemists and wizards,
-p7l3 Colors: blue and purple
-p7l4 Subguilds: Illusionists,
-p7l5 Mages, Wizards
-p7l6 Affiliations: Healer's
-p7l7 Guild
-p7l8 The Warrior's Guild,
-p8l1 Members: mercenaries,
-p8l2 soldiery, guardsmen,
-p8l3 weapons masters,
-p8l4 paladins, Colors:
-p8l5 Blue and red
-p8l6 Subguilds: Cavalry,
-p8l7 Fighters, Warriors,
-p8l8 Affiliations: League
-p9l1 of Rangers,
-p9l2 Merchant's
-p9l3 Association, Members:
-p9l4 innkeepers,
-p9l5 taverners, jewelers,
-p9l6 provisioners, Colors:
-p9l7 gold coins on a green
-p9l8 field for Merchants,
-p10l1 White and green for
-p10l2 others
-p10l3 Subguilds: Barters,
-p10l4 Provisioners,
-p10l5 Traders, Merchants,
-p10l6 Guild of Healers
-p10l7 Members: Healers,
-p10l8 Colors: Green, gold
-p11l1 and purple
-p11l2 Affiliations: Guild of
-p11l3 Arcane Arts,
-p11l4 Mining Cooperative
-p11l5 Members: miners
-p11l6 Colors: blue and black
-p11l7 checkers, with a gold
-p11l8 cross
-p12l1 Affiliations: Order of
-p12l2 Engineers,
-p12l3 Order of Engineers:
-p12l4 Members: tinkers and
-p12l5 engineers, Colors:
-p12l6 Blue, gold and
-p12l7 purple vertical bars
-p12l8 Affiliations: Mining
-p13l1 Cooperative,
-p13l2 Society of Clothiers
-p13l3 Members: tailors and
-p13l4 weavers, Colors:
-p13l5 purple, gold and red
-p13l6 horizontal bars,
-p13l7 Maritime Guild
-p13l8 Members: fishermen,
-p14l1 sailors, mapmakers,
-p14l2 shipwrights, Colors:
-p14l3 blue and white
-p14l4 Subguilds: Fishermen,
-p14l5 Sailors, Shipwrights,
-p14l6 Bardic Collegium:
-p14l7 Members: bards,
-p14l8 musicians,
-p15l1 storytellers
-p15l2 Colors: Purple, red
-p15l3 and gold checkerboard
-p15l4 In addition to these
-p15l5 aboveboard guilds,
-p15l6 there is one other
-p15l7 covert organization
-p15l8 well known to exist,
-p16l1 whose membership is
-p16l2 likewise open to those
-p16l3 who seek to apply. In
-p16l4 some places where
-p16l5 illegal activities are
-p16l6 condoned more openly,
-p16l7 they dare post their
-p16l8 sigils publicly.
-p17l1 No law-abiding
-p17l2 citizen would ever
-p17l3 join a guild such as
-p17l4 this, of course! Yet
-p17l5 their existence must
-p17l6 be acknowledged of
-p17l7 the sake of
-p17l8 completeness.
-p18l1 Society of Thieves
-p18l2 Members: beggers,
-p18l3 cutpurses, assassins
-p18l4 and brigands
-p18l5 Colors: Red and black
-p18l6 Subguilds: Rogues
-p18l7 (beggars), Assassins,
-p18l8 Thieves
-}
-book 38
-{
-pages 24
-title Ethical hedonism: an introduction
-author Richard Garriott
-p1l1 Societies oft have
-p1l2 common codes of
-p1l3 conduct which it
-p1l4 expects all its people
-p1l5 to abide by. Now, while
-p1l6 'tis true that this can
-p1l7 offer some
-p1l8 advantages, most of
-p2l1 the codes I see today
-p2l2 around Britannia have
-p2l3 fatal flaws. Let us
-p2l4 examine them.
-p2l5 First, there is
-p2l6 Blackthorn's code of
-p2l7 Chaos or basically
-p2l8 Anarchy. Whereas
-p3l1 this affords the
-p3l2 individual maximum
-p3l3 opportunity for
-p3l4 individuality and even
-p3l5 pursuit of personal
-p3l6 happiness, it does not
-p3l7 offer even basic
-p3l8 interpersonal conduct
-p4l1 codes to prevent people
-p4l2 from killing each
-p4l3 other.
-p4l4 Without such basic
-p4l5 tenets, all the people
-p4l6 will need to spend a
-p4l7 significant portion of
-p4l8 their time and effort
-p5l1 towards personal
-p5l2 protection and thus
-p5l3 less time towards
-p5l4 other more beneficial
-p5l5 pursuits.
-p5l6 Then there are the
-p5l7 moral codes that are so
-p5l8 popular today. These
-p6l1 codes are built largely
-p6l2 on historical tradition
-p6l3 rather than current
-p6l4 logic and thus are also
-p6l5 antiquated. For
-p6l6 example many moral
-p6l7 codes we see today
-p6l8 include statements
-p7l1 about not eating certain
-p7l2 foods that once were
-p7l3 often poisonous, but
-p7l4 today can be prepared
-p7l5 safely.
-p7l6 Many forbid
-p7l7 contact between young
-p7l8 people of the opposite
-p8l1 gender, which can in
-p8l2 fact be hazardous; but
-p8l3 the codes often have
-p8l4 lost the context as to
-p8l5 why this is done,
-p8l6 instead merely calling
-p8l7 it amoral. In this day
-p8l8 and age to call that a
-p9l1 necessary moral
-p9l2 would need a new
-p9l3 reasoning. I put forth
-p9l4 that tradition is not
-p9l5 enough.
-p9l6 Then there are Lord
-p9l7 British's Virtues. It
-p9l8 strikes me that while
-p10l1 a system of virtues is
-p10l2 wonderful as a
-p10l3 touchstone to guide a
-p10l4 society to good
-p10l5 behavior, these are
-p10l6 but shades of the
-p10l7 underlying truth as to
-p10l8 why one may wish to
-p11l1 live a life according to
-p11l2 certain rules of
-p11l3 conduct.
-p11l4 On the other hand,
-p11l5 clearly the Virtues
-p11l6 that I have heard Lord
-p11l7 British speak of are
-p11l8 clearly positive codes
-p12l1 of conduct, far better
-p12l2 than the world of
-p12l3 anarchy that Lord
-p12l4 Blackthorn suggests.
-p12l5 Yet, are not these
-p12l6 Virtues still derived
-p12l7 from a set of
-p12l8 principles which
-p13l1 though they sound
-p13l2 good, are difficult to
-p13l3 pin down as actual,
-p13l4 undeniable, rational
-p13l5 truths?,
-p13l6 Worse yet though
-p13l7 imagine a society
-p13l8 who's code of conduct
-p14l1 was based on pure
-p14l2 survival of the
-p14l3 strongest. While this
-p14l4 society may function
-p14l5 and even accomplish
-p14l6 much, it can be fairly
-p14l7 argued that personal
-p14l8 happiness would
-p15l1 suffer greatly except
-p15l2 for those at the top. To
-p15l3 rule that out,
-p15l4 however, we must
-p15l5 first believe that
-p15l6 people have a right to
-p15l7 pursue happiness.
-p15l8 I hope is a safe
-p16l1 assumption that all
-p16l2 beings wish to be
-p16l3 happy; I will broadly
-p16l4 describe this as
-p16l5 Hedonism. Yet, if all
-p16l6 people did is live a life
-p16l7 of hedonism, their
-p16l8 hedonism might be in
-p17l1 conflict with those
-p17l2 near them, so I will
-p17l3 use the term Ethics to
-p17l4 describe limits one
-p17l5 might put on one's
-p17l6 hedonistic tendencies
-p17l7 to allow others to
-p17l8 pursue their
-p18l1 happiness as well.
-p18l2 Allow me to give
-p18l3 this example: If one
-p18l4 were to live alone on a
-p18l5 desert isle, one could
-p18l6 live a life of pure
-p18l7 hedonism, for no
-p18l8 action one might take
-p19l1 could interfere with
-p19l2 another's right to
-p19l3 pursue their
-p19l4 happiness. Poison the
-p19l5 lake if you like, there
-p19l6 is no one to blame but
-p19l7 yourself!
-p19l8 Now suppose two of
-p20l1 you live on that island.
-p20l2 Thou dost not want
-p20l3 thy neighbor to feel
-p20l4 free to poison the lake.
-p20l5 Would it not be better
-p20l6 to consider it unethical
-p20l7 to poison the lake
-p20l8 without first thinking
-p21l1 of those whose
-p21l2 pursuit of happiness
-p21l3 might be affected by
-p21l4 this action?,
-p21l5 I put forth that it is
-p21l6 the fact that we as a
-p21l7 people choose to live in
-p21l8 groups known as a
-p22l1 society that causes us
-p22l2 to compromise our
-p22l3 pure hedonism with
-p2l4 logical ethics.
-p22l5 Likewise we accept not
-p22l6 being able to kill
-p22l7 others without reason,
-p22l8 because our own
-p23l1 pursuit of happiness
-p23l2 would be greatly
-p23l3 interfered with if we
-p23l4 feared others would
-p23l5 do the same to us.
-p23l6 From this basis of
-p23l7 logic can be formed
-p23l8 the Tenets of Ethical
-p24l1 Hedonism.
-p24l2 For more on this
-p24l3 subject, see the
-p24l4 Tenants of Ethical
-p24l5 Hedonism, by Richard
-p24l6 Garriott and Herman
-p24l7 Miller.
-}
-book 39
-{
-pages 4
-title A song of Samlethe
-author Sandra
-p1l1 The first bear did
-p1l2 swim by day, and it
-p1l3 did sleep by night,
-p1l4 It kept itself within
-p1l5 its cave and ate by
-p1l6 starry light.
-p1l7 The second bear it did
-p1l8 cavort, 'Neath canopies
-p2l1 of trees, and danced
-p2l2 its odd bearish sort
-p2l3 Of joy for all to see.
-p2l4 The first bear, well,
-p2l5 'twas hunted, and today
-p2l6 adorns a floor.
-p2l7 Its ruggish face has
-p2l8 been dented, By
-p3l1 footfalls and the door.
-p3l2 The second bear did
-p3l3 step once, Into a
-p3l4 mushroom ring and now
-p3l5 does dance the dunce,
-p3l6 For wisps and unseen
-p3l7 things.
-p4l1 So do not dance and do
-p4l2 not sleep. Or else be
-p4l3 led astray, For bears
-p4l4 all end up six feet
-p4l5 deep, At the end of
-p4l6 Samlethe's day.
-}
-book 40
-{
-pages 17
-title The life of the traveling ministrel
-author Sarah of Yew
-p1l1 While 'tis true that
-p1l2 the musician who
-p1l3 seeketh only to make
-p1l4 sweet music for
-p1l5 herself and for
-p1l6 others needs little
-p1l7 more than some talent,
-p1l8 and stern practice at
-p2l1 the chosen instrument
-p2l2 those of us who seek
-p2l3 the open road shall
-p2l4 find indeed that a
-p2l5 greater skill is
-p2l6 required. Herein
-p2l7 discover those secrets
-p2l8 which I have learned
-p3l1 over the years as an
-p3l2 itinerant performer.
-p3l3 Once I was in
-p3l4 Jhelom and accidently
-p3l5 angered the bravo of
-p3l6 some local repute,
-p3l7 whose blade flickered
-p3l8 all too eagerly near
-p4l1 my slender neck (for I
-p4l2 was young then).
-p4l3 After various threats
-p4l4 to ruin my pretty
-p4l5 face this bravo
-p4l6 grabbed my arm in a
-p4l7 most unseemly
-p4l8 fashion and tossed me
-p5l1 into a barbaric
-p5l2 enclosure locally
-p5l3 entitled a dueling pit.
-p5l4 My plaintive cries for
-p5l5 help went unheeded
-p5l6 by the guards, for the
-p5l7 inhabitants of Jhelom
-p5l8 are eager indeed to
-p6l1 measure fighting
-p6l2 prowess at any time!
-p6l3 What saved me was
-p6l4 the ability to
-p6l5 improvise a melody
-p6l6 and tune that satirized
-p6l7 the proceedings and
-p6l8 sufficiently angered
-p7l1 an onlooker to prod
-p7l2 him to coming to my
-p7l3 defense. Once that
-p7l4 fight was underway I
-p7l5 was able to make good
-p7l6 my escape. Hence, I
-p7l7 regard the ability to
-p7l8 incite fights as
-p8l1 indispensable to the
-p8l2 prudent bard.
-p8l3 Upon another
-p8l4 occasion, 'twas the
-p8l5 obverse side of that
-p8l6 coin which saved me
-p8l7 for I was being held
-p8l8 prisoner by a
-p9l1 particularly nasty
-p9l2 band of ruffians who
-p9l3 had seized me
-p9l4 unawares from the
-p9l5 road to Vesper.
-p9l6 They had worked
-p9l7 themselves into a
-p9l8 frenzy and were
-p10l1 ready to attack and I
-p10l2 fear, tear me limb
-p10l3 from limb, when I
-p10l4 began to sing
-p10l5 frantically, tapping
-p10l6 my fallen drum wit
-p10l7 my tied up feet. The
-p10l8 melody developed into
-p11l1 a soothing one and the
-p11l2 brigands slowly
-p11l3 calmed down to the
-p11l4 extent of apologizing,
-p11l5 and they let me go!
-p11l6 A final example I
-p11l7 would pray you grant
-p11l8 your attention: once I
-p12l1 was lost upon a large
-p12l2 isle far to the east of
-p12l3 the mainland, well
-p12l4 beyond Serpent's Hold,
-p12l5 where lava made its
-p12l6 sluggish way across
-p12l7 the surface landscape.
-p12l8 And this accursed
-p13l1 land was filled with
-p13l2 vile beats and cunning
-p13l3 dragons.
-p13l4 I was being pursued
-p13l5 by one of said fell
-p13l6 dragons when I found
-p13l7 myself trapped. I
-p13l8 quickly skirted a
-p14l1 bubbling pool of molten
-p14l2 rock and attempted to
-p14l3 hide. The dragon
-p14l4 scented me and was
-p14l5 preparing to skirt the
-p14l6 pool, when I began to
-p14l7 play a lusty tune upon
-p14l8 my lute that attracted
-p15l1 its attention.
-p15l2 Mesmerized and
-p15l3 enticed by the melody,
-p15l4 it stepped directly
-p15l5 towards me and into
-p15l6 the lava-where its
-p15l7 foot was so burned
-p15l8 that it quickly hopped
-p16l1 away, undignified and
-p16l2 annoyed.
-p16l3 'Tis my fond hope
-p16l4 that other travelling
-p16l5 minstrels shall learn
-p16l6 from my experience
-p16l7 and apply themselves
-p16l8 to practicing these
-p17l1 skills in order to
-p17l2 preserve life and
-p17l3 limb.
-p17l4 -Sarah of Yew,
-p17l5 Songmistress.
-}
-book 41
-{
-pages 30
-title My book
-author Sherry the mouse
-p1l1 'Twas on a chill
-p1l2 night, when the moon
-p1l3 shone pasty-faced
-p1l4 above the horizon,
-p1l5 balanced on the towers
-p1l6 of Lord British's
-p1l7 castle, that the events
-p1l8 I am about to relate
-p2l1 tookplace, some years
-p2l2 ago now. I witnessed
-p2l3 them all from my tiny
-p2l4 mousehole.
-p2l5 Milords British and
-p2l6 Blackthron are
-p2l7 accustomed to a game
-p2l8 of chess 'pon an
-p3l1 evening, over which
-p3l2 they argue the issues
-p3l3 that affect the course
-p3l4 of the realm. Lord
-p3l5 Blackthorn was on his
-p3l6 way to Lord British's
-p3l7 chambers and Lord
-p3l8 British stood by a
-p4l1 window casement,
-p4l2 just having finished
-p4l3 setting the pieces upon
-p4l4 the board.
-p4l5 Suddenly the
-p4l6 shutters blew open,
-p4l7 and Lord British fell
-p4l8 to the ground, one
-p5l1 hand shileding his
-p5l2 eyes. A chill wind
-p5l3 entered the room and
-p5l4 it seemd a gash was
-p5l5 torn in the very air.
-p5l6 Through the gas I
-p5l7 could see stars and
-p5l8 swirling clouds of
-p6l1 stellar dust and a
-p6l2 coldness sucked all
-p6l3 the warmth from the
-p6l4 air. A terrible wind
-p6l5 tossed books and
-p6l6 blankets across the
-p6l7 room and furniture
-p6l8 toppled.
-p7l1 From within this
-p7l2 gash issued a great
-p7l3 voice, unlike any I
-p7l4 have ever heard. And
-p7l5 these are the words it
-p7l6 spoke (for I
-p7l7 memorized them most
-p7l8 carefully):,
-p8l1 Greetings, Lord
-p8l2 British. I am the Time
-p8l3 Lord, a being from
-p8l4 beyond your
-p8l5 dimension, as thou art
-p8l6 from a world other
-p8l7 than Sosaria. I am
-p8l8 here to bring thee
-p9l1 warning. Dost thou
-p9l2 recall how long ago
-p9l3 mysterious Stranger
-p9l4 came to Sosaria and
-p9l5 saved the world from
-p9l6 the evil wizard
-p9l7 Mondain? He shattered
-p9l8 the Gem of Immortality,
-p10l1 within which dwelled a
-p10l2 perfect likeness of
-p10l3 this world.
-p10l4 Lord British slowly
-p10l5 stood and faced the
-p10l6 hole in the air. I
-p10l7 remember, he said.
-p10l8 Oft have I wished
-p11l1 that stranger would
-p11l2 return.
-p11l3 He hath returned,
-p11l4 spoke the voice. But
-p11l5 not to here. When the
-p11l6 Gem was shattered, a
-p11l7 thousand shards were
-p11l8 scattered across the
-p12l1 dimensions and in
-p12l2 each shard there is a
-p12l3 perfect likeness of
-p12l4 this world. And thou
-p12l5 dost live upon one
-p12l6 such shard, for thou
-p12l7 art not of the true
-p12l8 world-thou art
-p13l1 merely a reflection.
-p13l2 Lord British looked
-p13l3 shaken by this and I
-p13l4 did not know what to
-p13l5 think! Was I merely a
-p13l6 shadow of the real
-p13l7 me, which lives still
-p13l8 somewhere else
-p14l1 across uncounted
-p14l2 universes?,
-p14l3 My task is to heal
-p14l4 this shattered world,
-p14l5 Lord British, said the
-p14l6 voice. And I seek to
-p14l7 enlist thee in my
-p14l8 cause. Be warned that
-p15l1 in this case, healing
-p15l2 carries with it a
-p15l3 terrible price.
-p15l4 Concern warred
-p15l5 with curiosity on my
-p15l6 liege's face, but ever
-p15l7 one to shoulder a
-p15l8 burden, he
-p16l1 straightened and faced
-p16l2 the gash in the air
-p16l3 bravely. Name thy
-p16l4 price.
-p16l5 A shard of a
-p16l6 universe is a
-p16l7 powerful thing and
-p16l8 universe shattered is
-p17l1 always in danger
-p17l2 from the powers of
-p17l3 darkness. Already
-p17l4 three shards were
-p17l5 turned to evil and sent
-p17l6 to plague the original
-p17l7 universe in the form
-p17l8 of Shadowlords.
-p18l1 Many times have I
-p18l2 brought the Stranger
-p18l3 back to Britannia, to
-p18l4 preserve it from its
-p18l5 own folly or from
-p18l6 outside dangers. Yet
-p18l7 as long as the world
-p18l8 remaineth in pieces, it
-p19l1 remaineth vulnerable.
-p19l2 We must bring the
-p19l3 shards into harmony,
-p19l4 so that they resonate
-p19l5 in such a manner that
-p19l6 matches the original
-p19l7 universe. Then the
-p19l8 two universes shall
-p20l1 merge and be again as
-p20l2 one.
-p20l3 But if we are only
-p20l4 shadows... Lord
-p20l5 British said
-p20l6 wonderingly.
-p20l7 The light from the
-p20l8 stars within the hole
-p21l1 seemed to dim.
-p21l2 Indeed, the
-p21l3 reflections shall
-p21l4 become one with the
-p21l5 orginal. Thou wouldst
-p21l6 cease to be as thou art
-p21l7 and become part of the
-p21l8 larger you. Thou shalt
-p22l1 not die; however,
-p22l2 uncounted generations
-p22l3 have passed and borne
-p22l4 children since that
-p22l5 day and they have no
-p22l6 counterparts. They
-p22l7 would perish utterly.
-p22l8 Lord British sagged in
-p23l1 shock, realizing the
-p23l2 terrible price that
-p23l3 would be paid to heal
-p23l4 the universe. All of
-p23l5 my people, he
-p23l6 breathed.
-p23l7 Tis for the
-p23l8 greateer good.
-p24l1 Lord British bowed
-p24l2 his head.
-p24l3 'Twas then I saw
-p24l4 the movement by the
-p24l5 door, half-hid by the
-p24l6 heavy red curtains.
-p24l7 Lord Blackthron stood
-p24l8 there, concealed from
-p25l1 the rest of the room,
-p25l2 his face white. How
-p25l3 long had he been
-p25l4 listening? I cannot
-p25l5 say, yet I suspect that
-p25l6 he had heard all that
-p25l7 the mysterious voice
-p25l8 had to say.
-p26l1 How then, shall I
-p26l2 aid thee? Lord
-p26l3 British said,
-p26l4 weariness in his
-p26l5 voice.
-p26l6 Aid the nobility
-p26l7 that resideth in
-p26l8 human heart. Protect
-p27l1 the Virtues that so
-p27l2 recently came to thee
-p27l3 in thought late at
-p27l4 night. They are the
-p27l5 Virtues of life, as
-p27l6 your counterpart
-p27l7 understands them to
-p27l8 be. For when thy
-p28l1 populace doth live and
-p28l2 breathe these Virtues
-p28l3 shall it match the true
-p28l4 Britannia and thy
-p28l5 shard shall rejoin
-p28l6 with it.
-p28l7 The gash in the air
-p28l8 began to close and
-p29l1 with it warmth stole
-p29l2 back into the room.
-p29l3 I was going to
-p29l4 discuss my idea with
-p29l5 Blackthorn tonight,
-p29l6 Lord British breathed.
-p29l7 Have I no thoughts
-p29l8 that are my own? Is
-p30l1 my life but a
-p30l2 reflection of another
-p30l3 me.........
-}
-book 42
-{
-pages 4
-title Regarding llamas
-author Simon Sanmartine
-p1l1 Llamas are curious
-p1l2 beasts, shaggy and
-p1l3 sought after for their
-p1l4 wool, yet of a
-p1l5 curiously arrogant
-p1l6 disposition reflected
-p1l7 in their eyes. They
-p1l8 live in mountainous
-p2l1 areas, though who
-p2l2 may have first tamed
-p2l3 them is lost in the
-p2l4 mists of history.
-p2l5 'Tis a well-known
-p2l6 fact that llamas can
-p2l7 indeed be tamed and
-p2l8 used as grazing
-p3l1 animals, for their
-p3l2 meat and of course
-p3l3 for their wool. Yet 'tis
-p3l4 lesser known that
-p3l5 their ornery
-p3l6 disposition and
-p3l7 tendency to spit at
-p3l8 those they dislike
-p4l1 makes them appealing
-p4l2 guard creatures as
-p4l3 well, though they
-p4l4 have little sound with
-p4l5 which to sound an
-p4l6 alarum.
-}
-book 43
-{
-pages 7
-title Phonemes of the orcish tongue
-author Yorick of Yew
-p1l1 ab, ad, ag, akt, alm,
-p1l2 at, augh, auh, azh, ba,
-p1l3 ba, bag, bar, baz, bid,
-p1l4 bilge, bo, bog, bog,
-p1l5 brui, bu, buad, bug,
-p1l6 bug, buil, buim, bum,
-p1l7 buo, buor, buu, ca,
-p1l8 car, clog, cro, cuk,
-p2l1 cur, da, dagh, dagh,
-p2l2 dak, dar, deak, der,
-p2l3 dil, dit, dor, dre,
-p2l4 dri, dru, du, dud, duf,
-p2l5 dug, dug, duh, dun,
-p2l6 eag, eg, egg, eichel,
-p2l7 ek, ep, ewk, faugh,
-p2l8 fid, flu, fog, foo, foz,
-p3l1 fruk, fu, fub, fud,
-p3l2 fun, fup, fur, gaa,
-p3l3 gag, gagh, gan, gar, gh,
-p3l4 gha, ghat, ghed, ghig,
-p3l5 gho, ghu, gig, gil, gka,
-p3l6 glu, glu, glug, gna,
-p3l7 gno, gnu, gol, gom,
-p3l8 goth, grunt, grut, gu,
-p4l1 gub, gub, gug, gugh,
-p4l2 guk, guk,
-p4l3 (with an umlaut), gulg,
-p4l4 gur, gurt, ha, hagh,
-p4l5 hat, hig, hig, hok,
-p4l6 hrak, hrol, hug, i, ig,
-p4l7 igg, igh, ign, ihg,
-p4l8 ikk, it, jak, jek, jja,
-p5l1 ju, juk, ka, ka, ke,
-p5l2 kgh, kh, ki, klap, klu,
-p5l3 knod, knu, kod, krug,
-p5l4 kt, kug, lat, log, log,
-p5l5 lub, lug, lug, luh, ma,
-p5l6 nag, nar, natz, neg,
-p5l7 neh, nog, nug, nug,
-p5l8 nuk, o, oag, ob, og,
-p6l1 ogh, oh, olm, om, oo,
-p6l2 oog, oth, pa, pig, qo,
-p6l3 qua, quil, rekk, rim,
-p6l4 ro, rod, ru, rug, rukk,
-p6l5 rur, sag, sah, sg,
-p6l6 snarf, stu, thu, thu,
-p6l7 thu, thug, tk, tug, u,
-p6l8 ud, ug, ugh, ukk, ulg,
-p7l1 urd, urg, urgle, ut,
-p7l2 zug.
-}
-book 44
-{
-pages 27
-title Birds of Britannia
-author Thoma th' Heather
-p1l1 The WREN is a tiny
-p1l2 insect-eating bird
-p1l3 with a loud voice. The
-p1l4 cheerful trills of
-p1l5 Wrens are
-p1l6 extraordinarily varied
-p1l7 and melodious.
-p1l8 The SWALLOW is
-p2l1 easily recognized by
-p2l2 its forked tail.
-p2l3 Swallows catch
-p2l4 insects in flight and
-p2l5 have squeaky,
-p2l6 twittering songs.
-p2l7 The WARBLER is an
-p2l8 exceptional singer,
-p3l1 whose extensive
-p3l2 songs combine the best
-p3l3 qualities of Wrens and
-p3l4 Swallows.
-p3l5 The NUTHATCH
-p3l6 climbs down trees
-p3l7 headfirst, searching
-p3l8 for insects in the
-p4l1 bark. It sings a
-p4l2 repetitive series of
-p4l3 notes with a nasal
-p4l4 tone quality.
-p4l5 The agile CHICKADEE
-p4l6 has a buzzy
-p4l7 chick-a-dee-dee
-p4l8 call, from which its
-p5l1 name is derived. Its
-p5l2 song is a series of
-p5l3 whistled notes.
-p5l4 The THRUSH is a
-p5l5 brown bird with a
-p5l6 spotted breast, which
-p5l7 eats worms and
-p5l8 snails and has a
-p6l1 beautiful singing
-p6l2 voice. Thrushes use a
-p6l3 stone as an anvil to
-p6l4 smash the shells of
-p6l5 snails.
-p6l6 The little
-p6l7 NIGHTINGALE is
-p6l8 also known for its
-p7l1 beautiful song, which
-p7l2 it sings even at night.
-p7l3 The STARLING is a
-p7l4 small dark bird with a
-p7l5 yellow bill and a
-p7l6 squeaky,
-p7l7 high-pitched song.
-p7l8 Starlings can mimic
-p8l1 the sounds of other
-p8l2 birds.
-p8l3 The SKYLARK sings
-p8l4 a series of
-p8l5 high-pitched
-p8l6 melodius trills in
-p8l7 flight.
-p8l8 The FINCH is a small
-p9l1 seed-eating bird with
-p9l2 a conical beak and a
-p9l3 musical, warbling
-p9l4 song.
-p9l5 The CROSSBILL is a
-p9l6 kind of Finch with a
-p9l7 strange crossed bill,
-p9l8 which it uses to
-p10l1 extract seeds from
-p10l2 pine cones.
-p10l3 The CANARY is a
-p10l4 kind of Finch that I
-p10l5 often kept as a pet.
-p10l6 Miners would often
-p10l7 take Canaries
-p10l8 underground with
-p11l1 them, to warn them of
-p11l2 the presence of
-p11l3 hazardous vapors in
-p11l4 the air.
-p11l5 The SPARROW
-p11l6 weaves a nest of
-p11l7 grass and has an
-p11l8 unmusical chirp for
-p12l1 voice.
-p12l2 The TOWHEE is a
-p12l3 kind of Sparrow that
-p12l4 continually reminds
-p12l5 listeners to drink
-p12l6 their tea.
-p12l7 The SHRIKE is a gray
-p12l8 bird with a hooked
-p13l1 bill. Shrikes have the
-p13l2 habit of impaling their
-p13l3 prey on thorns.
-p13l4 The WOODPECKER
-p13l5 has a pointed beak that
-p13l6 is suitable for pecking
-p13l7 at wood to get at the
-p13l8 insects inside.
-p14l1 The KINGFISHER
-p14l2 dives for fish, which
-p14l3 it catches with its
-p14l4 long, pointed beak.
-p14l5 The TERN migrates
-p14l6 over great distances,
-p14l7 from one end of
-p14l8 Britannia to the other
-p15l1 each year. Terns dive
-p15l2 from the air to catch
-p15l3 fish.
-p15l4 The PLOVER is a bird
-p15l5 that distracts
-p15l6 predators by
-p15l7 pretending to have a
-p15l8 broken wing.
-p16l1 The LAPWING is a
-p16l2 kind of Plover that
-p16l3 has a long black crest.
-p16l4 The HAWK is a
-p16l5 predator that feeds on
-p16l6 small birds, mice,
-p16l7 squirrels and other
-p16l8 small animals. Small
-p17l1 hawks are known as
-p17l2 Kites.
-p17l3 The DOVE is a
-p17l4 seed-eating bird with
-p17l5 a peaceful reputation.
-p17l6 Doves have a
-p17l7 low-pitched cooing
-p17l8 song.
-p18l1 The PARROT is a
-p18l2 brightly colored bird
-p18l3 with a hooked bill,
-p18l4 favored as a
-p18l5 companion by pirates.
-p18l6 Parrots can be taught
-p18l7 to imitate the human
-p18l8 voice.
-p19l1 The CUCKOO is a
-p19l2 devious bird that lays
-p19l3 eggs in the nests of
-p19l4 Warblers and other
-p19l5 small birds. Cuckoos
-p19l6 have the uncanny
-p19l7 ability to keep track of
-p19l8 time, singing once at
-p20l1 the beginning of each
-p20l2 hour.
-p20l3 The ROADRUNNER
-p20l4 is an unusual bird
-p20l5 with a long tail, which
-p20l6 runs swiftly along
-p20l7 the ground hunting
-p20l8 for lizards and
-p21l1 snakes.
-p21l2 The SWIFT is a very
-p21l3 agile bird that spends
-p21l4 nearly its entire life
-p21l5 in the air. With their
-p21l6 mouths wide open,
-p21l7 Swifts capture insects
-p21l8 in mid-flight.
-p22l1 The HUMMINGBIRD
-p22l2 is a cross between a
-p22l3 Swift and a Fairy.
-p22l4 These tiny, brightly
-p22l5 colored birds hover
-p22l6 magically near
-p22l7 flowers and live on
-p22l8 the nectar they
-p23l1 provide.
-p23l2 The OWL is a
-p23l3 reputedly wise bird
-p23l4 that is active at night,
-p23l5 unlike most birds.
-p23l6 Owls have excellent
-p23l7 night vision and
-p23l8 low-pitched hooting
-p24l1 calls. Their wings are
-p24l2 silent in flight.
-p24l3 The GOATSUCKER is
-p24l4 a strange owl-like
-p24l5 bird that is thought to
-p24l6 live on the milk of
-p24l7 goats. These
-p24l8 mysterious birds
-p25l1 make jarring sounds
-p25l2 at night, for which
-p25l3 reason they are also
-p25l4 called Nightjars.
-p25l5 The DUCK is a bird
-p25l6 that swims more than
-p25l7 it flies and has a
-p25l8 nasal voice that is
-p26l1 described best as a
-p26l2 quack.
-p26l3 The SWAN is a kind
-p26l4 of long-necked Duck
-p26l5 that is all white.
-p26l6 Swans are usually
-p26l7 voiceless, but they are
-p26l8 said to have an
-p27l1 extraordinarily
-p27l2 beautiful song.
-p27l3 THE END
-}
-book 45
-{
-pages 8
-title Taming Dragons
-author Wyrd Beastmaster
-p1l1 I have not much to
-p1l2 tell about dragons. The
-p1l3 sole time I approached
-p1l4 one with an eye
-p1l5 towards taming it, my
-p1l6 initial attempts at
-p1l7 calming it met with
-p1l8 failure. It fixed a
-p2l1 massive beady eye
-p2l2 upon me and began its
-p2l3 slithering approach,
-p2l4 intending no doubt to
-p2l5 insert me into its maw
-p2l6 and bear down with
-p2l7 its teeth.
-p2l8 However, as I was
-p3l1 engaged in what
-p3l2 remains to this day
-p3l3 the most terrifying
-p3l4 combat of my life, the
-p3l5 dragon suddenly
-p3l6 whirled as if in a
-p3l7 panic, ran a short
-p3l8 distance, took off into
-p4l1 the air, then
-p4l2 transformed into a
-p4l3 whirlwind. Lastly, it
-p4l4 exploded, showering
-p4l5 gouts of black blood
-p4l6 and heaving, stinking
-p4l7 flesh upon miles of
-p4l8 countryside. The
-p5l1 fireball was massive
-p5l2 enough to light a city I
-p5l3 should surmise.
-p5l4 I never did discover
-p5l5 the exact cause of this
-p5l6 strange behavior
-p5l7 except to assume that
-p5l8 it was not typical for
-p6l1 this reptilian species.
-p6l2 My best guesses
-p6l3 revolve around a
-p6l4 magical fracture in
-p6l5 the nature of reality,
-p6l6 which is far too
-p6l7 esoteric a territory
-p6l8 for one of my limited
-p7l1 scholarship.
-p7l2 Hence my basic
-p7l3 advice to those who
-p7l4 seek to tame a
-p7l5 dragon-be sure that
-p7l6 thou hast mastered
-p7l7 the twin skills of
-p7l8 taming animals and
-p8l1 running away very
-p8l2 fast.
-}
-book 46
-{
-pages 24
-title A grammar of orcish
-author Yorick of Yew
-p1l1 This volume and
-p1l2 others in the series,
-p1l3 are sponsored by
-p1l4 donations from Lord
-p1l5 Blackthorn, ever a
-p1l6 supporter of
-p1l7 understanding the
-p1l8 other sentient races of
-p2l1 Britannia. -The Orcish
-p2l2 tongue may fall
-p2l3 unpleasingly 'pon the
-p2l4 ear, yet it has
-p2l5 within it a complex
-p2l6 grammar oft
-p2l7 misunderstood by
-p2l8 those who merely
-p3l1 hear the few broken
-p3l2 words of English our
-p3l3 orcish brothers
-p3l4 manage without
-p3l5 education.
-p3l6 These are the basic
-p3l7 rules of orcish:,
-p3l8 Orcish has five
-p4l1 tenses: present, past,
-p4l2 future imperfect,
-p4l3 present interjectional,
-p4l4 and prehensile.
-p4l5 Examples: gugroflu,
-p4l6 gugrofloog, gugrobo,
-p4l7 gugrolu! gugrogug.
-p4l8 All transitive verbs in
-p5l1 the prehensile tense
-p5l2 end it ug.
-p5l3 Examples: urgleighug,
-p5l4 biggugdaghgug,
-p5l5 curdakalmug.
-p5l6 All present
-p5l7 interjectional
-p5l8 conjugations start
-p6l1 with the letter G
-p6l2 unless they contain
-p6l3 the third declensive
-p6l4 accent of the letter U.
-p6l5 Examples:
-p6l6 ghothudunglug, but n
-p6l7 azhbuugub.
-p6l8 The past tense can
-p7l1 only refer to events
-p7l2 since the last meal,
-p7l3 but the prehensile
-p7l4 tense can refer to any
-p7l5 event within reach.
-p7l6 The present tense is
-p7l7 conjugated like the
-p7l8 future imperfect
-p8l1 tense, when the
-p8l2 interrogative mode is
-p8l3 used by pitching the
-p8l4 sound a quarter-tone
-p8l5 higher.
-p8l6 Orcish hath no concept
-p8l7 of person, as in first
-p8l8 person, third person,
-p9l1 I, we, etc.
-p9l2 Orcish grammar
-p9l3 relies upon the three
-p9l4 cardinal rules of
-p9l5 accretion, prefixing,
-p9l6 and agglutination, in
-p9l7 addition to pitch. In the
-p9l8 former, phonemes
-p10l1 combine into larger
-p10l2 words which may
-p10l3 contain full phrasal
-p10l4 significance. In the
-p10l5 second, prefixing
-p10l6 specific phonetic
-p10l7 sounds changes the
-p10l8 subject of the
-p11l1 sentence into object,
-p11l2 interrogative,
-p11l3 addressed individual,
-p11l4 or dinner.
-p11l5 Agglutination occurs
-p11l6 whenever four of the
-p11l7 same letter are
-p11l8 present in a word, in
-p12l1 which case, any two
-p12l2 of them may be
-p12l3 removed or slurred.
-p12l4 Pitch changes the
-p12l5 phoneme value of
-p12l6 individual syllables,
-p12l7 thus completely
-p12l8 altering what a word
-p13l1 may mean. The
-p13l2 classic example if
-p13l3 Aktgluthugrot
-p13l4 bigglogubuu
-p13l5 dargilgaglug
-p13l6 lublublub which can
-p13l7 mean You are such a
-p13l8 pretty girl, My
-p14l1 mother ate your
-p14l2 primroses, or
-p14l3 Jellyfish nose paints
-p14l4 alms potato, depending
-p14l5 on pitch.
-p14l6 Orcish poetry often
-p14l7 relies upon repeating
-p14l8 the same phrase in
-p15l1 multiple pitches, even
-p15l2 changing pitch
-p15l3 midword. None of
-p15l4 this great are is
-p15l5 translatable.
-p15l6 The orcish language
-p15l7 uses the following
-p15l8 vowels: ab, ad, ag, akt,
-p16l1 at, augh, auh, azh, e,
-p16l2 i, o, oo, u, uu. The
-p16l3 vowel sound a is not
-p16l4 recognized as a vowel
-p16l5 and does not exist in
-p16l6 their alphabet. The
-p16l7 orcish alphabet is best
-p16l8 learned using the
-p17l1 classic rhyme
-p17l2 repeated at 23
-p17l3 different pitchs:
-p17l4 Lugnog ghu blat
-p17l5 suggaroglug. Gaghbuu
-p17l6 dakdar ab highugbo,
-p17l7 Gothnogbuim ad
-p17l8 gilgubbugbuilug
-p18l1 Bilgeaugh thurggulg
-p18l2 stuiggro!
-p18l3 A translation of the
-p18l4 first pitch:
-p18l5 Eat food, the first
-p18l6 letter is ab,
-p18l7 Kill people, the next
-p18l8 letter is ad
-p19l1 I forget the rest But
-p19l2 augh is in there
-p19l3 somewhere!
-p19l4 What follows is a
-p19l5 complete phonetic
-p19l6 library of the orcish
-p19l7 language: ab, ad, ag,
-p19l8 akt, alm, at, augh,
-p20l1 auh, azh, ba, ba, bag,
-p20l2 bar, baz, bid, bilge,
-p20l3 bo, bog, bog, brui, bu,
-p20l4 buad, bug, bug, buil,
-p20l5 buim, bum, buo, buor,
-p20l6 buu, ca, car, clog, cro,
-p20l7 cuk, cur, da, dagh,
-p20l8 dagh, dak, dar, deak,
-p21l1 der, dil, dit, dor, dre,
-p21l2 dri, dru, du, dud, duf,
-p21l3 dug, dug, duh, dun,
-p21l4 eag, eg, egg, eichel,
-p21l5 ek, ep, ewk, faugh, fid,
-p21l6 flu, fog, foo, foz,
-p21l7 fruk, fu, fub, fud,
-p21l8 fun, fup, fur, gaa,
-p22l1 gag, gagh, gan, gar, gh,
-p22l2 gha, ghat, ghed, ghid,
-p22l3 gho, ghu, gig, gil, gka,
-p22l4 glu, glu, glug, gna,
-p22l5 gno, gnu, gol, gom,
-p22l6 goth, grunt, grut, gu,
-p22l7 gub, gub, gug, gug,
-p22l8 gugh, guk, guk
-p23l1 Transcriber's Note:
-p23l2 The remainder of the
-p23l3 orcish language is
-p23l4 not present in this
-p23l5 tome. To find the
-p23l6 remainder, please
-p23l7 read Phonemes of the
-p23l8 Orcish Tongue, also
-p24l1 by Yorick o' Yew.
-}



From austin at berlios.de  Fri Sep 30 00:54:05 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 00:54:05 +0200
Subject: [Poldistro-svn] r313 - in trunk/096/pkg/items/sysbook: . book config www
Message-ID: <200509292254.j8TMs542005215@sheep.berlios.de>

Author: austin
Date: 2005-09-30 00:53:45 +0200 (Fri, 30 Sep 2005)
New Revision: 313

Added:
   trunk/096/pkg/items/sysbook/book/
   trunk/096/pkg/items/sysbook/book/methods.src
   trunk/096/pkg/items/sysbook/book/onCreate.src
   trunk/096/pkg/items/sysbook/book/onDestroy.src
   trunk/096/pkg/items/sysbook/book/use.src
   trunk/096/pkg/items/sysbook/config/
   trunk/096/pkg/items/sysbook/config/icp.cfg
   trunk/096/pkg/items/sysbook/config/zulubooks.cfg
   trunk/096/pkg/items/sysbook/include/
   trunk/096/pkg/items/sysbook/itemdesc.cfg
   trunk/096/pkg/items/sysbook/pkg.cfg
   trunk/096/pkg/items/sysbook/www/
   trunk/096/pkg/items/sysbook/www/viewbook.src
Log:


Added: trunk/096/pkg/items/sysbook/book/methods.src
===================================================================
--- trunk/096/pkg/items/sysbook/book/methods.src	2005-09-29 22:41:15 UTC (rev 312)
+++ trunk/096/pkg/items/sysbook/book/methods.src	2005-09-29 22:53:45 UTC (rev 313)
@@ -0,0 +1 @@
+// $Id$

Added: trunk/096/pkg/items/sysbook/book/onCreate.src
===================================================================
--- trunk/096/pkg/items/sysbook/book/onCreate.src	2005-09-29 22:41:15 UTC (rev 312)
+++ trunk/096/pkg/items/sysbook/book/onCreate.src	2005-09-29 22:53:45 UTC (rev 313)
@@ -0,0 +1 @@
+// $Id$

Added: trunk/096/pkg/items/sysbook/book/onDestroy.src
===================================================================
--- trunk/096/pkg/items/sysbook/book/onDestroy.src	2005-09-29 22:41:15 UTC (rev 312)
+++ trunk/096/pkg/items/sysbook/book/onDestroy.src	2005-09-29 22:53:45 UTC (rev 313)
@@ -0,0 +1 @@
+// $Id$

Added: trunk/096/pkg/items/sysbook/book/use.src
===================================================================
--- trunk/096/pkg/items/sysbook/book/use.src	2005-09-29 22:41:15 UTC (rev 312)
+++ trunk/096/pkg/items/sysbook/book/use.src	2005-09-29 22:53:45 UTC (rev 313)
@@ -0,0 +1 @@
+// $Id$

Added: trunk/096/pkg/items/sysbook/config/icp.cfg
===================================================================
--- trunk/096/pkg/items/sysbook/config/icp.cfg	2005-09-29 22:41:15 UTC (rev 312)
+++ trunk/096/pkg/items/sysbook/config/icp.cfg	2005-09-29 22:53:45 UTC (rev 313)
@@ -0,0 +1,18 @@
+# {$Id}
+
+ICP Register
+{
+	Name		System Books
+	Version		1.0
+	Description	System books... uhhh you read them and write in them?
+	
+	Creator		Austin
+	C_Email		Austin at tsse.net
+	
+	Maintainer	Distro Team
+	M_Email		pol-distro-support at sourceforge.net
+	
+	//Script	cmdlevel path
+			
+	//TextCmd	cmdlevel path
+}

Added: trunk/096/pkg/items/sysbook/config/zulubooks.cfg
===================================================================
--- trunk/096/pkg/items/sysbook/config/zulubooks.cfg	2005-09-29 22:41:15 UTC (rev 312)
+++ trunk/096/pkg/items/sysbook/config/zulubooks.cfg	2005-09-29 22:53:45 UTC (rev 313)
@@ -0,0 +1,4175 @@
+# {$Id}
+
+book 1
+{
+pages 3
+title Hitchhikers Guide to Zulu Hotel
+author Developer Zulu
+p1l1 Don't Panic
+p2l1 See Page 1
+p3l1 This is page 3 and the
+p3l2 end of this book.
+}
+book 2
+{
+pages 5
+title Guide to Zulu Hotel
+author Zulu Staff
+p1l1 Welcome to the new,
+p1l2 Zulu Shard. This book
+p1l3 will try to explain
+p1l4 some of the new
+p1l5 options and commands
+p1l6 that you have
+p1l7 access to.
+p2l1 .where - this will tell
+p2l2 your location
+p2l3 .msg - this will allow
+p2l4 you to send messages
+p2l5 .reply - this will
+p2l6 allow you to reply
+p2l7 .online - this will tell
+p2l8 you who is online
+p3l1 Commands
+p3l2 .arm - will allow you
+p3l3 to arm weapons
+p3l4 .disarm - will allow
+p3l5 you to remove weapons
+p3l6 .hungry - need to eat?
+p4l1 If you own a house, it
+p4l2 can decay. Make sure
+p4l3 you double click on
+p4l4 your house sign every
+p4l5 30 days. Check out
+p4l6 our website, we
+p4l7 have a new house
+p4l8 faq section.
+p5l1 To find out tricks
+p5l2 and tips check out our
+p5l3 inside zuluhotel
+p5l4 www.zuluhotel.com/
+p5l5 uo/inside/
+}
+book 3
+{
+pages 3
+title The Arrow and the Song
+author Longfellow
+p1l1 I shot an arrow into
+p1l2 the air,
+p1l3 It fell to earth,
+p1l4 I knew not where;
+p1l5 For, so swiftly it
+p1l6 flew, the sight
+p1l7 Could not follow in
+p2l1 its flight. I breathed
+p2l2 a song into the air,
+p2l3 It fell to earth, I
+p2l4 knew not where;
+p2l5 For who has sight so
+p2l6 keen and strong,
+p2l7 That it can follow the
+p2l8 flight of song?
+p3l1 Long, long afterward,
+p3l2 in an oak
+p3l3 I found the arrow,
+p3l4 still unbroke;
+p3l5 And the song, from
+p3l6 beginning to end,
+p3l7 I found again in the
+p3l8 heart of a friend.
+}
+book 4
+{
+pages 2
+title Mr. Meant-To
+author Ben Franklin
+p1l1 Mr. Meant-To has a
+p1l2 comrade, and his
+p1l3 name is Didn't-Do
+p1l4 Have you ever chanced
+p1l5 to meet them?
+p1l6 Did they ever call
+p1l7 on you?
+p2l1 These two fellows live
+p2l2 together. In the house
+p2l3 of Never-Win, and
+p2l4 I'm told that it
+p2l5 is haunted.
+p2l6 By the ghost of
+p2l7 Might-Have-Been.
+}
+book 5
+{
+pages 12
+title The Village Blacksmith
+author Longfellow
+p1l1 Under a spreading
+p1l2 chestnut tree
+p1l3 The village
+p1l4 smithy stands;
+p2l1 The smith, a mighty
+p2l2 man is he,
+p2l3 With large and
+p2l4 sinewy hands;
+p3l1 And the muscles of
+p3l2 his brawny arms
+p3l3 Are strong as
+p3l4 iron bands.
+p4l1 His hair is crisp,
+p4l2 and black, and long,
+p4l3 His face is like
+p4l4 the tan;
+p5l1 His brow is wet with
+p5l2 honest sweat,
+p5l3 He earns what e'er
+p5l4 he can,
+p6l1 And looks the whole
+p6l2 world in the face,
+p6l3 For he owes
+p6l4 not any man.
+p7l1 Week in, week out,
+p7l2 from morn till night,
+p7l3 You can hear his
+p7l4 bellows blow;
+p8l1 You can hear him
+p8l2 swing his heavy
+p8l3 sledge, With
+p8l4 measured beat
+p8l5 and slow,
+p9l1 Like a sexton ringing
+p9l2 the village bell,
+p9l3 When the evening
+p9l4 sun is low.
+p10l1 And children comming
+p10l2 home from school
+p10l3 Look in at the
+p10l4 open door;
+p11l1 They love to see
+p11l2 the flaming forge,
+p11l3 And hear the
+p11l4 bellows roar,
+p12l1 And catch the burning
+p12l2 sparks the fly
+p12l3 Like chaff from a
+p12l4 threshing floor.
+}
+book 6
+{
+pages 4
+title Great Men
+author Emerson
+p1l1 Not gold, but only
+p1l2 man can make
+p1l3 A people great
+p1l4 and strong;
+p2l1 Men who, for truth
+p2l2 and honor's sake,
+p2l3 Stand fast and
+p2l4 suffer long.
+p3l1 Brave men who work
+p3l2 while others sleep,
+p3l3 Who dare while
+p3l4 others fly --
+p4l1 They build a nation's
+p4l2 pillars deep
+p4l3 And lift them
+p4l4 to the sky.
+}
+book 7
+{
+pages 2
+title Men Wanted for Hazardous Journey
+author Ernest Chackleton
+p1l1 Small wages,
+p1l2 bitter cold,
+p1l3 long months of
+p1l4 complete darkness,
+p2l1 constant danger,
+p2l2 safe return doubtful.
+p2l3 Honor and recognition
+p2l4 in case of success.
+}
+book 8
+{
+pages 4
+title There was a lady loved a swine
+author Anonymous
+p1l1 There was a lady
+p1l2 loved a swine.
+p1l3 Honey, quoth she,
+p1l4 Pig-hog, wilt thou
+p1l5 be mine?
+p1l6 Hoogh, quoth he.
+p2l1 I'll build thee
+p2l2 a silver sty,
+p2l3 Honey, quoth she,
+p2l4 And in it thou
+p2l5 shalt lie.
+p2l6 Hoogh, quoth he.
+p3l1 Pinned with a
+p3l2 silver pin,
+p3l3 Honey, quote she,
+p3l4 That thou may go
+p3l5 out and in.
+p3l6 Hoogh, quoth he.
+p4l1 Wilt hou have me now,
+p4l2 honey? quoth she.
+p4l3 Speak or my
+p4l4 heartwill break.
+p4l5 Hoogh, quoth he.
+}
+book 9
+{
+pages 4
+title Great is my Envy of You
+author Francis Petrarch
+p1l1 Great is my envy of
+p1l2 you, earth, in
+p1l3 your greed
+p1l4 Folding her in
+p1l5 invisible embrace,
+p2l1 Denying me the look
+p2l2 of the sweet face
+p2l3 Where I found peace
+p2l4 from all my
+p2l5 strife at need!
+p3l1 Great is my envy of
+p3l2 heaven which can lead
+p3l3 And lock within
+p3l4 itself in avarice
+p4l1 That spirit from its
+p4l2 lovely biding-place
+p4l3 And leave so many
+p4l4 others here to bleed!
+}
+book 10
+{
+pages 4
+title The Prince
+author Machiavelli
+p1l1 Everybody knows
+p1l2 how laudable it is in
+p1l3 a prince to keep his
+p1l4 faith and to be an
+p1l5 honest man, not a
+p1l6 trickster.
+p2l1 Nevertheless, the
+p2l2 experience of our
+p2l3 times shows that the
+p2l4 princes who have done
+p2l5 great things are the
+p2l6 ones who have taken
+p2l7 little account of
+p2l8 their promises and
+p3l1 who have known how
+p3l2 to addle the brains
+p3l3 of men with craft.
+p4l1 In the end they have
+p4l2 conquered those who
+p4l3 have put their
+p4l4 reliance on
+p4l5 good faith.
+}
+book 11
+{
+pages 3
+title The Voice of Reason
+author Ayn Rand
+p1l1 If the good, the
+p1l2 virtuous, the morally
+p1l3 ideal is suffering
+p1l4 and self-sacrifice --
+p1l5 then, by that standard,
+p1l6 capitalism had to
+p1l7 be damned as evil.
+p2l1 Capitalism does not
+p2l2 tell men to suffer,
+p2l3 but to pursue enjoyment
+p2l4 and achievement, here,
+p2l5 on Earth -- capitalism
+p2l6 does not tell men to
+p2l7 serve and sacrifice,
+p2l8 but to produce and
+p3l1 profit...and above all,
+p3l2 capitalism does not
+p3l3 permist anyone to
+p3l4 expect or demand, to
+p3l5 give or to take
+p3l6 the unearned.
+}
+book 12
+{
+pages 2
+title Atlas Shrugged
+author Ayn Rand
+p1l1 You are not free to
+p1l2 escape from your
+p1l3 nature, from the fact
+p1l4 that reason is your
+p1l5 means of survival --
+p2l1 so that you,
+p2l2 who are a human being,
+p2l3 the question
+p2l4 to be or not to be'
+p2l5 is the question
+p2l6 'to think or not
+p2l7 to think.
+}
+book 13
+{
+pages 3
+title The Divine Comedy: Inferno, Canto I
+author Dante Alighieri
+p1l1 Midway in our life's
+p1l2 journey, I went astray
+p1l3 from the straight road
+p1l4 and woke to find myself
+p1l5 alone in a dark wood.
+p1l6 How shall I say
+p2l1 what a wood that was!
+p2l2 I never saw so drear,
+p2l3 so rank, so arduous
+p2l4 a wilderness!
+p2l5 Its very memory gives
+p2l6 a shape to fear.
+p3l1 Death could scarce be
+p3l2 more bitter than that
+p3l3 place! But since it
+p3l4 came to good, I
+p3l5 will recount all that
+p3l6 I found revealed there
+p3l7 by God's grace...
+}
+book 14
+{
+pages 9
+title Talking to Wisps
+author Yorick of Moonglow
+p1l1 This volume was
+p1l2 sponsored by
+p1l3 donations from Lord
+p1l4 Blackthorn, ever a
+p1l5 supporter of
+p1l6 understanding the
+p1l7 other sentient races
+p2l1 of Britannia.
+p2l2 Wisps are the most
+p2l3 intelligent of the
+p2l4 nonhuman races
+p2l5 inhabiting Britannia.
+p2l6 'Tis claimed by the
+p2l7 great sages that
+p2l8 someday we shall be
+p3l1 able to converse with
+p3l2 them openly in our
+p3l3 native
+p3l4 tongue--indeed, we
+p3l5 must hope that wisps
+p3l6 learn our language,
+p3l7 for it is not possible
+p3l8 for humans to
+p4l1 pronounce wispish!
+p4l2 The wispish
+p4l3 language seems to
+p4l4 only contain one
+p4l5 vowel, the letter Y.
+p4l6 However, the letters
+p4l7 W, C, M, and L seem
+p4l8 to be treated
+p5l1 grammatically as
+p5l2 vowels, and in
+p5l3 addition every letter
+p5l4 is followed by what
+p5l5 sounds to the human
+p5l6 ear like a glottal stop
+p5l7 It is possible that the
+p5l8 glottal stop is
+p6l1 considered a vowel
+p6l2 as well.
+p6l3 Wisps do make use
+p6l4 of what sound to us
+p6l5 like pitch and
+p6l6 emphasis shifts
+p6l7 similar to
+p6l8 exclamations and
+p7l1 questions. The average
+p7l2 word in wispish seems
+p7l3 to consist of three
+p7l4 phonemes and three
+p7l5 glottal stops, plus
+p7l6 possibly a pitch shift.
+p7l7 It often sounds like a
+p8l1 fire burning or
+p8l2 crackling. Some have
+p8l3 speculated that what
+p8l4 we are analyzing is
+p8l5 in fact nothing more
+p8l6 than the very air
+p8l7 crackling near the
+p8l8 wisp's glow, and not
+p9l1 language, but this is
+p9l2 of course unlikely...
+}
+book 15
+{
+pages 23
+title A Grammar of Orcish
+author Yorick of Yew
+p1l1 This volume, and
+p1l2 others in the series,
+p1l3 are sponsored by
+p1l4 donations from Lord
+p1l5 Blachthrone, always a
+p1l6 supporter of
+p1l7 understanding the
+p2l1 other sentient races
+p2l2 of Britannia -
+p2l3 The Orcish tongue
+p2l4 may fall unpleasingly
+p2l5 'pon the ear, yet it
+p2l6 has within it a
+p2l7 complex grammar oft
+p3l1 misunderstood by
+p3l2 those who merely
+p3l3 hear the few broken
+p3l4 words of English our
+p3l5 orcish brothers
+p3l6 manage without
+p3l7 education.
+p3l8 These are the basic
+p4l1 rules of orcish:
+p4l2 Orcish has five
+p4l3 tenses: present, past,
+p4l4 future imperfect,
+p4l5 present interjectional,
+p4l6 and prehensile.
+p4l7 Examples: gugroflu,
+p4l8 gugrofloog, gugrobo,
+p5l1 gugroglu!, gugrogug.
+p5l2 All transitive verbs
+p5l3 in the prehensile
+p5l4 tense end in ug.
+p5l5 Examples:
+p5l6 urgleighug,
+p5l7 biggugdaghgug,
+p5l8 curdakalmug.
+p6l1 All present
+p6l2 interjectional
+p6l3 conjugations start
+p6l4 with the letter G
+p6l5 unless the contain the
+p6l6 third declensive
+p6l7 accent of the letter U.
+p6l8 Examples:
+p7l1 ghothudunglug, but not
+p7l2 azhbuugub.
+p7l3 The past tense can
+p7l4 only refer to events
+p7l5 since the last meal,
+p7l6 but the prehensile
+p7l7 tense can refer to
+p7l8 any event within
+p8l1 reach.
+p8l2 The present tense
+p8l3 is conjugated like the
+p8l4 future imperfect
+p8l5 tense, when the
+p8l6 interrogative mode is
+p8l7 used by pitching the
+p8l8 sound a quarter-tone
+p9l1 higher.
+p9l2 Orcish hath no
+p9l3 concept of person, as
+p9l4 in first person, third
+p9l5 person, I, we, etc.
+p9l6 Orcish grammar
+p9l7 relies upon the three
+p9l8 cardinal rules of
+p10l1 accretion, prefixing,
+p10l2 and agglutination, in
+p10l3 addition to pitch. In
+p10l4 the former, phonemes
+p10l5 combine into larger
+p10l6 words which may
+p10l7 contain full phrasal
+p10l8 significance
+p11l1 In the second,
+p11l2 prefixing specific
+p11l3 phonetic sounds
+p11l4 changes the subject of
+p11l5 the sentence into
+p11l6 object, interrogative,
+p11l7 addressed individual,
+p11l8 or dinner.
+p12l1 Agglutination occurs
+p12l2 whenever four of the
+p12l3 same letter are
+p12l4 present in a word, in
+p12l5 which case, any two
+p12l6 of them may be
+p12l7 removed or slurred.
+p12l8 Pitch changes the
+p13l1 phoneme value of
+p13l2 individual syllables,
+p13l3 thus completely
+p13l4 altering what a word
+p13l5 may mean. The
+p13l6 classic example is
+p13l7 Aktgluthugrot
+p13l8 bigglogubuu
+p14l1 dargilgaglug lublublub
+p14l2 which can mean You
+p14l3 are such a pretty
+p14l4 girl, My mother ate
+p14l5 your primroses, or
+p14l6 Jellyfish nose paints
+p14l7 alms potato,
+p14l8 depending on pitch.
+p15l1 Orcish poetry often
+p15l2 relies upon repeating
+p15l3 the same phrase in
+p15l4 multiple pitches, even
+p15l5 changing pitch
+p15l6 midword. None of
+p15l7 this great art is
+p15l8 translatable.
+p16l1 The orcish language
+p16l2 uses the following
+p16l3 vowels: ab, ad, ag, akt
+p16l4 at, augh, auh, azh, e,
+p16l5 i, o, oo, u, uu. The
+p16l6 vowel sound a is not
+p16l7 recognized as a vowel
+p16l8 and does not exist in
+p17l1 their alphabet.
+p17l2 The orcish alphabet is
+p17l3 best learned using the
+p17l4 classic rhyme
+p17l5 repeated at 23
+p17l6 different pitches:
+p17l7 Lugnog ghu blat
+p17l8 suggaroglug,
+p18l1 Gaghbuu dakdar ab
+p18l2 highugbo,
+p18l3 Gothnogbuim ad
+p18l4 gilgubbugbuilug
+p18l5 Bilgeaugh thurggulg.
+p18l6 Translation of the
+p19l1 first pitch:
+p19l2 Eat food, the first
+p19l3 letter is ab,
+p19l4 Kill people, next
+p19l5 letter is ad,
+p19l6 I forget the rest
+p19l7 But augh is in there
+p19l8 somewhere!
+p20l1 What follows is a
+p20l2 complete phonetic
+p20l3 library of the orcish
+p20l4 language:
+p20l5 ab, ad, ag, akt, alm,
+p20l6 at, augh, auh, azh,
+p20l7 ba, ba, bag, bar, baz,
+p20l8 bid, bilge, bo, 
+p21l1 bog, bog, brui, bu,
+p21l2 buad, bug, bug, buil,
+p21l3 buim, bum, buo, buor,
+p21l4 buu, ca, car, clog,
+p21l5 cro, cuk, cur, da,
+p21l6 dagh, dagh, dak, dar,
+p21l7 deak, der, dil, dit,
+p21l8 dor, dre, dri,
+p22l1 dru, du, dud, duf,
+p22l2 dug, dug, duh, dun,
+p22l3 eag, eg, egg, eichel,
+p22l4 ek, ep, ewk, faugh,
+p22l5 fid, flu, fog, foo,
+p22l6 foz, fruk, fu, fub,
+p22l7 fud, fun, fup, fur,
+p22l8 gaa, gag, gagh, gan,
+p23l1 gar, gh, gha, ghat,
+p23l2 ghed, ghig, gho, ghu,
+p23l3 gig, gil, gka, glu,
+p23l4 glu, glug, gna, gno,
+p23l5 gnu, gol, gom, goth,
+p23l6 grunt, grut, gu, gub,
+p23l7 gub, gug, gug, gugh,
+p23l8 guk, guk.
+}
+book 16
+{
+pages 4
+title A Christmas Carole
+author Unknown
+p1l1 Slashing through
+p1l2 the Orcs.
+p1l3 With a good two-
+p1l4 handed blade. 
+p1l5 Over corpses we go
+p1l6 And through the gore
+p1l7 we wade
+p2l1 Mace on helmet rings
+p2l2 Making bodies fly
+p2l3 What fun to sing our
+p2l4 SLAYING song
+p2l5 And watch these
+p2l6 suckers die!
+p3l1 Chorus:
+p3l2 Oh, ring their bells
+p3l3 with swords and spells
+p3l4 Don't let 'em get away!
+p3l5 We're brave and bold
+p3l6 for fame and gold
+p3l7 We'll make a lot today!
+p4l1 Oh, ring their bells
+p4l2 with swords and spells
+p4l3 Don't let 'em get away!
+p4l4 We'll hack and slash
+p4l5 and blast and trash
+p4l6 And blow these
+p4l7 dudes away!
+}
+book 17
+{
+pages 16
+title Charge of the Light Brigade
+author Tennyson
+p1l1 Half a league,
+p1l2  half a league,
+p1l3 Half a leage onward,
+p1l4 All in the valley of
+p1l5  Death
+p1l6 Rode the six hundred.
+p2l1 Forward,
+p2l2 the Light Brigade!
+p2l3 Charge for the guns!
+p2l4  he said:
+p2l5 Into the valley of
+p2l6  Death
+p2l7 Rode the six hundred.
+p3l1 Forward,
+p3l2  the Light Brigade!
+p3l3 Was there a man
+p3l4  dismay'd?
+p3l5 Not tho'
+p3l6  the soldier knew
+p3l7 Someone had blunder'd:
+p4l1 Theirs not
+p4l2  to make reply,
+p4l3 Theirs not
+p4l4  to reason why,
+p4l5 Theirs but to do
+p4l6  and die:
+p4l7 Into the valley
+p4l8  of Death
+p5l1 Rode the six hundred.
+p5l2 Cannon to the
+p5l3  right of them,
+p5l4 Cannon to the
+p5l5  left of them,
+p5l6 Cannon in
+p5l7  front of them
+p5l8 Volley'd and thunder'd:
+p6l1 Storm'd at with
+p6l2  shot and shell
+p6l3 Boldly they
+p6l4  rode and well,
+p7l1 Into the jaws
+p7l2  of Death,
+p7l3 Into the mouth
+p7l4  of Hell
+p7l5 Rode the six hundred.
+p8l1 Flash'd all their
+p8l2  sabers bare,
+p8l3 Flash'd as they turn'd
+p8l4  in air
+p8l5 Sab'ring the
+p8l6  gunners there,
+p8l7 Charging an army
+p8l8  while
+p9l1 All the world wonder'd:
+p9l2 Plunged in the
+p9l3  battery smoke
+p10l1 Right thro' the
+p10l2  line they broke;
+p10l3 Cossack and Russian
+p10l4 Reel'd from the
+p10l5  saber stroke
+p11l1 Shatter'd and sunder'd.
+p11l2 Then they rode back,
+p11l3 but not
+p11l4 Not the six hundred.
+p12l1 Cannon to
+p12l2  the right of them,
+p12l3 Cannon to
+p12l4  the left of them,
+p12l5 Cannon behind them
+p12l6 Volley'd and thunder'd:
+p13l1 Storm'd at with
+p13l2  shot and shell,
+p13l3 While horse and hero
+p13l4  fell,
+p13l5 They that had
+p13l6  fought so well
+p14l1 Came through the
+p14l2  jaws of death
+p14l3 Back from the
+p14l4  mouth of hell,
+p14l5 All that was left
+p14l6  of them --
+p14l7 Left of six hundred.
+p15l1 When can
+p15l2  their glory fade?
+p15l3 Oh, the wild
+p15l4  charge they made!
+p15l5 All the world wonder'd.
+p16l1 Honor the
+p16l2  charge they made!
+p16l3 Honor the
+p16l4  Light Brigade --
+p16l5 Noble six hundred!
+}
+book 18
+{
+pages 14
+title A politic call to anarchy
+author Lord Blackthorne
+p1l1 Let it never be said
+p1l2 that I have aught as
+p1l3 quarrel with my liege
+p1l4 Lord British, for
+p1l5 indeed we be of the
+p1l6 best of friends,
+p1l7 sharing amicable
+p1l8 games of chess 'pon
+p2l1 winter's night and
+p2l2 talking at length into
+p2l3 the wee hours of the
+p2l4 issues that affect the
+p2l5 realm of Britannia.
+p2l6 Yet true friendship
+p2l7 doth not prevent true
+p2l8 philosophical
+p3l1 disagreement either.
+p3l2 While I view with
+p3l3 approval my lord's
+p3l4 affection for his
+p3l5 carefully crafted
+p3l6 philosophy of the
+p3l7 Eight Virtues,
+p3l8 wherein moral
+p4l1 behavior is
+p4l2 encouraged in the
+p4l3 populace, I view
+p4l4 with less approval the
+p4l5 expenditure of public
+p4l6 funds upon the
+p4l7 construction of
+p4l8 shrines to said
+p5l1 ideals. The issue is
+p5l2 not one of funds
+p5l3 however, but a
+p5l4 disagreement most
+p5l5 intellectual over
+p5l6 the proper way of
+p5l7 humankind in an
+p5l8 ethical sense. Surely
+p6l1 freedom of decision
+p6l2 must be regarded as
+p6l3 paramount in any
+p6l4 such moral decision?
+p6l5 Though none fail to
+p6l6 censure the
+p6l7 murderer, a subtler
+p6l8 question arises when
+p7l1 we ask if his behavior
+p7l2 would be ethical if he
+p7l3 were forced to it.
+p7l4 I say to thee, the
+p7l5 reader, quite flatly,
+p7l6 that no ethical system
+p7l7 shall have sway over me
+p7l8 unless it convinceth me
+p8l1 for that freely made
+p8l2 choice is to me
+p8l3 the sigh that the
+p8l4 system has validity.
+p8l5 Whereas the system of
+p8l6 Virtues that my liege
+p8l7 espouses is indeed a
+p8l8 compilation
+p9l1 of commonly approved
+p9l2 virtues, I approve of
+p9l3 it. Where it seeks to
+p9l4 control the populace
+p9l5 and restrict their
+p9l6 diversity and their
+p9l7 range of behaviors, I
+p9l8 quarrel with it. And
+p10l1 thus do I issue this
+p10l2 politic call to
+p10l3 anarchy, whilst humbly
+p10l4 begging forgivness of
+p10l5 Lord British for my
+p10l6 impertinence:,
+p10l7 Celebrate thy
+p10l8 differences. Take thy
+p11l1 actions according to
+p11l2 they own lights.
+p11l3 Question from what
+p11l4 source a law, a rule,
+p11l5 a judge and a virtue
+p11l6 may arise. 'Twere
+p11l7 possible (though I
+p11l8 suggest it not
+p12l1 seriously) that a
+p12l2 daemon planted the
+p12l3 seed of these Virtues
+p12l4 in my Lord British's
+p12l5 mind; 'twere possible
+p12l6 that the Shrines were
+p12l7 but a plan to destroy
+p12l8 this world. Thou canst
+p13l1 not know unless thou
+p13l2 questioneth, doubteth,
+p13l3 and in the end, unless
+p13l4 thou relyest upon
+p13l5 THYSELF and they
+p13l6 judgement. I offer
+p13l7 these words as mere
+p13l8 philosophical musings
+p14l1 for those who seek
+p14l2 enlightenment, for
+p14l3 'tis the issue that
+p14l4 hath occupied mine
+p14l5 interest and that of
+p14l6 Lord British for some
+p14l7 time now.
+}
+book 19
+{
+pages 20
+title Virtues
+author Lord British
+p1l1 Within this world live
+p1l2 people with many
+p1l3 different ideals and
+p1l4 this is good. Yet what
+p1l5 is it within the people
+p1l6 of our land that sorts
+p1l7 out the good from the
+p1l8 evil, the cherished
+p2l1 from the disdained?
+p2l2 Virtue, I say it is,
+p2l3 and virtue is the
+p2l4 logical outcome of a
+p2l5 people who wish to
+p2l6 live together in a
+p2l7 bonded society.
+p3l1 For without Virtues
+p3l2 as a code of conduct
+p3l3 which people maintain
+p3l4 in their relations with
+p3l5 each other, the fabric
+p3l6 of that society will
+p3l7 become weakened. For
+p3l8 a society to grow and
+p4l1 prosper for all, each
+p4l2 must grant the others
+p4l3 a common base of
+p4l4 consideration.
+p4l5 I call this base the
+p4l6 Virtues. For though
+p4l7 one person might gain
+p5l8 personal advantage by
+p5l1 breaching such a code,
+p5l2 the society as a whole
+p5l3 would suffer.
+p5l4 There are three
+p5l5 Principle Virtues that
+p5l6 should guide people to
+p5l7 enlightenment. These
+p5l8 are: Truth, Love and
+p6l1 Courage. From all the
+p6l2 infinite reasons one
+p6l3 may have to found an
+p6l4 action, such as greed
+p6l5 or charity, envy or
+p6l6 pity, the three
+p6l7 Principle Virtues
+p6l8 stand out.
+p7l1 In fact all other
+p7l2 virtues and vices can
+p7l3 be shown to be built
+p7l4 from these principles
+p7l5 and their opposite
+p7l6 corruption's of
+p7l7 Falsehood, Hatred and
+p7l8 Cowardice. These
+p8l1 three Principles can
+p8l2 be combined in eight
+p8l3 ways, which I will
+p8l4 call the eight virtues.
+p8l5 The eight virtues
+p8l6 which we should
+p8l7 build our society upon
+p8l8 follow.
+p9l1 Truth alone becomes
+p9l2 Honesty, for without
+p9l3 honesty between our
+p9l4 people, how can we
+p9l5 build the trust which
+p9l6 is needed to maximize
+p9l7 our successes.
+p9l8 Love alone becomes
+p10l1 compassion, for at
+p10l2 some time or another
+p10l3 all of us will need the
+p10l4 compassion of others,
+p10l5 and most likely
+p10l6 compassion will be
+p10l7 shown to those who
+p10l8 have shown it.
+p11l1 Courage alone
+p11l2 becomes Valor,
+p11l3 without valor our
+p11l4 people will never
+p11l5 reach into the
+p11l6 unknown or to the
+p11l7 risky and will never
+p11l8 achieve.
+p12l1 Truth tempered by
+p12l2 Love gives us Justice,
+p12l3 for only in loving
+p12l4 search for the truth
+p12l5 can one dispense fair
+p12l6 Justice, rather than
+p12l7 create a cold and
+p12l8 callous people.
+p13l1 Love and Courage
+p13l2 gives us Sacrifice,
+p13l3 for a people who love
+p13l4 each other will be
+p13l5 willing to make
+p13l6 personal sacrifices to
+p13l7 help others in need,
+p14l8 which one day, may be
+p14l1 needed in return.
+p14l2 Courage and Truth
+p14l3 give us Honor, great
+p14l4 knights know this
+p14l5 well, that chivalric
+p14l6 honor can be found by
+p14l7 adhering to this code
+p14l8 of conduct.
+p15l1 Combining Truth,
+p15l2 Love and Courage
+p15l3 suggest the virtue of
+p15l4 Spirituality the virtue
+p15l5 that causes one to be
+p15l6 introspective, to
+p15l7 wonder about ones
+p15l8 place in this world and
+p16l1 whether one's deeds
+p16l2 will be recorded as a
+p16l3 gift to the world or a
+p16l4 plague.
+p16l5 The final Virtue is
+p16l6 more complicated. For
+p16l7 the eighth combination
+p16l8 is that devoid of
+p17l1 Truth, Love or Courage
+p17l2 which can only exist
+p17l3 in a state of great
+p17l4 Pride, which of
+p17l5 course is not a virtue
+p17l6 at all. Perhaps this
+p17l7 trick of fate is a test
+p17l8 to see if one can
+p18l1 realize that the true
+p18l2 virtue is that of
+p18l3 Humility. I feel that
+p18l4 the people of Magincia
+p18l5 fail to see this to such
+p18l6 a degree that I would
+p18l7 not be surprised if
+p18l8 some ill fate awaited
+p19l1 their future.
+p19l2 Thus from the
+p19l3 infinite possibilities
+p19l4 which spawned the
+p19l5 Three Principles of
+p19l6 Truth, Love and
+p19l7 Courage, come the
+p19l8 Eight Virtues of
+p20l1 Honesty, Compassion,
+p20l2 Valor, Justice,
+p20l3 Sacrifice, Honor,
+p20l4 Spirituality and
+p20l5 Humility.
+}
+book 20
+{
+pages 14
+title On the diversity of our land
+author Lord Blackthorne
+p1l1 While I deplore the
+p1l2 depredations of the
+p1l3 misguided and
+p1l4 belligerent races
+p1l5 with which we
+p1l6 share our fair
+p1l7 Britannia and
+p1l8 alongside the populace
+p2l1 do mourn the needless
+p2l2 deaths that their
+p2l3 raids cause, I cannot
+p2l4 countenance the policy
+p2l5 of wholesale
+p2l6 slaughter of these
+p2l7 races that seems to be
+p2l8 the habity of our
+p3l1 soldierly element. Can
+p3l2 we not regard the
+p3l3 ratmen, lizard men,
+p3l4 and orcs are fellow
+p3l5 intelligent beings
+p3l6 with whom we share a
+p3l7 planet? Why must we
+p3l8 slay them on sight,
+p4l1 rather than attempt to
+p4l2 engage them in
+p4l3 dialogue? There is no
+p4l4 policy of shooting at
+p4l5 wisps when they
+p4l6 grace us with their
+p4l7 presence (not that an
+p4l8 arrow could do much
+p5l1 to pierce them!).
+p5l2 To view these
+p5l3 creatures as vermin
+p5l4 denies their obvious
+p5l5 intelligence and we
+p5l6 cannot underestimate
+p5l7 the repercussions that
+p5l8 their slaughter may
+p6l1 have. If we regard the
+p6l2 slaying of fellow
+p6l3 humans as a crime, so
+p6l4 must we regard the
+p6l5 killing of an orc.
+p6l6 At the same time,
+p6l7 should a lizardman
+p6l8 slay a human, whould
+p7l1 we not forgive their
+p7l2 ignorance and
+p7l3 foolishness? Let us
+p7l4 not surrender the
+p7l5 high moral ground by
+p7l6 descending to
+p7l7 bestiality.
+p8l8 Now, I say not that
+p8l1 we should fail to
+p8l2 defend ourselves in
+p8l3 case of attack, for
+p8l4 even amongst humans
+p8l5 we see war, we see
+p8l6 famine and we see
+p8l7 assault (though we
+p8l8 owe a debt of
+p9l1 gratitude to our Lord
+p9l2 British for preserving
+p9l3 us from the worst of
+p9l4 these!). However,
+p9l5 incursions such as the
+p9l6 recent tragedy which
+p9l7 cost us the life of
+p9l8 Japheth, Guildmaster
+p10l1 of Trinsic's Paladins,
+p10l2 are folly.
+p10l3 I had met Japheth,
+p10l4 and like all paladins,
+p10l5 he burned with an
+p10l6 inner fire. Yet though
+p10l7 I had the utmost
+p10l8 respect for him, none
+p11l1 could deny the hatred
+p11l2 that flashed in his
+p11l3 eyes the mere mention
+p11l4 of orcs. And thus he
+p11l5 carried his battle to
+p11l6 the orc camps and
+p11l7 died there, unable to
+p11l8 rise above his own
+p12l1 childhood experiences
+p12l2 depicted in his book,
+p12l3 The Burning of
+p12l4 Trinsic. 'Tis a shame
+p12l5 that even our
+p12l6 mightiest men fall
+p12l7 prey to this ignorance!
+p12l8 Are there not
+p13l1 legends of orcs
+p13l2 adopting human
+p13l3 children to raise as
+p13l4 their own? Tales of
+p13l5 complex societies built
+p13l6 underground by races
+p13l7 we regard as bestial?,
+p13l8 Let us not repeat the
+p14l1 mistake of Japheth of
+p14l2 the Paladins and let
+p14l3 us cease to persecute
+p14l4 the nonhuman races,
+p14l5 before we discover
+p14l6 that we are harming
+p14l7 ourselves in the
+p14l8 process.
+}
+book 21
+{
+pages 12
+title Beltran's guide to guilds
+author Beltran
+p1l1 This reference
+p1l2 work is intended
+p1l3 merely to serve as a
+p1l4 resource for those
+p1l5 curious as to the full
+p1l6 range of trades and
+p1l7 societies extant in
+p1l8 Britannia and nearby
+p2l1 nations. For each
+p2l2 trade or guild, their
+p2l3 blazon is given.
+p2l4 Armourer's Guild.
+p2l5 Gold bar above black
+p2l6 bar. Association of
+p2l7 Warriors. Blue cross
+p2l8 on a red field.
+p3l1 Barters' Guild. Green
+p3l2 and white stripes,
+p3l3 diagonal. Blacksmith's
+p3l4 Guild. Gold alongside
+p3l5 black. Federation of
+p3l6 Rogue and Beggars. Red
+p3l7 above black. Fighters
+p3l8 and Footmen. Blue
+p4l1 horizontal bar on red
+p4l2 field. Guild of
+p4l3 Archers. A gold swath
+p4l4 parting red and blue.
+p4l5 Guild of Armaments.
+p4l6 Swath of gold on black
+p4l7 field, gold accents.
+p4l8 Guild of Assassins.
+p5l1 Black and red 
+p5l2 quartered. Guild of
+p5l3 Barbars. Red and white
+p5l4 stripes. Guild of
+p5l5 Cavalry and Horse.
+p5l6 Vertical blue on a red
+p5l7 field. Guild of
+p5l8 Fishermen. Blue and
+p6l1 white, quartered.
+p6l2 Guild of Mages.
+p6l3 Purple and blue, in a
+p6l4 crossed pennant pattern.
+p6l5 Guild of Provisioners.
+p6l6 White bar above green
+p6l7 bar. Guild of Sorcery.
+p6l8 A field divided
+p7l1 diagonally in blue and
+p7l2 purple. Healer's Guild.
+p7l3 Gold swath dividing
+p7l4 green from purple,
+p7l5 gold accents.
+p7l6 Lord British's Healers
+p7l7 of Virtue. Golden ankh
+p7l8 on dark green. Masters
+p8l1 of Illusion. Blue and
+p8l2 purple checkers.
+p8l3 Merchant's Guild.
+p8l4 Gold coins on green
+p8l5 field. Mining
+p8l6 Cooperative. A gold
+p8l7 cross, quartering blue
+p8l8 and black. Order of
+p9l1 Engineers. Purple,
+p9l2 gold and blue
+p9l3 vertical. Sailors'
+p9l4 Maritime Association.
+p9l5 A white bar centered
+p9l6 on a blue field.
+p9l7 Seamen's Chapter.
+p9l8 Blue and white in a
+p10l1 crossed pennant
+p10l2 pattern. Society of
+p10l3 Cooks and Chefs. White
+p10l4 and red diagonal
+p10l5 fields checker on
+p10l6 green field. Society
+p10l7 of Shipwrights. White
+p10l8 diagonal above blue.
+p11l1 Society of Thieves.
+p11l2 Black and red diagonal
+p11l3 stripes. Society of
+p11l4 Weaponsmakers. Gold
+p11l5 diagonal above black.
+p11l6 Tailor's Hall. Purple
+p11l7 above gold above red.
+p11l8 The Bardic Collegium.
+p12l1 Purple and red
+p12l2 checkers on gold field.
+p12l3 Trader's Guild. White
+p12l4 bar centered down
+p12l5 green field.
+}
+book 22
+{
+pages 18
+title Classic tales of Vesper: Volume 1
+author Clarke's Printery
+p1l1 'Tis an Honor to
+p1l2 present to Thee these
+p1l3 Tales collected from
+p1l4 Ages Past. In this
+p1l5 Inaugural Volume, we
+p1l6 present this Verse oft
+p1l7 Recited as a Lullabye
+p1l8 for sleepy Children.
+p2l1 Preface by Guilhem
+p2l2 the Scholar,
+p2l3 The meaning of this
+p2l4 verse has oft been
+p2l5 discussed in halls of
+p2l6 scholarly sorts, for
+p2l7 its mysterious
+p2l8 singsongy melody is
+p3l1 oddly disturbing to
+p3l2 adult ears, though
+p3l3 children seem to find
+p3l4 it restful as they
+p3l5 sleep. Perhaps it is
+p3l6 but the remnant of a
+p3l7 longer ballad once
+p3l8 extant, for there are
+p4l1 internal indications
+p4l2 that it once told a
+p4l3 longer story about
+p4l4 ill-fated lovers and
+p4l5 a magical experiment
+p4l6 gone awry. However,
+p4l7 poetic license and the
+p4l8 folk process has
+p5l1 distorted the words
+p5l2 until now the locale
+p5l3 of? the tale is no
+p5l4 more than in the wind,
+p5l5 which while it serves
+p5l6 a pleasingly
+p5l7 metaphorical purpose,
+p5l8 fails to inform the
+p6l1 listener as to any real
+p6l2 locale!
+p6l3 Another possibility
+p6l4 is that this is some
+p6l5 form of creation myth
+p6l6 explaining the genesis
+p6l7 of the various
+p6l8 humanoid creatures
+p7l1 that roam the lands
+p7l2 of? Britannia. It does
+p7l3 not take a stretch of
+p7l4 the imagination to
+p7l5 name the middle
+p7l6 verse's girl becomes a
+p7l7 tree as a possible
+p7l8 explanation for the
+p8l1 reaper, for in the
+p8l2 area surrounding Minoc,
+p8l3 reapers are oft
+p8l4 referred to among the
+p8l5 lumber jacking
+p8l6 community as
+p8l7 widowmakers. That
+p8l8 these creatures are of
+p9l1 arcane origin is
+p9l2 assumed, but the
+p9l3 verse seems to imply a
+p9l4 long ago creator and
+p9l5 uses the antique
+p9l6 magickal terminology
+p9l7 of plaiting strands of
+p9l8 ether that is so often
+p10l1 found in ancient
+p10l2 texts. In addition,
+p10l3 the reference to
+p10l4 snakehills may
+p10l5 profitably be regarded
+p10l6 as a reference to an
+p10l7 actual location, such
+p10l8 as perhaps a local
+p11l1 term for the Serpent's
+p11l2 Spine.
+p11l3 A commoner
+p11l4 interpretation is that
+p11l5 like many nursery
+p11l6 rhymes, it is a simple
+p11l7 explanation for death,
+p11l8 wherein the wind
+p12l1 snatches up boys and
+p12l2 girls and when they
+p12l3 sleep in order to keep
+p12l4 the balance of the
+p12l5 world. Notable tales
+p12l6 have been written for
+p12l7 children of
+p12l8 adventures in the
+p13l1 Snakehills, which
+p13l2 are presumed to be an
+p13l3 Afterworld whence
+p13l4 the spirit lives on. A
+p13l5 grim lullabye, to be
+p13l6 sure, but no worse
+p13l7 than lest I die
+p13l8 before I wake surely.
+p14l1 In either case, 'tis
+p14l2 an old favorite herein
+p14l3 printed for the first
+p14l4 time for thy
+p14l5 enjoyment and
+p14l6 perusal!
+p14l7 In the Wind where the
+p14l8 Balance Is Whispered
+p15l1 in Hallways, In the
+p15l2 Wind where the Magic
+p15l3 Flows All through the
+p15l4 Night, There live Mages
+p15l5 With Robes make of
+p15l6 Whole Days, Reading
+p15l7 Books full of Doings
+p15l8 Printed on Light, In
+p16l1 the Wind where the
+p16l2 Lovers Are Crossed
+p16l3 under Shadows, Where
+p16l4 they Meet and are
+p16l5 Parted, By the Orders
+p16l6 of Fate, The Girl
+p16l7 becomes Tree and
+p16l8 thus becomes Widow,
+p17l1 The Boy becomes Earth
+p17l2 And Wanders Till Late,
+p17l3 In the Wind are the
+p17l4 Monster, First Born
+p17l5 First Created, When
+p17l6 Chanting and Ether,
+p17l7 Mix Meddling and Nigh,
+p17l8 Fear going to Wind
+p18l1 Fear Finding its
+p18l2 Plaitings, Go Not to
+p18l3 the Snakehills,
+p18l4 Lest you Care to Die
+}
+book 23
+{
+pages 18
+title Dimensional travel: A Monograph
+author Dryus Doost
+p1l1 'Tis beyond the
+p1l2 scope of this small
+p1l3 monograph to discuss
+p1l4 the details of
+p1l5 moongates and the
+p1l6 manners in which
+p1l7 they distort the
+p1l8 fabric of reality in
+p2l1 such a manner as to
+p2l2 permit the passage of
+p2l3 living flesh from place
+p2l4 to place, world to
+p2l5 world, or indeed from
+p2l6 dimension to
+p2l7 dimension.
+p2l8 Instead, allow me to
+p3l1 bring thy attention,
+p3l2 Gentle Reader, to the
+p3l3 curious
+p3l4 characteristics that
+p3l5 are shared by certain
+p3l6 individuals within our
+p3l7 realm.
+p3l8 Long has it been
+p4l1 known that the blue
+p4l2 moongate permits
+p4l3 travel from place to
+p4l4 place and none have
+p4l5 trouble in taking this
+p4l6 path. Yet 'tis also
+p4l7 known, albeit only to a
+p4l8 few, that certain
+p5l1 individuals are unable
+p5l2 to traverse the black
+p5l3 moongates that permit
+p5l4 travel from one
+p5l5 dimension to another.
+p5l6 The noted mage and
+p5l7 peer of our realm,
+p5l8 Lord Blackthorn, once
+p6l1 told me in conversation
+p6l2 that his arcane
+p6l3 research had indicated
+p6l4 that the issue was one
+p6l5 of conservation of
+p6l6 ether. To wit, given
+p6l7 the postulate that
+p6l8 matter within a given
+p7l1 dimension may be but
+p7l2 a cros-section of
+p7l3 ethereal matter that
+p7l4 exists in multiple
+p7l5 dimensions, it
+p7l6 becomes obvious that
+p7l7 said ethereal
+p7l8 structure cannot enter
+p8l1 dimensions in which
+p8l2 it is already present.
+p8l3 Imagine an
+p8l4 individual (and the
+p8l5 Lord Blackthorn
+p8l6 hinted that he was one
+p8l7 such) who exist
+p8l8 already in some form
+p9l1 in multiple
+p9l2 dimensions: said
+p9l3 individual would not
+p9l4 be able to cross into
+p9l5 another dimension
+p9l6 because HE IS
+p9l7 ALREADY THERE.
+p9l8 The implications of
+p10l1 this are staggering,
+p10l2 and merit further
+p10l3 study. 'Tis well
+p10l4 known by theorists in
+p10l5 the field that
+p10l6 divisions in the
+p10l7 ethereal structure of
+p10l8 an individual are
+p11l1 already implicit at
+p11l2 the temporal level, as
+p11l3 causality forces
+p11l4 divisions upon the
+p11l5 ether. This is the
+p11l6 basic operating
+p11l7 mechanism by which
+p11l8 white moongates
+p12l1 function, permitting
+p12l2 time travel.
+p12l3 As time travel is not
+p12l4 barred by the
+p12l5 presence of an earlier
+p12l6 self (though
+p12l7 encountering said
+p12l8 earlier self can prove
+p13l1 arcanely perilous),
+p13l2 there must be some
+p13l3 rigidity to the
+p13l4 ethereal structure that
+p13l5 bars multiple
+p13l6 instantiations
+p13l7 of structures from
+p13l8 manifesting within
+p14l1 the same context.
+p14l2 If one regards time
+p14l3 and causal bifurcation
+p14l4 as a web, perhaps the
+p14l5 appropriate analogy
+p14l6 for dimensional
+p14l7 matrices is that of a
+p14l8 crystalline structure
+p15l1 with rigid linkages.
+p15l2 The only way in
+p15l3 which an individual
+p15l4 such as Lord
+p15l5 Blackthorn, who
+p15l6 exists in multiple
+p15l7 dimensional matrices,
+p15l8 can cross worlds via a
+p16l1 black moongate, would
+p16l2 be for the entire
+p16l3 crystalline structure
+p16l4 of the dimension to
+p16l5 perfectly match the
+p16l6 ethereal resonance of
+p16l7 the destination
+p16l8 dimension.
+p17l1 The problem of
+p17l2 why certain
+p17l3 individuals are
+p17l4 already replicated in
+p17l5 multiple crystalline
+p17l6 matrices is one that I
+p17l7 fail to provide any
+p17l8 schema for in these
+p18l1 poor theories. It is
+p18l2 my fondest hope that
+p18l3 someday someone
+p18l4 shall conquer that
+p18l5 thorny problem and
+p18l6 enlighten the world.
+}
+book 24
+{
+pages 11
+title Treatise on alchemy
+author Felicia Heirophant
+p1l1 The alchemical arts
+p1l2 are notable for their
+p1l3 deceptive simplicity.
+p1l4 'Tis true that to our
+p1l5 best knowledge
+p1l6 currently, there are
+p1l7 but eight valid potions
+p1l8 that can be made
+p2l1 (though I emphasize
+p2l2 that new discoveries
+p2l3 may always await).
+p2l4 However, the delicate
+p2l5 balance of confecting
+p2l6 the potions is
+p2l7 difficult indeed and
+p2l8 requires great skill.
+p3l1 To give thee an
+p3l2 example of the
+p3l3 simpler potions that
+p3l4 can be created by
+p3l5 those well-versed in
+p3l6 the subtleties of
+p3l7 alchemy.
+p3l8 Black pearl, that
+p4l1 rare substance that is
+p4l2 oft found lying
+p4l3 unannounced upon the
+p4l4 surface of the ground,
+p4l5 when properly
+p4l6 crushed with mortar
+p4l7 and pestle, can yield
+p4l8 a fine powder. Said
+p5l1 powder in the proper
+p5l2 proportions when
+p5l3 mixed via the
+p5l4 alchemical arts can
+p5l5 yield a wonderfully
+p5l6 refreshing drink.
+p5l7 The revolting blood
+p5l8 moss so gingerly
+p6l1 scraped off
+p6l2 windowsills by
+p6l3 fastidious housewives
+p6l4 is but a tiny cousin to
+p6l5 the wilder version,
+p6l6 which when properly
+p6l7 prepared yields a
+p6l8 magical liquid that for
+p7l1 a time can make the
+p7l2 imbiber a more agile
+p7l3 and dextrous
+p7l4 individual.
+p7l5 However, beware of
+p7l6 the deadly nightshade,
+p7l7 for it yields a
+p7l8 deceptively
+p8l1 sweet-tasting poison
+p8l2 that can prove highly
+p8l3 fatal to the drinker,
+p8l4 and in fact is also
+p8l5 used by assassins to
+p8l6 coat their blades.
+p8l7 Fortunately, this
+p8l8 latter art of poisoning
+p9l1 is little known!
+p9l2 There is much to
+p9l3 reward the student of
+p9l4 alchemy, indeed. The
+p9l5 rumors of longtime
+p9l6 alchemists losing
+p9l7 their hair and
+p9l8 acquiring an
+p10l1 unhealthy pallor, not
+p10l2 to mention unsightly
+p10l3 blotches upon their
+p10l4 once-fair skin, are
+p10l5 unhappily, true. Yet
+p10l6 the joys of the mind
+p10l7 make up for the
+p10l8 complete loss of
+p11l1 interest that others
+p11l2 may have in thee as an
+p11l3 object of courtship,
+p11l4 and I have never
+p11l5 regretted that choice.
+p11l6 Honestly, truly. Not
+p11l7 once.
+}
+book 25
+{
+pages 9
+title Classic children tales: Volume one
+author Guilhem
+p1l1 Clarke's Printery is
+p1l2 Honored to Present
+p1l3 Tales from Ages Past!
+p1l4 Guilhem the Scholar
+p1l5 Shall End Each
+p1l6 Volume with Staid
+p1l7 Commentary.
+p1l8 THE RHYME, Dance in
+p2l1 the Star Chamber
+p2l2 And Dance in the Pit
+p2l3 And Eat of your
+p2l4 Entrees, In the Glass
+p2l5 House you Sit.
+p2l6 COMMENTARY
+p2l7 A common rhyme
+p2l8 for little babies,
+p3l1 'tis thought that this
+p3l2 little ditty is part
+p3l3 of the corpus of
+p3l4 legendary
+p3l5 tales regarding the
+p3l6 world before Sosaria
+p3l7 (see the wonderful
+p3l8 fables of Fabio the
+p4l1 Poor for fictionalized
+p4l2 versions of these
+p4l3 stories, also available
+p4l4 from this same
+p4l5 publisher). According
+p4l6 to these old tales,
+p4l7 which survive mostly
+p4l8 in the hills and remote
+p5l1 villages where Lord
+p5l2 British is as yet a
+p5l3 distant and mythical
+p5l4 ruler, the gods of old
+p5l5 (a fanciful notion!)
+p5l6 met to discuss the
+p5l7 progress of creating
+p5l8 the world in mystical
+p6l1 rooms. A simple
+p6l2 analysis reveals these
+p6l3 rooms to be mere
+p6l4 mythological
+p6l5 generalizations.
+p6l6 The Star Chamber
+p6l7 is clearly a reference
+p6l8 to the sky. The Pit
+p7l1 is certainly an
+p7l2 Underworld analogous
+p7l3 to the Snake hills of
+p7l4 other tales and the
+p7l5 Glass House is no
+p7l6 doubt the vantage point
+p7l7 from which the gods
+p7l8 observed their
+p8l1 creation. All is simple
+p8l2 when seen from this
+p8l3 perspective, leaving
+p8l4 only the mysterious
+p8l5 reference to dinners.
+p8l6 Oddly enough the
+p8l7 rhyme is universally
+p8l8 used only for
+p9l1 midnight feedings,
+p9l2 never during the day.
+}
+book 26
+{
+pages 9
+title Classic children tales Volume two
+author Guilhem
+p1l1 Clarke's Printery is
+p1l2 Honored to Present
+p1l3 Tales from Ages Past!
+p1l4 Guilhem the Scholar
+p1l5 Shall End Each
+p1l6 Volume with Staid
+p1l7 Commentary.
+p1l8 THE RHYME, Dance in
+p2l1 the Star Chamber
+p2l2 And Dance in the Pit
+p2l3 And Eat of your
+p2l4 Entrees, In the Glass
+p2l5 House you Sit.
+p2l6 COMMENTARY
+p2l7 A common rhyme
+p2l8 for little babies,
+p3l1 'tis thought that this
+p3l2 little ditty is part
+p3l3 of the corpus of
+p3l4 legendary tales
+p3l5 regarding the
+p3l6 world before Sosaria
+p3l7 (see the wonderful
+p3l8 fables of Fabio the
+p4l1 Poor for fictionalized
+p4l2 versions of these
+p4l3 stories, also available
+p4l4 from this same
+p4l5 publisher). According
+p4l6 to these old tales,
+p4l7 which survive mostly
+p4l8 in the hills and remote
+p5l1 villages where Lord
+p5l2 British is as yet a
+p5l3 distant and mythical
+p5l4 ruler, the gods of old
+p5l5 (a fanciful notion!)
+p5l6 met to discuss the
+p5l7 progress of creating
+p5l8 the world in mystical
+p6l1 rooms. A simple
+p6l2 analysis reveals these
+p6l3 rooms to be mere
+p6l4 mythological
+p6l5 generalizations.
+p6l6 The Star Chamber
+p6l7 is clearly a reference
+p6l8 to the sky. The Pit
+p7l1 is certainly an
+p7l2 Underworld analogous
+p7l3 to the Snake hills of
+p7l4 other tales and the
+p7l5 Glass House is no
+p7l6 doubt the vantage point
+p7l7 from which the gods
+p7l8 observed their
+p8l1 creation. All is simple
+p8l2 when seen from this
+p8l3 perspective, leaving
+p8l4 only the mysterious
+p8l5 reference to dinners.
+p8l6 Oddly enough the
+p8l7 rhyme is universally
+p8l8 used only for
+p9l1 midnight feedings,
+p9l2 never during the day.
+}
+book 27
+{
+pages 8
+title Talking to wisps
+author Heigel of Moonglow
+p1l1 This volume was
+p1l2 sponsored by
+p1l3 donations from Lord
+p1l4 Blackthorn, ever a
+p1l5 supporter of
+p1l6 understanding the
+p1l7 other sentient races of
+p1l8 Britannia.
+p2l1 Wisps are the most
+p2l2 intelligent of the
+p2l3 nonhuman races
+p2l4 inhabiting Britannia.
+p2l5 'Tis claimed by the
+p2l6 great sages that
+p2l7 someday we shall be
+p2l8 able to converse with
+p3l1 them openly in our
+p3l2 native tongue --
+p3l3 indeed, we must hope
+p3l4 that wisps learn our
+p3l5 language, for it is not
+p3l6 possible for humans
+p3l7 to pronounce wispish!
+p3l8 The wispish
+p4l1 language seems to only
+p4l2 contain one vowel, the
+p4l3 letter Y. However, the
+p4l4 letters W, C, M and L
+p4l5 seem to be treated
+p4l6 grammatically as
+p4l7 vowels and in addition
+p4l8 every letter is
+p5l1 followed by what
+p5l2 sounds to the human
+p5l3 ear like a glottal stop.
+p5l4 It is possible that the
+p5l5 glottal stop is
+p5l6 considered a vowel as
+p5l7 well.
+p5l8 Wisps do make use
+p6l1 of what sounds to us
+p6l2 like pitch and
+p6l3 emphasis shifts
+p6l4 similar to
+p6l5 exclamations and
+p6l6 questions.
+p6l7 The average word in
+p6l8 wispish seems to
+p7l1 consist of three
+p7l2 phonemes and three
+p7l3 glottal stops, plus
+p7l4 possibly a pitch shift.
+p7l5 It often sounds
+p7l6 burning or crackling.
+p7l7 Some have speculated
+p7l8 that what we are
+p8l1 analyzing is in fact
+p8l2 nothing more than the
+p8l3 very air crackling
+p8l4 near the wisp's glow,
+p8l5 and not language, but
+p8l6 this is of course
+p8l7 unlikely.
+}
+book 28
+{
+pages 18
+title Britannian flora: A casual guide
+author Herbert the Lost
+p1l1 Oft 'pon rambling
+p1l2 through the woods
+p1l3 avoiding bears have I
+p1l4 spotted some plant
+p1l5 whose like I have
+p1l6 never seen before and
+p1l7 concluding that I was
+p1l8 a blithering idiot for
+p2l1 failing to notice it
+p2l2 in the past. Equally
+p2l3 as oft have I
+p2l4 concluded
+p2l5 that I was a worse
+p2l6 idiot for not running
+p2l7 faster from the bear.
+p2l8 While not all my
+p3l1 readers may share
+p3l2 my proclivites for
+p3l3 tree-climbing, it
+p3l4 occurred to me that
+p3l5 mayhap mine
+p3l6 information might
+p3l7 serve some humble
+p3l8 purpose.
+p4l1 The two most
+p4l2 unique flower plants
+p4l3 in the Britannian
+p4l4 countryside are the
+p4l5 orfleur and the
+p4l6 whiteflower, also
+p4l7 called white horns.
+p4l8 The orfleur is
+p5l1 notable for its massive
+p5l2 orange-red blossoms,
+p5l3 which dwarf
+p5l4 marigolds like the sun
+p5l5 dwarfs you (sic)
+p5l6 common fireball spell.
+p5l7 The odor of said
+p5l8 blooms is best
+p6l1 described as
+p6l2 peppermint-apple,
+p6l3 with a dash of garlic.
+p6l4 'Tis a popular potted
+p6l5 plant despite, or
+p6l6 perhaps because of,
+p6l7 its exotic nature.
+p6l8 Whiteflowers
+p7l1 exude a subtle
+p7l2 fragrance not unlike
+p7l3 that of freshly
+p7l4 shaven wood mixed
+p7l5 with cool lemon ice.
+p7l6 Their tall stands
+p7l7 always droop with the
+p7l8 heavy weight of their
+p8l1 massive blooms, oft as
+p8l2 large as a child's head.
+p8l3 The flowers are so
+p8l4 large that one may
+p8l5 scoop out the pollen in
+p8l6 handfuls and during
+p8l7 the spring season
+p8l8 many a prank hath
+p9l1 been played by idle
+p9l2 boys 'pon their sisters
+p9l3 by dumping said
+p9l4 pollen into their
+p9l5 clothing drawers,
+p9l6 causing sneezes for
+p9l7 days.
+p9l8 The most
+p10l1 interesting native tree
+p10l2 to Britannia is the
+p10l3 spider tree. The
+p10l4 reason for its naming
+p10l5 is obscure, but may
+p10l6 have to do with the
+p10l7 twisted gray stalks
+p10l8 from which the
+p11l1 spherical canopy
+p11l2 sprouts. 'Tis
+p11l3 something of a
+p11l4 misnomer to term
+p11l5 these trunks as they
+p11l6 are spindly and
+p11l7 flexible. Spider trees
+p11l8 provide a fresh, piney
+p12l1 smell to a room and are
+p12l2 therefore often potted.
+p12l3 In jungle climes,
+p12l4 one finds the blade
+p12l5 plant, whose sharp
+p12l6 leaves oft collect
+p12l7 water for the thirsty
+p12l8 traveler, yet can draw
+p13l1 blood easily.
+p13l2 The deadliest plant,
+p13l3 if you can call a
+p13l4 fungus a plant, is the
+p13l5 Exploding Red Spotted
+p13l6 Toadstool. No pattern
+p13l7 can be discerned to its
+p13l8 habitats save malice,
+p14l1 for merely
+p14l2 approaching results in
+p14l3 the cap exploding with
+p14l4 powder, noxious gas,
+p14l5 and tiny painful
+p14l6 pellets flying in all
+p14l7 directions.
+p14l8 Unfortunately, 'tis
+p15l1 impossible to tell it
+p15l2 apart from the
+p15l3 Ordinary Red Spotted
+p15l4 Toadstool save through
+p15l5 experimentation.
+p15l6 Truly odd among the
+p15l7 varied flora of
+p15l8 Britannia, however,
+p16l1 are those which bear
+p16l2 names clearly alien to
+p16l3 our tongue. Among
+p16l4 these I name the
+p16l5 Tuscany pine (for I
+p16l6 have never seen a
+p16l7 region of this world
+p16l8 named Tuscany), the
+p17l1 o'hii tree, whose very
+p17l2 name sounds like some
+p17l3 tropical isle and the
+p17l4 welsh poppy, which
+p17l5 while different from
+p17l6 an ordinary poppy in
+p17l7 color and appearance,
+p17l8 is prefaced with the
+p18l1 odd word welsh,
+p18l2 which as far as I
+p18l3 know means to forgo
+p18l4 paying a debt.
+}
+book 29
+{
+pages 8
+title The ranking of trades
+author Lord Higginbotham
+p1l1 Whilst 'tis true that
+p1l2 within each trade, one
+p1l3 finds differing titles
+p1l4 and accolades granted
+p1l5 to the members of a
+p1l6 given guild,
+p1l7 nonetheless for the
+p1l8 betterment of trade
+p2l1 and understanding, we
+p2l2 must have a
+p2l3 commonality of titling.
+p2l4 For those who may
+p2l5 find themselves
+p2l6 ignorant of the finer
+p2l7 distinctions between a
+p2l8 three-knot member
+p3l1 of? the Sailors'
+p3l2 Maritime Association
+p3l3 and a second
+p3l4 thaumaturge, this
+p3l5 book shall serve as a
+p3l6 simple introduction to
+p3l7 the common cant used
+p3l8 when members of
+p4l1 differing guilds and
+p4l2 trade organizations
+p4l3 must trade with each
+p4l4 other and must
+p4l5 establish relative
+p4l6 credentials. Neophyte,
+p4l7 Has shown interest
+p4l8 in learning the craft
+p5l1 and some meager
+p5l2 talent. Novice,
+p5l3 Is practicing basic
+p5l4 skills but has not
+p5l5 been admitted to full
+p5l6 standing.
+p5l7 Apprentice, A student
+p5l8 of the discipline.
+p6l1 Journeyman, Warrented
+p6l2 to practice the
+p6l3 discipline under the
+p6l4 eyes of a tutor.
+p6l5 Expert, A full member
+p6l6 of the guild.
+p6l7 Adept, A member of the
+p6l8 guild qualified to
+p7l1 teach others.
+p7l2 Master, Acknowledged
+p7l3 as qualified to lead a
+p7l4 hall or business.
+p7l5 Grandmaster, Rarely a
+p7l6 permanent title,
+p7l7 granted in
+p7l8 common parlance to
+p8l1 those who have shown
+p8l2 extreme mastery of
+p8l3 their craft recently.
+}
+book 30
+{
+pages 16
+title The wild girl of the forest
+author Horace
+p1l1 Her name was
+p1l2 Leyla, she said and
+p1l3 her hair was braided
+p1l4 wild with creepers
+p1l5 and thorns. I marveled
+p1l6 that they did not hurt
+p1l7 her, but when I asked,
+p1l8 she but shrugged and
+p2l1 let her eyes roam once
+p2l2 more across the
+p2l3 woods. Though I had
+p2l4 my hands securely
+p2l5 fastened by her
+p2l6 ropes, I itched to
+p2l7 reach out and comb
+p2l8 that unruly golden
+p3l1 mane, dirtied and
+p3l2 leaf-ridden.
+p3l3 Her provenance,
+p3l4 she told me over
+p3l5 nights illuminated by
+p3l6 campfires, was once
+p3l7 the city of Trinsic.
+p3l8 She claimed to have
+p4l1 been kidnapped and
+p4l2 raised by orcs, which
+p4l3 I judged an unlikely
+p4l4 tale, for all know orcs
+p4l5 delight in eating the
+p4l6 meat of honest folk.
+p4l7 When I told her this,
+p4l8 she laughed a fey
+p5l1 laugh and gaily
+p5l2 admitted that honest
+p5l3 she was not, for oft
+p5l4 had she stolen folk
+p5l5 away from caravans
+p5l6 to loot their
+p5l7 possessions from an
+p5l8 unconscious body!
+p6l1 At this, I began to
+p6l2 fear for my life and
+p6l3 her smile seemed full
+p6l4 of teeth sharper than
+p6l5 a human ought to have,
+p6l6 for the tale of orcish
+p6l7 raising had struck
+p6l8 fear into the marrow
+p7l1 of my bones. Wil thou
+p7l2 eat me? I asked,
+p7l3 a-tremble, fearing
+p7l4 the answer.
+p7l5 And she cocked her
+p7l6 head at me, like a wild
+p7l7 animal facing a word
+p7l8 that it dost not
+p8l1 understand and the
+p8l2 fixity in her eyes
+p8l3 was a glimpse into the
+p8l4 deeper reaches of the
+p8l5 Abyss. But she
+p8l6 finally grunted and
+p8l7 said Nay, in a voice
+p8l8 that recalled to me a
+p9l1 child. Nay, she said,
+p9l2 for thou dost remind
+p9l3 me of a boy I knew
+p9l4 once, when I was a
+p9l5 girl who played in a
+p9l6 city of great sandstone
+p9l7 walls, before I was
+p9l8 taken. He had sandy
+p10l1 hair like thee and I
+p10l2 dreamt as a child of
+p10l3 holding his hand and
+p10l4 sharing flavored ice.
+p10l5 His name was
+p10l6 Japheth.
+p10l7 The next morning
+p10l8 she let me go, stripped
+p11l1 of my pouch and
+p11l2 clothes and bade me
+p11l3 run through the
+p11l4 woods and to fear
+p11l5 recapture, for surely
+p11l6 her heart would not
+p11l7 soften again. 'Twas a
+p11l8 fearful run and I
+p12l1 came to the road to
+p12l2 Yew with welts and
+p12l3 scratches run
+p12l4 rampant crost my
+p12l5 skin, but I did not see
+p12l6 her again.
+p12l7 Oft have I wondered
+p12l8 of the boy named
+p13l1 Japheth and whether
+p13l2 he remembers a girl
+p13l3 who lived in sandstone
+p13l4 walls. The only
+p13l5 Japheth I know is the
+p13l6 Guildmaster of
+p13l7 Paladins who died last
+p13l8 year warring amidst
+p14l1 the orcs and though
+p14l2 he had indeed sandy
+p14l3 hair, I cannot picture
+p14l4 him side by side with
+p14l5 a feral girl whose
+p14l6 tongue has tasted of
+p14l7 human flesh. Yet the
+p14l8 paths of fate are
+p15l1 strange indeed and I
+p15l2 suppose 'tis possible
+p15l3 that this paladin died
+p15l4 defending his
+p15l5 remembered lady's
+p15l6 honor, unknowingly
+p15l7 struck down by the
+p15l8 orc that she called
+p16l1 father.
+}
+book 31
+{
+pages 10
+title The tale of three tribes
+author Janet
+p1l1 The dungeon known
+p1l2 as Despise is in fact
+p1l3 not a dungeon as such,
+p1l4 but rather a large
+p1l5 natural cave.
+p1l6 Inhospitable and
+p1l7 unfriendly to visitors
+p1l8 it is filled with damp
+p2l1 spots where the
+p2l2 deadly Exploding Red
+p2l3 Spotted Toadstool
+p2l4 grows in abundance.
+p2l5 According to the
+p2l6 oldest of historical
+p2l7 texts, in days gone by
+p2l8 the cave was once the
+p3l1 home of three
+p3l2 separate tribes who
+p3l3 had come to an
+p3l4 accommodation with
+p3l5 each other. Oddly
+p3l6 enough, the three
+p3l7 tribes were of
+p3l8 dragons, lizard men,
+p4l1 and rat men. While
+p4l2 today few except
+p4l3 extremists associated
+p4l4 with Lord Blackthorn
+p4l5 regard these latter two
+p4l6 as being intelligent
+p4l7 beings, apparently
+p4l8 they have indeed
+p5l1 fallen from a more
+p5l2 evolved state over the
+p5l3 years.
+p5l4 'Tis said that these
+p5l5 three races did dwell
+p5l6 in relative harmony
+p5l7 within the vast cave,
+p5l8 building when they
+p6l1 required it and
+p6l2 trading amongst
+p6l3 themselves if needed.
+p6l4 But over time,
+p6l5 something happened,
+p6l6 and they were forced
+p6l7 to withdraw from
+p6l8 their society, until
+p7l1 today thou mayst find
+p7l2 individuals of each
+p7l3 species within the
+p7l4 dungeon, but never
+p7l5 again as a civilization.
+p7l6 'Tis also said that
+p7l7 someday the three
+p7l8 tribes may return to
+p8l1 Despise, to once again
+p8l2 inhabit it together.
+p8l3 Until then, nothing
+p8l4 remains as a token of
+p8l5 this save an oddly
+p8l6 intelligent skeleton
+p8l7 magically enchanted
+p8l8 that doth speak when
+p9l1 questions are asked
+p9l2 and from whom I
+p9l3 obtained these tales
+p9l4 one day, when I was
+p9l5 pursued by evil
+p9l6 monsters and fled into
+p9l7 his skeletal arms.
+p9l8 Fortunately, I
+p10l1 escaped and lived to
+p10l2 write it all down!
+}
+book 32
+{
+pages 24
+title The burning of Trinsic
+author Paladin Japheth
+p1l1 'Twas a sight to see,
+p1l2 the sunlight falling
+p1l3 lightly on the
+p1l4 sandstone walls of
+p1l5 Trinsic 'pon a morning
+p1l6 in spring.
+p1l7 Children ran along
+p1l8 the parapets and
+p2l1 walkways, their
+p2l2 laughter and running
+p2l3 providing music to the
+p2l4 daybreak, despite
+p2l5 their oft-ragged
+p2l6 clothing.
+p2l7 The guards who
+p2l8 maintained a vigilant
+p3l1 outlook from atop the
+p3l2 towers would smile
+p3l3 indulgently as
+p3l4 children slammed into
+p3l5 their armored legs and
+p3l6 brushed past them.
+p3l7 And I was one of
+p3l8 those young ones,
+p4l1 letting my joy rise up
+p4l2 to the skies.
+p4l3 Little did we all
+p4l4 know of the darker
+p4l5 days that would lie
+p4l6 ahead, for we were too
+p4l7 young.
+p4l8 Had we but gained
+p5l1 access to the quiet
+p5l2 coucils held in the
+p5l3 Paladin tower as it
+p5l4 faced the sea, councils
+p5l5 lit by candlelight and
+p5l6 worry, we would have
+p5l7 learned more of the
+p5l8 fears of imminent
+p6l1 attack from the
+p6l2 forest, where foul
+p6l3 creatures born of
+p6l4 dank caves and
+p6l5 darkness were
+p6l6 marauding ever more
+p6l7 often into the lands
+p6l8 around Trinsic's moat.
+p7l1 But we were
+p7l2 children! The parapets
+p7l3 and the moat were
+p7l4 places to play, not
+p7l5 stout defenses and
+p7l6 we gave no thought to
+p7l7 the necessities that
+p7l8 must have required
+p8l1 their construction.
+p8l2 We used to reach
+p8l3 the sheltered
+p8l4 orchards on the lee
+p8l5 side of the parapet
+p8l6 walls, where the
+p8l7 southern river cut
+p8l8 through the city, by
+p9l1 swimming across the
+p9l2 water.
+p9l3 The rich folk who
+p9l4 lived in the great
+p9l5 manses there would
+p9l6 shout from their
+p9l7 windows and shake
+p9l8 their fists, for we
+p10l1 would run through
+p10l2 their gardens and tear
+p10l3 up the delicate
+p10l4 foxgloves and
+p10l5 orfleurs with our
+p10l6 unshod dirty feet.
+p10l7 Then we would dive
+p10l8 into the water and
+p11l1 splash merrily to the
+p11l2 fruit trees.
+p11l3 The southern river
+p11l4 lazily slid under an
+p11l5 ungated arch in the
+p11l6 mighty wall and we
+p11l7 would lay on the
+p11l8 grassy bank and
+p12l1 watch it gurgle by the
+p12l2 lily pads.
+p12l3 That spring that
+p12l4 pleasant spot became
+p12l5 the doorway through
+p12l6 which our city of
+p12l7 Trinsic let in the
+p12l8 monstrous deformed
+p13l1 humanoids that
+p13l2 savaged us.
+p13l3 I lay upon that
+p13l4 grassy bank and
+p13l5 watched them wade
+p13l6 in, their coarse hair
+p13l7 wet and matted, algae
+p13l8 and muck festooning
+p14l1 their wild brows.
+p14l2 They caught sight of a
+p14l3 quicksilver girl with
+p14l4 bright blond hair and
+p14l5 lively eyes. Her name
+p14l6 was Leyla and that
+p14l7 spring I had held fond
+p14l8 dreams of holding her
+p15l1 hand and sharing
+p15l2 flavored ice while
+p15l3 dangling our feet off
+p15l4 the small bridge by
+p15l5 Smugglers Gate.
+p15l6 And I said nothing
+p15l7 when they caught
+p15l8 her and did not cry
+p16l1 out when they dragged
+p16l2 her off through that
+p16l3 breach in our wall,
+p16l4 and did not warn the
+p16l5 city when I saw the
+p16l6 helmeted orc captains
+p16l7 call the charge upon
+p16l8 the mansions.
+p17l1 Blame me not, for I
+p17l2 was but a child and
+p17l3 one who hid in the
+p17l4 branches of the peach
+p17l5 trees, all a-tremble
+p17l6 whilst I watched the
+p17l7 smoke rise from Sean
+p17l8 the tailor's and fire
+p18l1 lash out at the roof of
+p18l2 witchy Eleanor's
+p18l3 tavern.
+p18l4 To this day I have
+p18l5 had no word of Leyla,
+p18l6 and to this day the
+p18l7 smell of burning wood
+p18l8 can conjure terrible
+p19l1 dreams. Yet with the
+p19l2 eyes of adulthood, 'tis
+p19l3 possible to examine
+p19l4 the flaws in the
+p19l5 defense of Trinsic on
+p19l6 that fateful day and
+p19l7 the reasons why our
+p19l8 walls are now
+p20l1 double-thick and
+p20l2 why our buildings are
+p20l3 now built as
+p20l4 fortresses within a
+p20l5 somber fortified city.
+p20l6 While I can look out
+p20l7 from the top of the
+p20l8 new Paladin tower,
+p21l1 and spy the mighty
+p21l2 white sails across the
+p21l3 barrier island and
+p21l4 can descry the small
+p21l5 hollow south of the
+p21l6 city where gypsies
+p21l7 are wont to camp, I can
+p21l8 also envision the city
+p22l1 as it might be burning,
+p22l2 and I bless the bargain
+p22l3 we made: space for
+p22l4 safety, grace for
+p22l5 sturdiness and wood
+p22l6 for stone.
+p22l7 Whilst I live, I shall
+p22l8 not see Trinsic burn,
+p23l1 and no more cries of
+p23l2 little girls will haunt
+p23l3 the sleep of our fair
+p23l4 citizens.
+p23l5 This is mine oath,
+p23l6 as I live and breath.
+p23l7 -Japheth, Paladin
+p23l8 Guildmaster of the
+p24l1 City of Trinsic.
+}
+book 33
+{
+pages 9
+title The Fight
+author M. De La Garza
+p1l1 A cold autumn
+p1l2 morning with misty
+p1l3 fog secures a dozen
+p1l4 brave knights,
+p1l5 supplying hidden
+p1l6 shelter from prying
+p1l7 eyes deep in the
+p1l8 foothills of the
+p2l1 vibrant valley.
+p2l2 Dragons soar like
+p2l3 fierce warriors,
+p2l4 circling around and
+p2l5 around, then roaring
+p2l6 like thunder, rallying
+p2l7 all that listen. The
+p2l8 dragons land swiftly
+p3l1 beside the proud
+p3l2 warriors, bending
+p3l3 necks and extending
+p3l4 wings, lifting black
+p3l5 claws and allowing
+p3l6 valiant fighters to ride
+p3l7 forth and win an
+p3l8 arisen battle. The
+p4l1 increasing winds
+p4l2 silence the sounds of
+p4l3 combat and they
+p4l4 fight, standing their
+p4l5 ground like mothers
+p4l6 protecting their
+p4l7 children, bright
+p4l8 armor flashing as
+p5l1 each one falls.
+p5l2 A cold autumn's
+p5l3 evening with misty
+p5l4 fog cradles a dozen
+p5l5 battered corpses of
+p5l6 knights, creasing
+p5l7 them in currents of
+p5l8 winds that run deep in
+p6l1 the foothills of the
+p6l2 desolate valley.
+p6l3 Dragons glide like
+p6l4 silent angels, circling
+p6l5 around and around,
+p6l6 then calling like
+p6l7 banshees; keening
+p6l8 cries of mourning.
+p7l1 The dragons land
+p7l2 heavily beside the
+p7l3 peaceful bodies,
+p7l4 bending their necks
+p7l5 and extending wings,
+p7l6 lifting black claws
+p7l7 and pinching the
+p7l8 sacred ground and
+p8l1 new eternal home.
+p8l2 The dying winds
+p8l3 whistle among the
+p8l4 dead in somber
+p8l5 procession and they
+p8l6 lie, grasping weapons
+p8l7 to protect themselves
+p8l8 like knights still in
+p9l1 battle, shattered
+p9l2 armor shining like
+p9l3 newly born stars.
+}
+book 34
+{
+pages 16
+title A primer on arms
+author Martin
+p1l1 ABOUT THE AUTHOR:
+p1l2 Martin was, for most
+p1l3 of his life, the
+p1l4 Weaponsmaster of
+p1l5 Serpent's Hold, until
+p1l6 his death at 92, of an
+p1l7 overgrown bunion.
+p1l8 These are the basic
+p2l1 element to consider in
+p2l2 assessing a weapon of
+p2l3 which all warrior
+p2l4 who regard
+p2l5 themselves as more
+p2l6 than mere
+p2l7 mercenaries should be
+p2l8 aware. First and most
+p3l1 obvious is the amount
+p3l2 of damage that the
+p3l3 weapon may do against
+p3l4 unprotected flesh.
+p3l5 While 'tis this that
+p3l6 first attracts the
+p3l7 attention of the novice
+p3l8 'tis a deadly mistake
+p4l1 to regard it as the
+p4l2 sole value of a weapon.
+p4l3 While it may prove
+p4l4 devastating indeed as a
+p4l5 means of causing
+p4l6 damage, a weapon
+p4l7 must also serve as
+p4l8 stout shield when
+p5l1 engaged in combat.
+p5l2 Hence the second
+p5l3 issue to which to pay
+p5l4 attention is the amount
+p5l5 of protection that a
+p5l6 weapon may offer.
+p5l7 Pay close attention to
+p5l8 the guard on it, if it
+p6l1 be a blade, or the
+p6l2 stoutness of it's wood
+p6l3 if it is a polearm.
+p6l4 Oft related to this is
+p6l5 the wait of a weapon,
+p6l6 for a heavy weapon is
+p6l7 more difficult to
+p6l8 maneuver to block
+p7l1 with, though it may do
+p7l2 more damage to they
+p7l3 opponent. If a weapon
+p7l4 is too heavy for the
+p7l5 wielder to move it
+p7l6 freely, they should
+p7l7 choose another and not
+p7l8 attempt to prove their
+p8l1 prowess by the size
+p8l2 of their sword.
+p8l3 The reach of the
+p8l4 weapon both increase
+p8l5 its defensive ability,
+p8l6 and renders it more
+p8l7 useful in open spaces
+p8l8 as it allows attack
+p9l1 against the opponent
+p9l2 without the need to
+p9l3 close. But be aware of
+p9l4 the limitations of thy
+p9l5 weapon! For a weapon
+p9l6 with great reach may
+p9l7 be useless in close
+p9l8 quarter, for lack of
+p10l1 space to maneuver it.
+p10l2 Should that
+p10l3 dagger-wielding
+p10l4 enemy close on thee
+p10l5 and they halberd, 'tis
+p10l6 best to flee.
+p10l7 Lastly, a factor that
+p10l8 must always be
+p11l1 considered is the
+p11l2 condition of the
+p11l3 weapon. It might be a
+p11l4 wondrous magical
+p11l5 blade of surpassing
+p11l6 sharpness and it may
+p11l7 leap to block blows
+p11l8 with a mind of its
+p12l1 own. It also might be
+p12l2 of such flimsy
+p12l3 construction, or
+p12l4 damaged to such an
+p12l5 extent, that the first
+p12l6 time it clangs against
+p12l7 steel, 'twill shatter
+p12l8 into useless shards.
+p13l1 Seek ye a good
+p13l2 blacksmith should
+p13l3 they weapon become
+p13l4 damaged, but be aware
+p13l5 that their
+p13l6 ministrations may
+p13l7 simply make the
+p13l8 matter worse.
+p14l1 While mages of
+p14l2 some ability oft create
+p14l3 magical weapons
+p14l4 which enhance skill,
+p14l5 are preternaturally
+p14l6 sharp, or incinerate
+p14l7 the enemy as they
+p14l8 fall, to mind the
+p15l1 greatest gift that they
+p15l2 can grant a stout
+p15l3 sword is to make it
+p15l4 resistant to damage,
+p15l5 for they own skill can
+p15l6 make up the
+p15l7 difference. Except
+p15l8 for the fireball, but
+p16l1 if the corpse is
+p16l2 charred, then so will
+p16l3 be the possessions,
+p16l4 which maketh looting
+p16l5 difficult!
+}
+book 35
+{
+pages 12
+title Deceit: A dungeon of horrors
+author Mercenary Justin
+p1l1 My employers have
+p1l2 oft taken me into this
+p1l3 den of hideous
+p1l4 creatures and I
+p1l5 thought that it
+p1l6 behooved me to write
+p1l7 down what I know of
+p1l8 it, now that I am
+p2l1 retired from the life
+p2l2 of an adventurer for
+p2l3 hire.
+p2l4 Deceit was once a
+p2l5 temple to forgotten
+p2l6 powers of old. It was
+p2l7 taken over by mages
+p2l8 who eventually were
+p3l1 driven out by the
+p3l2 depredations of their
+p3l3 own evil lackeys.
+p3l4 However, many of the
+p3l5 magical traps and
+p3l6 devices that they
+p3l7 placed for their
+p3l8 defenses remain,
+p4l1 particularly those the
+p4l2 wizards used to
+p4l3 protect their
+p4l4 treasures.
+p4l5 The dungeon is
+p4l6 mystically linked by
+p4l7 crystal balls placed in
+p4l8 different locations.
+p5l1 These magical orbs do
+p5l2 transmit speech and
+p5l3 even have memory of
+p5l4 things that have been
+p5l5 said near them. No
+p5l6 doubt they once served
+p5l7 as a warning system.
+p5l8 Be wary of a
+p6l1 brazier that giveth
+p6l2 warning when
+p6l3 approached: thou canst
+p6l4 use it to summon
+p6l5 deadly creatures.
+p6l6 There be a
+p6l7 tantalizing chest,
+p6l8 undoubtedly full of
+p7l1 treasure, that cannot
+p7l2 be reached save past a
+p7l3 complex series of
+p7l4 pressure plates that
+p7l5 trigger deadly spikes.
+p7l6 As I never had
+p7l7 sufficient folk with
+p7l8 me to unlock the
+p8l1 puzzle, I never
+p8l2 obtained the riches
+p8l3 that awaited there.
+p8l4 Do not investigate
+p8l5 the iron maidens too
+p8l6 closely, for they make
+p8l7 suck you within them!
+p8l8 There is one place
+p9l1 where a deadly trap
+p9l2 can only be disarmed
+p9l3 by making use of a
+p9l4 statue that cleverly
+p9l5 conceals a lever.
+p9l6 Oft one encounters
+p9l7 the deadly exploding
+p9l8 toadstool; the ones in
+p10l1 Deceit are deadlier
+p10l2 than most, as they
+p10l3 explode continually.
+p10l4 Likewise, the very
+p10l5 pools of water and
+p10l6 slime on the floor may
+p10l7 poisen thee.
+p10l8 The most magical
+p11l1 device in the dungeon
+p11l2 is a mystical bridge
+p11l3 that can only be
+p11l4 triggered by a lever
+p11l5 embedded in the floor.
+p11l6 Be wary, however,
+p11l7 for the bridge thus
+p11l8 created doth burst
+p12l1 into flame when one
+p12l2 passeth across it!
+}
+book 36
+{
+pages 14
+title The bold stranger
+author Old Fabio the Poor
+p1l1 In a time before
+p1l2 time, the Gods that Be
+p1l3 assembled a group of
+p1l4 artisans, craftsmen
+p1l5 and lore masters (for,
+p1l6 yes, even in those
+p1l7 days, art existed) to
+p1l8 create the world of
+p2l1 Sosaria. To this group,
+p2l2 the gods gave a tiny
+p2l3 world, Rytabul, in
+p2l4 which to test their
+p2l5 works, to see if they
+p2l6 were of the quality
+p2l7 desired for the true
+p2l8 world in which they
+p3l1 would be placed. And
+p3l2 though the gods were
+p3l3 tight fisted with their
+p3l4 gold, this small crew
+p3l5 worked hard and long,
+p3l6 and were happy in
+p3l7 their tasks.
+p3l8 A small corner of
+p4l1 Rytabul had been
+p4l2 claimed by the artisan
+p4l3 Selrahc the Slow.
+p4l4 Though he was not the
+p4l5 fastest of the
+p4l6 assembled workers,
+p4l7 the gods smiled upon
+p4l8 his work, even
+p5l1 presenting him with a
+p5l2 mystic talisman
+p5l3 proclaiming his work
+p5l4 the best among the
+p5l5 newer artisans. And
+p5l6 so Selrahc went about
+p5l7 his business, creating
+p5l8 hundreds of designs
+p6l1 which would one day
+p6l2 add color and variety
+p6l3 to Sosaria.
+p6l4 One day a stranger
+p6l5 appeared to Selrahc.
+p6l6 His chest was bare
+p6l7 and he wore the
+p6l8 trousers of the
+p7l1 brightest green and
+p7l2 wherever he went,
+p7l3 plants grew in his
+p7l4 footsteps. This caused
+p7l5 Selrahc no end of
+p7l6 trouble, the stranger
+p7l7 always looking over
+p7l8 his shoulder and the
+p8l1 plants sprouting in
+p8l2 places Selrahc
+p8l3 required to ply his
+p8l4 art. And so Selrahc
+p8l5 approached the
+p8l6 stranger and bade him
+p8l7 speak. But this man in
+p8l8 green remained silent.
+p9l1 Selrahc pleaded with
+p9l2 the stranger to give
+p9l3 his name and would
+p9l4 he please leave
+p9l5 Selrahc to his work.
+p9l6 But this mysterious
+p9l7 stranger remained
+p9l8 mute.
+p10l1 This angered
+p10l2 Selrahc mightily. Who
+p10l3 was this silent man,
+p10l4 interfering with
+p10l5 tasks the gods
+p10l6 themselves had
+p10l7 entrusted to Selrahc?
+p10l8 In an attempt to
+p11l1 embarass this
+p11l2 interloper, Selrahc
+p11l3 stole his green
+p11l4 trousers, leaving him
+p11l5 naked and open to
+p11l6 comments about his
+p11l7 very manhood and
+p11l8 still the stranger
+p12l1 would not speak,
+p12l2 would not leave this
+p12l3 tiny corner of
+p12l4 Rytabul.
+p12l5 Vexed to his very
+p12l6 limits, Selrahc took
+p12l7 his war axe and smote
+p12l8 the silent one
+p13l1 mightily, again and
+p13l2 again, until the silent
+p13l3 stranger ran away,
+p13l4 having never said a
+p13l5 word and never
+p13l6 showed himself in
+p13l7 Rytabul again.
+p13l8 Thus endeth the
+p14l1 tale of the bold
+p14l2 stranger.
+}
+book 37
+{
+pages 18
+title The major trade associations
+author Pieter of Vesper
+p1l1 There are ten major
+p1l2 trade associations that
+p1l3 operate legitimately in
+p1l4 the lands of Britannia
+p1l5 and among its trading
+p1l6 partners. Many of
+p1l7 these guilds are
+p1l8 divided into local or
+p2l1 specialty subguilds,
+p2l2 who use the same
+p2l3 colors but vary the
+p2l4 heraldic pattern.
+p2l5 There are many
+p2l6 lesser trade
+p2l7 associations that have
+p2l8 closed membership,
+p3l1 and one can join only
+p3l2 by invitation.
+p3l3 Beltran's Guide to the
+p3l4 Guilds is the
+p3l5 definitive text on the
+p3l6 fulll range of guilds
+p3l7 and other associations
+p3l8 in Britannia and I
+p4l1 heartily recommend it.
+p4l2 In what follows I
+p4l3 have attempted to
+p4l4 bring together the
+p4l5 known information
+p4l6 regarding these
+p4l7 guilds. I offer thee
+p4l8 the name, typical
+p5l1 membership, heraldic
+p5l2 colors, known
+p5l3 specialty
+p5l4 organizaitons within
+p5l5 the larger guild and
+p5l6 any known
+p5l7 affiliations to other
+p5l8 guilds, which often
+p6l1 occur because of trade
+p6l2 reasons.
+p6l3 League of Rangers,
+p6l4 Members: rangers,
+p6l5 bowyers, animal
+p6l6 trainers, Colors:
+p6l7 Red, gold and blue,
+p6l8 The Guild of Arcane
+p7l1 Arts, Members:
+p7l2 alchemists and wizards,
+p7l3 Colors: blue and purple
+p7l4 Subguilds: Illusionists,
+p7l5 Mages, Wizards
+p7l6 Affiliations: Healer's
+p7l7 Guild
+p7l8 The Warrior's Guild,
+p8l1 Members: mercenaries,
+p8l2 soldiery, guardsmen,
+p8l3 weapons masters,
+p8l4 paladins, Colors:
+p8l5 Blue and red
+p8l6 Subguilds: Cavalry,
+p8l7 Fighters, Warriors,
+p8l8 Affiliations: League
+p9l1 of Rangers,
+p9l2 Merchant's
+p9l3 Association, Members:
+p9l4 innkeepers,
+p9l5 taverners, jewelers,
+p9l6 provisioners, Colors:
+p9l7 gold coins on a green
+p9l8 field for Merchants,
+p10l1 White and green for
+p10l2 others
+p10l3 Subguilds: Barters,
+p10l4 Provisioners,
+p10l5 Traders, Merchants,
+p10l6 Guild of Healers
+p10l7 Members: Healers,
+p10l8 Colors: Green, gold
+p11l1 and purple
+p11l2 Affiliations: Guild of
+p11l3 Arcane Arts,
+p11l4 Mining Cooperative
+p11l5 Members: miners
+p11l6 Colors: blue and black
+p11l7 checkers, with a gold
+p11l8 cross
+p12l1 Affiliations: Order of
+p12l2 Engineers,
+p12l3 Order of Engineers:
+p12l4 Members: tinkers and
+p12l5 engineers, Colors:
+p12l6 Blue, gold and
+p12l7 purple vertical bars
+p12l8 Affiliations: Mining
+p13l1 Cooperative,
+p13l2 Society of Clothiers
+p13l3 Members: tailors and
+p13l4 weavers, Colors:
+p13l5 purple, gold and red
+p13l6 horizontal bars,
+p13l7 Maritime Guild
+p13l8 Members: fishermen,
+p14l1 sailors, mapmakers,
+p14l2 shipwrights, Colors:
+p14l3 blue and white
+p14l4 Subguilds: Fishermen,
+p14l5 Sailors, Shipwrights,
+p14l6 Bardic Collegium:
+p14l7 Members: bards,
+p14l8 musicians,
+p15l1 storytellers
+p15l2 Colors: Purple, red
+p15l3 and gold checkerboard
+p15l4 In addition to these
+p15l5 aboveboard guilds,
+p15l6 there is one other
+p15l7 covert organization
+p15l8 well known to exist,
+p16l1 whose membership is
+p16l2 likewise open to those
+p16l3 who seek to apply. In
+p16l4 some places where
+p16l5 illegal activities are
+p16l6 condoned more openly,
+p16l7 they dare post their
+p16l8 sigils publicly.
+p17l1 No law-abiding
+p17l2 citizen would ever
+p17l3 join a guild such as
+p17l4 this, of course! Yet
+p17l5 their existence must
+p17l6 be acknowledged of
+p17l7 the sake of
+p17l8 completeness.
+p18l1 Society of Thieves
+p18l2 Members: beggers,
+p18l3 cutpurses, assassins
+p18l4 and brigands
+p18l5 Colors: Red and black
+p18l6 Subguilds: Rogues
+p18l7 (beggars), Assassins,
+p18l8 Thieves
+}
+book 38
+{
+pages 24
+title Ethical hedonism: an introduction
+author Richard Garriott
+p1l1 Societies oft have
+p1l2 common codes of
+p1l3 conduct which it
+p1l4 expects all its people
+p1l5 to abide by. Now, while
+p1l6 'tis true that this can
+p1l7 offer some
+p1l8 advantages, most of
+p2l1 the codes I see today
+p2l2 around Britannia have
+p2l3 fatal flaws. Let us
+p2l4 examine them.
+p2l5 First, there is
+p2l6 Blackthorn's code of
+p2l7 Chaos or basically
+p2l8 Anarchy. Whereas
+p3l1 this affords the
+p3l2 individual maximum
+p3l3 opportunity for
+p3l4 individuality and even
+p3l5 pursuit of personal
+p3l6 happiness, it does not
+p3l7 offer even basic
+p3l8 interpersonal conduct
+p4l1 codes to prevent people
+p4l2 from killing each
+p4l3 other.
+p4l4 Without such basic
+p4l5 tenets, all the people
+p4l6 will need to spend a
+p4l7 significant portion of
+p4l8 their time and effort
+p5l1 towards personal
+p5l2 protection and thus
+p5l3 less time towards
+p5l4 other more beneficial
+p5l5 pursuits.
+p5l6 Then there are the
+p5l7 moral codes that are so
+p5l8 popular today. These
+p6l1 codes are built largely
+p6l2 on historical tradition
+p6l3 rather than current
+p6l4 logic and thus are also
+p6l5 antiquated. For
+p6l6 example many moral
+p6l7 codes we see today
+p6l8 include statements
+p7l1 about not eating certain
+p7l2 foods that once were
+p7l3 often poisonous, but
+p7l4 today can be prepared
+p7l5 safely.
+p7l6 Many forbid
+p7l7 contact between young
+p7l8 people of the opposite
+p8l1 gender, which can in
+p8l2 fact be hazardous; but
+p8l3 the codes often have
+p8l4 lost the context as to
+p8l5 why this is done,
+p8l6 instead merely calling
+p8l7 it amoral. In this day
+p8l8 and age to call that a
+p9l1 necessary moral
+p9l2 would need a new
+p9l3 reasoning. I put forth
+p9l4 that tradition is not
+p9l5 enough.
+p9l6 Then there are Lord
+p9l7 British's Virtues. It
+p9l8 strikes me that while
+p10l1 a system of virtues is
+p10l2 wonderful as a
+p10l3 touchstone to guide a
+p10l4 society to good
+p10l5 behavior, these are
+p10l6 but shades of the
+p10l7 underlying truth as to
+p10l8 why one may wish to
+p11l1 live a life according to
+p11l2 certain rules of
+p11l3 conduct.
+p11l4 On the other hand,
+p11l5 clearly the Virtues
+p11l6 that I have heard Lord
+p11l7 British speak of are
+p11l8 clearly positive codes
+p12l1 of conduct, far better
+p12l2 than the world of
+p12l3 anarchy that Lord
+p12l4 Blackthorn suggests.
+p12l5 Yet, are not these
+p12l6 Virtues still derived
+p12l7 from a set of
+p12l8 principles which
+p13l1 though they sound
+p13l2 good, are difficult to
+p13l3 pin down as actual,
+p13l4 undeniable, rational
+p13l5 truths?,
+p13l6 Worse yet though
+p13l7 imagine a society
+p13l8 who's code of conduct
+p14l1 was based on pure
+p14l2 survival of the
+p14l3 strongest. While this
+p14l4 society may function
+p14l5 and even accomplish
+p14l6 much, it can be fairly
+p14l7 argued that personal
+p14l8 happiness would
+p15l1 suffer greatly except
+p15l2 for those at the top. To
+p15l3 rule that out,
+p15l4 however, we must
+p15l5 first believe that
+p15l6 people have a right to
+p15l7 pursue happiness.
+p15l8 I hope is a safe
+p16l1 assumption that all
+p16l2 beings wish to be
+p16l3 happy; I will broadly
+p16l4 describe this as
+p16l5 Hedonism. Yet, if all
+p16l6 people did is live a life
+p16l7 of hedonism, their
+p16l8 hedonism might be in
+p17l1 conflict with those
+p17l2 near them, so I will
+p17l3 use the term Ethics to
+p17l4 describe limits one
+p17l5 might put on one's
+p17l6 hedonistic tendencies
+p17l7 to allow others to
+p17l8 pursue their
+p18l1 happiness as well.
+p18l2 Allow me to give
+p18l3 this example: If one
+p18l4 were to live alone on a
+p18l5 desert isle, one could
+p18l6 live a life of pure
+p18l7 hedonism, for no
+p18l8 action one might take
+p19l1 could interfere with
+p19l2 another's right to
+p19l3 pursue their
+p19l4 happiness. Poison the
+p19l5 lake if you like, there
+p19l6 is no one to blame but
+p19l7 yourself!
+p19l8 Now suppose two of
+p20l1 you live on that island.
+p20l2 Thou dost not want
+p20l3 thy neighbor to feel
+p20l4 free to poison the lake.
+p20l5 Would it not be better
+p20l6 to consider it unethical
+p20l7 to poison the lake
+p20l8 without first thinking
+p21l1 of those whose
+p21l2 pursuit of happiness
+p21l3 might be affected by
+p21l4 this action?,
+p21l5 I put forth that it is
+p21l6 the fact that we as a
+p21l7 people choose to live in
+p21l8 groups known as a
+p22l1 society that causes us
+p22l2 to compromise our
+p22l3 pure hedonism with
+p2l4 logical ethics.
+p22l5 Likewise we accept not
+p22l6 being able to kill
+p22l7 others without reason,
+p22l8 because our own
+p23l1 pursuit of happiness
+p23l2 would be greatly
+p23l3 interfered with if we
+p23l4 feared others would
+p23l5 do the same to us.
+p23l6 From this basis of
+p23l7 logic can be formed
+p23l8 the Tenets of Ethical
+p24l1 Hedonism.
+p24l2 For more on this
+p24l3 subject, see the
+p24l4 Tenants of Ethical
+p24l5 Hedonism, by Richard
+p24l6 Garriott and Herman
+p24l7 Miller.
+}
+book 39
+{
+pages 4
+title A song of Samlethe
+author Sandra
+p1l1 The first bear did
+p1l2 swim by day, and it
+p1l3 did sleep by night,
+p1l4 It kept itself within
+p1l5 its cave and ate by
+p1l6 starry light.
+p1l7 The second bear it did
+p1l8 cavort, 'Neath canopies
+p2l1 of trees, and danced
+p2l2 its odd bearish sort
+p2l3 Of joy for all to see.
+p2l4 The first bear, well,
+p2l5 'twas hunted, and today
+p2l6 adorns a floor.
+p2l7 Its ruggish face has
+p2l8 been dented, By
+p3l1 footfalls and the door.
+p3l2 The second bear did
+p3l3 step once, Into a
+p3l4 mushroom ring and now
+p3l5 does dance the dunce,
+p3l6 For wisps and unseen
+p3l7 things.
+p4l1 So do not dance and do
+p4l2 not sleep. Or else be
+p4l3 led astray, For bears
+p4l4 all end up six feet
+p4l5 deep, At the end of
+p4l6 Samlethe's day.
+}
+book 40
+{
+pages 17
+title The life of the traveling ministrel
+author Sarah of Yew
+p1l1 While 'tis true that
+p1l2 the musician who
+p1l3 seeketh only to make
+p1l4 sweet music for
+p1l5 herself and for
+p1l6 others needs little
+p1l7 more than some talent,
+p1l8 and stern practice at
+p2l1 the chosen instrument
+p2l2 those of us who seek
+p2l3 the open road shall
+p2l4 find indeed that a
+p2l5 greater skill is
+p2l6 required. Herein
+p2l7 discover those secrets
+p2l8 which I have learned
+p3l1 over the years as an
+p3l2 itinerant performer.
+p3l3 Once I was in
+p3l4 Jhelom and accidently
+p3l5 angered the bravo of
+p3l6 some local repute,
+p3l7 whose blade flickered
+p3l8 all too eagerly near
+p4l1 my slender neck (for I
+p4l2 was young then).
+p4l3 After various threats
+p4l4 to ruin my pretty
+p4l5 face this bravo
+p4l6 grabbed my arm in a
+p4l7 most unseemly
+p4l8 fashion and tossed me
+p5l1 into a barbaric
+p5l2 enclosure locally
+p5l3 entitled a dueling pit.
+p5l4 My plaintive cries for
+p5l5 help went unheeded
+p5l6 by the guards, for the
+p5l7 inhabitants of Jhelom
+p5l8 are eager indeed to
+p6l1 measure fighting
+p6l2 prowess at any time!
+p6l3 What saved me was
+p6l4 the ability to
+p6l5 improvise a melody
+p6l6 and tune that satirized
+p6l7 the proceedings and
+p6l8 sufficiently angered
+p7l1 an onlooker to prod
+p7l2 him to coming to my
+p7l3 defense. Once that
+p7l4 fight was underway I
+p7l5 was able to make good
+p7l6 my escape. Hence, I
+p7l7 regard the ability to
+p7l8 incite fights as
+p8l1 indispensable to the
+p8l2 prudent bard.
+p8l3 Upon another
+p8l4 occasion, 'twas the
+p8l5 obverse side of that
+p8l6 coin which saved me
+p8l7 for I was being held
+p8l8 prisoner by a
+p9l1 particularly nasty
+p9l2 band of ruffians who
+p9l3 had seized me
+p9l4 unawares from the
+p9l5 road to Vesper.
+p9l6 They had worked
+p9l7 themselves into a
+p9l8 frenzy and were
+p10l1 ready to attack and I
+p10l2 fear, tear me limb
+p10l3 from limb, when I
+p10l4 began to sing
+p10l5 frantically, tapping
+p10l6 my fallen drum wit
+p10l7 my tied up feet. The
+p10l8 melody developed into
+p11l1 a soothing one and the
+p11l2 brigands slowly
+p11l3 calmed down to the
+p11l4 extent of apologizing,
+p11l5 and they let me go!
+p11l6 A final example I
+p11l7 would pray you grant
+p11l8 your attention: once I
+p12l1 was lost upon a large
+p12l2 isle far to the east of
+p12l3 the mainland, well
+p12l4 beyond Serpent's Hold,
+p12l5 where lava made its
+p12l6 sluggish way across
+p12l7 the surface landscape.
+p12l8 And this accursed
+p13l1 land was filled with
+p13l2 vile beats and cunning
+p13l3 dragons.
+p13l4 I was being pursued
+p13l5 by one of said fell
+p13l6 dragons when I found
+p13l7 myself trapped. I
+p13l8 quickly skirted a
+p14l1 bubbling pool of molten
+p14l2 rock and attempted to
+p14l3 hide. The dragon
+p14l4 scented me and was
+p14l5 preparing to skirt the
+p14l6 pool, when I began to
+p14l7 play a lusty tune upon
+p14l8 my lute that attracted
+p15l1 its attention.
+p15l2 Mesmerized and
+p15l3 enticed by the melody,
+p15l4 it stepped directly
+p15l5 towards me and into
+p15l6 the lava-where its
+p15l7 foot was so burned
+p15l8 that it quickly hopped
+p16l1 away, undignified and
+p16l2 annoyed.
+p16l3 'Tis my fond hope
+p16l4 that other travelling
+p16l5 minstrels shall learn
+p16l6 from my experience
+p16l7 and apply themselves
+p16l8 to practicing these
+p17l1 skills in order to
+p17l2 preserve life and
+p17l3 limb.
+p17l4 -Sarah of Yew,
+p17l5 Songmistress.
+}
+book 41
+{
+pages 30
+title My book
+author Sherry the mouse
+p1l1 'Twas on a chill
+p1l2 night, when the moon
+p1l3 shone pasty-faced
+p1l4 above the horizon,
+p1l5 balanced on the towers
+p1l6 of Lord British's
+p1l7 castle, that the events
+p1l8 I am about to relate
+p2l1 tookplace, some years
+p2l2 ago now. I witnessed
+p2l3 them all from my tiny
+p2l4 mousehole.
+p2l5 Milords British and
+p2l6 Blackthron are
+p2l7 accustomed to a game
+p2l8 of chess 'pon an
+p3l1 evening, over which
+p3l2 they argue the issues
+p3l3 that affect the course
+p3l4 of the realm. Lord
+p3l5 Blackthorn was on his
+p3l6 way to Lord British's
+p3l7 chambers and Lord
+p3l8 British stood by a
+p4l1 window casement,
+p4l2 just having finished
+p4l3 setting the pieces upon
+p4l4 the board.
+p4l5 Suddenly the
+p4l6 shutters blew open,
+p4l7 and Lord British fell
+p4l8 to the ground, one
+p5l1 hand shileding his
+p5l2 eyes. A chill wind
+p5l3 entered the room and
+p5l4 it seemd a gash was
+p5l5 torn in the very air.
+p5l6 Through the gas I
+p5l7 could see stars and
+p5l8 swirling clouds of
+p6l1 stellar dust and a
+p6l2 coldness sucked all
+p6l3 the warmth from the
+p6l4 air. A terrible wind
+p6l5 tossed books and
+p6l6 blankets across the
+p6l7 room and furniture
+p6l8 toppled.
+p7l1 From within this
+p7l2 gash issued a great
+p7l3 voice, unlike any I
+p7l4 have ever heard. And
+p7l5 these are the words it
+p7l6 spoke (for I
+p7l7 memorized them most
+p7l8 carefully):,
+p8l1 Greetings, Lord
+p8l2 British. I am the Time
+p8l3 Lord, a being from
+p8l4 beyond your
+p8l5 dimension, as thou art
+p8l6 from a world other
+p8l7 than Sosaria. I am
+p8l8 here to bring thee
+p9l1 warning. Dost thou
+p9l2 recall how long ago
+p9l3 mysterious Stranger
+p9l4 came to Sosaria and
+p9l5 saved the world from
+p9l6 the evil wizard
+p9l7 Mondain? He shattered
+p9l8 the Gem of Immortality,
+p10l1 within which dwelled a
+p10l2 perfect likeness of
+p10l3 this world.
+p10l4 Lord British slowly
+p10l5 stood and faced the
+p10l6 hole in the air. I
+p10l7 remember, he said.
+p10l8 Oft have I wished
+p11l1 that stranger would
+p11l2 return.
+p11l3 He hath returned,
+p11l4 spoke the voice. But
+p11l5 not to here. When the
+p11l6 Gem was shattered, a
+p11l7 thousand shards were
+p11l8 scattered across the
+p12l1 dimensions and in
+p12l2 each shard there is a
+p12l3 perfect likeness of
+p12l4 this world. And thou
+p12l5 dost live upon one
+p12l6 such shard, for thou
+p12l7 art not of the true
+p12l8 world-thou art
+p13l1 merely a reflection.
+p13l2 Lord British looked
+p13l3 shaken by this and I
+p13l4 did not know what to
+p13l5 think! Was I merely a
+p13l6 shadow of the real
+p13l7 me, which lives still
+p13l8 somewhere else
+p14l1 across uncounted
+p14l2 universes?,
+p14l3 My task is to heal
+p14l4 this shattered world,
+p14l5 Lord British, said the
+p14l6 voice. And I seek to
+p14l7 enlist thee in my
+p14l8 cause. Be warned that
+p15l1 in this case, healing
+p15l2 carries with it a
+p15l3 terrible price.
+p15l4 Concern warred
+p15l5 with curiosity on my
+p15l6 liege's face, but ever
+p15l7 one to shoulder a
+p15l8 burden, he
+p16l1 straightened and faced
+p16l2 the gash in the air
+p16l3 bravely. Name thy
+p16l4 price.
+p16l5 A shard of a
+p16l6 universe is a
+p16l7 powerful thing and
+p16l8 universe shattered is
+p17l1 always in danger
+p17l2 from the powers of
+p17l3 darkness. Already
+p17l4 three shards were
+p17l5 turned to evil and sent
+p17l6 to plague the original
+p17l7 universe in the form
+p17l8 of Shadowlords.
+p18l1 Many times have I
+p18l2 brought the Stranger
+p18l3 back to Britannia, to
+p18l4 preserve it from its
+p18l5 own folly or from
+p18l6 outside dangers. Yet
+p18l7 as long as the world
+p18l8 remaineth in pieces, it
+p19l1 remaineth vulnerable.
+p19l2 We must bring the
+p19l3 shards into harmony,
+p19l4 so that they resonate
+p19l5 in such a manner that
+p19l6 matches the original
+p19l7 universe. Then the
+p19l8 two universes shall
+p20l1 merge and be again as
+p20l2 one.
+p20l3 But if we are only
+p20l4 shadows... Lord
+p20l5 British said
+p20l6 wonderingly.
+p20l7 The light from the
+p20l8 stars within the hole
+p21l1 seemed to dim.
+p21l2 Indeed, the
+p21l3 reflections shall
+p21l4 become one with the
+p21l5 orginal. Thou wouldst
+p21l6 cease to be as thou art
+p21l7 and become part of the
+p21l8 larger you. Thou shalt
+p22l1 not die; however,
+p22l2 uncounted generations
+p22l3 have passed and borne
+p22l4 children since that
+p22l5 day and they have no
+p22l6 counterparts. They
+p22l7 would perish utterly.
+p22l8 Lord British sagged in
+p23l1 shock, realizing the
+p23l2 terrible price that
+p23l3 would be paid to heal
+p23l4 the universe. All of
+p23l5 my people, he
+p23l6 breathed.
+p23l7 Tis for the
+p23l8 greateer good.
+p24l1 Lord British bowed
+p24l2 his head.
+p24l3 'Twas then I saw
+p24l4 the movement by the
+p24l5 door, half-hid by the
+p24l6 heavy red curtains.
+p24l7 Lord Blackthron stood
+p24l8 there, concealed from
+p25l1 the rest of the room,
+p25l2 his face white. How
+p25l3 long had he been
+p25l4 listening? I cannot
+p25l5 say, yet I suspect that
+p25l6 he had heard all that
+p25l7 the mysterious voice
+p25l8 had to say.
+p26l1 How then, shall I
+p26l2 aid thee? Lord
+p26l3 British said,
+p26l4 weariness in his
+p26l5 voice.
+p26l6 Aid the nobility
+p26l7 that resideth in
+p26l8 human heart. Protect
+p27l1 the Virtues that so
+p27l2 recently came to thee
+p27l3 in thought late at
+p27l4 night. They are the
+p27l5 Virtues of life, as
+p27l6 your counterpart
+p27l7 understands them to
+p27l8 be. For when thy
+p28l1 populace doth live and
+p28l2 breathe these Virtues
+p28l3 shall it match the true
+p28l4 Britannia and thy
+p28l5 shard shall rejoin
+p28l6 with it.
+p28l7 The gash in the air
+p28l8 began to close and
+p29l1 with it warmth stole
+p29l2 back into the room.
+p29l3 I was going to
+p29l4 discuss my idea with
+p29l5 Blackthorn tonight,
+p29l6 Lord British breathed.
+p29l7 Have I no thoughts
+p29l8 that are my own? Is
+p30l1 my life but a
+p30l2 reflection of another
+p30l3 me.........
+}
+book 42
+{
+pages 4
+title Regarding llamas
+author Simon Sanmartine
+p1l1 Llamas are curious
+p1l2 beasts, shaggy and
+p1l3 sought after for their
+p1l4 wool, yet of a
+p1l5 curiously arrogant
+p1l6 disposition reflected
+p1l7 in their eyes. They
+p1l8 live in mountainous
+p2l1 areas, though who
+p2l2 may have first tamed
+p2l3 them is lost in the
+p2l4 mists of history.
+p2l5 'Tis a well-known
+p2l6 fact that llamas can
+p2l7 indeed be tamed and
+p2l8 used as grazing
+p3l1 animals, for their
+p3l2 meat and of course
+p3l3 for their wool. Yet 'tis
+p3l4 lesser known that
+p3l5 their ornery
+p3l6 disposition and
+p3l7 tendency to spit at
+p3l8 those they dislike
+p4l1 makes them appealing
+p4l2 guard creatures as
+p4l3 well, though they
+p4l4 have little sound with
+p4l5 which to sound an
+p4l6 alarum.
+}
+book 43
+{
+pages 7
+title Phonemes of the orcish tongue
+author Yorick of Yew
+p1l1 ab, ad, ag, akt, alm,
+p1l2 at, augh, auh, azh, ba,
+p1l3 ba, bag, bar, baz, bid,
+p1l4 bilge, bo, bog, bog,
+p1l5 brui, bu, buad, bug,
+p1l6 bug, buil, buim, bum,
+p1l7 buo, buor, buu, ca,
+p1l8 car, clog, cro, cuk,
+p2l1 cur, da, dagh, dagh,
+p2l2 dak, dar, deak, der,
+p2l3 dil, dit, dor, dre,
+p2l4 dri, dru, du, dud, duf,
+p2l5 dug, dug, duh, dun,
+p2l6 eag, eg, egg, eichel,
+p2l7 ek, ep, ewk, faugh,
+p2l8 fid, flu, fog, foo, foz,
+p3l1 fruk, fu, fub, fud,
+p3l2 fun, fup, fur, gaa,
+p3l3 gag, gagh, gan, gar, gh,
+p3l4 gha, ghat, ghed, ghig,
+p3l5 gho, ghu, gig, gil, gka,
+p3l6 glu, glu, glug, gna,
+p3l7 gno, gnu, gol, gom,
+p3l8 goth, grunt, grut, gu,
+p4l1 gub, gub, gug, gugh,
+p4l2 guk, guk,
+p4l3 (with an umlaut), gulg,
+p4l4 gur, gurt, ha, hagh,
+p4l5 hat, hig, hig, hok,
+p4l6 hrak, hrol, hug, i, ig,
+p4l7 igg, igh, ign, ihg,
+p4l8 ikk, it, jak, jek, jja,
+p5l1 ju, juk, ka, ka, ke,
+p5l2 kgh, kh, ki, klap, klu,
+p5l3 knod, knu, kod, krug,
+p5l4 kt, kug, lat, log, log,
+p5l5 lub, lug, lug, luh, ma,
+p5l6 nag, nar, natz, neg,
+p5l7 neh, nog, nug, nug,
+p5l8 nuk, o, oag, ob, og,
+p6l1 ogh, oh, olm, om, oo,
+p6l2 oog, oth, pa, pig, qo,
+p6l3 qua, quil, rekk, rim,
+p6l4 ro, rod, ru, rug, rukk,
+p6l5 rur, sag, sah, sg,
+p6l6 snarf, stu, thu, thu,
+p6l7 thu, thug, tk, tug, u,
+p6l8 ud, ug, ugh, ukk, ulg,
+p7l1 urd, urg, urgle, ut,
+p7l2 zug.
+}
+book 44
+{
+pages 27
+title Birds of Britannia
+author Thoma th' Heather
+p1l1 The WREN is a tiny
+p1l2 insect-eating bird
+p1l3 with a loud voice. The
+p1l4 cheerful trills of
+p1l5 Wrens are
+p1l6 extraordinarily varied
+p1l7 and melodious.
+p1l8 The SWALLOW is
+p2l1 easily recognized by
+p2l2 its forked tail.
+p2l3 Swallows catch
+p2l4 insects in flight and
+p2l5 have squeaky,
+p2l6 twittering songs.
+p2l7 The WARBLER is an
+p2l8 exceptional singer,
+p3l1 whose extensive
+p3l2 songs combine the best
+p3l3 qualities of Wrens and
+p3l4 Swallows.
+p3l5 The NUTHATCH
+p3l6 climbs down trees
+p3l7 headfirst, searching
+p3l8 for insects in the
+p4l1 bark. It sings a
+p4l2 repetitive series of
+p4l3 notes with a nasal
+p4l4 tone quality.
+p4l5 The agile CHICKADEE
+p4l6 has a buzzy
+p4l7 chick-a-dee-dee
+p4l8 call, from which its
+p5l1 name is derived. Its
+p5l2 song is a series of
+p5l3 whistled notes.
+p5l4 The THRUSH is a
+p5l5 brown bird with a
+p5l6 spotted breast, which
+p5l7 eats worms and
+p5l8 snails and has a
+p6l1 beautiful singing
+p6l2 voice. Thrushes use a
+p6l3 stone as an anvil to
+p6l4 smash the shells of
+p6l5 snails.
+p6l6 The little
+p6l7 NIGHTINGALE is
+p6l8 also known for its
+p7l1 beautiful song, which
+p7l2 it sings even at night.
+p7l3 The STARLING is a
+p7l4 small dark bird with a
+p7l5 yellow bill and a
+p7l6 squeaky,
+p7l7 high-pitched song.
+p7l8 Starlings can mimic
+p8l1 the sounds of other
+p8l2 birds.
+p8l3 The SKYLARK sings
+p8l4 a series of
+p8l5 high-pitched
+p8l6 melodius trills in
+p8l7 flight.
+p8l8 The FINCH is a small
+p9l1 seed-eating bird with
+p9l2 a conical beak and a
+p9l3 musical, warbling
+p9l4 song.
+p9l5 The CROSSBILL is a
+p9l6 kind of Finch with a
+p9l7 strange crossed bill,
+p9l8 which it uses to
+p10l1 extract seeds from
+p10l2 pine cones.
+p10l3 The CANARY is a
+p10l4 kind of Finch that I
+p10l5 often kept as a pet.
+p10l6 Miners would often
+p10l7 take Canaries
+p10l8 underground with
+p11l1 them, to warn them of
+p11l2 the presence of
+p11l3 hazardous vapors in
+p11l4 the air.
+p11l5 The SPARROW
+p11l6 weaves a nest of
+p11l7 grass and has an
+p11l8 unmusical chirp for
+p12l1 voice.
+p12l2 The TOWHEE is a
+p12l3 kind of Sparrow that
+p12l4 continually reminds
+p12l5 listeners to drink
+p12l6 their tea.
+p12l7 The SHRIKE is a gray
+p12l8 bird with a hooked
+p13l1 bill. Shrikes have the
+p13l2 habit of impaling their
+p13l3 prey on thorns.
+p13l4 The WOODPECKER
+p13l5 has a pointed beak that
+p13l6 is suitable for pecking
+p13l7 at wood to get at the
+p13l8 insects inside.
+p14l1 The KINGFISHER
+p14l2 dives for fish, which
+p14l3 it catches with its
+p14l4 long, pointed beak.
+p14l5 The TERN migrates
+p14l6 over great distances,
+p14l7 from one end of
+p14l8 Britannia to the other
+p15l1 each year. Terns dive
+p15l2 from the air to catch
+p15l3 fish.
+p15l4 The PLOVER is a bird
+p15l5 that distracts
+p15l6 predators by
+p15l7 pretending to have a
+p15l8 broken wing.
+p16l1 The LAPWING is a
+p16l2 kind of Plover that
+p16l3 has a long black crest.
+p16l4 The HAWK is a
+p16l5 predator that feeds on
+p16l6 small birds, mice,
+p16l7 squirrels and other
+p16l8 small animals. Small
+p17l1 hawks are known as
+p17l2 Kites.
+p17l3 The DOVE is a
+p17l4 seed-eating bird with
+p17l5 a peaceful reputation.
+p17l6 Doves have a
+p17l7 low-pitched cooing
+p17l8 song.
+p18l1 The PARROT is a
+p18l2 brightly colored bird
+p18l3 with a hooked bill,
+p18l4 favored as a
+p18l5 companion by pirates.
+p18l6 Parrots can be taught
+p18l7 to imitate the human
+p18l8 voice.
+p19l1 The CUCKOO is a
+p19l2 devious bird that lays
+p19l3 eggs in the nests of
+p19l4 Warblers and other
+p19l5 small birds. Cuckoos
+p19l6 have the uncanny
+p19l7 ability to keep track of
+p19l8 time, singing once at
+p20l1 the beginning of each
+p20l2 hour.
+p20l3 The ROADRUNNER
+p20l4 is an unusual bird
+p20l5 with a long tail, which
+p20l6 runs swiftly along
+p20l7 the ground hunting
+p20l8 for lizards and
+p21l1 snakes.
+p21l2 The SWIFT is a very
+p21l3 agile bird that spends
+p21l4 nearly its entire life
+p21l5 in the air. With their
+p21l6 mouths wide open,
+p21l7 Swifts capture insects
+p21l8 in mid-flight.
+p22l1 The HUMMINGBIRD
+p22l2 is a cross between a
+p22l3 Swift and a Fairy.
+p22l4 These tiny, brightly
+p22l5 colored birds hover
+p22l6 magically near
+p22l7 flowers and live on
+p22l8 the nectar they
+p23l1 provide.
+p23l2 The OWL is a
+p23l3 reputedly wise bird
+p23l4 that is active at night,
+p23l5 unlike most birds.
+p23l6 Owls have excellent
+p23l7 night vision and
+p23l8 low-pitched hooting
+p24l1 calls. Their wings are
+p24l2 silent in flight.
+p24l3 The GOATSUCKER is
+p24l4 a strange owl-like
+p24l5 bird that is thought to
+p24l6 live on the milk of
+p24l7 goats. These
+p24l8 mysterious birds
+p25l1 make jarring sounds
+p25l2 at night, for which
+p25l3 reason they are also
+p25l4 called Nightjars.
+p25l5 The DUCK is a bird
+p25l6 that swims more than
+p25l7 it flies and has a
+p25l8 nasal voice that is
+p26l1 described best as a
+p26l2 quack.
+p26l3 The SWAN is a kind
+p26l4 of long-necked Duck
+p26l5 that is all white.
+p26l6 Swans are usually
+p26l7 voiceless, but they are
+p26l8 said to have an
+p27l1 extraordinarily
+p27l2 beautiful song.
+p27l3 THE END
+}
+book 45
+{
+pages 8
+title Taming Dragons
+author Wyrd Beastmaster
+p1l1 I have not much to
+p1l2 tell about dragons. The
+p1l3 sole time I approached
+p1l4 one with an eye
+p1l5 towards taming it, my
+p1l6 initial attempts at
+p1l7 calming it met with
+p1l8 failure. It fixed a
+p2l1 massive beady eye
+p2l2 upon me and began its
+p2l3 slithering approach,
+p2l4 intending no doubt to
+p2l5 insert me into its maw
+p2l6 and bear down with
+p2l7 its teeth.
+p2l8 However, as I was
+p3l1 engaged in what
+p3l2 remains to this day
+p3l3 the most terrifying
+p3l4 combat of my life, the
+p3l5 dragon suddenly
+p3l6 whirled as if in a
+p3l7 panic, ran a short
+p3l8 distance, took off into
+p4l1 the air, then
+p4l2 transformed into a
+p4l3 whirlwind. Lastly, it
+p4l4 exploded, showering
+p4l5 gouts of black blood
+p4l6 and heaving, stinking
+p4l7 flesh upon miles of
+p4l8 countryside. The
+p5l1 fireball was massive
+p5l2 enough to light a city I
+p5l3 should surmise.
+p5l4 I never did discover
+p5l5 the exact cause of this
+p5l6 strange behavior
+p5l7 except to assume that
+p5l8 it was not typical for
+p6l1 this reptilian species.
+p6l2 My best guesses
+p6l3 revolve around a
+p6l4 magical fracture in
+p6l5 the nature of reality,
+p6l6 which is far too
+p6l7 esoteric a territory
+p6l8 for one of my limited
+p7l1 scholarship.
+p7l2 Hence my basic
+p7l3 advice to those who
+p7l4 seek to tame a
+p7l5 dragon-be sure that
+p7l6 thou hast mastered
+p7l7 the twin skills of
+p7l8 taming animals and
+p8l1 running away very
+p8l2 fast.
+}
+book 46
+{
+pages 24
+title A grammar of orcish
+author Yorick of Yew
+p1l1 This volume and
+p1l2 others in the series,
+p1l3 are sponsored by
+p1l4 donations from Lord
+p1l5 Blackthorn, ever a
+p1l6 supporter of
+p1l7 understanding the
+p1l8 other sentient races of
+p2l1 Britannia. -The Orcish
+p2l2 tongue may fall
+p2l3 unpleasingly 'pon the
+p2l4 ear, yet it has
+p2l5 within it a complex
+p2l6 grammar oft
+p2l7 misunderstood by
+p2l8 those who merely
+p3l1 hear the few broken
+p3l2 words of English our
+p3l3 orcish brothers
+p3l4 manage without
+p3l5 education.
+p3l6 These are the basic
+p3l7 rules of orcish:,
+p3l8 Orcish has five
+p4l1 tenses: present, past,
+p4l2 future imperfect,
+p4l3 present interjectional,
+p4l4 and prehensile.
+p4l5 Examples: gugroflu,
+p4l6 gugrofloog, gugrobo,
+p4l7 gugrolu! gugrogug.
+p4l8 All transitive verbs in
+p5l1 the prehensile tense
+p5l2 end it ug.
+p5l3 Examples: urgleighug,
+p5l4 biggugdaghgug,
+p5l5 curdakalmug.
+p5l6 All present
+p5l7 interjectional
+p5l8 conjugations start
+p6l1 with the letter G
+p6l2 unless they contain
+p6l3 the third declensive
+p6l4 accent of the letter U.
+p6l5 Examples:
+p6l6 ghothudunglug, but n
+p6l7 azhbuugub.
+p6l8 The past tense can
+p7l1 only refer to events
+p7l2 since the last meal,
+p7l3 but the prehensile
+p7l4 tense can refer to any
+p7l5 event within reach.
+p7l6 The present tense is
+p7l7 conjugated like the
+p7l8 future imperfect
+p8l1 tense, when the
+p8l2 interrogative mode is
+p8l3 used by pitching the
+p8l4 sound a quarter-tone
+p8l5 higher.
+p8l6 Orcish hath no concept
+p8l7 of person, as in first
+p8l8 person, third person,
+p9l1 I, we, etc.
+p9l2 Orcish grammar
+p9l3 relies upon the three
+p9l4 cardinal rules of
+p9l5 accretion, prefixing,
+p9l6 and agglutination, in
+p9l7 addition to pitch. In the
+p9l8 former, phonemes
+p10l1 combine into larger
+p10l2 words which may
+p10l3 contain full phrasal
+p10l4 significance. In the
+p10l5 second, prefixing
+p10l6 specific phonetic
+p10l7 sounds changes the
+p10l8 subject of the
+p11l1 sentence into object,
+p11l2 interrogative,
+p11l3 addressed individual,
+p11l4 or dinner.
+p11l5 Agglutination occurs
+p11l6 whenever four of the
+p11l7 same letter are
+p11l8 present in a word, in
+p12l1 which case, any two
+p12l2 of them may be
+p12l3 removed or slurred.
+p12l4 Pitch changes the
+p12l5 phoneme value of
+p12l6 individual syllables,
+p12l7 thus completely
+p12l8 altering what a word
+p13l1 may mean. The
+p13l2 classic example if
+p13l3 Aktgluthugrot
+p13l4 bigglogubuu
+p13l5 dargilgaglug
+p13l6 lublublub which can
+p13l7 mean You are such a
+p13l8 pretty girl, My
+p14l1 mother ate your
+p14l2 primroses, or
+p14l3 Jellyfish nose paints
+p14l4 alms potato, depending
+p14l5 on pitch.
+p14l6 Orcish poetry often
+p14l7 relies upon repeating
+p14l8 the same phrase in
+p15l1 multiple pitches, even
+p15l2 changing pitch
+p15l3 midword. None of
+p15l4 this great are is
+p15l5 translatable.
+p15l6 The orcish language
+p15l7 uses the following
+p15l8 vowels: ab, ad, ag, akt,
+p16l1 at, augh, auh, azh, e,
+p16l2 i, o, oo, u, uu. The
+p16l3 vowel sound a is not
+p16l4 recognized as a vowel
+p16l5 and does not exist in
+p16l6 their alphabet. The
+p16l7 orcish alphabet is best
+p16l8 learned using the
+p17l1 classic rhyme
+p17l2 repeated at 23
+p17l3 different pitchs:
+p17l4 Lugnog ghu blat
+p17l5 suggaroglug. Gaghbuu
+p17l6 dakdar ab highugbo,
+p17l7 Gothnogbuim ad
+p17l8 gilgubbugbuilug
+p18l1 Bilgeaugh thurggulg
+p18l2 stuiggro!
+p18l3 A translation of the
+p18l4 first pitch:
+p18l5 Eat food, the first
+p18l6 letter is ab,
+p18l7 Kill people, the next
+p18l8 letter is ad
+p19l1 I forget the rest But
+p19l2 augh is in there
+p19l3 somewhere!
+p19l4 What follows is a
+p19l5 complete phonetic
+p19l6 library of the orcish
+p19l7 language: ab, ad, ag,
+p19l8 akt, alm, at, augh,
+p20l1 auh, azh, ba, ba, bag,
+p20l2 bar, baz, bid, bilge,
+p20l3 bo, bog, bog, brui, bu,
+p20l4 buad, bug, bug, buil,
+p20l5 buim, bum, buo, buor,
+p20l6 buu, ca, car, clog, cro,
+p20l7 cuk, cur, da, dagh,
+p20l8 dagh, dak, dar, deak,
+p21l1 der, dil, dit, dor, dre,
+p21l2 dri, dru, du, dud, duf,
+p21l3 dug, dug, duh, dun,
+p21l4 eag, eg, egg, eichel,
+p21l5 ek, ep, ewk, faugh, fid,
+p21l6 flu, fog, foo, foz,
+p21l7 fruk, fu, fub, fud,
+p21l8 fun, fup, fur, gaa,
+p22l1 gag, gagh, gan, gar, gh,
+p22l2 gha, ghat, ghed, ghid,
+p22l3 gho, ghu, gig, gil, gka,
+p22l4 glu, glu, glug, gna,
+p22l5 gno, gnu, gol, gom,
+p22l6 goth, grunt, grut, gu,
+p22l7 gub, gub, gug, gug,
+p22l8 gugh, guk, guk
+p23l1 Transcriber's Note:
+p23l2 The remainder of the
+p23l3 orcish language is
+p23l4 not present in this
+p23l5 tome. To find the
+p23l6 remainder, please
+p23l7 read Phonemes of the
+p23l8 Orcish Tongue, also
+p24l1 by Yorick o' Yew.
+}

Added: trunk/096/pkg/items/sysbook/itemdesc.cfg
===================================================================
--- trunk/096/pkg/items/sysbook/itemdesc.cfg	2005-09-29 22:41:15 UTC (rev 312)
+++ trunk/096/pkg/items/sysbook/itemdesc.cfg	2005-09-29 22:53:45 UTC (rev 313)
@@ -0,0 +1,92 @@
+# {$Id}
+
+Item 0xFEF
+{
+	Name			book1
+	Desc			book
+	Weight			1
+	RequiresAttention	1
+	
+	Script			book/use
+	CreateScript		book/onCreate
+	DestroyScript		book/onDestroy
+	MethodScript		book/methods
+	
+	NumPages		30
+	IsBook			1
+}
+Item 0xFF0
+{
+	Name			book2
+	Desc			book
+	Weight			3/2
+	RequiresAttention	1
+	
+	Script			book/use
+	CreateScript		book/onCreate
+	DestroyScript		book/onDestroy
+	MethodScript		book/methods
+	
+	NumPages		40
+	IsBook			1
+}
+Item 0xFF1
+{
+	Name			book3
+	Desc			book
+	Weight			1/2
+	RequiresAttention	1
+	
+	Script			book/use
+	CreateScript		book/onCreate
+	DestroyScript		book/onDestroy
+	MethodScript		book/methods
+	
+	NumPages		20
+	IsBook			1
+}
+Item 0xFF2
+{
+	Name			book4
+	Desc			book
+	Weight			1
+	RequiresAttention	1
+	
+	Script			book/use
+	CreateScript		book/onCreate
+	DestroyScript		book/onDestroy
+	MethodScript		book/methods
+	
+	NumPages		30
+	IsBook			1
+}
+Item 0xFF3
+{
+	Name			book5
+	Desc			book
+	Weight			1/3
+	RequiresAttention	1
+	
+	Script			book/use
+	CreateScript		book/onCreate
+	DestroyScript		book/onDestroy
+	MethodScript		book/methods
+	
+	NumPages		10
+	IsBook			1
+}
+Item 0xFF4
+{
+	Name			book6
+	Desc			book
+	Weight			1/2
+	RequiresAttention	1
+	
+	Script			book/use
+	CreateScript		book/onCreate
+	DestroyScript		book/onDestroy
+	MethodScript		book/methods
+	
+	NumPages		20
+	IsBook			1
+}

Added: trunk/096/pkg/items/sysbook/pkg.cfg
===================================================================
--- trunk/096/pkg/items/sysbook/pkg.cfg	2005-09-29 22:41:15 UTC (rev 312)
+++ trunk/096/pkg/items/sysbook/pkg.cfg	2005-09-29 22:53:45 UTC (rev 313)
@@ -0,0 +1,13 @@
+Enabled		1
+Name		sysbook
+
+Version		1.0
+
+CoreRequired	96
+
+Creator		Austin Heilman
+Email		Austin at tsse.net
+Maintainer	Distro Team
+Email		pol-distro-support at sourceforge.net
+
+#Conflicts none

Added: trunk/096/pkg/items/sysbook/www/viewbook.src
===================================================================
--- trunk/096/pkg/items/sysbook/www/viewbook.src	2005-09-29 22:41:15 UTC (rev 312)
+++ trunk/096/pkg/items/sysbook/www/viewbook.src	2005-09-29 22:53:45 UTC (rev 313)
@@ -0,0 +1 @@
+// $Id$
\ No newline at end of file



From austin at berlios.de  Fri Sep 30 01:05:43 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 01:05:43 +0200
Subject: [Poldistro-svn] r314 - trunk/096/pkg/items/sysbook/include
Message-ID: <200509292305.j8TN5hR2009662@sheep.berlios.de>

Author: austin
Date: 2005-09-30 01:05:41 +0200 (Fri, 30 Sep 2005)
New Revision: 314

Added:
   trunk/096/pkg/items/sysbook/include/zuluBooks.inc
Log:
Will be used to parse zulubooks.cfg 

Added: trunk/096/pkg/items/sysbook/include/zuluBooks.inc
===================================================================
--- trunk/096/pkg/items/sysbook/include/zuluBooks.inc	2005-09-29 22:53:45 UTC (rev 313)
+++ trunk/096/pkg/items/sysbook/include/zuluBooks.inc	2005-09-29 23:05:41 UTC (rev 314)
@@ -0,0 +1,61 @@
+//$Id$
+
+/*===============================================================
+* Current Version
+* ZULUBOOKS.INC - v1.0
+* Updated 9/29/2005 4:00PM
+*
+* -- Revision v1.0 --
+* Austin:
+*  Created include file
+===============================================================*/
+
+use os;
+use cfgfile;
+
+/* SysBook_GetZuluBooksCfgFile()
+ * 
+ * Purpose
+ * Loads zulubooks.cfg
+ *
+ * Parameters
+ *
+ * Return value
+ * Config file
+ *
+ */
+function SysBook_GetZuluBooksCfgFile()
+	var cfg_file := ReadConfigFile(":sysbooks:config/zulubooks");
+	if ( cfg_file.errortext )
+		SysLog("Error::SysBook_GetZuluBooksCfgFile() - Unable to open zulubooks.cfg ->"+cfg_file.errortext);
+	endif
+
+	return cfg_file;
+endfunction
+
+/*
+ * SysBook_GetZuluCfgElem(elem_name, cfg_file)
+ *
+ * Purpose
+ * Retrieves a config elem for a book in zulubooks.cfg
+ *
+ * Parameters
+ * elem_name:		Name of the book elem to retrieve.
+ * cfg_file:		Optional parameter - reference to a config already read in.
+ *
+ * Return value
+ * Returns a config file elem.
+ *
+ */
+function SysBook_GetZuluCfgElem(elem_name, byref cfg_file:=0)
+	if ( !cfg_file )
+		cfg_file := SysBook_GetZuluBooksCfgFile();
+	endif
+	
+	var cfg_elem := cfg_file[elem_name];
+	if ( cfg_elem.errortext )
+		SysLog("Error::SysBook_GetZuluCfgElem() - unable to find cfg elem ["+elem_name+"] ->"+cfg_elem.errortext);
+	endif
+	
+	return cfg_elem;
+endfunction



From austin at berlios.de  Fri Sep 30 01:19:10 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 01:19:10 +0200
Subject: [Poldistro-svn] r315 - trunk/096/pkg/items/sysbook/book
Message-ID: <200509292319.j8TNJAN0014735@sheep.berlios.de>

Author: austin
Date: 2005-09-30 01:19:04 +0200 (Fri, 30 Sep 2005)
New Revision: 315

Modified:
   trunk/096/pkg/items/sysbook/book/methods.src
Log:


Modified: trunk/096/pkg/items/sysbook/book/methods.src
===================================================================
--- trunk/096/pkg/items/sysbook/book/methods.src	2005-09-29 23:05:41 UTC (rev 314)
+++ trunk/096/pkg/items/sysbook/book/methods.src	2005-09-29 23:19:04 UTC (rev 315)
@@ -1 +1,260 @@
 // $Id$
+
+/*
+From core-changes.txt:
+
+Added support for the client's book interface:
+uo::SendOpenBook(chr,book) kicks it off
+
+The 'book' passed must have a Method Script, exporting the following functions:
+	exported function IsWritable(book) - returns 0 or 1 for readonly/writable
+	exported function GetNumLines(book) - returns maximum number of lines
+        exported function GetTitle(book)
+        exported function GetAuthor(book)
+        exported function GetLine(book, line) - line is 1-based
+
+Writable books must provide the following functions:
+        exported function SetAuthor(book,author)
+        exported function SetTitle(book,title)
+        exported function SetLine(book,line,text)
+        exported function GetContents(book) - returns an array of all lines
+*/
+
+/////////////////////////////////////////////////////////////////
+// * Function List *
+//
+// IsBook(book)
+//
+// IsWritable(book)
+// GetNumLines(book)
+// GetTitle(book)
+// GetAuthor(book)
+// GetLine(book, line_num)
+// GetContents(book)
+// SetAuthor(book, author)
+// SetTitle(book, title)
+// SetLine(book, line_num, text)
+// SetOwner(book, serial)
+// GetOwner(book)
+// ReadOnly(book, value)
+// ExtractInfo(book)
+//
+/////////////////////////////////////////////////////////////////
+// * Internal/Private Function List *
+//
+// GetInfo(book, prop_name)
+// SetInfo(book, prop_name, prop_value)
+//
+///////////////////////////
+
+use uo;
+use os;
+use cfgfile;
+
+include ":datafile:datafile";
+
+program Install()
+	return 1;
+endprogram
+
+exported function IsBook(book)
+	return book;
+endfunction
+
+//++++++++++++++++++++++++++++
+// Core Required Functions
+//++++++++++++++++++++++++++++
+
+exported function IsWritable(book)
+	if ( GetInfo(book, "ReadOnly") )
+		return 0;
+	else
+		return 1;
+	endif
+endfunction
+
+exported function GetNumLines(book)
+	// There are 8 lines per page.
+	// For simplicity, take in the number of pages and return 8 lines for every page.
+	return (CInt(GetInfo(book, "NumPages")) * 8);
+endfunction
+
+exported function GetTitle(book)
+	//One line. Looks for a property called "Title".
+	return CStr(GetInfo(book, "Title"));
+endfunction
+
+exported function GetAuthor(book)
+	//One line. :ooks for a property called "Author".
+	return CStr(GetInfo(book, "Author"));
+endfunction
+
+exported function GetLine(book, line_num)
+	// Used to get a specific line from the book.
+
+	// Uses the GetContents() function.
+	var contents := GetContents(book);
+	if ( line_num <= contents.size() )
+		var line := contents[line_num];
+
+		if ( line && line != error )
+			return line;
+		endif
+	endif
+
+	// If there wasnt a line, return an empty string.
+	return "";
+endfunction
+
+exported function GetContents(book)
+	// Returns an array of all lines
+	var info := GetInfo(book, "Contents");
+	if ( !info || info == error )
+		info := array;
+	endif
+	return info;
+endfunction
+
+exported function SetAuthor(book, author)
+	return SetInfo(book, "Author", CStr(author));
+endfunction
+
+exported function SetTitle(book, title)
+	return SetInfo(book, "Title", CStr(title));
+endfunction
+
+exported function SetLine(book, line_num, text)
+	// Gets all the lines, then edits the appropriate line.
+	// Returns the contents of the book.
+
+	// Reuses the GetContents() function.
+	var contents := GetContents(book);
+	if ( !contents || contents == error )
+		contents := array;
+	endif
+
+	//Reuses the GetNumLines() function
+	if ( line_num <= GetNumLines(book) )
+		contents[line_num] := CStr(text);
+		SetInfo(book, "Contents", contents);
+	endif
+
+	return contents;
+endfunction
+
+//++++++++++++++++++++++++++++
+// Helper Functions
+//++++++++++++++++++++++++++++
+
+exported function SetOwner(book, owner)
+	var serial;
+	
+	if ( owner.IsA(POLCLASS_MOBILE) )
+		serial := owner.serial;
+	endif
+	
+	//book.SetOwner(serial)
+	//Sets the serial of who owns the book.
+	return SetInfo(book, "Owner", CInt(serial));
+endfunction
+
+exported function GetOwner(book)
+	//book.GetOwner()
+	//Gets the serial of the owner of the book.
+	return GetInfo(book, "Owner");
+endfunction
+
+exported function ReadOnly(book, mode)
+	// book.ReadOnly(1|0)
+	// Mode:
+	//	1 - Disable read write (sets to read only)
+	//	0 - Enable read write
+
+	mode := CInt(mode);
+	if ( mode < 0 )
+		mode := 0;
+	elseif ( mode > 1 )
+		mode := 1;
+	endif
+
+	return SetInfo(book, "ReadOnly", CInt(mode));
+endfunction
+
+exported function ExtractInfo(book)
+	// book.ExtractInfo()
+	// Get all the info you need about a book
+	// useful for copying one or something else.
+
+	// Returns a structure
+	// .Author
+	// .Contents
+	// .Title
+
+	var book_info := struct;
+	book_info.+Author := GetAuthor(book);
+	book_info.+Contents := GetContents(book);
+	book_info.+Title := GetTitle(book);
+
+	return book_info;
+endfunction
+
+//++++++++++++++++++++++++++++
+// Internal/Private Functions
+//++++++++++++++++++++++++++++
+
+// *GetInfo(book, prop_name)
+//
+// Function for getting a book's info.
+// First it will search for a datafile entry for the value based on
+// the book's serial. Then it will look on the book for a cprop, then
+// if neither of the previous two were found, it will fall back on the
+// itemdesc.cfg entry for the book.
+
+function GetInfo(book, prop_name)
+	var prop_value;
+
+	// First we check for a datafile entry.
+	// We do create the datafile if it doesnt exist.
+	// However, the elem is not created if it doesnt exist
+	// because were only reading in this function and not writing.
+	var book_data_file := DFOpenDataFile("books", DF_CREATE);
+	var book_elem := DFFindElement(book_data_file, hex(book.serial), DF_NO_CREATE);
+	prop_value := book_elem.GetProp(prop_name);
+	if ( prop_value )
+		return prop_value;
+	endif
+
+	//If we got here, then there was no datafile entry for
+	//the property passed. So at this point we check the book
+	//for a cprop.
+	prop_value := GetObjProperty(book, prop_name);
+	if ( prop_value )
+		return prop_value;
+	endif
+
+	//If we got this far.. then lets fall back on the itemdesc.cfg
+	//Note its read in as :*: which reads in every itemdesc.cfg
+	var cfg := ReadConfigFile(":*:itemdesc");
+	cfg := cfg[book.objtype];
+	prop_value := GetConfigString(cfg, prop_name);
+	if ( prop_value )
+		return prop_value;
+	endif
+
+	return 0;
+endfunction
+
+// *SetInfo(book, prop_name, prop_value)
+//
+// Private function for setting a value for a book.
+// Writes to a datafile, the elem being the book's serial #
+//
+// Note: Make sure the prop_name never has any spaces.
+//       Datafiles dont like that.
+//
+function SetInfo(book, prop_name, prop_value)
+	var book_data_file := DFOpenDataFile("books", DF_CREATE);
+	var book_elem := DFFindElement(book_data_file, hex(book.serial), DF_CREATE);
+
+	return book_elem.SetProp(CStr(prop_name), prop_value);
+endfunction



From muaddiblsd at berlios.de  Fri Sep 30 01:46:15 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Fri, 30 Sep 2005 01:46:15 +0200
Subject: [Poldistro-svn] r316 - in trunk/096/pkg: skills/blacksmithy skills/blacksmithy/config skills/blacksmithy/tongs systems/crafting systems/crafting/include systems/crafting/method
Message-ID: <200509292346.j8TNkF3A025097@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-30 01:45:05 +0200 (Fri, 30 Sep 2005)
New Revision: 316

Added:
   trunk/096/pkg/skills/blacksmithy/SmithMenu.cfg
   trunk/096/pkg/skills/blacksmithy/tongs/
   trunk/096/pkg/skills/blacksmithy/tongs/tongsMethod.src
   trunk/096/pkg/systems/crafting/include/
   trunk/096/pkg/systems/crafting/include/craftGumps.inc
   trunk/096/pkg/systems/crafting/include/crafting.inc
   trunk/096/pkg/systems/crafting/include/craftingRepair.inc
   trunk/096/pkg/systems/crafting/include/craftingSkill.inc
   trunk/096/pkg/systems/crafting/include/toolWear.inc
   trunk/096/pkg/systems/crafting/method/
   trunk/096/pkg/systems/crafting/method/toolWearMethod.inc
Modified:
   trunk/096/pkg/skills/blacksmithy/blacksmithy.cfg
   trunk/096/pkg/skills/blacksmithy/config/icp.cfg
   trunk/096/pkg/skills/blacksmithy/itemdesc.cfg
   trunk/096/pkg/skills/blacksmithy/makeBlacksmithItems.src
Log:


Added: trunk/096/pkg/skills/blacksmithy/SmithMenu.cfg
===================================================================
--- trunk/096/pkg/skills/blacksmithy/SmithMenu.cfg	2005-09-29 23:19:04 UTC (rev 315)
+++ trunk/096/pkg/skills/blacksmithy/SmithMenu.cfg	2005-09-29 23:45:05 UTC (rev 316)
@@ -0,0 +1,124 @@
+##########################################################################
+# Format for Crafting Menus Config Files:
+#
+#  Index Entry for Config:
+#
+#     Craftitem Index      <- This is the Index. Contains the Sub Menu Names
+#     {
+#      Title	   Example <- HTML Name of the Menu
+#      Skill       blacksmithy  <- Skill the menu is for. Same as the ID's in pol
+#      SkillID     blacksmithy  <- SkillID of the skill listed in Skill. Needs removed
+#      Group       Axes    <- Used for each Sub Menu Name
+#     }
+#
+#  Sub Menu Entry for Config:
+#
+#     Craftitem RingMail   <- Should match the Sub-Menu Group name in Index
+#     {
+#     	Item	RingmailGloves   <- For each item in the sub-menu. You use the
+#                                   objtype name here, not the objtype.
+#     }
+#
+##########################################################################
+
+Craftitem Index
+{
+        Title   <center>Blacksmith Selection Menu</center>
+        Skill   blacksmithy
+        SkillID blacksmithy
+	Group	Axes
+	Group	Blades
+	Group	Blunt
+	Group	Polearms
+	Group	Shields
+	Group	RingMail
+	Group	ChainMail
+	Group	Platemail
+	Group	Helmets
+}
+
+Craftitem RingMail
+{
+	Item	RingmailGloves
+	Item	RingmailLeggings
+	Item	RingmailSleeves
+	Item	RingmailTunic
+}
+
+Craftitem ChainMail
+{
+	Item	ChainmailCoif
+	Item	ChainmailLeggings
+	Item	ChainmailTunic
+}
+
+Craftitem Platemail
+{
+	Item	PlatemailBreastplate
+	Item	PlatemailArms
+	Item	PlatemailGloves
+	Item	PlatemailGorget
+	Item	PlatemailLegs
+	Item	FemalePlate
+}
+
+Craftitem Helmets
+{
+	Item	Bascinet
+	Item	CloseHelm
+	Item	Helmet
+	Item	NoseHelm
+	Item	PlateHelm
+}
+
+Craftitem Shields
+{
+	Item	BronzeShield
+	Item	Buckler
+	Item	KiteShield
+	Item	KiteShieldB1
+	Item	HeaterShield
+	Item	MetalShield
+}
+
+
+Craftitem Axes
+{
+	Item	axe
+	Item	BattleAxe
+	Item	DoubleAxe
+	Item	ExecutionersAxe
+	Item	LargeBattleAxe
+	Item	TwoHandedAxe
+	Item	WarAxe
+}
+
+Craftitem Blunt
+{
+	Item	HammerPick
+	Item	Mace
+	Item	Maul
+	Item	WarHammer
+	Item	WarMace
+}
+
+Craftitem Polearms
+{
+	Item	Bardiche
+	Item	Halberd
+	Item	ShortSpear
+	Item	Spear
+	Item	WarFork
+}
+
+Craftitem Blades
+{
+	Item	BroadSword
+	Item	Cutlass
+	Item	Dagger
+	Item	Katana
+	Item	Kryss
+	Item	longsword
+	Item	Scimitar
+	Item	VikingSword
+}

Modified: trunk/096/pkg/skills/blacksmithy/blacksmithy.cfg
===================================================================
--- trunk/096/pkg/skills/blacksmithy/blacksmithy.cfg	2005-09-29 23:19:04 UTC (rev 315)
+++ trunk/096/pkg/skills/blacksmithy/blacksmithy.cfg	2005-09-29 23:45:05 UTC (rev 316)
@@ -1,443 +1,726 @@
-#note: arbitrary point values!
+##########################################################################
+# Format for blacksmithy.cfg:
+#
+#     blacksmithy 0xf49   <- Objtype of the item
+#     {
+#      name	   axe      <- Name of the item
+#      material    14       <- Material Required
+#      skill       55.0     <- Skill Required of Blacksmith to make xx.x formated
+#      difficulty  55.0     <- Skill Difficulty to craft the item
+#      points      55.0     <- Points given for crafting this item, xx.x formated
+#      skillID     ArmsLore <- Attributes.cfg name for secondary skill
+#      type        metal    <- Type of material used to craft this
+#      exceptional 1        <- 0/1 Flag. 1 = Can be exceptional
+#      mark        1        <- 0/1 Flag. 1 = Can retain maker's mark
+#      retain      1        <- 0/1 Flag. 1 = Can retain color of ore used
+#     }
+#
+# Notes: 1.) Objtype in entry header must NOT use 0x0aaa format, but 0xaaa
+##########################################################################
 
-blacksmithy 0x0f49
-{
- name	axe
- material 14
- skill 55
- maxhp 80
- points 55
-}
 
-blacksmithy 0x0f47
+###############################################
+# Ringmail
+###############################################
+blacksmithy 0x13F2
 {
-name	battle axe
- material 14
- skill 50
- maxhp 80
- points 50
+  name		ringmail gloves
+  material	10
+  skill		12.0
+  difficulty	12.0
+  points	22.0
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x0f4b
+blacksmithy 0x13F0
 {
-name	double axe
- material 12
- skill 49
- maxhp 110
- points 49
+  name		ringmail leggings
+  material	16
+  skill		19.4
+  difficulty	19.4
+  points	29.4
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x0f45
+blacksmithy 0x13EE
 {
-name	executioner's axe
- material 16
- skill 54
- maxhp 90
- points 54
+  name		ringmail sleeves
+  material	14
+  skill		16.9
+  difficulty	16.9
+  points	26.9
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x13fa
+blacksmithy 0x13EC
 {
-name	large battle axe
- material 14
- skill 48
- maxhp 110
- points 48
+  name		ringmail tunic
+  material	18
+  skill		21.9
+  difficulty	21.9
+  points	31.9
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1442
+
+###############################################
+# Chainmail
+###############################################
+blacksmithy 0x13BB
 {
-name	two-handed axe
- material 16
- skill 53
- maxhp 70
- points 53
+  name		chainmail coif
+  material	10
+  skill		14.5
+  difficulty	14.5
+  points	54.5
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x13af
+blacksmithy 0x13BE
 {
-name	war axe
- material 16
- skill 59
- maxhp 80
- points 59
+  name		chainmail leggings
+  material	18
+  skill		36.7
+  difficulty	36.7
+  points	76.7
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x13bb
+blacksmithy 0x13BF
 {
-name	chainmail coif
- material 10
- skill 34
- maxhp 70
- points 34
+  name		chainmail tunic
+  material	20
+  skill		39.1
+  difficulty	39.1
+  points	79.1
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x13be
+
+###############################################
+# Platemail
+###############################################
+blacksmithy 0x1410
 {
-name	chainmail leggings
- material 18
- skill 56
- maxhp 90
- points 56
+  name		platemail arms
+  material	18
+  skill		66.3
+  difficulty	66.3
+  points	106.3
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x13bf
+blacksmithy 0x1414
 {
-name	chainmail tunic
- material 20
- skill 59
- maxhp 110
- points 59
+  name		platemail gloves
+  material	12
+  skill		58.9
+  difficulty	58.9
+  points	98.9
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x140c
+blacksmithy 0x1413
 {
-name	bascinet
- material 15
- skill 28
- maxhp 90
- points 28
+  name		platemail gorget
+  material	10
+  skill		56.4
+  difficulty	56.4
+  points	96.4
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1408
+blacksmithy 0x1411
 {
-name	close helm
- material 15
- skill 57
- maxhp 100
- points 57
+  name		platemail legs
+  material	20
+  skill		68.8
+  difficulty	68.8
+  points	108.8
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x140a
+blacksmithy 0x1415
 {
-name	helmet
- material 15
- skill 57
- maxhp 90
- points 57
+  name		platemail breastplate
+  material	25
+  skill		75.0
+  difficulty	75.0
+  points	115.0
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x140e
+blacksmithy 0x1c04
 {
-name	nose helm
- material 15
- skill 57
- maxhp 100
- points 57
+  name		female plate armor
+  material	20
+  skill		44.1
+  difficulty	44.1
+  points	84.1
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1412
+###############################################
+# Helmets
+###############################################
+blacksmithy 0x140C
 {
-name	plate helm
- material 15
- skill 82
- maxhp 110
- points 82
+  name		bascinet
+  material	15
+  skill		8.3
+  difficulty	8.3
+  points	18.3
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x143c
+blacksmithy 0x1408
 {
-name	hammer pick
- material 18
- skill 45
- maxhp 70
- points 45
+  name		close helmet
+  material	15
+  skill		37.9
+  difficulty	37.9
+  points	47.9
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x0f5c
+blacksmithy 0x140A
 {
-name	mace
- material 6
- skill 34
- maxhp 70
- points 34
+  name		helmet
+  material	15
+  skill		37.9
+  difficulty	37.9
+  points	47.9
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x143a
+blacksmithy 0x140E
 {
-name	maul
- material 10
- skill 39
- maxhp 70
- points 39
+  name		norse helm
+  material	15
+  skill		37.9
+  difficulty	37.9
+  points	47.9
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1438
+blacksmithy 0x1412
 {
-name	war hammer
- material 16
- skill 54
- maxhp 110
- points 54
+  name		plate helm
+  material	15
+  skill		62.6
+  difficulty	62.6
+  points	102.6
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1406
+
+###############################################
+# Shields
+###############################################
+blacksmithy 0x1B73
 {
-name	war mace
- material 14
- skill 48
- maxhp 110
- points 48
+  name		buckler
+  material	10
+  skill		0.0
+  difficulty	2.0
+  points	11.0
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1c04
+blacksmithy 0x1B72
 {
-name	plate armor
- material 20
- skill 64
- maxhp 120
- points 64
+  name		bronze shield
+  material	12
+  skill		0.0
+  difficulty	2.0
+  points	12.0
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1415
+blacksmithy 0x1B76
 {
-name	platemail breastplate
- material 25
- skill 95
- maxhp 130
- points 95
+  name		heater shield
+  material	18
+  skill		24.3
+  difficulty	24.3
+  points	34.3
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1414
+blacksmithy 0x1B7B
 {
-name	platemail gloves
- material 12
- skill 78
- maxhp 80
- points 78
+  name		metal shield
+  material	14
+  skill		0.0
+  difficulty	2.0
+  points	12.0
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1413
+blacksmithy 0x1B74
 {
-name	platemail gorget
- material 10
- skill 76
- maxhp 80
- points 76
+  name		metal kite shield
+  material	16
+  skill		4.6
+  difficulty	4.6
+  points	14.6
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1411
+blacksmithy 0x1B78
 {
-name	platemail leggings
- material 20
- skill 88
- maxhp 115
- points 88
+  name		tear kite shield
+  material	16
+  skill		4.6
+  difficulty	4.6
+  points	14.6
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1410
+###############################################
+# Bladed
+###############################################
+
+blacksmithy 0xF5E
 {
-name	platemail arms
- material 18
- skill 86
- maxhp 100
- points 86
+  name		broadsword
+  material	10
+  skill		35.4
+  difficulty	35.4
+  points	45.4
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x0f4e
+blacksmithy 0x1440
 {
-name	bardiche
- material 18
- skill 65
- maxhp 70
- points 65
+  name		cutlass
+  material	8
+  skill		24.3
+  difficulty	24.3
+  points	34.3
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x143e
+blacksmithy 0xF51
 {
-name	halberd
- material 20
- skill 69
- maxhp 80
- points 69
+  name		dagger
+  material	3
+  skill		0.0
+  difficulty	0.0
+  points	10.0
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x13f2
+blacksmithy 0x13FE
 {
-name	ringmail gloves
- material 10
- skill 32
- maxhp 60
- points 32
+  name		katana
+  material	8
+  skill		44.1
+  difficulty	44.1
+  points	54.1
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x13f0
+blacksmithy 0x1401
 {
-name	ringmail leggings
- material 16
- skill 39
- maxhp 70
- points 39
+  name		kryss
+  material	8
+  skill		36.7
+  difficulty	36.7
+  points	46.7
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x13ee
+blacksmithy 0xF60
 {
-name	ringmail sleeves
- material 14
- skill 36
- maxhp 70
- points 36
+  name		longsword
+  material	12
+  skill		28.0
+  difficulty	28.0
+  points	38.0
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x13ec
+blacksmithy 0x13B9
 {
-name	 ringmail tunic
- material  18
- skill 41
- maxhp 75
- points 41
+  name		viking sword
+  material	14
+  skill		24.3
+  difficulty	24.3
+  points	34.3
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1b72
+
+###############################################
+# Axes
+###############################################
+blacksmithy 0xF49
 {
-name	bronze shield
- material 12
- skill 21
- maxhp 70
- points 21
+  name		axe
+  material	14
+  skill		34.2
+  difficulty	34.2
+  points	44.2
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1b73
+blacksmithy 0xF47
 {
-name	buckler
- material 10
- skill 21
- maxhp 61
- points 21
+  name		battle axe
+  material	14
+  skill		30.5
+  difficulty	30.5
+  points	40.5
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1b76
+blacksmithy 0xF4B
 {
-name	heater
- material 18
- skill 44
- maxhp 130
- points 44
+  name		double axe
+  material	12
+  skill		29.3
+  difficulty	29.3
+  points	39.3
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1b74
+blacksmithy 0xf45
 {
-name	kite shield
- material 16
- skill 24
- maxhp 105
- points 24
+  name		executioner's axe
+  material	14
+  skill		34.2
+  difficulty	34.2
+  points	44.2
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1b7b
+blacksmithy 0x13FA
 {
-name	metal shield
- material 14
- skill 21
- maxhp 70
- points 21
+  name		large battle axe
+  material	12
+  skill		28.0
+  difficulty	28.0
+  points	38.0
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1b78
+blacksmithy 0x1442
 {
-name	 wooden kite shield
- material 8
- skill 21
- maxhp 70
- points 21
+  name		two handed axe
+  material	16
+  skill		33.0
+  difficulty	33.0
+  points	43.0
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1402
+blacksmithy 0x13AF
 {
-name	short spear
- material 6
- skill 65
- maxhp 70
- points 65
+  name		war axe
+  material	16
+  skill		39.1
+  difficulty	39.1
+  points	49.1
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x0f63
+
+###############################################
+# Pole Arms
+###############################################
+blacksmithy 0xF4E
 {
-name	spear
- material 12
- skill 69
- maxhp 80
- points 69
+  name		bardiche
+  material	18
+  skill		31.7
+  difficulty	31.7
+  points	41.7
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1404
+blacksmithy 0x143E
 {
-name	war fork
- material 12
- skill 57
- maxhp 110
- points 57
+  name		halberd
+  material	20
+  skill		39.1
+  difficulty	39.1
+  points	49.1
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x0f5e
+blacksmithy 0x1402
 {
-name	broad sword
- material 10
- skill 55
- maxhp 60
- points 55
+  name		short spear
+  material	6
+  skill		45.3
+  difficulty	45.3
+  points	55.3
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1440
+blacksmithy 0xF63
 {
-name	cutlass
- material 8
- skill 44
- maxhp 70
- points 44
+  name		spear
+  material	12
+  skill		49.0
+  difficulty	49.0
+  points	59.0
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x0f51
+blacksmithy 0x1404
 {
-name	dagger
- material 3
- skill 20
- maxhp 40
- points 21
+  name		war fork
+  material	12
+  skill		42.9
+  difficulty	42.9
+  points	42.9
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x13fe
+
+###############################################
+# Bashing
+###############################################
+blacksmithy 0x143C
 {
-name	katana
- material 8
- skill 64
- maxhp 90
- points 64
+  name		hammer pick
+  material	16
+  skill		34.2
+  difficulty	34.2
+  points	44.2
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x1401
+blacksmithy 0xF5C
 {
-name	kryss
- material 8
- skill 56
- maxhp 90
- points 56
+  name		mace
+  material	6
+  skill		14.5
+  difficulty	14.5
+  points	24.5
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x0f60
+blacksmithy 0x143A
 {
-name	long sword
- material 12
- skill 48
- maxhp 70
- points 48
+  name		maul
+  material	10
+  skill		19.4
+  difficulty	19.4
+  points	29.4
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x13b5
+blacksmithy 0x1406
 {
-name	scimitar
- material 10
- skill 51
- maxhp 90
- points 51
+  name		war mace
+  material	14
+  skill		28.0
+  difficulty	28.0
+  points	38.0
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
 
-blacksmithy 0x13b9
+blacksmithy 0x1438
 {
-name	viking sword
- material 14
- skill 44
- maxhp 95
- points 44
+  name		war hammer
+  material	16
+  skill		34.2
+  difficulty	34.2
+  points	44.2
+  skillID       ArmsLore
+  type		metal
+  exceptional	1
+  mark		1
+  retain	1
 }
-

Modified: trunk/096/pkg/skills/blacksmithy/config/icp.cfg
===================================================================
--- trunk/096/pkg/skills/blacksmithy/config/icp.cfg	2005-09-29 23:19:04 UTC (rev 315)
+++ trunk/096/pkg/skills/blacksmithy/config/icp.cfg	2005-09-29 23:45:05 UTC (rev 316)
@@ -4,8 +4,8 @@
         Version         1.0
         Description     Blacksmithy Skill
 
-        Creator         Distro Team
-        C_Email         distro at polserver.com
+        Creator         MuadDib
+        C_Email         muaddib at lostsoulsshard.org
 
         Maintainer      Distro Team
         M_Email         distro at polserver.com

Modified: trunk/096/pkg/skills/blacksmithy/itemdesc.cfg
===================================================================
--- trunk/096/pkg/skills/blacksmithy/itemdesc.cfg	2005-09-29 23:19:04 UTC (rev 315)
+++ trunk/096/pkg/skills/blacksmithy/itemdesc.cfg	2005-09-29 23:45:05 UTC (rev 316)
@@ -2,23 +2,25 @@
 
 Item 0xeed
 {
-    Name            GoldCoin
-    desc            gold coin%s%
-    InsertNoise     sound_gold1in
+	Name            GoldCoin
+	desc            gold coin%s%
+	InsertNoise     sound_gold1in
 }
 
 Item 0xfbb
 {
-    Name            tongs
-    Script          :blacksmithy:makeBlacksmithItems
-    VendorSellsFor  24
-    VendorBuysFor   12
+	Name            tongs
+	Script          :blacksmithy:makeBlacksmithItems
+	MethodScript	:blacksmithy:tongs/tongsMethod.ecl
+	VendorSellsFor  24
+	VendorBuysFor   12
 }
 
 Item 0xfbc
 {
-    Name            tongs2
-    Script          :blacksmithy:makeBlacksmithItems
-    VendorSellsFor  24
-    VendorBuysFor   12
+	Name            tongs2
+	Script          :blacksmithy:makeBlacksmithItems
+	MethodScript	:blacksmithy:tongs/tongsMethod.ecl
+	VendorSellsFor  24
+	VendorBuysFor   12
 }

Modified: trunk/096/pkg/skills/blacksmithy/makeBlacksmithItems.src
===================================================================
--- trunk/096/pkg/skills/blacksmithy/makeBlacksmithItems.src	2005-09-29 23:19:04 UTC (rev 315)
+++ trunk/096/pkg/skills/blacksmithy/makeBlacksmithItems.src	2005-09-29 23:45:05 UTC (rev 316)
@@ -1,537 +1,73 @@
-use polsys;
+// //$Id$
+
+use math;
 use cfgfile;
 use util;
 
-include ":gumps:include/old/old-gumps";
-include "include/attributes";
-include "include/gumpUtil";
-include "include/dist";
-include "util/repair";
-include "include/client";
-include "include/sound";
-include "include/objtype";
-include "include/client";
-include "include/objtype";
+include ":attributes:attributeConstants";
+include ":attributes:attributes";
+include ":attributes:skillCheck";
+include ":crafting:crafting";
+include ":crafting:craftingRepair";
+include ":crafting:toolWear";
 include "include/canAccess";
-include "include/toolWear";
-include "include/noto";
 
-var itemcfg   := ReadConfigFile(":combat:itemdesc");
-var smith_cfg := ReadConfigFile("blacksmithy");
-gfref.x := 50;
-gfref.y := 50;
-var O := 501;
+var item_config     := ReadConfigFile(":*:itemdesc");
+var craft_config    := ReadConfigFile(":blacksmithy:blacksmithy");
+var resource_config := ReadConfigFile(":crafting:config/resourceList");
 
+program use_SmithTool(who, tool)
 
-program use_hammer(who, hammer)
-  if(!can_access(who, hammer))
-    return;
-  endif
-  if(!hammer.movable)
-    SendSysMessage(who, "You cannot use that.");
-    return;
-  endif
-  if(!ReserveItem(hammer))
-    SendSysMessage(who, "You cannot use that.");
-    return;
-  endif
-  GFInitGump(0, 0);
-  GFNoDispose();
-  GFNoClose();
-  GFPage(0);
-  GFResizePic(0, 60, 2600, 500, 400);
-  GFGumpPic( 20, 120, 5100);
-  GFGumpPic( 28, 120, 5101);
-  GFGumpPic(118, 120, 5101);
-  GFGumpPic(208, 120, 5101);
-  GFGumpPic(298, 120, 5101);
-  GFGumpPic(370, 120, 5101);
-  GFGumpPic(460, 120, 5102);
-  GFGumpPic( 20, 128, 5103);
-  GFGumpPic( 28, 128, 5104);
-  GFGumpPic(118, 128, 5104);
-  GFGumpPic(208, 128, 5104);
-  GFGumpPic(298, 128, 5104);
-  GFGumpPic(370, 128, 5104);
-  GFGumpPic(460, 128, 5105);
-  GFGumpPic( 20, 136, 5058);
-  GFGumpPic(118, 136, 5058);
-  GFGumpPic(232, 136, 5058);
-  GFGumpPic(350, 136, 5058);
-  GFGumpPic( 20, 136, 5106);
-  GFGumpPic( 28, 136, 5107);
-  GFGumpPic(118, 136, 5107);
-  GFGumpPic(208, 136, 5107);
-  GFGumpPic(298, 136, 5107);
-  GFGumpPic(370, 136, 5107);
-  GFGumpPic(460, 136, 5108);
-  GFGumpPic( 28, 278, 5104);
-  GFGumpPic(118, 278, 5104);
-  GFGumpPic(208, 278, 5104);
-  GFGumpPic(298, 278, 5104);
-  GFGumpPic(368, 278, 5104);
-  GFGumpPic( 20, 278, 5103);
-  GFGumpPic(460, 278, 5105);
-  GFGumpPic( 20, 226, 5058);
-  GFGumpPic(118, 226, 5058);
-  GFGumpPic(232, 226, 5058);
-  GFGumpPic(350, 226, 5058);
-  GFGumpPic( 20, 366, 5106);
-  GFGumpPic( 28, 366, 5107);
-  GFGumpPic(118, 366, 5107);
-  GFGumpPic(208, 366, 5107);
-  GFGumpPic(298, 366, 5107);
-  GFGumpPic(370, 366, 5107);
-  GFGumpPic(460, 366, 5108);
-  GFGumpPic( 20, 350, 5100);
-  GFGumpPic( 28, 350, 5101);
-  GFGumpPic(118, 350, 5101);
-  GFGumpPic(208, 350, 5101);
-  GFGumpPic(298, 350, 5101);
-  GFGumpPic(370, 350, 5101);
-  GFGumpPic(460, 350, 5102);
-  GFTextLine(110,  80, 900, "BLACKSMITH SELECTION MENU");
-  GFTextLine( 30, 121,   0, "Ringmail");
-  GFTextLine(150, 121,   0, "Chainmail");
-  GFTextLine(260, 121,   0, "Platemail");
-  GFTextLine(370, 121,   0, "Helmets");
-  GFTextLine( 30, 351,   0, "Shields");
-  GFTextLine(120, 351,   0, "Bladed");
-  GFTextLine(205, 351,   0, "Axes");
-  GFTextLine(275, 351,   0, "Polearms");
-  GFTextLine(375, 351,   0, "Bashing");
-  GFTextLine( 90, 380, 900, "Make Last");
-  GFTextLine(320, 380, 900, "Repair Item");
-  var repair  := GFButtonID(300, 384,   3, 4, 97);
-  var lastitm := GFButtonID( 70, 384,   3, 4, 99);
-  var close   := GFButtonID(410, 380, 242, 241, 1);
-  GFButtonPage(110, 123, 5209, 5209,  2);
-  GFButtonPage(230, 123, 5209, 5209,  3);
-  GFButtonPage(340, 123, 5209, 5209,  4);
-  GFButtonPage(435, 123, 5209, 5209,  5);
-  GFButtonPage( 90, 353, 5209, 5209,  6);
-  GFButtonPage(180, 353, 5209, 5209,  7);
-  GFButtonPage(250, 353, 5209, 5209,  8);
-  GFButtonPage(345, 353, 5209, 5209,  9);
-  GFButtonPage(440, 353, 5209, 5209, 10);
-  GFTextLine(  300, 420, 900, "How Many?");
-  GFGumpPic(390, 417, 2443);
-  var sa := GetObjProperty(who, "#SmithAmt");
-  if(!sa)
-    sa := 1;
-  endif
-  var ct := GFTextEntry(400, 420, 100, 30, 0, sa);
-  ComposeSubMenu(who);
-  EraseObjProperty(who, "IsMeditating");
-  EraseObjProperty(who, "HealTimer");
-  var res := GFSendGump(who);
-  if((res[0] == 999) || (res[close.keyid]))
-    SendSysMessage(who, "Cancelled");
-    return;
-  endif
-  var amt := CInt(SplitWords(res[ct.keyid])[2]);
-  if(!amt)
-    amt := 1;
-  elseif(amt > 10)
-    SendSysMessage(who, "You can only make up to 10 at a time.");
-    return;
-  endif
-  SetObjProperty(who, "#SmithAmt", amt);
-  var cont := hammer.container;
-  if((!cont) || (cont.serial == who.serial))
-    cont := who.backpack;
-  endif
-  var the_objtype := res[0];
-  if(res[repair.keyid])
-    repair_this(who);
-    return;
-  elseif(res[lastitm.keyid])
-    the_objtype := GetObjProperty(who, "LastBlacksmithItem");
-    if(!the_objtype)
-      SendSysMessage(who, "You have never smithed before.");
-      return;
-    endif
-  endif
-  SetObjProperty(who, "LastBlacksmithItem", the_objtype);
-  makeBlacksmithItems(who, the_objtype, amt, cont, hammer);
-endprogram
+	if(!can_access(who, tool))
+		return 0;
+	endif
+	if((!tool.movable) or !ReserveItem(tool))
+		SendSysMessage(who, "You cannot use that");
+		return 0;
+	endif
+	if(!tool in ListEquippedItems(who))
+		if(tool.container.serial != who.backpack.serial)
+			SendSysMessage(who, "That item is not in your backpack nor equipped.");
+			return 0;
+		endif
+	endif
 
-function ComposeSubMenu(who)
-  var num := 2;
-  var skill := (GetEffectiveSkill(who, SKILLID_BLACKSMITHY) + 20);
-  var color := 0;
-  var cfg := ReadConfigFile(":blacksmithy:blacksmithy");
-  while(num < 11)
-    case(num)
-       2: GFPage(2);        // Page 2 (Ringmail)
-          if(skill >= CInt(cfg[5106]."skill"))
-            color := 900;
-            GFButtonIDC(150, 200, 210, 211, 1, 5106);
-          endif
-          GFTextLine( 90, 175, color, "ringmail gloves");
-          GFTilePic( 100, 200, 5099);
-          color := 0;
-          if(skill >= CInt(cfg[5102]."skill"))
-            color := 900;
-            GFButtonIDC(300, 200, 210, 211, 1, 5102);
-          endif
-          GFTextLine(240, 175, color, "ringmail sleeves");
-          GFTilePic( 250, 200, 5103);
-         color := 0;
-          if(skill >= CInt(cfg[5104]."skill"))
-            color := 900;
-            GFButtonIDC(150, 295, 210, 211, 1, 5104);
-          endif
-          GFTextLine( 90, 270, color, "ringmail leggings");
-          GFTilePic( 100, 295, 5104);
-          color := 0;
-          if(skill >= CInt(cfg[5100]."skill"))
-            color := 900;
-            GFButtonIDC(300, 295, 210, 211, 1, 5100);
-          endif
-          GFTextLine(240, 270, color, "ringmail tunic");
-          GFTilePic( 250, 295, 5100);
-          color := 0;
-       3: GFPage(3);        // Page 3 (Chainmail)
-          if(skill >= CInt(cfg[5051]."skill"))
-            color := 900;
-            GFButtonIDC(150, 200, 210, 211, 1, 5051);
-          endif
-          GFTextLine( 90, 175, color, "chainmail coif");
-          GFTilePic( 100, 200, 5051);
-          color := 0;
-          if(skill >= CInt(cfg[5054]."skill"))
-            color := 900;
-            GFButtonIDC(300, 200, 210, 211, 1, 5054);
-          endif
-          GFTextLine(240, 175, color, "chainmail leggings");
-          GFTilePic( 250, 200, 5054);
-          color := 0;
-          if(skill >= CInt(cfg[5055]."skill"))
-            color := 900;
-            GFButtonIDC(150, 295, 210, 211, 1, 5055);
-          endif
-          GFTextLine( 90, 270, color, "chainmail tunic");
-          GFTilePic( 100, 295, 5055);
-          color := 0;
-       4: GFPage(4);        // Page 4 (Platemail)
-          if(skill >= CInt(cfg[5139]."skill"))
-            color := 900;
-            GFButtonIDC(100, 200, 210, 211, 1, 5139);
-          endif
-          GFTextLine( 60, 175, color, "platemail gorget");
-          GFTilePic(  70, 200, 5139);
-          color := 0;
-          if(skill >= CInt(cfg[5140]."skill"))
-            color := 900;
-            GFButtonIDC(260, 200, 210, 211, 1, 5140);
-          endif
-          GFTextLine(200, 175, color, "platemail gloves");
-          GFTilePic( 210, 200, 5140);
-          color := 0;
-          if(skill >= CInt(cfg[5136]."skill"))
-            color := 900;
-            GFButtonIDC(400, 200, 210, 211, 1, 5136);
-          endif
-          GFTextLine(340, 175, color, "platemail arms");
-          GFTilePic( 350, 200, 5136);
-          color := 0;
-          if(skill >= CInt(cfg[5137]."skill"))
-            color := 900;
-            GFButtonIDC(120, 295, 210, 211, 1, 5137);
-          endif
-          GFTextLine( 60, 270, color, "platemail leggings");
-          GFTilePic(  70, 295, 5137);
-          color := 0;
-          if(skill >= CInt(cfg[5141]."skill"))
-            color := 900;
-            GFButtonIDC(260, 295, 210, 211, 1, 5141);
-          endif
-          GFTextLine(200, 270, color, "breastplate");
-          GFTilePic( 210, 295, 5141);
-          color := 0;
-          if(skill >= CInt(cfg[7172]."skill"))
-            color := 900;
-            GFButtonIDC(400, 295, 210, 211, 1, 7172);
-          endif
-          GFTextLine(340, 270, color, "female plate");
-          GFTilePic( 350, 295, 7172);
-          color := 0;
-       5: GFPage(5);        //Page 5 (Helmets)
-          if(skill >= CInt(cfg[5130]."skill"))
-            color := 900;
-            GFButtonIDC(110, 200, 210, 211, 1, 5130);
-          endif
-          GFTextLine( 65, 175, color, "helmet");
-          GFTilePic(  60, 200, 5130);
-          color := 0;
-          if(skill >= CInt(cfg[5132]."skill"))
-            color := 900;
-            GFButtonIDC(210, 200, 210, 211, 1, 5132);
-          endif
-          GFTextLine(160, 175, color, "bascinet");
-          GFTilePic( 160, 200, 5132);
-          color := 0;
-          if(skill >= CInt(cfg[5134]."skill"))
-            color := 900;
-            GFButtonIDC(310, 200, 210, 211, 1, 5134);
-          endif
-          GFTextLine(260, 175, color, "nose helm");
-          GFTilePic( 260, 200, 5134);
-          color := 0;
-          if(skill >= CInt(cfg[5128]."skill"))
-            color := 900;
-            GFButtonIDC(410, 200, 210, 211, 1, 5128);
-          endif
-          GFTextLine(360, 175, color, "close helmet");
-          GFTilePic( 360, 200, 5128);
-          color := 0;
-          if(skill >= CInt(cfg[5138]."skill"))
-            color := 900;
-            GFButtonIDC(110, 295, 210, 211, 1, 5138);
-          endif
-          GFTextLine( 65, 270, color, "plate helm");
-          GFTilePic(  60, 295, 5138);
-          color := 0;
-       6: GFPage(6);        //Page 6 (Shields)
-          if(skill >= CInt(cfg[7027]."skill"))
-            color := 900;
-            GFButtonIDC(110, 200, 210, 211, 1, 7027);
-          endif
-          GFTextLine( 65, 175, color, "buckler");
-          GFTilePic(  60, 200, 7027);
-          color := 0;
-          if(skill >= CInt(cfg[7026]."skill"))
-            color := 900;
-            GFButtonIDC(210, 200, 210, 211, 1, 7026);
-          endif
-          GFTextLine(160, 175, color, "bronze shield");
-          GFTilePic( 160, 200, 7026);
-          color := 0;
-          if(skill >= CInt(cfg[7035]."skill"))
-            color := 900;
-            GFButtonIDC(310, 200, 210, 211, 1, 7035);
-          endif
-          GFTextLine(260, 175, color, "metal shield");
-          GFTilePic( 260, 200, 7035);
-          color := 0;
-          if(skill >= CInt(cfg[7028]."skill"))
-            color := 900;
-            GFButtonIDC(410, 200, 210, 211, 1, 7032);
-          endif
-          GFTextLine(360, 175, color, "kite shield");
-          GFTilePic( 360, 200, 7032);
-          color := 0;
-          if(skill >= CInt(cfg[7032]."skill"))
-            color := 900;
-            GFButtonIDC(110, 295, 210, 211, 1, 7028);
-          endif
-          GFTextLine( 65, 270, color, "kite shield");
-          GFTilePic(  60, 295, 7028);
-          color := 0;
-          if(skill >= CInt(cfg[7030]."skill"))
-            color := 900;
-           GFButtonIDC(210, 295, 210, 211, 1, 7030);
-          endif
-          GFTextLine(160, 270, color, "heater shield");
-          GFTilePic( 160, 295, 7030);
-          color := 0;
-       7: GFPage(7);        //Page 7 (Bladed)
-          if(skill >= CInt(cfg[3921]."skill"))
-            color := 900;
-            GFButtonIDC(110, 200, 210, 211, 1, 3921);
-          endif
-          GFTextLine( 65, 175, color, "dagger");
-          GFTilePic(  60, 200, 3921);
-          color := 0;
-          if(skill >= CInt(cfg[5184]."skill"))
-            color := 900;
-            GFButtonIDC(210, 200, 210, 211, 1, 5184);
-          endif
-          GFTextLine(160, 175, color, "cutlass");
-          GFTilePic( 160, 200, 5185);
-          color := 0;
-          if(skill >= CInt(cfg[5118]."skill"))
-            color := 900;
-            GFButtonIDC(310, 200, 210, 211, 1, 5118);
-          endif
-          GFTextLine(260, 175, color, "katana");
-          GFTilePic( 260, 200, 5119);
-          color := 0;
-          if(skill >= CInt(cfg[5121]."skill"))
-            color := 900;
-            GFButtonIDC(410, 200, 210, 211, 1, 5121);
-          endif
-          GFTextLine(360, 175, color, "kryss");
-          GFTilePic( 360, 200, 5121);
-          color := 0;
-          if(skill >= CInt(cfg[5045]."skill"))
-            color := 900;
-            GFButtonIDC(110, 295, 210, 211, 1, 5045);
-          endif
-          GFTextLine( 65, 270, color, "scimitar");
-          GFTilePic(  60, 295, 5046);
-          color := 0;
-          if(skill >= CInt(cfg[3934]."skill"))
-            color := 900;
-            GFButtonIDC(210, 295, 210, 211, 1, 3934);
-          endif
-          GFTextLine(160, 270, color, "broadsword");
-          GFTilePic( 160, 295, 3934);
-          color := 0;
-          if(skill >= CInt(cfg[3936]."skill"))
-            color := 900;
-            GFButtonIDC(310, 295, 210, 211, 1, 3936);
-          endif
-          GFTextLine(260, 270, color, "longsword");
-          GFTilePic( 245, 295, 3937);
-          color := 0;
-          if(skill >= CInt(cfg[5049]."skill"))
-            color := 900;
-            GFButtonIDC(410, 295, 210, 211, 1, 5049);
-          endif
-          GFTextLine(360, 270, color, "viking sword");
-          GFTilePic( 360, 295, 5049);
-          color := 0;
-       8: GFPage(8);        //Page 8 (Axes)
-          if(skill >= CInt(cfg[3911]."skill"))
-            color := 900;
-            GFButtonIDC(110, 200, 210, 211, 1, 3911);
-          endif
-          GFTextLine( 65, 175, color, "battle axe");
-          GFTilePic(  60, 200, 3911);
-          color := 0;
-          if(skill >= CInt(cfg[3909]."skill"))
-            color := 900;
-            GFButtonIDC(260, 200, 210, 211, 1, 3909);
-          endif
-          GFTextLine(200, 175, color, "executioner's axe");
-          GFTilePic( 200, 200, 3909);
-          color := 0;
-          if(skill >= CInt(cfg[5186]."skill"))
-            color := 900;
-            GFButtonIDC(410, 200, 210, 211, 1, 5186);
-          endif
-          GFTextLine(360, 175, color, "two handed axe");
-          GFTilePic( 360, 200, 5187);
-          color := 0;
-          if(skill >= CInt(cfg[3915]."skill"))
-            color := 900;
-            GFButtonIDC(110, 295, 210, 211, 1, 3915);
-          endif
-          GFTextLine( 65, 270, color, "double axe");
-          GFTilePic(  60, 295, 3915);
-          color := 0;
-          if(skill >= CInt(cfg[3913]."skill"))
-            color := 900;
-            GFButtonIDC(210, 295, 210, 211, 1, 3913);
-          endif
-          GFTextLine(180, 270, color, "axe");
-          GFTilePic( 160, 295, 3913);
-          color := 0;
-          if(skill >= CInt(cfg[5039]."skill"))
-            color := 900;
-            GFButtonIDC(310, 295, 210, 211, 1, 5039);
-          endif
-          GFTextLine(260, 270, color, "war axe");
-          GFTilePic( 255, 295, 5040);
-          color := 0;
-          if(skill >= CInt(cfg[5114]."skill"))
-            color := 900;
-            GFButtonIDC(410, 295, 210, 211, 1, 5114);
-          endif
-          GFTextLine(360, 270, color, "large battle axe");
-          GFTilePic( 360, 295, 5115);
-          color := 0;
-       9: GFPage(9);        //Page 9 (Polearms)
-          if(skill >= CInt(cfg[5122]."skill"))
-            color := 900;
-            GFButtonIDC(110, 200, 210, 211, 1, 5122);
-          endif
-          GFTextLine( 65, 175, color, "short spear");
-          GFTilePic(  55, 200, 5123);
-          color := 0;
-          if(skill >= CInt(cfg[3939]."skill"))
-            color := 900;
-            GFButtonIDC(210, 200, 210, 211, 1, 3939);
-          endif
-          GFTextLine(160, 175, color, "spear");
-          GFTilePic( 105, 200, 3938);
-          color := 0;
-          if(skill >= CInt(cfg[5124]."skill"))
-            color := 900;
-            GFButtonIDC(310, 200, 210, 211, 1, 5124);
-          endif
-          GFTextLine(260, 175, color, "war fork");
-          GFTilePic( 260, 200, 5125);
-          color := 0;
-          if(skill >= CInt(cfg[3918]."skill"))
-            color := 900;
-            GFButtonIDC(410, 200, 210, 211, 1, 3918);
-          endif
-          GFTextLine(360, 175, color, "bardiche");
-          GFTilePic( 325, 200, 3917);
-          color := 0;
-          if(skill >= CInt(cfg[5182]."skill"))
-            color := 900;
-            GFButtonIDC(110, 295, 210, 211, 1, 5182);
-          endif
-          GFTextLine( 65, 270, color, "halberd");
-          GFTilePic(  10, 295, 5183);
-          color := 0;
-      10: GFPage(10);       //Page 10 (Bashing)
-          if(skill >= CInt(cfg[3932]."skill"))
-            color := 900;
-            GFButtonIDC(110, 200, 210, 211, 1, 3932);
-          endif
-          GFTextLine( 65, 175, color, "mace");
-          GFTilePic(  60, 200, 3932);
-          color := 0;
-          if(skill >= CInt(cfg[5178]."skill"))
-            color := 900;
-            GFButtonIDC(210, 200, 210, 211, 1, 5178);
-          endif
-          GFTextLine(160, 175, color, "maul");
-          GFTilePic( 160, 200, 5179);
-          color := 0;
-          if(skill >= CInt(cfg[5126]."skill"))
-            color := 900;
-            GFButtonIDC(310, 200, 210, 211, 1, 5126);
-          endif
-          GFTextLine(260, 175, color, "war mace");
-          GFTilePic( 260, 200, 5127);
-          color := 0;
-          if(skill >= CInt(cfg[5176]."skill"))
-            color := 900;
-            GFButtonIDC(410, 200, 210, 211, 1, 5176);
-          endif
-          GFTextLine(360, 175, color, "war hammer");
-          GFTilePic( 360, 200, 5176);
-          color := 0;
-          if(skill >= CInt(cfg[5180]."skill"))
-            color := 900;
-            GFButtonIDC(110, 295, 210, 211, 1, 5180);
-          endif
-          GFTextLine( 65, 270, color, "hammer pick");
-          GFTilePic(  60, 295, 5181);
-          color := 0;
-    endcase
-    num := num + 1;
-  endwhile
-  return;
-endfunction
+	EraseObjProperty(who, "IsMeditating");
+	EraseObjProperty(who, "HealTimer");
 
-function GFButtonIDC(x, y, release, press, close, retval)
-        var line := "button " + CStr(gfref.x + CInt(x)) + " " + CStr(gfref.y + CInt(y));
-        line := line + " " + CStr(CInt(release)) + " " + CStr(CInt(press)) + " ";
-        line := line + CStr(CInt(close)) + " 0 ";
-        line := line + CStr(CInt(retval));
-        gflayout.append( line );
-endfunction
+	var rinfo := sendCraftGump(who, "blacksmithy");
 
-function makeBlacksmithItems(who, what, amt, cont, hammer)
+	// OK was pressed, close it on out
+	if(rinfo == 0)
+		return 0;
+	endif
+
+	var the_objtype := rinfo[1];
+	var amt         := rinfo[2];
+	var repairit    := rinfo[3];
+	var resmeltit   := rinfo[4];
+
+	if(repairit)
+		repair_this(who, craft_skill);
+		return 0;
+	endif
+	if(resmeltit)
+		resmelt(who, craft_skill);
+		return 0;
+	endif
+
+	makeBlacksmithItems(who, the_objtype, amt, tool);
+
+endprogram
+
+function makeBlacksmithItems(who, what, amt, tool)
+
+  if(!what)
+    SendSysMessage(who, "Cancelled");
+    return;
+  endif
   var anvil_near := 0;
-  foreach item in ListItemsNearLocation(who.x, who.y, who.z, 3, who.realm)
+  foreach item in ListItemsNearLocation(who.x, who.y, who.z, 3)
     if((item.objtype == 0x0faf) || (item.objtype == 0x0fb0))
       anvil_near := 1;
       break;
@@ -541,225 +77,59 @@
     SendSysMessage(who, "You must be near an anvil to smith items.");
     return;
   endif
-  var tname, skil, material, pts, points, maxhp, itemname;
-  var nme, excmod, val, num, rint, word, theitem, holder;
-  SendSysMessage(who, "Select the ingots you wish to use.");
-  var use_on := Target(who);
-  if(!can_access(who, use_on))
+
+  // Metal is sent for the ResourceList entry type.
+  var itemchk := MaterialSelection(who, craft_skill, lower("Metal"));
+  if(!itemchk)
     return;
   endif
-  if(!Accessible(who, use_on) || (Distance(who, use_on) > 2))
-    SendSysMessage(who, "You cannot use that.");
-    return;
-  endif
-  var is_ingot := 0;
-  var ptmod := 0;
-  case(use_on.objtype)
-    0x6309: is_ingot := 1; ptmod := 0;
-        0x630a: is_ingot := 1; ptmod := 5;
-    0x630b: is_ingot := 1; ptmod := 5;
-    0x630c: is_ingot := 1; ptmod := 10;
-    0x630d: is_ingot := 1; ptmod := 10;
-    0x630e: is_ingot := 1; ptmod := 15;
-    0x630f: is_ingot := 1; ptmod := 15;
-    0x6310: is_ingot := 1; ptmod := 20;
-    0x6311: is_ingot := 1; ptmod := 25;
-  endcase
-  if(is_ingot == 0)
-    SendSysMessage(who, "You can only use that on ingots!");
-    return;
-  endif
-  if(use_on.movable == 0)
-    SendSysMessage(who, "You cannot smith that.");
-    return;
-  endif
-  if(!checkSkillForDifferentMetals(who, use_on))
-    SendSysMessage(who, "You have no chance to successfully work with that metal.");
-    return;
-  endif
-  if(!Accessible(who, use_on))
-    SendSysMessage(who, "You don't have any ingots!");
-    return;
-  endif
-  if(!ReserveItem(use_on))
-    SendSysMessage(who, "That item is already in use.");
-    return;
-  endif
-  if(!what)
-    SendSysMessage(who, "Targetting cancelled");
-    return;
-  endif
-  maxhp    := smith_cfg[what].maxhp;
-  itemname := smith_cfg[what].name;
-  material := CInt(smith_cfg[what].material);
-  skil     := CInt(smith_cfg[what].skill);
-  points   := CInt(smith_cfg[what].points) * 2;
-  var counter := 0;
-  var x := who.x;
-  var y := who.y;
-  var skchk := GetEffectiveSkill(who, SKILLID_BLACKSMITHY);
-  pts := getPoints(who, skil, pts);
-  excmod := CInt(GetEffectiveSkill(who, SKILLID_ARMSLORE) / 10) + 3;
-  var modpts := 0;
-  if(skchk > (skil - 20))
-    modpts := (skchk - skil);
-  endif
+  var use_on := itemchk[1];
+  var ptmod := itemchk[3];
+
+  var num, theitem;
+  var itemname := craft_config[what].name;
+  var material := Cint(craft_config[what].material);
+  var reqd := Cint(craft_config[what].skill);
+  var diff := Cint(craft_config[what].difficulty);
+  var pts  := Cint(craft_config[what].points);
+  pts      := CInt(pts + ptmod);
+  var counter := 0, x := who.x, y := who.y;
+
   while(counter < amt)
     if((who.x != x) || (who.y != y))
       SendSysMessage(who, "You stop smithing.");
       break;
     endif
-    if(!hammer)
+    if(!tool)
       break;
     endif
+    sleep(2);
     if(GetAmount(use_on) >= material)
-      PlaySoundEffect(who, SFX_ANVIL);
-      sleep(2);
-      PlaySoundEffect(who, SFX_ANVIL);
-      sleep(2);
-      PlaySoundEffect(who, SFX_ANVIL);
-      sleep(2);
-      pts := CInt(points + ptmod);
-      if(CheckSkill(who, SKILLID_BLACKSMITHY, skil, 0))
-        nme := "";
-        theitem := CreateItemInContainer(cont, what, 1);
-        if(theitem)
-          CheckToolWear(who, hammer, SKILLID_BLACKSMITHY);
-          if(!theitem.isa(POLCLASS_WEAPON))
-            case(use_on.objtype)
-              0x6309:   nme := ""             + itemname; theitem.color := 0x0;
-                  0x630a:   nme := "dull copper " + itemname; theitem.color := 0x8415;
-              0x630b:   nme := "shadow "      + itemname; theitem.color := 0x8455;
-              0x630c:   nme := "copper "      + itemname; theitem.color := 0x845e;
-              0x630d:   nme := "bronze "      + itemname; theitem.color := 0x86b2;
-              0x630e:   nme := "golden "      + itemname; theitem.color := 0x88a6;
-              0x630f:   nme := "agapite "     + itemname; theitem.color := 0x83ea;
-              0x6310:   nme := "verite "      + itemname; theitem.color := 0x889f;
-              0x6311:   nme := "valorite "    + itemname; theitem.color := 0x8539;
-            endcase
-          else
-            nme := itemname;
-          endif
-          if(!SubtractAmount(use_on, material))
-            DestroyItem(theitem);
-            return;
-          endif
-          AwardRawSkillPoints(who, SKILLID_BLACKSMITHY, pts);
-          rint := randomint(100);
-          if((excmod + modpts) >= rint)
-            theitem.quality := 1.2;
-            theitem.hp      := theitem.maxhp;
-            ExceptionalFameMod(who, skchk, skil, CInt(points / 2));
-            SendSysMessage(who, "You make an exceptional item and put it in your pack.");
-            if(GetEffectiveSkill(who, SKILLID_BLACKSMITHY) >= 99)
-              tname := "an exceptional " + nme + " [Crafted by " + who.name + "]";
-            else
-              tname := "an exceptional " + nme;
-            endif
-          else
-            rint := randomint(100);
-            holder := GetBaseMod(skchk, skil, (excmod - 3));
-            if(rint < holder)
-              SendSysMessage( who, "You create the item, but it's quality is below average." );
-              val := randomint(2) + 1;
-              case(val)
-                1: theitem.quality := 0.7;
-                2: theitem.quality := 0.8;
-                3: theitem.quality := 0.9;
-              endcase
-              theitem.hp := theitem.maxhp;
-            else
-              SendSysMessage( who, "You create the item and place it in your pack." );
-              theitem.quality := 1.0;
-              theitem.hp := theitem.maxhp;
-            endif
-            if((nme[1] == "a") || (nme[1] == "e") || (nme[1] == "i") || (nme[1] == "o") || (nme[1] == "u"))
-              word := "an ";
-            else
-              word := "a ";
-            endif
-            tname := "" + word + nme;
-          endif
-          SetName(theitem, tname);
+      if(CraftCheckSkill(who, craft_skill, diff, pts))
+        playCraftWork(who, SFX_ANVIL);
+        sleep(2);
+        theitem := CreateCraftItem(who, craft_skill, use_on, use_on.objtype, what, material, itemname, reqd);
+        if(theitem or theitem != 0)
+          CheckToolWear (who, tool, craft_skill);
         else
-          SendSysMessage(who, "Could not fit item in backpack. Aborting.");
-          break;
+          SubtractAmount(use_on, (material / 2));
+          SendSysMessage(who, "You failed to create the item, and some of your materials are lost.");
+          counter := counter + 1;
+          continue;
         endif
       else
-        var baseskill := GetBaseSkillBaseValue(who, SKILLID_BLACKSMITHY);
-        if(baseskill < 100)
-          pts := pts / 2;
-          AwardPoints( who, SKILLID_BLACKSMITHY, pts);
+        num := CInt(randomint(material)/2) + 1;
+        if(SubtractAmount(use_on, num))
+          SendSysMessage(who, "You lost some metal");
         endif
-        num := randomint(material) /2;
-        SubtractAmount(use_on, num);
-        SendSysMessage(who, "You destroy some ingots.");
       endif
     else
-      SendSysMessage(who, "You don't have enough ingots!");
-      return;
+      SendSysMessage(who, "You don't have the resources required to make that item.");
+      counter := 100;
+      break;
     endif
     counter := counter + 1;
   endwhile
-endfunction
+  return;
 
-function GetBaseMod(skill, diff, emod)
-  var holder := 0;
-  var max := diff + 20;
-  var min := diff - 20;
-  if(skill > max)
-    holder := 20;
-  elseif((skill <= max) and (skill >= min))
-    holder := 20 + CInt((max - skill) / 2);
-  else
-    holder :=  40;
-  endif
-  return CInt(holder - emod);
 endfunction
-
-function getPoints(who, diff, pts)
-  var skill := GetEffectiveSkill(who, SKILLID_BLACKSMITHY);
-  if(diff > 20)
-    diff := diff - 20;
-  else
-    diff := 1;
-  endif
-  if(skill > diff)
-    if((skill - diff) <= 5)
-      pts := pts;
-    elseif((skill - diff) <= 10)
-      pts := (pts * 3) / 4;
-    elseif((skill - diff) <= 15)
-      pts := pts / 2;
-    elseif((skill - diff) <= 20)
-      pts := pts / 4;
-    else
-      pts := 0;
-    endif
-  endif
-  return pts;
-endfunction
-
-function checkSkillForDifferentMetals(who, ingot)
-  case( ingot.objtype )
-    0x6309:   return(checkHisSkill(who,  0));
-        0x630a:   return(checkHisSkill(who, 65));
-    0x630b:   return(checkHisSkill(who, 70));
-    0x630c:   return(checkHisSkill(who, 75));
-    0x630d:   return(checkHisSkill(who, 80));
-    0x630e:   return(checkHisSkill(who, 85));
-    0x630f:   return(checkHisSkill(who, 90));
-    0x6310:   return(checkHisSkill(who, 95));
-    0x6311:   return(checkHisSkill(who, 99));
-    default:  SendSysMessage(who, "You can't forge that.");
-  endcase
-endfunction
-
-function checkHisSkill(who, skill)
-  var his_skill := GetEffectiveSkill(who, SKILLID_BLACKSMITHY);
-  if(his_skill >= skill)
-    return 1;
-  else
-    return 0;
-  endif
-endfunction

Added: trunk/096/pkg/skills/blacksmithy/tongs/tongsMethod.src
===================================================================
--- trunk/096/pkg/skills/blacksmithy/tongs/tongsMethod.src	2005-09-29 23:19:04 UTC (rev 315)
+++ trunk/096/pkg/skills/blacksmithy/tongs/tongsMethod.src	2005-09-29 23:45:05 UTC (rev 316)
@@ -0,0 +1,10 @@
+use uo;
+
+include ":crafting:method/toolWearMethod";
+
+program install()
+
+	print( "Installing Tongs MethodScript...." );
+	return 1;
+
+endprogram
\ No newline at end of file

Added: trunk/096/pkg/systems/crafting/include/craftGumps.inc
===================================================================
--- trunk/096/pkg/systems/crafting/include/craftGumps.inc	2005-09-29 23:19:04 UTC (rev 315)
+++ trunk/096/pkg/systems/crafting/include/craftGumps.inc	2005-09-29 23:45:05 UTC (rev 316)
@@ -0,0 +1,526 @@
+// //$Id$
+
+var craft_gumps := DFOpenDataFile(":crafting:CraftGumps", DF_CREATE);
+var menu_config := ReadConfigFile( ":crafting:config/craftConfig" );
+var arinfo   := array;
+var arcnt    := 61500;
+var craft_settings;
+var atc := 1;
+var PageNum := 1;
+
+
+// This function is the main backbone for building the Crafting Menu.
+function sendCraftGump(who, skill_name)
+
+	var menu_file    := menu_config[skill_name].MenuFile;
+	var skill_config := ReadConfigFile(menu_file);
+	craft_skill      := menu_config[skill_name].Attribute;
+
+	while( 1 )
+
+		craftL := craft_settings[skill_name].last;
+		rcolor := craft_settings[skill_name].retain;
+		makermark := craft_settings[skill_name].mark;
+
+		var craft_gump := Craft_IndexGump(who, skill_name);
+		if( !craft_gump )
+			exit;
+		endif
+	        var res := GFSendGump(who, craft_gump);
+
+		// Exit the menu, return 0 so crafting script knows it was cancled
+		if(res[0] == 1)
+			return 0;
+		endif
+
+		var the_objtype := res[0];
+
+		// Handle setting up of Objtype if they pressed "Last Item". Returns with
+		// an error if you haven't crafted anything with the skill yet.
+		if( res[61450] )
+			the_objtype := craftL;
+			if( !the_objtype || (TypeOf(the_objtype) == "Struct") )
+				SendSysMessage(who, "You haven't made anything yet.");
+				return 0;
+			endif
+		endif
+
+		// See if the Use Material Color button was pressed.
+		if(res[61452])
+			case(rcolor)
+			  1: craft_settings[skill_name].retain := 0;
+			     SetObjProperty(who, "Craft", craft_settings);
+			  default: craft_settings[skill_name].retain := 1;
+			     SetObjProperty(who, "Craft", craft_settings);
+			endcase
+			continue;
+		endif
+
+		// See if the Maker's Mark button was pressed.
+		if(res[61453])
+			case(makermark)
+			  1: craft_settings[skill_name].mark := 0;
+			     SetObjProperty(who, "Craft", craft_settings);
+			  default: craft_settings[skill_name].mark := 1;
+			     SetObjProperty(who, "Craft", craft_settings);
+			endcase
+			continue;
+		endif
+
+		// This decides if you pressed the Info button, if so, sends info gump
+		if( (res[0] >= 61500) && (res[0] <= 62000) )
+			the_objtype := arinfo[(res[0] - 61499)];
+			var infores := GFCraftInfoPage(who, the_objtype, skill_config);
+			case(infores)
+			  0: continue;
+			  default: the_objtype := infores;
+			endcase
+		endif
+
+		// Sets the objtype in the Last Item cprop. Redundant to ensure it sets.
+		// If a button return (the_objtype) is between 0xF000 and 0xFFFF it is NOT
+		// a craftable objtype anyway.
+		craft_settings[skill_name].last := the_objtype;
+		SetObjProperty(who, "Craft", craft_settings);
+
+
+		// If the second skill or main required to craft the item is higher than what the player has, skip
+		// now as they cannot craft it yet.
+		if( TypeOf(craft_config[Hex(the_objtype)].skillid) == "String" )
+			if((AP_GetSkill(who, craft_config[Hex(the_objtype)].skillid) < craft_config[Hex(the_objtype)].skill2)
+			    || (AP_GetSkill(who, craft_skill) < craft_config[Hex(the_objtype)].skill))
+				SendSysMessage(who, "You are not skilled enough to make that item.");
+				return 0;
+			endif
+		endif
+
+		// Sets the amount you had entered into an array to return to crafting
+		atc := Cint(SplitWords(res[1998])[2]);
+		if(!atc || CInt(atc) < 1)
+			atc := 1;
+		elseif(atc > CInt(menu_config[skill_name].MaxAmount))
+			SendSysMessage(who, "You can only make between 1 and " + menu_config[skill_name].MaxAmount + " at a time.");
+			return 0;
+		endif
+		craft_settings[skill_name].amount := atc;
+		SetObjProperty(who, "Craft", craft_settings);
+
+		// Build the return array and give it to crafting.
+		var minfo := array;
+		minfo.append(the_objtype);
+		minfo.append(atc);
+		minfo.append((res[61451]));
+		minfo.append((res[61454]));
+		return minfo;
+
+	endwhile
+
+endfunction
+
+
+function Craft_IndexGump(who, skill_name)
+
+	var menu_file    := menu_config[skill_name].MenuFile;
+	var skill_config := ReadConfigFile(menu_file);
+
+	// Craft Cprop is a dictionary storing the information for each crafting skill
+	craft_settings := GetObjProperty(who, "Craft");
+	if( TypeOf(craft_settings) != "Dictionary" )
+		craft_settings := cBaseCraftDict();
+		SetObjProperty(who, "Craft", craft_settings);
+	endif
+
+	// Now let's get the amount, based on the menu file) from the Cprop.
+	atc := craft_settings[skill_name].amount;
+	// If it == nothing, or is an error, set it to 1. Error should never occur, but, just in case.
+	if( !atc || TypeOf(atc) != "Integer" )
+		atc := 1;
+	endif
+	// Done here, it resets the last item crafted when using the menu.
+	rcolor := craft_settings[skill_name].retain;
+	makermark := craft_settings[skill_name].mark;
+
+	// Resets the array for objtypes within the menu. Used with
+	// The info page and it's buttons.
+	arinfo  := array;
+	// Button counter for the Info buttons for items. This way, we can seperate craft now buttons
+	// from the info buttons. Just remember to make sure any item's button # should NOT be within
+	// the 61500 to 62000 range. If you have 50 items, button range will be 61500 to 61550. So please
+	// take care with your items.
+	arcnt   := 61500;
+
+	var gump := GFCreateGump(50, 50);
+	GFResizePic(gump, 0, 0, 5054, 530, 437);
+	GFGumpPic(gump, 10, 10, 2624);
+	GFGumpPic(gump, 10, 205, 2624);
+	GFGumpPic(gump, 10, 225, 2624);
+	GFGumpPic(gump, 250, 10, 2624);
+	GFGumpPic(gump, 250, 205, 2624);
+	GFGumpPic(gump, 250, 225, 2624);
+	GFGumpPic(gump, 10, 33, 5055);
+	GFGumpPic(gump, 90, 33, 5055);
+	GFGumpPic(gump, 10, 43, 5061);
+	GFGumpPic(gump, 90, 43, 5061);
+	GFGumpPic(gump, 10, 285, 5055);
+	GFGumpPic(gump, 90, 285, 5055);
+	GFGumpPic(gump, 10, 330, 5055);
+	GFGumpPic(gump, 90, 330, 5055);
+	GFHTMLArea(gump, 10, 12, 510, 20, "<basefont color=#ffffff>"+CStr(GetConfigString(skill_config["Index"], "Title")));
+	GFHTMLArea(gump, 50, 405, 150, 18, "<basefont color=#ffffff>Exit");
+	GFAddButton(gump, 15, 402, 4017, 4019, GF_CLOSE_BTN, 1);
+
+	if( menu_config["Setup"].MakeLast == 1 )
+		GFHTMLArea(gump, 305, 405, 150, 18, "<basefont color=#ffffff>Make Last");
+		GFAddButton(gump, 270, 402, 4005, 4007, GF_CLOSE_BTN, 61450);
+	endif
+
+	GFHTMLArea(gump, 410, 405, 75, 20, "<basefont color=#ffffff>Amount");
+	GFGumpPic(gump, 455, 402, 2443);
+	atc := GFTextEntry(gump, 465, 405, 100, 30, 1152, atc);
+
+	GFHTMLArea(gump, 10, 302, 150, 20, "<basefont color=#ffffff><center>Notices</center>");
+	GFHTMLArea(gump, 10, 37, 200, 20, "<basefont color=#ffffff><center>Categories</center>");
+	GFHTMLArea(gump, 215, 37, 305, 20, "<basefont color=#ffffff><center>Selections</center>");
+
+	if( menu_config[skill_name].MakersMark == 1 )
+		if( makermark == 1 )
+			GFHTMLArea(gump, 305, 345, 150, 18, "<basefont color=#ffffff>Mark Item");
+		else
+			GFHTMLArea(gump, 305, 345, 150, 18, "<basefont color=#ffffff>*Do Not Mark");
+		endif
+		GFAddButton(gump, 270, 342, 4005, 4007, GF_CLOSE_BTN, 61453);
+	endif
+	if( menu_config[skill_name].RetainColor == 1 )
+		if( rcolor == 1 )
+			GFHTMLArea(gump, 305, 365, 150, 18, "<basefont color=#ffffff>Use Material Color");
+		else
+			GFHTMLArea(gump, 305, 365, 150, 18, "<basefont color=#ffffff>*Do Not Color");
+		endif
+		GFAddButton(gump, 270, 362, 4005, 4007, GF_CLOSE_BTN, 61452);
+	endif
+	if( menu_config[skill_name].Repair == 1 )
+		GFHTMLArea(gump, 305, 385, 150, 18, "<basefont color=#ffffff>Repair Item");
+		GFAddButton(gump, 270, 382, 4005, 4007, GF_CLOSE_BTN, 61451);
+	endif
+	if( menu_config["Setup"].Resmelt == 1 )
+		if( menu_config[skill_name].Smelt == 1 )
+			GFHTMLArea(gump, 50, 385, 150, 18, "<basefont color=#ffffff>Resmelt Item");
+			GFAddButton(gump, 15, 382, 4005, 4007, GF_CLOSE_BTN, 61454);
+		endif
+	endif
+
+
+	// This foreach builds all the pages for Categories and Selections
+	// IndexY = the Y position for lines in the Categories.
+	var IndexY := 63;
+	// Page Number counter to keep track of pages while building the gump
+	PageNum := 1;
+	foreach MenuName in GetConfigStringArray(skill_config["Index"], "Group")
+		// Add the Category to page 0 for background
+		GFPage(gump, "0");
+		GFAddButton(gump, 15, (IndexY-3), 4005, 4007, GF_PAGE_BTN, PageNum);
+		while (MenuName["_"])
+			MenuName["_"] := " ";
+			sleepms(1);
+		endwhile
+		GFHTMLArea(gump, 50, IndexY, 150, 18, ("<basefont color=#ffffff>"+MenuName));
+		// Now let's build the page for this Category
+		GFPage(gump, PageNum);
+		GFCraftNewPage(gump, skill_config, MenuName);
+		// Cycle all the variables up accordingly
+		if( PageNum >= 15 )
+			syslog("Crafting: Max Amount of menus exceeded! Reduce amount of Groups in " + menu_file);
+			SendSysMessage(who, "Error! Max Amount of Menus Exceeded. Please report to shard staff.");
+			return 0;
+		endif
+		IndexY := IndexY + 20;
+		PageNum := PageNum+1;
+	endforeach
+
+	return gump;
+
+endfunction
+
+// Used to draw each additional page to the overall gump
+function GFCraftNewPage(byref gump, skill_config, MenuName)
+
+	var ItemX    := 255;
+	var ButtonX  := 220;
+	var ItemY    := 63;
+	var ButtonX2 := 480;
+	foreach item in GetConfigStringArray(skill_config[MenuName], "Item")
+		var objtype   := GetObjTypeByName(item);
+		if(TypeOf(objtype) == "Struct")
+			continue;
+		endif
+		var itemdesc  := TruncatePlural(objtype);
+
+		if(TypeOf(itemdesc) == "Struct")
+			continue;
+		endif
+		itemdesc := lower(itemdesc);
+
+		if(ItemY >= 243)
+			ItemY := 63;
+			GFAddButton(gump, 370, 260, 4005, 4007, GF_PAGE_BTN, (PageNum+1));
+			GFHTMLArea(gump, 405, 263, 100, 18, "<basefont color=#ffffff>Next Page");
+			PageNum := PageNum+1;
+			GFPage(gump, PageNum);
+			GFAddButton(gump, 220, 260, 4005, 4007, GF_PAGE_BTN, (PageNum-1));
+			GFHTMLArea(gump, 255, 263, 100, 20, "<basefont color=#ffffff>Prevoius Page");
+		endif
+		GFHTMLArea(gump, ItemX, ItemY, 220, 18, ("<basefont color=#ffffff>"+itemdesc));
+		GFAddButton(gump, ButtonX, (ItemY-3), 4005, 4007, GF_CLOSE_BTN, objtype);
+		if( menu_config["Setup"].Info == 1 )
+			GFAddButton(gump, ButtonX2, (ItemY-3), 4011, 4012, GF_CLOSE_BTN, arcnt);
+			arinfo.append(objtype);
+			arcnt := arcnt + 1;
+		endif
+		ItemY := ItemY + 20;
+		sleepms(1);
+	endforeach
+
+	return 1;
+
+endfunction
+
+// Used for creating the Info Page gump for an item selected from the
+// crafting gump. This gump will display the information about item such
+// as skills required, their amt required, materials and their required
+// amount per peice, success chances and exceptional chances based on
+// skill the character has, show a picture of the item (Non-colored).
+// Also says if the item can be exceptionally made and if can have the
+// name of it's maker put on the item at GM skill. Can either return to
+// the Crafting gump, or create the item immediately from this page.
+function GFCraftInfoPage(who, objtype, skill_config)
+
+	objtype := Hex(objtype);
+	var i_config := ReadConfigFile(":*:itemdesc");
+	var thisitem := i_config[objtype];
+	if(TypeOf(thisitem) != "ConfigElemRef")
+		thisitem := i_config[("0x0"+(CStr(objtype) - "0x"))];
+	endif
+	var elem     := craft_config[objtype];
+	var graphic  := CInt(thisitem.graphic);
+	var itemdesc := TruncatePlural(objtype);
+	itemdesc := lower(itemdesc);
+
+	if(!graphic || TypeOf(graphic) == "Struct")
+		graphic := CInt(objtype);
+	endif
+
+	var tooltip := thisitem.tooltip;
+	if(TypeOf(tooltip) != "String")
+		tooltip := 0;
+	endif
+
+	// Set the variables for skill required levels
+	var skillreq  := elem.skill;
+	var diff      := elem.difficulty;
+	var skillreqb := elem.skill2;
+	if(!skillreqb || skillreqb.errortext)
+		skillreqb  := 0;
+	endif
+
+	// Set up skill 2 if one required
+	var aid_skill := elem.skillID;
+	// Get their xxx.x skill amount
+	var temp1 := CDbl(AP_GetSkill(who, craft_skill));
+	// Get their xxx.x skill amount of the secondary skill entry
+	var temp2 := CDbl(AP_GetSkill(who, craft_config[objtype].skillID));
+	// If there was no secondary skill in the cfg entry, set it to main skill
+	if(temp2 == error)
+		temp2 := temp1;
+	endif
+	// Figure the sickening odd Success Chance percentages.
+	var schance   := 0.0;
+	if((TypeOf(aid_skill) == "Integer") && (skillreqb != 0))
+		if(TypeOf(skillreqb) == "Double" or TypeOf(skillreqb) == "Integer")
+			// Although CraftCheckSkill() would return 0%, let's not run all that code
+			// since it is a given anyway.
+			if(skillreqb > temp2)
+				schance := "0%";
+			else
+				schance := CStr(CraftCheckSkill(who, craft_skill, diff, 0, 1))+"%";
+			endif
+		endif
+	else
+		if(skillreq > temp1)
+			schance := "0%";
+		else
+			schance := CStr(CraftCheckSkill(who, craft_skill, diff, 0, 1))+"%";
+		endif
+	endif
+	if(elem.placeholder == 1)
+		schance := "100%";
+	endif
+	if(TypeOf(aid_skill) != "String")
+		aid_skill := 0;
+	endif
+
+	// Get the material type required to craft the item.
+	var matname   := lower(elem.type);
+
+	// Get the materials amount required to craft the item
+	var material  := elem.material;
+
+	if((elem.material2 > 0) && (elem.material2 != error))
+		// Material 2 name
+		matname := matname + "\n" + elem.material2obj;
+		material := material + "\n" + elem.material2;
+	endif
+
+	// Below added for checking for parts. If parts are present, then create the part list
+	// instead.
+	var tmatname  := 0;
+	var tmpmat    := "";
+	if(TypeOf(elem.parts) == "String")
+		tmpmat := SplitWords(elem.parts);
+		matname  := "";
+		material := "";
+		if((len(tmpmat)/2) < 5)
+			for j := 1 to (len(tmpmat)/2)
+				tmatname := GetItemDescriptor(tmpmat[j]);
+				if(tmpmat[j+(len(tmpmat)/2)] > 1)
+					tmatname := tmatname.desc+"s";
+				else
+					tmatname := tmatname.desc;
+				endif
+				case(j)
+					1:
+					2:
+					3: matname := matname + tmatname + "\n";
+					4: matname := matname + tmatname;
+					default: matname := matname + tmatname + "\n";
+				endcase
+				material := material + (tmpmat[j+(len(tmpmat)/2)]) + "\n";
+			endfor
+		else
+			material := 0;
+			for j := 1 to (len(tmpmat)/2)
+				tmatname := GetItemDescriptor(tmpmat[j]);
+				if(tmpmat[j+(len(tmpmat)/2)] > 1)
+					tmatname := tmatname.desc+"s";
+				else
+					tmatname := tmatname.desc;
+				endif
+				if(j == (len(tmpmat)/2))
+					matname := matname + "& " + (tmpmat[j+(len(tmpmat)/2)]) + " " + tmatname + " required";
+				else
+					matname := matname + (tmpmat[j+(len(tmpmat)/2)]) + " " + tmatname + ", ";
+				endif
+			endfor
+		endif
+	endif
+
+	// Exception % chance wording.
+	var echance   := 0;
+	if(elem.Exceptional == 1)
+		echance := CStr(ExceptionalCraft(temp1, skillreq, temp2, 1))+"%";
+	endif
+
+	var gump := GFCreateGump(50, 50);
+	GFResizePic(gump, 0, 0, 5054, 530, 417);
+	GFGumpPic(gump, 10, 10, 2624);
+	GFGumpPic(gump, 10, 205, 2624);
+	GFGumpPic(gump, 250, 10, 2624);
+	GFGumpPic(gump, 250, 205, 2624);
+	GFGumpPic(gump, 10, 30, 5055);
+	GFGumpPic(gump, 90, 30, 5055);
+	GFResizePic(gump, 160, 120, 5054, 356, 13);
+	GFGumpPic(gump, 10, 210, 5055);
+	GFGumpPic(gump, 90, 210, 5055);
+	GFGumpPic(gump, 10, 290, 5055);
+	GFGumpPic(gump, 90, 290, 5055);
+	GFGumpPic(gump, 10, 370, 5055);
+	GFGumpPic(gump, 90, 370, 5055);
+	GFHTMLArea(gump, 10, 27, 150, 18, "<basefont color=#ffffff>ITEM");
+	GFHTMLArea(gump, 170, 177, 150, 18, "<basefont color=#ffffff>SKILLS");
+	GFHTMLArea(gump, 10, 207, 150, 18, "<basefont color=#ffffff>MATERIALS");
+	GFHTMLArea(gump, 10, 287, 150, 18, "<basefont color=#ffffff>OTHER");
+	GFAddButton(gump, 15, 387, 4014, 4016, GF_CLOSE_BTN, 1);
+	GFHTMLArea(gump, 50, 390, 150, 18, "<basefont color=#ffffff>BACK");
+	GFAddButton(gump, 270, 387, 4005, 4007, GF_CLOSE_BTN, CInt(objtype));
+	GFHTMLArea(gump, 305, 390, 150, 18, "<basefont color=#ffffff>MAKE NOW");
+	GFTilePic(gump, 20, 50, CInt(graphic));
+	GFHTMLArea(gump, 430, 132, 150, 18, ("<basefont color=#ffffff>" + skillreq));
+
+	// Tooltip info from itemdesc.cfg appended in.
+	if(tooltip != 0)
+		GFHTMLArea(gump, 170, 300, 300, 40, ("<basefont color=#ffffff>" + tooltip));
+	endif
+	// Set up the text for if the item can retain the color of material
+	if(craft_config[objtype].retain == 1)
+		GFTextLine(gump, 500, 220, 1153, "*");
+		GFTextLine(gump, 170, 335, 1153, "* The item retains the color of the material");
+	endif
+	if(craft_config[objtype].mark == 1)
+		GFTextLine(gump, 170, 355, 1153, "This item may hold its maker's mark");
+	endif
+	// Material Required
+	GFHTMLArea(gump, 170, 219, 300, 80, ("<basefont color=#ffffff>" + matname));
+	if(material != 0)
+		GFHTMLArea(gump, 430, 219, 10, 80, ("<basefont color=#ffffff>" + material));
+	endif
+	// Success Chance % text
+	GFTextLine(gump, 170, 80, 1153, "Success Chance:");
+	GFTextLine(gump, 430, 80, 1153, schance);
+	// Excpetional Chance % text
+	if(echance != 0)
+		GFTextLine(gump, 170, 100, 1153, "Exceptional Chance:");
+		GFTextLine(gump, 430, 100, 1153, echance);
+	endif
+	// Title of the menu
+	GFHTMLArea(gump, 10, 12, 510, 20, ("<basefont color=#ffffff>"+CStr(GetConfigString(skill_config["Index"], "Title"))));
+	// Item Name
+	GFHTMLArea(gump, 330, 40, 150, 20, ("<basefont color=#ffffff>"+itemdesc));
+	// Skill name
+	GFHTMLArea(gump, 170, 132, 150, 20, (craft_skill + " required"));
+
+	if((skillreqb > 0) && (skillreqb != error))
+		// Skill 2 name
+		GFHTMLArea(gump, 170, 152, 150, 20, (aid_skill + " required"));
+		GFHTMLArea(gump, 430, 152, 150, 20, skillreqb);
+	endif
+
+	var ifres := GFSendGump(who, gump);
+
+	if(ifres[0] == 1)
+		return 0;
+	else
+		return ifres[0];
+	endif
+
+endfunction
+
+
+function cBaseCraftDict()
+
+	var baseDict  := dictionary;
+	foreach skillentry in GetConfigStringArray(menu_config["Skills"], "Skill")
+		var temp := dictionary;
+		temp.+skill  := menu_config[skillentry].Name;
+		temp.+amount := CInt(menu_config["Setup"].DefaultAmount);
+		temp.+mark   := CInt(menu_config[skillentry].MakersMark);
+		temp.+retain := CInt(menu_config[skillentry].RetainColor);
+		temp.+last   := 0;
+		baseDict[temp.skill] := temp;
+	endforeach
+
+	return baseDict;
+
+endfunction
+
+function Craft_RetrieveGump(elem_name, prop_name)
+
+        var elem := DFFindElement(craft_gumps, elem_name);
+        return (elem.GetProp(prop_name));
+
+endfunction
+
+function Craft_SaveGump(elem_name, gump, prop_name)
+
+        var elem := DFFindElement(craft_gumps, elem_name, DF_CREATE);
+        return (elem.SetProp(prop_name, gump));
+
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/systems/crafting/include/crafting.inc
===================================================================
--- trunk/096/pkg/systems/crafting/include/crafting.inc	2005-09-29 23:19:04 UTC (rev 315)
+++ trunk/096/pkg/systems/crafting/include/crafting.inc	2005-09-29 23:45:05 UTC (rev 316)
@@ -0,0 +1,528 @@
+// //$Id$
+
+////////////////////////////////////////////////////////////////////////////////////////////////////
+//
+//  name:    Main Crafting Backbone (include file)
+//  version: 1.0b3
+//  author:  MuadDib
+//
+//  Purpose: Functions for creating crafting menus, info menus, item creation, resource selection,
+//           skill gain, etc.
+//
+//  Notes:   Acknowledgement to Valkyrie and Austin for coding ideas, based off a combination of a
+//           work-in-progress of her's, and mine both
+//
+//  Changes: Sept 5, 2005 -- TruncatePlural() replaced. New function by Austin.
+//                        -- Did some comment changes, removed unused variables and functions.
+//                        -- Removed requirement for an altered gumpUtil.inc. Can use standard
+//                           Distro version now.
+//           Sept 6, 2005 -- Info Gump changed in respect with Parts for Assembly items. For items
+//                           that use less than 5 parts, each item is listed seperately now. If
+//                           it contains 5 or more parts, it gives the old HTML method giving them
+//                           in a sentence form, for more custom and ingenious assembly items requiring
+//                           much more to craft (ewwwwww).
+//                        -- Material and Material Name areas both now use a HTML gump area for
+//                           showing their text for Assembly. Less code and less bandwidth.
+//                        -- Matierial and Material name for standard, and dual material, items are
+//                           now handled via the HTML gump method as parts. MUCH less code and bw
+//                           are the end result for this change also.
+//                        -- Added function playCraftWork(). This function is used to display a craft
+//                           skill's action animation, sound, the loops to do it in, and the delay
+//                           between loops. Sound is required, loops defaults to 0 if none sent, and
+//                           delay defaults to 2 seconds if none sent, Action defaults to 0 (none) if
+//                           none sent. All delays are in seconds.
+//           Sept 7, 2005 -- Optimized a TON of if/else and if/elseif statements by converting them
+//                           to case() statements where possible in the main menu's code and the info
+//                           screen code.
+//                        -- Altered most buttons out of the 1000 and 8000 range due to possible
+//                           objtype conflicts. Info buttons now use 61500 through 62000. Repair,
+//                           smelt, maker's mark, and retain color all converted also for this bug.
+//           Sept 8, 2005 -- Changed TruncatePlural() to return a struct{errortext} if it could
+//                           not find a "name" or "desc" entry for an itemdesc.cfg entry.
+//                        -- Changed DrawNewPage to skip items with invalid Objtype names given
+//                           in the Menu file, and with invalid objtype returned from TruncatePlural().
+//           Sep 14, 2005 -- Redid code to set Last Item cprop checks.
+//
+//
+//  To-Do:   1.) Break this down even more. Such as "crafting_menu.inc", "crafting_skill.inc",
+//               "crafting_util.inc", and so on.
+//           2.) Centralize Crafting Package. Move the skills.cfg information BACK into the
+//               central skills.cfg in /config. Directory layout as follows:
+//               pkg -> Crafting -> Include
+//                               -> Repair
+//                               -> Util    -> textcmd/admin
+//                   -> Skills   -> Alchemy     -> mortar
+//                               -> Blacksmithy -> smithing
+//                               -> Etc etc.    -> usescripts, etc etc.
+//           3.) Finish up repair contracts and tool wear.
+//           4.) Create some cusotmized crafting includes for inscription, etc that require it.
+//           5.) Create textcmds for editing the Menu and item configs, to add new items ingame.
+//           6.) Create MethodScript system for Toolwear!
+//           7.) UPGRADE to use the new gumps package by Austin for the newest distro.
+//           8.) UPGRADE all buttons (except ones to make the item, which uses the button's objtype)
+//               to use the 0xF000 - 0xFFFF range. That range is CORE RESERVED for objtypes, thus,
+//               should NEVER contain custom items added by shard admins. Therefore anything in that
+//               range should not be craftable and thus, not in these menus.
+//           9.) Remove all sound and animation function calls from crafting. Change it to use a
+//               single function called as "playCraftWork(anim, sound, loop:=0;, delay:=0;)"
+//
+// Strings to find and fix under new attributes:
+// AwardPoints(who, Cint(craft_config[objtype].skillID), 1);
+// AwardPoints(who, skillid, 1);
+//
+//
+////////////////////////////////////////////////////////////////////////////////////////////////////
+use polsys;
+use datafile;
+
+include "include/objtype";
+include ":crafting:include/craftGumps";
+include ":crafting:include/craftingSkill";
+include ":gumps:include/gumps";
+include ":gumps:include/gumps_ex";
+
+var craft_skill;
+var craftL    := 0;
+var rcolor    := 1;
+var makermark := 1;
+
+// Function used to target material and check ability for crafting.
+// Returns an array of ItemRef for the item and Objtype for the
+// resourceList of the material, and the Points bonus the resource
+// gives for using it. If chk is passed, it is used for the "cprop"
+// to check the item for. This is used for example, for boards that
+// was originally colored logs. The colored log objtype is stored
+// in the cprop, and is used to get it's "ResourceList" reference.
+function MaterialSelection(who, craft_skill, type, chk:=0)
+
+  SendSysMessage(who, "Select the "+lower(type)+" you would like to work with.");
+  var material := Target(who);
+  if(!material)
+    return 0;
+  endif
+  if(material.container.serial != who.backpack.serial)
+    SendSysMessage(who, "That is not in your backpack.");
+    return 0;
+  endif
+  if((!can_access(who, material)) || (!Accessible(who, material)) || (Distance(who, material) > 2)
+       || (material.movable == 0) || (!ReserveItem(material)))
+    SendSysMessage(who, "You cannot use that.");
+    return 0;
+  endif
+  var materialobjtype := 0;
+  if(chk)
+    if(GetObjProperty(material, chk))
+      materialobjtype := GetObjProperty(material, chk);
+    else
+      materialobjtype := material.objtype;
+    endif
+  else
+    materialobjtype := material.objtype;
+  endif
+  if(!canUseMaterial(who, materialobjtype, craft_skill))
+    SendSysMessage(who, "You are not skilled enough to make anything out of that.");
+    return 0;
+  endif
+  var rtype := lower(resource_config[materialobjtype].Type);
+  var materialchk := 0;
+  if(rtype == type)
+    materialchk := 1;
+  endif
+  if(materialchk == 0)
+    SendSysMessage(who, "That's not the proper material.");
+    return 0;
+  endif
+  if((material.objtype >= UOBJ_BOLT_START) && (material.objtype <= UOBJ_BOLT_END))
+    var totalcloth := material.amount * 50;
+    var cloth;
+    if(DestroyItem(material))
+      cloth := CreateItemInBackpack(who, 0x1767, totalcloth);
+      if(!cloth)
+        cloth := CreateItemAtLocation(who.x, who.y, who.z, 0x1767, totalcloth);
+      endif
+    endif
+    material := cloth;
+  endif
+
+  var retarray := array;
+  retarray.append(material);
+  retarray.append(materialobjtype);
+  retarray.append(resource_config[materialobjtype].Ptmod);
+  return retarray;
+
+endfunction
+
+// Used to create the actual item, handle it's coloring and marking of
+// exceptional naming of the item itself. Returns objref if success, 0 if fail.
+// All asked for items in the function line are able to be sent no matter the skill
+// the script is for with crafting. Use_onobjtype is there only for when you are
+// working with let's say boards for example, where they will have a cprop contianing
+// the objtype of the original logs they was made from. Else you simply pass
+// use_on.objtype for that. This will keep the customizability open for adding in
+// special resources for crafting here also.
+function CreateCraftItem(who, craft_skill, use_on, use_onobjtype, objtype, amount, itemname, reqd)
+
+ var theitem := CreateItemInBackpack(who, objtype, 1);
+ var elem    := FindConfigElem(resource_config, use_onobjtype);
+ if(theitem)
+   var nme := (resource_config[use_onobjtype].Name) + " " + itemname;
+   if(find(nme, "plain ", 1))
+     nme[find(nme, "plain ", 1),6] := "";
+   endif
+   if((rcolor == 1) && (craft_config[objtype].retain == 1))
+     if(resource_config[use_onobjtype].Color)
+       theitem.color := resource_config[use_onobjtype].Color;
+     else
+       theitem.color := use_on.color;
+     endif
+   endif
+   SetObjProperty(theitem, "material", use_onobjtype);
+   if(!SubtractAmount(use_on, amount))
+     SendSysMessage(who, "You don't have enough materials in your backpack!");
+     DestroyItem(theitem);
+     return -1;
+   endif
+   var myskill := CDbl(AP_GetSkill(who, craft_skill));
+   var aidskill := CDbl(AP_GetSkill(who, craft_config[objtype].skillID));
+   // This snags the Qualities of the resource to use on item creation.
+   // Format in the cfg for Quality is <dmg mod> <ar mod> <hp mod>.
+   // 0 for a mod means there isn't one. Space delimited in the cfg,
+   // this allows us to simply use SplitWords on it to make the array
+   // of each of the settings.
+   var temp := GetConfigString(elem, "Quality");
+   temp := SplitWords(temp);
+   var power  := GetConfigString(elem, "Power");
+   if( (TypeOf(power) != "String") )
+     power := 0;
+   endif
+   var wpower := GetConfigString(elem, "WPower");
+   if( (TypeOf(wpower) != "String") )
+     wpower := 0;
+   endif
+   if((craft_config[objtype].Exceptional == 1) && (ExceptionalCraft(myskill, reqd, aidskill)))
+//     AwardPoints(who, craft_skill, 1);
+     SetObjProperty(theitem, "Exceptional", 1);
+     if( TypeOf(craft_config[objtype].skillID) == "String" )
+//       AwardPoints(who, Cint(craft_config[objtype].skillID), 1);
+     endif
+     if((craft_config[objtype].Mark == 1))
+       if((makermark == 1) && (myskill >= 100))
+         nme := "an exceptional " + nme + " [Crafted by " + who.name + "]";
+       else
+         nme := "an exceptional " + nme;
+       endif
+     else
+       nme := "an exceptional " + nme;
+     endif
+     if(theitem.isA(POLCLASS_WEAPON))
+       theitem.dmg_mod := CInt(temp[1])+(RandomInt(4));
+     elseif(theitem.isA(POLCLASS_ARMOR))
+       theitem.ar_mod := CInt(temp[2])+(RandomInt(4));
+     endif
+     theitem.maxhp_mod := CInt(temp[3])+(RandomInt(11));
+     theitem.hp := theitem.maxhp;
+     SendSysMessage(who, "You create an exceptional quality item.");
+   else
+     var rint := randomint(AP_GetSkill(who, craft_skill));
+     if(reqd >= 23)
+       reqd := reqd - 20;
+     else
+       reqd := 3;
+     endif
+     if(rint < reqd)
+       SendSysMessage(who, "You were barely able to make this item.  Its quality is below average.");
+       if(theitem.isA(POLCLASS_WEAPON))
+         theitem.dmg_mod := CInt(temp[1])-(RandomInt(2)+1);
+       elseif(theitem.isA(POLCLASS_ARMOR))
+         theitem.ar_mod := CInt(temp[2])-(RandomInt(2)+1);
+       endif
+       theitem.maxhp_mod := CInt(temp[3])-(RandomInt(10)+1);
+       theitem.hp := theitem.maxhp;
+     else
+       SendSysMessage(who, "You create the item and put it in your backpack.");
+       if(theitem.isA(POLCLASS_WEAPON))
+         theitem.dmg_mod := CInt(temp[1]);
+       elseif(theitem.isA(POLCLASS_ARMOR))
+         theitem.ar_mod := CInt(temp[2]);
+       endif
+       theitem.maxhp_mod := CInt(temp[3]);
+       theitem.hp := theitem.maxhp;
+     endif
+     var word := "";
+     if((nme[1] == "a") || (nme[1] == "e") || (nme[1] == "i") || (nme[1] == "o") || (nme[1] == "u"))
+       word := "an ";
+     else
+       word := "a ";
+     endif
+     nme := "" + word + nme;
+     nme := nme - "plain ";
+   endif
+   SetName(theitem, nme);
+   if(theitem.isA(POLCLASS_CONTAINER))
+     SetObjProperty(theitem, "trappable", 1);
+   elseif(theitem.isA(POLCLASS_ITEM))
+     SetToolDurability(who, theitem, craft_skill);
+   endif
+//   if((power) && (theitem.isa(POLCLASS_ARMOR)))
+//     SetObjProperty(theitem, "power", power);
+//     theitem.equipscript := "equiparmor";
+//     theitem.unequipscript := "unequiparmor";
+//   elseif((wpower == "SILVER") && theitem.isA(POLCLASS_WEAPON))
+//     SetObjProperty(theitem, "SilverHit", 1);
+//   elseif(wpower && theitem.isA(POLCLASS_WEAPON))
+//     SetObjProperty(theitem, "wpower", power);
+//     theitem.equipscript := "equipweapon";
+//     theitem.unequipscript := "unequipweapon";
+//   endif
+ else
+   SendSysMessage(who, "You don't have enough room in your backpack!");
+   return 0;
+ endif
+
+ return theitem;
+
+endfunction
+
+// This function is used to create items that are marked "assemble" in the
+// crafting configs. Reads a prop from the cfg entry for a list of parts and
+// their amounts then checks the player's backpack for the items and works it.
+function CreateAssembly(who, tool, objtype, amt)
+
+  var skill := craft_config[objtype].skill, theitem;
+  var mainSkill := CInt(AP_GetSkill(who, craft_skill));
+  var modpts := 0;
+  if(mainSkill >= skill)
+    modpts := (mainSkill - (skill - 10));
+  endif
+  var diff := Cint(craft_config[objtype].difficulty);
+  var pts  := Cint(craft_config[objtype].points);
+  pts := pts + modpts;
+  var counter := 0, chk := 0;
+  // Get a list of the parts from the cfg entry. Format from config is listed in cfg
+  // header. Objtypes first, then amount for each objtype, in the same respective order.
+  // To match them together, we divid the length of the array by 2 then use that.
+  // Example : mod := len(array)/2;
+  // Example2: objtype := array[x]; amt := array[x+mod];
+  var partslist := SplitWords(craft_config[objtype].parts);
+  if(!partslist or partslist.errortext)
+    SendSysMessage(who, "This item does not require parts to be made! Contact a GM.");
+    return;
+  endif
+  var mod := len(partslist)/2;
+  var partcounter, partarray, checker;
+  var x := who.x, y := who.y;
+
+  while(counter < amt)
+    if((who.x != x) || (who.y != y))
+      break;
+    endif
+    if(chk == 1)
+      break;
+    endif
+    partarray := {};
+    checker := 0;
+    chk := 0;
+    // We use the Enumerate in a variable like this so as to work with it
+    // as an array. This way no need to enumerate every for/endfor cycle.
+    var blist := EnumerateItemsInContainer(who.backpack);
+    for i := 1 to mod
+      partcounter := 0;
+      foreach thing in blist
+        // If thing.objtype is the same as the objtype in the part list array position....
+        if(CInt(thing.objtype) == CInt(partslist[i]))
+          // If the amount is less than the counter for this item type, append it to the
+          // array for deletion later.
+          if(partcounter < CInt(partslist[i+mod]))
+            if(ReserveItem(thing))
+              partarray.append(thing);
+              partcounter := partcounter + 1;
+            endif
+          endif
+        endif
+      endforeach
+      // We add 2 to the checker var here once all required peices are added. We use
+      // this later to divide by 2. If divided by 2, it equals the mod variable, we know
+      // all the required peices are in their backpack. That works, because it is the same
+      // method for the partslist array which is an amount entry for each objtype entry.
+      // Sure, we could use 1, then divide the mod by 2 also for this to work. But I was
+      // in one of my moods ;)
+      if(partcounter == CInt(partslist[i+mod]))
+        checker := checker + 2;
+      endif
+    endfor
+    if((checker /2) != mod)
+      SendSysMessage(who, "You do not have the required materials to make that.");
+      return;
+    else
+      sleep(2);
+      if(CraftCheckSkill(who, mainSkill, diff, pts))
+        PlaySoundEffect(who, 0x23e);
+        sleep(2);
+        foreach thing in partarray
+          if(!DestroyItem(thing))
+            SendSysMessage(who, "You do not have the ready materials to make that.");
+            return;
+          endif
+        endforeach
+        theitem := CreateItemInBackpack(who, objtype, 1);
+        if(!theitem)
+          SendSysMessage(who, "You don't have enough room in your backpack!");
+          return 0;
+        endif
+        CheckToolWear (who, tool, mainSkill);
+        theitem.movable := 1;
+        SendSysMessage(who, "You create the item and put it in your backpack.");
+      endif
+    endif
+    if(theitem.isA(POLCLASS_CONTAINER))
+      SetObjProperty(theitem, "trappable", 1);
+    endif
+    counter := counter + 1;
+  endwhile
+
+endfunction
+
+//
+//  TruncatePlural()
+//
+//  * Returns the name for the item of the objtype passed.
+//
+function TruncatePlural(obj_type, add_S := 0)
+        obj_type := CInt(obj_type);
+
+        var config := ReadConfigFile(":*:itemdesc");
+        config := config[obj_type];
+
+        var name;
+        if (config.desc)
+                name := config.desc;
+        elseif (config.name)
+                name := config.name;
+        else
+                return error{"errortext":="Invalid Objtype : " + hex(obj_type) + "."};
+        endif
+
+        if ( !name["%"] )
+                if ( add_S == 0 )
+                        return name;
+                endif
+                if ( name[len(name)] in {"s"} )
+                        return name;
+                elseif ( name[len(name)] in {"h","j","x","z"} )
+                        return name + "es";
+                endif
+                return name + "s";
+        endif
+
+        // Will deal with:
+        //
+        //      Bread Stick%s
+        //      Bread Loa%ves/f%
+        //      Lump%s% of Coal
+        //      Loa%ves/f% of Bread
+        //
+        var first := find(name, "%", 1);
+        var slash := find(name, "/", first);
+        var second := find(name, "%", first + 1);
+        if ( slash && !second )
+                // Force-append a % if a '/' exists!
+                name := name + "%";
+                second := len(name);
+        elseif ( !slash )
+                slash := second;
+        endif
+
+        // wwwww%xx[/yy]%[zzzzz]
+        // 12345678     9 01234
+        // 12345678 901 2 34567
+
+        var s_plur := name[first+1, slash-(first+1)];
+        var s_sing := "";
+        if ( slash != first )
+                s_sing := name[slash+1, second-(slash+1)];
+        endif
+
+        var s_first := name[1, first-1];
+        var s_middle := s_plur;
+        var s_last := "";
+        if ( len(name) > second )
+                s_last := name[second+1, len(name)-second];
+        endif
+
+        if ( add_S == 0 )
+                s_middle := s_sing;
+        endif
+
+        if ( !s_first )
+                s_first := "";
+        endif
+        if ( !s_middle )
+                s_middle := "";
+        endif
+        if ( !s_last )
+                s_last := "";
+        endif
+        return s_first + s_middle + s_last;
+
+endfunction
+
+
+// Used to check the skill of the character vs the
+// the skill of the resource_config (resources config) to
+// see if they can work with the material.
+function canUseMaterial(who, use_on, craft_skill)
+
+  if( AP_GetSkill(who, craft_skill) >= resource_config[use_on].Skill )
+    return 1;
+  else
+    return 0;
+  endif
+
+endfunction
+
+// This function is used for those who have items from objtype 0 to 16383 the same
+// as the items in the tiledata. It will convert the objtype to the correct Cliloc
+// ID for it's name. Can be used in menu scripts such as crafting, etc. Just remember
+// to pass the objtype as CInt(objtype) so it converts the hex to Integer.
+// NOTE: Clilocs was implemented in uh, client 3.x+ I believe.
+// 1020000 - First tiledata name entry
+// 1036383 - Last tiledata name entry
+// **** OLD AND OBSOLETE. NO LONGER USING CLILOCS IN THIS CRAFTING. LEFT
+// **** IN FOR REFERENCE AND KNOWLEDGE
+function ClilocObjtype(objtype)
+
+  return -1;
+  if((objtype >= 0) && (objtype <= 16383) && objtype != error)
+    return CInt(objtype)+1020000;
+  else
+    return -1;
+  endif
+
+endfunction
+
+
+// This function is used to display a craft skill's action,
+// sound, the loops to do it in, and the delay between loops.
+// Sound is required, loops defaults to 0 if none sent, and delay
+// defaults to 2 seconds if none sent, Action defaults to 0
+// (none) if none sent. Who is who the info is to be sent to.
+// All delays are in seconds.
+function playCraftWork(who, craftSound, loops:=0, delay:=2, craftAction:=0)
+
+
+  if(loops)
+    for i := 1 to loops
+      if(craftAction)
+        PerformAction( who, craftAction );
+      endif
+      PlaySoundEffect(who, craftSound);
+      sleep(delay);
+    endfor
+  else
+    PlaySoundEffect(who, craftSound);
+    sleep(delay);
+  endif
+
+  return;
+
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/systems/crafting/include/craftingRepair.inc
===================================================================
--- trunk/096/pkg/systems/crafting/include/craftingRepair.inc	2005-09-29 23:19:04 UTC (rev 315)
+++ trunk/096/pkg/systems/crafting/include/craftingRepair.inc	2005-09-29 23:45:05 UTC (rev 316)
@@ -0,0 +1,350 @@
+// //$Id$
+
+////////////////////////////////////////////////////////////////////////////////////////////////////
+//
+//  name:    repair.inc
+//  version: 2.0
+//  author:  MuadDib
+//
+//  Purpose: Contains all the central Repair functions involving repairing items, using repair
+//           deeds, etc.
+//
+//  Changes: Sept 14, 2005 - Updated repair_item() for swing counter (new crafting ready)
+//                         - Added CreateRepairDeed() Function with support for the following skills:
+//                           Smithy, Bowcraft, Carpenter, Tailor (new crafting ready)
+//                         - Moved repair_this() function to the include (new crafting ready)
+//                         - Moved s_weapon_armor() to the include (new crafting ready)
+//                         - Moved resmelt() to include (New crafting ready)
+//
+////////////////////////////////////////////////////////////////////////////////////////////////////
+
+include "include/sound";
+
+function repair_item(character, what, craft_skill )
+  var maxhp;
+  maxhp := what.maxhp;
+  maxhp := cint(maxhp * what.quality);
+  var thehp := what.hp;
+  var damaged := maxhp - thehp;
+  var hisskill := AP_GetSkill(character, craft_skill);
+  var damageamount := 0.0;
+  damageamount := (125 -  hisskill)/3000.0;
+  if(what.hp == what.maxhp)
+    SendSysMessage(character, "That item is not damaged.");
+    return;
+  endif
+  if((what.hp <= 0) || (what.quality <= 0.1) || (!what.quality))
+    SendSysMessage(character, "The brittle material breaks when you handle it");
+    DestroyItem(what);
+    return;
+  endif
+  if(what.quality <= damageamount)
+    SendSysMessage(character, "The brittle material breaks when you handle it");
+    DestroyItem(what);
+    return;
+  endif
+  what.quality := what.quality - damageamount;
+  if((what.hp <= 0) || (what.quality <= 0.1) || (!what.quality))
+    SendSysMessage(character, "The brittle material breaks when you handle it");
+    DestroyItem(what);
+    return;
+  endif
+  if (SkillCheck(character, craft_skill, cint(damaged / 3), 0))
+    var repaired_amount := cint( ((randomint(hisskill) + 1))/2);
+    if (damaged == 1)
+      repaired_amount := 1;
+    endif
+    if (thehp + repaired_amount > what.maxhp)
+      what.hp := what.maxhp;
+      EraseObjProperty(what, "swings");
+      SendSysMessage(character, "You  repair the item completely");
+    else
+      what.hp := thehp + repaired_amount;
+      SendSysMessage(character, "You successfully repair some of the damage");
+    endif
+    if ((what.hp <= 0) || (what.quality <= 0.1) || (!what.quality))
+      SendSysMessage(character, "The brittle material breaks when you handle it");
+      DestroyItem(what);
+      return;
+    endif
+  else
+    var damage_amount := randomint(10);
+    if (thehp <= damage_amount)
+      DestroyItem(what);
+      SendSysMessage(character, "You fail and destroy the item");
+    endif
+    thehp := thehp - damage_amount;
+    what.hp := thehp;
+    if(randomint(2) == 1)
+      what.quality := what.quality - (damaged/100);
+    endif
+    if(thehp <= 0)
+      DestroyItem(what);
+      SendSysMessage(character, "You fail and destroy the item");
+    else
+      SendSysMessage(character, "You fail and damage the item");
+    endif
+    if ((what.hp <= 0) || (what.quality <= 0.1) || (!what.quality))
+      SendSysMessage(character, "The brittle material breaks when you handle it");
+      DestroyItem(what);
+      return;
+    endif
+  endif
+endfunction
+
+function CreateRepairDeed(who, scroll, craft_skill)
+
+  var type, title, color;
+  case(CInt(craft_skill))
+     ATTRIBUTE_BLACKSMITHY: 		type := "Blacksmith"; color := CInt(2107);
+     ATTRIBUTE_BOWCRAP_T_FLETCHING: 	type := "Bowyer"; color := CInt(2116);
+     ATTRIBUTE_CARPENTRY: 		type := "Carpenter"; color := CInt(2113);
+     ATTRIBUTE_TAILORING: 		type := "Tailor"; color := CInt(2128);
+  endcase
+  var ramt := AP_GetSkill(who, craft_skill);
+  if(ramt < 50)
+    SendSysMessage(who, "You must be at least apprentice level to create a repair service contract.");
+    return;
+  endif
+  if(ramt < 60 )
+    title := "A repair service contract from an Apprentice " + type;
+  elseif(ramt < 70 )
+    title := "A repair service contract from a Journeyman " + type;
+  elseif(ramt < 80 )
+    title := "A repair service contract from an Expert " + type;
+  elseif(ramt < 90 )
+    title := "A repair service contract from an Adept " + type;
+  elseif(ramt < 100 )
+    title := "A repair service contract from a Master " + type;
+  elseif(ramt < 110 )
+    title := "A repair service contract from a Grandmaster " + type;
+  elseif(ramt < 120 )
+    title := "A repair service contract from an Elder " + type;
+  elseif(ramt < 130 )
+    title := "A repair service contract from a Legendary " + type;
+  endif
+  type := lower(type);
+  var ret := GetItemDescriptor(0xee09);
+  ret.Color := color;
+  ret.CProps.insert("type", type);
+  ret.CProps.insert("skillid", craft_skill);
+  ret.CProps.insert("ramt", ramt);
+  var theitem := CreateItemInBackpack(who, ret, 1);
+  if(theitem)
+    SubtractAmount(scroll, 1);
+  endif
+  SetName(theitem, title);
+  return;
+
+endfunction
+
+function repair_this(who, craft_skill := ATTRIBUTE_BLACKSMITHY)
+  SendSysMessage(who, "Select item to repair.");
+  var use_on := Target(who);
+  if(!can_access(who, use_on))
+    return;
+  endif
+  if(use_on.movable == 0)
+    SendSysMessage(who, "You cannot repair that.");
+    return;
+  endif
+  if((!Accessible(who, use_on)) or (distance(who, use_on) > 2))
+    SendSysMessage(who, "You cannot reach that.");
+    return;
+  endif
+  if(CInt(use_on.objtype) == CInt(0xe34))
+    case(CInt(craft_skill))
+       ATTRIBUTE_BLACKSMITHY:            CreateRepairDeed(who, use_on, craft_skill);
+       ATTRIBUTE_BOWCRAP_T_FLETCHING:    CreateRepairDeed(who, use_on, craft_skill);
+       ATTRIBUTE_CARPENTRY:   		 CreateRepairDeed(who, use_on, craft_skill);
+       ATTRIBUTE_TAILORING:   		 CreateRepairDeed(who, use_on, craft_skill);
+    endcase
+    return;
+  endif
+  var forge := 0;
+  case(CInt(craft_skill))
+     ATTRIBUTE_BLACKSMITHY: forge := 1;
+  endcase
+  if(!forge)
+    if(is_weapon_armor(use_on.objtype))
+      repair_item( who, use_on, craft_skill);
+    else
+      SendSysMessage(who, "You cannot repair that.");
+    endif
+  else
+    if(is_weapon_armor(use_on.objtype))
+      var near_items := ListItemsNearLocation(who.x, who.y, who.z,3);
+      foreach item in near_items
+        if ((item.objtype == UOBJ_ANVIL1) || (item.objtype == UOBJ_ANVIL2))
+          repair_item( who, use_on, craft_skill);
+          return;
+        endif
+      endforeach
+      SendSysMessage( who, "You must be near an anvil to repair items!" );
+      return;
+    else
+      SendSysMessage(who, "You cannot repair that");
+    endif
+  endif
+  return;
+endfunction
+
+function is_weapon_armor(what)
+  var combatcfg := ReadConfigFile(":combat:itemdesc");
+  var elem := FindConfigElem(combatcfg, what);
+  var repairable := GetConfigInt(elem, "repairable");
+  if (repairable == 1)
+    return 1;
+  else
+    return 0;
+  endif
+endfunction
+
+function resmelt(who, the_attribute)
+
+	var near_items := ListItemsNearLocation(who.x, who.y, who.z, 3);
+	var forge_near := 0;
+	foreach forge in near_items
+		if((forge.objtype == 0xfb1) || ((forge.objtype >= 0x197a) && (forge.objtype <= 0x19a9)))
+			forge_near := 1;
+			break;
+		endif
+	endforeach
+	if(forge_near == 0)
+		SendSysMessage(who, "You must be near a forge.");
+		return 0;
+	endif
+
+	SendSysMessage(who, "Select the item you wish to melt.");
+	var use_on := Target(who, TGTOPT_CHECK_LOS);
+	if(!use_on || !can_access(who, use_on))
+		return 0;
+	endif
+	if(use_on.container.serial != who.backpack.serial)
+		SendSysMessage(who, "That is not in your backpack.");
+		return 0;
+	endif
+	if(!Accessible(who, use_on) || !ReserveItem( use_on ))
+		SendSysMessage(who, "You cannot use that.");
+		return 0;
+	endif
+	if(use_on.movable == 0)
+		SendSysMessage(who, "You cannot use that while it is locked down.");
+		return 0;
+	endif
+	if(use_on in ListEquippedItems(who))
+		SendSysMessage(who, "You cannot use that.");
+		return 0;
+	endif
+
+	var cfgarray := GetConfigStringKeys(resource_config);
+	var ingot := -1;
+	if(use_on.isA(POLCLASS_CONTAINER))
+		var contitems := EnumerateItemsInContainer(use_on);
+		var skill, amt;
+		var loop_counter := 3;
+		foreach thing in contitems
+			loop_counter := loop_counter + 1;
+			if( loop_counter == 4 )
+				SendSysMessage(who, "Smelting items in container......");
+				loop_counter := 0;
+			endif
+			if(craft_config[thing.objtype])
+				skill := craft_config[thing.objtype].skill;
+				amt := CInt(craft_config[thing.objtype].material);
+				if((!skill) || (!amt))
+					return 0;
+				endif
+				skill := CInt(skill/2);
+				if(skill < 5)
+					skill := 5;
+				endif
+				amt := CInt((amt * AP_GetSkill(who, the_attribute) * 75 ) / 10000);
+				if(amt < 1)
+					amt := 1;
+				endif
+				ingot := -1;
+				var mattype := CInt(GetObjProperty(use_on, "material"));
+				if(mattype > 0)
+					if(mattype != error)
+						ingot := mattype;
+					endif
+				endif
+				if(ingot == -1)
+					foreach entry in cfgarray
+						if(lower(resource_config[entry].Type) == "metal")
+							if(CInt(resource_config[entry].Color) == CInt(thing.color))
+								ingot := entry;
+							endif
+						endif
+					endforeach
+				endif
+				if(ingot == -1)
+					SendSysMessage(who, "You have no idea how to smelt this strange ore!");
+					return 0;
+				endif
+				PlaySoundEffect(who, 0x2c);
+				sleep(1);
+				PlaySoundEffect(who, 0x22);
+				if(DestroyItem(thing))
+					if(SkillCheck(who, the_attribute, skill, 10))
+						CreateItemInContainer(who.backpack, ingot, amt);
+					else
+						SendSysMessage(who, "You destroy the item.");
+					endif
+				endif
+			endif
+			sleepms(500);
+		endforeach
+	else
+		if(!craft_config[use_on.objtype])
+			return 0;
+		endif
+		ingot := -1;
+		var skill := craft_config[use_on.objtype].skill;
+		var amt := CInt(craft_config[use_on.objtype].material);
+		if((!skill) || (!amt))
+			return 0;
+		endif
+		skill := CInt(skill/2);
+		if(skill < 5)
+			skill := 5;
+		endif
+		amt := CInt((amt * AP_GetSkill(who, the_attribute) * 75 ) / 10000);
+		if(amt < 1)
+			amt := 1;
+		endif
+		var mattype := CInt(GetObjProperty(use_on, "material"));
+		if(mattype > 0)
+			if(mattype != error)
+				ingot := mattype;
+			endif
+		endif
+		if(ingot == -1)
+			foreach entry in cfgarray
+				if(lower(resource_config[entry].Type) == "metal")
+					if(CInt(resource_config[entry].Color) == CInt(use_on.color))
+						ingot := entry;
+					endif
+				endif
+			endforeach
+		endif
+		if(ingot == -1)
+			SendSysMessage(who, "You have no idea how to smelt this strange ore!");
+			return 0;
+		endif
+		PlaySoundEffect(who, 0x2c);
+		sleep(1);
+		if( DestroyItem(use_on) )
+			PlaySoundEffect(who, 0x22);
+			if(SkillCheck(who, the_attribute, skill, 10))
+				CreateItemInContainer(who.backpack, ingot, amt);
+			else
+				SendSysMessage(who, "You destroy the item.");
+			endif
+		else
+			SendSysMessage(who, "Couldn't destroy "+ use_on.name);
+		endif
+	endif
+
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/systems/crafting/include/craftingSkill.inc
===================================================================
--- trunk/096/pkg/systems/crafting/include/craftingSkill.inc	2005-09-29 23:19:04 UTC (rev 315)
+++ trunk/096/pkg/systems/crafting/include/craftingSkill.inc	2005-09-29 23:45:05 UTC (rev 316)
@@ -0,0 +1,104 @@
+// //$Id$
+
+// This is a modified version of the ShilCheckSkill export. The purpose
+// of this function is to mimic the OSI % chance system crafting uses.
+function CraftCheckSkill(who, craft_skill, difficulty, points, report:=0)
+
+  difficulty := CDbl(difficulty);
+  points := CDbl(points);
+  if(difficulty == error)
+    return 0;
+  elseif(difficulty == 0.0)
+    return 1;
+  endif
+  var chance;
+  var GainCap := 1200;
+  // I'm Lazy. Change this later.
+  var effective := CDbl(AP_GetSkill(who, craft_skill));
+  var hunger  := CInt(GetObjProperty(who, "hunger"));
+  if(!hunger || hunger.errortext)
+    hunger := 2;
+  endif
+  case(hunger)
+     0: effective := (effective - 10.1); points := (points * 0.95);
+     1: effective := (effective + 20.1); points := (points * 1.05);
+     5:
+     6: effective := (effective - 15.1); points := (points * 0.95);
+     7:
+     8: effective := (effective - 20.1); points := (points * 0.97);
+     9:
+    10: effective := (effective - 40.1); points := (points * 0.95);
+  endcase
+  if(effective < 0)
+    effective := 0.0;
+  endif
+  chance := (effective - difficulty) * 2.0 * 10.0;
+  var GainCheck := chance;
+  if(chance < 0)
+    chance := 0;
+  elseif(chance > 1000)
+    chance := 1000;
+  endif
+  if(report)
+    return Cdbl(chance/10.0);
+  endif
+  var temp_chance;
+  temp_chance := (effective - difficulty) * 2.5 + 500;
+  if(temp_chance < 0)
+    temp_chance := 0;
+  elseif(temp_chance > 1000)
+    temp_chance := 1000;
+  endif
+  if(points != 0)
+    points  := points * ((1000-temp_chance) / 1000);
+  endif
+  if(GainCheck >= GainCap)
+    points := 0;
+  endif
+  if(RandomInt(1000) < chance)
+    if(points > 0)
+//      AwardPoints(who, craft_skill, points);
+    endif
+    return 1;
+  else
+    if(effective < 10)
+      if(points > 0)
+//        AwardPoints(who, craft_skill, points);
+      endif
+    endif
+    return 0;
+  endif
+endfunction
+
+// This is a modified version of the CraftCheckSkill. The purpose
+// of this function is to mimic the OSI % chance system exceptional.
+// This system is, .2% chance per .1 skill above the required skill (+30)
+// to craft the item as exceptional. Aidskill has been added to help
+// add a custom method for POL on this. Aidskills would be either
+// arms lore (as in with blacksmithy), or otherwise it is the
+// Secondary skill required to craft the item. See the config files
+// In the crafting pkgs for their layouts and the defining of them.
+function ExceptionalCraft(skill, reqd, aidskill:=0, report:=0);
+
+  if(!aidskill or aidskill.errortext)
+    aidskill := skill;
+  endif
+  skill := CDbl(skill);
+  reqd := CDbl(reqd) + 30.0;
+  var excmod := skill + (aidskill/3.3333333333333333333333333333333);
+  var chance := (excmod - reqd) * 2.0 * 10.0;
+  if(chance < 0)
+    chance := 0;
+  elseif(chance > 1000)
+    chance := 1000;
+  endif
+  if(report)
+    return Cdbl(chance/10.0);
+  endif
+  if(RandomInt(1000) < chance)
+    return 1;
+  else
+    return 0;
+  endif
+
+endfunction
\ No newline at end of file

Added: trunk/096/pkg/systems/crafting/include/toolWear.inc
===================================================================
--- trunk/096/pkg/systems/crafting/include/toolWear.inc	2005-09-29 23:19:04 UTC (rev 315)
+++ trunk/096/pkg/systems/crafting/include/toolWear.inc	2005-09-29 23:45:05 UTC (rev 316)
@@ -0,0 +1,71 @@
+// //$Id$
+
+function CheckToolWear (who, tool, craft_skill)
+  var swings := GetObjProperty(tool,"swings");
+  if(!swings)
+    var mods := GetObjProperty(tool, "durability");
+    var bonus := 0;
+    case(mods)
+      "durable":        bonus := 10;
+      "substantial":    bonus := 20;
+      "massive":        bonus := 30;
+      "fortified":      bonus := 40;
+      "indestructable": bonus := 50;
+    endcase
+    swings := Cint(50 * tool.quality) + bonus;
+    SetObjProperty(tool,"swings", swings);
+  endif
+  if(swings <= 0)
+    DestroyItem(tool);
+    SendSysMessage(who,"Your tool broke.");
+  else
+    var skill := AP_GetSkill(who, craft_skill);
+    if(skill > 80)
+      skill := 80;
+    elseif(skill < 20)
+      skill := 20;
+    endif
+    if((RandomInt(100)+1) > skill)
+      if(tool.isa(POLCLASS_WEAPON))
+        if(tool.hp > 1)
+          SetObjProperty(tool,"swings", (swings - 1));
+          tool.hp := tool.hp - 1;
+        elseif((tool.hp > tool.maxhp) or (tool.hp == 1))
+          SendSysMessage(who,"Your tool broke.");
+          DestroyItem(tool);
+        endif
+      else
+        SetObjProperty(tool,"swings", (swings - 1));
+      endif
+    endif
+  endif
+endfunction
+
+function SetToolDurability(who, tool, craft_skill)
+
+  var toolfile := ReadConfigFile(":*:itemdesc");
+  var toolscript := toolfile[tool.objtype].Script;
+
+  if(!toolscript.errortext)
+    if(!tool.isA(POLCLASS_CONTAINER) && !tool.isA(POLCLASS_ARMOR))
+      var myskill := AP_GetSkill(who, craft_skill);
+      var swings := 0;
+      var mods := GetObjProperty(tool, "durability");
+      var bonus := 0;
+      case(mods)
+        "durable":        bonus := 10;
+        "substantial":    bonus := 20;
+        "massive":        bonus := 30;
+        "fortified":      bonus := 40;
+        "indestructable": bonus := 50;
+        default: bonus := 0;
+      endcase
+      swings := Cint(50 + myskill) + bonus;
+      SetObjProperty(tool, "swings", swings);
+      if(!tool.quality or tool.quality == error)
+        tool.quality := 1.0;
+      endif
+    endif
+  endif
+
+endfunction

Added: trunk/096/pkg/systems/crafting/method/toolWearMethod.inc
===================================================================
--- trunk/096/pkg/systems/crafting/method/toolWearMethod.inc	2005-09-29 23:19:04 UTC (rev 315)
+++ trunk/096/pkg/systems/crafting/method/toolWearMethod.inc	2005-09-29 23:45:05 UTC (rev 316)
@@ -0,0 +1,71 @@
+// //$Id$
+
+exported function CheckToolWear (tool, who, craft_skill)
+  var swings := GetObjProperty(tool,"swings");
+  if(!swings)
+    var mods := GetObjProperty(tool, "durability");
+    var bonus := 0;
+    case(mods)
+      "durable":        bonus := 10;
+      "substantial":    bonus := 20;
+      "massive":        bonus := 30;
+      "fortified":      bonus := 40;
+      "indestructable": bonus := 50;
+    endcase
+    swings := Cint(50 * tool.quality) + bonus;
+    SetObjProperty(tool,"swings", swings);
+  endif
+  if(swings <= 0)
+    DestroyItem(tool);
+    SendSysMessage(who,"Your tool broke.");
+  else
+    var skill := AP_GetSkill(who, craft_skill);
+    if(skill > 80)
+      skill := 80;
+    elseif(skill < 20)
+      skill := 20;
+    endif
+    if((RandomInt(100)+1) > skill)
+      if(tool.isa(POLCLASS_WEAPON))
+        if(tool.hp > 1)
+          SetObjProperty(tool,"swings", (swings - 1));
+          tool.hp := tool.hp - 1;
+        elseif((tool.hp > tool.maxhp) or (tool.hp == 1))
+          SendSysMessage(who,"Your tool broke.");
+          DestroyItem(tool);
+        endif
+      else
+        SetObjProperty(tool,"swings", (swings - 1));
+      endif
+    endif
+  endif
+endfunction
+
+exported function SetToolDurability(tool, who, craft_skill)
+
+  var toolfile := ReadConfigFile(":*:itemdesc");
+  var toolscript := toolfile[tool.objtype].Script;
+
+  if(!toolscript.errortext)
+    if(!tool.isA(POLCLASS_CONTAINER) && !tool.isA(POLCLASS_ARMOR))
+      var myskill := AP_GetSkill(who, craft_skill);
+      var swings := 0;
+      var mods := GetObjProperty(tool, "durability");
+      var bonus := 0;
+      case(mods)
+        "durable":        bonus := 10;
+        "substantial":    bonus := 20;
+        "massive":        bonus := 30;
+        "fortified":      bonus := 40;
+        "indestructable": bonus := 50;
+        default: bonus := 0;
+      endcase
+      swings := Cint(50 + myskill) + bonus;
+      SetObjProperty(tool, "swings", swings);
+      if(!tool.quality or tool.quality == error)
+        tool.quality := 1.0;
+      endif
+    endif
+  endif
+
+endfunction



From austin at berlios.de  Fri Sep 30 02:42:42 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 02:42:42 +0200
Subject: [Poldistro-svn] r317 - in trunk/096/pkg/items/sysbook: book include
Message-ID: <200509300042.j8U0gg1p016835@sheep.berlios.de>

Author: austin
Date: 2005-09-30 02:42:38 +0200 (Fri, 30 Sep 2005)
New Revision: 317

Modified:
   trunk/096/pkg/items/sysbook/book/methods.src
   trunk/096/pkg/items/sysbook/book/onCreate.src
   trunk/096/pkg/items/sysbook/book/onDestroy.src
   trunk/096/pkg/items/sysbook/include/zuluBooks.inc
Log:


Modified: trunk/096/pkg/items/sysbook/book/methods.src
===================================================================
--- trunk/096/pkg/items/sysbook/book/methods.src	2005-09-29 23:45:05 UTC (rev 316)
+++ trunk/096/pkg/items/sysbook/book/methods.src	2005-09-30 00:42:38 UTC (rev 317)
@@ -94,7 +94,7 @@
 
 	// Uses the GetContents() function.
 	var contents := GetContents(book);
-	if ( line_num <= contents.size() )
+	if ( line_num <= contents.Size() )
 		var line := contents[line_num];
 
 		if ( line && line != error )
@@ -217,8 +217,8 @@
 	// We do create the datafile if it doesnt exist.
 	// However, the elem is not created if it doesnt exist
 	// because were only reading in this function and not writing.
-	var book_data_file := DFOpenDataFile("books", DF_CREATE);
-	var book_elem := DFFindElement(book_data_file, hex(book.serial), DF_NO_CREATE);
+	var book_data_file := DFOpenDataFile(":sysbooks:books", DF_CREATE);
+	var book_elem := DFFindElement(book_data_file, Hex(book.serial), DF_NO_CREATE);
 	prop_value := book_elem.GetProp(prop_name);
 	if ( prop_value )
 		return prop_value;
@@ -253,8 +253,8 @@
 //       Datafiles dont like that.
 //
 function SetInfo(book, prop_name, prop_value)
-	var book_data_file := DFOpenDataFile("books", DF_CREATE);
-	var book_elem := DFFindElement(book_data_file, hex(book.serial), DF_CREATE);
+	var book_data_file := DFOpenDataFile(":sysbook:books", DF_CREATE);
+	var book_elem := DFFindElement(book_data_file, Hex(book.serial), DF_CREATE);
 
 	return book_elem.SetProp(CStr(prop_name), prop_value);
 endfunction

Modified: trunk/096/pkg/items/sysbook/book/onCreate.src
===================================================================
--- trunk/096/pkg/items/sysbook/book/onCreate.src	2005-09-29 23:45:05 UTC (rev 316)
+++ trunk/096/pkg/items/sysbook/book/onCreate.src	2005-09-30 00:42:38 UTC (rev 317)
@@ -1 +1,5 @@
 // $Id$
+
+program OnCreate(book)
+	return 1;
+endprogram

Modified: trunk/096/pkg/items/sysbook/book/onDestroy.src
===================================================================
--- trunk/096/pkg/items/sysbook/book/onDestroy.src	2005-09-29 23:45:05 UTC (rev 316)
+++ trunk/096/pkg/items/sysbook/book/onDestroy.src	2005-09-30 00:42:38 UTC (rev 317)
@@ -1 +1,10 @@
 // $Id$
+
+include ":datafile:datafile";
+
+program DestroyBook(book)
+	var book_data_file := DFOpenDataFile(":sysbooks:books", DF_NO_CREATE);
+	book_data_file.DeleteElement(Hex(book.serial));
+	
+	SysLog("Deleting datafile elem for book " + Hex(book.serial));
+endprogram
\ No newline at end of file

Modified: trunk/096/pkg/items/sysbook/include/zuluBooks.inc
===================================================================
--- trunk/096/pkg/items/sysbook/include/zuluBooks.inc	2005-09-29 23:45:05 UTC (rev 316)
+++ trunk/096/pkg/items/sysbook/include/zuluBooks.inc	2005-09-30 00:42:38 UTC (rev 317)
@@ -59,3 +59,54 @@
 	
 	return cfg_elem;
 endfunction
+
+/*
+ * SysBook_ParseZuluCfgElem(elem_name, byref cfg_file)
+ *
+ * Purpose
+ * Parses the insanity that exists within zulubooks.cfg and returns
+ * a data structure that can be used with the method script of a book.
+ *
+ * Parameters
+ * elem_name:		Name of the book elem to retrieve.
+ * cfg_file:		Optional parameter - reference to a config already read in.
+ *
+ * Return value
+ * Returns a config file elem.
+ *
+ */
+function SysBook_ParseZuluCfgElem(elem_name, byref cfg_file)
+	if ( !cfg_file )
+		cfg_file := SysBook_GetZuluBooksCfgFile();
+	endif
+	
+	var cfg_elem :=  SysBook_GetZuluCfgElem(elem_name, cfg_file);
+	if ( !cfg_elem )
+		return 0;
+	endif
+	
+	var book_info := struct;
+	book_info.+Author := cfg_elem.Author;
+	book_info.+Title := cfg_elem.Title;
+	book_info.+Contents := array;
+
+	var num_pages := CInt(cfg_elem.Pages);
+	var page_num := 1;
+	for ( page_num; page_num <= num_pages; page_num:=page_num+1 )
+		var line_num := 1;
+		for ( line_num; line_num <= 8; line_num := line_num-1 ) // 8 lines per page
+			var prop_string := "p"+page_num+"l"+line_num; //p#l#
+			var line_text := GetConfigString(cfg_elem, prop_string);
+			if ( !line_text )
+				line_text := "";
+			endif
+		
+			book_info.Append(line_text);
+		
+			sleepms(2);
+		endfor
+		sleepms(2);
+	endfor
+	
+	return book_info;
+endfunction



From muaddiblsd at berlios.de  Fri Sep 30 02:54:12 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Fri, 30 Sep 2005 02:54:12 +0200
Subject: [Poldistro-svn] r318 - in trunk/096: config pkg/items/containers/bookshelf pkg/items/containers/container scripts/control
Message-ID: <200509300054.j8U0sCVh000549@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-30 02:54:02 +0200 (Fri, 30 Sep 2005)
New Revision: 318

Added:
   trunk/096/pkg/items/containers/container/noRemove.src
Removed:
   trunk/096/scripts/control/noRemove.src
Modified:
   trunk/096/config/itemdesc.cfg
   trunk/096/pkg/items/containers/bookshelf/canInsert.src
   trunk/096/pkg/items/containers/bookshelf/canRemove.src
   trunk/096/pkg/items/containers/bookshelf/onInsert.src
   trunk/096/pkg/items/containers/bookshelf/onRemove.src
Log:
Fixes for unused vars
Move noRemove.src to containers/container package.
Updated itemdesc.cfg entries for items using the noRemove.src

Modified: trunk/096/config/itemdesc.cfg
===================================================================
--- trunk/096/config/itemdesc.cfg	2005-09-30 00:42:38 UTC (rev 317)
+++ trunk/096/config/itemdesc.cfg	2005-09-30 00:54:02 UTC (rev 318)
@@ -144,7 +144,7 @@
     VendorSellsFor      22
     VendorBuysFor       11
     weight              1
-    canRemoveScript     noRemove
+    canRemoveScript     :containers:container/noRemove
 }
 
 Spellbook 0x2252
@@ -162,7 +162,7 @@
     VendorSellsFor      22
     VendorBuysFor       11
     weight              1
-    canRemoveScript     noRemove
+    canRemoveScript     :containers:container/noRemove
 }
 
 Spellbook 0x2253
@@ -180,7 +180,7 @@
     VendorSellsFor      22
     VendorBuysFor       11
     weight              1
-    canRemoveScript     noRemove
+    canRemoveScript     :containers:container/noRemove
 }
 
 Container 0xa9f

Modified: trunk/096/pkg/items/containers/bookshelf/canInsert.src
===================================================================
--- trunk/096/pkg/items/containers/bookshelf/canInsert.src	2005-09-30 00:42:38 UTC (rev 317)
+++ trunk/096/pkg/items/containers/bookshelf/canInsert.src	2005-09-30 00:54:02 UTC (rev 318)
@@ -4,10 +4,18 @@
 use cfgfile;
 
 program CanInsert(mobile, container, movetype, insert_type, adding_item, existing_stack, amt_to_add)
+
+	amt_to_add := amt_to_add;
+	existing_stack := existing_stack;
+	insert_type := insert_type;
+	movetype := movetype;
+	container := container;
+
 	if ( adding_item.IsBook() )
 		return 1;
 	else
 		SendSysMessage(mobile, "That is not a book.");
 		return 0;
 	endif
+
 endprogram
\ No newline at end of file

Modified: trunk/096/pkg/items/containers/bookshelf/canRemove.src
===================================================================
--- trunk/096/pkg/items/containers/bookshelf/canRemove.src	2005-09-30 00:42:38 UTC (rev 317)
+++ trunk/096/pkg/items/containers/bookshelf/canRemove.src	2005-09-30 00:54:02 UTC (rev 318)
@@ -3,5 +3,13 @@
 use uo;
 
 program canRemoveScript(mobile, container, item, move_type)
+
+	mobile := mobile;
+	container := container;
+	item := item;
+	move_type := move_type;
+
 	return 1;
+
 endprogram
+

Modified: trunk/096/pkg/items/containers/bookshelf/onInsert.src
===================================================================
--- trunk/096/pkg/items/containers/bookshelf/onInsert.src	2005-09-30 00:42:38 UTC (rev 317)
+++ trunk/096/pkg/items/containers/bookshelf/onInsert.src	2005-09-30 00:54:02 UTC (rev 318)
@@ -6,9 +6,18 @@
 use os;
 
 program OnInsert(who, container, movetype, insert_type, adding_item, existing_stack, amt_to_add)
+
+	amt_to_add := amt_to_add;
+	existing_stack := existing_stack;
+	amt_to_add := amt_to_add;
+	adding_item := adding_item;
+	insert_type := insert_type;
+	movetype := movetype;
+	who := who;
+
 	var cfg := ReadConfigFile(":containers:config/bookshelf");
 	cfg := cfg[container.graphic];
-	
+
 	var num_items := EnumerateItemsInContainer(container).size();
 	if ( num_items > 0 )
 		//Duh, we know it is >0 since its an onInsert script, but its good to be safe.
@@ -18,6 +27,7 @@
 		var graphic := CInt(graphics[RandomInt(graphics.size())+1]);
 		container.graphic := graphic;
 	endif
-	
+
 	return 1;
+
 endprogram

Modified: trunk/096/pkg/items/containers/bookshelf/onRemove.src
===================================================================
--- trunk/096/pkg/items/containers/bookshelf/onRemove.src	2005-09-30 00:42:38 UTC (rev 317)
+++ trunk/096/pkg/items/containers/bookshelf/onRemove.src	2005-09-30 00:54:02 UTC (rev 318)
@@ -4,9 +4,15 @@
 use os;
 
 program OnRemove(who, container, item, item_amount, movetype)
+
+	movetype := movetype;
+	item := item;
+	item_amount := item_amount;
+	who := who;
+
 	var shelf_cfg := ReadConfigFile(":containers:config/bookshelf");
 	shelf_cfg := shelf_cfg[container.graphic];
-	
+
 	var num_items := EnumerateItemsInContainer(container).size();
 	if ( num_items > 0 )
 		//There are still other books left in the shelf.
@@ -19,6 +25,6 @@
 		//No more books left - set to an empty shelf graphic.
 		container.graphic := shelf_cfg.EmptyGraphic;
 	endif
-	
+
 	return 1;
 endprogram

Added: trunk/096/pkg/items/containers/container/noRemove.src
===================================================================
--- trunk/096/pkg/items/containers/container/noRemove.src	2005-09-30 00:42:38 UTC (rev 317)
+++ trunk/096/pkg/items/containers/container/noRemove.src	2005-09-30 00:54:02 UTC (rev 318)
@@ -0,0 +1,15 @@
+use uo;
+use os;
+
+program can_remove(who, backpack, item, movetype)
+
+  movetype := movetype;
+  item := item;
+  if(who.cmdlevel >= 2)
+    return 1;
+  else
+    PrintTextAbovePrivate(backpack, "That cannot be removed.", who);
+    return 0;
+  endif
+
+endprogram

Deleted: trunk/096/scripts/control/noRemove.src
===================================================================
--- trunk/096/scripts/control/noRemove.src	2005-09-30 00:42:38 UTC (rev 317)
+++ trunk/096/scripts/control/noRemove.src	2005-09-30 00:54:02 UTC (rev 318)
@@ -1,15 +0,0 @@
-use uo;
-use os;
-
-program can_remove(who, backpack, item, movetype)
-
-  movetype := movetype;
-  item := item;
-  if(who.cmdlevel >= 2)
-    return 1;
-  else
-    PrintTextAbovePrivate(backpack, "That cannot be removed.", who);
-    return 0;
-  endif
-
-endprogram



From austin at berlios.de  Fri Sep 30 03:52:11 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 03:52:11 +0200
Subject: [Poldistro-svn] r319 - trunk/096/pkg/items/sysbook/book
Message-ID: <200509300152.j8U1qBn5000855@sheep.berlios.de>

Author: austin
Date: 2005-09-30 03:52:03 +0200 (Fri, 30 Sep 2005)
New Revision: 319

Modified:
   trunk/096/pkg/items/sysbook/book/methods.src
Log:


Modified: trunk/096/pkg/items/sysbook/book/methods.src
===================================================================
--- trunk/096/pkg/items/sysbook/book/methods.src	2005-09-30 00:54:02 UTC (rev 318)
+++ trunk/096/pkg/items/sysbook/book/methods.src	2005-09-30 01:52:03 UTC (rev 319)
@@ -146,11 +146,9 @@
 // Helper Functions
 //++++++++++++++++++++++++++++
 
-exported function SetOwner(book, owner)
-	var serial;
-	
-	if ( owner.IsA(POLCLASS_MOBILE) )
-		serial := owner.serial;
+exported function SetOwner(book, serial)
+	if ( serial.IsA(POLCLASS_MOBILE) )
+		serial := serial.serial;
 	endif
 	
 	//book.SetOwner(serial)



From austin at berlios.de  Fri Sep 30 04:08:05 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 04:08:05 +0200
Subject: [Poldistro-svn] r320 - in trunk/096/pkg/items/sysbook: . book commands commands/gm include
Message-ID: <200509300208.j8U285YY002691@sheep.berlios.de>

Author: austin
Date: 2005-09-30 04:08:03 +0200 (Fri, 30 Sep 2005)
New Revision: 320

Added:
   trunk/096/pkg/items/sysbook/commands/
   trunk/096/pkg/items/sysbook/commands/gm/
   trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src
Modified:
   trunk/096/pkg/items/sysbook/book/methods.src
   trunk/096/pkg/items/sysbook/include/zuluBooks.inc
Log:


Modified: trunk/096/pkg/items/sysbook/book/methods.src
===================================================================
--- trunk/096/pkg/items/sysbook/book/methods.src	2005-09-30 01:52:03 UTC (rev 319)
+++ trunk/096/pkg/items/sysbook/book/methods.src	2005-09-30 02:08:03 UTC (rev 320)
@@ -215,7 +215,7 @@
 	// We do create the datafile if it doesnt exist.
 	// However, the elem is not created if it doesnt exist
 	// because were only reading in this function and not writing.
-	var book_data_file := DFOpenDataFile(":sysbooks:books", DF_CREATE);
+	var book_data_file := DFOpenDataFile(":sysbook:books", DF_CREATE);
 	var book_elem := DFFindElement(book_data_file, Hex(book.serial), DF_NO_CREATE);
 	prop_value := book_elem.GetProp(prop_name);
 	if ( prop_value )

Added: trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src
===================================================================
--- trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src	2005-09-30 01:52:03 UTC (rev 319)
+++ trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src	2005-09-30 02:08:03 UTC (rev 320)
@@ -0,0 +1,32 @@
+// $Id$
+
+use uo;
+
+include ":sysbook:zuluBooks";
+include ":gumps:gumps_ex";
+
+program MakeZuluBook(mobile)
+	GumpList(mobile);
+endprogram
+
+function GumpList(mobile)
+	var zulu_cfg := SysBook_GetZuluCfgFile();
+	
+	var gump := GFCreateGump();
+	GFPage(gump, 0);
+	GFResizePic(gump, 0, 0, GFCfgConst("Defaults", "BackGround"), 300, 480);
+	GFResizePic(gump, 10, 10, GFCfgConst("Defaults", "ForeGround"), 280, 460);
+	var y_pos := 40;
+	var counter := 1;
+	var page_num := 1;
+	GFTextMid(gump, 10, 15, 280, 2100, "Books from zuluBooks.cfg");
+	foreach elem_name in GetConfigStringKeys(zulu_cfg)
+		var elem_info := SysBook_GetZuluCfgElem(elem_name);
+		
+		GFAddButton(gump, 15, (y_pos+3), 2117, 2118, GF_CLOSE_BTN, _elem_name_iter);
+		
+		sleepms(2);
+	endforeach
+	
+	return 1;
+endfunction

Modified: trunk/096/pkg/items/sysbook/include/zuluBooks.inc
===================================================================
--- trunk/096/pkg/items/sysbook/include/zuluBooks.inc	2005-09-30 01:52:03 UTC (rev 319)
+++ trunk/096/pkg/items/sysbook/include/zuluBooks.inc	2005-09-30 02:08:03 UTC (rev 320)
@@ -24,10 +24,10 @@
  * Config file
  *
  */
-function SysBook_GetZuluBooksCfgFile()
-	var cfg_file := ReadConfigFile(":sysbooks:config/zulubooks");
+function SysBook_GetZuluCfgFile()
+	var cfg_file := ReadConfigFile(":sysbook:config/zuluBooks");
 	if ( cfg_file.errortext )
-		SysLog("Error::SysBook_GetZuluBooksCfgFile() - Unable to open zulubooks.cfg ->"+cfg_file.errortext);
+		SysLog("Error::SysBook_GetZuluBooksCfgFile() - Unable to open zuluBooks.cfg ->"+cfg_file.errortext);
 	endif
 
 	return cfg_file;
@@ -49,7 +49,7 @@
  */
 function SysBook_GetZuluCfgElem(elem_name, byref cfg_file:=0)
 	if ( !cfg_file )
-		cfg_file := SysBook_GetZuluBooksCfgFile();
+		cfg_file := SysBook_GetZuluCfgFile();
 	endif
 	
 	var cfg_elem := cfg_file[elem_name];
@@ -77,7 +77,7 @@
  */
 function SysBook_ParseZuluCfgElem(elem_name, byref cfg_file)
 	if ( !cfg_file )
-		cfg_file := SysBook_GetZuluBooksCfgFile();
+		cfg_file := SysBook_GetZuluCfgFile();
 	endif
 	
 	var cfg_elem :=  SysBook_GetZuluCfgElem(elem_name, cfg_file);



From muaddiblsd at berlios.de  Fri Sep 30 04:42:04 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Fri, 30 Sep 2005 04:42:04 +0200
Subject: [Poldistro-svn] r321 - in trunk/096/pkg: skills/blacksmithy/tongs systems/crafting systems/crafting/include
Message-ID: <200509300242.j8U2g4bw008231@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-30 04:42:02 +0200 (Fri, 30 Sep 2005)
New Revision: 321

Added:
   trunk/096/pkg/systems/crafting/include/toolWearMethod.inc
Removed:
   trunk/096/pkg/systems/crafting/method/
Modified:
   trunk/096/pkg/skills/blacksmithy/tongs/tongsMethod.src
   trunk/096/pkg/systems/crafting/include/craftGumps.inc
Log:


Modified: trunk/096/pkg/skills/blacksmithy/tongs/tongsMethod.src
===================================================================
--- trunk/096/pkg/skills/blacksmithy/tongs/tongsMethod.src	2005-09-30 02:08:03 UTC (rev 320)
+++ trunk/096/pkg/skills/blacksmithy/tongs/tongsMethod.src	2005-09-30 02:42:02 UTC (rev 321)
@@ -1,6 +1,6 @@
 use uo;
 
-include ":crafting:method/toolWearMethod";
+include ":crafting:toolWearMethod";
 
 program install()
 

Modified: trunk/096/pkg/systems/crafting/include/craftGumps.inc
===================================================================
--- trunk/096/pkg/systems/crafting/include/craftGumps.inc	2005-09-30 02:08:03 UTC (rev 320)
+++ trunk/096/pkg/systems/crafting/include/craftGumps.inc	2005-09-30 02:42:02 UTC (rev 321)
@@ -7,8 +7,9 @@
 var craft_settings;
 var atc := 1;
 var PageNum := 1;
+// Gump backgrounds - Used in various functions - easier to use globally.
+var BKGND_SILVERTRIM := GFCfgConst("Defaults", "BackGround");
 
-
 // This function is the main backbone for building the Crafting Menu.
 function sendCraftGump(who, skill_name)
 
@@ -149,8 +150,8 @@
 	// take care with your items.
 	arcnt   := 61500;
 
-	var gump := GFCreateGump(50, 50);
-	GFResizePic(gump, 0, 0, 5054, 530, 437);
+	var gump := GFCreateGump(50, 25);
+	GFResizePic(gump, 2, 0, BKGND_SILVERTRIM, 522, 440);
 	GFGumpPic(gump, 10, 10, 2624);
 	GFGumpPic(gump, 10, 205, 2624);
 	GFGumpPic(gump, 10, 225, 2624);
@@ -419,8 +420,8 @@
 		echance := CStr(ExceptionalCraft(temp1, skillreq, temp2, 1))+"%";
 	endif
 
-	var gump := GFCreateGump(50, 50);
-	GFResizePic(gump, 0, 0, 5054, 530, 417);
+	var gump := GFCreateGump(50, 25);
+	GFResizePic(gump, 2, 0, BKGND_SILVERTRIM, 521, 420);
 	GFGumpPic(gump, 10, 10, 2624);
 	GFGumpPic(gump, 10, 205, 2624);
 	GFGumpPic(gump, 250, 10, 2624);
@@ -435,7 +436,7 @@
 	GFGumpPic(gump, 10, 370, 5055);
 	GFGumpPic(gump, 90, 370, 5055);
 	GFHTMLArea(gump, 10, 27, 150, 18, "<basefont color=#ffffff>ITEM");
-	GFHTMLArea(gump, 170, 177, 150, 18, "<basefont color=#ffffff>SKILLS");
+	GFHTMLArea(gump, 170, 117, 150, 18, "<basefont color=#ffffff>SKILLS");
 	GFHTMLArea(gump, 10, 207, 150, 18, "<basefont color=#ffffff>MATERIALS");
 	GFHTMLArea(gump, 10, 287, 150, 18, "<basefont color=#ffffff>OTHER");
 	GFAddButton(gump, 15, 387, 4014, 4016, GF_CLOSE_BTN, 1);
@@ -475,12 +476,12 @@
 	// Item Name
 	GFHTMLArea(gump, 330, 40, 150, 20, ("<basefont color=#ffffff>"+itemdesc));
 	// Skill name
-	GFHTMLArea(gump, 170, 132, 150, 20, (craft_skill + " required"));
+	GFHTMLArea(gump, 170, 132, 150, 20, ("<basefont color=#ffffff>"+craft_skill + " required"));
 
 	if((skillreqb > 0) && (skillreqb != error))
 		// Skill 2 name
-		GFHTMLArea(gump, 170, 152, 150, 20, (aid_skill + " required"));
-		GFHTMLArea(gump, 430, 152, 150, 20, skillreqb);
+		GFHTMLArea(gump, 170, 152, 150, 20, ("<basefont color=#ffffff>"+aid_skill + " required"));
+		GFHTMLArea(gump, 430, 152, 150, 20, ("<basefont color=#ffffff>"+skillreqb));
 	endif
 
 	var ifres := GFSendGump(who, gump);

Added: trunk/096/pkg/systems/crafting/include/toolWearMethod.inc
===================================================================
--- trunk/096/pkg/systems/crafting/include/toolWearMethod.inc	2005-09-30 02:08:03 UTC (rev 320)
+++ trunk/096/pkg/systems/crafting/include/toolWearMethod.inc	2005-09-30 02:42:02 UTC (rev 321)
@@ -0,0 +1,75 @@
+// //$Id$
+
+exported function CheckToolWear (tool, who, craft_skill)
+
+	var swings := GetObjProperty(tool,"swings");
+	if( TypeOf(swings) != "Integer" )
+		var mods := GetObjProperty(tool, "durability");
+		var bonus := 0;
+		case(mods)
+			"durable":        bonus := 10;
+			"substantial":    bonus := 20;
+			"massive":        bonus := 30;
+			"fortified":      bonus := 40;
+			"indestructable": bonus := 50;
+		endcase
+		swings := Cint(50 * tool.quality) + bonus;
+		SetObjProperty(tool,"swings", swings);
+	endif
+	if(swings <= 0)
+		DestroyItem(tool);
+		SendSysMessage(who,"Your tool broke.");
+	else
+		var skill := AP_GetSkill(who, craft_skill);
+		if(skill > 80)
+			skill := 80;
+		elseif(skill < 20)
+			skill := 20;
+		endif
+		if((RandomInt(100)+1) > skill)
+			if(tool.isa(POLCLASS_WEAPON))
+				if(tool.hp > 1)
+					SetObjProperty(tool,"swings", CInt(swings - 1));
+					tool.hp := tool.hp - 1;
+				elseif((tool.hp > tool.maxhp) or (tool.hp == 1))
+					SendSysMessage(who, "Your tool broke.");
+					DestroyItem(tool);
+				endif
+			else
+				SetObjProperty(tool, "swings", CInt(swings - 1));
+			endif
+		endif
+	endif
+
+endfunction
+
+exported function SetToolDurability(tool, who, craft_skill)
+
+	var item_config   := ReadConfigFile(":*:itemdesc");
+	var item_script  := item_config[tool.objtype].Script;
+
+	if( TypeOf(item_script) != "Struct" )
+		if(!tool.isA(POLCLASS_CONTAINER) && !tool.isA(POLCLASS_ARMOR))
+			var myskill := AP_GetSkill(who, craft_skill);
+			var swings := 0;
+			var mods := GetObjProperty(tool, "durability");
+			var bonus := 0;
+			case(mods)
+				"durable":        bonus := 10;
+				"substantial":    bonus := 20;
+				"massive":        bonus := 30;
+				"fortified":      bonus := 40;
+				"indestructable": bonus := 50;
+				default: bonus := 0;
+			endcase
+			swings := Cint(50 + myskill) + bonus;
+			SetObjProperty(tool, "swings", swings);
+			if(!tool.quality or tool.quality == error)
+				tool.quality := 1.0;
+			endif
+		endif
+	endif
+
+	return 1;
+
+endfunction



From muaddiblsd at berlios.de  Fri Sep 30 04:44:36 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Fri, 30 Sep 2005 04:44:36 +0200
Subject: [Poldistro-svn] r322 - trunk/096/pkg/systems/crafting/include
Message-ID: <200509300244.j8U2ia5G008664@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-30 04:44:35 +0200 (Fri, 30 Sep 2005)
New Revision: 322

Modified:
   trunk/096/pkg/systems/crafting/include/toolWearMethod.inc
Log:


Modified: trunk/096/pkg/systems/crafting/include/toolWearMethod.inc
===================================================================
--- trunk/096/pkg/systems/crafting/include/toolWearMethod.inc	2005-09-30 02:42:02 UTC (rev 321)
+++ trunk/096/pkg/systems/crafting/include/toolWearMethod.inc	2005-09-30 02:44:35 UTC (rev 322)
@@ -1,5 +1,8 @@
 // //$Id$
 
+include ":attributes:attributeConstants";
+include ":attributes:attributes";
+
 exported function CheckToolWear (tool, who, craft_skill)
 
 	var swings := GetObjProperty(tool,"swings");



From austin at berlios.de  Fri Sep 30 04:57:58 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 04:57:58 +0200
Subject: [Poldistro-svn] r323 - in trunk/096/pkg/items/sysbook: book commands/gm include
Message-ID: <200509300257.j8U2vw2U011439@sheep.berlios.de>

Author: austin
Date: 2005-09-30 04:57:57 +0200 (Fri, 30 Sep 2005)
New Revision: 323

Modified:
   trunk/096/pkg/items/sysbook/book/methods.src
   trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src
   trunk/096/pkg/items/sysbook/include/zuluBooks.inc
Log:


Modified: trunk/096/pkg/items/sysbook/book/methods.src
===================================================================
--- trunk/096/pkg/items/sysbook/book/methods.src	2005-09-30 02:44:35 UTC (rev 322)
+++ trunk/096/pkg/items/sysbook/book/methods.src	2005-09-30 02:57:57 UTC (rev 323)
@@ -120,6 +120,12 @@
 endfunction
 
 exported function SetTitle(book, title)
+	if ( Len(title) > 0 )
+		SetName(book, title);
+	else
+		SetName(book, "a book");
+	endif
+	
 	return SetInfo(book, "Title", CStr(title));
 endfunction
 

Modified: trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src
===================================================================
--- trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src	2005-09-30 02:44:35 UTC (rev 322)
+++ trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src	2005-09-30 02:57:57 UTC (rev 323)
@@ -5,28 +5,60 @@
 include ":sysbook:zuluBooks";
 include ":gumps:gumps_ex";
 
+unload_scripts("");
+
 program MakeZuluBook(mobile)
 	GumpList(mobile);
 endprogram
 
 function GumpList(mobile)
 	var zulu_cfg := SysBook_GetZuluCfgFile();
+	var elem_names := GetConfigStringKeys(zulu_cfg);
 	
 	var gump := GFCreateGump();
 	GFPage(gump, 0);
-	GFResizePic(gump, 0, 0, GFCfgConst("Defaults", "BackGround"), 300, 480);
-	GFResizePic(gump, 10, 10, GFCfgConst("Defaults", "ForeGround"), 280, 460);
+	GFResizePic(gump, 0, 0, GFCfgConst("Defaults", "BackGround"), 580, 480);
+	GFResizePic(gump, 10, 10, GFCfgConst("Defaults", "ForeGround"), 560, 460);
 	var y_pos := 40;
 	var counter := 1;
 	var page_num := 1;
-	GFTextMid(gump, 10, 15, 280, 2100, "Books from zuluBooks.cfg");
-	foreach elem_name in GetConfigStringKeys(zulu_cfg)
+	GFTextMid(gump, 10, 15, 560, 2100, "Books from zuluBooks.cfg");
+	foreach elem_name in (elem_names)
 		var elem_info := SysBook_GetZuluCfgElem(elem_name);
 		
 		GFAddButton(gump, 15, (y_pos+3), 2117, 2118, GF_CLOSE_BTN, _elem_name_iter);
+		GFTextLine(gump, 40, y_pos, 2100, "["+elem_name+"]");
+		GFTextLine(gump, 95, y_pos, 2100, "Title: "+elem_info.Title);
+		GFTextLine(gump, 380, y_pos, 2100, "Author: "+elem_info.Author);
+				
+		y_pos := y_pos+20;
 		
 		sleepms(2);
 	endforeach
 	
+	var input := GFSendGump(mobile, gump);
+	input := input[0];
+	if ( !input )
+		SendSysMessage(mobile, "Cancelled.");
+		return 0;
+	endif
+	
+	input := elem_names[input];
+	var book_info := SysBook_ParseZuluCfgElem(input, zulu_cfg);
+	
+	var book := CreateItemInContainer(mobile.backpack, "Book2", 1);
+	if ( !book )
+		SendSysMessage(mobile, "Unable to create book ->"+book.errortext);
+	endif
+	
+	book.SetAuthor(book_info.Author);
+	book.SetTitle(book_info.Title);
+	foreach text_line in ( book_info.Contents )
+		book.SetLine(_text_line_iter, text_line);
+		sleepms(2);
+	endforeach
+	
+	SendSysMessage(mobile, "Done!");
+	
 	return 1;
 endfunction

Modified: trunk/096/pkg/items/sysbook/include/zuluBooks.inc
===================================================================
--- trunk/096/pkg/items/sysbook/include/zuluBooks.inc	2005-09-30 02:44:35 UTC (rev 322)
+++ trunk/096/pkg/items/sysbook/include/zuluBooks.inc	2005-09-30 02:57:57 UTC (rev 323)
@@ -94,7 +94,7 @@
 	var page_num := 1;
 	for ( page_num; page_num <= num_pages; page_num:=page_num+1 )
 		var line_num := 1;
-		for ( line_num; line_num <= 8; line_num := line_num-1 ) // 8 lines per page
+		for ( line_num; line_num <= 8; line_num := line_num+1 ) // 8 lines per page
 			var prop_string := "p"+page_num+"l"+line_num; //p#l#
 			var line_text := GetConfigString(cfg_elem, prop_string);
 			if ( !line_text )



From austin at berlios.de  Fri Sep 30 05:08:15 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 05:08:15 +0200
Subject: [Poldistro-svn] r324 - in trunk/096/pkg/items/sysbook: book commands/gm include
Message-ID: <200509300308.j8U38F4q014723@sheep.berlios.de>

Author: austin
Date: 2005-09-30 05:08:14 +0200 (Fri, 30 Sep 2005)
New Revision: 324

Modified:
   trunk/096/pkg/items/sysbook/book/use.src
   trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src
   trunk/096/pkg/items/sysbook/include/zuluBooks.inc
Log:


Modified: trunk/096/pkg/items/sysbook/book/use.src
===================================================================
--- trunk/096/pkg/items/sysbook/book/use.src	2005-09-30 02:57:57 UTC (rev 323)
+++ trunk/096/pkg/items/sysbook/book/use.src	2005-09-30 03:08:14 UTC (rev 324)
@@ -1 +1,12 @@
 // $Id$
+
+use uo;
+
+program useBook(who,book)
+	if ( !ReserveItem(book) )
+		SendSysMessage(who, "Someone else is already reading this book.");
+		return;
+	endif
+
+	SendOpenBook(who, book);
+endprogram

Modified: trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src
===================================================================
--- trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src	2005-09-30 02:57:57 UTC (rev 323)
+++ trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src	2005-09-30 03:08:14 UTC (rev 324)
@@ -5,8 +5,6 @@
 include ":sysbook:zuluBooks";
 include ":gumps:gumps_ex";
 
-unload_scripts("");
-
 program MakeZuluBook(mobile)
 	GumpList(mobile);
 endprogram
@@ -23,6 +21,8 @@
 	var counter := 1;
 	var page_num := 1;
 	GFTextMid(gump, 10, 15, 560, 2100, "Books from zuluBooks.cfg");
+	
+	GFPage(gump, 1);
 	foreach elem_name in (elem_names)
 		var elem_info := SysBook_GetZuluCfgElem(elem_name);
 		
@@ -32,7 +32,16 @@
 		GFTextLine(gump, 380, y_pos, 2100, "Author: "+elem_info.Author);
 				
 		y_pos := y_pos+20;
+		counter := counter+1;
 		
+		if ( counter > 20 )
+			counter := 1;
+			y_pos := 40;
+			GFAddButton(gump, 545, 445, 2648, 2649, GF_PAGE_BTN, page_num+1);
+			page_num := page_num+1;
+			GFPage(gump, page_num);
+			GFAddButton(gump, 545, 15, 2650, 2651, GF_PAGE_BTN, page_num-1);
+		endif
 		sleepms(2);
 	endforeach
 	
@@ -58,6 +67,8 @@
 		sleepms(2);
 	endforeach
 	
+	book.ReadOnly(1);
+	
 	SendSysMessage(mobile, "Done!");
 	
 	return 1;

Modified: trunk/096/pkg/items/sysbook/include/zuluBooks.inc
===================================================================
--- trunk/096/pkg/items/sysbook/include/zuluBooks.inc	2005-09-30 02:57:57 UTC (rev 323)
+++ trunk/096/pkg/items/sysbook/include/zuluBooks.inc	2005-09-30 03:08:14 UTC (rev 324)
@@ -97,12 +97,13 @@
 		for ( line_num; line_num <= 8; line_num := line_num+1 ) // 8 lines per page
 			var prop_string := "p"+page_num+"l"+line_num; //p#l#
 			var line_text := GetConfigString(cfg_elem, prop_string);
+						
 			if ( !line_text )
 				line_text := "";
 			endif
+					
+			(book_info.contents).Append(line_text);
 		
-			book_info.Append(line_text);
-		
 			sleepms(2);
 		endfor
 		sleepms(2);



From austin at berlios.de  Fri Sep 30 05:13:08 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 05:13:08 +0200
Subject: [Poldistro-svn] r325 - in trunk/096/pkg/items/sysbook: book commands/gm include
Message-ID: <200509300313.j8U3D8Oe016421@sheep.berlios.de>

Author: austin
Date: 2005-09-30 05:13:08 +0200 (Fri, 30 Sep 2005)
New Revision: 325

Modified:
   trunk/096/pkg/items/sysbook/book/methods.src
   trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src
   trunk/096/pkg/items/sysbook/include/zuluBooks.inc
Log:


Modified: trunk/096/pkg/items/sysbook/book/methods.src
===================================================================
--- trunk/096/pkg/items/sysbook/book/methods.src	2005-09-30 03:08:14 UTC (rev 324)
+++ trunk/096/pkg/items/sysbook/book/methods.src	2005-09-30 03:13:08 UTC (rev 325)
@@ -202,6 +202,14 @@
 	return book_info;
 endfunction
 
+exported function GetNumPages(book)
+	return CInt(GetInfo(book, "NumPages"));
+endfunction
+
+exported function SetNumPages(book, num_pages)
+	return SetInfo(book, "NumPages", CInt(num_pages));
+endfunction
+
 //++++++++++++++++++++++++++++
 // Internal/Private Functions
 //++++++++++++++++++++++++++++

Modified: trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src
===================================================================
--- trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src	2005-09-30 03:08:14 UTC (rev 324)
+++ trunk/096/pkg/items/sysbook/commands/gm/zulubooks.src	2005-09-30 03:13:08 UTC (rev 325)
@@ -68,6 +68,7 @@
 	endforeach
 	
 	book.ReadOnly(1);
+	book.SetNumPages(book_info.NumPages);
 	
 	SendSysMessage(mobile, "Done!");
 	

Modified: trunk/096/pkg/items/sysbook/include/zuluBooks.inc
===================================================================
--- trunk/096/pkg/items/sysbook/include/zuluBooks.inc	2005-09-30 03:08:14 UTC (rev 324)
+++ trunk/096/pkg/items/sysbook/include/zuluBooks.inc	2005-09-30 03:13:08 UTC (rev 325)
@@ -88,8 +88,9 @@
 	var book_info := struct;
 	book_info.+Author := cfg_elem.Author;
 	book_info.+Title := cfg_elem.Title;
+	book_info.+NumPages := CInt(cfg_elem.Pages);
 	book_info.+Contents := array;
-
+	
 	var num_pages := CInt(cfg_elem.Pages);
 	var page_num := 1;
 	for ( page_num; page_num <= num_pages; page_num:=page_num+1 )



From muaddiblsd at berlios.de  Fri Sep 30 08:59:37 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Fri, 30 Sep 2005 08:59:37 +0200
Subject: [Poldistro-svn] r326 - in trunk/096/pkg: skills/blacksmithy systems/crafting/config systems/crafting/include
Message-ID: <200509300659.j8U6xbs7007464@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-30 08:59:24 +0200 (Fri, 30 Sep 2005)
New Revision: 326

Modified:
   trunk/096/pkg/skills/blacksmithy/SmithMenu.cfg
   trunk/096/pkg/skills/blacksmithy/makeBlacksmithItems.src
   trunk/096/pkg/systems/crafting/config/craftConfig.cfg
   trunk/096/pkg/systems/crafting/include/craftGumps.inc
   trunk/096/pkg/systems/crafting/include/crafting.inc
Log:


Modified: trunk/096/pkg/skills/blacksmithy/SmithMenu.cfg
===================================================================
--- trunk/096/pkg/skills/blacksmithy/SmithMenu.cfg	2005-09-30 03:13:08 UTC (rev 325)
+++ trunk/096/pkg/skills/blacksmithy/SmithMenu.cfg	2005-09-30 06:59:24 UTC (rev 326)
@@ -24,8 +24,8 @@
 Craftitem Index
 {
         Title   <center>Blacksmith Selection Menu</center>
-        Skill   blacksmithy
-        SkillID blacksmithy
+        Skill   Blacksmithy
+        SkillID Blacksmithy
 	Group	Axes
 	Group	Blades
 	Group	Blunt

Modified: trunk/096/pkg/skills/blacksmithy/makeBlacksmithItems.src
===================================================================
--- trunk/096/pkg/skills/blacksmithy/makeBlacksmithItems.src	2005-09-30 03:13:08 UTC (rev 325)
+++ trunk/096/pkg/skills/blacksmithy/makeBlacksmithItems.src	2005-09-30 06:59:24 UTC (rev 326)
@@ -1,6 +1,5 @@
 // //$Id$
 
-use math;
 use cfgfile;
 use util;
 
@@ -14,7 +13,6 @@
 
 var item_config     := ReadConfigFile(":*:itemdesc");
 var craft_config    := ReadConfigFile(":blacksmithy:blacksmithy");
-var resource_config := ReadConfigFile(":crafting:config/resourceList");
 
 program use_SmithTool(who, tool)
 
@@ -35,7 +33,7 @@
 	EraseObjProperty(who, "IsMeditating");
 	EraseObjProperty(who, "HealTimer");
 
-	var rinfo := sendCraftGump(who, "blacksmithy");
+	var rinfo := sendCraftGump(who, "Blacksmithy");
 
 	// OK was pressed, close it on out
 	if(rinfo == 0)
@@ -62,74 +60,76 @@
 
 function makeBlacksmithItems(who, what, amt, tool)
 
-  if(!what)
-    SendSysMessage(who, "Cancelled");
-    return;
-  endif
-  var anvil_near := 0;
-  foreach item in ListItemsNearLocation(who.x, who.y, who.z, 3)
-    if((item.objtype == 0x0faf) || (item.objtype == 0x0fb0))
-      anvil_near := 1;
-      break;
-    endif
-  endforeach
-  if(anvil_near == 0)
-    SendSysMessage(who, "You must be near an anvil to smith items.");
-    return;
-  endif
+	if(!what)
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	endif
 
-  // Metal is sent for the ResourceList entry type.
-  var itemchk := MaterialSelection(who, craft_skill, lower("Metal"));
-  if(!itemchk)
-    return;
-  endif
-  var use_on := itemchk[1];
-  var ptmod := itemchk[3];
+	var anvil_near := 0;
+	foreach item in ListItemsNearLocation(who.x, who.y, who.z, 3)
+		if((item.objtype == 0x0faf) || (item.objtype == 0x0fb0))
+			anvil_near := 1;
+			break;
+		endif
+	endforeach
+	if(anvil_near == 0)
+		SendSysMessage(who, "You must be near an anvil to smith items.");
+		return 0;
+	endif
 
-  var num, theitem;
-  var itemname := craft_config[what].name;
-  var material := Cint(craft_config[what].material);
-  var reqd := Cint(craft_config[what].skill);
-  var diff := Cint(craft_config[what].difficulty);
-  var pts  := Cint(craft_config[what].points);
-  pts      := CInt(pts + ptmod);
-  var counter := 0, x := who.x, y := who.y;
+	// Metal is sent for the ResourceList entry type.
+	var itemchk := MaterialSelection(who, craft_skill, lower("Metal"));
+	if(!itemchk)
+		return 0;
+	endif
+	var use_on := itemchk[1];
+	var ptmod := itemchk[3];
 
-  while(counter < amt)
-    if((who.x != x) || (who.y != y))
-      SendSysMessage(who, "You stop smithing.");
-      break;
-    endif
-    if(!tool)
-      break;
-    endif
-    sleep(2);
-    if(GetAmount(use_on) >= material)
-      if(CraftCheckSkill(who, craft_skill, diff, pts))
-        playCraftWork(who, SFX_ANVIL);
-        sleep(2);
-        theitem := CreateCraftItem(who, craft_skill, use_on, use_on.objtype, what, material, itemname, reqd);
-        if(theitem or theitem != 0)
-          CheckToolWear (who, tool, craft_skill);
-        else
-          SubtractAmount(use_on, (material / 2));
-          SendSysMessage(who, "You failed to create the item, and some of your materials are lost.");
-          counter := counter + 1;
-          continue;
-        endif
-      else
-        num := CInt(randomint(material)/2) + 1;
-        if(SubtractAmount(use_on, num))
-          SendSysMessage(who, "You lost some metal");
-        endif
-      endif
-    else
-      SendSysMessage(who, "You don't have the resources required to make that item.");
-      counter := 100;
-      break;
-    endif
-    counter := counter + 1;
-  endwhile
-  return;
+	var num, theitem;
+	var itemname := craft_config[what].name;
+	var material := Cint(craft_config[what].material);
+	var reqd := Cint(craft_config[what].skill);
+	var diff := Cint(craft_config[what].difficulty);
+	var pts  := Cint(craft_config[what].points);
+	pts      := CInt(pts + ptmod);
+	var counter := 0, x := who.x, y := who.y;
 
+	while(counter < amt)
+		if((who.x != x) || (who.y != y))
+			SendSysMessage(who, "You stop smithing.");
+			break;
+		endif
+		if(!tool)
+			break;
+		endif
+
+		sleep(2);
+
+		if(GetAmount(use_on) >= material)
+			if(CraftCheckSkill(who, craft_skill, diff, pts))
+				theitem := CreateCraftItem(who, craft_skill, use_on, use_on.objtype, what, material, itemname, reqd);
+				if( TypeOf(theitem) != "ItemRef" )
+					SubtractAmount(use_on, (material / 2));
+					SendSysMessage(who, "You failed to create the item, and some of your materials are lost.");
+					counter := counter + 1;
+					continue;
+				else
+					CheckToolWear (who, tool, craft_skill);
+				endif
+			else
+				num := CInt(randomint(material)/2) + 1;
+				if(SubtractAmount(use_on, num))
+					SendSysMessage(who, "You lost some metal");
+				endif
+			endif
+		else
+			SendSysMessage(who, "You don't have the resources required to make that item.");
+			counter := 100;
+			break;
+		endif
+		counter := counter + 1;
+	endwhile
+
+	return 0;
+
 endfunction

Modified: trunk/096/pkg/systems/crafting/config/craftConfig.cfg
===================================================================
--- trunk/096/pkg/systems/crafting/config/craftConfig.cfg	2005-09-30 03:13:08 UTC (rev 325)
+++ trunk/096/pkg/systems/crafting/config/craftConfig.cfg	2005-09-30 06:59:24 UTC (rev 326)
@@ -30,10 +30,12 @@
 #
 # Crafting alchemy	Exists for EACH skill in skill list above. Settings per skill
 # {
-#	Name		Name you want. Must match what is sent by skill to gump command.
+#	Name		The Attribute it uses from Attributes.cfg
 #	Attribute	The Attribute it uses from Attributes.cfg
+#	CraftLoops	The amount of loops to play the anim/sound/delay
 #	CraftDelay	The delay between each loop while crafting items
 #	CraftAnim	The animation (0 if none) to play during each loop
+#	CraftSound	The sound to play in the loops
 #	Repair		0/1 Off/On for giving the Repair button in gump
 #	Smelt		0/1 Off/On for giving the Resmelt button in gump
 #	MakersMark	0/1 Off/On for giving the Add Makers Mark button
@@ -49,7 +51,15 @@
 # The exceptional name string, is prepended before the crafter's name in the brackets "[]".
 #
 ######################################################################################
-
+#
+# It is always best to name the Skill entry and Crafting element the exact same as the
+# Attributes.cfg entry for the skill you wish it to be. This will make it easier to
+# keep track of.
+#
+# The Name entry in Crafting elements is used as the Display name for skills in Info
+# Gumps.
+#
+######################################################################################
 Crafting Setup
 {
 	MaxAmount	10
@@ -62,11 +72,11 @@
 Crafting Skills
 {
 	Skill	alchemy
-        Skill   blacksmithy
+        Skill   Blacksmithy
         Skill   carpentry
         Skill   cartography
 	Skill	cooking
-	Skill	fletching
+	Skill	BowcraftFletching
 	Skill	inscription
 	Skill	tailoring
 	Skill	tinkering
@@ -87,13 +97,14 @@
 	ExceptionalName	brewed by
 }
 
-Crafting blacksmithy
+Crafting Blacksmithy
 {
 	Name		blacksmithy
-	Attribute	blacksmithy
+	Attribute	Blacksmithy
 	CraftDelay	2
 	CraftLoops	0
 	CraftAnim	0
+	CraftSound	0x002b
 	Repair		1
 	Smelt		1
 	MakersMark	1
@@ -146,17 +157,19 @@
 	ExceptionalName	cooked by
 }
 
-Crafting fletching
+Crafting BowcraftFletching
 {
-	Name		fletching
-	Attribute	fletching
+	Name		bowcraft
+	Attribute	BowcraftFletching
 	CraftDelay	2
 	CraftLoops	0
 	CraftAnim	0
+	CraftSound	0x5a
 	Repair		1
 	Smelt		0
 	MakersMark	1
 	RetainColor	1
+	MenuFile	:bowcraft:FletchMenu
 	ExceptionalName	fletched by
 }
 

Modified: trunk/096/pkg/systems/crafting/include/craftGumps.inc
===================================================================
--- trunk/096/pkg/systems/crafting/include/craftGumps.inc	2005-09-30 03:13:08 UTC (rev 325)
+++ trunk/096/pkg/systems/crafting/include/craftGumps.inc	2005-09-30 06:59:24 UTC (rev 326)
@@ -16,6 +16,13 @@
 	var menu_file    := menu_config[skill_name].MenuFile;
 	var skill_config := ReadConfigFile(menu_file);
 	craft_skill      := menu_config[skill_name].Attribute;
+	display_skill    := menu_config[skill_name].Name;
+	// Craft Cprop is a dictionary storing the information for each crafting skill
+	craft_settings := GetObjProperty(who, "Craft");
+	if( TypeOf(craft_settings) != "Dictionary" )
+		craft_settings := cBaseCraftDict();
+		SetObjProperty(who, "Craft", craft_settings);
+	endif
 
 	while( 1 )
 
@@ -96,11 +103,11 @@
 		endif
 
 		// Sets the amount you had entered into an array to return to crafting
-		atc := Cint(SplitWords(res[1998])[2]);
+		atc := CInt(GFExtractData(res, atc));
 		if(!atc || CInt(atc) < 1)
 			atc := 1;
-		elseif(atc > CInt(menu_config[skill_name].MaxAmount))
-			SendSysMessage(who, "You can only make between 1 and " + menu_config[skill_name].MaxAmount + " at a time.");
+		elseif(atc > CInt(menu_config["Setup"].MaxAmount))
+			SendSysMessage(who, "You can only make between 1 and " + menu_config["Setup"].MaxAmount + " at a time.");
 			return 0;
 		endif
 		craft_settings[skill_name].amount := atc;
@@ -124,13 +131,6 @@
 	var menu_file    := menu_config[skill_name].MenuFile;
 	var skill_config := ReadConfigFile(menu_file);
 
-	// Craft Cprop is a dictionary storing the information for each crafting skill
-	craft_settings := GetObjProperty(who, "Craft");
-	if( TypeOf(craft_settings) != "Dictionary" )
-		craft_settings := cBaseCraftDict();
-		SetObjProperty(who, "Craft", craft_settings);
-	endif
-
 	// Now let's get the amount, based on the menu file) from the Cprop.
 	atc := craft_settings[skill_name].amount;
 	// If it == nothing, or is an error, set it to 1. Error should never occur, but, just in case.
@@ -476,7 +476,7 @@
 	// Item Name
 	GFHTMLArea(gump, 330, 40, 150, 20, ("<basefont color=#ffffff>"+itemdesc));
 	// Skill name
-	GFHTMLArea(gump, 170, 132, 150, 20, ("<basefont color=#ffffff>"+craft_skill + " required"));
+	GFHTMLArea(gump, 170, 132, 150, 20, ("<basefont color=#ffffff>"+display_skill + " required"));
 
 	if((skillreqb > 0) && (skillreqb != error))
 		// Skill 2 name
@@ -500,7 +500,7 @@
 	var baseDict  := dictionary;
 	foreach skillentry in GetConfigStringArray(menu_config["Skills"], "Skill")
 		var temp := dictionary;
-		temp.+skill  := menu_config[skillentry].Name;
+		temp.+skill  := menu_config[skillentry].Attribute;
 		temp.+amount := CInt(menu_config["Setup"].DefaultAmount);
 		temp.+mark   := CInt(menu_config[skillentry].MakersMark);
 		temp.+retain := CInt(menu_config[skillentry].RetainColor);

Modified: trunk/096/pkg/systems/crafting/include/crafting.inc
===================================================================
--- trunk/096/pkg/systems/crafting/include/crafting.inc	2005-09-30 03:13:08 UTC (rev 325)
+++ trunk/096/pkg/systems/crafting/include/crafting.inc	2005-09-30 06:59:24 UTC (rev 326)
@@ -9,41 +9,6 @@
 //  Purpose: Functions for creating crafting menus, info menus, item creation, resource selection,
 //           skill gain, etc.
 //
-//  Notes:   Acknowledgement to Valkyrie and Austin for coding ideas, based off a combination of a
-//           work-in-progress of her's, and mine both
-//
-//  Changes: Sept 5, 2005 -- TruncatePlural() replaced. New function by Austin.
-//                        -- Did some comment changes, removed unused variables and functions.
-//                        -- Removed requirement for an altered gumpUtil.inc. Can use standard
-//                           Distro version now.
-//           Sept 6, 2005 -- Info Gump changed in respect with Parts for Assembly items. For items
-//                           that use less than 5 parts, each item is listed seperately now. If
-//                           it contains 5 or more parts, it gives the old HTML method giving them
-//                           in a sentence form, for more custom and ingenious assembly items requiring
-//                           much more to craft (ewwwwww).
-//                        -- Material and Material Name areas both now use a HTML gump area for
-//                           showing their text for Assembly. Less code and less bandwidth.
-//                        -- Matierial and Material name for standard, and dual material, items are
-//                           now handled via the HTML gump method as parts. MUCH less code and bw
-//                           are the end result for this change also.
-//                        -- Added function playCraftWork(). This function is used to display a craft
-//                           skill's action animation, sound, the loops to do it in, and the delay
-//                           between loops. Sound is required, loops defaults to 0 if none sent, and
-//                           delay defaults to 2 seconds if none sent, Action defaults to 0 (none) if
-//                           none sent. All delays are in seconds.
-//           Sept 7, 2005 -- Optimized a TON of if/else and if/elseif statements by converting them
-//                           to case() statements where possible in the main menu's code and the info
-//                           screen code.
-//                        -- Altered most buttons out of the 1000 and 8000 range due to possible
-//                           objtype conflicts. Info buttons now use 61500 through 62000. Repair,
-//                           smelt, maker's mark, and retain color all converted also for this bug.
-//           Sept 8, 2005 -- Changed TruncatePlural() to return a struct{errortext} if it could
-//                           not find a "name" or "desc" entry for an itemdesc.cfg entry.
-//                        -- Changed DrawNewPage to skip items with invalid Objtype names given
-//                           in the Menu file, and with invalid objtype returned from TruncatePlural().
-//           Sep 14, 2005 -- Redid code to set Last Item cprop checks.
-//
-//
 //  To-Do:   1.) Break this down even more. Such as "crafting_menu.inc", "crafting_skill.inc",
 //               "crafting_util.inc", and so on.
 //           2.) Centralize Crafting Package. Move the skills.cfg information BACK into the
@@ -81,7 +46,10 @@
 include ":gumps:include/gumps";
 include ":gumps:include/gumps_ex";
 
+var resource_config := ReadConfigFile(":crafting:config/resourceList");
+
 var craft_skill;
+var display_skill;
 var craftL    := 0;
 var rcolor    := 1;
 var makermark := 1;
@@ -162,224 +130,237 @@
 // special resources for crafting here also.
 function CreateCraftItem(who, craft_skill, use_on, use_onobjtype, objtype, amount, itemname, reqd)
 
- var theitem := CreateItemInBackpack(who, objtype, 1);
- var elem    := FindConfigElem(resource_config, use_onobjtype);
- if(theitem)
-   var nme := (resource_config[use_onobjtype].Name) + " " + itemname;
-   if(find(nme, "plain ", 1))
-     nme[find(nme, "plain ", 1),6] := "";
-   endif
-   if((rcolor == 1) && (craft_config[objtype].retain == 1))
-     if(resource_config[use_onobjtype].Color)
-       theitem.color := resource_config[use_onobjtype].Color;
-     else
-       theitem.color := use_on.color;
-     endif
-   endif
-   SetObjProperty(theitem, "material", use_onobjtype);
-   if(!SubtractAmount(use_on, amount))
-     SendSysMessage(who, "You don't have enough materials in your backpack!");
-     DestroyItem(theitem);
-     return -1;
-   endif
-   var myskill := CDbl(AP_GetSkill(who, craft_skill));
-   var aidskill := CDbl(AP_GetSkill(who, craft_config[objtype].skillID));
-   // This snags the Qualities of the resource to use on item creation.
-   // Format in the cfg for Quality is <dmg mod> <ar mod> <hp mod>.
-   // 0 for a mod means there isn't one. Space delimited in the cfg,
-   // this allows us to simply use SplitWords on it to make the array
-   // of each of the settings.
-   var temp := GetConfigString(elem, "Quality");
-   temp := SplitWords(temp);
-   var power  := GetConfigString(elem, "Power");
-   if( (TypeOf(power) != "String") )
-     power := 0;
-   endif
-   var wpower := GetConfigString(elem, "WPower");
-   if( (TypeOf(wpower) != "String") )
-     wpower := 0;
-   endif
-   if((craft_config[objtype].Exceptional == 1) && (ExceptionalCraft(myskill, reqd, aidskill)))
-//     AwardPoints(who, craft_skill, 1);
-     SetObjProperty(theitem, "Exceptional", 1);
-     if( TypeOf(craft_config[objtype].skillID) == "String" )
-//       AwardPoints(who, Cint(craft_config[objtype].skillID), 1);
-     endif
-     if((craft_config[objtype].Mark == 1))
-       if((makermark == 1) && (myskill >= 100))
-         nme := "an exceptional " + nme + " [Crafted by " + who.name + "]";
-       else
-         nme := "an exceptional " + nme;
-       endif
-     else
-       nme := "an exceptional " + nme;
-     endif
-     if(theitem.isA(POLCLASS_WEAPON))
-       theitem.dmg_mod := CInt(temp[1])+(RandomInt(4));
-     elseif(theitem.isA(POLCLASS_ARMOR))
-       theitem.ar_mod := CInt(temp[2])+(RandomInt(4));
-     endif
-     theitem.maxhp_mod := CInt(temp[3])+(RandomInt(11));
-     theitem.hp := theitem.maxhp;
-     SendSysMessage(who, "You create an exceptional quality item.");
-   else
-     var rint := randomint(AP_GetSkill(who, craft_skill));
-     if(reqd >= 23)
-       reqd := reqd - 20;
-     else
-       reqd := 3;
-     endif
-     if(rint < reqd)
-       SendSysMessage(who, "You were barely able to make this item.  Its quality is below average.");
-       if(theitem.isA(POLCLASS_WEAPON))
-         theitem.dmg_mod := CInt(temp[1])-(RandomInt(2)+1);
-       elseif(theitem.isA(POLCLASS_ARMOR))
-         theitem.ar_mod := CInt(temp[2])-(RandomInt(2)+1);
-       endif
-       theitem.maxhp_mod := CInt(temp[3])-(RandomInt(10)+1);
-       theitem.hp := theitem.maxhp;
-     else
-       SendSysMessage(who, "You create the item and put it in your backpack.");
-       if(theitem.isA(POLCLASS_WEAPON))
-         theitem.dmg_mod := CInt(temp[1]);
-       elseif(theitem.isA(POLCLASS_ARMOR))
-         theitem.ar_mod := CInt(temp[2]);
-       endif
-       theitem.maxhp_mod := CInt(temp[3]);
-       theitem.hp := theitem.maxhp;
-     endif
-     var word := "";
-     if((nme[1] == "a") || (nme[1] == "e") || (nme[1] == "i") || (nme[1] == "o") || (nme[1] == "u"))
-       word := "an ";
-     else
-       word := "a ";
-     endif
-     nme := "" + word + nme;
-     nme := nme - "plain ";
-   endif
-   SetName(theitem, nme);
-   if(theitem.isA(POLCLASS_CONTAINER))
-     SetObjProperty(theitem, "trappable", 1);
-   elseif(theitem.isA(POLCLASS_ITEM))
-     SetToolDurability(who, theitem, craft_skill);
-   endif
-//   if((power) && (theitem.isa(POLCLASS_ARMOR)))
-//     SetObjProperty(theitem, "power", power);
-//     theitem.equipscript := "equiparmor";
-//     theitem.unequipscript := "unequiparmor";
-//   elseif((wpower == "SILVER") && theitem.isA(POLCLASS_WEAPON))
-//     SetObjProperty(theitem, "SilverHit", 1);
-//   elseif(wpower && theitem.isA(POLCLASS_WEAPON))
-//     SetObjProperty(theitem, "wpower", power);
-//     theitem.equipscript := "equipweapon";
-//     theitem.unequipscript := "unequipweapon";
-//   endif
- else
-   SendSysMessage(who, "You don't have enough room in your backpack!");
-   return 0;
- endif
+	var craft_sound  := menu_config[craft_skill].CraftSound;
+	var craft_loops  := menu_config[craft_skill].CraftLoops;
+	var craft_delay  := menu_config[craft_skill].CraftDelay;
+	var craft_action := menu_config[craft_skill].CraftAnim;
+	playCraftWork(who, craft_sound, craft_loops, craft_delay, craft_action);
 
- return theitem;
+	var theitem := CreateItemInBackpack(who, objtype, 1);
+	var elem    := FindConfigElem(resource_config, use_onobjtype);
+	if(theitem)
+		var nme := (resource_config[use_onobjtype].Name) + " " + itemname;
+		if(find(nme, "plain ", 1))
+			nme[find(nme, "plain ", 1),6] := "";
+		endif
+		if((rcolor == 1) && (craft_config[objtype].retain == 1))
+			if(resource_config[use_onobjtype].Color)
+				theitem.color := resource_config[use_onobjtype].Color;
+			else
+				theitem.color := use_on.color;
+			endif
+		endif
+		SetObjProperty(theitem, "material", use_onobjtype);
+		if(!SubtractAmount(use_on, amount))
+			SendSysMessage(who, "You don't have enough materials in your backpack!");
+			DestroyItem(theitem);
+			return -1;
+		endif
+		var myskill := CDbl(AP_GetSkill(who, craft_skill));
+		var aidskill := CDbl(AP_GetSkill(who, craft_config[objtype].skillID));
+		// This snags the Qualities of the resource to use on item creation.
+		// Format in the cfg for Quality is <dmg mod> <ar mod> <hp mod>.
+		// 0 for a mod means there isn't one. Space delimited in the cfg,
+		// this allows us to simply use SplitWords on it to make the array
+		// of each of the settings.
+		var temp := GetConfigString(elem, "Quality");
+		temp := SplitWords(temp);
+		var power  := GetConfigString(elem, "Power");
+		if( (TypeOf(power) != "String") )
+			power := 0;
+		endif
+		var wpower := GetConfigString(elem, "WPower");
+		if( (TypeOf(wpower) != "String") )
+			wpower := 0;
+		endif
+		if((craft_config[objtype].Exceptional == 1) && (ExceptionalCraft(myskill, reqd, aidskill)))
+	//		AwardPoints(who, craft_skill, 1);
+			SetObjProperty(theitem, "Exceptional", 1);
+	//		if( TypeOf(craft_config[objtype].skillID) == "String" )
+	//			AwardPoints(who, Cint(craft_config[objtype].skillID), 1);
+	//		endif
+			if((craft_config[objtype].Mark == 1))
+				if((makermark == 1) && (myskill >= 100))
+					nme := "an exceptional " + nme + " [Crafted by " + who.name + "]";
+				else
+					nme := "an exceptional " + nme;
+				endif
+			else
+				nme := "an exceptional " + nme;
+			endif
+			if(theitem.isA(POLCLASS_WEAPON))
+				theitem.dmg_mod := CInt(temp[1])+(RandomInt(4));
+			elseif(theitem.isA(POLCLASS_ARMOR))
+				theitem.ar_mod := CInt(temp[2])+(RandomInt(4));
+			endif
+			theitem.maxhp_mod := CInt(temp[3])+(RandomInt(11));
+			theitem.hp := theitem.maxhp;
+			SendSysMessage(who, "You create an exceptional quality item.");
+		else
+			var rint := randomint(AP_GetSkill(who, craft_skill));
+			if(reqd >= 23)
+				reqd := reqd - 20;
+			else
+				reqd := 3;
+			endif
+			if(rint < reqd)
+				SendSysMessage(who, "You were barely able to make this item.  Its quality is below average.");
+				if(theitem.isA(POLCLASS_WEAPON))
+					theitem.dmg_mod := CInt(temp[1])-(RandomInt(2)+1);
+				elseif(theitem.isA(POLCLASS_ARMOR))
+					theitem.ar_mod := CInt(temp[2])-(RandomInt(2)+1);
+				endif
+				theitem.maxhp_mod := CInt(temp[3])-(RandomInt(10)+1);
+				theitem.hp := theitem.maxhp;
+			else
+				SendSysMessage(who, "You create the item and put it in your backpack.");
+				if(theitem.isA(POLCLASS_WEAPON))
+					theitem.dmg_mod := CInt(temp[1]);
+				elseif(theitem.isA(POLCLASS_ARMOR))
+					theitem.ar_mod := CInt(temp[2]);
+				endif
+				theitem.maxhp_mod := CInt(temp[3]);
+				theitem.hp := theitem.maxhp;
+			endif
+			var word := "";
+			if((nme[1] == "a") || (nme[1] == "e") || (nme[1] == "i") || (nme[1] == "o") || (nme[1] == "u"))
+				word := "an ";
+			else
+				word := "a ";
+			endif
+			nme := "" + word + nme;
+			nme := nme - "plain ";
+		endif
+		SetName(theitem, nme);
+		if(theitem.isA(POLCLASS_CONTAINER))
+			SetObjProperty(theitem, "trappable", 1);
+		elseif(theitem.isA(POLCLASS_ITEM))
+			SetToolDurability(who, theitem, craft_skill);
+		endif
+		if((power) && (theitem.isa(POLCLASS_ARMOR)))
+			SetObjProperty(theitem, "power", power);
+	//		theitem.equipscript := "equiparmor";
+	//		theitem.unequipscript := "unequiparmor";
+		elseif((wpower == "SILVER") && theitem.isA(POLCLASS_WEAPON))
+			SetObjProperty(theitem, "SilverHit", 1);
+		elseif(wpower && theitem.isA(POLCLASS_WEAPON))
+			SetObjProperty(theitem, "wpower", wpower);
+	//		theitem.equipscript := "equipweapon";
+	//		theitem.unequipscript := "unequipweapon";
+		endif
+	else
+		SendSysMessage(who, "You don't have enough room in your backpack!");
+		return 0;
+	endif
 
+	return theitem;
+
 endfunction
 
 // This function is used to create items that are marked "assemble" in the
 // crafting configs. Reads a prop from the cfg entry for a list of parts and
 // their amounts then checks the player's backpack for the items and works it.
-function CreateAssembly(who, tool, objtype, amt)
+function CraftAssembly(who, craft_skill, tool, objtype, amt)
 
-  var skill := craft_config[objtype].skill, theitem;
-  var mainSkill := CInt(AP_GetSkill(who, craft_skill));
-  var modpts := 0;
-  if(mainSkill >= skill)
-    modpts := (mainSkill - (skill - 10));
-  endif
-  var diff := Cint(craft_config[objtype].difficulty);
-  var pts  := Cint(craft_config[objtype].points);
-  pts := pts + modpts;
-  var counter := 0, chk := 0;
-  // Get a list of the parts from the cfg entry. Format from config is listed in cfg
-  // header. Objtypes first, then amount for each objtype, in the same respective order.
-  // To match them together, we divid the length of the array by 2 then use that.
-  // Example : mod := len(array)/2;
-  // Example2: objtype := array[x]; amt := array[x+mod];
-  var partslist := SplitWords(craft_config[objtype].parts);
-  if(!partslist or partslist.errortext)
-    SendSysMessage(who, "This item does not require parts to be made! Contact a GM.");
-    return;
-  endif
-  var mod := len(partslist)/2;
-  var partcounter, partarray, checker;
-  var x := who.x, y := who.y;
+	var craft_sound  := menu_config[craft_skill].CraftSound;
+	var craft_loops  := menu_config[craft_skill].CraftLoops;
+	var craft_delay  := menu_config[craft_skill].CraftDelay;
+	var craft_action := menu_config[craft_skill].CraftAnim;
 
-  while(counter < amt)
-    if((who.x != x) || (who.y != y))
-      break;
-    endif
-    if(chk == 1)
-      break;
-    endif
-    partarray := {};
-    checker := 0;
-    chk := 0;
-    // We use the Enumerate in a variable like this so as to work with it
-    // as an array. This way no need to enumerate every for/endfor cycle.
-    var blist := EnumerateItemsInContainer(who.backpack);
-    for i := 1 to mod
-      partcounter := 0;
-      foreach thing in blist
-        // If thing.objtype is the same as the objtype in the part list array position....
-        if(CInt(thing.objtype) == CInt(partslist[i]))
-          // If the amount is less than the counter for this item type, append it to the
-          // array for deletion later.
-          if(partcounter < CInt(partslist[i+mod]))
-            if(ReserveItem(thing))
-              partarray.append(thing);
-              partcounter := partcounter + 1;
-            endif
-          endif
-        endif
-      endforeach
-      // We add 2 to the checker var here once all required peices are added. We use
-      // this later to divide by 2. If divided by 2, it equals the mod variable, we know
-      // all the required peices are in their backpack. That works, because it is the same
-      // method for the partslist array which is an amount entry for each objtype entry.
-      // Sure, we could use 1, then divide the mod by 2 also for this to work. But I was
-      // in one of my moods ;)
-      if(partcounter == CInt(partslist[i+mod]))
-        checker := checker + 2;
-      endif
-    endfor
-    if((checker /2) != mod)
-      SendSysMessage(who, "You do not have the required materials to make that.");
-      return;
-    else
-      sleep(2);
-      if(CraftCheckSkill(who, mainSkill, diff, pts))
-        PlaySoundEffect(who, 0x23e);
-        sleep(2);
-        foreach thing in partarray
-          if(!DestroyItem(thing))
-            SendSysMessage(who, "You do not have the ready materials to make that.");
-            return;
-          endif
-        endforeach
-        theitem := CreateItemInBackpack(who, objtype, 1);
-        if(!theitem)
-          SendSysMessage(who, "You don't have enough room in your backpack!");
-          return 0;
-        endif
-        CheckToolWear (who, tool, mainSkill);
-        theitem.movable := 1;
-        SendSysMessage(who, "You create the item and put it in your backpack.");
-      endif
-    endif
-    if(theitem.isA(POLCLASS_CONTAINER))
-      SetObjProperty(theitem, "trappable", 1);
-    endif
-    counter := counter + 1;
-  endwhile
+	var skill := craft_config[objtype].skill;
+	var theitem;
+	var mainSkill := CInt(AP_GetSkill(who, craft_skill));
+	var modpts := 0;
+	if(mainSkill >= skill)
+		modpts := (mainSkill - (skill - 10));
+	endif
+	var diff := Cint(craft_config[objtype].difficulty);
+	var pts  := Cint(craft_config[objtype].points);
+	pts := pts + modpts;
+	var counter := 0;
+	var chk := 0;
 
+	// Get a list of the parts from the cfg entry. Format from config is listed in cfg
+	// header. Objtypes first, then amount for each objtype, in the same respective order.
+	// To match them together, we divid the length of the array by 2 then use that.
+	// Example : mod := len(array)/2;
+	// Example2: objtype := array[x]; amt := array[x+mod];
+	var parts_list := SplitWords(craft_config[objtype].parts);
+	if( TypeOf(parts_list) != "Array" || !parts_list )
+		SendSysMessage(who, "This item does not require parts to be made! Contact a GM.");
+		return 0;
+	endif
+	var temp_list := dictionary;
+	for i := 1 to (parts_list.size()/2)
+		temp_list[CInt(parts_list[i])] := parts_list[i+(parts_list.size()/2)];
+	endfor
+	parts_list := temp_list;
+
+	var material_list := dictionary;
+	var x := who.x;
+	var y := who.y;
+
+	while(counter < amt)
+		if((who.x != x) || (who.y != y))
+			break;
+		endif
+		if(chk == 1)
+			break;
+		endif
+
+		chk := 0;
+
+		foreach thing in EnumerateItemsInContainer(who.backpack)
+			// If thing.objtype is the same as the objtype in the part list array position....
+			var thing_objtype := CInt(thing.objtype);
+			if( thing_objtype in parts_list.keys() )
+				if( CInt(material_list[thing_objtype]) < CInt(parts_list[thing_objtype]) )
+					if( ReserveItem(thing) )
+						material_list[thing_objtype] := CInt(material_list[thing_objtype]) + 1;
+					endif
+				endif
+			endif
+		endforeach
+
+		foreach part in ( parts_list.keys() )
+print(material_list[part]);
+print(parts_list[part]);
+			if( material_list[part] != parts_list[part] )
+				SendSysMessage(who, "You do not have the required materials to make that.");
+				return 0;
+			endif
+		endforeach
+
+		sleep(1);
+		if(CraftCheckSkill(who, craft_skill, diff, pts))
+			playCraftWork(who, craft_sound, craft_loops, craft_delay, craft_action);
+			foreach material_objtype in (material_list.keys())
+				var amount := material_list[material_objtype];
+				if ( amount > 0 )
+					if( !ConsumeSubstance(who.backpack, material_objtype, amount) )
+						SendSysMessage(who, "Error - Unable to consume ["+amount+"] of material ["+material_objtype+"]");
+						return 0;
+					endif
+				endif
+				sleepms(2);
+			endforeach
+			theitem := CreateItemInBackpack(who, objtype, 1);
+			if(!theitem)
+				SendSysMessage(who, "You don't have enough room in your backpack!");
+				return 0;
+			endif
+			CheckToolWear (who, tool, craft_skill);
+			theitem.movable := 1;
+			SendSysMessage(who, "You create the item and put it in your backpack.");
+			if(theitem.isA(POLCLASS_CONTAINER))
+				SetObjProperty(theitem, "trappable", 1);
+			endif
+		endif
+		counter := counter + 1;
+	endwhile
+
+	return 1;
+
 endfunction
 
 //



From austin at berlios.de  Fri Sep 30 11:29:46 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 11:29:46 +0200
Subject: [Poldistro-svn] r327 - trunk/096/pkg/items/sysbook/www
Message-ID: <200509300929.j8U9Tkhp003764@sheep.berlios.de>

Author: austin
Date: 2005-09-30 11:29:45 +0200 (Fri, 30 Sep 2005)
New Revision: 327

Modified:
   trunk/096/pkg/items/sysbook/www/viewbook.src
Log:


Modified: trunk/096/pkg/items/sysbook/www/viewbook.src
===================================================================
--- trunk/096/pkg/items/sysbook/www/viewbook.src	2005-09-30 06:59:24 UTC (rev 326)
+++ trunk/096/pkg/items/sysbook/www/viewbook.src	2005-09-30 09:29:45 UTC (rev 327)
@@ -1 +1,45 @@
-// $Id$
\ No newline at end of file
+use uo;
+use os;
+use http;
+
+set_priority(1);
+
+var book_serial := QueryParam("serial");
+
+program ViewBook()
+	if ( book_serial )
+		ShowBook();
+	else	
+		InputForm();
+	endif
+endprogram
+
+function InputForm()
+	WriteHTML("<FORM METHOD='GET'>");
+	WriteHTML("Serial: <INPUT TYPE='TEXT' NAME='serial'>");
+	WriteHTML("</FORM>");
+endfunction
+
+function ShowBook()
+	var book := SystemFindObjectBySerial(book_serial);
+	if ( !book.IsBook() )
+		WriteHTML("Error - Serial provided is not a book.");
+		return 0;
+	endif
+		
+	WriteHTML("Viewing Book:"+book_serial);
+	WriteHTML("<BR><HR SIZE='2' WIDTH='100%' NOSHADE>");
+	
+	WriteHTML("<P>Title: <B>"+(book.GetTitle())+"</B></P>");
+	
+	WriteHTML("<P>Author: <B>"+(book.GetAuthor())+"</B></P>");
+	
+	var contents := book.GetContents();
+	WriteHTML("<TABLE BORDER='0' CELLSPACING='4' CELLPADDING='0'>");
+	foreach line in contents
+		WriteHTML(line+"<BR>\n");
+		sleepms(10);
+	endforeach
+	WriteHTML("</TABLE>");
+endfunction
+	
\ No newline at end of file



From austin at berlios.de  Fri Sep 30 11:46:27 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 11:46:27 +0200
Subject: [Poldistro-svn] r328 - trunk/096/pkg/items/containers/corpse
Message-ID: <200509300946.j8U9kRNu006962@sheep.berlios.de>

Author: austin
Date: 2005-09-30 11:46:25 +0200 (Fri, 30 Sep 2005)
New Revision: 328

Removed:
   trunk/096/pkg/items/containers/corpse/boneControl.ecl
   trunk/096/pkg/items/containers/corpse/corpseControl.ecl
   trunk/096/pkg/items/containers/corpse/methods.ecl
Modified:
   trunk/096/pkg/items/containers/corpse/methods.src
Log:


Deleted: trunk/096/pkg/items/containers/corpse/boneControl.ecl
===================================================================
(Binary files differ)

Deleted: trunk/096/pkg/items/containers/corpse/corpseControl.ecl
===================================================================
(Binary files differ)

Deleted: trunk/096/pkg/items/containers/corpse/methods.ecl
===================================================================
(Binary files differ)

Modified: trunk/096/pkg/items/containers/corpse/methods.src
===================================================================
--- trunk/096/pkg/items/containers/corpse/methods.src	2005-09-30 09:29:45 UTC (rev 327)
+++ trunk/096/pkg/items/containers/corpse/methods.src	2005-09-30 09:46:25 UTC (rev 328)
@@ -6,6 +6,70 @@
 	return 1;
 endprogram
 
+exported function SetOwner(corpse, owner)
+	var serial;
+	if ( owner.IsA(POLCLASS_MOBILE) )
+		serial := owner.serial;
+	else
+		serial := owner;
+		owner := SystemFindObjectBySerial(owner, SYSFIND_SEARCH_OFFLINE_MOBILES);
+	endif
+	
+	SetObjProperty(corpse, "OwnerSerial", serial);
+	SetObjProperty(owner, "CorpseSerial", corpse.serial);
+	
+	return 1;
+endfunction
+
+exported function GetOwner(corpse)
+	//Function returns the corpse as the owner if no real owner can be found
+	//This situation is met when:
+	//The corpse belonged to an npc.
+	//The player character that owned the corpse was deleted.
+
+	var owner := CInt(GetObjProperty(corpse, "OwnerSerial"));
+	if ( !owner )
+		//NPC Corpse?
+		return corpse;
+	else
+		//Return the player who owns this corpse.
+		owner := SystemFindObjectBySerial(owner);
+		if ( owner )
+			return owner;
+		else
+			//Owner has been deleted - return 0
+			return corpse;
+		endif
+	endif
+	
+	// Shouldnt be possible to get here.
+	return corpse;
+endfunction
+
+exported function SetSkinned(corpse, skinner)
+	var serial;
+
+	if ( skinner.ISA(POLCLASS_MOBILE) )
+		serial := skinner.serial;
+	else
+		serial := skinner;
+	endif
+
+	var corpse_name := corpse.desc;
+	if ( !corpse_name["[skinned]"] )
+		// Add "[skinned]" to the corpse description.
+		SetName(corpse, corpse_name+" [skinned]");
+	endif
+
+	//Store the serial of who skinned the corpse.
+	SetObjProperty(corpse, "Skinned", serial);
+endfunction
+
+exported function IsSkinned(corpse)
+	return CInt(GetObjProperty(corpse, "Skinned"));
+endfunction
+
+
 exported function Gibbify(corpse, range:=10)
 	var piece_list := array
 	{



From austin at berlios.de  Fri Sep 30 11:50:36 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 11:50:36 +0200
Subject: [Poldistro-svn] r329 - trunk/096/pkg/items/containers/corpse
Message-ID: <200509300950.j8U9oa36007481@sheep.berlios.de>

Author: austin
Date: 2005-09-30 11:50:36 +0200 (Fri, 30 Sep 2005)
New Revision: 329

Modified:
   trunk/096/pkg/items/containers/corpse/methods.src
Log:


Modified: trunk/096/pkg/items/containers/corpse/methods.src
===================================================================
--- trunk/096/pkg/items/containers/corpse/methods.src	2005-09-30 09:46:25 UTC (rev 328)
+++ trunk/096/pkg/items/containers/corpse/methods.src	2005-09-30 09:50:36 UTC (rev 329)
@@ -1,3 +1,5 @@
+// $Id$
+
 use uo;
 use util;
 use os;
@@ -69,7 +71,6 @@
 	return CInt(GetObjProperty(corpse, "Skinned"));
 endfunction
 
-
 exported function Gibbify(corpse, range:=10)
 	var piece_list := array
 	{



From austin at berlios.de  Fri Sep 30 11:52:09 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 11:52:09 +0200
Subject: [Poldistro-svn] r330 - trunk/096/pkg/systems
Message-ID: <200509300952.j8U9q9c2007934@sheep.berlios.de>

Author: austin
Date: 2005-09-30 11:52:09 +0200 (Fri, 30 Sep 2005)
New Revision: 330

Removed:
   trunk/096/pkg/systems/perfmon/
Log:
Syzygy's ServPerf package replaces this.



From austin at berlios.de  Fri Sep 30 11:54:58 2005
From: austin at berlios.de (Austin Heilman at BerliOS)
Date: Fri, 30 Sep 2005 11:54:58 +0200
Subject: [Poldistro-svn] r331 - trunk/096/pkg/systems
Message-ID: <200509300954.j8U9swbD008455@sheep.berlios.de>

Author: austin
Date: 2005-09-30 11:54:57 +0200 (Fri, 30 Sep 2005)
New Revision: 331

Removed:
   trunk/096/pkg/systems/bank/
Log:
Not needed. Replaced by storage.inc in containers package.



From panosl at berlios.de  Fri Sep 30 14:18:38 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Fri, 30 Sep 2005 14:18:38 +0200
Subject: [Poldistro-svn] r332 - in trunk/096/pkg: commands/coun commands/gm skills/anatomy skills/armslore
Message-ID: <200509301218.j8UCIcem029704@sheep.berlios.de>

Author: panosl
Date: 2005-09-30 14:18:34 +0200 (Fri, 30 Sep 2005)
New Revision: 332

Added:
   trunk/096/pkg/commands/coun/counpage.src.temp
   trunk/096/pkg/commands/gm/gmpage.src.temp
   trunk/096/pkg/commands/gm/info.src.temp
   trunk/096/pkg/commands/gm/iteminfo.src.temp
   trunk/096/pkg/commands/gm/wipebank.src.temp
Removed:
   trunk/096/pkg/commands/coun/counpage.src
   trunk/096/pkg/commands/gm/gmpage.src
   trunk/096/pkg/commands/gm/info.src
   trunk/096/pkg/commands/gm/iteminfo.src
   trunk/096/pkg/commands/gm/thawme.src
   trunk/096/pkg/commands/gm/wipebank.src
Modified:
   trunk/096/pkg/commands/coun/conceal.src
   trunk/096/pkg/commands/gm/thaw.src
   trunk/096/pkg/skills/anatomy/anatomy.src
   trunk/096/pkg/skills/armslore/armsLore.src
Log:
All files that have a .temp extension need to be removed
(either deprecated by our newer packages) or rewritten.

They're not our major priority though.

Modified: trunk/096/pkg/commands/coun/conceal.src
===================================================================
--- trunk/096/pkg/commands/coun/conceal.src	2005-09-30 09:54:57 UTC (rev 331)
+++ trunk/096/pkg/commands/coun/conceal.src	2005-09-30 12:18:34 UTC (rev 332)
@@ -1,5 +1,8 @@
-//TODO: convert the remaining SendSysMessage()
-//	must check agaist cmdlevel within the script
+/* $Id$
+ *
+ * TODO: convert the remaining SendSysMessage()
+ * must check agaist cmdlevel within the script
+ */
 use uo; 
 
 include "include/log";

Deleted: trunk/096/pkg/commands/coun/counpage.src
===================================================================
--- trunk/096/pkg/commands/coun/counpage.src	2005-09-30 09:54:57 UTC (rev 331)
+++ trunk/096/pkg/commands/coun/counpage.src	2005-09-30 12:18:34 UTC (rev 332)
@@ -1,621 +0,0 @@
-use uo;
-use util;
-use os;
-
-include ":gumps:include/old/old-gumps";
-include "include/gumpUtil";
-include ":bank:bank";
-include "include/attributes";
-include ":gmtools:info";
-include ":gmtools:accountLayout";
-
-var gmpages := GetGlobalProperty("counpages");
-
-
-program textcmd_pagegm(who)
-	pagemenu(who);
-endprogram
-
-
-function pagemenu(who)
-	GFInitGump(0, 0);
-	GFPage(0);
-	GFGumpPic(0,   0,  206);
-	GFGumpPic(44,   0,  201);
-	GFGumpPic(244,   0,  201);
-	GFGumpPic(444,   0,  201);
-	GFGumpPic(840,   0,  207);
-	GFGumpPic(  0,  40,  202);
-	GFGumpPic( 44,  40, 2604);
-	GFGumpPic(244,  40, 2604);
-	GFGumpPic(444,  40, 2604);
-	GFGumpPic(840,  40,  203);
-	GFGumpPic(  0, 350,  204);
-	GFGumpPic( 44, 350,  233);
-	GFGumpPic(240, 350,  233);
-	GFGumpPic(440, 350,  233);
-	GFGumpPic(840, 350,  205);
-	GFGumpPic( 40,  35,   40);
-  GFGumpPic( 95,  35,   40);
-  GFGumpPic(185,  35,   40);
-  GFGumpPic(275,  35,   40);
-  GFGumpPic(365,  35,   40);
-  GFGumpPic(455,  35,   40);
-  GFGumpPic(545,  35,   40);
-  GFGumpPic( 40,  65,   40);
-  GFGumpPic( 95,  65,   40);
-  GFGumpPic(185,  65,   40);
-  GFGumpPic(275,  65,   40);
-  GFGumpPic(365,  65,   40);
-  GFGumpPic(455,  65,   40);
-  GFGumpPic(545,  65,   40);
-  GFGumpPic(635,  35,   40);
-  GFGumpPic(725,  35,   40);
-  GFGumpPic(745,  35,   40);
-  GFGumpPic(635,  65,   40);
-  GFGumpPic(725,  65,   40);
-  GFGumpPic(745,  65,   40);
-  GFTextLine(205,  15,    0, "Counselor Page Menu, select an option");
-  GFTextLine( 50,  80,  500, "D");
-  GFTextLine( 70,  80,  500, "G");
-  GFTextLine( 90,  80,  500, "M");
-  GFTextLine(135,  80,  500, "Name");
-  GFTextLine(295,  80,  500, "Request");
-  GFButtonPage(225,  47, 2117, 2118, 1);
-  GFButtonPage(255,  47, 2117, 2118, 2);
-  GFButtonPage(285,  47, 2117, 2118, 3);
-  GFButtonPage(315,  47, 2117, 2118, 4);
-  GFButtonPage(345,  47, 2117, 2118, 5);
-  GFButtonPage(375,  47, 2117, 2118, 6);
-  GFButtonPage(405,  47, 2117, 2118, 7);
-  GFButtonPage(435,  47, 2117, 2118, 8);
-  GFButtonPage(465,  47, 2117, 2118, 9);
-  GFButtonPage(495,  47, 2117, 2118, 10);
-  ComposeSubMenu();
-  var res := GFSendGump(who);
-  if(res[0] == 0)
-    SendSysMessage(who, "Cancelled.");
-    return;
-  else
-    var hld := Cint(res[0] / 100);
-    var ind := gmpages[hld];
-    var val := (res[0] - (hld * 100));
-    var chr := SystemFindObjectBySerial(ind[3]);
-    case(val)
-      2: gmpages := RemoveElement(gmpages, hld);
-         SetGlobalProperty("counpages", gmpages);
-         SendSysMessage(who, "Page Deleted.");
-      3: if(!chr)
-           SendSysMessage(who, "ERROR: Could not find mobile.");
-           return;
-         endif
-         MoveCharacterToLocation(who, chr.x, chr.y, chr.z, MOVECHAR_FORCELOCATION );
-         SendSysMessage(who, "Going to " + chr.name);
-      4: if(!chr)
-           SendSysMessage(who, "ERROR: Could not find mobile.");
-           return;
-         endif
-         var themessage := RequestInput(who, who.backpack, "What message would you like to send to " + chr.name + "?");
-         if (!themessage)
-           SendSysMessage(who,"Cancelled.");
-           return;
-         endif
-         SendSysMessage(chr, "Message from " + who.name + ": " + themessage);
-         foreach staff in EnumerateOnlineCharacters()
-           if ( (staff.cmdlevel == 5) && (GetObjProperty(staff, "HearMsgs") ) )
-             SendSysMessage(staff, "Msg from " + who.name + " to " + chr.name + ": " + themessage);
-           endif
-         endforeach
-    endcase
-  endif
-  pagemenu(who);
-endfunction
-
-function ComposeSubMenu()
-	var num := 1;
-	var amt := 2;
-	var who, txt, ser, i;
-	var val := 1;
-	GFPage(1);
-	foreach thing in gmpages
-		if (num > 10)
-			GFPage(amt);
-			amt := amt + 1;
-			num := 1;
-		endif
-		who := thing[1];
-		txt := thing[2];
-		ser := thing[3];
-		i := (num * 20) + 90;
-		GFButtonIDC( 53, i, 2361, 2362, 1, (val*100)+2);
-		GFButtonIDC( 73, i, 2361, 2362, 1, (val*100)+3);
-		GFButtonIDC( 93, i, 2361, 2362, 1, (val*100)+4);
-		GFTextLine(135, (i - 5), 0, who);
-		GFTextLine(285, (i - 5), 0, txt);
-		val := val + 1;
-		num := num + 1;
-	endforeach
-endfunction
-
-
-function RemoveElement(arry, position)
-	var newarray := { };
-
-	foreach thing in arry
-		if(thing != arry[position])
-			newarray.append(thing);
-		endif
-	endforeach
-
-	return newarray;
-endfunction
-
-
-function GFButtonIDC(x, y, release, press, close, retval)
-	var line := "button " + CStr(gfref.x + Cint(x)) + " " + CStr(gfref.y + Cint(y));
-	line := line + " " + CStr(Cint(release)) + " " + CStr(Cint(press)) + " ";
-	line := line + Cstr(close) + " 0 ";
-	line := line + CStr(retval);
-	gflayout.append( line );
-endfunction
-
-
-function maintainaccountgump(who, chr)
-var trg := FindAccount(chr.acctname);
-if(!trg)
-SendSysMessage(who,"Cancelled.");
-else
-if(!trg.getprop("email"));
-trg.setprop("email", "");
-endif
-if(!trg.getprop("notes"));
-trg.setprop("notes", "");
-endif
-if(!trg.getprop("releaseday"));
-      trg.setprop("releaseday", "");
-    endif
-    testdata[16] := trg.name;
-    if(trg.banned == 1)
-      testdata[17] := "banned";
-    elseif(trg.enabled == 0)
-      testdata[17] := "jailed";
-    else
-      testdata[17] := "active";
-    endif
-    testdata[18] := trg.GetCharacter(1).name;
-    if(testdata[18] == error)
-      testdata[18] := "";
-    endif
-    testdata[19] := trg.GetCharacter(2).name;
-    if(testdata[19] == error)
-      testdata[19] := "";
-    endif
-    testdata[20] := trg.GetCharacter(3).name;
-    if(testdata[20] == error)
-      testdata[20] := "";
-    endif
-    testdata[21] := trg.GetCharacter(4).name;
-    if(testdata[21] == error)
-      testdata[21] := "";
-    endif
-    testdata[22] := trg.GetCharacter(5).name;
-    if(testdata[22] == error)
-      testdata[22] := "";
-    endif
-    var mail := trg.getprop("email");
-    if(!mail)
-      mail := "Not Provided";
-    endif
-    testdata[23] := mail;
-    if(!trg)
-      SendSysMessage(who,"Cancelled.");
-      return;
-    endif
-    SetNotes(trg.name); // Modified by Shinigami
-    if(trg.enabled == 0)
-      testlayout.append("button  400 195 2662 2662 1 0 10");    //jail index box
-      testlayout.append("gumppic 400 185 2660 2660 1 0 10");    //jail index box
-      testlayout.append("text    320 190  910 37"); //jail duration text   (white)
-      testlayout.append("text    440 190  910 38"); //jail duration text   (white)
-      testlayout.append("text    408 190  100 39"); //jail tine left text  (blue)
-      var releaseday := trg.getprop("releaseday");
-      var timeremaining :=(((releaseday - ReadGameClock())/86400) + 1);
-      if(timeremaining < 2)
-        timeremaining := 0;
-      endif
-      testdata[40] := timeremaining;
-    endif
-    var accounttool := SendDialogGump(who, testlayout, testdata);
-    case(accounttool[0])
-      2: jail(who, trg.name);
-      3: Notes(trg.name, accounttool); //notes(who, trg.name); // Modified by Shinigami
-      4: editemail(who, trg);
-      5: info(who, trg.GetCharacter(1).serial, trg);
-      6: info(who, trg.GetCharacter(2).serial, trg);
-      7: info(who, trg.GetCharacter(3).serial, trg);
-      8: info(who, trg.GetCharacter(4).serial, trg);
-      9: info(who, trg.GetCharacter(5).serial, trg);
-     10: editjail(who, trg);
-     11: ban(who, trg.name);
-    endcase
-  endif
-  pagemenu(who);
-endfunction
-
-
-function SetNotes(acctname) // Added by Shinigami
-  var act:=FindAccount(acctname);
-  var note:=act.GetProp("notes");
-  if((!note) ||(note==error))
-    note:="";
-  endif
-  var split:=SplitWords(note);
-  var width:=0;
-  var lines:=0;
-  var index:=1;
-  while((index<=len(split)) &&(lines<=12))
-    if(width==0)
-      var testword:=split[index];
-      lines:=lines+1;
-      testdata[25+lines] := testword;
-      width := GumpTextWidthFast(testword);
-      index:=index+1;
-    else
-      var testword:=" "+split[index];
-      var testwidth:=GumpTextWidthFast(testword);
-      if(width+testwidth<CInt(790/1.5))
-        testdata[25+lines]:=testdata[25+lines]+testword;
-        width:=width+testwidth;
-        index:=index+1;
-      else
-        width:=0;
-      endif
-    endif
-  endwhile
-  if(lines>12)
-    testdata[24+lines]:=testdata[24+lines]+"...";
-  else
-    while(lines<12)
-      lines:=lines+1;
-      testdata[25+lines]:="";
-    endwhile
-  endif
-endfunction
-
-
-function editjail(who, trg);
-  var val := CInt(SendTextEntryGump(who, "enter new total?(Max 14)", 40));
-  var time;
-  case(val)
-     1: time := 86400;
-     2: time := 172800;
-     3: time := 259200;
-     4: time := 345600;
-     5: time := 432000;
-     6: time := 518400;
-     7: time := 604800;
-     8: time := 691200;
-     9: time := 777600;
-    10: time := 864000;
-    11: time := 950400;
-    12: time := 1036800;
-    13: time := 1123200;
-    14: time := 1209600;
-  endcase
-  trg.setprop("releaseday",(ReadGameClock() + time));
-endfunction
-
-
-function ban(who, acctname);
-  var banverify := SendDialogGump(who, banlayout, bandata);
-  var act := FindAccount(acctname);
-  case(banverify[0])
-    1: var characters := EnumerateOnlineCharacters();
-       foreach char in characters
-         if(char.acctname == acctname)
-           SendSysMessage(char, "You were kicked by " + who.name + ".");
-           SetObjProperty(char,"justbanned", 1);
-           DisconnectClient(char);
-           break;
-         endif
-       endforeach
-       foreach chr in characters
-         if(chr.cmdlevel > 1)
-           SendSysMessage(chr, "Account " + acctname + " has been banned.");
-         endif
-       endforeach
-       Detach();
-       sleep(10);
-       act.ban();
-           var x, i;
-       WipeBankBox(act.GetCharacter(1));
-           for(i := 1; i <= 25; i := i + 1)
-             x := GetEquipmentByLayer(act.GetCharacter(1), i);
-             MoveItemToContainer(x, act.GetCharacter(1).backpack);
-           endfor
-       DestroyItem(act.GetCharacter(1).backpack);
-       act.DeleteCharacter(1);
-       i := 0;
-       WipeBankBox(act.GetCharacter(2));
-           for(i := 1; i <= 25; i := i + 1)
-             x := GetEquipmentByLayer(act.GetCharacter(2), i);
-             MoveItemToContainer(x, act.GetCharacter(2).backpack);
-           endfor
-       DestroyItem(act.GetCharacter(2).backpack);
-       act.DeleteCharacter(2);
-       i := 0;
-       WipeBankBox(act.GetCharacter(3));
-           for(i := 1; i <= 25; i := i + 1)
-             x := GetEquipmentByLayer(act.GetCharacter(3), i);
-             MoveItemToContainer(x, act.GetCharacter(3).backpack);
-           endfor
-       DestroyItem(act.GetCharacter(3).backpack);
-       act.DeleteCharacter(3);
-       i := 0;
-       WipeBankBox(act.GetCharacter(4));
-           for(i := 1; i <= 25; i := i + 1)
-             x := GetEquipmentByLayer(act.GetCharacter(4), i);
-             MoveItemToContainer(x, act.GetCharacter(4).backpack);
-           endfor
-       DestroyItem(act.GetCharacter(4).backpack);
-       act.DeleteCharacter(4);
-       i := 0;
-       WipeBankBox(act.GetCharacter(5));
-           for(i := 1; i <= 24; i := i + 1)
-             x := GetEquipmentByLayer(act.GetCharacter(5), i);
-             MoveItemToContainer(x, act.GetCharacter(5).backpack);
-           endfor
-       DestroyItem(act.GetCharacter(5).backpack);
-       act.DeleteCharacter(5);
-    2: SendSysMessage(who,"cancelled");
-       return;
-  endcase
-endfunction
-
-
-function Notes(acctname, result) // Added by Shinigami
-	var note := result[25];
-	note[1, find(note, ": ", 1)+1]:="";
-	var subnote;
-	var i;
-
-	for (i:=26; i<=36; i:=i+1)
-		subnote:=result[i];
-		subnote[1, find(subnote, ": ", 1)+1]:="";
-		if (subnote!="")
-			note := note + " " + subnote;
-		endif
-	endfor
-	var act := FindAccount(acctname);
-	act.setprop("notes", note);
-endfunction
-
-
-function editemail(who, trg);
-	var val := CStr(SendTextEntryGump(who, "enter the new email address?", 40));
-	trg.setprop("email", val);
-endfunction
-
-
-function jail(who, acctname);
-  var val := CInt(SendTextEntryGump(who, "How many days will this account remain jailed?(Max 14)", 40));
-  var time;
-  case(val)
-     1: time := 86400;
-     2: time := 172800;
-     3: time := 259200;
-     4: time := 345600;
-     5: time := 432000;
-     6: time := 518400;
-     7: time := 604800;
-     8: time := 691200;
-     9: time := 777600;
-    10: time := 864000;
-    11: time := 950400;
-    12: time := 1036800;
-    13: time := 1123200;
-    14: time := 1209600;
-  endcase
-  var act := FindAccount(acctname);
-  act.setprop("releaseday",(ReadGameClock() + time));
-  var characters := EnumerateOnlineCharacters();
-  act.disable();
-  foreach char in characters
-    if(char.acctname == acctname)
-      SendSysMessage(char, "You were kicked by " + who.name + ".");
-      DisconnectClient(char);
-      break;
-    endif
-  endforeach
-endfunction
-
-function GetAccountLayoutLength();
-	return(len(gotolayout));
-endfunction
-
-function GetAccountDataLength();
-	return(len(accountdata));
-endfunction
-
-function info(who, character, trg)
-  var online := 0;
-  foreach char in EnumerateOnlineCharacters()
-    if(char.serial == character)
-      character := char;
-      online := 1;
-    endif
-  endforeach
-  if(online == 0)
-    character := SystemFindObjectBySerial(character, SYSFIND_SEARCH_OFFLINE_MOBILES);
-  endif
-  if(!character)
-     SendSysMessage(who, "That player does not exist. Cancelled.");
-  else
-    infodata[1] := "Info On: " + character.name;
-    FillInStats(character);
-    FillInSkills(character);
-    FillInWeapon(character);
-    var result := SendDialogGump(who, infolayout, infodata);
-    var reskey;
-    foreach key in(result.keys)
-      if(key >= 1000)
-        reskey := key;
-      endif
-    endforeach
-    case(result[0])
-       1:   //fall through intentional
-       2:
-       3:
-       4:
-       5:
-       6:
-       7:
-       9:
-      11:
-      14:
-      13:
-      15: EditStat(who, character, result[0], trg);
-      16: EditSkill(who, character, reskey-1000, trg);
-      17: character.frozen := 1; SendSysMessage(who, character.name + " is frozen.");
-      18: character.frozen := 0; SendSysMessage(who, character.name + " is unfrozen.");
-      19: if(!character.isA(POLCLASS_NPC))
-            SendSysMessage(character, "You were kicked by " + who.name + ".");
-            DisconnectClient(character);
-          endif
-      20: MoveCharacterToLocation(character, 1, 1, 0);
-      21: if(!character.isA(POLCLASS_NPC))
-            var bankbox := FindBankBox(character);
-            SendOpenSpecialContainer(who, bankbox);
-          else
-            SendSysMessage(who, "Only can be used on players.");
-          endif
-      22: if(!character.isA(POLCLASS_NPC))
-            SendOpenSpecialContainer(who, character.backpack);
-          else
-            SendSysMessage(who, "Only can be used on players.");
-          endif
-      23: MoveCharacterToLocation(character, who.x, who.y, who.z);
-      24: SetName(character, RequestInput(who, who.backpack, "Enter a new name."));
-    endcase
-  endif
-endfunction
-
-
-function FillInStats(who)
-	var levelname;
-	
-	case(who.cmdlevel)
-		0: levelname := "Player";
-		1: levelname := "Counselor";
-		2: levelname := "Seer";
-		3: levelname := "GM";
-		4: levelname := "Admin";
-		5: levelname := "Development";
-	endcase
-	infodata[8] := GetStrength(who);
-	infodata[10] := GetIntelligence(who);
-	infodata[12] := GetDexterity(who);
-	infodata[14] := who.x;
-	infodata[16] := who.y;
-	infodata[18] := who.z;
-	infodata[20] := GetHp(who) + "/" + GetMaxHp(who);
-	infodata[22] := GetMana(who) + "/" + GetMaxMana(who);
-	infodata[24] := GetStamina(who) + "/" + GetMaxStamina(who);
-	infodata[26] := who.ar;
-	infodata[28] := who.graphic;
-	infodata[30] := who.color;
-	infodata[144] := levelname;
-	infodata[146] := who.acctname;
-endfunction
-
-
-function FillInSkills(who)
-	var datindx;
-	var skillindx := 0;
-	for(datindx := 32; datindx <= 128; datindx := datindx + 2)
-		infodata[datindx] := GetEffectiveSkill(who, skillindx);
-		skillindx := skillindx + 1;
-	endfor
-endfunction
-
-
-function FillInWeapon(who)
-	var weapfile := ReadConfigFile(":combat:itemdesc");
-	var npcfile := ReadConfigFile("::npcdesc");
-
-	if (who.weapon)
-		var idx := find(who.weapon.name, "[", 1); //ignore maker's mark
-		if (idx!=0)
-			var tempn := who.weapon.desc;
-			tempn := tempn[1,idx-1];
-			infodata[138] := tempn;
-		else
-			if (who.weapon.desc == "nodraw")
-				infodata[138] := "Wrestling";
-			else
-				infodata[138] := who.weapon.desc;
-			endif
-		endif
-		var dam := weapfile[who.weapon.objtype].Damage;
-		if (!dam)
-			infodata[140] := "n/a";
-		else
-			infodata[140] := dam;
-		endif
-		infodata[142] := who.weapon.hp + " / " + who.weapon.maxhp;
-	else
-		infodata[138] := "n/a";
-		infodata[140] := "n/a";
-		infodata[142] := "n/a";
-		if (who.isA(POLCLASS_NPC)) //Hi, i'm an NPC
-			var dam := npcfile[who.npctemplate].AttackDamage;
-			var weap := npcfile[who.npctemplate].AttackSkillId;
-			var ar := npcfile[who.npctemplate].AR;
-			if (weap)
-				infodata[138] := weap;
-			endif
-			if (dam)
-				infodata[140] := dam;
-			endif
-			if (ar)
-				infodata[142] := "AR: " + ar;
-			endif
-		endif
-	endif
-endfunction
-
-
-function EditStat(who, character, result, trg)
-	SendSysMessage(who, "Caution! Values are changed immediately, Integers only!. Hit ESC to cancel.");
-	var val := CInt(RequestInput(who, who.backpack, "Enter a new value."));
-	if(!val)
-		SendSysMessage(who, "Cancelled.");
-	else
-		case(result)
-			1: SetBaseStrength(character,val);
-			2: SetBaseIntelligence(character,val);
-			3: SetBaseDexterity(character,val);
-			4: MoveCharacterToLocation(character, val, character.y, character.z);
-			5: MoveCharacterToLocation(character, character.x, val, character.z);
-			6: MoveCharacterToLocation(character, character.x, character.y, val);
-			7: SetHp(character, val);
-			9: SetMana(character, val);
-			11: SetStamina(character, val);
-			13: character.ar_mod := 0;
-				character.ar_mod := val - character.ar;
-			14: character.graphic := val;
-			15: character.color := val;
-		endcase
-	endif
-endfunction
-
-function EditSkill(who, character, skill, trg);
-	SendSysMessage(who, "Caution! Values are changed immediately, Integers only!. Hit ESC to cancel.");
-	var val := CInt(RequestInput(who, who.backpack, "Enter a new value.")) * 10;
-	if ((!val) &&(val != 0))
-		SendSysMessage(who, "Cancelled.");
-	else
-		SetBaseSkillBaseValue(character, skill, val);
-	endif
-endfunction
-

Copied: trunk/096/pkg/commands/coun/counpage.src.temp (from rev 331, trunk/096/pkg/commands/coun/counpage.src)

Deleted: trunk/096/pkg/commands/gm/gmpage.src
===================================================================
--- trunk/096/pkg/commands/gm/gmpage.src	2005-09-30 09:54:57 UTC (rev 331)
+++ trunk/096/pkg/commands/gm/gmpage.src	2005-09-30 12:18:34 UTC (rev 332)
@@ -1,625 +0,0 @@
-use uo;
-use util;
-use os;
-
-include ":gumps:include/old/old-gumps";
-include "include/gumpUtil";
-include ":bank:bank";
-include "include/attributes";
-include ":gmtools:info";
-include ":gmtools:accountLayout";
-
-var gmpages := GetGlobalProperty("gmpages");
-
-program textcmd_pagegm(who)
-  pagemenu(who);
-endprogram
-
-function pagemenu( who )
-  GFInitGump(0, 0);
-  GFPage(0);
-  GFGumpPic(  0,   0,  206);
-  GFGumpPic( 44,   0,  201);
-  GFGumpPic(244,   0,  201);
-  GFGumpPic(444,   0,  201);
-  GFGumpPic(840,   0,  207);
-  GFGumpPic(  0,  40,  202);
-  GFGumpPic( 44,  40, 2604);
-  GFGumpPic(244,  40, 2604);
-  GFGumpPic(444,  40, 2604);
-  GFGumpPic(840,  40,  203);
-  GFGumpPic(  0, 350,  204);
-  GFGumpPic( 44, 350,  233);
-  GFGumpPic(240, 350,  233);
-  GFGumpPic(440, 350,  233);
-  GFGumpPic(840, 350,  205);
-  GFGumpPic( 40,  35,   40);
-  GFGumpPic( 95,  35,   40);
-  GFGumpPic(185,  35,   40);
-  GFGumpPic(275,  35,   40);
-  GFGumpPic(365,  35,   40);
-  GFGumpPic(455,  35,   40);
-  GFGumpPic(545,  35,   40);
-  GFGumpPic( 40,  65,   40);
-  GFGumpPic( 95,  65,   40);
-  GFGumpPic(185,  65,   40);
-  GFGumpPic(275,  65,   40);
-  GFGumpPic(365,  65,   40);
-  GFGumpPic(455,  65,   40);
-  GFGumpPic(545,  65,   40);
-  GFGumpPic(635,  35,   40);
-  GFGumpPic(725,  35,   40);
-  GFGumpPic(745,  35,   40);
-  GFGumpPic(635,  65,   40);
-  GFGumpPic(725,  65,   40);
-  GFGumpPic(745,  65,   40);
-  GFTextLine(205,  15,    0, "GMPage Menu, select an option");
-  GFTextLine( 50,  45,    0, "Delete all pages:");
-  GFTextLine( 30,  80,  500, "I");
-  GFTextLine( 50,  80,  500, "D");
-  GFTextLine( 70,  80,  500, "G");
-  GFTextLine( 90,  80,  500, "M");
-  GFTextLine(135,  80,  500, "Name");
-  GFTextLine(295,  80,  500, "Request");
-  GFButtonIDC(170,  43,  208,  209, 1, 999);
-  GFButtonPage(225,  47, 2117, 2118, 1);
-  GFButtonPage(255,  47, 2117, 2118, 2);
-  GFButtonPage(285,  47, 2117, 2118, 3);
-  GFButtonPage(315,  47, 2117, 2118, 4);
-  GFButtonPage(345,  47, 2117, 2118, 5);
-  GFButtonPage(375,  47, 2117, 2118, 6);
-  GFButtonPage(405,  47, 2117, 2118, 7);
-  GFButtonPage(435,  47, 2117, 2118, 8);
-  GFButtonPage(465,  47, 2117, 2118, 9);
-  GFButtonPage(495,  47, 2117, 2118, 10);
-  ComposeSubMenu();
-  var res := GFSendGump(who);
-  if(res[0] == 999)
-    SendSysMessage(who, "Erasing all GM Pages");
-    EraseGlobalProperty("gmpages");
-    return;
-  elseif(res[0] == 0)
-    SendSysMessage(who, "Cancelled.");
-    return;
-  else
-    var hld := Cint(res[0] / 100);
-    var ind := gmpages[hld];
-    var val := (res[0] - (hld * 100));
-    var chr := SystemFindObjectBySerial(ind[3], SYSFIND_SEARCH_OFFLINE_MOBILES);
-    case(val)
-      1: if(!chr)
-           SendSysMessage(who, "ERROR: Could not find mobile.");
-         else
-           maintainaccountgump(who, chr);
-         endif
-      2: gmpages := RemoveElement(gmpages, hld);
-         SetGlobalProperty("gmpages", gmpages);
-         SendSysMessage(who, "Page Deleted.");
-      3: if(!chr)
-           SendSysMessage(who, "ERROR: Could not find mobile.");
-         else
-           MoveCharacterToLocation(who, chr.x, chr.y, chr.z, MOVECHAR_FORCELOCATION );
-           SendSysMessage(who, "Going to " + chr.name + ".");
-         endif
-      4: if(!chr)
-           SendSysMessage(who, "ERROR: Could not find mobile.");
-         else
-           var themessage := RequestInput(who, who.backpack, "What message would you like to send to " + chr.name + "?");
-           if(!themessage)
-             SendSysMessage(who,"Cancelled.");
-             return;
-           else
-             SendSysMessage(chr, "Message from " + who.name + ": " + themessage);
-             foreach staff in EnumerateOnlineCharacters()
-               if ( (staff.cmdlevel == 5) && (GetObjProperty(staff, "HearMsgs") ) )
-                 SendSysMessage(staff, "Msg from " + who.name + " to " + chr.name + ": " + themessage);
-               endif
-             endforeach
-           endif
-         endif
-    endcase
-  endif
-  pagemenu(who);
-endfunction
-
-function ComposeSubMenu()
-  var num := 1;
-  var amt := 2;
-  var who, txt, ser, i;
-  var val := 1;
-  GFPage(1);
-  var color := 0;
-  var online := EnumerateOnlineCharacters();
-  var arry := {};
-  foreach thing in online
-    arry.append(thing.serial);
-  endforeach
-  foreach thing in gmpages
-    if(num > 10)
-      GFPage(amt);
-      amt := amt + 1;
-      num := 1;
-    endif
-    who := thing[1];
-    txt := thing[2];
-    ser := thing[3];
-    i := (num * 20) + 90;
-    GFButtonIDC( 28, (i - 5),  208,  209, 1, (val*100)+1);
-    GFButtonIDC( 53, i, 2361, 2362, 1, (val*100)+2);
-    GFButtonIDC( 73, i, 2361, 2362, 1, (val*100)+3);
-    GFButtonIDC( 93, i, 2361, 2362, 1, (val*100)+4);
-    if(ser in arry)
-      color := 72;
-    else
-      color := 31;
-    endif
-    GFTextLine(135, (i - 5), color, who);
-    GFTextLine(285, (i - 5), 0, txt);
-    val := val + 1;
-    num := num + 1;
-    color := 0;
-  endforeach
-endfunction
-
-function RemoveElement(arry, position)
-  var newarray := { };
-  foreach thing in arry
-    if(thing != arry[position])
-      newarray.append(thing);
-    endif
-  endforeach
-  return newarray;
-endfunction
-
-function GFButtonIDC(x, y, release, press, close, retval)
-        var line := "button " + CStr(gfref.x + Cint(x)) + " " + CStr(gfref.y + Cint(y));
-        line := line + " " + CStr(Cint(release)) + " " + CStr(Cint(press)) + " ";
-        line := line + Cstr(close) + " 0 ";
-        line := line + CStr(retval);
-        gflayout.append( line );
-endfunction
-
-function maintainaccountgump(who, chr)
-  var trg := FindAccount(chr.acctname);
-  if(!trg)
-    SendSysMessage(who,"cancelled");
-  else
-    if(!trg.getprop("email"));
-      trg.setprop("email", "");
-    endif
-    if(!trg.getprop("notes"));
-      trg.setprop("notes", "");
-    endif
-    if(!trg.getprop("releaseday"));
-      trg.setprop("releaseday", "");
-    endif
-    testdata[16] := trg.name;
-    if(trg.banned == 1)
-      testdata[17] := "banned";
-    elseif(trg.enabled == 0)
-      testdata[17] := "jailed";
-    else
-      testdata[17] := "active";
-    endif
-    testdata[18] := trg.GetCharacter(1).name;
-    if(testdata[18] == error)
-      testdata[18] := "";
-    endif
-    testdata[19] := trg.GetCharacter(2).name;
-    if(testdata[19] == error)
-      testdata[19] := "";
-    endif
-    testdata[20] := trg.GetCharacter(3).name;
-    if(testdata[20] == error)
-      testdata[20] := "";
-    endif
-    testdata[21] := trg.GetCharacter(4).name;
-    if(testdata[21] == error)
-      testdata[21] := "";
-    endif
-    testdata[22] := trg.GetCharacter(5).name;
-    if(testdata[22] == error)
-      testdata[22] := "";
-    endif
-    var mail := trg.getprop("email");
-    if(!mail)
-      mail := "Not Provided";
-    endif
-    testdata[23] := mail;
-    if(!trg)
-      SendSysMessage(who,"canceled");
-      return;
-    endif
-    SetNotes(trg.name); // Modified by Shinigami
-    if(trg.enabled == 0)
-      testlayout.append("button  400 195 2662 2662 1 0 10");    //jail index box
-      testlayout.append("gumppic 400 185 2660 2660 1 0 10");    //jail index box
-      testlayout.append("text    320 190  910 37"); //jail duration text   (white)
-      testlayout.append("text    440 190  910 38"); //jail duration text   (white)
-      testlayout.append("text    408 190  100 39"); //jail tine left text  (blue)
-      var releaseday := trg.getprop("releaseday");
-      var timeremaining :=(((releaseday - ReadGameClock())/86400) + 1);
-      if(timeremaining < 2)
-        timeremaining := 0;
-      endif
-      testdata[40] := timeremaining;
-    endif
-    var accounttool := SendDialogGump(who, testlayout, testdata);
-    case(accounttool[0])
-      2: jail(who, trg.name);
-      3: Notes(trg.name, accounttool); //notes(who, trg.name); // Modified by Shinigami
-      4: editemail(who, trg);
-      5: info(who, trg.GetCharacter(1).serial);
-      6: info(who, trg.GetCharacter(2).serial);
-      7: info(who, trg.GetCharacter(3).serial);
-      8: info(who, trg.GetCharacter(4).serial);
-      9: info(who, trg.GetCharacter(5).serial);
-     10: editjail(who, trg);
-     11: ban(who, trg.name);
-    endcase
-  endif
-endfunction
-
-function SetNotes(acctname) // Added by Shinigami
-  var act:=FindAccount(acctname);
-  var note:=act.GetProp("notes");
-  if((!note) ||(note==error))
-    note:="";
-  endif
-  var split:=SplitWords(note);
-  var width:=0;
-  var lines:=0;
-  var index:=1;
-  while((index<=len(split)) &&(lines<=12))
-    if(width==0)
-      var testword:=split[index];
-      lines:=lines+1;
-      testdata[25+lines] := testword;
-      width := GumpTextWidthFast(testword);
-      index:=index+1;
-    else
-      var testword:=" "+split[index];
-      var testwidth:=GumpTextWidthFast(testword);
-      if(width+testwidth<CInt(790/1.5))
-        testdata[25+lines]:=testdata[25+lines]+testword;
-        width:=width+testwidth;
-        index:=index+1;
-      else
-        width:=0;
-      endif
-    endif
-  endwhile
-  if(lines>12)
-    testdata[24+lines]:=testdata[24+lines]+"...";
-  else
-    while(lines<12)
-      lines:=lines+1;
-      testdata[25+lines]:="";
-    endwhile
-  endif
-endfunction
-
-function editjail(who, trg);
-  var val := CInt(SendTextEntryGump(who, "enter new total?(Max 14)", 40));
-  var time;
-  case(val)
-     1: time := 86400;
-     2: time := 172800;
-     3: time := 259200;
-     4: time := 345600;
-     5: time := 432000;
-     6: time := 518400;
-     7: time := 604800;
-     8: time := 691200;
-     9: time := 777600;
-    10: time := 864000;
-    11: time := 950400;
-    12: time := 1036800;
-    13: time := 1123200;
-    14: time := 1209600;
-  endcase
-  trg.setprop("releaseday",(ReadGameClock() + time));
-endfunction
-
-function ban(who, acctname);
-  var banverify := SendDialogGump(who, banlayout, bandata);
-  var act := FindAccount(acctname);
-  case(banverify[0])
-    1: var characters := EnumerateOnlineCharacters();
-       foreach char in characters
-         if(char.acctname == acctname)
-           SendSysMessage(char, "You were kicked by " + who.name + ".");
-           SetObjProperty(char,"justbanned", 1);
-           DisconnectClient(char);
-           break;
-         endif
-       endforeach
-       foreach chr in characters
-         if(chr.cmdlevel > 1)
-           SendSysMessage(chr, "account " + acctname + " has been banned.");
-         endif
-       endforeach
-       Detach();
-       sleep(10);
-       act.ban();
-           var x, i;
-       WipeBankBox(act.GetCharacter(1));
-           for(i := 1; i <= 25; i := i + 1)
-             x := GetEquipmentByLayer(act.GetCharacter(1), i);
-             MoveItemToContainer(x, act.GetCharacter(1).backpack);
-           endfor
-       DestroyItem(act.GetCharacter(1).backpack);
-       act.DeleteCharacter(1);
-       i := 0;
-       WipeBankBox(act.GetCharacter(2));
-           for(i := 1; i <= 25; i := i + 1)
-             x := GetEquipmentByLayer(act.GetCharacter(2), i);
-             MoveItemToContainer(x, act.GetCharacter(2).backpack);
-           endfor
-       DestroyItem(act.GetCharacter(2).backpack);
-       act.DeleteCharacter(2);
-       i := 0;
-       WipeBankBox(act.GetCharacter(3));
-           for(i := 1; i <= 25; i := i + 1)
-             x := GetEquipmentByLayer(act.GetCharacter(3), i);
-             MoveItemToContainer(x, act.GetCharacter(3).backpack);
-           endfor
-       DestroyItem(act.GetCharacter(3).backpack);
-       act.DeleteCharacter(3);
-       i := 0;
-       WipeBankBox(act.GetCharacter(4));
-           for(i := 1; i <= 25; i := i + 1)
-             x := GetEquipmentByLayer(act.GetCharacter(4), i);
-             MoveItemToContainer(x, act.GetCharacter(4).backpack);
-           endfor
-       DestroyItem(act.GetCharacter(4).backpack);
-       act.DeleteCharacter(4);
-       i := 0;
-       WipeBankBox(act.GetCharacter(5));
-           for(i := 1; i <= 24; i := i + 1)
-             x := GetEquipmentByLayer(act.GetCharacter(5), i);
-             MoveItemToContainer(x, act.GetCharacter(5).backpack);
-           endfor
-       DestroyItem(act.GetCharacter(5).backpack);
-       act.DeleteCharacter(5);
-    2: SendSysMessage(who,"cancelled");
-       return;
-  endcase
-endfunction
-
-function Notes(acctname, result) // Added by Shinigami
-  var note:=result[25];
-  note[1, find(note, ": ", 1)+1]:="";
-  var subnote;
-  var i;
-  for(i:=26; i<=36; i:=i+1)
-    subnote:=result[i];
-    subnote[1, find(subnote, ": ", 1)+1]:="";
-    if(subnote!="")
-      note:=note+" "+subnote;
-    endif
-  endfor
-  var act:=FindAccount(acctname);
-  act.setprop("notes", note);
-endfunction
-
-function editemail(who, trg);
-  var val := CStr(SendTextEntryGump(who, "enter the new email address?", 40));
-  trg.setprop("email", val);
-endfunction
-
-function jail(who, acctname);
-  var val := CInt(SendTextEntryGump(who, "How many days will this account remain jailed?(Max 14)", 40));
-  var time;
-  case(val)
-     1: time := 86400;
-     2: time := 172800;
-     3: time := 259200;
-     4: time := 345600;
-     5: time := 432000;
-     6: time := 518400;
-     7: time := 604800;
-     8: time := 691200;
-     9: time := 777600;
-    10: time := 864000;
-    11: time := 950400;
-    12: time := 1036800;
-    13: time := 1123200;
-    14: time := 1209600;
-  endcase
-  var act := FindAccount(acctname);
-  act.setprop("releaseday",(ReadGameClock() + time));
-  var characters := EnumerateOnlineCharacters();
-  act.disable();
-  foreach char in characters
-    if(char.acctname == acctname)
-      SendSysMessage(char, "You were kicked by " + who.name + ".");
-      DisconnectClient(char);
-      break;
-    endif
-  endforeach
-endfunction
-
-function GetAccountLayoutLength();
-    return(len(gotolayout));
-endfunction
-
-function GetAccountDataLength();
-    return(len(accountdata));
-endfunction
-
-function info(who, character)
-  var online := 0;
-  foreach char in EnumerateOnlineCharacters()
-    if(char.serial == character)
-      character := char;
-      online := 1;
-    endif
-  endforeach
-  if(online == 0)
-    character := SystemFindObjectBySerial(character, SYSFIND_SEARCH_OFFLINE_MOBILES);
-  endif
-  if(!character)
-     SendSysMessage(who, "That player does not exist. Cancelled.");
-  else
-    infodata[1] := "Info On: " + character.name;
-    FillInStats(character);
-    FillInSkills(character);
-    FillInWeapon(character);
-    var result := SendDialogGump(who, infolayout, infodata);
-    var reskey;
-    foreach key in(result.keys)
-      if(key >= 1000)
-        reskey := key;
-      endif
-    endforeach
-    case(result[0])
-       1:   //fall through intentional
-       2:
-       3:
-       4:
-       5:
-       6:
-       7:
-       9:
-      11:
-      14:
-      13:
-      15: EditStat(who, character, result[0]);
-      16: EditSkill(who, character, reskey-1000);
-      17: character.frozen := 1; SendSysMessage(who, character.name + " is frozen.");
-      18: character.frozen := 0; SendSysMessage(who, character.name + " is unfrozen.");
-      19: if(!character.isA(POLCLASS_NPC))
-            SendSysMessage(character, "You were kicked by " + who.name + ".");
-            DisconnectClient(character);
-          endif
-      20: MoveCharacterToLocation(character, 1, 1, 0);
-      21: if(!character.isA(POLCLASS_NPC))
-            var bankbox := FindBankBox(character);
-            SendOpenSpecialContainer(who, bankbox);
-          else
-            SendSysMessage(who, "Only can be used on players.");
-          endif
-      22: if(!character.isA(POLCLASS_NPC))
-            SendOpenSpecialContainer(who, character.backpack);
-          else
-            SendSysMessage(who, "Only can be used on players.");
-          endif
-      23: MoveCharacterToLocation(character, who.x, who.y, who.z);
-      24: SetName(character, RequestInput(who, who.backpack, "Enter a new name."));
-    endcase
-  endif
-endfunction
-
-function FillInStats(who)
-  var levelname;
-  case(who.cmdlevel)
-      0: levelname := "Player";
-      1: levelname := "Counselor";
-      2: levelname := "Seer";
-      3: levelname := "GM";
-      4: levelname := "Admin";
-      5: levelname := "Development";
-  endcase
-  infodata[8] := GetStrength(who);
-  infodata[10] := GetIntelligence(who);
-  infodata[12] := GetDexterity(who);
-  infodata[14] := who.x;
-  infodata[16] := who.y;
-  infodata[18] := who.z;
-  infodata[20] := GetHp(who) + "/" + GetMaxHp(who);
-  infodata[22] := GetMana(who) + "/" + GetMaxMana(who);
-  infodata[24] := GetStamina(who) + "/" + GetMaxStamina(who);
-  infodata[26] := who.ar;
-  infodata[28] := who.graphic;
-  infodata[30] := who.color;
-  infodata[144] := levelname;
-  infodata[146] := who.acctname;
-endfunction
-
-function FillInSkills(who)
-  var datindx;
-  var skillindx := 0;
-  for(datindx := 32; datindx <= 128; datindx := datindx + 2)
-    infodata[datindx] := GetEffectiveSkill(who, skillindx);
-    skillindx := skillindx + 1;
-   endfor
-endfunction
-
-function FillInWeapon(who)
-  var weapfile := ReadConfigFile(":combat:itemdesc");
-  var npcfile := ReadConfigFile("::npcdesc");
-  if(who.weapon)
-    var idx := find(who.weapon.name, "[", 1); //ignore maker's mark
-    if(idx!=0)
-      var tempn := who.weapon.desc;
-      tempn := tempn[1,idx-1];
-      infodata[138] := tempn;
-    else
-      if(who.weapon.desc == "nodraw")
-        infodata[138] := "Wrestling";
-      else
-        infodata[138] := who.weapon.desc;
-      endif
-    endif
-    var dam := weapfile[who.weapon.objtype].Damage;
-    if(!dam)
-      infodata[140] := "n/a";
-    else
-      infodata[140] := dam;
-    endif
-    infodata[142] := who.weapon.hp + " / " + who.weapon.maxhp;
-   else
-    infodata[138] := "n/a";
-    infodata[140] := "n/a";
-    infodata[142] := "n/a";
-    if(who.isA(POLCLASS_NPC)) //Hi, i'm an NPC
-      var dam := npcfile[who.npctemplate].AttackDamage;
-      var weap := npcfile[who.npctemplate].AttackSkillId;
-      var ar := npcfile[who.npctemplate].AR;
-      if(weap)
-        infodata[138] := weap;
-      endif
-      if(dam)
-        infodata[140] := dam;
-      endif
-      if(ar)
-        infodata[142] := "AR: " + ar;
-      endif
-    endif
-  endif
-endfunction
-
-function EditStat(who, character, result)
-    SendSysMessage(who, "Caution! Values are changed immediately, Integers only!. Hit ESC to cancel.");
-    var val := CInt(RequestInput(who, who.backpack, "Enter a new value."));
-    if(!val)
-      SendSysMessage(who, "Cancelled.");
-    else
-      case(result)
-         1: SetBaseStrength(character,val);
-         2: SetBaseIntelligence(character,val);
-         3: SetBaseDexterity(character,val);
-         4: MoveCharacterToLocation(character, val, character.y, character.z);
-         5: MoveCharacterToLocation(character, character.x, val, character.z);
-         6: MoveCharacterToLocation(character, character.x, character.y, val);
-         7: SetHp(character, val);
-         9: SetMana(character, val);
-        11: SetStamina(character, val);
-        13: character.ar_mod := 0;
-            character.ar_mod := val - character.ar;
-        14: character.graphic := val;
-        15: character.color := val;
-      endcase
-    endif
-endfunction
-
-function EditSkill(who, character, skill);
-    SendSysMessage(who, "Caution! Values are changed immediately, Integers only!. Hit ESC to cancel.");
-    var val := CInt(RequestInput(who, who.backpack, "Enter a new value.")) * 10;
-    if((!val) &&(val != 0))
-      SendSysMessage(who, "Cancelled.");
-    else
-      SetBaseSkillBaseValue(character, skill, val);
-    endif
-endfunction
\ No newline at end of file

Copied: trunk/096/pkg/commands/gm/gmpage.src.temp (from rev 331, trunk/096/pkg/commands/gm/gmpage.src)

Deleted: trunk/096/pkg/commands/gm/info.src
===================================================================
--- trunk/096/pkg/commands/gm/info.src	2005-09-30 09:54:57 UTC (rev 331)
+++ trunk/096/pkg/commands/gm/info.src	2005-09-30 12:18:34 UTC (rev 332)
@@ -1,1168 +0,0 @@
-// command .info  started June 19, 2000
-// Zulu (zulu at zuluhotel.com)
-// last updated June 25, 2000
-
-use uo;
-use os;
-use cfgfile;
-use basic;
-
-include ":bank:bank";
-include "include/attributes";
-include "include/yesNo";
-include "include/gumpUtil";
-include "include/math";
-
-const TEXTSTARTLOCY :=  70;
-
-var layout := array(
-"page 0",
-"nodispose",
-"resizepic  50   0 2600 540 405", // background
-"text 120 18 5 150", //prefix name
-"text 120 38 5 0", //name
-"text 120 58 5 151", //suffix name
-"text 400 18 5 152", //race label
-"text 440 18 5 153", //race
-"text 400 38 5 163", //jail label
-"text 440 38 5 164", //jail days
-"button 380 20 2118 2117 1 1 28", //race
-"button 250 20 2118 2117 1 1 40", //guild
-"text 270 18 5 165", //guild
-"button 100 20 2118 2117 1 1 25", //rename prefix
-"button 100 40 2118 2117 1 1 24", //rename
-"button 100 60 2118 2117 1 1 26", //rename suffix
-
-"page 1",
-"button 440 58 5540 5541 0 2",
-"text 130  80 300 6",
-"text 130 100 300 8",
-"text 130 120 300 10",
-"text 130 140 300 12",
-"text 130 160 300 14",
-"text 130 180 300 16",
-"text 130 200 300 18",
-"text 130 220 300 20",
-"text 130 240 300 22",
-"text 130 260 300 24",
-"text 130 280 300 26",
-"text 130 300 300 28",
-"text 130 320 300 148",
-"text 130 340 300 142",
-"text 130 360 300 144",
-"text 230  80 995 7",
-"text 230 100 995 9",
-"text 230 120 995 11",
-"text 230 140 995 13",
-"text 230 160 995 15",
-"text 230 180 995 17",
-"text 230 200 995 19",
-"text 230 220 995 21",
-"text 230 240 995 23",
-"text 230 260 995 25",
-"text 230 280 995 27",
-"text 230 300 995 29",
-"text 230 320 995 149",
-"text 230 340 995 143",
-"text 230 360 995 145",
-"button 370  82 2118 2117 1 1 1",
-"button 370 102 2118 2117 1 1 2",
-"button 370 122 2118 2117 1 1 3",
-"button 370 142 2118 2117 1 1 4",
-"button 370 162 2118 2117 1 1 5",
-"button 370 182 2118 2117 1 1 6",
-"button 370 202 2118 2117 1 1 7",  // hp
-"button 370 222 2118 2117 1 1 9",  // xmana
-"button 370 242 2118 2117 1 1 11", // stam
-"button 370 262 2118 2117 1 1 13",
-"button 370 282 2118 2117 1 1 14",
-"button 370 302 2118 2117 1 1 15",
-"button 370 322 2118 2117 1 1 27",
-"text 320  80 0 128",
-"text 320 100 0 128",
-"text 320 120 0 128",
-"text 320 140 0 128",
-"text 320 160 0 128",
-"text 320 180 0 128",
-"text 320 200 0 128",
-"text 320 220 0 128",
-"text 320 240 0 128",
-"text 275 260 0 128",
-"text 305 260 0 4",
-"text 320 280 0 128",
-"text 320 300 0 128",
-"text 320 320 0 128",
-
-"page 2",
-"button 400 58 5537 5538 0 1",
-"button 440 58 5540 5541 0 5",
-"text 130  80 300 30",
-"text 130  95 300 32",
-"text 130 110 300 34",
-"text 130 125 300 36",
-"text 130 140 300 38",
-"text 130 155 300 40",
-"text 130 170 300 42",
-"text 130 185 300 44",
-"text 130 200 300 46",
-"text 130 215 300 48",
-"text 130 230 300 50",
-"text 130 245 300 52",
-"text 130 260 300 54",
-"text 130 275 300 56",
-"text 130 290 300 58",
-"text 130 305 300 60",
-"text 130 320 300 62",
-"text 130 335 300 64",
-"text 281  80 995 31",
-"text 281  95 995 33",
-"text 281 110 995 35",
-"text 281 125 995 37",
-"text 281 140 995 39",
-"text 281 155 995 41",
-"text 281 170 995 43",
-"text 281 185 995 45",
-"text 281 200 995 47",
-"text 281 215 995 49",
-"text 281 230 995 51",
-"text 281 245 995 53",
-"text 281 260 995 55",
-"text 281 275 995 57",
-"text 281 290 995 59",
-"text 281 305 995 61",
-"text 281 320 995 63",
-"text 281 335 995 65",
-"radio 311  84 2362 2361 0 1000",
-"radio 311  99 2362 2361 0 1001",
-"radio 311 114 2362 2361 0 1002",
-"radio 311 129 2362 2361 0 1003",
-"radio 311 144 2362 2361 0 1004",
-"radio 311 159 2362 2361 0 1005",
-"radio 311 174 2362 2361 0 1006",
-"radio 311 189 2362 2361 0 1007",
-"radio 311 204 2362 2361 0 1008",
-"radio 311 219 2362 2361 0 1009",
-"radio 311 234 2362 2361 0 1010",
-"radio 311 249 2362 2361 0 1011",
-"radio 311 264 2362 2361 0 1012",
-"radio 311 279 2362 2361 0 1013",
-"radio 311 294 2362 2361 0 1014",
-"radio 311 309 2362 2361 0 1015",
-"radio 311 324 2362 2361 0 1016",
-"radio 311 339 2362 2361 0 1017",
-"button 285 365 2648 2647 0 3",
-"button 215 360 2130 2129 3 2 16",
-"button 150 360 2121 2120 1 2 -1",
-
-"page 3",
-"button 400 58 5537 5538 0 1",
-"button 440 58 5540 5541 0 5",
-"text 130  80 300 66",
-"text 130  95 300 68",
-"text 130 110 300 70",
-"text 130 125 300 72",
-"text 130 140 300 74",
-"text 130 155 300 76",
-"text 130 170 300 78",
-"text 130 185 300 80",
-"text 130 200 300 82",
-"text 130 215 300 84",
-"text 130 230 300 86",
-"text 130 245 300 88",
-"text 130 260 300 90",
-"text 130 275 300 92",
-"text 130 290 300 94",
-"text 130 305 300 96",
-"text 130 320 300 98",
-"text 130 335 300 100",
-"text 281  80 995 67",
-"text 281  95 995 69",
-"text 281 110 995 71",
-"text 281 125 995 73",
-"text 281 140 995 75",
-"text 281 155 995 77",
-"text 281 170 995 79",
-"text 281 185 995 81",
-"text 281 200 995 83",
-"text 281 215 995 85",
-"text 281 230 995 87",
-"text 281 245 995 89",
-"text 281 260 995 91",
-"text 281 275 995 93",
-"text 281 290 995 95",
-"text 281 305 995 97",
-"text 281 320 995 99",
-"text 281 335 995 101",
-"radio 311  84 2362 2361 0 1018",
-"radio 311  99 2362 2361 0 1019",
-"radio 311 114 2362 2361 0 1020",
-"radio 311 129 2362 2361 0 1021",
-"radio 311 144 2362 2361 0 1022",
-"radio 311 159 2362 2361 0 1023",
-"radio 311 174 2362 2361 0 1024",
-"radio 311 189 2362 2361 0 1025",
-"radio 311 204 2362 2361 0 1026",
-"radio 311 219 2362 2361 0 1027",
-"radio 311 234 2362 2361 0 1028",
-"radio 311 249 2362 2361 0 1029",
-"radio 311 264 2362 2361 0 1030",
-"radio 311 279 2362 2361 0 1031",
-"radio 311 294 2362 2361 0 1032",
-"radio 311 309 2362 2361 0 1033",
-"radio 311 324 2362 2361 0 1034",
-"radio 311 339 2362 2361 0 1035",
-"button 305 365 2650 2651 0 2",
-"button 285 365 2648 2647 0 4",
-"button 215 360 2130 2129 3 2 16",
-"button 150 360 2121 2120 1 2 -1",
-
-"page 4",
-"button 400 58 5537 5538 0 1",
-"button 440 58 5540 5541 0 5",
-"text 130  80 300 102",
-"text 130  95 300 104",
-"text 130 110 300 106",
-"text 130 125 300 108",
-"text 130 140 300 110",
-"text 130 155 300 112",
-"text 130 170 300 114",
-"text 130 185 300 116",
-"text 130 200 300 118",
-"text 130 215 300 120",
-"text 130 230 300 122",
-"text 130 245 300 124",
-"text 130 260 300 126",
-"text 281  80 995 103",
-"text 281  95 995 105",
-"text 281 110 995 107",
-"text 281 125 995 109",
-"text 281 140 995 111",
-"text 281 155 995 113",
-"text 281 170 995 115",
-"text 281 185 995 117",
-"text 281 200 995 119",
-"text 281 215 995 121",
-"text 281 230 995 123",
-"text 281 245 995 125",
-"text 281 260 995 127",
-"radio 311  84 2362 2361 0 1036",
-"radio 311  99 2362 2361 0 1037",
-"radio 311 114 2362 2361 0 1038",
-"radio 311 129 2362 2361 0 1039",
-"radio 311 144 2362 2361 0 1040",
-"radio 311 159 2362 2361 0 1041",
-"radio 311 174 2362 2361 0 1042",
-"radio 311 189 2362 2361 0 1043",
-"radio 311 204 2362 2361 0 1044",
-"radio 311 219 2362 2361 0 1045",
-"radio 311 234 2362 2361 0 1046",
-"radio 311 249 2362 2361 0 1047",
-"radio 311 264 2362 2361 0 1048",
-"button 305 365 2650 2651 0 3",
-"button 215 360 2130 2129 3 2 16",
-"button 150 360 2121 2120 1 2 -1",
-"page 5",
-"button 400 58 5537 5538 0 2",
-"text 130  80 300 129", //freeze
-"text 130 100 300 130", //unfreeze
-"text 130 120 300 154", // lightning
-"text 130 140 300 155", // message
-"text 130 160 300 156", // resurrect
-"text 130 180 300 131", //kick
-"text 130 200 300 132", //jail
-"text 130 220 300 157", //forgive
-"text 290  80 300 158", //notes
-"text 290 100 300 133", //bank
-"text 290 120 300 134", //pack
-"text 290 140 300 159", //goto
-"text 290 160 300 135", //summon
-"text 290 180 300 160", //summon cage
-"text 290 200 300 161", // kill
-"text 290 220 300 162", // ban
-"button 220  82 2118 2117 1 0 17", // freeze
-"button 220 102 2118 2117 1 0 18", // unfreeze
-"button 220 122 2118 2117 1 0 30", // lightning
-"button 220 142 2118 2117 1 0 31", // message
-"button 220 162 2118 2117 1 0 32", // resurrect
-"button 220 182 2118 2117 1 0 19", // kick
-"button 220 202 2118 2117 1 0 20", // jail
-"button 220 222 2118 2117 1 0 29", // forgive
-"button 390  82 2118 2117 1 0 33", // notes
-"button 390 102 2118 2117 1 0 21", // bank
-"button 390 122 2118 2117 1 0 22", // pack
-"button 390 142 2118 2117 1 0 34", // goto
-"button 390 162 2118 2117 1 0 23", // summon
-"button 390 182 2118 2117 1 0 35", // summon cage
-"button 390 202 2118 2117 1 0 36", // kill
-"button 390 222 2118 2117 1 0 37", // ban
-"text 200 260 300 136",
-"text 200 280 300 138",
-"text 200 300 300 140",
-"text 300 260 995 137",
-"text 300 280 995 139",
-"text 300 300 995 141"
-);
-
-var data := array(
-       "",                     //0 Mobile name
-       "Stats",                //1
-       "Skills",               //2
-       "Other",                //3
-       "(temp)",               //4
-       "/",                    //5
-       "Strength",             //6
-       "",                     //7 mob str
-       "Intelligence",         //8
-       "",                     //9 mob int
-       "Dexterity",            //10
-       "",                     //11 mob dex
-       "X",                    //12
-       "",                     //13 mob x
-       "Y",                    //14
-       "",                     //15 mob y
-       "Z",                    //16
-       "",                     //17 mob z
-       "HP/MHP",               //18
-       "",                     //19 mob hp/maxhp
-       "MP/MMP",               //20
-       "",                     //21 mob mana/maxmana
-       "ST/MST",               //22
-       "",                     //23 mob stam/maxstam
-       "AR",                   //24
-       "",                     //25 mob ar
-       "Graphic",              //26
-       "",                     //27 mob graphic
-       "Color",                //28
-       "",                     //29 mob color
-       "ALCHEMY",              //30
-       "",
-       "ANATOMY",              //32
-       "",
-       "ANIMALLORE",           //34
-       "",
-       "ITEMID",               //36
-       "",
-       "ARMSLORE",             //38
-       "",
-       "PARRYING",             //40
-       "",
-       "BEGGING",              //42
-       "",
-       "BLACKSMITHY",          //44
-       "",
-       "BOWCRAFT",             //46
-       "",
-       "PEACEMAKING",          //48
-       "",
-       "CAMPING",              //50
-       "",
-       "CARPENTRY",            //52
-       "",
-       "CARTOGRAPHY",          //54
-       "",
-       "COOKING",              //56
-       "",
-       "DETECTHIDDEN",         //58
-       "",
-       "ENTICEMENT",           //60
-       "",
-       "EVALINT",              //62
-       "",
-       "HEALING",              //64
-       "",
-       "FISHING",              //66
-       "",
-       "FORENSICS",            //68
-       "",
-       "HERDING",              //70
-       "",
-       "HIDING",               //72
-       "",
-       "PROVOCATION",          //74
-       "",
-       "INSCRIPTION",          //76
-       "",
-       "LOCKPICKING",          //78
-       "",
-       "MAGERY",               //80
-       "",
-       "RESIST",               //82
-       "",
-       "TACTICS",              //84
-       "",
-       "SNOOPING",             //86
-       "",
-       "MUSICIANSHIP",         //88
-       "",
-       "POISONING",            //90
-       "",
-       "ARCHERY",              //92
-       "",
-       "SPIRITSPEAK",          //94
-       "",
-       "STEALING",             //96
-       "",
-       "TAILORING",            //98
-       "",
-       "TAMING",               //100
-       "",
-       "TASTEID",              //102
-       "",
-       "TINKERING",            //104
-       "",
-       "TRACKING",             //106
-       "",
-       "VETERINARY",           //108
-       "",
-       "SWORDS",               //110
-       "",
-       "MACES",                //112
-       "",
-       "FENCING",              //114
-       "",
-       "WRESTLING",            //116
-       "",
-       "LUMBERJACK",           //118
-       "",
-       "MINING",               //120
-       "",
-       "MEDITATION",           //122
-       "",
-       "STEALTH",              //124
-       "",
-       "REMOVETRAP",           //126
-       "",
-       "Edit",                 //127
-       "Freeze",
-       "Unfreeze",             //129
-       "Kick",
-       "Jail",                 //131
-       "Open Bank",
-       "Open Pack",            //133
-       "Summon",
-       "Weapon:",              //135
-       "",
-       "Damage:",              //137
-       "",
-       "HP/MAX:",              //139
-       "",
-       "CmdLevel:",            //141
-       "",
-       "Acctname:",            //143
-       "",
-       "",		       //145
-       "",
-       "Gender",	       //147
-       "",
-       "",		       //149 - prefix
-       "",		       //suffix
-       "Race:",
-       "<none>",
-       "Lightning",
-       "Message",
-       "Resurrect",
-       "Forgive",
-       "Notes",
-       "Goto/Send",
-       "Summon Cage",
-       "Kill",
-       "Ban",
-       "Jail:",
-       "",
-       "Remove Guild"
-);
-
-var layout3 := {
-"page 0",
-"nodispose",
-"nomove",
-"resizepic  20 20 2620 517 260", // background
-
-"text     30  0  910 0 ",
-"text    410  0  910 1 ",
-
-"button  508 0 4011 4013 1 0 1", //modify notes button
-
-"textentry 30 30 500 20 910 2 2",
-"textentry 30 50 500 20 910 3 3",
-"textentry 30 70 500 20 910 4 4",
-"textentry 30 90 500 20 910 5 5",
-"textentry 30 110 500 20 910 6 6",
-"textentry 30 130 500 20 910 7 7",
-"textentry 30 150 500 20 910 8 8",
-"textentry 30 170 500 20 910 9 9",
-"textentry 30 190 500 20 910 10 10",
-"textentry 30 210 500 20 910 11 11",
-"textentry 30 230 500 20 910 12 12",
-"textentry 30 250 500 20 910 13 13"
-};
-
-var testdata := {
-    "Account Notes:",
-    "Save Notes:",
-    "",
-    "",
-    "",
-    "",
-    "",
-    "",
-    "",
-    "",
-    "",
-    "",
-    "",
-    ""
-};
-
-var golayout := array(
-"page 0",
-"nodispose",
-"nomove",
-"resizepic  50   0 2600 540 405", // background
-
-"text 120 59 300 0",
-"text 220 59 300 1",
-"text 270 59 300 2",
-"text 320 59 300 0",
-"text 420 59 300 1",
-"text 470 59 300 2"
-
-);
-
-var godata := array(
-       "Location",         //0
-       "Goto",
-       "Send"
-);
-
-program textcmd_info( character )
-  var who, newname, whoname, tempitem, charcmdlevel := character.cmdlevel;
-  SendSysMessage( character, "Select a MOBILE." );
-  who :=  Target( character, TGTOPT_NOCHECK_LOS );
-  if(!who || !GetStrength(who))
-    SendSysMessage(character,"Invalid selection.");
-    return;
-  endif
-  whoname := who.name;
-  if(GetObjProperty(who,"guardtype")==2)
-	data[1] := "Chaos " + whoname;
-  elseif (GetObjProperty(who,"guardtype")==1)
-    data[1] := "Order " + whoname;
-  else
-	data[1] := whoname;
-  endif
-  data[150] := who.gender;
-  data[151] := who.title_prefix;
-  data[152] := who.title_suffix;
-  var acc := who.acct;
-  var release := acc.getprop("Release");
-  tempitem := who.title_race;
-  if(tempitem!="")
-    data[154] := who.title_race;
-  endif
-  var guild_id:=GetObjProperty(who,"guild_id");
-  if(guild_id.errortext)
-    layout[13]:="";
-    layout[14]:="";
-  endif
-  FillInStats( who );
-  FillInSkills( who );
-  FillInWeapon( who );
-  if(!who.isA(POLCLASS_NPC))
-    tempitem := (((release - ReadGameClock())/86400) + 1);
-    if(tempitem<0)
-      tempitem:=0;
-    endif
-    data[165] := tempitem;
-  else
-    data[154] :="n/a";
-    data[165] :="n/a";
-    data[146] :="n/a";
-  endif
-  var result := SendDialogGump( character, layout, data );
-  var reskey;
-  foreach key in (result.keys)
-    if(key >= 1000)
-      reskey := key;
-    endif
-  endforeach
-  if(result[0]==0)
-    return;
-  endif
-  if(result[0]<=15)
-    EditStat( who, character, result[0] );
-    return;
-  endif
-  if(result[0]==16)
-    EditSkill( who, character, reskey-1000 );
-    return;
-  endif
-  if(result[0]==17)
-    who.frozen := 1;
-    SendSysMessage( character, whoname + " is frozen.");
-    return;
-  endif
-  if(result[0]==18)
-    who.frozen := 0;
-    SendSysMessage( character, whoname + " is unfrozen.");
-    return;
-  endif
-  if (result[0]==19)
-    if (charcmdlevel<=2)
-      noaccess(character);
-      return;
-    endif
-    if(!who.isA(POLCLASS_NPC))
-      SendSysMessage(who, "You have been kicked off the server by " + character.name + ".");
-      DisconnectClient( who );
-    endif
-    return;
-  endif
-  if(result[0]==20) // jail
-    if(who.npctemplate)
-      return;
-    endif
-    if(release>0)
-      SendSysMessage( character, whoname + " is already jailed.");
-      return;
-    endif
-    var val := CInt(SendTextEntryGump( character, "How many days will this account remain jailed? (Max 14)", 40 ));
-    var time:=0;
-    case(val)
-       1: time := 86400;
-       2: time := 172800;
-       3: time := 259200;
-       4: time := 345600;
-       5: time := 432000;
-       6: time := 518400;
-       7: time := 604800;
-       8: time := 691200;
-       9: time := 777600;
-      10: time := 864000;
-      11: time := 950400;
-      12: time := 1036800;
-      13: time := 1123200;
-      14: time := 1209600;
-    endcase
-    if(time==0)
-      SendSysMessage(character, "Cancelled.");
-      return;
-    endif
-    acc.setprop("Release", (ReadGameClock() + time));
-    MoveCharacterToLocation( who, 1, 1, 0, 0);
-    SendSysMessage( who, "You have been jailed");
-    SendSysMessage( character, whoname + " has been jailed." );
-    return;
-  endif
-  if(result[0]==29) // forgive
-    if(who.npctemplate)
-      return;
-    endif
-    if(release==0)
-      SendSysMessage( character, whoname + " wasn't jailed.");
-      return;
-    endif
-    acc.setprop("Release",0);
-    SendSysMessage( who, "You have been freed.");
-    SendSysMessage( character, whoname + " has been freed." );
-    MoveCharacterToLocation( who, 1, 1, 20, 0);
-    return;
-  endif
-
-if (result[0]==21)
-if( !who.npctemplate )
-var bankbox := FindBankBox( who );
-SendOpenSpecialContainer( character, bankbox );
-else
-SendSysMessage( character, "This can only be used on players." );
-endif
-return;
-endif
-if (result[0]==22)
-if( !who.npctemplate )
-SendOpenSpecialContainer( character, who.backpack );
-else
-SendSysMessage( character, "This can only be used on players." );
-endif
-return;
-endif
-if (result[0]==23) // summon
-MoveCharacterToLocation( who, character.x, character.y, character.z );
-showflame(who);
-return;
-endif
-if (result[0]==24) // rename
-newname := RequestInput( character, character.backpack, "Enter a new name:");
-if (!newname)
-SendSysMessage(character, "Cancelled.");
-else
-SetName( who, newname );
-SendSysMessage(who, "Your name has been changed.");
-endif
-return;
-endif
-if (result[0]==25) // rename prefix
-newname := RequestInput( character, character.backpack, "Enter a new prefix name:");
-if (!newname)
-SendSysMessage(character, "Cancelled.");
-else
-who.title_prefix := newname;
-SendSysMessage(who, "Your name has been changed.");
-endif
-return;
-endif
-if (result[0]==26) // rename suffix
-newname := RequestInput( character, character.backpack, "Enter a new suffix name:");
-if (!newname)
-SendSysMessage(character, "Cancelled.");
-else
-who.title_suffix := newname;
-SendSysMessage(who, "Your name has been changed.");
-endif
-return;
-endif
-if (result[0]==27) // Gender
-tempitem := CInt(RequestInput( character, character.backpack, "Enter a gender(0=male, 1=female)"));
-if ((tempitem==1) || (tempitem==0))
-who.gender := tempitem;
-SendSysMessage(who, "Your gender has been changed.");
-else
-SendSysMessage(character, "Canceled.");
-endif
-return;
-endif
-if (result[0]==28) // race
-if (who.npctemplate) return; endif
-if (charcmdlevel<=2)
-noaccess(character);
-return;
-endif
-if ( YesNo(character,"Delete Race?") )
-who.title_race :="";
-who.color := who.truecolor;
-SendSysMessage( character, "Race has been removed." );
-SendSysMessage( who, "Your race has been removed." );
-else
-SendSysMessage(character, "Cancelled.");
-endif
-return;
-endif
-if (result[0]==40) // guild
-if (who.npctemplate) return; endif
-if (charcmdlevel<=2)
-noaccess(character);
-return;
-endif
-removeguild(character,who);
-return;
-endif
-if (result[0]==30) // lightning
-PlayLightningBoltEffect(who);
-PlaySoundEffect( who, 0x0207 );
-SendSysMessage( who, "You are being warned." );
-SendSysMessage( character, whoname + " has been warned." );
-sleep(2);
-PlayLightningBoltEffect(who);
-PlaySoundEffect( who, 0x0029 );
-return;
-endif
-if (result[0]==31) // message
-var themessage := RequestInput(character, character.backpack, "What message would you like to send " + whoname + "?");
-if (!themessage)
-        SendSysMessage(character, "Cancelled.");
-        return;
-endif
-SendSysMessage(who, "MSG from Staff: " + themessage);
-SendSysMessage(character, "MSG sent.");
-return;
-endif
-if (result[0]==32) // resurrect
-var newcolor, racepicked := who.title_race;
-if (who.dead)
-Resurrect( who );
-if (racepicked=="Elf")
-	newcolor := 770;
-elseif (racepicked=="Dark-Elf")
-	newcolor := 33877;
-elseif (racepicked=="Goblin")
-	newcolor := 34186;
-elseif (racepicked=="Barbarian")
-	newcolor := 33804;
-elseif (racepicked=="Dwarf")
-	newcolor := 33888;
-else
-	newcolor := who.truecolor;
-endif
-	who.color := newcolor;
-else
-        SendSysMessage( character, whoname + " is not dead!" );
-endif
-return;
-endif
-if (result[0]==33) // notes
-if (who.npctemplate) return; endif
-var note:=acc.GetProp("Notes");
-SetNotes(note);
-var whataction := SendDialogGump( character, layout3, testdata );
-if (whataction[0]!=1) return; endif
-var subnote, i;
-note :="";
-for (i:=2; i<=12; i:=i+1)
-subnote:=whataction[i];
-subnote[1, find(subnote, ": ", 1)+1]:="";
-if (subnote!="")
-note:=note+" "+subnote;
-endif
-endfor
-acc.setprop("Notes", note);
-return;
-endif
-if (result[0]==34) // goto
-invokegomenu( character);
-return;
-endif
-if (result[0]==35) // summon cage
-MoveCharacterToLocation(who, character.x+1, character.y+1, character.z, MOVECHAR_FORCELOCATION);
-tempitem := CreateItemAtLocation( who.x-1,who.y, who.z, 0x821, 1, who.realm );
-tempitem.decay :=20;
-tempitem := CreateItemAtLocation( who.x+1,who.y, who.z, 0x821, 1, who.realm );
-tempitem.decay :=20;
-tempitem := CreateItemAtLocation( who.x-1,who.y+1, who.z, 0x821, 1, who.realm );
-tempitem.decay :=20;
-tempitem := CreateItemAtLocation( who.x+1,who.y+1, who.z, 0x821, 1, who.realm );
-tempitem.decay :=20;
-tempitem := CreateItemAtLocation( who.x,who.y-1, who.z, 0x823, 1, who.realm );
-tempitem.decay :=20;
-tempitem := CreateItemAtLocation( who.x,who.y+1, who.z, 0x823, 1, who.realm );
-tempitem.decay :=20;
-tempitem := CreateItemAtLocation( who.x+1,who.y-1, who.z, 0x823, 1, who.realm );
-tempitem.decay :=20;
-tempitem := CreateItemAtLocation( who.x+1,who.y+1, who.z, 0x823, 1 , who.realm);
-tempitem.decay :=20;
-who.paralyzed := 1;
-showflame(who);
-return;
-endif
-if (result[0]==36) // kill
-if (charcmdlevel<=2)
-noaccess(character);
-return;
-endif
-if (!who.dead)
-RevokePrivilege( who, "invul" );
-SetObjProperty(who, "guardkill", 1);
-ApplyRawDamage( who, GetHp(who) );
-SendSysMessage( character, whoname + " has been killed!" );
-else
-SendSysMessage( character, whoname + " is not dead!" );
-endif
-return;
-endif
-if (result[0]==37) // ban
-if (who.npctemplate) return; endif
-if (charcmdlevel<=3)
-noaccess(character);
-return;
-endif
-SendSysMessage(who, "Your account has been banned by " + character.name + ".");
-var acc := who.acct;
-acc.ban();
-return;
-endif
-endprogram
-
-function removeguild(who,client)
-var guild_id:=GetObjProperty(client,"guild_id");
-var guild:=FindGuild(guild_id);
-SendSysMessage(who,"Remove their guild?",3,34);
-var answer:=YesNo(who,"Remove Guild?");
-if (!answer)
-SendSysMessage(who,"Guild not removed.",3,34);
-return;
-endif
-var gm:=findgm(guild);
-if (client.serial==gm[2]) guild.setprop("gm",0); endif
-guild.removemember(client);
-EraseObjProperty(client,"guild_id");
-EraseObjProperty(client,"fealty");
-fixnameguild(client);
-client.title_guild:="";
-EraseObjProperty(client,"abv");
-EraseObjProperty(client,"talkchat");
-EraseObjProperty(client,"hearchat");
-SendSysMessage(client,"You are no longer a member of "+guild.getprop("guildname")+".",3,70);
-SendSysMessage(who,"Guild has been removed.",3,70);
-var i,all:=guild.members;
-if (all.size()==0)
-all:=guild.allyguilds;
-if (all.size()!=0)
-for(i:=1;i<=all.size();i:=i+1)
-guild.removeallyguild(all[i]);
-endfor
-endif
-all:=guild.enemyguilds;
-if (all.size()!=0)
-for(i:=1;i<=all.size();i:=i+1)
-guild.removeenemyguild(all[i]);
-endfor
-endif
-DestroyGuild(guild);
-SendSysMessage(who,"You will need to delete the old guildstone.",3,34);
-endif
-endfunction
-
-function fixnameguild(who)
-  var abv:=GetObjProperty(who,"abv"),result:=find(who.name," ["+abv+"]",1),name:=who.name;
-  result:=result-1;
-  name:=name[1,result];
-  who.name:=name;
-endfunction
-
-function findgm(guild)
-  var returninfo:={"In Vote","0"},i,all:=guild.members,gm:=guild.getprop("gm");
-  for(i:=1;i<=all.size();i:=i+1)
-    if(all[i].serial==gm)
-      returninfo[1]:=all[i].name;
-      returninfo[2]:=all[i].serial;
-      returninfo[3]:=all[i];
-    endif
-  endfor
-  return returninfo;
-endfunction
-
-function noaccess(who)
-  SendSysMessage( who, "You do not have rights to change that." );
-  return;
-endfunction
-
-function FillInStats( who )
-   var levelname;
-   case( who.cmdlevel )
-      0: levelname := "Player";
-      1: levelname := "Counselor";
-      2: levelname := "Seer";
-      3: levelname := "GM";
-      4: levelname := "Admin";
-      5: levelname := "Development";
-   endcase
-   data[8] := GetStrength(who);
-   data[10] := GetIntelligence(who);
-   data[12] := GetDexterity(who);
-   data[14] := who.x;
-   data[16] := who.y;
-   data[18] := who.z;
-   data[20] := GetHp(who) + "/" + GetMaxHp(who);
-   data[22] := GetMana(who) + "/" + GetMaxMana(who);
-   data[24] := GetStamina(who) + "/" + GetMaxStamina(who);
-   data[26] := who.ar;
-   data[28] := who.graphic;
-   data[30] := who.color;
-   data[144] := levelname;
-   data[146] := who.acctname;
-endfunction
-
-function FillInSkills( who )
-   var datindx;
-   var skillindx := 0;
-   for( datindx := 32; datindx <= 128; datindx := datindx + 2 )
-       data[datindx] := GetEffectiveSkill( who, skillindx);
-       skillindx := skillindx + 1;
-   endfor
-endfunction
-
-function FillInWeapon( who )
-   var weapfile := ReadConfigFile( ":combat:itemdesc" );
-   var npcfile := ReadConfigFile( "::npcdesc" );
-   if(who.weapon)
-      var idx := find( who.weapon.name, "[", 1 ); //ignore maker's mark
-      if(idx!=0)
-          var tempn := who.weapon.desc;
-          tempn := tempn[1,idx-1];
-          data[138] := tempn;
-      else
-          if(who.weapon.desc == "nodraw")
-             data[138] := "Wrestling";
-          else
-             data[138] := who.weapon.desc;
-          endif
-      endif
-      var dam := weapfile[who.weapon.objtype].Damage;
-      if(!dam)
-          data[140] := "n/a";
-      else
-          data[140] := dam;
-      endif
-      data[142] := who.weapon.hp + " / " + who.weapon.maxhp;
-   else
-      data[138] := "n/a";
-      data[140] := "n/a";
-      data[142] := "n/a";
-      if(who.isA(POLCLASS_NPC)) //Hi, i'm an NPC
-           var dam := npcfile[who.npctemplate].AttackDamage;
-           var weap := npcfile[who.npctemplate].AttackSkillId;
-           var ar := npcfile[who.npctemplate].AR;
-           if( weap )
-              data[138] := weap;
-           endif
-           if( dam )
-              data[140] := dam;
-           endif
-           if( ar )
-              data[142] := "AR: " + ar;
-           endif
-      endif
-   endif
-endfunction
-
-function EditStat(who, character, result)
-  if(character.cmdlevel<3)
-    noaccess(character);
-    return;
-  endif
-  SendSysMessage(character, "Caution! Values are changed immediately, Integers only!. Hit ESC to cancel.");
-  var val := CInt(RequestInput(character, character.backpack, "Enter a new value."));
-  if(!val)
-    SendSysMessage(character, "Canceled.");
-    return;
-  endif
-  case(result)
-    1: SetBaseStrength(who,val);
-    2: SetBaseIntelligence(who,val);
-    3: SetBaseDexterity(who,val);
-    4: MoveCharacterToLocation(who, val, who.y, who.z);
-    5: MoveCharacterToLocation(who, who.x, val, who.z);
-    6: MoveCharacterToLocation(who, who.x, who.y, val);
-    7: SetHp(who, val);
-    9: SetMana(who, val);
-   11: SetStamina(who, val);
-   13: who.ar_mod := 0;
-       who.ar_mod := val - who.ar;
-   14: who.graphic := val;
-   15: who.color := val;
-  endcase
-endfunction
-
-function EditSkill( who, character, skill );
-  if (skill>48 && skill<0)
-    return;
-  endif
-  if (character.cmdlevel<3)
-    noaccess(character);
-    return;
-  endif
-  SendSysMessage( character, "Caution! Values are changed immediately, Integers only!. Hit ESC to cancel." );
-  var val := CInt(RequestInput( character, character.backpack, "Enter a new value.")) * 10;
-  if( ((!val) && (val != 0)) )
-   SendSysMessage(character, "Canceled.");
-   return;
-  endif
-  SetBaseSkillBaseValue(who, skill, val);
-endfunction
-
-function showflame(who)
-  var coolflame;
-  if ((who.cmdlevel>3) && (who.concealed!=1))
-    coolflame := CreateItemAtLocation( who.x, who.y, who.z, 0x3709, 1, who.realm );
-    PlaySoundEffect(who, 0x208);
-    sleep(3);
-    DestroyItem(coolflame);
-  endif
-endfunction
-
-function SetNotes(note)
-  var split:=SplitWords(note);
-  var width:=0;
-  var lines:=0;
-  var index:=1;
-  while ((index<=len(split)) && (lines<=12))
-    if (width==0)
-      var testword:=split[index];
-      lines:=lines+1;
-      testdata[2+lines]:=testword;
-      width:=GumpTextWidthFast(testword);
-      index:=index+1;
-    else
-      var testword:=" "+split[index];
-      var testwidth:=GumpTextWidthFast(testword);
-      if (width+testwidth<CInt(500/1.5))
-        testdata[2+lines]:=testdata[2+lines]+testword;
-        width:=width+testwidth;
-        index:=index+1;
-      else
-        width:=0;
-      endif
-    endif
-  endwhile
-  if (lines>12)
-    testdata[1+lines]:=testdata[1+lines]+"...";
-  else
-    while(lines<12)
-      lines:=lines+1;
-      testdata[2+lines]:="";
-    endwhile
-  endif
-endfunction
-
-function invokegomenu( who)
-  var tname := lower(who.name);
-  FillIngoArrays(tname);
-  var goresult := SendDialogGump(who, golayout, godata);
-  if (!(goresult[0] == 0))
-    var locs    := ReadConfigFile("::golocs");
-    var MaxLocs := GetConfigMaxIntKey(locs)+1;
-    var dest    := locs[mod(goresult[0], MaxLocs)];
-    var traveler;
-    if (goresult[0] > MaxLocs)
-      SendSysMessage( who, "Select a MOBILE." );
-      traveler :=  Target( who, TGTOPT_NOCHECK_LOS );
-      if(!traveler || !GetStrength(traveler))
-        SendSysMessage( who, "Invalid selection." );
-      endif
-    else
-      traveler := who;
-    endif
-    MoveCharacterToLocation(traveler, dest.X, dest.Y, GetMapInfo(dest.X, dest.Y, who.realm).z);
-    showflame(traveler);
-    UnloadConfigFile("::golocs");
-  endif
-endfunction
-
-function FillIngoArrays( tname )
-    var telelocations := ReadConfigFile("::golocs");
-    var datalen;
-    var layoutlen;
-    var prev_y := CInt(TEXTSTARTLOCY);
-    var datindx := 2;
-    var buttonret := 1;
-    var i, currloc, rowloc:=120, locationscount := 0;
-    var numlocations := GetConfigMaxIntKey(telelocations);
-    for( i := 1; i <= numlocations; i := i + 1  )
-      currloc := telelocations[i];
-      if ((currloc.TYPE == "all") || (currloc.TYPE == tname))
-        locationscount := locationscount + 1;
-        datalen := GetgoDataLength();
-        layoutlen := GetgoLayoutLength();
-        datindx := datalen+1;
-        godata[datindx] := currloc.Name;
-        if (mod(locationscount, 19) == 1)
-          if (locationscount >= 18)
-            rowloc :=320;
-          endif
-          prev_y := TEXTSTARTLOCY;
-        endif
-        golayout[GetgoLayoutLength()+1] := ("text " + rowloc +" "+ CStr(prev_y + 20) + " 995 " + datalen);
-        golayout[GetgoLayoutLength()+1] := ("button " + (rowloc+110) +" "+CStr(prev_y + 25) + " 2103 2104 1 0 " + ((buttonret+1) / 2));
-       golayout[GetgoLayoutLength()+1] := ("button " + (rowloc+160) +" "+CStr(prev_y + 25) + " 2103 2104 1 0 " + (((buttonret+1) / 2) + numlocations+1)); // Send Button
-        prev_y := prev_y + 15;
-      endif
-      buttonret := buttonret + 2;
-    endfor
-endfunction
-
-function GetgoLayoutLength();
-    return (len(golayout));
-endfunction
-
-function GetgoDataLength();
-    return (len(godata));
-endfunction
\ No newline at end of file

Copied: trunk/096/pkg/commands/gm/info.src.temp (from rev 331, trunk/096/pkg/commands/gm/info.src)

Deleted: trunk/096/pkg/commands/gm/iteminfo.src
===================================================================
--- trunk/096/pkg/commands/gm/iteminfo.src	2005-09-30 09:54:57 UTC (rev 331)
+++ trunk/096/pkg/commands/gm/iteminfo.src	2005-09-30 12:18:34 UTC (rev 332)
@@ -1,261 +0,0 @@
-use uo;
-use os;
-use cfgfile;
-
-include ":bank:bank";
-include "include/attributes";
-
-var layout := array(
-
-"page 0",
-"resizepic 0 50 2620 500 300",
-"resizepic 325 100 5054 150 190",
-"text 40 59 5 0",
-"text 20 84 40 1",
-"text 114 84 40 2",
-"text 208 84 40 3",
-"button 78 81 2640 2641 0 1",
-"button 170 81 2640 2641 0 4",
-"button 256 81 2640 2641 0 5",
-"button 20 62 2118 2117 1 1 24",
-"",
-
-"page 1",
-"text 14 120 40 6",
-"text 120 120 40 7",
-"text 14 145 40 8",
-"text 120 145 40 9",
-"text 14 170 40 10",
-"text 120 170 40 11",
-"text 14 195 40 12",
-"text 120 195 40 13",
-"text 14 220 40 14",
-"text 120 220 40 15",
-"text 14 245 40 16",
-"text 120 245 40 17",
-"text 14 270 40 18",
-"text 120 270 40 19",
-"text 14 295 40 20",
-"text 120 295 40 21",
-"button 270 120 2644 2645 0 2", //Page 2 (Amount)
-"button 270 145 2640 2641 1 1 2", //x
-"button 270 170 2640 2641 1 1 3", //y
-"button 270 195 2640 2641 1 1 4", //z
-"button 270 220 2640 2641 1 1 5", //hp
-"button 270 245 2644 2645 0 3", //Page 3 ar/dam mods
-"button 270 270 2640 2641 1 1 7", //graph
-"button 270 295 2640 2641 1 1 8", //color
-
-"page 2",
-"text 14 120 40 6", //Amount
-"text 120 120 40 7",
-"text 14 155 40 28", //Create Stack In Backpack
-"button 270 155 2640 2641 1 1 1",
-"text 14 180 40 30", //Dupe Item In Backpack
-"button 270 180 2640 2641 1 1 16",
-"button 270 120 2645 2644 0 1", //Page 1 (Amount)
-
-"page 3",
-"text 14 120 40 6",
-"text 120 120 40 7",
-"text 14 145 40 8",
-"text 120 145 40 9",
-"text 14 170 40 10",
-"text 120 170 40 11",
-"text 14 195 40 12",
-"text 120 195 40 13",
-"text 14 220 40 14",
-"text 120 220 40 15",
-"text 14 245 40 16",
-"text 120 245 40 17",
-"button 270 120 2644 2645 0 2", //Page 2 (Amount)
-"button 270 145 2640 2641 1 1 2", //x
-"button 270 170 2640 2641 1 1 3", //y
-"button 270 195 2640 2641 1 1 4", //z
-"button 270 220 2640 2641 1 1 5", //hp
-"button 270 245 2645 2644 0 1", //Page 1
-"text 14 270 40 31",            //ar/dmg mod.
-"text 120 270 40 32",            //ar/dmg mod. value
-"button 270 270 2640 2641 1 1 6",
-
-"page 4",
-"text 14 120 40 22",  //Destroy
-"button 270 120 2640 2641 1 1 20",
-"text 14 145 40 26",  //Bounce
-"button 270 145 2640 2641 1 1 21",
-"text 14 170 40 27",  //Set Movable
-"button 270 170 2640 2641 1 1 22",
-"text 14 195 40 25",  //Set Newbie
-"button 270 195 2640 2641 1 1 23",
-
-"page 5",
-"text 14 120 40 35",
-"text 14 145 40 36"
-
-);
-
-var data := array(
-       "",                     //0 Mobile name
-       "General",              //1
-       "Options",              //2
-       "Other",                //3
-       "temp",                 //4
-       "/",                    //5
-       "Amount",               //6
-       "",                     //7 item amount
-       "X",                    //8
-       "",                     //9 mob x
-       "Y",                    //10
-       "",                     //11 mob y
-       "Z",                    //12
-       "",                     //13 mob z
-       "Hp/Mhp",               //14
-       "",                     //15 mob stam/maxstam
-       "Armor",                //16
-       "",                     //17 mob ar
-       "Graphic",              //18
-       "",                     //19 mob graphic
-       "Color",                //20
-       "",                     //21 mob color
-       "Destroy Item",         //22
-       "",                     //23
-       "Dupe Item",            //24
-       "",                     //25 SetNewbie
-       "Bounce Item in Backpack",  //26
-       "",                     //27 SetMovable
-       "Create Stack in Backpack", //28
-       "0",                       //29
-       "Dupe Item in Backpack",    //30
-       "",                     //31
-       "",                     //32 Ar/Dmg Modifier
-       "",                     //33 Ar/Dmg Modifier Value
-       "",                     //34
-       "Stats modifiers for wearable",
-       "items not implemented yet."
-
-);
-
-program textcmd_info(character, text)
-  SendSysMessage(character, "Select an Item.");
-  var item;
-  if (text != "")
-      item := SystemFindObjectBySerial( CInt(text), SYSFIND_SEARCH_OFFLINE_MOBILES|SYSFIND_SEARCH_STORAGE_AREAS );
-  else
-      var what :=  TargetCoordinates(character);
-      item := what.item;
-  endif
-  
-  if(!item || GetIntelligence(item))
-    SendSysMessage(character, "Invalid selection.");
-    return;
-  endif
-  layout[12] := "tilepic 380 180 " + item.graphic;
-  data[1] := "Info On: " + item.desc;
-  if(item.newbie == 1)
-    data[26] := "Set Item not Newbie";
-  else
-    data[26] := "Set Item Newbie";
-  endif
-  if(item.movable == 1)
-    data[28] := "Set Item Unmovable";
-  else
-    data[28] := "Set Item Movable";
-  endif
-  General(item);
-  var result := SendDialogGump(character, layout, data);
-  case(result[0])
-     1:  //fall through intentional
-     2:
-     3:
-     4:
-     5:
-     6:
-     7:
-     8:
-     9:
-    10:
-    11:
-    12:
-    13:
-    14:
-    13:
-    15: EditItem(item, character, result[0]);
-    16: CreateItemInContainer(character.backpack, item.objtype, 1);
-    20: DestroyItem(item);
-        PrintTextAbovePrivate(character,"Object Destroyed",character);
-    21: MoveItemToContainer(item, character.backpack, x := -1, y := -1);
-        PrintTextAbovePrivate(character,"Object Bounced",character);
-    22: if(item.movable == 1)
-          item.movable := 0;
-        else
-          item.movable := 1;
-        endif
-    23: if(item.newbie == 1)
-          item.newbie := 0;
-        else
-          item.newbie := 1;
-        endif
-    24: SetName(item, RequestInput(character, character.backpack, "Enter a new name."));
-  endcase
-endprogram
-
-function General(item)
-   data[8]  := item.amount;
-   data[10] := item.x;
-   data[12] := item.y;
-   data[14] := item.z;
-   if(item.hp)
-    data[16] := item.hp + "/" + item.maxhp;
-   else
-    data[16] := "n/a";
-    layout[34] := 0;
-   endif
-   var weapfile := ReadConfigFile(":combat:itemdesc");
-   var entry := weapfile[item.objtype].damage;
-   if(entry)
-     var dam := weapfile[item.objtype].damage;
-     data[17] := "Damage";
-     data[18] := dam;
-     data[32] := "Dmg modifier";
-    data[33] := item.dmg_mod;
-   elseif(item.ar)
-    data[17] := "Armor";
-    data[18] := item.ar;
-    data[32] := "Ar modifier";
-    data[33] := item.ar_mod;
-   else
-    data[17] := "Ar/Dam";
-    data[18] := "n/a";
-    layout[35] := 0;
-   endif
-   data[20] := item.graphic;
-   data[22] := item.color;
-endfunction
-
-function EditItem(item, character, result)
-  SendSysMessage(character, "Changes are made immediately, Integers only. Hit Esc to cancel.");
-  var val := CInt(RequestInput(character, character.backpack, "Enter a new value."));
-  if(!val)
-    if (result == 8)
-      item.color := val;
-    else
-      SendSysMessage(character, "Cancelled.");
-    return;
-    endif
-  endif
-  case(result)
-    1: CreateItemInInventory(character.backpack, item.objtype, val); //SetAmount(item):= val;
-       PrintTextAbovePrivate(character, "You have just created " + val + " " + item.desc + " in your backpack.", character);
-    2: MoveItemToLocation(item, val, item.y, item.z, MOVEITEM_FORCELOCATION);
-    3: MoveItemToLocation(item, item.x, val, item.z, MOVEITEM_FORCELOCATION);
-    4: MoveItemToLocation(item, item.x, item.y, val, MOVEITEM_FORCELOCATION);
-    5: SetHp(item, val);
-    6: if(!item.ar)
-        item.dmg_mod := val;
-       else
-        item.ar_mod := val;
-       endif
-    7: item.graphic := val;
-    8: item.color := val;
-  endcase
-endfunction
\ No newline at end of file

Copied: trunk/096/pkg/commands/gm/iteminfo.src.temp (from rev 331, trunk/096/pkg/commands/gm/iteminfo.src)

Modified: trunk/096/pkg/commands/gm/thaw.src
===================================================================
--- trunk/096/pkg/commands/gm/thaw.src	2005-09-30 09:54:57 UTC (rev 331)
+++ trunk/096/pkg/commands/gm/thaw.src	2005-09-30 12:18:34 UTC (rev 332)
@@ -1,17 +1,46 @@
+/* $Id$
+ *
+ * Purpose
+ * A command to thaw (unfreeze) a mobile or yourself.
+ *
+ * TODO
+ * Remove SendSysMessage()
+ */
 use uo;
 
-program hideme( gm )
-    SendSysMessage( gm, "Who do you wish to thaw?" );
-    var res := TargetCoordinates( gm );
-    if (res.mobile)
-        res.mobile.frozen := 0;
-	if (GetObjProperty(res.mobile, "frozen"))
-		EraseObjProperty(res.mobile,"frozen");
+include "include/messages";
+include "include/localization";
+
+
+program command_thaw(who, params)
+	var mobile;
+	
+	if (!params)
+		SendSysMessage(who, "Who do you wish to thaw?");
+		if ((mobile := Target(who, TGTOPT_NOCHECK_LOS)) == 0)
+			SendMessage(who, MSG_CANCELLED, array{}, MSG_COMMAND);
+		else
+			if (!mobile.isA(POLCLASS_MOBILE))
+				SendMessage(who, MSG_NO_MOB, array{}, MSG_COMMAND);
+			else
+				if (mobile.frozen == 0)
+					SendSysMessage(who, "Mobile is not frozen.");
+				else
+					mobile.frozen := 0;
+					SendMessage(who, MSG_DONE, array{}, MSG_COMMAND);
+				endif
+			endif
+		endif
+	elseif (params == "me")
+		if (who.frozen == 0)
+			SendSysMessage(who, "You are not frozen.");
+		else
+			who.frozen := 0;
+			SendMessage(who, MSG_DONE, array{}, MSG_COMMAND);
+		endif
 	else
-		SendSysMessage( gm, "That wasn't frozen.");
+		SendSysMessage(who, "Use .help <command>");
 	endif
-        PrintTextAbovePrivate( res.mobile, res.mobile.name + " has been thawed.", gm );
-    else
-        SendSysMessage( gm, "Cancelled." );
-    endif
-endprogram
\ No newline at end of file
+
+	return;
+endprogram

Deleted: trunk/096/pkg/commands/gm/thawme.src
===================================================================
--- trunk/096/pkg/commands/gm/thawme.src	2005-09-30 09:54:57 UTC (rev 331)
+++ trunk/096/pkg/commands/gm/thawme.src	2005-09-30 12:18:34 UTC (rev 332)
@@ -1,6 +0,0 @@
-use uo;
-
-program thawme( gm )
-    gm.frozen := 0;
-    PrintTextAbovePrivate( gm, "Fly!  Be free!", gm );
-endprogram
\ No newline at end of file

Deleted: trunk/096/pkg/commands/gm/wipebank.src
===================================================================
--- trunk/096/pkg/commands/gm/wipebank.src	2005-09-30 09:54:57 UTC (rev 331)
+++ trunk/096/pkg/commands/gm/wipebank.src	2005-09-30 12:18:34 UTC (rev 332)
@@ -1,27 +0,0 @@
-//////////////////////////////////////////////////////////////////////
-//
-//  ".wipebank" text command
-//
-//  NOTE: not entirely safe.  If the person whos bankbox you're
-//        wiping already has their bankbox open, this will cause
-//        access violations if they access the bankbox.
-//        A workaround would be to Move() the character after wiping
-//        the bankbox, which would force them to close it.
-//
-//////////////////////////////////////////////////////////////////////
-use uo;
-
-include ":bank:bank";
-
-program textcmd_wipebank(who)
-    PrintTextAbovePrivate( who, "Whose bank shall I wipe?", who );
-    var whom := Target( who );
-    if (whom)
-        if (WipeBankBox( who ))
-            PrintTextAbovePrivate( who, "Oooh, that's cold.  Bankbox wiped!", who );
-        else
-            PrintTextAbovePrivate( who, "Hm, no bankbox to wipe!", who );
-        endif
-   
-    endif
-endprogram
\ No newline at end of file

Copied: trunk/096/pkg/commands/gm/wipebank.src.temp (from rev 331, trunk/096/pkg/commands/gm/wipebank.src)

Modified: trunk/096/pkg/skills/anatomy/anatomy.src
===================================================================
--- trunk/096/pkg/skills/anatomy/anatomy.src	2005-09-30 09:54:57 UTC (rev 331)
+++ trunk/096/pkg/skills/anatomy/anatomy.src	2005-09-30 12:18:34 UTC (rev 332)
@@ -1,11 +1,13 @@
-// //$Id$
-
+/* $Id$
+ *
+ */
 use uo;
 
 include ":attributes:attributeConstants";
 include ":attributes:attributes";
 include ":attributes:skillCheck";
 
+
 program skill_Anatomy(who)
 
 	EraseObjProperty(who, "IsMeditating");
@@ -175,4 +177,4 @@
 		return "very low";
 	endif
 
-endfunction
\ No newline at end of file
+endfunction

Modified: trunk/096/pkg/skills/armslore/armsLore.src
===================================================================
--- trunk/096/pkg/skills/armslore/armsLore.src	2005-09-30 09:54:57 UTC (rev 331)
+++ trunk/096/pkg/skills/armslore/armsLore.src	2005-09-30 12:18:34 UTC (rev 332)
@@ -7,66 +7,66 @@
 include "include/skillPoints";
 
 
-program do_armslore( who )
-  EraseObjProperty(who, "IsMeditating");
-  EraseObjProperty(who, "HealTimer");
-  var quality_descr, damage_descr;
-  var thepoints := (CInt(GetEffectiveSkill(who, SKILLID_ARMSLORE)) * 2) + 20;
-  SendSysMessage(who, "Select an object to evaluate.");
-  var the_item := Target(who, TGTOPT_CHECK_LOS);
-  if(!the_item)
-    SendSysMessage(who, "Targetting cancelled.");
-    return;
-  endif
-  var cfg := ReadConfigFile(":combat:itemdesc");
-  var entry := cfg[the_item.objtype];
-  if(!entry)
-    SendSysMessage(who, "You can only use this skill on weapons or armor!");
-    return;
-  endif
-  if(CheckSkill(who, SKILLID_ARMSLORE, -1, thepoints))
-    var item_max_hp := the_item.maxhp;
-    var max_hp := item_max_hp;
-    var hp := the_item.hp;
-    if(hp == 0)
-      hp := 1;
-    endif
-    if(max_hp == 0)
-       max_hp := 1;
-    endif
-    if(item_max_hp == 0)
-      item_max_hp := 1;
-    endif
-    var damage_real := (hp  * 100) / max_hp;
-    var damage_nbr := CInt(damage_real);
-    var quality_real :=  (the_item.quality  * 100);
-    var quality_nbr := CInt(quality_real);
-    if(damage_nbr > 90)
-      damage_descr := "good";
-    elseif (damage_nbr >= 60)
-      damage_descr := "acceptable";
-    elseif (damage_nbr >= 40)
-      damage_descr := "fair";
-    else
-      damage_descr := "poor";
-    endif
-    if(quality_nbr > 100)
-      quality_descr := "exceptional";
-    elseif (quality_nbr >= 80)
-      quality_descr := "excellent";
-    elseif (quality_nbr >= 60)
-      quality_descr := "decent";
-    elseif (quality_nbr >= 40)
-      quality_descr := "moderate";
-    else
-      quality_descr := "low";
-    endif
-    SendSysMessage(who, "This item is of " + quality_descr + " quality, and is in " + damage_descr + " condition.");
-  else
-    SendSysMessage(who, "You can't quite tell . . .");
-  endif
-endprogram
+program skill_armslore(who)
+	EraseObjProperty(who, "IsMeditating");
+	EraseObjProperty(who, "HealTimer");
 
+	var quality_descr, damage_descr;
+	var thepoints := (CInt(GetEffectiveSkill(who, SKILLID_ARMSLORE)) * 2) + 20;
+	SendSysMessage(who, "Select an object to evaluate.");
+	var the_item := Target(who, TGTOPT_CHECK_LOS);
+	if (!the_item)
+		SendSysMessage(who, "Targetting cancelled.");
+		return;
+	endif
+	var cfg := ReadConfigFile(":combat:itemdesc");
+	var entry := cfg[the_item.objtype];
+	if (!entry)
+		SendSysMessage(who, "You can only use this skill on weapons or armor!");
+		return;
+	endif
+	if(CheckSkill(who, SKILLID_ARMSLORE, -1, thepoints))
+		var item_max_hp := the_item.maxhp;
+		var max_hp := item_max_hp;
+		var hp := the_item.hp;
+		if (hp == 0)
+			hp := 1;
+		endif
+		if (max_hp == 0)
+			max_hp := 1;
+		endif
+		if (item_max_hp == 0)
+			item_max_hp := 1;
+		endif
 
+		var damage_real := (hp  * 100) / max_hp;
+		var damage_nbr := CInt(damage_real);
+		var quality_real :=  (the_item.quality  * 100);
+		var quality_nbr := CInt(quality_real);
 
+		if(damage_nbr > 90)
+			damage_descr := "good";
+		elseif (damage_nbr >= 60)
+			damage_descr := "acceptable";
+		elseif (damage_nbr >= 40)
+			damage_descr := "fair";
+		else
+			damage_descr := "poor";
+		endif
 
+		if (quality_nbr > 100)
+			quality_descr := "exceptional";
+		elseif (quality_nbr >= 80)
+			quality_descr := "excellent";
+		elseif (quality_nbr >= 60)
+			quality_descr := "decent";
+		elseif (quality_nbr >= 40)
+			quality_descr := "moderate";
+		else
+			quality_descr := "low";
+		endif
+		SendSysMessage(who, "This item is of " + quality_descr + " quality, and is in " + damage_descr + " condition.");
+	else
+		SendSysMessage(who, "You can't quite tell . . .");
+	endif
+endprogram



From panosl at berlios.de  Fri Sep 30 14:29:45 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Fri, 30 Sep 2005 14:29:45 +0200
Subject: [Poldistro-svn] r333 - trunk/096/pkg/items/containers/include
Message-ID: <200509301229.j8UCTjbf007741@sheep.berlios.de>

Author: panosl
Date: 2005-09-30 14:29:44 +0200 (Fri, 30 Sep 2005)
New Revision: 333

Modified:
   trunk/096/pkg/items/containers/include/storage.inc
Log:


Modified: trunk/096/pkg/items/containers/include/storage.inc
===================================================================
--- trunk/096/pkg/items/containers/include/storage.inc	2005-09-30 12:18:34 UTC (rev 332)
+++ trunk/096/pkg/items/containers/include/storage.inc	2005-09-30 12:29:44 UTC (rev 333)
@@ -1,40 +1,35 @@
-// Bank.inc
-// By Austin Heilman
-//
-// Created 10/22/2001 11:31PM
-// Updated 10/24/2003 5:13PM
-//
-// Somewhere, define a container for banks with the item name
-// "BankBox" so you dont need to deal with object type numbers here
-// plus making a custom container makes it easy to change the bank box
-// graphic, container gump and item limits.
-//
-
+/* $Id$
+ *
+ * Somewhere, define a container for banks with the item name
+ * "BankBox" so you dont need to deal with object type numbers here
+ * plus making a custom container makes it easy to change the bank box
+ * graphic, container gump and item limits.
+ */
 use uo;
 use os;
 use polsys;
 
-//Set the 'box_type' variable to the object name of the container type
-//you want to be used for bank boxes. Example 'pouch' 'metalchest' etc.
-//This is only used when a new bank box is created. It can be changed on
-//the fly inside of a script for when you want to use specific container
-//types for special storage areas. Ideally, you should make a object type
-//with the name 'BankBox' to better control the number of items that can
-//be put in the storage container.
+/* Set the 'box_type' variable to the object name of the container type
+ * you want to be used for bank boxes. Example 'pouch' 'metalchest' etc.
+ * This is only used when a new bank box is created. It can be changed on
+ * the fly inside of a script for when you want to use specific container
+ * types for special storage areas. Ideally, you should make a object type
+ * with the name 'BankBox' to better control the number of items that can
+ * be put in the storage container.
+ */
 var box_type		:= "BankBox";
 
 //Toggles the bank related debug messages on and off.
 var storage_debug_mode	:= 1;
 
 
-
-/*
+/**
  * GetBox(who, string)
  *
  * Purpose
  *
  * Parameters
- * who: reference to the mobile whos container we want to view
+ * who: reference to the mobile whos container we want to view.
  * bank_name: the container that belongs to the mobile referenced.
  *
  * Return Value
@@ -82,7 +77,10 @@
 	return bank_box;
 endfunction
 
-
+/**
+ * HasBankBox(who, bank_name)
+ *
+ */
 function HasBankBox(who, bank_name)
 	if ( (!bank_name) || (bank_name == error) )
 		bank_name := "Global";
@@ -100,12 +98,21 @@
 endfunction
 
 
-// *DestroyBox(mobile, string)
-//
-// Used to remove a mobile's bank box and everything inside of it.
-// When someone deletes a character, pol does not do this automatically
-// so you may want to use this function with GetBankNames() to clear them.
-//
+/**
+ * DestroyBox(mobile, bank_name)
+ *
+ * Purpose
+ * Used to remove a mobile's bank box and everything inside of it.
+ * When someone deletes a character, pol does not do this automatically
+ * so you may want to use this function with GetBankNames() to clear them.
+ *
+ * Parameters
+ * who: reference to the mobile whos container we want to view.
+ * bank_name: the container that belongs to the mobile referenced.
+ *
+ * Return
+ * 
+ */
 function DestroyBox(who, bank_name)
 	if ( (!bank_name) || (bank_name == error) )
 		bank_name := "Global";
@@ -120,13 +127,20 @@
 endfunction
 
 
-// * RegisterBank(string)
-//
-// Registers the bank name in a global property called "banks".
-// Used to keep track of what banks exist in the world.
-//
-// This is only run the first time a storage area is used.
-//
+/**
+ * RegisterBank(string)
+ *
+ * Purpose
+ * Registers the bank name in a global property called "banks".
+ * Used to keep track of what banks exist in the world.
+ * This is only run the first time a storage area is used.
+ *
+ * Pamateres
+ * bank_name:
+ *
+ * Return
+ * Ignored
+ */
 function RegisterBank(bank_name)
 	return;
 	
@@ -145,10 +159,12 @@
 endfunction
 
 
-// * GetBankNames()
-//
-// Returns an array of all storage area names.
-//
+/**
+ * GetBankNames()
+ *
+ * Returns
+ * an array of all storage area names.
+ */
 function GetBankNames()
 	/*
 	var all_banks := GetGlobalProperty("banks");



From panosl at berlios.de  Fri Sep 30 14:52:25 2005
From: panosl at berlios.de (Panos Laganakos at BerliOS)
Date: Fri, 30 Sep 2005 14:52:25 +0200
Subject: [Poldistro-svn] r334 - in trunk/096/scripts: ai include misc
Message-ID: <200509301252.j8UCqPO5009529@sheep.berlios.de>

Author: panosl
Date: 2005-09-30 14:52:24 +0200 (Fri, 30 Sep 2005)
New Revision: 334

Added:
   trunk/096/scripts/ai/appraiser.src.temp
   trunk/096/scripts/ai/banker.src.temp
   trunk/096/scripts/ai/bucsBanker.src.temp
   trunk/096/scripts/ai/playerMerchant.src.temp
   trunk/096/scripts/ai/stablemaster.src.temp
Removed:
   trunk/096/scripts/ai/appraiser.src
   trunk/096/scripts/ai/banker.src
   trunk/096/scripts/ai/bucsBanker.src
   trunk/096/scripts/ai/playerMerchant.src
   trunk/096/scripts/ai/stablemaster.src
Modified:
   trunk/096/scripts/include/localization.inc
   trunk/096/scripts/misc/dblclickself.src
   trunk/096/scripts/misc/oncreate.src
   trunk/096/scripts/misc/ondelete.src
Log:


Deleted: trunk/096/scripts/ai/appraiser.src
===================================================================
--- trunk/096/scripts/ai/appraiser.src	2005-09-30 12:29:44 UTC (rev 333)
+++ trunk/096/scripts/ai/appraiser.src	2005-09-30 12:52:24 UTC (rev 334)
@@ -1,165 +0,0 @@
-use npc;
-use basic;
-use os;
-use uo;
-
-include "include/eventID";
-include "include/sysEvent";
-include ":npcutils:randName";
-include "include/utility";
-include "include/client";
-include ":npcutils:vetement";
-include ":npcutils:NPCBackpacks";
-include ":bank:bank";
-include ":npcutils:anchors";
-include "include/dist";
-include "include/skillLists";
-include ":begging:begging";
-
-const MAX_SKILLS      := 48;     // There are currently 48 Skills.
-const UOBJ_GOLDCOIN   := 0x0eed; // A gold coin
-const UOBJ_METALCHEST := 0x0e7c; // A Metal Chest
-const REACT_THRESHOLD := 2;
-
-set_priority( 50 );
-
-var me := Self();
-var inv_rs, inv_fs, inv_pb, inv_1c;
-var player, counter;
-
-program appraiser()
-  start_script(":npcutils:NPCKeeper", me);
-  EnableEvents(SYSEVENT_ITEM_GIVEN);
-  EnableEvents(EVID_NODE);
-  var myanchor := GetObjProperty(me, "Anchor");
-  if(myanchor)
-    MoveCharacterToLocation(me, myanchor[1], myanchor[2], myanchor[3], MOVECHAR_FORCELOCATION);
-  endif
-  drop_anchor();
-  var next_wander := ReadGameClock() + 10;
-  var ev;
-  var txt;
-  while (1)
-    ev := os::wait_for_event(120);
-    if(ev)
-      case(ev.type)
-        EVID_NODE: txt := lower(ev.text);
-		  if(txt["appraise"])
-		    TurnToward(ev.source);
-		    appraise(ev.source);
-		  elseif((txt["buy"]) || (txt["sell"]))
-		    PrintTextAbovePrivate(me, "I'm sorry, but you must go elsewhere to buy or sell.", ev.source);
-		  endif
-        SYSEVENT_ITEM_GIVEN:  processdeedsale(ev.source, ev.item);
-      endcase
-    endif
-	if(ReadGameClock() >= next_wander)
-	  begpurse(me);
-      wander();
-      if(coordist(me.x, me.y, myanchor[1], myanchor[2]) > 5)
-        MoveCharacterToLocation(me, myanchor[1], myanchor[2], myanchor[3], MOVECHAR_FORCELOCATION);
-      endif
-      next_wander := ReadGameClock() + 30;
-    endif
-  endwhile
-endprogram
-
-function appraise(who)
-  PrintTextAbovePrivate(me, "Target the item you want me to appraise.", who);
-  var trg := Target(who);
-  if(!trg)
-    PrintTextAbovePrivate(me, "Changed your mind?", who);
-    return;
-  endif
-  var checker := 0;
-  foreach thing in EnumerateItemsInContainer(who.backpack)
-    if(thing == trg)
-      checker := 1;
-      break;
-    endif
-  endforeach
-  if(checker == 0)
-    PrintTextAbovePrivate(me, "But you don't own that!", who);
-    return;
-  endif
-  checker := 0;
-  var deedarray := { 0x6019, 0x601a, 0x601b, 0x601c, 0x601d, 0x601e, 0x6020, 0x6021, 0x6022, 0x6023, 0x6024, 0x6025, 0x6026 };
-  if(trg.objtype in deedarray)
-    checker := 1;
-  endif
-  if(checker == 0)
-    PrintTextAbovePrivate(me, "I'm not interested in that!", who);
-    return;
-  endif
-  var bankbox := FindBankBox(who);
-  if(!bankbox)
-    PrintTextAbove(me, "I cannot seem to find your bankbox!", who);
-    return;
-  endif
-  var cnfg := ReadConfigFile(":housing:itemdesc");
-  var amt := cnfg[trg.objtype].VendorSellsFor;
-  PrintTextAbovePrivate(me,"I will give you " + amt + " gold coins for that deed.", who);
-endfunction
-
-function processdeedsale(who, trg)
-  var checker := 0;
-  var deedarray := { 0x6019, 0x601a, 0x601b, 0x601c, 0x601d, 0x601e, 0x6020, 0x6021, 0x6022, 0x6023, 0x6024, 0x6025, 0x6026 };
-  if(trg.objtype in deedarray)
-    checker := 1;
-  endif
-  if(checker == 0)
-    PrintTextAbovePrivate(me, "I'm not interested in that!", who);
-    MoveItemToContainer(trg, who.backpack);
-    return;
-  endif
-  var bankbox := FindBankBox(who);
-  if(!bankbox)
-    PrintTextAbovePrivate(me, "I cannot seem to find your bankbox!", who);
-    MoveItemToContainer(trg, who.backpack);
-    return;
-  endif
-  var cnfg := ReadConfigFile(":housing:itemdesc");
-  var amt := cnfg[trg.objtype].VendorSellsFor;
-  var holder;
-  var goldarray := {};
-  var chk := 0;
-  while(amt > 0)
-     holder := 0;
-     if(amt > 60000)
-       holder := CreateItemInContainer(bankbox, 0xeed, 60000);
-       if(holder)
-         goldarray.append(holder);
-         amt := amt - 60000;
-       else
-         foreach thing in goldarray
-           DestroyItem(thing);
-         endforeach
-         chk := 1;
-         PrintTextAbovePrivate(me, "Your bank box is too full!", who);
-         break;
-      endif
-    else
-       holder := CreateItemInContainer(bankbox, 0xeed, amt);
-       if(holder)
-         if(!DestroyItem(trg))
-           foreach thing in goldarray
-             DestroyItem(thing);
-           endforeach
-           chk := 1;
-           PrintTextAbovePrivate(me, "Your bank box is too full!", who);
-         endif
-         break;
-       else
-         foreach thing in goldarray
-           DestroyItem(thing);
-         endforeach
-         chk := 1;
-         PrintTextAbovePrivate(me, "Your bank box is too full!", who);
-         break;
-       endif
-    endif
-  endwhile
-  if(chk == 0)
-    PrintTextAbovePrivate(me, "The funds have been deposited in your bank box.", who);
-  endif
-endfunction
\ No newline at end of file

Copied: trunk/096/scripts/ai/appraiser.src.temp (from rev 331, trunk/096/scripts/ai/appraiser.src)

Deleted: trunk/096/scripts/ai/banker.src
===================================================================
--- trunk/096/scripts/ai/banker.src	2005-09-30 12:29:44 UTC (rev 333)
+++ trunk/096/scripts/ai/banker.src	2005-09-30 12:52:24 UTC (rev 334)
@@ -1,97 +0,0 @@
-use npc;
-use os;
-use uo;
-use cfgfile;
-use util;
-
-include ":bank:bank";
-include "include/eventID";
-include "include/sysEvent";
-include "include/client";
-include ":npcutils:anchors";
-include "include/dist";
-include ":begging:begging";
-
-var bank;
-var me := Self();
-var npccfg := ReadConfigFile("npcdesc");
-
-
-program banker();
-	start_script(":npcutils:NPCKeeper", me);
-	var next_wander := ReadGameClock() + 30;
-	var myanchor := GetObjProperty(me, "Anchor");
-
-	if(myanchor)
-		MoveCharacterToLocation(me, myanchor[1], myanchor[2], myanchor[3], MOVECHAR_FORCELOCATION);
-	endif
-	drop_anchor();
-	myanchor := GetObjProperty(me, "Anchor");
-	EnableEvents(EVID_NODE);
-	DisableEvents(SYSEVENT_SPEECH);
-	var text;
-	while (1)
-		var ev;
-		ev := os::wait_for_event(120);
-		if (ev.type == EVID_NODE)
-			text := lower(ev.text);
-			if (text["bank"])
-				if (ev.source.criminal == 1)
-					say("I will not do business with criminals!");
-				else
-					OpenBank(ev.source);
-				endif
-			elseif (text["balance"])
-				if (ev.source.criminal == 1)
-					say("I will not do business with criminals!");
-				else
-					var bankbox := FindBankBox(ev.source);
-					var contents := EnumerateItemsInContainer(bankbox);
-					var amt := 0;
-					foreach item in contents
-						if(item.objtype == 0xeed)
-							amt := (amt + item.amount);
-						endif
-					endforeach
-					if (amt == 1)
-						PrintTextAbove(me,"" + ev.source.name + ", Your bank box holds " + amt + " gold coin.");
-					else
-						PrintTextAbove(me,"" + ev.source.name + ", Your bank box holds " + amt + " gold coins.");
-					endif
-				endif
-			endif
-		endif
-		
-		if (ReadGameClock() >= next_wander)
-			begpurse(me);
-			wander();
-			if (coordist(me.x, me.y, myanchor[1], myanchor[2]) > 5)
-				MoveCharacterToLocation(me, myanchor[1], myanchor[2], myanchor[3], MOVECHAR_FORCELOCATION);
-			endif
-			next_wander := ReadGameClock() + 10;
-		endif
-	endwhile
-
-	return;
-endprogram
-
-function OpenBank(you)
-	TurnToward(you);
-	var bankbox := FindBankBox(you);
-	if (bankbox)
-		var contents := EnumerateItemsInContainer(bankbox);
-		var amt := 0;
-		foreach item in contents
-			if((item.container.objtype != 0xefa) && (item.container.objtype != 0xe3b))
-				amt := (amt + 1);
-			endif
-		endforeach
-		printtextaboveprivate(me, "Your bank box holds " + amt + " items.", you);
-		SendOpenSpecialContainer(you, bankbox);
-	else
-		say("You don't seem to have a bank box, "+ you.name+".");
-	endif
-
-	return;
-endfunction
-

Copied: trunk/096/scripts/ai/banker.src.temp (from rev 331, trunk/096/scripts/ai/banker.src)

Deleted: trunk/096/scripts/ai/bucsBanker.src
===================================================================
--- trunk/096/scripts/ai/bucsBanker.src	2005-09-30 12:29:44 UTC (rev 333)
+++ trunk/096/scripts/ai/bucsBanker.src	2005-09-30 12:52:24 UTC (rev 334)
@@ -1,79 +0,0 @@
-use npc;
-use os;
-use uo;
-use cfgfile;
-use util;
-
-include ":bank:bank";
-include "include/eventID";
-include "include/sysEvent";
-include "include/client";
-include ":npcutils:anchors";
-include "include/dist";
-include ":begging:begging";
-
-var bank;
-var me := Self();
-var npccfg := ReadConfigFile("npcdesc");
-
-program banker();
-  start_script(":npcutils:NPCKeeper", me);
-  var next_wander := ReadGameClock() + 10;
-  var myanchor := GetObjProperty(me, "Anchor");
-  if(myanchor)
-    MoveCharacterToLocation(me, myanchor[1], myanchor[2], myanchor[3], MOVECHAR_FORCELOCATION);
-  endif
-  drop_anchor();
-  myanchor := GetObjProperty(me, "Anchor");
-  EnableEvents(EVID_NODE);
-  DisableEvents(SYSEVENT_SPEECH);
-  while(1)
-    var ev;
-    ev := os::wait_for_event(120);
-    if(ev.type == EVID_NODE)
-      if(ev.text["bank"])
-        OpenBank(ev.source);
-      elseif(ev.text["balance"])
-        var bankbox := FindBankBox(ev.source);
-        var contents := EnumerateItemsInContainer(bankbox);
-        var amt := 0;
-        foreach item in contents
-          if(item.objtype == 0xeed)
-            amt := (amt + item.amount);
-          endif
-        endforeach
-        if(amt == 1)
-          PrintTextAbove(me,"" + ev.source.name + ", Your bank box holds " + amt + " gold coin.");
-        else
-          PrintTextAbove(me,"" + ev.source.name + ", Your bank box holds " + amt + " gold coins.");
-        endif
-      endif
-    endif
-	if(ReadGameClock() >= next_wander)
-	  begpurse(me);
-      wander();
-      if(coordist(me.x, me.y, myanchor[1], myanchor[2]) > 5)
-        MoveCharacterToLocation(me, myanchor[1], myanchor[2], myanchor[3], MOVECHAR_FORCELOCATION);
-      endif
-      next_wander := ReadGameClock() + (RandomInt(9) + 21);
-    endif
-  endwhile
-endprogram
-
-function OpenBank(you)
-  TurnToward(you);
-  var bankbox := FindBankBox(you);
-  if(bankbox)
-    var contents := EnumerateItemsInContainer(bankbox);
-    var amt := 0;
-    foreach item in contents
-      if((item.container.objtype != 0xefa) && (item.container.objtype != 0xe3b))
-        amt := (amt + 1);
-      endif
-    endforeach
-    printtextaboveprivate(me, "Your bank box holds " + amt + " items.", you);
-    SendOpenSpecialContainer(you, bankbox);
-  else
-    say("You don't seem to have a bank box, "+ you.name +".");
-  endif
-endfunction
\ No newline at end of file

Copied: trunk/096/scripts/ai/bucsBanker.src.temp (from rev 331, trunk/096/scripts/ai/bucsBanker.src)

Deleted: trunk/096/scripts/ai/playerMerchant.src
===================================================================
--- trunk/096/scripts/ai/playerMerchant.src	2005-09-30 12:29:44 UTC (rev 333)
+++ trunk/096/scripts/ai/playerMerchant.src	2005-09-30 12:52:24 UTC (rev 334)
@@ -1,757 +0,0 @@
-use npc;
-use basic;
-use os;
-use uo;
-use util;
-
-include ":bank:bank";
-include "include/attributes";
-include "include/eventID";
-include "include/sysEvent";
-include ":npcutils:randName";
-include ":npcutils:vetement";
-include "include/utility";
-include "include/mrcSpawn";
-include "include/dist";
-include "include/client";
-include ":npcutils:NPCBackpacks";
-include "include/yesNo";
-include "include/canAccess";
-
-const UOBJ_GOLD_COIN := 0xeed;
-const STARTHAIR := 0x2030;
-const ENDHAIR := 0x2060;
-
-set_priority( 50 );
-
-var inv_fs, inv_pb;
-var me := Self();
-var master := CInt(GetObjProperty(me, "master"));
-var cont := GetObjProperty(me, "cont");
-var firstname;
-
-set_critical(1);
-  var vendors := GetGlobalProperty("pcvendors");
-  if(!vendors)
-    vendors := {};
-  endif
-  if(me.serial in vendors)
-  else
-	vendors.append(me.serial);
-  endif
-  SetGlobalProperty("pcvendors", vendors);
-set_critical(0);
-
-program merchant()
-  Detach();
-  run_script_to_completion(":npcutils:NPCKeeper", me);
-  start_script(":playervendor:payCounter", me);
-  var nme := SplitWords(me.name);
-  firstname := lower(nme[1]);
-  var oldpack := me.backpack;
-  if(oldpack.objtype != 0x966c)
-    MoveItemToLocation(oldpack, 1, 1, 0, MOVEITEM_FORCELOCATION);
-    var newpack := CreateItemAtLocation(1, 1, 0, 0x966c, 1, me.realm);
-    EquipItem(me, newpack);
-    foreach thing in ListRootItemsInContainer(oldpack)
-      MoveItemToContainer(thing, newpack);
-    endforeach
-    DestroyItem(oldpack);
-  endif
-  inv_pb := find_or_create_in_pack(me.serial + " PB", 0xe75);
-  inv_fs := find_or_create_in_pack(me.serial + " 1C", 0xe75);
-  SetObjProperty(inv_pb, "Vendor", me.serial);
-  SetObjProperty(inv_fs, "Vendor", me.serial);
-  SetObjProperty(inv_pb, "Vendored", me.serial);
-  SetObjProperty(inv_fs, "Vendored", me.serial);
-  SetObjProperty(inv_pb, "Master", master);
-  SetObjProperty(inv_fs, "Master", master);
-  if(!inv_fs || !inv_pb || !inv_fs)
-    exit;
-  endif
-  SetObjProperty(me,"serial", me.serial);
-  EnableEvents( SYSEVENT_ITEM_GIVEN + SYSEVENT_MERCHANT_SOLD + SYSEVENT_DOUBLECLICKED);
-  EnableEvents( SYSEVENT_SPEECH, 4);
-  var res;
-  var ev;
-  var text;
-  while(1)
-    ev := os::wait_for_event(120);
-    if(ev)
-      var who := ev.source;
-      case (ev.type)
-	    SYSEVENT_DOUBLECLICKED: if(CheckLineOfSight(me, who))
-                                  SendOpenSpecialContainer(who, inv_fs);
-                                else
-                                  SendSysMessage(who, "You cannot see that.");
-                                endif
-        SYSEVENT_SPEECH:        text := lower(ev.text);
-                                if((text[firstname] and text["buy"]) or (text["vendor"] and text["buy"]))
-                                  TurnToward(who);
-                                  if(!CheckLineOfSight(me, who))
-                                    PrintTextAbovePrivate(me, "Who is speaking? I cannot see you.", who);
-                                  else
-                                    process_sale(ev.source);
-                                  endif
-                                elseif((text[firstname] and text["purchase"]) or (text["vendor"] and text["purchase"]))
-                                  if(who.serial == master)
-                                    addthingstobuy(who);
-                                  endif
-                                elseif(((text[firstname]) && (text["dismiss"])) and (ev.source.serial == master))
-                                  TurnToward(who);
-                                  if(YesNo(who, "Fire him?"))
-                                    Fireme();
-                                  endif
-                                elseif((text[firstname] and text["sell"]) or (text["vendor"] and text["sell"]))
-                                  TurnToward(who);
-                                  SpoutBuyList(who);
-                                elseif((text[firstname] and text["contact"]) or (text["vendor"] and text["contact"]))
-                                  TurnToward(who);
-                                  if(who.serial == master)
-                                    cont := recontact(who);
-                                    SetObjProperty(me, "cont", cont);
-                                  else
-                                    PrintTextAbovePrivate(me, "You may contact my employer " + cont +".", who);
-                                  endif
-                                elseif(((text[firstname] and text["collect"]) or (text["vendor"] and text["collect"])) && (who.serial == master))
-                                  TurnToward(who);
-                                  cashout(who);
-                                elseif(((text[firstname] and text["gold"]) or (text["vendor"] and text["gold"])) && (who.serial == master))
-                                  TurnToward(who);
-                                  cashout(who);
-                                elseif(((text[firstname] and text["status"]) or (text["vendor"] and text["status"])) && (who.serial == master))
-                                  TurnToward(who);
-                                  statuscheck(who);
-                                elseif(((text[firstname] and text["info"]) or (text["vendor"] and text["info"])) && (who.serial == master))
-                                  TurnToward(who);
-                                  statuscheck(who);
-                                elseif(((text[firstname] and text["wear"]) or (text["vendor"] and text["wear"])) && (who.serial == master))
-                                  TurnToward(who);
-                                  PrintTextAbovePrivate(me, "What shall I wear?", who);
-                                  var this := Target(who);
-                                  if (!can_access(ev.source, this))
-                                    PrintTextAbovePrivate(me, "I don't see what you are talking about.", ev.source);
-                                  elseif (this in ListEquippedItems(ev.source))
-                                    PrintTextAbovePrivate(me, "Please take that off, first!", ev.source);
-                                  else
-                                    if (Distance(me, this) < 3)
-                                      wear_item( this);
-                                    else
-                                      PrintTextAbovePrivate(me, "That is too far away.", ev.source);
-                                    endif
-                                  endif
-                                elseif(((text[firstname] and text["strip"]) or (text["vendor"] and text["strip"])) && (who.serial == master))
-                                  TurnToward( who );
-                                  PrintTextAbovePrivate(me, "Ooh, I think I feel a draft!", who);
-                                  strip_items(who);
-                                elseif((text[firstname] and text["help"]) or (text["vendor"] and text["help"]))
-                                  TurnToward( who );
-                                  PrintTextAbovePrivate(me, "I will obey the following orders:", who);
-                                  sleep(1);
-                                  PrintTextAbovePrivate(me, "dismiss, sell, contact, collect,", who);
-                                  sleep(2);
-                                  PrintTextAbovePrivate(me, "wear, strip, status and purchase.", who);
-                                endif
-        SYSEVENT_ITEM_GIVEN:    if(who.serial == master)
-                                  SetObjProperty(ev.container, "Hold", 1);
-                                  stockitem(ev);
-                                  EraseObjProperty(ev.container, "Hold");
-                                else
-                                  buyitem(who, ev.item);
-                                endif
-      endcase
-      sleep(1);
-    endif
-    if(GetObjProperty(me,"deadbeat"))
-      Fireme();
-    endif
-  endwhile
-endprogram
-
-function clearance(who, items)
-  foreach trg in items
-    trg.name := GetObjProperty(trg,"OldName");
-    EraseObjProperty(trg, "OldName");
-    EraseObjProperty(trg, "Vendored");
-    EraseObjProperty(trg, "price");
-    EraseObjProperty(trg, "Owner");
-    EraseObjProperty(trg, "Master");
-    if(trg.isA(POLCLASS_CONTAINER))
-      SetObjProperty(trg, "Owner", who.serial);
-    endif
-  endforeach
-endfunction
-
-function statuscheck(who);
-  var gold := CInt(GetObjProperty(me, "g"));
-  var rsrv := CInt(GetObjProperty(me, "r"));
-  var fees := 0;
-  var mypay := 50;
-  foreach item in inv_fs
-    fees := fees + GetObjProperty(item,"price");
-  endforeach
-  mypay := mypay + Cint(fees / 100);
-  var gamedays := (gold + rsrv) / mypay;
-  var realdays := gamedays / 8;
-  PrintTextAbovePrivate(me, "I am holding " + gold + " gold coins for you,", who);
-  sleep(1);
-  PrintTextAbovePrivate(me, "and am holding " + rsrv + " gold coins for future wages.", who);
-  sleep(1);
-  if(realdays == 1)
-    PrintTextAbovePrivate(me, "I have enough gold to continue working for " + gamedays + " day. [1 real world day]", who);
-  else
-    PrintTextAbovePrivate(me, "I have enough gold to continue working for " + gamedays + " days. [" + realdays + " real world days]", who);
-  endif
-endfunction
-
-function process_sale(who);
-  var gold := GetObjProperty(me,"g");
-  if(Distance(me, who) > 3)
-    PrintTextAbovePrivate(me, "You must come closer if you wish to purchase something.", who);
-    return;
-  endif
-  PrintTextAbovePrivate(me, "What do you wish to purchase?", who);
-  var trg := Target(who);
-  if(!trg)
-    SendSysMessage(who,"Cancelled.");
-    return;
-  endif
-  var ok := 0;
-  foreach item in EnumerateItemsInContainer(inv_fs)
-    if(trg == item)
-      ok := 1;
-      break;
-    endif
-  endforeach
-  if(ok == 0)
-    PrintTextAbovePrivate(me, "You cannot purchase that.", who);
-    return;
-  elseif(ok == 1)
-    var bankbox := FindBankBox(who);
-    var price := CInt(GetObjProperty(trg, "price"));
-    if((!price) || (price == error))
-      PrintTextAbovePrivate(me, "I'm sorry, but that is not for sale.", who);
-      return;
-    endif
-    var holder := {};
-    set_critical(1);
-    if(GetPayment(who, price))
-      trg.movable:=1;
-      if(MoveItemToContainer(trg, who.backpack))
-        PrintTextAbovePrivate(me,"I have withdrawn " + price + " gold from your backpack.", who);
-        SetObjProperty(me,"g", (price + gold));
-        holder.append(trg);
-        if(trg.isA(POLCLASS_CONTAINER))
-          foreach thing in EnumerateItemsInContainer(trg)
-            holder.append(thing);
-          endforeach
-        endif
-        clearance(who, holder);
-      else
-        PrintTextAbovePrivate(me,"You do not have enough room for that in your backpack.", who);
-        GiveRefund(who, price);
-      endif
-    else
-      var contents := EnumerateItemsInContainer(bankbox);
-      var amt := 0;
-      foreach item in contents
-        if((item.objtype == 0xeed) && (item.amount >= price))
-          amt := item;
-          break;
-        endif
-      endforeach
-      if(amt != 0)
-        if(SubtractAmount(amt, price))
-          if(MoveItemToContainer(trg, who.backpack))
-            PrintTextAbovePrivate(me,"I have withdrawn " + price + " gold from your bank account.", who);
-            SetObjProperty(me,"g", (price + gold));
-            holder.append(trg);
-            if(trg.isA(POLCLASS_CONTAINER))
-              foreach thing in EnumerateItemsInContainer(trg)
-                holder.append(thing);
-              endforeach
-            endif
-            clearance(who, holder);
-          else
-            PrintTextAbovePrivate(me,"You do not have enough room for that in your backpack.", who);
-            AddAmount(amt, price);
-          endif
-        endif
-      else
-        PrintTextAbovePrivate(me,"You cannot afford this item.", who);
-      endif
-    endif
-    set_critical(0);
-  endif
-endfunction
-
-function stockitem(tev)
-  if((tev.item.objtype == UOBJ_GOLD_COIN) and (!tev.container))
-    TakeGold(tev);
-    return;
-  endif
-  var tname;
-  var item := tev.item;
-  SetObjProperty(item, "OldName", item.name);
-  PrintTextAbovePrivate(me, "How much shall I charge for this item? ", tev.source);
-  var cost := CInt(RequestInput(tev.source, item, ""));
-  if(cost < 0)
-    PrintTextAbovePrivate(me, "You cannot sell items for values below zero.", tev.source);
-    EraseObjProperty(item, "Master");
-    EraseObjProperty(item, "price");
-    EraseObjProperty(item, "OldName");
-    EraseObjProperty(item, "Vendored");
-    item.movable := 1;
-    MoveItemToContainer(item, tev.source.backpack);
-    return;
-  elseif(cost > 60000)
-    PrintTextAbovePrivate(me, "You cannot price items for more than 60000 gold.", tev.source);
-    if(item.isa(POLCLASS_CONTAINER))
-      foreach thing in EnumerateItemsInContainer(item)
-        thing.name := GetObjProperty(thing,"OldName");
-        EraseObjProperty(thing, "OldName");
-        EraseObjProperty(thing, "Vendored");
-        EraseObjProperty(thing, "price");
-        thing.movable := 1;
-      endforeach
-    endif
-    EraseObjProperty(item, "Master");
-    EraseObjProperty(item, "price");
-    EraseObjProperty(item, "OldName");
-    EraseObjProperty(item, "Vendored");
-    item.movable := 1;
-    MoveItemToContainer(item, tev.source.backpack);
-    return;
-  elseif(cost == 0)
-    if(item.isa(POLCLASS_CONTAINER))
-      if((item.objtype == 0x1940) || (item.objtype == 0xefa) || (item.objtype == 0x6100))
-        PrintTextAbovePrivate(me, "You cannot sell that item for 0 gold.", tev.source);
-        if(item.isa(POLCLASS_CONTAINER))
-          foreach thing in EnumerateItemsInContainer(item)
-            thing.name := GetObjProperty(thing,"OldName");
-            EraseObjProperty(thing, "OldName");
-            EraseObjProperty(thing, "Vendored");
-            EraseObjProperty(thing, "price");
-            thing.movable := 1;
-          endforeach
-        endif
-        EraseObjProperty(item, "Master");
-        EraseObjProperty(item, "price");
-        EraseObjProperty(item, "OldName");
-        EraseObjProperty(item, "Vendored");
-        item.movable := 1;
-        MoveItemToContainer(item, tev.source.backpack);
-        return;
-      else
-        var items := 0;
-        foreach thing in EnumerateItemsInContainer(item)
-          items := 1;
-          break;
-        endforeach
-        if(items == 1)
-          PrintTextAbovePrivate(me, "Well, just keep it, then.", tev.source);
-          if(item.isa(POLCLASS_CONTAINER))
-            foreach thing in EnumerateItemsInContainer(item)
-              thing.name := GetObjProperty(thing,"OldName");
-              EraseObjProperty(thing, "OldName");
-              EraseObjProperty(thing, "Vendored");
-              EraseObjProperty(thing, "price");
-              thing.movable := 1;
-            endforeach
-          endif
-          EraseObjProperty(item, "Master");
-          EraseObjProperty(item, "price");
-          EraseObjProperty(item, "OldName");
-          EraseObjProperty(item, "Vendored");
-          item.movable := 1;
-          MoveItemToContainer(item, tev.source.backpack);
-          return;
-        endif
-        PrintTextAbovePrivate(me, "How shall I advertise this item?", tev.source);
-        tname := RequestInput(tev.source, item, "");
-        SetObjProperty(item, "price", "Not For Sale");
-        cost := "Not For Sale";
-      endif
-    else
-      PrintTextAbovePrivate(me, "Well, just keep it, then.", tev.source);
-      if(item.isa(POLCLASS_CONTAINER))
-        foreach thing in EnumerateItemsInContainer(item)
-          thing.name := GetObjProperty(thing,"OldName");
-          EraseObjProperty(thing, "OldName");
-          EraseObjProperty(thing, "Vendored");
-          EraseObjProperty(thing, "price");
-          thing.movable := 1;
-        endforeach
-      endif
-      EraseObjProperty(item, "Master");
-      EraseObjProperty(item, "price");
-      EraseObjProperty(item, "OldName");
-      EraseObjProperty(item, "Vendored");
-      item.movable := 1;
-      MoveItemToContainer(item, tev.source.backpack);
-      return;
-    endif
-  endif
-  if(item.isa(POLCLASS_CONTAINER))
-    var theoldname;
-    foreach thing in EnumerateItemsInContainer(item)
-      theoldname := thing.desc;
-      if(!item.desc)
-        theoldname := "";
-      endif
-      SetName(thing, thing.desc + " [Cost: Not For Sale]");
-      SetObjProperty(thing, "OldName", theoldname);
-      SetObjProperty(thing, "Vendored", me.serial);
-      SetObjProperty(thing, "price", "Not For Sale");
-      thing.movable := 1;
-    endforeach
-    SetObjProperty(item, "Master", master);
-    item.movable := 1;
-  endif
-  var oldname := item.desc;
-  if(!item.desc)
-    oldname := "";
-  endif
-  SetObjProperty(item, "OldName", oldname);
-  SetObjProperty(item, "price", CInt(cost));
-  SetObjProperty(item, "Vendored", me.serial);
-  if(tname)
-    SetName(item, tname + " [Cost: " + cost + " ]");
-  else
-    SetName(item, item.desc + " [Cost: " + cost + " ]");
-  endif
-  if(!tev.vendor)
-    MoveItemToContainer(item, inv_fs);
-  endif
-  if(cost == "Not For Sale")
-    PrintTextAbovePrivate(me, "I'll just hang on to that for ya.", tev.source);
-  else
-    PrintTextAbovePrivate(me, "I will sell that for " + cost + " gold.", tev.source);
-  endif
-endfunction
-
-function cashout(person)
-  var mygold := CInt(GetObjProperty(me, "g"));
-  var payment := 0;
-  var rsrv := GetObjProperty(me,"r");
-  var pbank := FindBankBox(person);
-  if(mygold > 0)
-    while(mygold > 60000)
-      CreateItemInContainer(pbank, UOBJ_GOLD_COIN, 60000);
-      payment := payment + 60000;
-      mygold := mygold - 60000;
-    endwhile
-    payment := payment + mygold;
-    PrintTextAbovePrivate(me, "Ive placed " + payment + " gold coins in your bank box.", person);
-    CreateItemInContainer(pbank, UOBJ_GOLD_COIN, mygold);
-    SetObjProperty(me, "g", 0);
-  else
-    PrintTextAbovePrivate(me, "I am not holding any gold for you.", person);
-  endif
-  if(rsrv)
-    PrintTextAbovePrivate(me, "You have left me " + rsrv + " reserve gold coins to use towards my future wages.", person);
-  else
-    PrintTextAbovePrivate(me, "But you have left me nothing towards my future wages.", person);
-  endif
-endfunction
-
-function recontact(who)
-  var cnt := SendTextEntryGump( who, "How shall I tell people to contact you? ", TE_CANCEL_DISABLE, TE_STYLE_NORMAL, 50);
-  return cnt;
-endfunction
-
-function wear_item(item)
-  foreach thing in ListEquippedItems(me)
-    MoveItemToContainer(thing, inv_pb);
-  endforeach
-  EquipItem(me, item);
-  foreach thingie in EnumerateItemsInContainer(inv_pb)
-    EquipItem(me, thingie);
-  endforeach
-  foreach thingie in EnumerateItemsInContainer(inv_pb)
-    MoveItemToLocation(thingie, me.x, me.y, me.z, MOVEITEM_FORCELOCATION );
-  endforeach
-endfunction
-
-function strip_items(mmaster)
-  foreach thing in ListEquippedItems(me)
-    if ((thing.objtype < STARTHAIR) || (thing.objtype > ENDHAIR))
-      MoveItemToContainer(thing, inv_pb);
-    endif
-  endforeach
-  foreach thing in EnumerateItemsInContainer(inv_fs)
-    if (thing.container.serial == inv_fs.serial)
-      MoveItemToContainer(thing, inv_pb);
-    endif
-  endforeach
-  foreach thingie in EnumerateItemsInContainer(inv_pb)
-    if (thingie.container.serial == inv_pb.serial)
-      MoveItemToContainer(thingie, mmaster.backpack);
-    endif
-  endforeach
-endfunction
-
-function Fireme()
-  var mypack := findmypack(me.serial);
-  var mygold := CInt(GetObjProperty(me, "g"));
-  var payment := 0;
-  if(mygold > 0)
-    while(mygold > 60000)
-      CreateItemInContainer(mypack, UOBJ_GOLD_COIN, 60000);
-      payment := payment + 60000;
-      mygold := mygold - 60000;
-    endwhile
-    CreateItemInContainer(mypack, UOBJ_GOLD_COIN, mygold);
-  endif
-  foreach thing in ListRootItemsInContainer(inv_fs)
-    MoveItemToContainer(thing, mypack);
-  endforeach
-  foreach thingy in ListRootItemsInContainer(inv_pb)
-    MoveItemToContainer(thingy, mypack);
-  endforeach
-  RevokePrivilege( me, "invul" );
-  say("I regret nothing!");
-  ApplyRawDamage( me, GetHp(me) +3);
-endfunction
-
-function addthingstobuy(who)
-    var buylist := {};
-    var buyprice := { };
-    var buyobj := { };
-    var i;
-    if (!GetObjProperty(me,"buylist"))
-        buylist := {};
-        buyprice := {};
-        buyobj := { };
-    else
-        buylist := GetObjProperty(me,"buylist");
-        buyprice := GetObjProperty(me,"buyprice");
-        buyobj := GetObjProperty(me,"buyobj");
-    endif
-    PrintTextAbovePrivate(me, "What do you want me to buy?", who);
-    var what := Target( master );
-        if ((!what) || (what == error) || (GetStrength(what)) )
-        PrintTextAbovePrivate(me, "Nevermind.", who);
-        return;
-        endif
-    if (what.desc in buylist)
-        PrintTextAbovePrivate(me, "I will no longer purchase "+what.desc +".", who);
-        var newbuylist := { };
-        var newbuyprice := { };
-        var newbuyobj := { };
-        for (i := 1; i<=len(buylist); i:=i+1)
-            if (buylist[i] != what.desc)
-                newbuylist[len(newbuylist)+1] := buylist[i];
-                newbuyprice[len(newbuyprice)+1] := buyprice[i];
-                newbuyobj[len(newbuyobj)+1] := buyobj[i];
-            endif
-        endfor
-        SetObjProperty(me,"buylist",newbuylist);
-        SetObjProperty(me,"buyprice",newbuyprice);
-        SetObjProperty(me,"buyobj",newbuyobj);
-        return;
-    endif
-    if (!what.objtype)
-        PrintTextAbovePrivate(me, "I can't buy those.  What the hell is that, anyway?", who);
-        return;
-    endif
-    buylist[ len(buylist)+1] := what.desc;
-    buyprice[ len(buyprice)+1] := CInt(SendTextEntryGump( master,"How much shall I pay for this item? ", TE_CANCEL_ENABLE, TE_STYLE_NORMAL));
-    buyobj[ len(buyobj)+1] := what.objtype;
-    if (len(buylist)==1)
-      PrintTextAbovePrivate(me, "I will purchase "+buylist[1] +".", master);
-    elseif (len(buylist)==2)
-        PrintTextAbovePrivate(me, "I will purchase "+buylist[1] +" and "+ buylist[2]+".", master);
-    else
-        var buying := "I will purchase "+buylist[1];
-        for (i := 2; i<=len(buylist)-1; i:=i+1)
-            buying := buying + ", " +buylist[i];
-        endfor
-        buying := buying + " and " + buylist[len(buylist)];
-        PrintTextAbovePrivate(me, buying +".", master);
-    endif
-    SetObjProperty(me,"buylist",buylist);
-    SetObjProperty(me,"buyprice",buyprice);
-    SetObjProperty(me,"buyobj",buyobj);
-endfunction
-
-function SpoutBuyList(you)
-  var buylist := {};
-  var buyprice := {};
-  var i;
-  if (!GetObjProperty(me,"buylist"))
-    PrintTextAbovePrivate(me, "I don't buy anything.", you);
-    return;
-  else
-    buylist := GetObjProperty(me,"buylist");
-    buyprice := GetObjProperty(me,"buyprice");
-  endif
-  for (i := 1; i<=len(buylist); i:=i+1)
-    PrintTextAbovePrivate(me, "I'll pay "+ buyprice[i] + " for " + buylist[i]+".", you);
-    sleep(2);
-  endfor
-  PrintTextAbovePrivate(me, "Just hand me what you want me to buy.", you);
-endfunction
-
-function buyitem(you, it)
-    var mypack := findmypack(me.serial);
-    var itsownerserial := CInt(GetObjProperty(it, "ownerserial"));
-    if (itsownerserial == CInt(master))
-        PrintTextAbovePrivate(me, "I'll see that this is returned to my employer.", you);
-        MoveItemToContainer(it,mypack);
-        NotifyMaster(you.name + " gave me an item of yours.");
-        return;
-    endif
-    var buylist := {};
-    var buyprice := { };
-    var buyobj := { };
-    var i;
-    if (!GetObjProperty(me,"buylist"))
-      PrintTextAbovePrivate(me, "I don't buy anything.", you);
-        MoveItemToContainer(it,you.backpack);
-        return;
-    else
-        buylist := GetObjProperty(me,"buylist");
-        buyprice := GetObjProperty(me,"buyprice");
-        buyobj := GetObjProperty(me,"buyobj");
-    endif
-    if (!(it.objtype in buyobj))
-      PrintTextAbovePrivate(me, "Ugh, I don't want that.", you);
-        MoveItemToContainer(it,you.backpack);
-        return;
-    endif
-    var index := 0;
-    for (i := 1; i<=len(buylist); i:=i+1)
-        if (it.objtype == buyobj[i])
-            index := i;
-            break;
-        endif
-    endfor
-    if (!index)
-      PrintTextAbovePrivate(me, "Ugh, I don't want that.", you);
-        MoveItemToContainer(it,you.backpack);
-        return;
-    endif
-    var mygold := CInt(GetObjProperty(me, "g"));
-    if ( (mygold-250) < (buyprice[index]*it.amount))
-      PrintTextAbovePrivate(me, "Sorry, I can't afford that right now.", you);
-        MoveItemToContainer(it,you.backpack);
-        return;
-    endif
-    var itamount := it.amount;
-    var itdesc := it.desc;
-    if ( grabitem(it,mypack) )
-      PrintTextAbovePrivate(me, "Thank you!  Here's your " + (buyprice[index]*itamount) + " gold.", you);
-            CreateItemInContainer(you.backpack, UOBJ_GOLD_COIN, buyprice[index]*itamount );
-        NotifyMaster(you.name + " just sold me " + itdesc);
-    else
-        NotifyMaster("My backpack is full!");
-        MoveItemToContainer(it,you.backpack);
-        return;
-    endif
-    var theprice := buyprice[index]*itamount;
-    var mypay := CInt(GetObjProperty(me,"mypay"));
-    var commission := CInt( 0.05 * theprice);
-    mygold := mygold - theprice;
-    mypay := mypay + commission;
-    if (mygold >= mypay)
-        mypay := 0;
-        mygold := mygold - mypay;
-    else
-        mypay := mypay - mygold;
-        mygold := 0;
-    endif
-    SetObjProperty(me, "mypay",mypay);
-    SetObjProperty(me, "g", mygold);
-endfunction
-
-function NotifyMaster(themessage)
-    foreach onlinechr in EnumerateOnlineCharacters()
-        if (onlinechr.serial == master)
-        SendSysMessage(onlinechr, me.name + " : " + themessage);
-        break;
-        endif
-    endforeach
-endfunction
-
-function TakeGold(ev)
-    var goldamount := ev.item.amount;
-    var mygold := CInt(GetObjProperty(me, "r"));
-    if(goldamount)
-      mygold := mygold + goldamount;
-      var totalgold := CInt(GetObjProperty(me,"g")) + mygold;
-      PrintTextAbovePrivate(me, "I am holding " + totalgold + " gold for you.", ev.source);
-    endif
-    SetObjProperty(me, "r", mygold);
-    DestroyItem(ev.item);
-endfunction
-
-function grabitem(it,mypack)
-  var mystuff := EnumerateItemsInContainer(mypack);
-  if (it.amount > 1 )
-    foreach item in mystuff
-      if (item.objtype == it.objtype)
-        if (CreateItemInContainer( mypack, it.objtype, it.amount ))
-          DestroyItem(it);
-          return 1;
-        else
-          return 0;
-        endif
-      endif
-    endforeach
-  else
-    foreach item in mystuff
-      if ((item.objtype == it.objtype) && (item.amount > 1 ))
-        if ( CreateItemInContainer( mypack, it.objtype, it.amount ) )
-          DestroyItem(it);
-          return 1;
-        else
-          return 0;
-        endif
-      endif
-    endforeach
-  endif
-  if (MoveItemToContainer(it,mypack))
-    return 1;
-  else
-    return 0;
-  endif
-endfunction
-
-function GetPayment(player, price)
-  var backpack := EnumerateItemsInContainer(player.backpack);
-  var a := 0;
-  foreach item in backpack
-    if ((item.objtype == 0xeed) && (item.amount >= price) )
-      if(SubtractAmount(item, price))
-        a := 1;
-        break;
-      endif
-    endif
-  endforeach
-  if(a == 1)
-    return 1;
-  else
-    return 0;
-  endif
-endfunction
-
-function Giverefund(who, price)
-  CreateItemInContainer(who.backpack, 0xeed, price);
-endfunction
-
-function find_or_create_in_pack(name, objtype);
-  var mypack := me.backpack;
-  var check := 0;
-  foreach thing in ListRootItemsInContainer(mypack)
-    if(thing.name == name)
-      check := thing;
-      break;
-    endif
-  endforeach
-  if(check == 0)
-    check := CreateItemInContainer(mypack, objtype, 1);
-    SetName(check, name);
-  endif
-  return check;
-endfunction
\ No newline at end of file

Copied: trunk/096/scripts/ai/playerMerchant.src.temp (from rev 331, trunk/096/scripts/ai/playerMerchant.src)

Deleted: trunk/096/scripts/ai/stablemaster.src
===================================================================
--- trunk/096/scripts/ai/stablemaster.src	2005-09-30 12:29:44 UTC (rev 333)
+++ trunk/096/scripts/ai/stablemaster.src	2005-09-30 12:52:24 UTC (rev 334)
@@ -1,428 +0,0 @@
-use npc;
-use basic;
-use os;
-use uo;
-
-include "include/eventID";
-include "include/attributes";
-include "include/sysEvent";
-include "include/utility";
-include "include/mrcSpawn";
-include "include/client";
-include ":npcutils:randName";
-include "include/dist";
-include "include/findCity";
-include "include/mobileID";
-include ":npcutils:speech";
-include ":npcutils:vetement";
-include ":npcutils:NPCBackpacks";
-include ":bank:bank";
-include ":npcutils:anchors";
-include ":begging:begging";
-include ":npcutils:trainSkill";
-
-const RESPAWN_MINUTES := 30;     // In how many minutes will the NPC respawn if killed.
-const MAX_SKILLS      := 48;     // There are currently 48 Skills.
-const UOBJ_GOLDCOIN   := 0x0eed; // A gold coin
-const UOBJ_METALCHEST := 0x0e7c; // A Metal Chest
-const REACT_THRESHOLD := 2;
-
-set_priority( 50 );
-
-var me := Self();
-me.hidden := 1;
-var buyimage  := {0x211b, 0x211c, 0x2121, 0x2124, 0x211f, 0x2120, 0x2126, 0x20f6, 0x211a, 0x2123, 0x2125, 0x2122, 0x211e, 0x211d, 0x2119, 0x20e6, 0x2108, 0x2103, 0x2101, 0x2135, 0x2136, 0x2137, 0x2127};
-var sellimage := {0xc9, 0xd9, 0xcc, 0xc8, 0xe2, 0xe4, 0x123, 0xdc, 0x06, 0xee, 0xcd, 0xe1, 0xd4, 0x05, 0xd6, 0xcf, 0xd1, 0xd8, 0xcb, 0xd2, 0xda, 0xdb, 0x124};
-var speech, inv_rs, inv_fs, inv_pb, inv_1c;
-var merchant_type := GetObjProperty(me, "MerchantType");
-var npccfg := ReadConfigFile( "npcdesc" );
-var mystorage := GetObjProperty(me, "Pets");
-var player, counter, pet, mx := 5306, my := 1164;
-if(!merchant_type)
-  SetObjProperty(me, "MerchantType", "stable");
-  merchant_type := "stable";
-endif
-
-program stablemaster()
-  start_script(":npcutils:NPCKeeper", me);
-  var time := ReadGameClock();
-  SetObjProperty(me,"countercheck", time);
-  var parms := {};
-  parms[1] := me;
-  parms[2] := time;
-  start_script(":taming:stableCounter", parms);
-  var myanchor := GetObjProperty(me, "Anchor");
-  if(myanchor)
-    MoveCharacterToLocation(me, myanchor[1], myanchor[2], myanchor[3], MOVECHAR_FORCELOCATION);
-  endif
-  drop_anchor();
-  myanchor     := GetObjProperty(me, "Anchor");
-  var spawnname := merchant_type + " " + myanchor[1] + " " + myanchor[2] + " " + myanchor[3];
-  inv_fs := FindRootItemInStorageArea(storage, spawnname + " FS");
-  inv_pb := FindRootItemInStorageArea(storage, spawnname + " PB");
-  inv_1c := FindRootItemInStorageArea(storage, spawnname + " 1C");
-  inv_rs := FindRootItemInStorageArea(storage, spawnname + " RS");
-  while((!inv_rs) or (!inv_fs) or (!inv_pb) or (!inv_1c))
-    sleep(5);
-    inv_fs := FindRootItemInStorageArea(storage, spawnname + " FS");
-    inv_pb := FindRootItemInStorageArea(storage, spawnname + " PB");
-    inv_1c := FindRootItemInStorageArea(storage, spawnname + " 1C");
-    inv_rs := FindRootItemInStorageArea(storage, spawnname + " RS");
-  endwhile
-  me.hidden := 0;
-  EnableEvents(EVID_NODE);
-  EnableEvents(SYSEVENT_ITEM_GIVEN);
-  DisableEvents(SYSEVENT_SPEECH);
-  var next_wander := ReadGameClock() + 10;
-  if(GetObjProperty(me, "frozen"))
-    me.frozen := 1;
-  endif
-  counter := GetObjProperty(me, "counter");
-  if(!counter)
-    counter := 0;
-  endif
-  if(!mystorage)
-    mystorage := array;
-    SetObjProperty(me, "Pets", mystorage);
-  endif
-  var ev, text;
-  var petname;
-  var newpet;
-  while (1)
-    ev := os::wait_for_event(120);
-    if(ev)
-      mystorage := GetObjProperty(me, "Pets");
-      case (ev.type)
-        EVID_NODE:                text := Lower(ev.text);
-                                  if((ev.source.cmdlevel > 2) && (text["showinventory"]))
-                                    SendOpenSpecialContainer(ev.source, inv_fs);
-                                  endif
-                                    if(text["buy"])
-                                      TurnToward(ev.source);
-                                      var res;
-                                      res := SendBuyWindow(ev.source, inv_fs, Self(), inv_pb );
-                                      if (!res)
-                                      endif
-                                    elseif (text["sell"])
-                                      if(GetObjProperty(inv_rs, "MyGold") >= 1000)
-                                        TurnToward(ev.source);
-		                                sellanimal(ev.source);
-                                      else
-                                        PrintTextAbovePrivate(Self(), "I cannot afford any more of that.", ev.source );
-                                      endif
-                                    elseif((text["vendor train"]) || (text["vendor teach"]) || (text["merchant train"]) || (text["merchant teach"]))
-                                      TurnToward(ev.source);
-                                      MerchantTrain(me, ev.source, text);
-                                    elseif(ev.text["stable"])
-                                    if(len(mystorage) >= 50)
-                                      say("I'm afraid I'm booked solid at the moment, please come again later.");
-                                    else
-                                      player := ev.source;
-                                      TurnToward(ev.source);
-                                      say("Show me your pet.");
-                                      pet := Target(player);
-                                      if (pet)
-                                        var tempdata := GetObjProperty(pet, "master");
-                                        var summoned := GetObjProperty(pet, "summoned");
-                                        if((pet.script == "tamed") && (!summoned))
-                                          if (tempdata == player.serial)
-                                            var price := 30 + (GetStrength(pet)/5);
-                                            say("I charge " + price + " per real world week to take care of " + pet.name + ".");
-                                            if (GetPayment(player, price))
-                                              say("Keep this ticket and give it to me when you want " + pet.name + " back.");
-                                              var ticket := CreateItemInBackpack(player, 0x14f0, 1);
-                                              ticket.usescript := "";
-                                              Save_Pet_Data(ticket, pet);
-                                            endif
-                                          else
-                                            say("This is not a zoo!");
-                                          endif
-                                        elseif((pet.graphic == MOB_HUMAN_MALE) || (pet.graphic == MOB_HUMAN_FEMALE) )
-                                          say("Do I look like an innkeeper?!");
-                                        else
-                                          say("That is not your pet.");
-                                        endif
-                                      endif
-                                    endif
-                                  endif
-        SYSEVENT_MERCHANT_BOUGHT: TurnToward(ev.source);
-                                  PrintTextAbovePrivate(Self(), "The total of thy sale is " + ev.amount +".", ev.source );
-                                  var mygold := GetObjProperty(inv_rs, "MyGold");
-                                  mygold := mygold - ev.amount;
-                                  SetObjProperty(inv_rs, "MyGold", mygold);
-                                  foreach item in EnumerateItemsInContainer(inv_pb )
-                                    DestroyItem(item);
-                                  endforeach
-                                  PlaySoundEffect(me, 0x38);
-        SYSEVENT_MERCHANT_SOLD:   TurnToward(ev.source);
-                                  PrintTextAbovePrivate(Self(), "The total of thy purchase is " + ev.amount +".", ev.source );
-                                  var mygold := GetObjProperty(inv_rs, "MyGold");
-                                  mygold := mygold + ev.amount;
-                                  SetObjProperty(inv_rs, "MyGold", mygold);
-                                  foreach item in EnumerateItemsInContainer(ev.source.backpack )
-		                            petname :=GetObjProperty(item, "animalkind");
-		                            if(petname)
-		                              newpet := CreateNpcFromTemplate(petname, ev.source.x, ev.source.y,ev.source.z,0,me.realm);
-		                              DestroyItem(item);
-                                      SetObjProperty(newpet, "master", ev.source.serial);
-                                      SetObjProperty(newpet, "prevtamed", 1);
-		                              newpet.script := "tamed";
-                                      RestartScript(newpet);
-		                            endif
-                                  endforeach
-                                  PlaySoundEffect(me, 0x38);
-        SYSEVENT_ITEM_GIVEN:      if(ev.item.objtype == UOBJ_GOLDCOIN);
-                                    TrainSkill(me, ev.source, ev.item);
-		                          else
-		                            TurnToward(ev.source);
-		                            Load_Ticket_Data(ev.source, ev.item);
-		                          endif
-      endcase
-    endif
-	if(ReadGameClock() >= next_wander)
-	  begpurse(me);
-      wander();
-      if(coordist(me.x, me.y, myanchor[1], myanchor[2]) > 5)
-        MoveCharacterToLocation(me, myanchor[1], myanchor[2], myanchor[3], MOVECHAR_FORCELOCATION);
-      endif
-      next_wander := ReadGameClock() + 30;
-    endif
-    Lookiehere(me);
-  endwhile
-endprogram
-
-function sellanimal(who)
-  var i;
-  say("What pet would you like to sell?");
-  var pet := Target(who);
-  if((!pet) || (pet==""))
-	SendSysMessage(who, "Cancelled.");
-	return;
-  endif
-  var tempdata  := GetObjProperty(pet, "master");
-  var summoned  := GetObjProperty(pet, "summoned");
-  if(!tempdata)
-	say("I cannot buy that.");
-	return;
-  endif
-  if((pet.script == "tamed") && (tempdata == who.serial) && (!summoned))
-    var theitem;
-	if((pet.objtype==0xd3) && (pet.color==0x02e6))
-	  theitem := CreateItemInContainer(inv_fs, 0x20cf, 1);
-	elseif(pet.objtype==0xd3)
-	  theitem := CreateItemInContainer(inv_fs, 0x2118, 1);
-	else
-	  for(i:=1;i<=sellimage.size();i:=i+1)
-		if(pet.objtype==sellimage[i])
-		  theitem := CreateItemInContainer(inv_fs, buyimage[i], 1);
-		  break;
-		endif
-	  endfor
-	endif
-    SetObjProperty(theitem, "ClearRestock", (ReadGameClock() + 1800));
-	var buyamount := CInt(GetStrength(pet) / 2);
-    var mygold := GetObjProperty(inv_rs, "MyGold");
-    if(buyamount > mygold)
-      say("I'm sorry, but I cannot afford to buy any pets right now.");
-      return;
-    else
-      mygold := mygold - buyamount;
-      SetObjProperty(inv_rs, "MyGold", mygold);
-	  say(pet.name + " is worth $" + buyamount);
-	  SetObjProperty(pet, "guardkill", 1);
-	  MoveCharacterToLocation(pet, 1, 1, 0, MOVECHAR_FORCELOCATION);
-	  ApplyRawDamage(pet, GetHp(pet) + 10);
-	  CreateItemInBackpack(who, 0x0eed, buyamount);
-	  return;
-    endif
-  elseif((pet.graphic == MOB_HUMAN_MALE) || (pet.graphic == MOB_HUMAN_FEMALE) )
-	say("Do I look like an innkeeper?!");
-  else
-	say("You could sell " + pet.name + " but that is not your pet.");
-  endif
-endfunction
-
-function Save_Pet_Data(ticket, pet)
-  var tempdata;
-  ticket.name := "Pet claim ticket for : " + pet.name;
-  SetObjProperty(ticket, "StableMaster", me.serial);
-  SetObjProperty(ticket, "petserial", pet.serial);
-  SetObjProperty(ticket, "pettemplate", pet.npctemplate);
-  SetObjProperty(pet,"stabled", 1);
-  SetObjProperty(pet,"days", 1);
-  GrantPrivilege(pet, "invul");
-  pet.enable("invul");
-  MoveCharacterToLocation(pet, mx, my, 0, MOVECHAR_FORCELOCATION);
-  mystorage.append(pet.serial);
-  SetObjProperty(me, "Pets", mystorage);
-  SetObjProperty(pet, "NextCounter", ReadGameClock() + 86400);
-endfunction
-
-function Load_Ticket_Data(player, ticket)
-  if(GetObjProperty(ticket, "StableMaster") != me.serial)
-    PrintTextAbovePrivate(me, "This doesn't seem to be one of my tickets, please take it to the stable master who issued it.", player);
-    MoveItemToContainer(ticket, player.backpack);
-    return;
-  elseif(!canclaim(player,GetObjProperty(ticket, "pettemplate")))
-    say("You have no chance of controlling that!");
-    return;
-  endif
-  var tempdata := 0;
-  var newpet := 0;
-  var pet;
-  if(ticket.objtype == 0x14f0)
-    tempdata := GetObjProperty(ticket, "petserial");
-    say("Oh, let me find your pet for you. One moment, please.");
-    sleep(1);
-    var petserial := GetObjProperty(ticket, "petserial");
-    mystorage := GetObjProperty(me, "Pets");
-    if(petserial in mystorage)
-      pet := SystemFindObjectBySerial(petserial);
-    endif
-    if(!pet)
-      say("I'm sorry, but I don't have this pet.");
-      sleep(1);
-      say("Perhaps you may have left him here too long?");
-      DestroyItem(ticket);
-      return;
-    endif
-    SetObjProperty(pet, "master", player.serial);
-    SetObjProperty(pet, "prevtamed", 1);
-    EraseObjProperty(pet,"stabled");
-    EraseObjProperty(pet,"days");
-	pet.script := "tamed";
-    RestartScript(pet);
-    RevokePrivilege(pet, "invul");
-    MoveCharacterToLocation(pet, player.x, player.y, player.z, MOVECHAR_FORCELOCATION);
-    var holder := array;
-    mystorage := GetObjProperty(me, "Pets");
-    foreach thing in mystorage
-      if(thing != pet.serial)
-        holder.append(thing);
-      endif
-    endforeach
-    mystorage := holder;
-    SetObjProperty(me, "Pets", mystorage);
-    EraseObjProperty(pet, "NextCounter");
-    say("Take care of " + pet.name + " and be sure to feed it!");
-    DestroyItem(ticket);
-  else
-    TakeItem(player, ticket);
-  endif
-endfunction
-
-function GetPayment(player, price)
-  var backpack := EnumerateItemsInContainer(player.backpack);
-  var a := 0;
-  foreach item in backpack
-    if ((item.objtype == 0xeed) && (item.amount >= price) )
-      if(SubtractAmount(item, price))
-        a := 1;
-        break;
-      endif
-    endif
-  endforeach
-  if(a == 1)
-    return 1;
-  else
-    say("You dont have " + price + " gold coins!");
-    return 0;
-  endif
-endfunction
-
-function canclaim(player, pettemplate)
-  case (pettemplate)
-    "horse":
-    "horse1":
-    "horse2":
-    "horse3":
-    "forestostard":
-    "desertostard":
-    "llama":
-    return 1;
-  endcase
-  var conf := ReadConfigFile("::npcdesc");
-  var elem;
-  var points := 0;
-  elem := FindConfigElem(conf, pettemplate);
-  if (!elem)
-    return 0;
-  endif
-  var difficulty := CInt(GetConfigInt(elem, "tameskill"));
-  if (difficulty < 50)
-    return 1;
-  elseif ( ( difficulty - 20 ) > GetEffectiveSkill(player, SKILLID_TAMING ) )
-    return 0;
-  else
-    return 1;
-  endif
-endfunction
-
-function Lookiehere(who)
-  var mobiles := ListMobilesNearLocation(who.x, who.y, who.z, 15, who.realm);
-  var guard, num, i, hogcall, guardzone, element, range, timer, elem;
-  var cfgfile := ReadConfigFile("::gzone");
-  var entries := GetConfigStringKeys(cfgfile);
-  foreach listing in entries
-    element :=  cfgfile[listing];
-    range := element.range;
-    range := SplitWords(range);
-    if((who.x >= CInt(range[1])) && (who.x <= CInt(range[3])) && (who.y >= CInt(range[2])) && (who.y <= CInt(range[4])))
-      guardzone := 1;
-      break;
-    endif
-  endforeach
-  foreach npc in mobiles
-	if(!npc.acctname)
-	  elem := FindConfigElem(npccfg, npc.npctemplate);
-	  if(!elem.guardignore && !GetObjProperty(npc, "called"));
-		if((npc) && (npc.script != "tamed") && (npc.script != "light"))
-          case(RandomInt(4) + 1)
-            1: hogcall := "Guards! They're killing people here!";
-            2: hogcall := "Guards! I pay my taxes and no guards? Guards!";
-            3: hogcall := "Help! They're dying here! Guards!";
-            4: hogcall := "Guards! Come save us quick!";
-            5: hogcall := "Ah! Help us! Guards!";
-          endcase
-          PrintTextAbove(me, hogcall);
-          if(guardzone == 1)
-		    SetObjProperty(npc, "called", 1);
-            num := RandomInt(4) + 1;
-            foreach mobile in ListMobilesNearLocation(me.x, me.y, me.z, 15, me.realm)
-		      if(mobile.npctemplate == "townguard")
-		        var ev := array;
-                ev.+ type;
-                ev.+ source;
-                ev.type := EVID_PEACEMADE;
-                ev.source := npc;
-                SendEvent(mobile, ev);
-                ev.type := SYSEVENT_ENGAGED;
-                SendEvent(mobile, ev);
-                SetObjProperty(npc, "guardkill", 1);
-              endif
-            endforeach
-          endif
-		endif
-	  endif
-    else
-	  timer := GetObjProperty(npc, "guardstimer");
-	  if(npc.criminal && (timer < ReadGameClock() || timer.errortext))
-        foreach mobile in ListMobilesNearLocation(me.x, me.y, me.z, 15, me.realm)
-		  if(mobile.npctemplate == "townguard")
-		    var ev := array;
-            ev.+ type;
-            ev.+ source;
-            ev.type := EVID_PEACEMADE;
-            ev.source := npc;
-            SendEvent(mobile, ev);
-            ev.type := SYSEVENT_ENGAGED;
-            SendEvent(mobile, ev);
-            SetObjProperty(npc, "guardkill", 1);
-          endif
-        endforeach
-        SetObjProperty(npc, "guardstimer", ReadGameClock()+60);
-	  endif
-	endif
-  endforeach
-  sleep(1);
-endfunction
\ No newline at end of file

Copied: trunk/096/scripts/ai/stablemaster.src.temp (from rev 331, trunk/096/scripts/ai/stablemaster.src)

Modified: trunk/096/scripts/include/localization.inc
===================================================================
--- trunk/096/scripts/include/localization.inc	2005-09-30 12:29:44 UTC (rev 333)
+++ trunk/096/scripts/include/localization.inc	2005-09-30 12:52:24 UTC (rev 334)
@@ -1,4 +1,4 @@
-/* $$
+/* $Id$
  *
  * Purpose
  * Provide localized messages

Modified: trunk/096/scripts/misc/dblclickself.src
===================================================================
--- trunk/096/scripts/misc/dblclickself.src	2005-09-30 12:29:44 UTC (rev 333)
+++ trunk/096/scripts/misc/dblclickself.src	2005-09-30 12:52:24 UTC (rev 334)
@@ -3,18 +3,20 @@
 use npc;
 
 include "include/eventID";
+include "include/client";
 
 
-program dblclickself(me)
-	var mount := GetEquipmentByLayer(me, 25);
+program dblclickself(who)
+	var mount := GetEquipmentByLayer(who, LAYER_MOUNT);
 	if (!mount)
-		OpenPaperdoll(me, me);
+		OpenPaperdoll(who, who);
 		return;
 	endif
 	if (me.warmode)
-		OpenPaperdoll(me, me);
+		OpenPaperdoll(who, who);
 		return;
 	endif
+
 	var serial := GetObjProperty(mount, "serial");
 	var animal := SystemFindObjectBySerial(CInt(serial));
 	EraseObjProperty(animal,"serial");
@@ -27,10 +29,9 @@
 	ev.type := EVID_WAKEUP;
 	ev.source := me;
 	SendEvent(animal, ev);
-	MoveCharacterToLocation(animal, me.x, me.y, me.z, MOVECHAR_FORCELOCATION);
+	MoveCharacterToLocation(animal, who.x, who.y, who.z, MOVECHAR_FORCELOCATION);
 	RestartScript(animal);
 	DestroyItem(mount);
 
 	return;
 endprogram
-

Modified: trunk/096/scripts/misc/oncreate.src
===================================================================
--- trunk/096/scripts/misc/oncreate.src	2005-09-30 12:29:44 UTC (rev 333)
+++ trunk/096/scripts/misc/oncreate.src	2005-09-30 12:52:24 UTC (rev 334)
@@ -2,19 +2,22 @@
 
 include "include/startEqp";
 
-program oncreate(who, skillids)
-  if((13 in CAscZ(who.name)) || (10 in CAscZ(who.name)))
-    var account := who.acct;
-    account.ban();
-    for i:=1 to 5
-      account.DeleteCharacter( i );
-    endfor
-    syslog("ALERT! Account " + account.name + " was banned for cheating.");
-  endif
-  if(CInt(who.truecolor) <= 32768)
-    who.truecolor := who.truecolor + 32768;
-    who.color := who.truecolor;
-  endif
-  SetObjProperty(who, "OnCreate", ReadGameClock());
-  CreateStartingEquipment(who, skillids);
-endprogram
\ No newline at end of file
+
+program core_onCreate(who, skillids)
+	if ((13 in CAscZ(who.name)) || (10 in CAscZ(who.name)))
+		var account := who.acct;
+		account.ban();
+		for i:=1 to 5
+			account.DeleteCharacter( i );
+		endfor
+		syslog("ALERT! Account " + account.name + " was banned for cheating.");
+	endif
+	if (CInt(who.truecolor) <= 32768)
+		who.truecolor := who.truecolor + 32768;
+		who.color := who.truecolor;
+	endif
+	SetObjProperty(who, "OnCreate", ReadGameClock());
+	CreateStartingEquipment(who, skillids);
+
+	return;
+endprogram

Modified: trunk/096/scripts/misc/ondelete.src
===================================================================
--- trunk/096/scripts/misc/ondelete.src	2005-09-30 12:29:44 UTC (rev 333)
+++ trunk/096/scripts/misc/ondelete.src	2005-09-30 12:52:24 UTC (rev 334)
@@ -2,16 +2,17 @@
 
 include "include/startEqp";
 
-program ondelete(who)
-  var created := GetObjProperty(who, "OnCreate");
-  if(!created)
-    created := 0;
-  endif
-  if((ReadGameClock() - created) >= 604800)
-    print("deleting char");
-    return 1;
-  else
-    print("too young");
-    return 0;
-  endif
-endprogram
\ No newline at end of file
+
+program core_onDelete(who)
+	var created := GetObjProperty(who, "OnCreate");
+	if (!created)
+		created := 0;
+	endif
+	if ((ReadGameClock() - created) >= 604800)
+		print("deleting char");
+		return 1;
+	else
+		print("too young");
+		return 0;
+	endif
+endprogram



From muaddiblsd at berlios.de  Fri Sep 30 17:05:22 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Fri, 30 Sep 2005 17:05:22 +0200
Subject: [Poldistro-svn] r335 - in trunk/096/pkg: skills/bowcraft systems/combat systems/crafting/include
Message-ID: <200509301505.j8UF5MUZ020965@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-30 17:05:18 +0200 (Fri, 30 Sep 2005)
New Revision: 335

Added:
   trunk/096/pkg/skills/bowcraft/FletchMenu.cfg
   trunk/096/pkg/skills/bowcraft/bowcraft.src
Removed:
   trunk/096/pkg/skills/bowcraft/bowcraftFunctions.inc
   trunk/096/pkg/skills/bowcraft/fletch.src
Modified:
   trunk/096/pkg/skills/bowcraft/bowcraft.cfg
   trunk/096/pkg/skills/bowcraft/itemdesc.cfg
   trunk/096/pkg/systems/combat/bladed.src
   trunk/096/pkg/systems/crafting/include/crafting.inc
Log:


Added: trunk/096/pkg/skills/bowcraft/FletchMenu.cfg
===================================================================
--- trunk/096/pkg/skills/bowcraft/FletchMenu.cfg	2005-09-30 12:52:24 UTC (rev 334)
+++ trunk/096/pkg/skills/bowcraft/FletchMenu.cfg	2005-09-30 15:05:18 UTC (rev 335)
@@ -0,0 +1,50 @@
+##########################################################################
+# Format for Crafting Menus Config Files:
+#
+#  Index Entry for Config:
+#
+#     Craftitem Index      <- This is the Index. Contains the Sub Menu Names
+#     {
+#      Title	   Example <- HTML Name of the Menu
+#      Skill       blacksmithy  <- Skill the menu is for. Same as the ID's in pol
+#      SkillID     7       <- SkillID of the skill listed in Skill.
+#      Group       Axes    <- Used for each Sub Menu Name
+#     }
+#
+#  Sub Menu Entry for Config:
+#
+#     Craftitem RingMail   <- Should match the Sub-Menu Group name in Index
+#     {
+#     	Item	RingmailGloves   <- For each item in the sub-menu. You use the
+#                                   objtype name here, not the objtype.
+#     }
+#
+##########################################################################
+
+Craftitem Index
+{
+        Title   <center>Bowcraft Selection Menu</center>
+        Skill   BowcraftFletching
+        SkillID BowcraftFletching
+	Group	Materials
+	Group	Ammunition
+	Group	Weapons
+}
+
+Craftitem Materials
+{
+	Item	ArrowShaft
+}
+
+Craftitem Ammunition
+{
+	Item	Arrow
+	Item	Bolt
+}
+
+Craftitem Weapons
+{
+	Item	Bow
+	Item	Crossbow
+	Item	HeavyCrossbow
+}

Modified: trunk/096/pkg/skills/bowcraft/bowcraft.cfg
===================================================================
--- trunk/096/pkg/skills/bowcraft/bowcraft.cfg	2005-09-30 12:52:24 UTC (rev 334)
+++ trunk/096/pkg/skills/bowcraft/bowcraft.cfg	2005-09-30 15:05:18 UTC (rev 335)
@@ -1,35 +1,104 @@
+# //$Id$
+
+##########################################################################
+# Format for bowcraft.cfg:
+#
+#     Element    0xf3f      <- Objtype of the item
+#     {
+#      Name             arrow       <- Name of the item
+#      material         1           <- Material Amount Required
+#      skill            0.0         <- Skill Required of Carpentry to make xx.x formated
+#      difficulty       1.0         <- Difficulty of creating this item xx.x formated
+#      points           1.0         <- Points given for crafting this item, xx.x formated
+#      parts            0x0 0x0 3 1 <- list of Objtypes of parts for an assemble item
+#                                      <objtype> <objtype> <amount> <amount>
+#      type             wood        <- Type of material used to craft this
+#      exceptional 1                <- 0/1 Flag. 1 = Can be exceptional
+#      mark        1                <- 0/1 Flag. 1 = Can retain maker's mark
+#      retain      1                <- 0/1 Flag. 1 = Can retain color of ore used
+#      assemble    1                <- Used in tinker/carpentry for items marked
+#     }                                as assemblies. This includes making boards.
+#
+# Notes: 1.) Objtype in entry header must NOT use 0x0aaa format, but 0xaaa
+##########################################################################
 Element 0x1BD4
 {
-    Name    Shafts
-    Material    1
-    SkillRequired 0
-    Difficulty  5
-    PointValue  10
+	name		arrow shaft
+	material	1
+	skill		0.0
+	difficulty	1.0
+	points		5.0
+	type		wood
+	exceptional	0
+	mark		0
+	retain		0
 }
 
+Element 0xf3f
+{
+	name		arrow
+	material	1
+	skill		0.0
+	difficulty	1.0
+	points		1.0
+	parts		0x1BD4 0x1BD1 1 1
+	type		wood
+	exceptional	0
+	mark		0
+	retain		0
+	assemble	1
+}
+
+Element 0x1bfb
+{
+	name		bolt
+	material	1
+	skill		0.0
+	difficulty	1.0
+	points		1.0
+	parts		0x1BD4 0x1BD1 1 1
+	type		wood
+	exceptional	0
+	mark		0
+	retain		0
+	assemble	1
+}
+
 Element 0x13B2
 {
-	Name		Bow
-	Material	7
-	SkillRequired	0
-	Difficulty  10
-	PointValue  40
+	name		bow
+	material	7
+	skill		10.0
+	difficulty	5.0
+	points		20.0
+	type		wood
+	exceptional	1
+	mark		1
+	retain		1
 }
 
-Element 0x0f4f
+Element 0xf4f
 {
-    Name    Crossbow
-    Material    7
-    SkillRequired 20
-    Difficulty  40
-    PointValue  60
+    name             crossbow
+    material         10
+    skill            60.0
+    difficulty       35.0
+    points           80.0
+    type             wood
+    exceptional      1
+    mark             1
+    retain           1
 }
 
 Element 0x13fd
 {
-    Name    Heavy Crossbow
-    Material    15
-    SkillRequired 55
-    Difficulty  80
-    PointValue  100
-}
+    name             heavy crossbow
+    material         15
+    skill            80.0
+    difficulty       55.0
+    points           100.0
+    type             wood
+    exceptional      1
+    mark             1
+    retain           1
+}
\ No newline at end of file

Added: trunk/096/pkg/skills/bowcraft/bowcraft.src
===================================================================
--- trunk/096/pkg/skills/bowcraft/bowcraft.src	2005-09-30 12:52:24 UTC (rev 334)
+++ trunk/096/pkg/skills/bowcraft/bowcraft.src	2005-09-30 15:05:18 UTC (rev 335)
@@ -0,0 +1,120 @@
+// //$Id$
+
+use cfgfile;
+use util;
+
+include ":attributes:attributeConstants";
+include ":attributes:attributes";
+include ":attributes:skillCheck";
+include ":crafting:crafting";
+include ":crafting:craftingRepair";
+include ":crafting:toolWear";
+include "include/canAccess";
+
+var item_config     := ReadConfigFile(":*:itemdesc");
+var craft_config    := ReadConfigFile(":bowcraft:bowcraft");
+
+program use_FletchTool(who, tool)
+
+	if(!can_access(who, tool))
+		return 0;
+	endif
+	if((!tool.movable) or !ReserveItem(tool))
+		SendSysMessage(who, "You cannot use that");
+		return 0;
+	endif
+	if(tool.container.serial != who.backpack.serial)
+		SendSysMessage(who, "That item is not in your backpack.");
+		return 0;
+	endif
+
+	EraseObjProperty(who, "IsMeditating");
+	EraseObjProperty(who, "HealTimer");
+
+	var rinfo := sendCraftGump(who, ATTRIBUTE_BOWCRAP_T_FLETCHING);
+
+	// OK was pressed, close it on out
+	if(rinfo == 0)
+		return 0;
+	endif
+
+	var the_objtype := rinfo[1];
+	var amt         := rinfo[2];
+	var repairit    := rinfo[3];
+
+	if(repairit)
+		repair_this(who, craft_skill);
+		return 0;
+	endif
+
+	if(craft_config[Hex(the_objtype)].assemble == 1)
+		CraftAssembly(who, ATTRIBUTE_BOWCRAP_T_FLETCHING, tool, the_objtype, amt);
+	else
+		makeBowcraftItems(who, the_objtype, amt, tool);
+	endif
+
+endprogram
+
+function makeBowcraftItems(who, what, amt, tool)
+
+	if(!what)
+		SendSysMessage(who, "Cancelled");
+		return 0;
+	endif
+
+	// Metal is sent for the ResourceList entry type.
+	var itemchk := MaterialSelection(who, craft_skill, lower("Wood"));
+	if(!itemchk)
+		return 0;
+	endif
+	var use_on := itemchk[1];
+	var ptmod := itemchk[3];
+
+	var num, theitem;
+	var itemname := craft_config[what].name;
+	var material := Cint(craft_config[what].material);
+	var reqd := Cint(craft_config[what].skill);
+	var diff := Cint(craft_config[what].difficulty);
+	var pts  := Cint(craft_config[what].points);
+	pts      := CInt(pts + ptmod);
+	var counter := 0, x := who.x, y := who.y;
+
+	while(counter < amt)
+		if((who.x != x) || (who.y != y))
+			SendSysMessage(who, "You stop fletching.");
+			break;
+		endif
+		if(!tool)
+			break;
+		endif
+
+		sleep(2);
+
+		if(GetAmount(use_on) >= material)
+			if(CraftCheckSkill(who, craft_skill, diff, pts))
+				theitem := CreateCraftItem(who, craft_skill, use_on, use_on.objtype, what, material, itemname, reqd);
+				if( TypeOf(theitem) != "ItemRef" )
+					SubtractAmount(use_on, (material / 2));
+					SendSysMessage(who, "You failed to create the item, and some of your materials are lost.");
+					counter := counter + 1;
+					continue;
+				else
+					CheckToolWear (who, tool, craft_skill);
+				endif
+			else
+				num := CInt(randomint(material)/2) + 1;
+				if(SubtractAmount(use_on, num))
+					SendSysMessage(who, "You lost some material");
+				endif
+			endif
+		else
+			SendSysMessage(who, "You don't have the resources required to make that item.");
+			counter := 100;
+			break;
+		endif
+		counter := counter + 1;
+	endwhile
+
+	return 0;
+
+endfunction

Deleted: trunk/096/pkg/skills/bowcraft/bowcraftFunctions.inc
===================================================================
--- trunk/096/pkg/skills/bowcraft/bowcraftFunctions.inc	2005-09-30 12:52:24 UTC (rev 334)
+++ trunk/096/pkg/skills/bowcraft/bowcraftFunctions.inc	2005-09-30 15:05:18 UTC (rev 335)
@@ -1,113 +0,0 @@
-
-function CarveLogs(who, blade, logs)
-  if(logs.movable == 0)
-    SendSysMessage(who, "You cannot use those logs.");
-    return;
-  endif
-  if((!Accessible(who, logs)) or (!CheckLineOfSight(who, logs)) or (dist(who, logs) > 2))
-    SendSysMessage(who, "You cannot use that.");
-    return;
-  endif
-  if(!logs.container)
-    if(Distance(who, logs) > 2)
-      SendSysMessage(who, "That is too far away.");
-      return;
-    endif
-  endif
-  var creatable := CreatableObjects(who, blade, logs);
-  var selection := SelectMenuItem2(who, "BowcraftCarving");
-  if(!selection)
-    return;
-  endif
-  var what := selection.objtype;
-  if(!Accessible(who, logs))
-    SendSysMessage(who, "I can't access the logs to make that.");
-    return;
-  endif
-  var objectconfig := FindConfigElem(bowcraftconfigfile, what);
-  if(!objectconfig)
-    return;
-  endif
-  var material := CInt(GetConfigString(objectconfig, "Material"));
-  if(material > logs.amount)
-    SendSysMessage(who, "You don't have enough logs to make that.");
-    return;
-  endif
-  var difficulty := GetConfigInt(objectconfig, "Difficulty");
-  var pointvalue := GetConfigInt(objectconfig, "PointValue");
-  var bow := 0;
-  Detach();
-  PlaySoundEffect(who, 0x5a);
-  PerformAction(who, 0x021);
-  sleep(2);
-  PlaySoundEffect(who, 0x5a);
-  PerformAction(who, 0x021);
-  sleep(2);
-  PlaySoundEffect(who, 0x5a);
-  PerformAction(who, 0x021);
-  sleep(2);
-  PlaySoundEffect(who, 0x5a);
-  PerformAction(who, 0x021);
-  sleep(2);
-  if(CheckSkill(who, SKILLID_BOWCRAFT, difficulty, pointvalue))
-    if(what == UOBJ_SHAFTS)
-      var amt := logs.amount;
-      if(DestroyItem(logs))
-        CreateItemInBackpack(who, what, amt);
-        CheckToolWear (who, blade, SKILLID_BOWCRAFT);
-        SendSysMessage(who, "You create some shafts and place them in your pack." );
-      endif
-    elseif (what == UOBJ_BOW)
-      if(SubtractAmount(logs, material))
-        bow := CreateItemInBackpack(who, what);
-        CheckToolWear (who, blade, SKILLID_BOWCRAFT);
-        SendSysMessage(who, "You create a bow and place it in your pack.");
-        SetName(bow, "a bow");
-      endif
-    elseif (what == UOBJ_XBOW)
-      if(SubtractAmount(logs, material))
-        bow := CreateItemInBackpack(who, what);
-        CheckToolWear (who, blade, SKILLID_BOWCRAFT);
-        SendSysMessage(who, "You create a crossbow and place it in your pack.");
-        SetName(bow, "a crossbow");
-      endif
-    elseif (what == UOBJ_HEAVY_XBOW)
-      if(SubtractAmount(logs, material))
-        bow := CreateItemInBackpack(who, what);
-        CheckToolWear (who, blade, SKILLID_BOWCRAFT);
-        SendSysMessage(who, "You create a heavy crossbow and place it in your pack.");
-        SetName(bow, "a heavy crossbow");
-      endif
-    else
-      SendSysMessage(who, "I don't know how to make that.");
-      return;
-    endif
-    if((RandomInt(CInt(GetEffectiveSkill(who,SKILLID_BOWCRAFT)) + 1) > (difficulty + 20)) && (bow != 0))
-      setquality(who, bow);
-//      var skill := GetEffectiveSkill(who, SKILLID_BOWCRAFT);
-//      ExceptionalFameMod(who, skill, difficulty, pointvalue);
-    endif
-  else
-    SubtractAmount(logs, (RandomInt(5) + 1));
-    SendSysMessage(who, "You destroy some logs.");
-  endif
-endfunction
-
-function setquality(who, bow)
-  var tname := TruncateArticle(bow.name);
-  if(CInt(GetEffectiveSkill(who, SKILLID_BOWCRAFT)) >= 99)
-    bow.name := "an exceptional " + tname + " [crafted by " + who.name + "]";
-  else
-    bow.name := "an exceptional " + tname;
-  endif
-  bow.quality := bow.quality + 0.2;
-  bow.hp := bow.maxhp;
-  SendSysMessage(who, "You created an exceptional item.");
-endfunction
-
-function CreatableObjects( who, blade, logs )
-  var objtypes := GetMenuObjTypes( "BowcraftCarving" );
-  objtypes := ApplyConstraint( objtypes, bowcraftconfigfile, "material", GetAmount(logs) );
-  return objtypes;
-endfunction
-

Deleted: trunk/096/pkg/skills/bowcraft/fletch.src
===================================================================
--- trunk/096/pkg/skills/bowcraft/fletch.src	2005-09-30 12:52:24 UTC (rev 334)
+++ trunk/096/pkg/skills/bowcraft/fletch.src	2005-09-30 15:05:18 UTC (rev 335)
@@ -1,74 +0,0 @@
-use uo;
-
-include "include/client";
-include "include/attributes";
-include "include/objtype";
-include "include/utility";
-include "include/skillPoints";
-include "include/canAccess";
-
-program on_fletch(who, shafts)
-  EraseObjProperty(who, "IsMeditating");
-    EraseObjProperty(who, "HealTimer");
-  if(!can_access(who, shafts))
-    return;
-  endif
-  var thepoints := GetEffectiveSkill(who, SKILLID_BOWCRAFT) / 2;
-  if(thepoints < 10)
-    thepoints := 10;
-  endif
-  if(shafts.objtype == 0x1BD4)
-    SendSysMessage(who, "Select feathers to use.");
-  else
-    SendSysMessage(who, "Select shafts to use.");
-  endif
-  var feathers := Target(who);
-  if(!feathers)
-    SendSysMessage(who, "Cancelled.");
-    return;
-  endif
-  if(!can_access(who, feathers))
-    return;
-  endif
-  if(shafts.objtype == 0x1bd1)
-    if(GetObjType(feathers) != 0x1bd4)
-      SendSysMessage(who, "You can only make arrows from shafts and feathers.");
-      return;
-    endif
-  elseif(shafts.objtype == 0x1bd4)
-    if(GetObjType(feathers) != 0x1bd1)
-      SendSysMessage(who, "You can only make arrows from shafts and feathers.");
-      return;
-    endif
-  else
-    SendSysMessage(who, "You can only make arrows from shafts and feathers.");
-  endif
-  var choice := SelectMenuItem2(who, "fletching");
-  if(!Accessible(who, shafts))
-    SendSysMessage(who, "You can't use those shafts.");
-    return;
-  endif
-  if(!Accessible(who, feathers))
-    SendSysMessage(who, "You can't use those feathers.");
-    return;
-  endif
-  if(choice == 0)
-    SendSysMessage(who, "Cancelled.");
-    return;
-  endif
-  if(CheckSkill(who, SKILLID_BOWCRAFT, -1, thepoints))
-    var num_to_make := Min(GetAmount(shafts), GetAmount(feathers));
-    if((SubtractAmount(shafts, num_to_make)) && (SubtractAmount(feathers, num_to_make)))
-      var arrows := CreateItemInBackpack(who, choice.objtype, num_to_make);
-      if (arrows)
-        SendSysMessage(who, "You create some arrows and put them in your pack.");
-      else
-        SendSysMessage(who, "You were unable to find anywhere to put the arrows.");
-      endif
-    endif
-  else
-    SubtractAmount(shafts, 1);
-    SubtractAmount(feathers, 1);
-    SendSysMessage(who, "You destroy some materials.");
-  endif
-endprogram
\ No newline at end of file

Modified: trunk/096/pkg/skills/bowcraft/itemdesc.cfg
===================================================================
--- trunk/096/pkg/skills/bowcraft/itemdesc.cfg	2005-09-30 12:52:24 UTC (rev 334)
+++ trunk/096/pkg/skills/bowcraft/itemdesc.cfg	2005-09-30 15:05:18 UTC (rev 335)
@@ -2,18 +2,33 @@
 
 Item 0x1BD4
 {
-    Name                ArrowShaft
-    desc                arrow shaft%s%
-    Script              fletch
-    VendorSellsFor      3
-    VendorBuysFor       1
+	Name		arrowshaft
+	desc		arrow shaft%s%
+	VendorSellsFor	3
+	VendorBuysFor	1
 }
 
-Item 0x1bd1
+Item 0x1BD1
 {
-    Name                feather
-    desc                feather%s%
-    Script              fletch
-    VendorSellsFor      3
-    VendorBuysFor       1
+	Name		feather
+	desc		feather%s%
+	VendorSellsFor	3
+	VendorBuysFor	1
 }
+
+Item 0x1022
+{
+	Name		fletchtools
+	Desc		fletching tools
+	VendorSellsFor	8
+	Script		:bowcraft:bowcraft
+}
+
+Item 0x1023
+{
+	Name		fletchtools2
+	Desc		fletching tools
+	VendorSellsFor	8
+	Script		:bowcraft:bowcraft
+}
+

Modified: trunk/096/pkg/systems/combat/bladed.src
===================================================================
--- trunk/096/pkg/systems/combat/bladed.src	2005-09-30 12:52:24 UTC (rev 334)
+++ trunk/096/pkg/systems/combat/bladed.src	2005-09-30 15:05:18 UTC (rev 335)
@@ -15,7 +15,6 @@
 include "include/dist";
 include "include/toolWear";
 include "include/noto";
-include ":bowcraft:bowcraftFunctions";
 include ":tailoring:tailoringFunctions";
 include ":fishing:fishingFunctions";
 include ":containers:corpse/corpseFunctions";
@@ -24,63 +23,71 @@
 
 
 program use_blade(who, blade)
-  EraseObjProperty(who, "IsMeditating");
-  EraseObjProperty(who, "HealTimer");
-  if(!can_access(who, blade))
-    return;
-  endif
-  if(!ReserveItem(blade))
-    return;
-  endif
-  SendSysMessage(who, "What would you like to use that on?");
-  var use_on := TargetCoordinates(who);
-  if(!use_on)
-    return;
-  endif
-  if(use_on.item)
-    if(!can_access(who, use_on.item, "unmovable"))
-      return;
-    endif
-  endif
-  var checkme := use_on.item.objtype;
-  if((checkme == UOBJ_LOGS) || (checkme == 0x1bd7))
-    CarveLogs( who, blade, use_on.item );
-  elseif(use_on.mobile.npctemplate == "sheep")
-    process_wool(who, blade, use_on.mobile);
-  elseif(use_on.item.objtype == UOBJ_CORPSE)
-    ReleaseItem(blade);
-    Carve_Corpse(who, use_on.item);
-  elseif(is_fish(checkme))
-    CarveFish(who, blade, use_on.item);
-  elseif (is_tree(use_on.objtype ))
-    CarveTree(who, blade, use_on.item);
-  else
-    SendSysMessage(who, "I don't know how to use those items together.");
-  endif
+
+	EraseObjProperty(who, "IsMeditating");
+	EraseObjProperty(who, "HealTimer");
+
+	if(!can_access(who, blade))
+		return;
+	endif
+	if(!ReserveItem(blade))
+		return;
+	endif
+
+	SendSysMessage(who, "What would you like to use that on?");
+	var use_on := TargetCoordinates(who);
+	if(!use_on)
+		return;
+	endif
+	if(use_on.item)
+		if(!can_access(who, use_on.item, "unmovable"))
+			return;
+		endif
+	endif
+	var checkme := use_on.item.objtype;
+	if(use_on.mobile.npctemplate == "sheep")
+		process_wool(who, blade, use_on.mobile);
+	elseif(use_on.item.objtype == UOBJ_CORPSE)
+		ReleaseItem(blade);
+		Carve_Corpse(who, use_on.item);
+	elseif(is_fish(checkme))
+		CarveFish(who, blade, use_on.item);
+	elseif (is_tree(use_on.objtype ))
+		CarveTree(who, blade, use_on.item);
+	else
+		SendSysMessage(who, "I don't know how to use those items together.");
+	endif
+
 endprogram
 
+
 function is_tree(theobj)
-  if((theobj == 0x0c9e) || (theobj == 0x0ca8) || (theobj == 0x0caa))
-    return 1;
-  elseif (theobj == 0x0cab)
-    return 1;
-  elseif ((theobj >= 0x0c99) && (theobj <= 0x0cea))
-    return 1;
-  elseif ((theobj >= 0x0cf3) && (theobj <= 0x0d03))
-    return 1;
-  elseif ((theobj >= 0x0d41) && (theobj <= 0x0dab))
-    return 1;
-  else
-    return 0;
-  endif
+
+	if((theobj == 0x0c9e) || (theobj == 0x0ca8) || (theobj == 0x0caa))
+		return 1;
+	elseif (theobj == 0x0cab)
+		return 1;
+	elseif ((theobj >= 0x0c99) && (theobj <= 0x0cea))
+		return 1;
+	elseif ((theobj >= 0x0cf3) && (theobj <= 0x0d03))
+		return 1;
+	elseif ((theobj >= 0x0d41) && (theobj <= 0x0dab))
+		return 1;
+	else
+		return 0;
+	endif
+
 endfunction
 
+
 function CarveTree(who, blade, use_on)
-  if(dist(who, use_on) > 2)
-    SendSysMessage(who, "You cannot use that");
-    return;
-  endif
-  CreateItemInBackpack(who, UOBJ_KINDLING, 1);
-  DestroyItem(use_on);
-  SendSysMessage(who, "You chip off some kindling and put it in your backpack.");
+
+	if(dist(who, use_on) > 2)
+		SendSysMessage(who, "You cannot use that");
+		return;
+	endif
+	CreateItemInBackpack(who, UOBJ_KINDLING, 1);
+	DestroyItem(use_on);
+	SendSysMessage(who, "You chip off some kindling and put it in your backpack.");
+
 endfunction
\ No newline at end of file

Modified: trunk/096/pkg/systems/crafting/include/crafting.inc
===================================================================
--- trunk/096/pkg/systems/crafting/include/crafting.inc	2005-09-30 12:52:24 UTC (rev 334)
+++ trunk/096/pkg/systems/crafting/include/crafting.inc	2005-09-30 15:05:18 UTC (rev 335)
@@ -292,7 +292,7 @@
 	endif
 	var temp_list := dictionary;
 	for i := 1 to (parts_list.size()/2)
-		temp_list[CInt(parts_list[i])] := parts_list[i+(parts_list.size()/2)];
+		temp_list[CInt(parts_list[i])] := CInt(parts_list[i+(parts_list.size()/2)]);
 	endfor
 	parts_list := temp_list;
 
@@ -315,17 +315,13 @@
 			var thing_objtype := CInt(thing.objtype);
 			if( thing_objtype in parts_list.keys() )
 				if( CInt(material_list[thing_objtype]) < CInt(parts_list[thing_objtype]) )
-					if( ReserveItem(thing) )
-						material_list[thing_objtype] := CInt(material_list[thing_objtype]) + 1;
-					endif
+					material_list[thing_objtype] := CInt(material_list[thing_objtype]) + thing.amount;
 				endif
 			endif
 		endforeach
 
 		foreach part in ( parts_list.keys() )
-print(material_list[part]);
-print(parts_list[part]);
-			if( material_list[part] != parts_list[part] )
+			if( material_list[part] < parts_list[part] )
 				SendSysMessage(who, "You do not have the required materials to make that.");
 				return 0;
 			endif
@@ -334,16 +330,17 @@
 		sleep(1);
 		if(CraftCheckSkill(who, craft_skill, diff, pts))
 			playCraftWork(who, craft_sound, craft_loops, craft_delay, craft_action);
-			foreach material_objtype in (material_list.keys())
-				var amount := material_list[material_objtype];
+			set_critical(1);
+			foreach material_objtype in (parts_list.keys())
+				var amount := parts_list[material_objtype];
 				if ( amount > 0 )
 					if( !ConsumeSubstance(who.backpack, material_objtype, amount) )
 						SendSysMessage(who, "Error - Unable to consume ["+amount+"] of material ["+material_objtype+"]");
 						return 0;
 					endif
 				endif
-				sleepms(2);
 			endforeach
+			set_critical(0);
 			theitem := CreateItemInBackpack(who, objtype, 1);
 			if(!theitem)
 				SendSysMessage(who, "You don't have enough room in your backpack!");



From muaddiblsd at berlios.de  Fri Sep 30 17:32:09 2005
From: muaddiblsd at berlios.de (Scott E. Royalty at BerliOS)
Date: Fri, 30 Sep 2005 17:32:09 +0200
Subject: [Poldistro-svn] r336 - in trunk/096/pkg: items/containers/container items/sysbook/book other/hooks skills/armslore skills/magery
Message-ID: <200509301532.j8UFW9qj023376@sheep.berlios.de>

Author: muaddiblsd
Date: 2005-09-30 17:32:08 +0200 (Fri, 30 Sep 2005)
New Revision: 336

Modified:
   trunk/096/pkg/items/containers/container/canDestroy.src
   trunk/096/pkg/items/containers/container/canInsert.src
   trunk/096/pkg/items/containers/container/canRemove.src
   trunk/096/pkg/items/sysbook/book/onCreate.src
   trunk/096/pkg/other/hooks/attributeCore.src
   trunk/096/pkg/skills/armslore/armsLore.src
   trunk/096/pkg/skills/magery/nightSight.src
   trunk/096/pkg/skills/magery/poisonDamage.src
Log:
Misc fixes for unused variables in ecompile reports.
Fixed unused includes/removed includes.

Modified: trunk/096/pkg/items/containers/container/canDestroy.src
===================================================================
--- trunk/096/pkg/items/containers/container/canDestroy.src	2005-09-30 15:05:18 UTC (rev 335)
+++ trunk/096/pkg/items/containers/container/canDestroy.src	2005-09-30 15:32:08 UTC (rev 336)
@@ -1,5 +1,8 @@
 // $Id$
 
 program canDestroy(container)
+
+	container := container;
 	return 1;
+
 endprogram

Modified: trunk/096/pkg/items/containers/container/canInsert.src
===================================================================
--- trunk/096/pkg/items/containers/container/canInsert.src	2005-09-30 15:05:18 UTC (rev 335)
+++ trunk/096/pkg/items/containers/container/canInsert.src	2005-09-30 15:32:08 UTC (rev 336)
@@ -6,16 +6,23 @@
 
 
 program canInsert(mobile, container, item, move_type, insert_type, adding_item, existing_stack, amount_to_add)
+
+	amount_to_add := amount_to_add;
+	existing_stack := existing_stack;
+	adding_item := adding_item;
+	insert_type := insert_type;
+	container := container;
+
 	if ( mobile.cmdlevel )
 		return 1;
 	elseif ( move_type == MOVETYPE_COREMOVE )
-		return 1;	
+		return 1;
 	elseif ( CP_RootContainerLocked(item) )
 		SendSysMessage(mobile, "You can't insert items into locked containers.");
 		return 0;
 	endif
-		
-	//To-do 
+
+	//To-do
 	//Play sound effect now that item is being added.
 	return 1;
 endprogram

Modified: trunk/096/pkg/items/containers/container/canRemove.src
===================================================================
--- trunk/096/pkg/items/containers/container/canRemove.src	2005-09-30 15:05:18 UTC (rev 335)
+++ trunk/096/pkg/items/containers/container/canRemove.src	2005-09-30 15:32:08 UTC (rev 336)
@@ -6,16 +6,19 @@
 
 
 program canRemove(mobile, container, item, move_type)
+
+	container := container;
+
 	if ( mobile.cmdlevel )
 		return 1;
 	elseif ( move_type == MOVETYPE_COREMOVE )
-		return 1;	
+		return 1;
 	elseif ( CP_RootContainerLocked(item) )
 		SendSysMessage(mobile, "You can't remove items from locked containers.");
 		return 0;
 	endif
-	
-	//To-do 
+
+	//To-do
 	//Play sound effect now that item is being removed.
 	return 1;
 endprogram

Modified: trunk/096/pkg/items/sysbook/book/onCreate.src
===================================================================
--- trunk/096/pkg/items/sysbook/book/onCreate.src	2005-09-30 15:05:18 UTC (rev 335)
+++ trunk/096/pkg/items/sysbook/book/onCreate.src	2005-09-30 15:32:08 UTC (rev 336)
@@ -1,5 +1,6 @@
 // $Id$
 
 program OnCreate(book)
+	book := book;
 	return 1;
 endprogram

Modified: trunk/096/pkg/other/hooks/attributeCore.src
===================================================================
--- trunk/096/pkg/other/hooks/attributeCore.src	2005-09-30 15:05:18 UTC (rev 335)
+++ trunk/096/pkg/other/hooks/attributeCore.src	2005-09-30 15:32:08 UTC (rev 336)
@@ -93,7 +93,6 @@
   var check := 0;
   var loops := 0;
   var holder, newval, final;
-  var base, true;
   while(check == 0)
     if(loops >= 6)
       break;

Modified: trunk/096/pkg/skills/armslore/armsLore.src
===================================================================
--- trunk/096/pkg/skills/armslore/armsLore.src	2005-09-30 15:05:18 UTC (rev 335)
+++ trunk/096/pkg/skills/armslore/armsLore.src	2005-09-30 15:32:08 UTC (rev 336)
@@ -1,18 +1,16 @@
 use cfgfile;
 use uo;
-use basic;
 
-include "include/client";
-include "include/attributes";
-include "include/skillPoints";
+include ":attributes:attributeConstants";
+include ":attributes:attributes";
+include ":attributes:skillCheck";
 
-
 program skill_armslore(who)
+
 	EraseObjProperty(who, "IsMeditating");
 	EraseObjProperty(who, "HealTimer");
 
 	var quality_descr, damage_descr;
-	var thepoints := (CInt(GetEffectiveSkill(who, SKILLID_ARMSLORE)) * 2) + 20;
 	SendSysMessage(who, "Select an object to evaluate.");
 	var the_item := Target(who, TGTOPT_CHECK_LOS);
 	if (!the_item)
@@ -25,7 +23,7 @@
 		SendSysMessage(who, "You can only use this skill on weapons or armor!");
 		return;
 	endif
-	if(CheckSkill(who, SKILLID_ARMSLORE, -1, thepoints))
+	if(SkillCheck(who, ATTRIBUTE_ARMS_LORE, -1) > 0)
 		var item_max_hp := the_item.maxhp;
 		var max_hp := item_max_hp;
 		var hp := the_item.hp;
@@ -69,4 +67,5 @@
 	else
 		SendSysMessage(who, "You can't quite tell . . .");
 	endif
+
 endprogram

Modified: trunk/096/pkg/skills/magery/nightSight.src
===================================================================
--- trunk/096/pkg/skills/magery/nightSight.src	2005-09-30 15:05:18 UTC (rev 335)
+++ trunk/096/pkg/skills/magery/nightSight.src	2005-09-30 15:32:08 UTC (rev 336)
@@ -8,6 +8,9 @@
 
 
 program nightSight(parms, spellid)
+
+	spellid := spellid;
+
 	var caster := parms.caster;
 	var castOn := parms.castOn;
 
@@ -17,4 +20,5 @@
 	PlayObjectCenteredEffect(castOn, FX_BLESS_EFFECT, 10,10);
 
 	return;
+
 endprogram

Modified: trunk/096/pkg/skills/magery/poisonDamage.src
===================================================================
--- trunk/096/pkg/skills/magery/poisonDamage.src	2005-09-30 15:05:18 UTC (rev 335)
+++ trunk/096/pkg/skills/magery/poisonDamage.src	2005-09-30 15:32:08 UTC (rev 336)
@@ -14,6 +14,7 @@
 	var weapon   := passparms[3];
 	var level    := passparms[4];
 	var pfield   := Cint(passparms[5]);
+	weapon := weapon;
 	if (who.npctemplate)
 		//var npccfg := ReadConfigFile("::npcdesc");
 		if (who.npctemplate == "bladespirit")



